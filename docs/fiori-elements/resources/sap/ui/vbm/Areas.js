/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(["./VoAggregation","sap/ui/unified/Menu","sap/base/Log","./library"],function(e,t,n,i){"use strict";var r="sap.ui.vbm.Areas";var a=e.extend("sap.ui.vbm.Areas",{metadata:{library:"sap.ui.vbm",properties:{posChangeable:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.vbm.Area",multiple:true,singularName:"item"}},events:{edgeClick:{parameters:{instance:{type:"sap.ui.vbm.Area"},edge:{type:"int"}}},edgeContextMenu:{parameters:{instance:{type:"sap.ui.vbm.Area"},edge:{type:"int"}}}}}});a.prototype.getBindInfo=function(){var t=e.prototype.getBindInfo.apply(this,arguments);var n=this.getTemplateBindingInfo();t.C=n?n.hasOwnProperty("color"):true;t.CB=n?n.hasOwnProperty("colorBorder"):true;t.BD=n?n.hasOwnProperty("borderDash"):true;return t};a.prototype.getTemplateObject=function(){var t=e.prototype.getTemplateObject.apply(this,arguments);var i=this.mBindInfo=this.getBindInfo();var a=i.hasTemplate?this.getBindingInfo("items").template:null;t["type"]="{00100000-2012-0004-B001-F311DE491C77}";if(i.C){t["color.bind"]=t.id+".C"}else{t.color=a.getColor()}if(i.CB){t["colorBorder.bind"]=t.id+".CB"}else{t.colorBorder=a.getColorBorder()}if(i.BD){t["borderDash.bind"]=t.id+".BD"}else{t.borderDash=a.getBorderDash()}var s=this.getItems();if(s.length){if(s[0].getPosition().substring(0,1)==="["){t["posarraymulti.bind"]=t.id+".PM"}else{t["posarray.bind"]=t.id+".P"}}else{n.warning("items aggregation must not be empty!","",r)}return t};a.prototype.getTypeObject=function(){var t=e.prototype.getTypeObject.apply(this,arguments);var n=this.mBindInfo;var i=this.getPosChangeable().toString();t.A=t.A.concat([{changeable:i,name:"P",alias:"P",type:"vectorarray"},{changeable:i,name:"PM",alias:"PM",type:"vectorarraymulti"}]);if(n.C){t.A.push({name:"C",alias:"C",type:"color"})}if(n.CB){t.A.push({name:"CB",alias:"CB",type:"string"})}if(n.BD){t.A.push({name:"BD",alias:"BD",type:"string"})}return t};a.prototype.getActionArray=function(){var t=e.prototype.getActionArray.apply(this,arguments);var n=this.getId();if(this.mEventRegistry["click"]||this.isEventRegistered("click")){t.push({id:n+"1",name:"click",refScene:"MainScene",refVO:n,refEvent:"Click",AddActionProperty:[{name:"pos"}]})}if(this.mEventRegistry["contextMenu"]||this.isEventRegistered("contextMenu")){t.push({id:n+"2",name:"contextMenu",refScene:"MainScene",refVO:n,refEvent:"ContextMenu"})}if(this.mEventRegistry["drop"]||this.isEventRegistered("drop")){t.push({id:n+"3",name:"drop",refScene:"MainScene",refVO:n,refEvent:"Drop"})}if(this.mEventRegistry["edgeClick"]||this.isEventRegistered("edgeClick")){t.push({id:n+"7",name:"edgeClick",refScene:"MainScene",refVO:n,refEvent:"EdgeClick"})}if(this.mEventRegistry["edgeContextMenu"]||this.isEventRegistered("edgeContextMenu")){t.push({id:n+"8",name:"edgeContextMenu",refScene:"MainScene",refVO:n,refEvent:"EdgeContextMenu"})}return t};a.prototype.handleEvent=function(i){var a=i.Action.name;if(a=="edgeContextMenu"||a=="edgeClick"){var s="fire"+a[0].toUpperCase()+a.slice(1);var o;if(o=this.findInstance(i.Action.instance)){var p={data:i,edge:parseInt(i.Action.Params.Param["2"]["#"],10)};if(a=="edgeContextMenu"){o.mClickPos=[i.Action.Params.Param[0]["#"],i.Action.Params.Param[1]["#"]];if(this.oParent.mVBIContext.m_Menus){this.oParent.mVBIContext.m_Menus.deleteMenu("DynContextMenu")}var g=new t;g.vbi_data={};g.vbi_data.menuRef="CTM";g.vbi_data.VBIName="DynContextMenu";p.menu=g}if(o.mEventRegistry[a]){o[s](p)}if(this.mEventRegistry[a]){p.instance=o;this[s](p)}}else{n.error("Instance for event not found","",r)}}else{e.prototype.handleEvent.apply(this,arguments)}};return a});