/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","./library","sap/ui/core/Control","./FormattedTextViewRenderer","sap/ui/core/library","sap/base/security/sanitizeHTML"],function(e,t,r,i,n,s){"use strict";var a=n.AccessibleRole;var o=r.extend("sap.ui.commons.FormattedTextView",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{accessibleRole:{type:"sap.ui.core.AccessibleRole",group:"Accessibility",defaultValue:a.Document},htmlText:{type:"string",group:"Misc",defaultValue:""}},aggregations:{controls:{type:"sap.ui.core.Control",multiple:true,singularName:"control"}}}});o.prototype.init=function(){this._renderingRules={};this._renderingRules.ATTRIBS={"span::class":1,"div::class":1,"div::id":1,"span::id":1,"embed::data-index":1};this._renderingRules.ELEMENTS={abbr:1,acronym:1,address:1,blockquote:1,br:1,cite:1,code:1,dfn:1,div:1,em:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,kbd:1,p:1,pre:1,q:1,samp:1,strong:1,span:1,var:1,dl:1,dt:1,dd:1,ol:1,ul:1,li:1,embed:1}};o.prototype.exit=function(){delete this._renderingRules};o.prototype.hasControls=function(){var e=this.getAggregation("controls");return!!(e&&e.length>0)};var l=function(t,r){var i=/^[0-9]*$/;for(var n=0;n<r.length;n+=2){var s=t+"::"+r[n];if(this._renderingRules.ATTRIBS[s]){if(t==="embed"&&!r[n+1].match(i)){return null}}else{var a="<"+t+"> with attribute ["+r[n]+'="'+r[n+1]+'"] is not allowed and cut';e.warning(a,this);r[n+1]=null}}return r};var u=function(t,r){if(this._renderingRules.ELEMENTS[t]){return l.call(this,t,r)}else{var i="<"+t+"> is not allowed";e.warning(i,this)}};o.prototype.setHtmlText=function(e){var t=s(e,{tagPolicy:u.bind(this)});this.setProperty("htmlText",t);return this};var c=function(e){if(this.hasControls()){this.removeAllAggregation("controls")}var t=Array.isArray(e);if(t&&e.length>0){for(var r=0;r<e.length;r++){this.addAggregation("controls",e[r],true)}this.invalidate()}};o.prototype.setContent=function(e,t){this.setHtmlText(e);c.call(this,t)};return o});