/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./Dialog","./library","sap/ui/core/Control","./MessageRenderer","./Button","sap/ui/core/Configuration","sap/ui/dom/jquery/rect"],function(t,e,s,i,o,n,a){"use strict";var r=i.extend("sap.ui.commons.Message",{metadata:{deprecated:true,library:"sap.ui.commons",properties:{type:{type:"sap.ui.commons.MessageType",group:"Behavior",defaultValue:null},text:{type:"string",group:"Data",defaultValue:null},associatedElementId:{type:"string",group:"Data",defaultValue:null},design:{type:"string",group:"Misc",defaultValue:null}}}});r.prototype.init=function(){this.isRTL=a.getRTL();this.fnCallBack=null;this.oLink=null;this.oContainer=null;this.oDetails=null;this.oBtnOK=null};r.prototype.exit=function(){if(this.oLink){this.oLink.destroy();this.oLink=null}if(this.oDetails){this.oDetails.destroy();this.oDetails=null}if(this.oContainer){this.oContainer.destroy();this.oContainer=null}if(this.oBtnOK){this.oBtnOK.destroy();this.oBtnOK=null}};r.closeDetails=function(t){t.getSource().getParent().close()};r.prototype.closeDetails=function(){if(this.oContainer){this.oContainer.close()}};r.prototype.openDetails=function(){if(!this.oContainer){var s=sap.ui.getCore().getLibraryResourceBundle("sap.ui.commons");var i=s.getText("MSGBAR_DETAILS_DIALOG_CLOSE");var o=s.getText("MSGBAR_DETAILS_DIALOG_TITLE");var a=this.fnCallBack(this.getId());this.oDetails=new r({type:this.getType(),text:a});this.oBtnOK=new n({text:i,press:r.closeDetails});this.oContainer=new e;this.oContainer.addContent(this.oDetails);this.oContainer.setTitle(o);this.oContainer.addButton(this.oBtnOK)}var l=this.oContainer.getId();var f=0;var p=t(".sapUiDlg");for(var u=p.length-1;u>=0;u--){if(t(p[u]).css("visibility")!="visible"){p.splice(u,1)}else if(p[u].id==l){p.splice(u,1)}else{f=Math.max(f,t(p[u]).css("zIndex"))}}var h=this.oContainer.isOpen();this.oContainer.open();var c=this.oContainer.$();var d=c.rect();if(p.length==0){if(this.isRTL){d.left=Number(c.css("right").replace("px",""))}this.setLastOffsets(d);return}if(h){if(f>c.css("zIndex")){c.css("zIndex",f+1)}return}var g=this.getNextOffsets();c.css("top",g.top-r.TOP_INCR+"px");if(this.isRTL){c.css("right",g.left-r.LEFT_INCR+"px")}else{c.css("left",g.left-r.LEFT_INCR+"px")}var d=c.rect();var C=t(window).scrollTop();var L=t(window).scrollLeft();var y=-L;if(t(window).height()+C<g.top+d.height){g.top=C;this.setLastOffsets(g)}if(this.isRTL){if(t(window).width()+y<g.left+d.width){g.left=y;this.setLastOffsets(g)}c.animate({top:g.top+"px",right:g.left+"px"},200)}else{if(t(window).width()+L<g.left+d.width){g.left=L;this.setLastOffsets(g)}c.animate({top:g.top+"px",left:g.left+"px"},200)}};r.TOP_INCR=20;r.LEFT_INCR=10;var l=null;r.setLastOffsets=function(t){l=t};r.prototype.setLastOffsets=function(t){r.setLastOffsets(t)};r.getNextOffsets=function(){l.top+=r.TOP_INCR;l.left+=r.LEFT_INCR;return l};r.prototype.getNextOffsets=function(){return r.getNextOffsets()};r.prototype.bindDetails=function(t){this.fnCallBack=t};return r});