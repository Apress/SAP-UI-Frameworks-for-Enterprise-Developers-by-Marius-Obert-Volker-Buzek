/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/p13n/Engine","sap/ui/mdc/flexibility/Util","sap/ui/fl/changeHandler/condenser/Classification"],function(e,t,n){"use strict";var r=function(e,t,n,r){if(r){e.resetRevertData()}else{e.setRevertData(n)}};var a=function(e,n,a,i){return new Promise(function(o,g){var s=i===t.REVERT;var c=a.modifier;var v=s?e.getRevertData():e.getContent();Promise.resolve().then(c.getProperty.bind(c,n,"aggregateConditions")).then(function(t){var a=t?t:{};a[v.name]={};var i={name:v.name};c.setProperty(n,"aggregateConditions",a);r(e,n,i,s);o()}).catch(function(e){g(e)})})};var i=function(e,n,a,i){return new Promise(function(o,g){var s=i===t.REVERT;var c=a.modifier;var v=s?e.getRevertData():e.getContent();Promise.resolve().then(c.getProperty.bind(c,n,"aggregateConditions")).then(function(t){var a=t?t:{};if(!a){g()}delete a[v.name];c.setProperty(n,"aggregateConditions",a);r(e,n,v,s);o()}).catch(function(e){g(e)})})};var o={};var g=function(e,t){var r=e.getContent();return{classification:n.Reverse,affectedControl:e.getSelector(),uniqueKey:"aggregate"+"_"+r.name}};o.addAggregate=t.createChangeHandler({apply:a,revert:i,getCondenserInfo:g});o.removeAggregate=t.createChangeHandler({apply:i,revert:a,getCondenserInfo:g});return o});