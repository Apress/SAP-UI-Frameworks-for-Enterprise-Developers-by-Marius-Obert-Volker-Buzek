/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/base/Log"],function(t,e){"use strict";var i={};var r="sap.ui.mdc.IFilter";i.setFilter=function(e){var i=typeof e==="object"?e.getId():e;var r=this.getFilter();if(r!==i){this._validateFilter(e);var n=t.byId(this.getFilter());if(n){s(this,n)}this.setAssociation("filter",e,true);var o=t.byId(this.getFilter());if(o){a(this,o)}}return this};function n(t){this._rebind();if(this._onFilterSearch){this._onFilterSearch(t)}}function o(t){if(this._onFiltersChanged){this._onFiltersChanged(t)}}function a(t,e){e.attachSearch(n,t);if(e.attachFiltersChanged instanceof Function){e.attachFiltersChanged(o,t)}if(t._onFilterProvided instanceof Function){t._onFilterProvided(e)}}function s(t,e){e.detachSearch(n,t);if(e.detachFiltersChanged instanceof Function){e.detachFiltersChanged(o,t)}if(t._onFilterRemoved instanceof Function){t._onFilterRemoved(e)}}function l(t){if(!(t&&t.getMetadata()&&t.getMetadata().hasAssociation("filter"))){throw new Error("Please add the 'filter' association to your control metadata"+t)}if(!(t.rebind instanceof Function)){throw new Error("Please implement the method 'rebind' for the control "+t)}if(!(t.isFilteringEnabled instanceof Function)){throw new Error("Please implement the method isFilteringEnabled for the control "+t)}}i._validateFilter=function(e){l(this);var i=typeof e==="object"?e:t.byId(e);if(i&&!i.isA(r)){throw new Error('"'+e+'" is not valid for association "filter".'+' Please use an object that implements the "'+r+'" interface')}};i.rebind=function(){if(this.bIsDestroyed){return}var e;var i;var r=t.byId(this.getFilter()),n=this.isFilteringEnabled();if(n||r){if(r){e=r.validate(true)}if(n){i=this.retrieveInbuiltFilter().then(function(t){return t.validate(true)})}Promise.all([e,i]).then(function(){this._rebind()}.bind(this),function(){})}else{this._rebind()}};i._getLabelsFromFilterConditions=function(){var t=[];if(this.getFilterConditions){var i=this.getFilterConditions();Object.keys(i).forEach(function(r){if(!i[r]||i[r].length<1){return}var n=this.getPropertyHelper().getProperty(r)?this.getPropertyHelper().getProperty(r).label:r;if(n){t.push(n)}if(!n||n===r){e.error("No valid property found for filter with key "+r+". Check your metadata.")}}.bind(this))}return t};return function(){this.setFilter=i.setFilter;this._validateFilter=i._validateFilter;this.rebind=i.rebind;this._getLabelsFromFilterConditions=i._getLabelsFromFilterConditions}});