/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/base/ManagedObjectObserver","sap/ui/mdc/condition/Condition","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/ConditionValidated","sap/base/strings/formatMessage"],function(e,t,n,o,i,r,a,p){"use strict";var u=e.extend("sap.ui.mdc.valuehelp.base.Content",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""},shortTitle:{type:"string",group:"Appearance",defaultValue:""},tokenizerTitle:{type:"string",group:"Appearance",defaultValue:""},conditions:{type:"object[]",defaultValue:[],byValue:true},filterValue:{type:"string",defaultValue:""},config:{type:"object",defaultValue:{}},visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{displayContent:{type:"sap.ui.core.Control",multiple:false}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},cancel:{},requestSwitchToDialog:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}}}}});u.prototype.init=function(){this._oObserver=new n(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions","config"]});this._oOperator=i.getEQOperator()};u.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};u.prototype.setProperty=function(t,n,o){if(t==="conditions"||t==="filterValue"||t==="config"){o=true}return e.prototype.setProperty.apply(this,[t,n,o])};u.prototype.getContent=function(){};u.prototype.getContainerConfig=function(){};u.prototype.onBeforeShow=function(e){};u.prototype.onShow=function(e){this._bVisible=true;this._handleConditionsUpdate()};u.prototype.getInitialFocusedControl=function(){return null};u.prototype.onHide=function(){this._bVisible=false};u.prototype.getItemForValue=function(e){return undefined};u.prototype.isValidationSupported=function(){return false};u.prototype.getScrollDelegate=function(){var e=this.getParent();return e&&e.getScrollDelegate()};u.prototype._observeChanges=function(e){if(e.name==="conditions"){this._handleConditionsUpdate(e)}if(e.name==="filterValue"){this._handleFilterValueUpdate(e)}if(e.name==="config"){l.call(this,e.current)}};u.prototype._handleFilterValueUpdate=function(e){if(this.isContainerOpen()&&this.isTypeahead()){var t=this._getValueHelpDelegate();var n=this._getValueHelpDelegatePayload();Promise.resolve(!!t&&t.showTypeahead(n,this)).then(function(e){if(!e){this.fireCancel()}}.bind(this))}};u.prototype._handleConditionsUpdate=function(e){};u.prototype._createCondition=function(e,t,n){var i=c.call(this);var p=[e];if(i.valueTypes.length>1&&i.valueTypes[1]!==r.ValueType.Static&&t!==null&&t!==undefined){p.push(t)}return o.createCondition(i.name,p,undefined,undefined,a.Validated,n)};u.prototype.removeFocus=function(){};u.prototype.navigate=function(e){};u.prototype.getUIArea=function(){var t=this.getParent();if(t&&t._getUIAreaForContent){return t._getUIAreaForContent()}return e.prototype.getUIArea.apply(this,arguments)};u.prototype.isTypeahead=function(){var e=this.getParent();return e&&e.isTypeahead()};u.prototype.isSearchSupported=function(){return false};u.prototype.provideScrolling=function(){var e=this.getParent();return!e||!e.providesScrolling()};u.prototype.isContainerOpen=function(){var e=this.getParent();return e&&e.isOpen()};u.prototype.isContainerOpening=function(){var e=this.getParent();return e&&e.isOpening()};u.prototype._getValueHelpDelegate=function(){var e=this.getParent();return e&&e.getValueHelpDelegate()};u.prototype._getValueHelpDelegatePayload=function(){var e=this.getParent();return e&&e.getValueHelpDelegatePayload()};u.prototype._awaitValueHelpDelegate=function(){var e=this.getParent();return e&&e.awaitValueHelpDelegate()};u.prototype._isValueHelpDelegateInitialized=function(){var e=this.getParent();return e&&e.isValueHelpDelegateInitialized()};u.prototype.getControl=function(){var e=this.getParent();return e&&e.getControl()};u.prototype.getCount=function(e){return 0};u.prototype.getValueHelpIcon=function(){};u.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"listbox",roleDescription:null}};u.prototype._isSingleSelect=function(e){return this._getMaxConditions()===1};u.prototype.shouldOpenOnClick=function(){return false};u.prototype.shouldOpenOnNavigate=function(){return!this._isSingleSelect()};u.prototype.isNavigationEnabled=function(e){return false};u.prototype.isFocusInHelp=function(){return!this.isTypeahead()};u.prototype.isMultiSelect=function(){return!this._isSingleSelect()};u.prototype.isQuickSelectSupported=function(){return false};u.prototype.getRequiresTokenizer=function(){return true};function l(e){s.call(this,e.operators)}function s(e){this._oOperator=i.getEQOperator(e)}function c(){return this._oOperator}u.prototype.getFormattedTitle=function(e){var t=this.getTitle();if(t){t=p(t,e?e:"")}return t};u.prototype.getFormattedShortTitle=function(){return this.getShortTitle()};u.prototype.getFormattedTokenizerTitle=function(e){var t=this.getTokenizerTitle();if(t){t=p(t,e?e:"")}return t};u.prototype._getMaxConditions=function(){var e=this.getConfig();return e&&e.maxConditions};u.prototype.onContainerClose=function(){};u.prototype.onContainerOpen=function(){};u.prototype.onConnectionChange=function(){};t.call(u.prototype);return u});