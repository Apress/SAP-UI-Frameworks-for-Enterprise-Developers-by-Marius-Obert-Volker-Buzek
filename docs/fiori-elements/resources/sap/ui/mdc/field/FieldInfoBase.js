/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/ui/mdc/Element","sap/m/library","sap/m/ResponsivePopover"],function(e,t,n,i){"use strict";var r=n.PlacementType;var o=t.extend("sap.ui.mdc.field.FieldInfoBase",{metadata:{library:"sap.ui.mdc",events:{dataUpdate:{},popoverAfterOpen:{}}}});o.prototype.isTriggerable=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method isTriggerable must be redefined")};o.prototype.getTriggerHref=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getTriggerHref must be redefined")};o.prototype.getDirectLinkHrefAndTarget=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getDirectLinkHrefAndTarget must be redefined")};o.prototype.open=function(e){e=e?e:this.getParent();if(!e){throw new Error("sap.ui.mdc.field.FieldInfoBase: popover can not be open because the control is undefined")}var t=this.getDependents().find(function(e){return e.isA("sap.m.ResponsivePopover")});if(t&&t.isOpen()){return Promise.resolve()}return this.checkDirectNavigation().then(function(t){return t?Promise.resolve():this.createPopover().then(function(t){if(t){t.openBy(e);t.attachAfterOpen(function(){this.firePopoverAfterOpen()}.bind(this))}}.bind(this))}.bind(this))};o.prototype.getContent=function(e){throw new Error("sap.ui.mdc.field.FieldInfoBase: method getContent must be redefined")};o.prototype.checkDirectNavigation=function(){throw new Error("sap.ui.mdc.field.FieldInfoBase: method checkDirectNavigation must be redefined")};o.prototype.getSourceControl=function(){return this.getParent()};o.prototype.createPopover=function(){var t;return this.getContent(function(){return t}).then(function(n){t=new i(this.getId()+"-popover",{contentWidth:"380px",horizontalScrolling:false,showHeader:e.system.phone,placement:r.Auto,content:[n],afterClose:function(e){if(e.getSource()){e.getSource().destroy()}}});this.addDependent(t);return new Promise(function(e,i){sap.ui.require(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(i){if(i.isFlexSupported({element:n})){i.waitForChanges({element:n}).then(function(){t.addAriaLabelledBy(n.getContentTitle?n.getContentTitle():"");e(t)})}else if(n){t.addAriaLabelledBy(n.getContentTitle?n.getContentTitle():"");e(t)}})})}.bind(this))};return o});