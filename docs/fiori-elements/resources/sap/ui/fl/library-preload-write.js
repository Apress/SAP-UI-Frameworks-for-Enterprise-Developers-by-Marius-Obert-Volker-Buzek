//@ui5-bundle sap/ui/fl/library-preload-write.js
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/FakeLrepConnector",["sap/ui/fl/Cache","sap/ui/fl/write/_internal/connectors/ObjectPathConnector","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils","sap/ui/core/Configuration"],function(e,t,n,i){"use strict";var r={};var c="sap.ui.fl";r.prototype={};r.enableFakeConnector=function(e){this.setFlexibilityServicesAndClearCache("LocalStorageConnector",e)};r.setFlexibilityServicesAndClearCache=function(n,r){this._oFlexibilityServices=i.getFlexibilityServices();var c=[];if(r){t.setJsonPath(r);c.push({connector:"ObjectPathConnector"})}c.push({connector:n});i.setFlexibilityServices(c);e.clearEntries()};r.disableFakeConnector=function(){r.prototype={};e.clearEntries();if(this._oFlexibilityServices){i.setFlexibilityServices(this._oFlexibilityServices);delete this._oFlexibilityServices}};r.forTesting={getNumberOfChanges:function(e,t){return e.loadFlexData({reference:t}).then(function(e){return e.reduce(function(e,t){return e+t.changes.length},0)})},spyMethod:function(e,t,n,i){var r=e.spy(n,i);return function(e,n){n=n||0;var c=r.getCall(n).args[0].flexObjects.length;t.equal(c,e,i+" was called "+e+" times")}},clear:function(t,n){e.clearEntries();return t.reset(n)},setStorage:function(e,t){e.storage=t},synchronous:{clearAll:function(e){var t=function(t){var n=t.includes(c);if(!n){return}e.removeItem(t)};Object.keys(e).map(t)},store:function(e,t,i){var r=n.createFlexKey(t);var c=JSON.stringify(i);e.setItem(r,c)},getNumberOfChanges:function(e,t){return Object.keys(e).filter(function(i){return i.includes(c)&&n.isSameReference(JSON.parse(e.getItem(i)),t)}).length}}};return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/FakeLrepConnectorLocalStorage",["sap/ui/fl/FakeLrepConnector","sap/ui/fl/write/_internal/connectors/LocalStorageConnector"],function(e,n){"use strict";return{enableFakeConnector:function(n){var o=n?n.sInitialComponentJsonPath:undefined;e.setFlexibilityServicesAndClearCache("LocalStorageConnector",o)},disableFakeConnector:function(){e.disableFakeConnector()},forTesting:{spyWrite:function(o,r){return e.forTesting.spyMethod(o,r,n,"write")},getNumberOfChanges:function(o){return e.forTesting.getNumberOfChanges(n,o)},synchronous:{clearAll:function(){e.forTesting.synchronous.clearAll(window.localStorage)},store:function(n,o){e.forTesting.synchronous.store(window.localStorage,n,o)}}}}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/FakeLrepConnectorSessionStorage",["sap/ui/fl/FakeLrepConnector","sap/ui/fl/write/_internal/connectors/SessionStorageConnector"],function(e,n){"use strict";return{enableFakeConnector:function(n){var r=n?n.sInitialComponentJsonPath:undefined;e.setFlexibilityServicesAndClearCache("SessionStorageConnector",r)},disableFakeConnector:function(){e.disableFakeConnector()},forTesting:{spyWrite:function(r,t){return e.forTesting.spyMethod(r,t,n,"write")},getNumberOfChanges:function(r){return e.forTesting.getNumberOfChanges(n,r)},clear:function(r){return e.forTesting.clear(n,r)},setStorage:function(r){e.forTesting.setStorage(n,r)},synchronous:{clearAll:function(){e.forTesting.synchronous.clearAll(window.sessionStorage)},getNumberOfChanges:function(r){return e.forTesting.synchronous.getNumberOfChanges(n.storage,r)}}}}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/FakeLrepLocalStorage",["sap/ui/fl/FakeLrepConnectorLocalStorage"],function(e){"use strict";return{deleteChanges:function(){return e.forTesting.synchronous.clearAll()}}},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/descriptorRelated/api/DescriptorInlineChangeFactory",["sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/base/util/merge"],function(e,a,r){"use strict";function t(e,a,t){var n=r({},{changeType:e},{content:a});if(t){n.texts=t}return n}var n={};n.getDescriptorChangeTypes=function(){return a.getChangeTypes()};n.getCondensableDescriptorChangeTypes=function(){return a.getCondensableChangeTypes()};n.createNew=function(a,r,n){var p=t(a,r,n);return e.createNew(p)};n.createDescriptorInlineChange=function(a,r,n){var p=t(a,r,n);return e.createDescriptorInlineChange(p)};n.create_ovp_addNewCard=function(a,r){var n=t("appdescr_ovp_addNewCard",a,r);return e.create_ovp_addNewCard(n)};n.create_ovp_removeCard=function(a){var r=t("appdescr_ovp_removeCard",a);return e.create_ovp_removeCard(r)};n.create_ovp_changeCard=function(a,r){var n=t("appdescr_ovp_changeCard",a,r);return e.create_ovp_changeCard(n)};n.create_app_addNewInbound=function(a,r){var n=t("appdescr_app_addNewInbound",a,r);return e.create_app_addNewInbound(n)};n.create_app_removeInbound=function(a){var r=t("appdescr_app_removeInbound",a);return e.create_app_removeInbound(r)};n.create_app_removeAllInboundsExceptOne=function(a){var r=t("appdescr_app_removeAllInboundsExceptOne",a);return e.create_app_removeAllInboundsExceptOne(r)};n.create_app_changeInbound=function(a,r){var n=t("appdescr_app_changeInbound",a,r);return e.create_app_changeInbound(n)};n.create_app_addNewOutbound=function(a){var r=t("appdescr_app_addNewOutbound",a);return e.create_app_addNewOutbound(r)};n.create_app_removeOutbound=function(a){var r=t("appdescr_app_removeOutbound",a);return e.create_app_removeOutbound(r)};n.create_app_changeOutbound=function(a){var r=t("appdescr_app_changeOutbound",a);return e.create_app_changeOutbound(r)};n.create_app_addNewDataSource=function(a){var r=t("appdescr_app_addNewDataSource",a);return e.create_app_addNewDataSource(r)};n.create_app_removeDataSource=function(a){var r=t("appdescr_app_removeDataSource",a);return e.create_app_removeDataSource(r)};n.create_app_changeDataSource=function(a){var r=t("appdescr_app_changeDataSource",a);return e.create_app_changeDataSource(r)};var p={BEGINNING:"BEGINNING",END:"END"};n.create_app_addAnnotationsToOData=function(a){var r=t("appdescr_app_addAnnotationsToOData",a);return e.create_app_addAnnotationsToOData(r)};n.create_app_setTitle=function(a,r){if(!r){r={"":a};a={}}var n=t("appdescr_app_setTitle",a,r);return e.create_app_setTitle(n)};n.create_app_setSubTitle=function(a,r){if(!r){r={"":a};a={}}var n=t("appdescr_app_setSubTitle",a,r);return e.create_app_setSubTitle(n)};n.create_app_setShortTitle=function(a,r){if(!r){r={"":a};a={}}var n=t("appdescr_app_setShortTitle",a,r);return e.create_app_setShortTitle(n)};n.create_app_setDescription=function(a,r){if(!r){r={"":a};a={}}var n=t("appdescr_app_setDescription",a,r);return e.create_app_setDescription(n)};n.create_app_setInfo=function(a,r){if(!r){r={"":a};a={}}var n=t("appdescr_app_setInfo",a,r);return e.create_app_setInfo(n)};n.create_app_setAch=function(a){var r=t("appdescr_app_setAch",a);return e.create_app_setAch(r)};n.create_app_setDestination=function(a){var r=t("appdescr_app_setDestination",a);return e.create_app_setDestination(r)};n.create_app_setKeywords=function(a,r){var n=t("appdescr_app_setKeywords",a,r);return e.create_app_setKeywords(n)};n.create_app_addTechnicalAttributes=function(a){var r=t("appdescr_app_addTechnicalAttributes",a);return e.create_app_addTechnicalAttributes(r)};n.create_app_removeTechnicalAttributes=function(a){var r=t("appdescr_app_removeTechnicalAttributes",a);return e.create_app_removeTechnicalAttributes(r)};n.create_app_addCdsViews=function(a){var r=t("appdescr_app_addCdsViews",a);return e.create_app_addCdsViews(r)};n.create_app_removeCdsViews=function(a){var r=t("appdescr_app_removeCdsViews",a);return e.create_app_removeCdsViews(r)};n.create_flp_setConfig=function(a){var r=t("appdescr_flp_setConfig",a);return e.create_flp_setConfig(r)};n.create_ui5_addNewModel=function(a){var r=t("appdescr_ui5_addNewModel",a);return e.create_ui5_addNewModel(r)};n.create_ui5_removeModel=function(a){var r=t("appdescr_ui5_removeModel",a);return e.create_ui5_removeModel(r)};n.create_ui5_addNewModelEnhanceWith=function(a,r){var n=t("appdescr_ui5_addNewModelEnhanceWith",a,r);return e.create_ui5_addNewModelEnhanceWith(n)};n.create_ui5_replaceComponentUsage=function(a){var r=t("appdescr_ui5_replaceComponentUsage",a);return e.create_ui5_replaceComponentUsage(r)};n.create_ui5_addLibraries=function(a){var r=t("appdescr_ui5_addLibraries",a);return e.create_ui5_addLibraries(r)};n.create_ui5_setMinUI5Version=function(a){var r=t("appdescr_ui5_setMinUI5Version",a);return e.create_ui5_setMinUI5Version(r)};n.create_smb_addNamespace=function(a){var r=t("appdescr_smb_addNamespace",a);return e.create_smb_addNamespace(r)};n.create_smb_changeNamespace=function(a){var r=t("appdescr_smb_changeNamespace",a);return e.create_smb_changeNamespace(r)};n.create_ui_generic_app_setMainPage=function(a,r){var n=t("appdescr_ui_generic_app_setMainPage",a,r);return e.create_ui_generic_app_setMainPage(n)};n.create_ui_setIcon=function(a){var r=t("appdescr_ui_setIcon",a);return e.create_ui_setIcon(r)};n.create_ui_setDeviceTypes=function(a){var r=t("appdescr_ui_setDeviceTypes",a);return e.create_ui_setDeviceTypes(r)};n.create_url_setUri=function(a){var r=t("appdescr_url_setUri",a);return e.create_url_setUri(r)};n.create_fiori_setRegistrationIds=function(a){var r=t("appdescr_fiori_setRegistrationIds",a);return e.create_fiori_setRegistrationIds(r)};n.create_ui5_setFlexExtensionPointEnabled=function(a){var r=t("appdescr_ui5_setFlexExtensionPointEnabled",a);return e.create_ui5_setFlexExtensionPointEnabled(r)};n.create_fiori_setAbstract=function(a){var r=t("appdescr_fiori_setAbstract",a);return e.create_fiori_setAbstract(r)};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/descriptorRelated/api/DescriptorVariantFactory",["sap/ui/fl/write/_internal/appVariant/AppVariantFactory"],function(e){"use strict";var r={};r.createNew=function(e){return r.createAppVariant(e)};r.createAppVariant=function(r){return e.prepareCreate(r)};r.createForExisting=function(r){return e.prepareUpdate({id:r})};r.createDeletion=function(r){return e.prepareDelete({id:r})};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/BackendConnector",["sap/ui/fl/initial/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(n,e){"use strict";return{xsrfToken:undefined,settings:undefined,sendRequest:function(t){var i=e(t,["version","allContexts"]);if(this.isLanguageInfoRequired){n.addLanguageInfo(i)}var s=n.getUrl(this.ROUTES.DATA,t,i);return n.sendRequest(s,"GET",{initialConnector:this,xsrfToken:this.xsrfToken}).then(function(n){var e=n.response;if(n.etag){e.cacheKey=n.etag}if(e.settings){this.settings=e.settings}return e}.bind(this))},loadFlexData:function(n){return this.sendRequest(n).then(function(n){n.changes=n.changes.concat(n.compVariants||[]);return n})}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/KeyUserConnector",["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(e,n,a){"use strict";var t="/flex/keyuser";var c="/v2";var r=e({},n,{layers:[a.CUSTOMER,a.PUBLIC],API_VERSION:c,ROUTES:{DATA:t+c+"/data/"},isLanguageInfoRequired:true,loadFlexData:function(e){return n.sendRequest.call(r,e).then(function(e){e.contents.map(function(e,n,a){a[n].changes=(e.changes||[]).concat(e.compVariants)});e.contents.cacheKey=e.cacheKey;return e.contents})}});return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/NeoLrepConnector",["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/LrepConnector"],function(n,e){"use strict";return n({},e,{})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/PersonalizationConnector",["sap/base/util/merge","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/Layer"],function(n,a,e){"use strict";var i="/flex/personalization";var r="/v1";var t=n({},a,{layers:[e.USER],ROUTES:{DATA:i+r+"/data/"}});return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/resolveBinding",["sap/ui/base/ManagedObject","sap/ui/fl/Utils"],function(e,t){"use strict";var n=e.extend("sap.ui.fl.util.HelperControl",{metadata:{library:"sap.ui.fl",properties:{resolved:{type:"any"}}}});return function(i,r){if(!t.isBinding(i)){return undefined}var o=t.getViewForControl(r);var s=o&&o.getController();var a=typeof i==="string"?e.bindingParser(i,s):Object.assign({},i);if(!a){return undefined}var d=new n;var l=a.parts||[a];l.forEach(function(e){var t=e.model;if(t){d.setModel(r.getModel(t),t);d.setBindingContext(r.getBindingContext(t),t)}else{d.setModel(r.getModel());d.setBindingContext(r.getBindingContext())}});d.bindProperty("resolved",a);var u=d.getResolved();d.destroy();return u}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/variants/context/Component",["sap/ui/core/UIComponent"],function(e){"use strict";return e.extend("sap.ui.fl.variants.context.Component",{metadata:{manifest:"json"},onInit:function(){var e=this.getModel("selectedContexts");e.setProperty("/selected",[])},getSelectedContexts:function(){var e=this.getModel("selectedContexts").getProperty("/selected");var t=e.map(function(e){return e.id});return{role:t}},getSelectedContextsModel:function(){return this.getModel("selectedContexts")},setSelectedContexts:function(e){var t=e.role.map(function(e){return{id:e,description:""}});var s=this.getModel("selectedContexts");s.setProperty("/selected",t);s.refresh(true)},resetSelectedContexts:function(){var e=this.getModel("selectedContexts");e.setProperty("/selected",[]);e.refresh(true)},hasErrorsAndShowErrorMessage:function(){return false},showMessageStrip:function(e){var t=this.getModel("selectedContexts");t.setProperty("/showMessageStrip",e);t.refresh(true)}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/variants/context/controller/ContextVisibility.controller",["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/fl/write/_internal/Storage","sap/ui/fl/Layer","sap/base/util/restricted/_isEqual"],function(e,t,n,o,i){"use strict";function r(e){var t={layer:o.CUSTOMER,type:"role"};return Object.assign({},t,e)}function s(e){var t={layer:o.CUSTOMER,flexObjects:e};return n.loadContextDescriptions(t).then(function(t){if(t.role&&t.role.length===e.role.length){this.oSelectedContextsModel.setProperty("/selected",t.role)}}.bind(this))}function l(){return t.load({id:this.getView().getId(),name:"sap.ui.fl.variants.context.view.fragment.AddContextDialog",controller:this}).then(function(e){this.getView().addDependent(e);e._oList.attachUpdateStarted(this._updateStartedHandler.bind(this));e._oList.attachSelectionChange(this._onSelectionChange.bind(this));return e}.bind(this))}function a(e,t){return n.getContexts(r(e)).then(function(e){if(t){e.values=t.concat(e.values)}this.oContextsModel.setData(e);this.oContextsModel.refresh(true)}.bind(this))}function c(e){return{id:e.getTitle(),description:e.getDescription()}}return e.extend("sap.ui.fl.variants.context.controller.ContextVisibility",{onInit:function(){this.oSelectedContextsModel=this.getView().getModel("selectedContexts");this.oContextsModel=this.getView().getModel("contexts");this.oI18n=this.getView().getModel("i18n").getResourceBundle()},onBeforeRendering:function(){this.oSelectedContextsModel.refresh(true);var e=this.getOwnerComponent().getSelectedContexts();var t=e.role.length>0;if(t){return s.call(this,e)}return Promise.resolve()},_onSelectionChange:function(e){var t=c(e.getParameter("listItem"));if(e.getParameter("selected")===true){this.oCurrentSelection.push(t)}else{this.oCurrentSelection=this.oCurrentSelection.filter(function(e){return!i(e,t)})}},isSelected:function(e,t){return t.some(function(t){return t.id===e.id})},formatTooltip:function(e){if(!this.oI18n){this.oI18n=this.getView().getModel("i18n").getResourceBundle()}return e.length===0?this.oI18n.getText("NO_DESCRIPTION"):e},_appendDataFromBackend:function(){var e=this.oContextsModel.getProperty("/values");if(this.oContextsModel.getProperty("/lastHitReached")===false){var t={$skip:e.length};return a.call(this,t,e)}return Promise.resolve(e)},_updateStartedHandler:function(e){if(e.getParameter&&e.getParameter("reason")==="Growing"){return this._appendDataFromBackend()}return Promise.resolve()},_addContexts:function(e){e.clearSelection();this.oCurrentSelection=this.oSelectedContextsModel.getProperty("/selected")||[];return a.call(this,{}).then(function(){return e.open()})},onAddContextsHandler:function(){if(!this._oDialog){this._oDialog=l.call(this)}return this._oDialog.then(function(e){return this._addContexts(e)}.bind(this))},onSearch:function(e){e.getSource().clearSelection();var t={$filter:e.getParameter("value")};return a.call(this,t)},onSelectContexts:function(){this.oSelectedContextsModel.setProperty("/selected",this.oCurrentSelection);this.oSelectedContextsModel.refresh(true);this.oCurrentSelection=[]},onDeleteContext:function(e){var t=this.oSelectedContextsModel.getProperty("/selected");var n=e.getParameter("listItem");var o=t.filter(function(e){return e.id!==n.getTitle()});this.oSelectedContextsModel.setProperty("/selected",o);var i=e.getSource();i.attachEventOnce("updateFinished",i.focus,i)},removeAll:function(){this.oSelectedContextsModel.setProperty("/selected",[])},isRemoveAllEnabled:function(e){return e&&e.length!==0},isMessageStripVisible:function(e,t){return t&&e.length===0}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/SaveAs",["sap/ui/fl/write/_internal/appVariant/AppVariantFactory","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/Utils","sap/base/Log","sap/ui/fl/Layer","sap/base/util/merge","sap/base/util/restricted/_omit","sap/ui/fl/registry/Settings"],function(e,t,n,r,a,i,o,s,c,u){"use strict";function p(e){return u.getInstance().then(function(t){if(!e.package&&(e.layer===o.VENDOR||e.layer===o.CUSTOMER_BASE&&!t.isAtoEnabled())){return Promise.reject("Package must be provided or is valid")}if(e.isForSmartBusiness&&(e.package!=="$TMP"&&e.package!=="")&&!e.transport&&!t.isAtoEnabled()){return Promise.reject("Transport must be provided")}if(e.isForSmartBusiness&&e.transport||e.package==="$TMP"){return Promise.resolve({packageName:e.package,transport:e.transport})}return Promise.resolve({packageName:"",transport:""})})}function l(e,t){var n=t.transport?e.setTransportRequest(t.transport):Promise.resolve();return n.then(function(){if(t.packageName){return e.setPackage(t.packageName)}return Promise.resolve()})}function f(e){var t=[];e.forEach(function(e){var r={changeType:e.getChangeType(),content:e.getContent()};if(e.getTexts()){r.texts=e.getTexts()}t.push(n.createNew(r))});return Promise.all(t)}function g(e,t){var n={reference:t.getId()};var r=a.createNamespace(n,"changes");var i=e.getFlexObjectMetadata();i.namespace=r;i.reference=t.getId();e.setFlexObjectMetadata(i)}function h(e,t){var n=[];e.forEach(function(e){e.replaceHostingIdForTextKey(t.getId(),t.getReference(),e.getContent(),e.getTexts());n.push(t.addDescriptorInlineChange(e))});return Promise.all(n)}function d(e){var n=r.getFlexControllerInstance(e)._oChangePersistence;if(!n){return[]}return n.getDirtyChanges().filter(function(e){return t.getChangeTypes().includes(e.getChangeType())})}function A(e){var t=r.getFlexControllerInstance(e)._oChangePersistence;if(!t){return[]}var n=t.getDirtyChanges();n=n.slice();return n}function m(e){d(e).forEach(function(n){if(t.getChangeTypes().includes(n.getChangeType())){r.getFlexControllerInstance(e)._oChangePersistence.deleteChange(n)}})}function v(e,t){if(!e){throw new Error("App variant with ID: "+t.id+"does not exist")}t.package=e.getPackage();t.layer=e.getDefinition().layer;return p(t).then(function(t){return l(e,t)}).then(function(){return e})}var _={saveAs:function(n){var a;var o;return e.prepareCreate(n).then(function(e){a=s({},e);return p(n)}).then(function(e){return l(a,e)}).then(function(){var e=[];A(n.selector).forEach(function(n){if(t.getChangeTypes().includes(n.getChangeType())){e.push(n)}else{g(n,a)}});return f(e)}).then(function(e){return h(e,a)}).then(function(){return a.submit().catch(function(e){e.messageKey="MSG_SAVE_APP_VARIANT_FAILED";throw e})}).then(function(e){o=s({},e);m(n.selector);var t=r.getFlexControllerInstance(n.selector);var a=A(n.selector);if(a.length){return t.saveAll(r.getAppComponentForSelector(n.selector),true).catch(function(e){return this.deleteAppVariant({id:n.id}).then(function(){e.messageKey="MSG_COPY_UNSAVED_CHANGES_FAILED";throw e})}.bind(this))}return Promise.resolve()}.bind(this)).then(function(){return o}).catch(function(e){if(d(n.selector).length){m(n.selector)}i.error("the app variant could not be created.",e.message||e);throw e})},updateAppVariant:function(n){var r;var a;return e.prepareUpdate(c(n,"selector")).catch(function(e){e.messageKey="MSG_LOAD_APP_VARIANT_FAILED";throw e}).then(function(e){if(!e){throw new Error("App variant with ID: "+n.id+"does not exist")}r=s({},e);n.package=r.getPackage();n.layer=r.getDefinition().layer;return p(n)}).then(function(e){return l(r,e)}).then(function(){var e=[];d(n.selector).forEach(function(n){if(t.getChangeTypes().includes(n.getChangeType())){e.push(n)}});return f(e)}).then(function(e){return h(e,r)}).then(function(){return r.submit().catch(function(e){if(n.isForSmartBusiness){m(n.selector);throw e}e.messageKey="MSG_UPDATE_APP_VARIANT_FAILED";throw e})}).then(function(e){a=s({},e);m(n.selector);return a}).catch(function(e){if(d(n.selector).length){m(n.selector)}i.error("the app variant could not be updated.",e.message||e);throw e})},deleteAppVariant:function(t){return e.prepareDelete(c(t,"selector")).catch(function(e){e.messageKey="MSG_LOAD_APP_VARIANT_FAILED";throw e}).then(function(e){return t.isForSmartBusiness?Promise.resolve(e):v(e,t)}).then(function(e){return e.submit().catch(function(e){if(e==="cancel"){return Promise.reject("cancel")}e.messageKey="MSG_DELETE_APP_VARIANT_FAILED";throw e})}).catch(function(e){if(e==="cancel"){return Promise.reject("cancel")}i.error("the app variant could not be deleted.",e.message||e);throw e})}};return _});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/appVariant/AppVariant",["sap/ui/base/ManagedObject","sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/base/util/merge","sap/base/Log","sap/base/util/isPlainObject"],function(e,i,t,n,o,r){"use strict";var s=e.extend("sap.ui.fl.write._internal.appVariant.AppVariant",{constructor:function(i){e.apply(this);if(!r(i)){o.error("Constructor : sap.ui.fl.write._internal.appVariant.AppVariant: mPropertyBag is not defined")}this._oDefinition=i;return this},metadata:{library:"sap.ui.fl",properties:{mode:{type:"string"}}}});s.modes={NEW:"NEW",EXISTING:"EXISTING",DELETION:"DELETION"};s.prototype._isValidMode=function(e){var i=false;Object.keys(s.modes).some(function(t){if(s.modes[t]===e){i=true}});return i};s.prototype.setMode=function(e){if(this._isValidMode(e)){this.setProperty("mode",e)}else{throw new Error("Provide a correct operation mode")}};s.prototype.setTransportRequest=function(e){try{i.checkTransportRequest(e)}catch(e){return Promise.reject(e)}this._oDefinition.transport=e;return Promise.resolve()};s.prototype.setReference=function(e){if(e===undefined||typeof e!=="string"){throw new Error("No parameter sReference of type string provided")}this._oDefinition.reference=e};s.prototype.setPackage=function(e){try{i.checkPackage(e)}catch(e){return Promise.reject(e)}this._oDefinition.packageName=e;return Promise.resolve()};s.prototype.getDefinition=function(){return this._oDefinition};s.prototype.getId=function(){return this._oDefinition.id};s.prototype.getNamespace=function(){return this._oDefinition.namespace||i.getNameAndNameSpace(this._oDefinition.id,this._oDefinition.reference).namespace};s.prototype.getFileName=function(){return this._oDefinition.fileName||i.getNameAndNameSpace(this._oDefinition.id,this._oDefinition.reference).fileName};s.prototype.getReference=function(){return this._oDefinition.reference};s.prototype.getPackage=function(){return this._oDefinition.packageName};s.prototype.getVersion=function(){return this._oDefinition.version};s.prototype.getTransportRequest=function(){return this._oDefinition.transport};s.prototype.getJson=function(){return n({},this._getMap())};s.prototype._getMap=function(){var e={};switch(this.getMode()){case s.modes.NEW:e={fileName:this.getFileName(),fileType:"appdescr_variant",namespace:this.getNamespace(),layer:this._oDefinition.layer,packageName:this._oDefinition.packageName?this._oDefinition.packageName:"",reference:this._oDefinition.reference,id:this._oDefinition.id,content:this._oDefinition.content||[]};if(this._oDefinition.referenceVersion){e.referenceVersion=this._oDefinition.referenceVersion}if(this._oDefinition.version){e.version=this._oDefinition.version}break;case s.modes.EXISTING:e={fileName:this._oDefinition.fileName,fileType:this._oDefinition.fileType,namespace:this._oDefinition.namespace,layer:this._oDefinition.layer,packageName:this._oDefinition.packageName,reference:this._oDefinition.reference,id:this._oDefinition.id,content:this._oDefinition.content};if(this._oDefinition.referenceVersion){e.referenceVersion=this._oDefinition.referenceVersion}if(this._oDefinition.version){e.version=this._oDefinition.version}break;case s.modes.DELETION:e={id:this._oDefinition.id};break;default:}return e};s.prototype.addDescriptorInlineChange=function(e){return new Promise(function(i){var t=function(e,i){if(e["setHostingIdForTextKey"]){e.setHostingIdForTextKey(i)}};t(e,this.getId());this._oDefinition.content.push(e.getMap());i(null)}.bind(this))};s.prototype.submit=function(){var e=this._getMap();var i={flexObject:{},appVariant:this};if(this._oDefinition.transport){i.transport=this._oDefinition.transport}if(this._oDefinition.skipIam){i.skipIam=this._oDefinition.skipIam}if(this._oDefinition.isForSmartBusiness){i.isForSmartBusiness=this._oDefinition.isForSmartBusiness}if(this._oDefinition.parentVersion){i.parentVersion=this._oDefinition.parentVersion}if(e.layer){i.layer=e.layer}i.url="/sap/bc/lrep";var n;switch(this.getMode()){case s.modes.NEW:Object.assign(i.flexObject,e);n=t.appVariant.create(i);break;case s.modes.EXISTING:i.reference=e.id;Object.assign(i.flexObject,e);n=t.appVariant.update(i);break;case s.modes.DELETION:i.reference=e.id;n=t.appVariant.remove(i);break;default:return Promise.reject("Please provide a valid operation.")}return n.then(function(e){return e})};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/appVariant/AppVariantFactory",["sap/ui/fl/write/_internal/appVariant/AppVariant","sap/ui/fl/Layer","sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/base/util/merge","sap/base/util/isPlainObject"],function(e,r,n,t,a,i){"use strict";function s(e){if(!e.url){e.url="/sap/bc/lrep"}return t.appVariant.load(e)}var p={};p.load=function(r){if(r.id===undefined||typeof r.id!=="string"){throw new Error("Parameter "+r.id+" must be provided of type string")}return s({reference:r.id}).then(function(n){var t=n.response;if(!i(t)){t=JSON.parse(t)}r=a({},r,t);return new e(r)})};p.prepareCreate=function(t){try{n.checkParameterAndType(t,"reference","string");n.checkParameterAndType(t,"id","string");if(t.version){n.checkParameterAndType(t,"version","string")}if(!t.layer){t.layer=r.CUSTOMER}else{n.checkParameterAndType(t,"layer","string")}if(t.skipIam){n.checkParameterAndType(t,"skipIam","boolean")}if(t.transport){n.checkTransportRequest(t.transport)}if(t.package){n.checkPackage(t.package)}}catch(e){return Promise.reject(e)}t.content=[];var a=new e(t);a.setMode("NEW");return Promise.resolve(a)};p.prepareUpdate=function(e){return p.load(e).then(function(e){e.setMode("EXISTING");return e})};p.prepareDelete=function(r){return(r.isForSmartBusiness?Promise.resolve(new e(r)):p.load(r)).then(function(e){e.setMode("DELETION");return e})};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/BackendConnector",["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/base/util/restricted/_pick"],function(e,n,t,r,i,s){"use strict";function a(e){var n={};if(e.parentVersion!==undefined){n.parentVersion=e.parentVersion}if(this.isLanguageInfoRequired){r.addLanguageInfo(n)}var t=r.getUrl(this.ROUTES.CHANGES,e,n);delete e.fileName;delete n["sap-language"];var s=r.getUrl(this.ROUTES.TOKEN,e,n);var a=i.getRequestOptions(this.initialConnector,s,e.flexObjects||e.flexObject,"application/json; charset=utf-8","json");return i.sendRequest(t,e.method,a)}function o(e){e.fileName=e.flexObject.fileName;return a.call(this,e)}var l=e({},n,{xsrfToken:null,reset:function(e){var n=["reference","generator"];var t=s(e,n);if(e.selectorIds){t.selector=e.selectorIds}if(e.changeTypes){t.changeType=e.changeTypes}delete e.reference;var a=r.getUrl(this.ROUTES.CHANGES,e,t);var o=r.getUrl(this.ROUTES.TOKEN,e);var l=i.getRequestOptions(this.initialConnector,o);return i.sendRequest(a,"DELETE",l)},write:function(e){e.method="POST";return a.call(this,e).then(function(e){if(e.response&&!Array.isArray(e.response)){e.response=[e.response]}return e})},update:function(e){e.method="PUT";return o.call(this,e)},remove:function(e){var n={namespace:e.flexObject.namespace};if(e.parentVersion!==undefined){n.parentVersion=e.parentVersion}e.fileName=e.flexObject.fileName;var t=r.getUrl(this.ROUTES.CHANGES,e,n);delete e.fileName;var s=r.getUrl(this.ROUTES.TOKEN,e);var a=i.getRequestOptions(this.initialConnector,s,undefined,"application/json; charset=utf-8","json");return i.sendRequest(t,"DELETE",a)},loadFeatures:function(e){if(this.initialConnector.settings){return Promise.resolve({response:this.initialConnector.settings})}var n=r.getUrl(this.ROUTES.SETTINGS,e);return r.sendRequest(n,"GET",{initialConnector:t}).then(function(e){return e.response})}});l.initialConnector=t;return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/JsObjectConnector",["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(e,t){"use strict";var n={_itemsStoredAsObjects:true,_items:{},setItem:function(e,t){n._items[e]=t},removeItem:function(e){delete n._items[e]},clear:function(){n._items={}},getItem:function(e){return n._items[e]},getItems:function(){return n._items}};var r=e({},t,{storage:n});r.loadFeatures=function(){return t.loadFeatures.apply(this,arguments).then(function(t){return e({isPublicLayerAvailable:true,isVariantAdaptationEnabled:true},t)})};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/KeyUserConnector",["sap/base/util/merge","sap/ui/fl/Layer","sap/ui/fl/write/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/KeyUserConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/base/util/restricted/_pick","sap/ui/fl/write/_internal/FlexInfoSession"],function(e,n,t,r,s,a,i,o){"use strict";var u="/flex/keyuser";var c=e({},t,{layers:[n.CUSTOMER,n.PUBLIC],ROUTES:{CHANGES:u+r.API_VERSION+"/changes/",SETTINGS:u+r.API_VERSION+"/settings",TOKEN:u+r.API_VERSION+"/settings",VERSIONS:{GET:u+r.API_VERSION+"/versions/",ACTIVATE:u+r.API_VERSION+"/versions/activate/",DISCARD:u+r.API_VERSION+"/versions/draft/"},TRANSLATION:{UPLOAD:u+r.API_VERSION+"/translation/texts",DOWNLOAD:u+r.API_VERSION+"/translation/texts/",GET_SOURCELANGUAGE:u+r.API_VERSION+"/translation/sourcelanguages/"},CONTEXTS:u+r.API_VERSION+"/contexts/"},isLanguageInfoRequired:true,loadFeatures:function(e){return t.loadFeatures.call(c,e).then(function(e){e.isContextSharingEnabled=true;return e})},getContexts:function(e){var n=["type","$skip","$filter"];var t=i(e,n);var a=s.getUrl(c.ROUTES.CONTEXTS,e,t);return s.sendRequest(a,"GET",{initialConnector:r}).then(function(e){return e.response})},loadContextDescriptions:function(e){var n={};s.addLanguageInfo(n);l(e);var t=s.getUrl(c.ROUTES.CONTEXTS,e,n);e.payload=JSON.stringify(e.flexObjects);e.dataType="json";e.contentType="application/json; charset=utf-8";return a.sendRequest(t,"POST",e).then(function(e){return e.response})},isContextSharingEnabled:function(){return Promise.resolve(true)},getFlexInfo:function(e){return o.get(e.selector)||{}}});function l(e){e.initialConnector=r;e.tokenUrl=c.ROUTES.TOKEN}function S(e){var n={title:e.title};e.payload=JSON.stringify(n);e.dataType="json";e.contentType="application/json; charset=utf-8"}function T(e){e.version=e.versionNumber.toString();delete e.versionNumber;return e}c.versions={load:function(e){l(e);var n={};s.addLanguageInfo(n);n.limit=e.limit;var t=s.getUrl(c.ROUTES.VERSIONS.GET,e,n);return s.sendRequest(t,"GET",e).then(function(e){return e.response.versions.map(function(e){return T(e)})})},activate:function(e){l(e);S(e);var n={version:e.version};s.addLanguageInfo(n);var t=s.getUrl(c.ROUTES.VERSIONS.ACTIVATE,e,n);return a.sendRequest(t,"POST",e).then(function(e){var n=e.response;return T(n)})},discardDraft:function(e){l(e);var n=s.getUrl(c.ROUTES.VERSIONS.DISCARD,e);return a.sendRequest(n,"DELETE",e)}};c.translation={getTexts:function(e){l(e);var n=i(e,["sourceLanguage","targetLanguage"]);var t=s.getUrl(c.ROUTES.TRANSLATION.DOWNLOAD,e,n);return s.sendRequest(t,"GET",e).then(function(e){return e.response})},getSourceLanguages:function(e){l(e);var n={};var t=s.getUrl(c.ROUTES.TRANSLATION.GET_SOURCELANGUAGE,e,n);return s.sendRequest(t,"GET",e).then(function(e){return e&&e.response&&e.response.sourceLanguages?e.response.sourceLanguages:[]})},postTranslationTexts:function(e){l(e);var n=s.getUrl(c.ROUTES.TRANSLATION.UPLOAD,e,{});return s.sendRequest(n,"POST",e)}};c.initialConnector=r;return c});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/LocalStorageConnector",["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(e,a){"use strict";var t=e({},a,{storage:window.localStorage});t.loadFeatures=function(){return a.loadFeatures.apply(this,arguments).then(function(a){return e({isPublicLayerAvailable:true,isPublicFlVariantEnabled:true,isVariantAdaptationEnabled:true,isCondensingEnabled:false},a)})};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/NeoLrepConnector",["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/NeoLrepConnector","sap/ui/fl/initial/_internal/connectors/Utils"],function(e,t,n,r){"use strict";var i={SETTINGS:"/flex/settings"};return e({},t,{initialConnector:n,layers:n.layers,isContextSharingEnabled:function(){return Promise.resolve(false)},loadContextDescriptions:function(){return Promise.reject("loadContextsDescriptions is not implemented")},getContexts:function(){return Promise.reject("getContexts is not implemented")},contextBasedAdaptation:{create:function(){return Promise.reject("contextBasedAdaptation.create is not implemented")},reorder:function(){return Promise.reject("contextBasedAdaptation.reorder is not implemented")},load:function(){return Promise.reject("contextBasedAdaptation.load is not implemented")}},loadFeatures:function(e){if(n.settings){return Promise.resolve(n.settings)}var t={};var o=r.getUrl(i.SETTINGS,e,t);return r.sendRequest(o,"GET",{initialConnector:n}).then(function(e){e.response.isContextSharingEnabled=false;return e.response})}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/ObjectPathConnector",["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/LoaderExtensions"],function(e,n,t,r){"use strict";var a;return e({},n,{layers:[],setJsonPath:function(e){a=e},loadFlexData:function(e){var n=a||e.path;if(n){return r.loadResource({dataType:"json",url:n,async:true}).then(function(e){return Object.assign(t.getEmptyFlexDataResponse(),e)})}return Promise.resolve()},loadFeatures:function(e){var n=a||e.path;if(n){return r.loadResource({dataType:"json",url:n,async:true}).then(function(e,n){n.componentClassName=e;return n.settings||{}}.bind(null,e.flexReference))}return Promise.resolve({})}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/ObjectStorageConnector",["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(e,t){"use strict";var r=e({},t,{oStorage:undefined});r.storage=r.oStorage;return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/PersonalizationConnector",["sap/base/util/merge","sap/ui/fl/write/_internal/connectors/BackendConnector","sap/ui/fl/initial/_internal/connectors/PersonalizationConnector"],function(e,n,r){"use strict";var t="/flex/personalization";var o="/v1";var i={isProductiveSystem:true,hasPersoConnector:true};var a=e({},n,{layers:r.layers,ROUTES:{CHANGES:t+o+"/changes/",TOKEN:t+o+"/actions/getcsrftoken"},loadFeatures:function(){return Promise.resolve(i)}});a.initialConnector=r;return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/SessionStorageConnector",["sap/base/util/merge","sap/ui/fl/write/api/connectors/ObjectStorageConnector"],function(e,t){"use strict";var n=e({},t,{storage:window.sessionStorage});n.loadFeatures=function(){return t.loadFeatures.apply(this,arguments).then(function(t){return e({isPublicLayerAvailable:true,isVariantAdaptationEnabled:true},t)})};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/delegates/ODataV4ReadDelegate",["sap/ui/base/Object"],function(e){"use strict";function a(e){if(e&&e.$Type){if(e.$Type.toLowerCase().indexOf("edm")!==0){return true}}return false}function t(e,a){return a.some(function(a){if(e.startsWith(a)){return true}})}function r(r,i,o,n,v,u,l){var s={name:r,bindingPath:r,entityType:n};var d=o["@com.sap.vocabularies.UI.v1.DataFieldDefault"];var p=d&&d.Label||o["@com.sap.vocabularies.Common.v1.Label"];s.label=p||"[LABEL_MISSING: "+r+"]";var c=o["@com.sap.vocabularies.UI.v1.Hidden"];s.hideFromReveal=c;if(c&&c.$Path){s.hideFromReveal=v.getBindingContext().getProperty(c.$Path)}var m;if(!s.hideFromReveal){m=o["@com.sap.vocabularies.Common.v1.FieldControl"];if(m){s.hideFromReveal=m.$EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"}}m=o["@com.sap.vocabularies.Common.v1.FieldControl"];var f=m&&m.Path;if(f&&!s.hideFromReveal){var g=e.isA(v.getBinding(u),"sap/ui/model/ListBinding");if(!g){var b=v.getBindingContext().getProperty(f);s.hideFromReveal=b===0}}if(d&&(d.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||d.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||d.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction"||d.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation")){s.unsupported=true}if(t(r,l)||a(i)){s.unsupported=true}return s}function i(e,a,t,i,o){var n=[];var v="";var u=[];var l;for(v in e){l=e[v];if(l.$kind==="NavigationProperty"){u.push(v)}}for(v in e){l=e[v];if(l.$kind==="Property"){var s=t.getObject("/"+a+"/"+v+"@");var d=r(v,l,s,a,i,o,u);n.push(d)}}return n}function o(e,a){if(a.path){return a.path}var t=e.getBindingContext();if(t){return t.getPath()}}function n(e,a,t){var r=e.getModel(t.modelName);if(r){if(r.isA("sap.ui.model.odata.v4.ODataModel")){var n=r.getMetaModel();var v=o(e,t);if(v){var u=n.getMetaContext(v);var l=u.getObject();var s=u.getObject(l.$Type);return i(s,l.$Type,n,e,a)}}}return Promise.resolve([])}var v={getPropertyInfo:function(e){return Promise.resolve().then(function(){return n(e.element,e.aggregationName,e.payload)})}};return v});
/*!
* OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/write/_internal/extensionPoint/Processor",["sap/ui/fl/apply/_internal/extensionPoint/Processor","sap/base/util/merge"],function(n,t){"use strict";function e(i,o){var r=t({defaultContent:[]},i);return n.registerExtensionPoint(r).then(n.createDefaultContent.bind(this,i,o,e,[])).then(n.addDefaultContentToExtensionPointInfo.bind(this,r,o))}var i={applyExtensionPoint:function(n){return e(n,false)}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/extensionPoint/Registry",["sap/ui/base/ManagedObjectObserver","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils"],function(e,t,n){"use strict";var r={};var i={};var o={};var a={};function g(e){var t=e.object.getId();o[t].forEach(function(e){a[e.view.getId()][e.name].bParentIsDestroyed=true})}function s(e){var t=e.object.getId();o[t].forEach(function(t){var r=t.aggregationName;if(r===e.name){var i=n.getAggregation(e.object,r);var o=[].concat(i||[]).map(function(e){return e.getId()});if(e.mutation==="insert"){if(o.indexOf(e.child.getId())<t.index){t.index++}}else if(t.aggregation.indexOf(e.child.getId())<t.index){t.index--}t.aggregation=o}})}function f(e){if(e.type==="destroy"){g(e)}else{s(e)}}function c(t,n){var r=t.getId();if(!i[r]){var o=new e(f.bind(this));o.observe(t,{aggregations:[n],destroy:true});i[r]={observer:o,aggregations:[n]}}else{var a=i[r].observer.isObserved(t,{aggregations:[n]});if(!a){i[r].aggregations.push(n);i[r].observer.observe(t,{aggregations:i[r].aggregations,destroy:true})}}}function u(e,t,r){var i=r.view.getId();var g=n.getAggregation(e,t);var s=[].concat(g||[]).map(function(e){return e.getId()});var f=e.getId();if(!o[f]){o[f]=[]}if(!a[i]){a[i]={}}r.aggregation=s;o[f].push(r);a[i][r.name]=r}r.registerExtensionPoint=function(e){var t=e.targetControl;var n=e.aggregationName;c(t,n);u(t,n,e)};r.getExtensionPointInfo=function(e,t){return a[t.getId()]&&a[t.getId()][e]};r.getExtensionPointInfoByViewId=function(e){return a[e]||{}};r.getExtensionPointInfoByParentId=function(e){return o[e]||[]};r.clear=function(){Object.keys(i).forEach(function(e){i[e].observer.disconnect();i[e].observer.destroy()});i={};o={};a={}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/ABAPAccess",["sap/ui/util/openWindow","sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory","sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation"],function(n,t,e){"use strict";var i=null;var r=null;function u(){if(!r){return t.getInstance(i).then(function(n){r=n;return n})}return Promise.resolve(r)}var a={};a.getTexts=function(){return u(i).then(function(n){return n.getTexts().then(function(n){return n})})};a.isExtensibilityEnabled=function(n){return u(n).then(function(n){return n.getNavigationUri().then(function(n){return Boolean(n)})})};a.getExtensionData=function(){return u(i).then(function(n){return n.getExtensionData().then(function(n){return n})})};a.onControlSelected=function(n){if(n!==i){i=n;r=null}};a.onTriggerCreateExtensionData=function(){return u().then(function(t){return t.getNavigationUri().then(function(t){if(t){n(t,"_blank")}})})};a.reset=function(){i=null;r=null};a.isServiceOutdated=function(n){return e.isServiceOutdated(n)};a.setServiceValid=function(n){e.setServiceValid(n)};a.setServiceInvalid=function(n){e.setServiceInvalid(n)};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant",["sap/ui/base/Object"],function(e){"use strict";var i=e.extend("sap.ui.fl.write._internal.fieldExtensibility.ABAPExtensibilityVariant",{_sServiceUri:null,_mBindingInfo:null,_mServiceInfo:null,constructor:function(e,i,t){this._sServiceUri=e;this._mBindingInfo=t;this._mServiceInfo=i;this._oExtensionDataPromise=this._determineExtensionData()},getExtensionData:function(){return Promise.resolve(null)},getMetadata:function(){return this.getMetadata()},getNavigationUri:function(){return Promise.resolve(null)},getTexts:function(){return Promise.resolve(null)},isActive:function(){return Promise.resolve(true)}});i.prototype._determineExtensionData=function(){return Promise.resolve(null)};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory",["sap/base/Log","sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/MultiTenantABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/SingleTenantABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/Utils","sap/ui/fl/write/_internal/fieldExtensibility/UriParser"],function(e,t,r,i,n,a){"use strict";var s={};var u=new t;function l(e){return Promise.all([n.getBoundEntitySet(e),n.getBoundEntityType(e)]).then(function(e){return{entitySetName:e[0],entityTypeName:e[1]}})}function o(t){e.error("Error occurred:");if(t){if(Array.isArray(t.errorMessages)){t.errorMessages.forEach(function(t){e.error(t.text)})}else{e.error(t)}}}function f(e,t){try{var n=a.parseServiceUri(e);var s=new r(e,n,t);var l=new i(e,n,t);return Promise.all([s.isActive(),l.isActive()]).then(function(e){var t=u;if(e[0]===true){t=s}else if(e[1]===true){t=l}return t}).catch(function(e){o(e);return Promise.resolve(u)})}catch(e){o(e);return Promise.resolve(u)}}function c(e,t){if(s[e]){return s[e][t.entityTypeName]}return null}function y(e,t,r){if(!s[e]){s[e]={}}s[e][t.entityTypeName]=r}function v(e,t){var r=n.getServiceUri(e);var i=c(r,t);if(!i){return f(r,t).then(function(e){y(r,t,e);return Promise.resolve(e)})}return Promise.resolve(i)}var p={};p.getInstance=function(e){if(n.checkControlPrerequisites(e)){return l(e).then(function(t){return v(e,t).then(function(e){return e.getInterface()})}).catch(function(e){o(e);return Promise.resolve(u.getInterface())})}return Promise.resolve(u.getInterface())};p.reset=function(){s={}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/MultiTenantABAPExtensibilityVariant",["sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/Utils"],function(t,e){"use strict";var n="/sap/opu/odata/sap/APS_PREDEFINED_FIELD_SRV/GetExtensionDataByResourcePath";var i={semanticObject:"PredefinedCustomField",action:"configure"};var s=t.extend("sap.ui.fl.write._internal.fieldExtensibility.MultiTenantABAPExtensibilityVariant",{getExtensionData:function(){return this._oExtensionDataPromise.then(function(t){if(this._containsData(t)){return this._convertExtensionData(t)}return null}.bind(this))},getNavigationUri:function(){return this._oExtensionDataPromise.then(function(t){if(this._containsData(t)){return e.getNavigationUriForIntent({target:i,params:{businessObjectNodeName:t.BusinessObjectNodeName,cdsEntityName:t.CdsEntityName,serviceVersion:this._mServiceInfo.serviceVersion,serviceName:this._mServiceInfo.serviceName}})}return null}.bind(this))},getTexts:function(){return this._oExtensionDataPromise.then(function(t){if(this._containsData(t)){return{tooltip:e.getText("BTN_ADD_FIELD"),headerText:e.getText("BUSINESS_OBJECT_NODE_TITLE")}}return null}.bind(this))},isActive:function(){return this._oExtensionDataPromise.then(function(t){return this._containsData(t)}.bind(this))},_containsData:function(t){return Boolean(t&&t.BusinessObjectNodeName&&t.CdsEntityName)},_convertExtensionData:function(t){return{extensionData:[{businessContext:t.BusinessObjectNodeName,description:t.BusinessObjectNodeDescription}]}},_determineExtensionData:function(){return new Promise(function(t,s){e.isNavigationSupportedForIntents([i]).then(function(i){var a=i.some(function(t){return t===true});if(a){e.executeRequest(n,{ResourcePath:this._sServiceUri,EntitySetName:this._mBindingInfo.entitySetName}).then(function(e){if(e.errorOccurred===false){t(this._extractExtensionDataFromResponse(e.result))}else{s(e)}}.bind(this))}else{t(null)}}.bind(this))}.bind(this))},_extractExtensionDataFromResponse:function(t){return t.GetExtensionDataByResourcePath}});return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation",["sap/ui/fl/Utils","sap/ui/util/Storage","sap/ui/fl/write/_internal/fieldExtensibility/UriParser"],function(e,r,i){"use strict";var t={};var n="sap.ui.fl.fieldExt.Access";var u=1*7*24*60*60*1e3;function a(){return Date.now()}function f(){return t.getLocalStorage()}function s(){return f()&&f().isSupported()}function c(){if(!s()){return{}}var e=f().get(n);if(!e){return{}}return JSON.parse(e)}function o(e){return e.expirationDate<=a()}function l(e){return c()[e.serviceKey]||null}function v(e){var r=a()+u;var i=S();var t=p(e);return{serviceKey:i.getName()+i.getClient()+t.serviceName+t.serviceVersion,expirationDate:r}}function p(e){if(typeof e==="string"){return i.parseServiceUri(e)}return e}function g(){return S()}function S(){var r=e.getUshellContainer();return r&&r.getLogonSystem()}function d(e){if(s()){f().put(n,JSON.stringify(e))}}t.getLocalStorage=function(){return new r(r.Type.local)};t.isServiceOutdated=function(e){if(!g()){return false}var r=l(v(e));if(r){if(o(r)){this.setServiceValid(e);return false}return true}return false};t.setServiceValid=function(e){if(g()){var r=c();delete r[v(e).serviceKey];d(r)}};t.setServiceInvalid=function(e){if(g()){var r=c();var i=v(e);r[i.serviceKey]=i;d(r)}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/SingleTenantABAPExtensibilityVariant",["sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariant","sap/ui/fl/write/_internal/fieldExtensibility/UriParser","sap/ui/fl/write/_internal/fieldExtensibility/Utils"],function(e,t,i){"use strict";var n="/sap/opu/odata/SAP/APS_CUSTOM_FIELD_MAINTENANCE_SRV/";var s={None:-1,Both:0,Fields:1,Logic:2};var r=[{semanticObject:"CustomField",action:"develop"},{semanticObject:"CustomField",action:"manage"},{semanticObject:"CustomLogic",action:"develop"}];var o=["BTN_FREP_CCF","BTN_ADD_FIELD","BTN_ADD_LOGIC"];var a=e.extend("sap.ui.fl.write._internal.fieldExtensibility.SingleTenantABAPExtensibilityVariant",{_iExtensibilityType:s.None,getExtensionData:function(){return this._oExtensionDataPromise.then(function(e){if(this._containsData(e)){return this._convertBusinessContextsToExtensionData(e)}return null}.bind(this))},getNavigationUri:function(){return this._oExtensionDataPromise.then(function(e){if(this._containsData(e)&&this._iExtensibilityType!==s.None){return i.getNavigationUriForIntent({target:r[this._iExtensibilityType],params:{businessContexts:e.map(function(e){return e.BusinessContext}),serviceVersion:this._mServiceInfo.serviceVersion,serviceName:this._mServiceInfo.serviceName,entityType:this._mBindingInfo.entityTypeName}})}return Promise.resolve(null)}.bind(this))},getTexts:function(){return this._oExtensionDataPromise.then(function(e){if(this._containsData(e)){return{tooltip:i.getText(o[this._iExtensibilityType]),headerText:i.getText("BUSINESS_CONTEXT_TITLE")}}return null}.bind(this))},isActive:function(){return this._oExtensionDataPromise.then(function(e){return this._containsData(e)}.bind(this))},_adjustExtensibilityTypeByAuthorizations:function(e,t){if(e[t]){return t}else if(e[s.Both]){return s.Both}else if(t===s.Both){if(e[s.Fields]){return s.Fields}else if(e[s.Logic]){return s.Logic}}return s.None},_containsData:function(e){return Boolean(e&&e.length>0)},_convertBusinessContextsToExtensionData:function(e){var t=e.map(function(e){return{description:e.BusinessContextDescription,businessContext:e.BusinessContext}});return{extensionData:t}},_determineExtensionData:function(){return new Promise(function(e,n){i.isNavigationSupportedForIntents(r).then(function(r){var o=r.some(function(e){return e===true});if(o){i.executeRequest(this._getExtensionDataServiceUri(),this._getExtensionDataServiceParameters()).then(function(i){if(i.errorOccurred===false){var o=this._extractBusinessContextsFromResponse(i.result);this._iExtensibilityType=this._determineExtensibilityType(r,o);if(this._iExtensibilityType!==s.None){e(o)}else{e(null)}}else if(i.statusCode===404&&this._mServiceInfo.serviceType===t.mServiceType.v4){e(null)}else{n(i)}}.bind(this))}else{e(null)}}.bind(this))}.bind(this))},_determineExtensibilityType:function(e,t){var i=this._determineExtensibilityTypeFromBusinessContexts(t);if(i!==s.None){return this._adjustExtensibilityTypeByAuthorizations(e,i)}return i},_determineExtensibilityTypeFromBusinessContexts:function(e){var t=false;var i=false;e.forEach(function(e){if(e.hasOwnProperty("SupportsLogicEnhancements")===false||e.SupportsLogicEnhancements===true){t=true}if(e.hasOwnProperty("SupportsStructuralEnhancements")===false||e.SupportsStructuralEnhancements===true){i=true}});if(t&&i){return s.Both}else if(!t&&i){return s.Fields}else if(t&&!i){return s.Logic}return null},_extractBusinessContextsFromResponse:function(e){return e.results||[]},_getExtensionDataServiceParameters:function(){var e={EntitySetName:"",EntityTypeName:this._mBindingInfo.entityTypeName};if(this._mServiceInfo.serviceType===t.mServiceType.v4){e.ResourcePath=t.sODataV4ResourcePathPrefix+this._mServiceInfo.serviceName+"/"+this._mServiceInfo.serviceVersion}else{e.ServiceName=this._mServiceInfo.serviceName;e.ServiceVersion=this._mServiceInfo.serviceVersion}return e},_getExtensionDataServiceUri:function(){if(this._mServiceInfo.serviceType===t.mServiceType.v4){return n+"GetBusinessContextsByResourcePath"}return n+"GetBusinessContextsByEntityType"}});return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/UriParser",[],function(){"use strict";var e={v2:"v2",v4:"v4"};function r(r){var i=/.*sap\/opu\/odata\/([^\/]+)\/([^\/]+)/i;var a=/([^;]+);v=(\d{1,4})/i;var s="sap/opu/odata";var t;if(r.toLowerCase().indexOf(s)!==-1){var v=r.match(i);if(!v||v.length!==3){throw new Error("sap.ui.fl.fieldExt.UriParser.parseV2ServiceUri: Malformed service URI (Invalid service name)")}if(v[1].toLowerCase()!=="sap"){t="/"+v[1]+"/"+v[2]}else{t=v[2]}}else{if(r.length>0&&r.lastIndexOf("/")+1===r.length){r=r.substring(0,r.length-1)}t=r.substring(r.lastIndexOf("/")+1)}if(t.indexOf(";v=")!==-1){var n=t.match(a);if(!n||n.length!==3){throw new Error("sap.ui.fl.fieldExt.UriParser.parseV2ServiceUri: Malformed service URI (Invalid version)")}return{serviceName:n[1],serviceVersion:n[2],serviceType:e.v2}}return{serviceName:t,serviceVersion:"0001",serviceType:e.v2}}function i(r){var i=/^\/?sap\/opu\/odata4((?:\/[^/]+){5})(\/[^/]+){1}(\/.*)?/i;var a=r.match(i);if(!a||a.length!==4){throw new Error("sap.ui.fl.fieldExt.UriParser.parseV4ServiceUri: Malformed service URI")}var s=a[1].split("/");s.splice(0,3);var t=/(\d{1,4})/i;var v=a[2].match(t);return{serviceName:s.join("/"),serviceVersion:v[1],serviceType:e.v4}}var a={};a.mServiceType=e;a.sODataV4ResourcePathPrefix="sap/opu/odata4/";a.parseServiceUri=function(e){if(e.toLowerCase().indexOf(this.sODataV4ResourcePathPrefix)!==-1){return i(e)}return r(e)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/Utils",["sap/base/Log","sap/base/security/encodeURL","sap/ui/core/Core","sap/ui/fl/Utils","sap/ui/thirdparty/jquery"],function(e,t,r,n,i){"use strict";var a={v2:"v2",v4:"v4"};function u(e){if(e&&e.split){var t=e.split(".");return t[t.length-1]}return null}function o(e){var t=[];try{var r=JSON.parse(e.responseText);if(r&&r.error&&r.error.message&&r.error.message.value){t.push({severity:"error",text:r.error.message.value})}else{t.push({severity:"error",text:e.responseText})}}catch(e){}return t}function s(t){var r=u(g(t));if(!r){var n=t.getBindingContext?t.getBindingContext():null;if(n&&n.getPath){r=n.getPath()}}if(!r){e.warning("Control not bound to a path")}return r}function l(e,t,r){return e.metadataLoaded().then(function(){var n=null;if(r){var i=e.oMetadata._getEntityTypeByName(r);n=e.oMetadata._getEntitySetByType(i)}if(!n){n=e.oMetadata._getEntitySetByPath(t)}return n?n.name:null})}function f(e,t){var r=e.getMetaModel();var n=r.getMetaPath(t);return r.requestObject(n).then(function(e){var t=r.fetchEntityContainer().getResult();var n=t[t.$EntityContainer];var i=Object.keys(n).filter(function(t){return n[t]===e});return i.length>0&&i[0]})}function c(e,t,r){return e.metadataLoaded().then(function(){var n=null;if(r){n=e.oMetadata._getEntityTypeByName(r)}if(!n){n=e.oMetadata._getEntityTypeByPath(t)}return n?n.name:null})}function v(e,t){var r=e.getMetaModel();var n=r.getMetaPath(t);return r.requestObject(n).then(function(e){return u(e.$Type)})}function g(e){return e.getEntitySet?e.getEntitySet():null}function p(e){return e.getEntityType?e.getEntityType():null}function d(t){var r=null;if(t&&t.sServiceUrl){r=t.sServiceUrl}if(!r){e.warning("Model has no Service Uri")}return r}function y(e){if(e){if(e.isA("sap.ui.model.odata.v2.ODataModel")){return a.v2}else if(e.isA("sap.ui.model.odata.v4.ODataModel")){return a.v4}}return null}function h(t){if(t){var r=t.getModel?t.getModel():null;if(y(r)){return r}e.warning("Unsupported model type or protocol");return null}e.warning("No Control passed");return null}var m={};m.checkControlPrerequisites=function(t){if(t){var r=h(t);var n=d(r);var i=s(t);var a=p(t);return Boolean(n&&(i||a))}e.warning("No Control passed");return false};m.executeRequest=function(e,t){var r=e+this.getUriParameters(t);return new Promise(function(e){var t={type:"GET",async:true,dataType:"json"};i.ajax(r,t).done(function(t){var r=t&&t.d;e({errorOccurred:false,result:r})}).fail(function(t){e({errorOccurred:true,errorMessages:o(t),statusCode:t.status})})})};m.getBoundEntitySet=function(e){var t=h(e);var r=y(t);if(r===a.v2){return l(t,s(e),p(e))}else if(r===a.v4){return f(t,s(e))}return Promise.resolve(null)};m.getBoundEntityType=function(e){var t=h(e);var r=y(t);if(r===a.v2){return c(t,s(e),p(e))}else if(r===a.v4){return v(t,s(e))}return Promise.resolve(null)};m.getNavigationUriForIntent=function(e){return n.getUShellService("CrossApplicationNavigation").then(function(t){if(t&&t.hrefForExternal){return t.hrefForExternal(e)}return Promise.resolve(null)})};m.getServiceUri=function(e){var t=h(e);return d(t)};m.getText=function(e){return r.getLibraryResourceBundle("sap.ui.fl").getText(e)};m.getUriParameters=function(e){if(!e){return""}var r=[];Object.keys(e).forEach(function(n){if(n){var i="'"+t(e[n]||"")+"'";r.push(t(n)+"="+i)}});return r.length===0?"":"?"+r.join("&")};m.isNavigationSupportedForIntents=function(e){return n.getUShellService("CrossApplicationNavigation").then(function(t){if(t&&t.isNavigationSupported){return t.isNavigationSupported(e).then(function(e){return e.map(function(e){return e&&e.supported===true})})}return Promise.resolve(e.map(function(){return false}))})};return m});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/CAPAccess",["sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation","sap/ui/fl/write/_internal/fieldExtensibility/cap/dialog/CustomFieldCAPDialog"],function(e,t){"use strict";var i=null;var n=null;var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");var a={};a.getTexts=function(){return{headerText:r.getText("BUSINESS_CONTEXT_TITLE"),tooltip:r.getText("BTN_ADD_FIELD")}};a.isExtensibilityEnabled=function(){return true};a.getExtensionData=function(){var e=i.getModel();var t=i.getBindingContext().getPath();if(e.isA("sap.ui.model.odata.v2.ODataModel")){return Promise.reject()}else if(e.isA("sap.ui.model.odata.v4.ODataModel")){var n=e.getMetaModel();var r=n.getMetaPath(t);return n.requestObject(r).then(function(e){var t=n.fetchEntityContainer().getResult();var i=t[t.$EntityContainer];return{boundEntitySet:e,entityTypes:Object.values(i).map(function(e){return e.$Type}).filter(Boolean)}})}return Promise.reject()};a.onControlSelected=function(e){i=e};a.onTriggerCreateExtensionData=function(e,i){if(!n){n=new t}n.open(e,i)};a.isServiceOutdated=function(t){return e.isServiceOutdated(t)};a.setServiceValid=function(t){e.setServiceValid(t)};a.setServiceInvalid=function(t){e.setServiceInvalid(t)};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/dialog/CustomFieldCAPDialog",["sap/ui/base/ManagedObject","sap/ui/core/Fragment","sap/m/MessageToast","sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/getEditorConfig","sap/base/util/ObjectPath","sap/base/util/deepClone","sap/ui/model/resource/ResourceModel","sap/ui/model/json/JSONModel"],function(e,t,i,n,o,s,a,r){"use strict";var l=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");function d(e,t,i){var o=e.getContent()[0];o.setJson(s(t));o.setConfig(n(i));return o}function u(e){if(!e||!e.element){return{}}var t=s(e);if(!o.get(["element","@Common.Label"],t)){var i=o.get(["element","name"],t);o.set(["element","@Common.Label"],i,t)}var n=o.get(["element","@assert.range"],t);if(o.get(["element","type"],t)==="cds.String"&&Array.isArray(n)){o.set(["element","enum"],n.reduce(function(e,t){e[t]={};return e},{}),t);o.set(["element","@assert.range"],true,t)}if(t.element.annotations){t.element=Object.assign({},t.element,t.element.annotations);delete t.element.annotations}var a={extend:t.extend,elements:{}};a.elements[t.element.name]=t.element;return a}var p=e.extend("sap.ui.fl.write._internal.fieldExtensibility.cap.dialog.CustomFieldCAPDialog",{metadata:{library:"sap.ui.fl",properties:{_dialog:{type:"sap.m.Dialog",visibility:"hidden"}}}});p.prototype.open=function(e,i){var n={element:{name:"NewField",type:"cds.String"},extend:e.boundEntitySet.$Type};var o=this.getProperty("_dialog");if(o){this._oEditor.setJson(s(n));o.open()}else{t.load({name:"sap.ui.fl.write._internal.fieldExtensibility.cap.dialog.CustomFieldCAPDialog",controller:this}).then(function(t){this._oDialogModel=new r({isValid:true});this._oDialogModel.setDefaultBindingMode("OneWay");t.setModel(this._oDialogModel,"dialog");t.setModel(new a({bundle:l}),"i18n");t.addStyleClass(i);this.setProperty("_dialog",t);this._oJson=s(n);this._oEditor=d(t,this._oJson,{entityTypes:e.entityTypes});this._oEditor.attachJsonChange(function(e){this._oJson=e.getParameter("json")}.bind(this));this._oEditor.attachValidationErrorChange(function(e){var t=e.getParameter("hasError");this._oDialogModel.setData({isValid:!t})}.bind(this));t.open()}.bind(this))}};p.prototype.exit=function(){var e=this.getProperty("_dialog");if(e){e.destroy()}if(this.oEditor){this.oEditor.destroy()}};p.prototype.onSave=function(){var e=u(this._oJson);var t={extensions:[JSON.stringify(e)]};var n=new Promise(function(e,i){var n=new XMLHttpRequest;n.open("POST","/-/cds/extensibility/addExtension");n.setRequestHeader("Content-Type","application/json");n.onload=function(){if(n.status>=200&&n.status<400){e(n.response)}else{i({status:n.status,message:n.statusText})}};n.send(JSON.stringify(t))});n.then(function(){i.show(l.getText("CAP_ADD_FIELD_SUCCESS"))});this.getProperty("_dialog").close()};p.prototype.onCancel=function(){this.getProperty("_dialog").close()};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 *
 * @private
 * @experimental
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/getEditorConfig",[],function(){"use strict";return function(e){return{context:"/element",properties:{entityType:{tags:["general"],label:"Entity Type",path:"/extend",type:"select",items:(e.entityTypes||[]).map(function(e){return{key:e}}),allowCustomValues:false,validators:{isRequired:{type:"isRequired"}}},name:{tags:["general"],label:"Name",path:"name",type:"string",validators:{isRequired:{type:"isRequired"},namePattern:{type:"pattern",errorMessage:"CAP_ERR_WHITESPACE",config:{pattern:"^\\S+$"}}}},label:{tags:["general"],label:"Label",path:"@Common.Label",type:"string",placeholder:"{/element/name}"},type:{tags:["general"],label:"Type",path:"type",type:"select",items:[{key:"cds.String",title:"String"},{key:"cds.Integer",title:"Integer"},{key:"cds.Decimal",title:"Decimal"},{key:"cds.Date",title:"Date"},{key:"cds.Time",title:"Time"},{key:"cds.DateTime",title:"DateTime"},{key:"cds.Boolean",title:"Boolean"}],allowCustomValues:false,validators:{isRequired:{type:"isRequired"}}},numberPrecision:{tags:["general"],label:"Precision",path:"precision",type:"number",defaultValue:"",visible:"{= ${/element/type} === 'cds.Decimal' }"},numberScale:{tags:["general"],label:"Scale",path:"scale",type:"number",defaultValue:"",visible:"{= ${/element/type} === 'cds.Decimal' }"},stringLength:{tags:["general"],label:"Length",path:"length",type:"number",defaultValue:"",visible:"{= ${/element/type} === 'cds.String' }"},defaultValue:{tags:["general"],label:"Default",path:"default/val",defaultValue:"",type:"{/element/type}"},readonly:{tags:["validation"],label:"Readonly",path:"@readonly",type:"bool"},mandatory:{tags:["validation"],label:"Mandatory",path:"@mandatory",type:"bool"},format:{tags:["validation"],label:"Format",path:"@assert.format",type:"string",defaultValue:"",visible:"{= ${/element/type} === 'cds.String' }"},stringRange:{tags:["validation"],label:"Allowed Values",path:"@assert.range",type:"list",visible:"{= ${/element/type} === 'cds.String' }",active:"{= ${/element/type} === 'cds.String' }"},arrayRange:{tags:["validation"],label:"Range",path:"@assert.range",type:"range",rangeType:"{/element/type}",visible:"{= ${/element/type} === 'cds.Integer' || ${/element/type} === 'cds.Decimal' || ${/element/type} === 'cds.DateTime' || ${/element/type} === 'cds.Date' || ${/element/type} === 'cds.Time'}",active:"{= ${/element/type} === 'cds.Integer' || ${/element/type} === 'cds.Decimal' || ${/element/type} === 'cds.DateTime' || ${/element/type} === 'cds.Date' || ${/element/type} === 'cds.Time'}"},annotations:{tags:["advanced"],label:"Additional Annotations",allowedTypes:["json"],path:"annotations",type:"map",allowTypeChange:false,addItemLabelI18n:"CAP_ADD_FIELD_EDITOR.ANNOTATION",defaultType:"json"}},layout:{form:{groups:[{label:"General",items:[{type:"tag",value:"general"}]},{label:"Input Validation",items:[{type:"tag",value:"validation"}]},{label:"Advanced",items:[{type:"tag",value:"advanced"}]}]}},propertyEditors:{select:"sap/ui/integration/designtime/baseEditor/propertyEditor/selectEditor/SelectEditor",string:"sap/ui/integration/designtime/baseEditor/propertyEditor/stringEditor/StringEditor",integer:"sap/ui/integration/designtime/baseEditor/propertyEditor/integerEditor/IntegerEditor",number:"sap/ui/integration/designtime/baseEditor/propertyEditor/numberEditor/NumberEditor",map:"sap/ui/integration/designtime/baseEditor/propertyEditor/mapEditor/MapEditor",list:"sap/ui/integration/designtime/baseEditor/propertyEditor/listEditor/ListEditor",bool:"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/booleanEditor/BooleanEditor",range:"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/rangeEditor/RangeEditor",json:"sap/ui/integration/designtime/baseEditor/propertyEditor/jsonEditor/JsonEditor","cds.String":"sap/ui/integration/designtime/baseEditor/propertyEditor/stringEditor/StringEditor","cds.Integer":"sap/ui/integration/designtime/baseEditor/propertyEditor/integerEditor/IntegerEditor","cds.Decimal":"sap/ui/integration/designtime/baseEditor/propertyEditor/numberEditor/NumberEditor","cds.Date":"sap/ui/integration/designtime/baseEditor/propertyEditor/dateEditor/DateEditor","cds.Time":"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/timeEditor/TimeEditor","cds.DateTime":"sap/ui/integration/designtime/baseEditor/propertyEditor/dateTimeEditor/DateTimeEditor","cds.Boolean":"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/booleanEditor/BooleanEditor"},i18n:"sap/ui/fl/messagebundle.properties",validators:{isRequired:"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/validators/IsRequired"},propertyEditorConfigs:{"cds.Date":{pattern:"YYYY-MM-dd"},"cds.DateTime":{pattern:"YYYY-MM-dd'T'HH:mm:ss'Z'"}}}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/booleanEditor/BooleanEditor",["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor"],function(e){"use strict";var t=e.extend("sap.ui.fl.write._internal.fieldExtensibility.cap.editor.propertyEditor.booleanEditor.BooleanEditor",{xmlFragment:"sap.ui.fl.write._internal.fieldExtensibility.cap.editor.propertyEditor.booleanEditor.BooleanEditor",metadata:{library:"sap.ui.fl"},renderer:e.getMetadata().getRenderer().render});t.prototype._onChange=function(e){var t=!!e.getParameter("selected");this.setValue(t)};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/rangeEditor/RangeEditor",["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor","sap/ui/model/json/JSONModel"],function(e,t){"use strict";var i=e.extend("sap.ui.fl.write._internal.fieldExtensibility.cap.editor.propertyEditor.rangeEditor.RangeEditor",{xmlFragment:"sap.ui.fl.write._internal.fieldExtensibility.cap.editor.propertyEditor.rangeEditor.RangeEditor",metadata:{library:"sap.ui.fl"},renderer:e.getMetadata().getRenderer().render});i.configMetadata=Object.assign({},e.configMetadata,{rangeType:{defaultValue:"string"}});i.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oContentModel=new t;this._oContentModel.setDefaultBindingMode("OneWay");this.setModel(this._oContentModel,"contentModel")};i.prototype.getExpectedWrapperCount=function(){return 2};i.prototype.setConfig=function(){e.prototype.setConfig.apply(this,arguments);this.setValue(this.getValue())};i.prototype.setValue=function(t){e.prototype.setValue.apply(this,arguments);var i={type:this.getConfig().rangeType};var r=Array.isArray(t)?t:[];this._oContentModel.setData([{value:r[0],config:Object.assign({index:0},i)},{value:r[1],config:Object.assign({index:1},i)}])};i.prototype._onChange=function(e){var t=e.getParameter("value");var i=e.getSource().getConfig().index;var r=(this.getValue()||[]).slice();r[i]=t;this.setValue(r)};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/timeEditor/TimeEditor",["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor","sap/ui/integration/designtime/baseEditor/propertyEditor/dateEditor/DateEditor","sap/ui/core/format/DateFormat"],function(t,e,i){"use strict";var r=e.extend("sap.ui.fl.write._internal.fieldExtensibility.cap.editor.propertyEditor.timeEditor.TimeEditor",{xmlFragment:"sap.ui.fl.write._internal.fieldExtensibility.cap.editor.propertyEditor.timeEditor.TimeEditor",metadata:{library:"sap.ui.fl"},renderer:t.getMetadata().getRenderer().render});r.configMetadata=Object.assign({},e.configMetadata,{pattern:{defaultValue:"HH:mm:ss"},utc:{defaultValue:false}});r.prototype.getDefaultValidators=function(){return Object.assign({},e.prototype.getDefaultValidators.call(this))};r.prototype.getFormatterInstance=function(t){return i.getTimeInstance(t||{pattern:"HH:mm:ss.SSSS"})};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/validators/IsRequired",[],function(){"use strict";return{async:false,errorMessage:"CAP_ERR_REQUIRED",validate:function(e){return e===false||e===0||!!e}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/flexState/FlexObjectState",["sap/base/util/restricted/_omit","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/apply/_internal/flexState/controlVariants/VariantManagementState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,t,r,n,a,i,o,l,c,f,s,u){"use strict";var p={};function g(e){e.reference=i.getFlexReferenceForControl(e.selector);return a.initialize({componentId:e.componentId||u.getAppComponentForControl(e.selector).getId(),reference:e.reference,componentData:{},manifest:{}})}function C(e){var t=a.getCompVariantsMap(e.reference);var n=[];if(e.invalidateCache){var i=a.getInitialNonFlCompVariantData(e.reference);if(i){Object.keys(i).forEach(function(e){t._initialize(e,i[e].variants,i[e].controlId);r.merge(e,t[e],i[e].standardVariant)})}}for(var o in t){var l=t[o];for(var c in l.byId){n.push(l.byId[c])}}return s.filterChangeOrChangeDefinitionsByCurrentLayer(n,e.currentLayer)}function y(e){var t=i.getFlexReferenceForControl(e.selector);return c.persistAll(t)}function h(e){if(!e.reference){var t=o.getAppComponentForSelector(e.selector);e.reference=i.getFlexReferenceForControl(t)}return f.getChangePersistenceForComponent(e.reference)}function v(e,t){var r=u.getAppComponentForControl(t);var a=r.getModel(l.getVariantModelName());var i=a&&a.sFlexReference;var o=n.getVariantManagementReferences(i);if(o.length===0){return e}var c=o.map(function(e){return a.getCurrentVariantReference(e)});return e.filter(function(e){return e.getFileType()!=="change"||c.some(function(t){return e.getVariantReference()===t||!e.getVariantReference()})})}function m(t){var r=h(t);return r.getChangesForComponent(e(t,["invalidateCache","selector"]),t.invalidateCache).then(function(e){var n=[];if(t.includeDirtyChanges){n=r.getDirtyChanges();if(t.currentLayer){n=n.filter(function(e){return e.getLayer()===t.currentLayer})}}var a=e.concat(n);if(t.onlyCurrentVariants){return v(a,t.selector)}return a})}function F(e,t){var r=o.getFlexControllerInstance(e.selector);return r.saveAll(t,e.skipUpdateCache,e.draft,e.layer,e.removeOtherLayerChanges,e.condenseAnyLayer)}p.getFlexObjects=function(e){return g(e).then(function(){return m(e)}).then(function(t){return C(e).concat(t)})};p.getDirtyFlexObjects=function(e){e.includeDirtyChanges=true;var r=h(e);var n=r.getDirtyChanges();var a=C(e);return n.concat(a).filter(function(e){return e.getState()!==t.LifecycleState.PERSISTED})};p.hasDirtyFlexObjects=function(e){var t=o.getAppComponentForSelector(e.selector);var r=i.getFlexReferenceForControl(t);if(f.getChangePersistenceForComponent(r).getDirtyChanges().length>0){return true}if(f.getChangePersistenceForComponent(u.normalizeReference(r)).getDirtyChanges().length>0){return true}return c.hasDirtyChanges(r)};p.saveFlexObjects=function(t){var r=o.getAppComponentForSelector(t.selector);return Promise.all([y(t),F(t,r)]).then(function(){if(t.layer){t.currentLayer=t.layer}t.componentId=r.getId();t.invalidateCache=true;return p.getFlexObjects(e(t,"skipUpdateCache"))})};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState",["sap/base/util/restricted/_omit","sap/base/util/restricted/_pick","sap/base/util/UriParameters","sap/ui/core/Core","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexObjects/CompVariant","sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData","sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory","sap/ui/fl/apply/_internal/flexObjects/RevertData","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/UpdatableChange","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/registry/Settings","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/_internal/Versions","sap/ui/fl/write/api/Version"],function(e,t,n,a,r,i,o,s,c,p,u,f,l,v,g,d,y,C){"use strict";function S(e,t){var n=m("/draftFilenames",t);if(n){return e.getState()===u.LifecycleState.NEW||n.includes(e.getId())}return true}function m(e,t){var t={reference:i.normalizeReference(t.reference),layer:t.layer};if(y.hasVersionsModel(t)){return y.getVersionsModel(t).getProperty(e)}return undefined}function V(e,t){var n=e.getFlexObjectMetadata?e.getFlexObjectMetadata().changeType:e.getChangeType();if(!["defaultVariant","updateVariant"].includes(n)){return false}var a=e.getLayer()===t.layer;var r=e.getFlexObjectMetadata().packageName;var i=!r||r==="$TMP";return a&&i&&S(e,t)}function h(e,t){if(t.isVariant&&t.isVariant()){return e.variants}var n=t.getChangeType();switch(n){case"defaultVariant":return e.defaultVariants;case"standardVariant":return e.standardVariants;default:return e.changes}}function x(e,t){for(var n=0;n<e.length;n++){if(e[n].fileName===t.fileName){e.splice(n,1,t);break}}}function O(e,t,n){return d.update({flexObject:e.convertToFileContent?e.convertToFileContent():e.getDefinition(),layer:e.getLayer(),transport:e.getRequest(),parentVersion:n}).then(function(t){if(t&&t.response){e.setResponse(t.response);if(n){y.onAllChangesSaved({reference:t.response.reference,layer:t.response.layer,draftFilenames:t.response.fileName})}}else{e.setState(u.LifecycleState.PERSISTED)}}).then(function(){var n=h(t.changes.comp,e);var a=e.convertToFileContent?e.convertToFileContent():e.getDefinition();x(n,a);return a})}function T(e,t){for(var n=e.length-1;n>=0;n--){var a=e[n].fileName||e[n].getId()&&e[n].getId();if((a||e[n].getId())===t){e.splice(n,1);break}}}function I(e,t){delete t.byId[e.getId()];if(e.getChangeType()==="standardVariant"){t.standardVariantChange=undefined}else{T(h(t,e),e.getId())}}function b(e,t,n,a){var r=e.convertToFileContent?e.convertToFileContent():e.getDefinition();return d.remove({flexObject:r,layer:e.getLayer(),transport:e.getRequest(),parentVersion:a}).then(function(){I(e,t)}).then(function(){T(h(n.changes.comp,e),r.fileName);return r})}function D(e){var t={};if(typeof e.texts==="object"){Object.keys(e.texts).forEach(function(n){t[n]={value:e.texts[n],type:"XFLD"}})}return t}function E(e){return e&&[u.LifecycleState.NEW,u.LifecycleState.DIRTY,u.LifecycleState.DELETED].includes(e.getState())}function U(e){return e.variants.concat(e.changes).concat(e.defaultVariants).concat(e.standardVariantChange)}function F(e){if(e.layer){return e.layer}if(e.isUserDependent){return r.USER}var t=n.fromQuery(window.location.search).get("sap-ui-layer")||"";t=t.toUpperCase();if(t){return t}if(!e.fileType==="variant"){return r.CUSTOMER}var a=g.getInstanceOrUndef().isPublicLayerAvailable();return a?r.PUBLIC:r.CUSTOMER}function R(e){var t=l.getCompVariantsMap(e.reference)._getOrCreate(e.persistencyKey);return t.byId[e.id]}function N(e){if(e instanceof o){e.removeAllRevertData()}}function L(e,t){e.storeExecuteOnSelection(t.executeOnSelection);e.storeFavorite(t.favorite);e.storeContexts(t.contexts);e.storeName(t.name);e.storeContent(t.content||e.getContent());return e}function M(e,t){e.setExecuteOnSelection(t.executeOnSelection);e.setFavorite(t.favorite);e.setContexts(t.contexts);e.setName(t.name);e.setContent(t.content||e.getContent());return e}function j(e){if(e.layer===r.VENDOR){e.support={user:"SAP"}}else if(g.getInstanceOrUndef()&&g.getInstanceOrUndef().getUserId()){e.support={user:g.getInstanceOrUndef().getUserId()}}}var A={};A.checkSVMControlsForDirty=function(e){var t=l.getCompVariantsMap(e);return Object.values(t).some(function(e){var t=e.controlId&&a.byId(e.controlId);return t&&t.getModified()})};A.setDefault=function(e){var t={defaultVariantName:e.defaultVariantId};e.layer=e.layer||n.fromQuery(window.location.search).get("sap-ui-layer")||r.USER;var o=l.getCompVariantsMap(e.reference)._getOrCreate(e.persistencyKey);var s="defaultVariant";var u=o.defaultVariants;var v=u[u.length-1];if(!v||!V(v,e)){var g={fileName:i.createDefaultFileName(s),fileType:"change",changeType:s,layer:e.layer,content:t,namespace:i.createNamespace(e,"changes"),reference:e.reference,selector:{persistencyKey:e.persistencyKey},support:e.support||{}};g.support.generator=g.support.generator||"CompVariantState."+s;g.support.sapui5Version=a.getConfiguration().getVersion().toString();v=c.createFromFileContent(g,f);o.defaultVariants.push(v);o.byId[v.getId()]=v;v.addRevertInfo(new p({type:A.operationType.NewChange}))}else{v.addRevertInfo(new p({type:A.operationType.ContentUpdate,content:{previousState:v.getState(),previousContent:v.getContent()}}));v.setContent(t)}return v};A.revertSetDefaultVariantId=function(e){var t=l.getCompVariantsMap(e.reference)._getOrCreate(e.persistencyKey);var n=t.defaultVariants;var a=n[n.length-1];var r=a.popLatestRevertInfo();if(r.getType()===A.operationType.ContentUpdate){a.setContent(r.getContent().previousContent);a.setState(r.getContent().previousState)}else{a.setState(u.LifecycleState.DELETED);t.defaultVariants.pop()}};A.addVariant=function(t){if(!t){return undefined}var n=t.changeSpecificData;n.layer=F(n);n.changeType=n.type;n.texts=D(n);j(n);var a=Object.assign({},n,e(t,"changeSpecificData"));var r=c.createCompVariant(a);var i=l.getCompVariantsMap(t.reference);var o=i._getOrCreate(t.persistencyKey);o.variants.push(r);o.byId[r.getId()]=r;return r};A.updateVariant=function(e){function n(t,n){var a=t.getLayer()===n;var r=t.getFlexObjectMetadata().packageName;var i=!r||r==="$TMP";var o=t.getChanges().some(function(e){return e.getLayer()===n});return t.getPersisted()&&a&&i&&!o&&S(t,e)}function a(t){return t.getChanges().reverse().find(function(t){return t.getChangeType()==="updateVariant"&&V(t,e)})}function r(e,t,n,a){var r={type:n,change:a,content:{previousState:t.getState(),previousContent:t.getContent(),previousFavorite:t.getFavorite(),previousExecuteOnSelection:t.getExecuteOnSelection(),previousContexts:t.getContexts(),previousName:t.getName(),previousAction:e.action}};t.addRevertData(new s(r))}function i(e,t){r(e,t,A.operationType.ContentUpdate);if(e.executeOnSelection!==undefined){t.storeExecuteOnSelection(e.executeOnSelection)}if(e.favorite!==undefined){t.storeFavorite(e.favorite)}if(e.contexts){t.storeContexts(e.contexts)}if(e.name){t.storeName(e.name)}if(e.transportId){t.setRequest(e.transportId)}t.storeContent(e.content||t.getContent())}function o(e,n,a){var i=a.getRevertData()||[];var o=Object.assign({},a.getContent());var s={previousContent:Object.assign({},o),previousState:a.getState(),change:t(Object.assign({},e),["favorite","executeOnSelection","contexts","content","name"])};i.push(s);a.setRevertData(i);if(e.executeOnSelection!==undefined){o.executeOnSelection=e.executeOnSelection}if(e.favorite!==undefined){o.favorite=e.favorite}if(e.contexts){o.contexts=e.contexts}if(e.content){o.variantContent=e.content}if(e.name){a.setText("variantName",e.name)}a.setContent(o);if(e.transportId){a.setRequest(e.transportId)}r(e,n,A.operationType.UpdateVariantViaChangeUpdate,a);v.applyChangeOnVariant(n,a)}function p(e,t){function n(t){var n=l.getCompVariantsMap(e.reference);var a=t.getSelector().persistencyKey;n[a].changes.push(t);n[a].byId[t.getId()]=t}var a={};["favorite","executeOnSelection","contexts"].forEach(function(t){if(e[t]!==undefined){a[t]=e[t]}});if(e.content!==undefined){a.variantContent=e.content}var i=c.createUIChange({changeType:"updateVariant",layer:f,fileType:"change",reference:e.reference,packageName:e.packageName,content:a,selector:{persistencyKey:e.persistencyKey,variantId:t.getVariantId()}});if(e.name){i.setText("variantName",e.name,"XFLD",true)}if(e.transportId){i.setRequest(e.transportId)}n(i);r(e,t,A.operationType.NewChange,i);v.applyChangeOnVariant(t,i)}var u=R(e);var f=F(e);if(n(u,f)){i(e,u)}else{var g=a(u);if(g){o(e,u,g)}else{p(e,u)}}return u};A.discardVariantContent=function(e){var t=R(e);var n=t.getRevertData();if(n.length!==0){var a=n.slice().reverse().some(function(t){if(t.getContent().previousAction===A.updateActionType.SAVE){e.content=t.getContent().previousContent;e.action=A.updateActionType.DISCARD;return true}});if(!a){e.content=n[0].getContent().previousContent;e.action=A.updateActionType.DISCARD}A.updateVariant(e)}return t};A.updateActionType={UPDATE:"update",SAVE:"save",DISCARD:"discard",UPDATE_METADATA:"update_metadata"};A.operationType={StateUpdate:"StateUpdate",ContentUpdate:"ContentUpdate",NewChange:"NewChange",UpdateVariantViaChange:"UpdateVariantViaChange",UpdateVariantViaChangeUpdate:"UpdateVariantViaChangeUpdate"};A.removeVariant=function(e){var t=R(e);var n=t.getState();if(!e.revert){var a=new s({type:A.operationType.StateUpdate,content:{previousState:n}});t.addRevertData(a)}if(n===u.LifecycleState.NEW){var r=l.getCompVariantsMap(e.reference);var i=r._getOrCreate(e.persistencyKey);I(t,i);return t}t.markForDeletion();return t};A.revert=function(e){function n(t){var n=t.getSelector().persistencyKey;var a=l.getCompVariantsMap(e.reference);delete a[n].byId[t.getId()];a[n].changes=a[n].changes.filter(function(e){return e!==t})}var a=R(e);var r=a.getRevertData().pop();a.removeRevertData(r);var i=r.getContent();var o;switch(r.getType()){case A.operationType.ContentUpdate:L(a,Object.assign({name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},t(e,["reference","persistencyKey","id"])));break;case A.operationType.NewChange:o=r.getChange();a.removeChange(o);n(o);M(a,Object.assign({name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},t(e,["reference","persistencyKey","id"])));break;case A.operationType.UpdateVariantViaChangeUpdate:o=r.getChange();M(a,Object.assign({name:i.previousName,content:i.previousContent,favorite:i.previousFavorite,executeOnSelection:i.previousExecuteOnSelection,contexts:i.previousContexts},t(e,["reference","persistencyKey","id"])));var s=o.getRevertData().pop();o.setContent(s.previousContent);o.setState(s.previousState);break;case A.operationType.StateUpdate:default:break}a.setState(i.previousState);return a};A.overrideStandardVariant=function(e){var t=l.getCompVariantsMap(e.reference)[e.persistencyKey];var n=t.byId[t.standardVariant.getVariantId()];n.setExecuteOnSelection(!!e.executeOnSelection);var a=n.getChanges();n.removeAllChanges();a.forEach(function(e){v.applyChangeOnVariant(n,e)})};A.persist=function(e){function t(e,t,n){if(e.getLayer()===r.PUBLIC){e.setFavorite(false)}return d.write({flexObjects:[e.convertToFileContent?e.convertToFileContent():e.getDefinition()],layer:e.getLayer(),transport:e.getRequest(),isLegacyVariant:e.isVariant&&e.isVariant(),parentVersion:n}).then(function(t){if(t&&t.response&&t.response[0]){e.setResponse(t.response[0]);if(n){y.onAllChangesSaved({reference:t.response[0].reference,layer:t.response[0].layer,draftFilenames:[t.response[0].fileName]})}}else{e.setState(u.LifecycleState.PERSISTED)}}).then(function(){var n=e.convertToFileContent?e.convertToFileContent():e.getDefinition();h(t.changes.comp,e).push(n);return n})}function n(e,n,a,r){switch(e.getState()){case u.LifecycleState.NEW:N(e);return t(e,a,r);case u.LifecycleState.DIRTY:N(e);return O(e,a,r);case u.LifecycleState.DELETED:N(e);return b(e,n,a,r);default:break}}var a=e.reference;var i=e.persistencyKey;var o=l.getCompVariantsMap(a);var s=o._getOrCreate(i);return l.getStorageResponse(a).then(function(e){var t=U(s).filter(E);var a=t.map(function(a,r){if(r===0){var i=m("/persistedVersion",{layer:a.getLayer(),reference:a.getFlexObjectMetadata?a.getFlexObjectMetadata().reference:a.getDefinition().reference});return n(a,s,e,i).then(function(){var a=t.map(function(t,a){if(a!==0){var r=i?C.Number.Draft:undefined;return n(t,s,e,r)}});return a})}});return Promise.all(a)})};A.persistAll=function(t){var n=e(l.getCompVariantsMap(t),"_getOrCreate","_initialize");var a=Object.keys(n).map(function(e){return A.persist({reference:t,persistencyKey:e})});return Promise.all(a)};A.hasDirtyChanges=function(e){var t=l.getCompVariantsMap(e);var n=[];for(var a in t){var r=t[a];for(var i in r.byId){n.push(r.byId[i])}}return n.some(function(e){return e.getState()!==u.LifecycleState.PERSISTED&&!(e.getVariantId&&e.getVariantId()==="*standard*")})};return A});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/AppVariantWriteAPI",["sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/write/_internal/SaveAs","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/write/_internal/Versions"],function(e,r,t,n,i){"use strict";var a=function(r,n){if(!n.layer){return Promise.reject("Layer must be provided")}var i=e.getFlexControllerInstance(n.selector);n.reference=i.getComponentName();n.url="/sap/bc/lrep";return t.appVariant[r](n)};var s={saveAs:function(t){if(!t.layer){return Promise.reject("Layer must be provided")}if(!t.id){return Promise.reject("App variant ID must be provided")}var a=e.getFlexControllerInstance(t.selector);t.reference=a.getComponentName();return n.isVersioningEnabled(t.layer).then(function(e){if(e){t.parentVersion=i.getVersionsModel(t).getProperty("/displayedVersion")}return r.saveAs(t)})},deleteAppVariant:function(t){if(!t.layer){return Promise.reject("Layer must be provided")}var n=e.getFlexControllerInstance(t.selector);t.id=n.getComponentName();return r.deleteAppVariant(t)},listAllAppVariants:function(e){if(!e.layer){return Promise.reject("Layer must be provided")}return a("list",e)},getManifest:function(e){if(!e.layer){return Promise.reject("Layer must be provided")}if(!e.appVarUrl){return Promise.reject("appVarUrl must be provided")}return t.appVariant.getManifest(e)},assignCatalogs:function(e){if(!e.layer){return Promise.reject("Layer must be provided")}if(!e.assignFromAppId){return Promise.reject("assignFromAppId must be provided")}if(!e.action){return Promise.reject("action must be provided")}return a("assignCatalogs",e)},unassignCatalogs:function(e){if(!e.layer){return Promise.reject("Layer must be provided")}if(!e.action){return Promise.reject("action must be provided")}return a("unassignCatalogs",e)}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ContextBasedAdaptationsAPI",["sap/ui/fl/registry/Settings","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/Utils","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/_internal/Versions","sap/ui/model/json/JSONModel"],function(e,r,t,n,a,o){"use strict";var i={};var s={};function d(e){var n=r.getFlexReferenceForControl(e);if(!n){throw Error("The application ID could not be determined")}return t.normalizeReference(n)}function l(e,r,t){if(e.status===r){a.onAllChangesSaved({reference:t.reference,layer:t.layer,contextBasedAdaptation:true})}return e}s.initialize=function(r){if(!r.layer){return Promise.reject("No layer was provided")}if(!r.control){return Promise.reject("No control was provided")}var t=d(r.control);r.reference=t;var n=r.layer;return e.getInstance().then(function(e){var t=e.isContextBasedAdaptationEnabled();var n=t?s.load(r):Promise.resolve({adaptations:[]});return n}).then(function(e){return s.createModel(e.adaptations)}).then(function(e){i[t]=i[t]||{};i[t][n]=i[t][n]||{};i[t][n]=e;return i[t][n]})};s.createModel=function(e){if(!Array.isArray(e)){throw Error("Adaptations model can only be initialized with an array of adaptations")}var r=new o({adaptations:e,count:e.length,displayedAdaptation:e.length>0?e[0]:{}});r.updateAdaptations=function(e){r.setProperty("/adaptations",e);r.setProperty("/count",e.length);if(e.length>0){var t=r.getProperty("/adaptations/0/");r.setProperty("/displayedAdaptation",t)}r.updateBindings(true)};r.insertAdaptation=function(t){e=r.getProperty("/adaptations");e.splice(t.priority,0,t);delete t.priority;r.updateAdaptations(e)};return r};s.getAdaptationsModel=function(e){if(!e.layer){throw Error("No layer was provided")}if(!e.control){throw Error("No control was provided")}e.reference=d(e.control);var r=e.reference;var t=e.layer;if(!s.hasAdaptationsModel(e)){throw Error("Adaptations model for reference '"+r+"' and layer '"+t+"' were not initialized.")}return i[r][t]};s.hasAdaptationsModel=function(e){var r=e.reference;var t=e.layer;return i[r]&&i[r][t]};s.clearInstances=function(){i={}};s.create=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.contextBasedAdaptation){return Promise.reject("No contextBasedAdaptation was provided")}e.contextBasedAdaptation.id=t.createDefaultFileName();e.reference=d(e.control);return n.contextBasedAdaptation.create({layer:e.layer,flexObject:e.contextBasedAdaptation,reference:e.reference,parentVersion:a.getVersionsModel({layer:e.layer,reference:e.reference}).getProperty("/displayedVersion")}).then(function(r){var t=this.getAdaptationsModel(e);t.insertAdaptation(e.contextBasedAdaptation);return l(r,201,e)}.bind(this))};s.reorder=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}if(!e.parameters||!e.parameters.priorities){return Promise.reject("No valid priority list was provided")}e.reference=d(e.control);return n.contextBasedAdaptation.reorder({layer:e.layer,flexObjects:e.parameters,reference:e.reference,parentVersion:a.getVersionsModel({layer:e.layer,reference:e.reference}).getProperty("/displayedVersion")}).then(function(r){return l(r,204,e)})};s.load=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.control){return Promise.reject("No control was provided")}e.reference=d(e.control);return n.contextBasedAdaptation.load({layer:e.layer,flexObject:e.parameters,reference:e.reference,version:a.getVersionsModel({layer:e.layer,reference:e.reference}).getProperty("/displayedVersion")}).then(function(e){if(!e){e={adaptations:[]}}return e})};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ContextSharingAPI",["sap/ui/fl/variants/context/Component","sap/ui/core/ComponentContainer","sap/ui/fl/Layer","sap/ui/fl/registry/Settings"],function(e,t,n,r){"use strict";var o;var i={createComponent:function(i){if(i.layer!==n.CUSTOMER){return Promise.resolve()}return r.getInstance().then(function(e){return e.isContextSharingEnabled()}).then(function(n){if(n){if(!o||o.bIsDestroyed){var r=new e("contextSharing");r.showMessageStrip(true);r.setSelectedContexts({role:[]});o=new t("contextSharingContainer",{component:r});return r.getRootControl().oAsyncState.promise.then(function(){return o})}return o}})}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ControlPersonalizationWriteAPI",["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Core","sap/ui/core/Element","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/api/ControlVariantApplyAPI","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/registry/Settings","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(e,n,t,r,o,a,i,c,l,s,u,p,f,g){"use strict";var d={};function h(e,t){if(!e.changeSpecificData){return Promise.reject(new Error("No changeSpecificData available"))}if(!e.changeSpecificData.changeType){return Promise.reject(new Error("No valid changeType"))}if(!(e.selectorControl instanceof r)){return Promise.reject(new Error("No valid selectorControl"))}var o=e.selectorControl.getMetadata().getName();return l.getChangeHandler(e.changeSpecificData.changeType,o,e.selectorControl,n,t)}function m(e,t,r){var o=a.getRelevantVariantManagementControlId(t,[],r);return n.getSelector(o,e).id}function C(e){var r=a.getAllVariantManagementControlIds(e);return r.reduce(function(r,o){var a=t.byId(o).getFor();if(a.length){r.push(n.getSelector(o,e).id)}return r},[])}function v(n){e.error(n);return Promise.reject(n)}var y={add:function(n){if(!n.changes.length){return Promise.resolve([])}var t=n.changes[0].selectorElement||n.changes[0].selectorControl;var r=g.getAppComponentForControl(t);var a=c.getFlexReference({element:t});var l=p.createForControl(r);var s=r.getModel(i.getVariantModelName());var C=f.USER;var v=[];function y(){var t=[];return n.changes.reduce(function(o,a){return o.then(function(){a.selectorControl=a.selectorElement;return h(a,C)}).then(function(){if(!a.transient&&!n.ignoreVariantManagement){if(!a.changeSpecificData.variantReference){var e=m(r,a.selectorControl,n.useStaticArea);if(e){var t=s.oData[e].currentVariant;a.changeSpecificData.variantReference=t}}}else{delete a.changeSpecificData.variantReference}a.changeSpecificData=Object.assign(a.changeSpecificData,{developerMode:false,layer:C});return u.create({changeSpecificData:a.changeSpecificData,selector:a.selectorControl})}).then(function(e){if(!a.transient){e=l.addPreparedChange(e,r)}t.push({changeInstance:e,selectorControl:a.selectorControl})}).catch(function(n){e.error("A Change was not added successfully. Reason: ",n.message)})},Promise.resolve()).then(function(){return t})}function I(n){return n.reduce(function(n,t){return n.then(function(){t.changeInstance.setQueuedForApply();return u.apply({change:t.changeInstance,element:t.selectorControl})}).then(function(e){if(e.success){v.push(t.changeInstance)}else{throw e.error||new Error("ChangesWriteAPI.apply failed with unspecified error")}}).catch(function(n){l.deleteChange(t.changeInstance,r);e.error("A Change was not applied successfully. Reason: ",n.message)})},Promise.resolve())}return o.initialize({componentId:r.getId()}).then(function(){return y().then(I).then(function(){(d[a]||[]).forEach(function(e){e(v)});return v})})},reset:function(e){if(!e.selectors||e.selectors.length===0){return v("At least one control ID has to be provided as a parameter")}var n=e.selectors[0].appComponent||g.getAppComponentForControl(e.selectors[0]);if(!n){return v("App Component could not be determined")}var t=e.selectors.map(function(e){var t=e.id||e.getId();var r=n.getLocalId(t);return r||t});var r=p.createForControl(n);if(o.isInitialized({control:n})){return r.resetChanges(f.USER,undefined,n,t,e.changeTypes)}return Promise.resolve()},restore:function(e){if(!e||!e.selector){return Promise.reject("No selector was provided")}var n=g.getAppComponentForControl(e.selector);if(!n){return Promise.reject("App Component could not be determined")}var t=p.createForControl(n);if(o.isInitialized({control:n})){return t.removeDirtyChanges(f.USER,n,e.selector,e.generator,e.changeTypes)}return Promise.resolve()},save:function(e){var n=e.selector.appComponent||g.getAppComponentForControl(e.selector);if(!n){return v("App Component could not be determined")}var t=p.createForControl(n);var r=n.getModel(i.getVariantModelName());var a=C(n);if(o.isInitialized({control:n})){return t.saveSequenceOfDirtyChanges(e.changes,n).then(function(e){if(r){r.checkDirtyStateForControlModels(a)}return e})}return Promise.resolve()},buildSelectorFromElementIdAndType:function(e){var n=g.getAppComponentForControl(e.element);if(!n||!e.elementId||!e.elementType){throw new Error("Not enough information given to build selector.")}return{elementId:e.elementId,elementType:e.elementType,appComponent:n,id:e.elementId,controlType:e.elementType}},isCondensingEnabled:function(){return s.getInstance().then(function(e){return e.isCondensingEnabled(f.USER)})},attachChangeCreation:function(e,n){var t=c.getFlexReference({element:e});d[t]=(d[t]||[]).concat(n)},detachChangeCreation:function(e,n){var t=c.getFlexReference({element:e});if(Array.isArray(d[t])){d[t]=d[t].filter(function(e){return e!==n})}},detachAllChangeCreationListeners:function(e){if(e){var n=c.getFlexReference({element:e});delete d[n]}else{d={}}}};return y});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ExtensionPointRegistryAPI",["sap/ui/fl/write/_internal/extensionPoint/Registry"],function(n){"use strict";var t={getExtensionPointInfo:function(t){return n.getExtensionPointInfo(t.name,t.view)},getExtensionPointInfoByViewId:function(t){return n.getExtensionPointInfoByViewId(t.viewId)},getExtensionPointInfoByParentId:function(t){return n.getExtensionPointInfoByParentId(t.parentId)}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/FeaturesAPI",["sap/ui/fl/registry/Settings","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(n,e,t){"use strict";var i={isPublishAvailable:function(){return n.getInstance().then(function(n){return!n.isProductiveSystem()&&n.isSystemWithTransports()})},isSaveAsAvailable:function(i){return Promise.all([n.getInstance(),t.getUShellService("CrossApplicationNavigation")]).then(function(n){var t=n[0];var r=n[1];return t.isAppVariantSaveAsEnabled()&&i===e.CUSTOMER&&r!==undefined}).catch(function(){return false})},isContextBasedAdaptationAvailable:function(t){return n.getInstance().then(function(n){if(n.isContextBasedAdaptationEnabled()&&t===e.CUSTOMER){return true}return false})},isKeyUser:function(){return n.getInstance().then(function(n){return n.isKeyUser()})},isVersioningEnabled:function(e){return n.getInstance().then(function(n){return n.isVersioningEnabled(e)})},isKeyUserTranslationEnabled:function(t){if(t===e.CUSTOMER){return n.getInstance().then(function(n){return n.isKeyUserTranslationEnabled()})}return Promise.resolve(false)},isContextSharingEnabled:function(t){if(t!==e.CUSTOMER){return Promise.resolve(false)}return n.getInstance().then(function(n){return n.isContextSharingEnabled({layer:t})})}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/FieldExtensibility",["sap/ui/fl/write/_internal/fieldExtensibility/ABAPAccess","sap/ui/fl/write/_internal/fieldExtensibility/cap/CAPAccess","sap/base/util/UriParameters","sap/ui/base/ManagedObject","sap/ui/fl/Utils"],function(e,t,i,n,r){"use strict";var a={};var s;function o(a){if(!s){if(!(a instanceof n)){return undefined}var o=r.getAppComponentForControl(a);var u=o&&o.getManifestEntry("/sap.ui5/config")||{};var l=i.fromQuery(window.location.search);if(u.experimentalCAPScenario||l.get("sap-ui-fl-xx-capScenario")==="true"){s=t}else{s=e}}return s}function u(){var e=Array.from(arguments);var t=e.shift();var i=o.apply(null,e);if(!i){return Promise.reject("Could not determine field extensibility scenario")}return Promise.resolve(i[t].apply(null,e))}a.onControlSelected=function(e){return u("onControlSelected",e)};a.isExtensibilityEnabled=function(e){return u("isExtensibilityEnabled",e)};a.isServiceOutdated=function(e){return u("isServiceOutdated",e)};a.setServiceValid=function(e){return u("setServiceValid",e)};a.getTexts=function(){return u("getTexts")};a.getExtensionData=function(){return u("getExtensionData")};a.onTriggerCreateExtensionData=function(e,t){return u("onTriggerCreateExtensionData",e,t)};a._resetCurrentScenario=function(){s=null};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/LocalResetAPI",["sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Utils","sap/ui/fl/ChangePersistenceFactory","sap/base/util/restricted/_union"],function(e,r,t,n,a,i,u){"use strict";var o={};function c(r,t,n){var a={includeDirtyChanges:true,layer:t};var u=i.getChangePersistenceForControl(r);return u.getAllUIChanges(a).filter(function(r){return r.getState()!==e.LifecycleState.DELETED&&r.getVariantReference()===(n||undefined)})}function s(e){var r=a.getAppComponentForControl(e);var t=[];var i=[];function o(r,n){var a=(n||[]).concat(r);if(r===e||t.includes(r)){t=u(t,a);return true}var c=r.getParent();if(i.includes(r)||!c){i=u(i,a);return false}return o(c,a)}function c(e){return e.getDependentSelectorList().map(function(e){return n.bySelector(e,r)}).filter(Boolean).some(function(e){return o(e)})}return c}o.resetChanges=function(e,i){var u=e.slice().reverse();var o=u.map(function(e){var a=n.bySelector(e.getSelector(),i);return function(){return r.remove({change:e,selector:a}).then(function(){e.setQueuedForRevert();return t.revert({change:e,element:a})})}});return a.execPromiseQueueSequentially(o)};o.restoreChanges=function(u,o){var c=u.map(function(a){return function(){a.restorePreviousState();var u=n.bySelector(a.getSelector(),o);r.add({change:a,selector:u});if(a.getState()===e.LifecycleState.PERSISTED){var c=i.getChangePersistenceForControl(o);var s=c.getDirtyChanges();var l=s.indexOf(a);if(l>=0){s.splice(l,1)}}return t.apply({change:a,element:u,modifier:n})}});return a.execPromiseQueueSequentially(c)};o.getNestedUIChangesForControl=function(e,r){var t=c(e,r.layer,r.currentVariant);var n=s(e);return t.filter(n)};o.isResetEnabled=function(e,r){var t=c(e,r.layer,r.currentVariant);var n=s(e);return t.some(n)};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/PersistenceWriteAPI",["sap/base/util/includes","sap/base/util/restricted/_omit","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/condenser/Condenser","sap/ui/fl/write/_internal/flexState/FlexObjectState","sap/ui/fl/write/_internal/Storage","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/write/_internal/FlexInfoSession","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/registry/Settings"],function(e,n,r,t,a,s,i,o,l,u,c,g,f,p,h,d){"use strict";var C={};function y(n){return n._getMap&&e(i.getChangeTypes(),n._getMap().changeType)||n.getChangeType&&e(i.getChangeTypes(),n.getChangeType())}function v(e){e.includeCtrlVariants=true;e.invalidateCache=false;return C._getUIChanges(e).then(function(e){return e.length>0})}C.hasDirtyChanges=function(e){return u.hasDirtyFlexObjects(e)};C.hasHigherLayerChanges=function(e){e.upToLayer=e.upToLayer||h.getCurrentLayer();return u.getFlexObjects(e).then(function(n){return n.filter(function(n){return h.isOverLayer(n.getLayer(),e.upToLayer)})}).then(function(e){return e.length>0})};C.save=function(e){return u.saveFlexObjects(e).then(function(n){if(n&&n.length!==0){C.getResetAndPublishInfo(e).then(function(n){f.set(n,e.selector)})}return n})};C.getResetAndPublishInfo=function(e){return Promise.all([v(e),g.isPublishAvailable()]).then(function(n){var t=n[0];var a=n[1];var s=e.layer!==p.USER&&e.layer!==p.PUBLIC;var i={isResetEnabled:t,isPublishEnabled:false,allContextsProvided:true};if(s){return c.getFlexInfo(e).then(function(e){i.allContextsProvided=e.allContextsProvided===undefined||e.allContextsProvided;i.isResetEnabled=e.isResetEnabled;i.isPublishEnabled=a&&e.isPublishEnabled;return i}).catch(function(e){r.error("Sending request to flex/info route failed: "+e.message);return i})}return i})};C.getResetAndPublishInfoFromSession=function(e){var n=o.getFlexReferenceForControl(e)||"true";return JSON.parse(window.sessionStorage.getItem("sap.ui.fl.info."+n))};C.reset=function(e){var n=s.getAppComponentForSelector(e.selector);var r=s.getFlexControllerInstance(n);var t=[e.layer,e.generator,n,e.selectorIds,e.changeTypes];return r.resetChanges.apply(r,t)};C.publish=function(e){e.styleClass=e.styleClass||"";var n=s.getAppComponentForSelector(e.selector);return s.getFlexControllerInstance(n)._oChangePersistence.transportAllUIChanges({},e.styleClass,e.layer,e.appVariantDescriptors)};C.add=function(e){if(y(e.change)){return e.change.store()}var n=s.getAppComponentForSelector(e.selector);return s.getFlexControllerInstance(n).addPreparedChange(e.change,n)};C.remove=function(e){var n;var r;return Promise.resolve().then(function(){if(!e.selector){return Promise.reject(new Error("An invalid selector was passed so change could not be removed with id: "+e.change.getId()))}r=s.getAppComponentForSelector(e.selector);if(!r){return Promise.reject(new Error("Invalid application component for selector, change could not be removed with id: "+e.change.getId()))}if(y(e.change)){var i=s.getFlexControllerInstance(r);i.deleteChange(e.change,r);return undefined}var o=t.bySelector(e.change.getSelector(),r);n=s.getFlexControllerInstance(r);if(o){a.destroyAppliedCustomData(o,e.change,t)}n.deleteChange(e.change,r);return undefined})};C.getChangesWarning=function(e){return this._getUIChanges(e).then(function(e){var n=e.some(function(e){return e.isChangeFromOtherSystem()});var r=d.getInstanceOrUndef();var t=r&&r.isProductiveSystemWithTransports();var a=e.length===0;var s={showWarning:false};if(n){s={showWarning:true,warningType:"mixedChangesWarning"}}if(t&&a){s={showWarning:true,warningType:"noChangesAndPSystemWarning"}}return s})};C._condense=function(e){return Promise.resolve().then(function(){if(!e.selector){throw Error("An invalid selector was passed")}var n=s.getAppComponentForSelector(e.selector);if(!n){throw Error("Invalid application component for selector")}if(!e.changes||e.changes&&!Array.isArray(e.changes)){throw Error("Invalid array of changes")}return l.condense(n,e.changes)})};C._getUIChanges=function(e){if(e.layer){e.currentLayer=e.layer}return u.getFlexObjects(e)};return C});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ReloadInfoAPI",["sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/api/Version","sap/ui/fl/write/api/VersionsAPI","sap/ui/fl/write/api/FeaturesAPI","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/write/_internal/FlexInfoSession"],function(e,r,a,t,i,n,l,s,o,u){"use strict";var f={flp:{set:function(e,r,a){e[r]=[a];return e},get:function(e,r){return e[r]&&e[r][0]},remove:function(e,r){delete e[r];return e}},standalone:{set:function(e,r,t){return a.handleUrlParameters(e,r,t)},get:function(e,r){return a.getParameter(r)},remove:function(e,r,t){return a.handleUrlParameters(e,r,t)}}};function c(e){var r=!!a.getParameter(i.UrlParameter,e.URLParsingService);if(r){return Promise.resolve(false)}return l.isVersioningEnabled(e.layer).then(function(r){return r&&n.isDraftAvailable({control:e.selector,layer:e.layer})})}function v(e){var a=this.hasMaxLayerParameterWithValue({value:e.layer},e.URLParsingService);var t=e.layer===r.USER;if(t||a){return Promise.resolve(false)}return s.hasHigherLayerChanges({selector:e.selector,ignoreMaxLayerParameter:e.ignoreMaxLayerParameter,upToLayer:e.layer,includeCtrlVariants:e.includeCtrlVariants,includeDirtyChanges:true}).then(function(r){return r||m(e)})}function m(a){if(e.isOverLayer(r.USER,a.layer)){return o.checkSVMControlsForDirty(t.getFlexReferenceForControl(a.selector))}return false}function h(e){var r=u.get(e.selector);if(r&&r.initialAllContexts){return false}if(r===null||r.allContextsProvided===undefined){var a={selector:e.selector,layer:e.layer};return s.getResetAndPublishInfo(a).then(function(a){if(r===null||!r.initialAllContexts){a.initialAllContexts=true}u.set(a,e.selector);return!a.allContextsProvided})}r.initialAllContexts=true;u.set(r,e.selector);return!r.allContextsProvided}function P(e){var r=u.get(e);return r&&!r.allContextsProvided}var A={getReloadReasonsForStart:function(e){return Promise.all([v.call(this,e),c(e),h(e)]).then(function(r){e.hasHigherLayerChanges=r[0];e.isDraftAvailable=r[1];e.allContexts=r[2];return e})},hasVersionParameterWithValue:function(e,r){return a.hasParameterAndValue(i.UrlParameter,e.value,r)},removeInfoSessionStorage:function(e){u.remove(e)},hasMaxLayerParameterWithValue:function(r,t){var i=e.FL_MAX_LAYER_PARAM;return a.hasParameterAndValue(i,r.value,t)},handleUrlParameters:function(r,a){var t=false;if(!r.ignoreMaxLayerParameter&&r.hasHigherLayerChanges){r.parameters=f[a].remove(r.parameters,e.FL_MAX_LAYER_PARAM,r.layer);t=true}var n=f[a].get(r.parameters,i.UrlParameter);if(r.versionSwitch&&n!==r.version){r.parameters=f[a].remove(r.parameters,i.UrlParameter,n);r.parameters=f[a].set(r.parameters,i.UrlParameter,r.version);t=true}if(n&&r.removeVersionParameter||n===i.Number.Draft&&r.removeDraft){r.parameters=f[a].remove(r.parameters,i.UrlParameter,n);t=true}return t},handleParametersOnStart:function(r,a){var t=false;if(r.hasHigherLayerChanges){r.parameters=f[a].set(r.parameters,e.FL_MAX_LAYER_PARAM,r.layer);t=true}if(r.isDraftAvailable){r.parameters=f[a].set(r.parameters,i.UrlParameter,i.Number.Draft);t=true}return t},initialDraftGotActivated:function(e){if(e.versioningEnabled){var r=this.hasVersionParameterWithValue({value:i.Number.Draft},e.URLParsingService);return!n.isDraftAvailable({control:e.selector,layer:e.layer})&&r}return false},getReloadMethod:function(e){var r={NOT_NEEDED:"NO_RELOAD",RELOAD_PAGE:"HARD_RELOAD",VIA_HASH:"CROSS_APP_NAVIGATION"};e.reloadMethod=r.NOT_NEEDED;e.isDraftAvailable=e.isDraftAvailable||A.hasVersionParameterWithValue({value:i.Number.Draft},e.URLParsingService);e.hasVersionUrlParameter=!!a.getParameter(i.UrlParameter,e.URLParsingService);if(e.activeVersion&&e.activeVersion!==i.Number.Original&&e.hasVersionUrlParameter){e.activeVersionNotSelected=!A.hasVersionParameterWithValue({value:e.activeVersion},e.URLParsingService)}e.hasHigherLayerChanges=A.hasMaxLayerParameterWithValue({value:e.layer},e.URLParsingService);e.initialDraftGotActivated=A.initialDraftGotActivated(e);if(e.initialDraftGotActivated){e.isDraftAvailable=false}e.allContexts=P(e.selector);if(e.changesNeedReload||e.isDraftAvailable||e.hasHigherLayerChanges||e.initialDraftGotActivated||e.activeVersionNotSelected||e.allContexts){e.reloadMethod=r.RELOAD_PAGE;if(!e.changesNeedReload&&a.getUshellContainer()){e.reloadMethod=r.VIA_HASH}}u.remove(e.selector);return e}};return A});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/SmartBusinessWriteAPI",["sap/ui/fl/write/_internal/appVariant/AppVariantFactory","sap/ui/fl/write/api/PersistenceWriteAPI","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/write/_internal/SaveAs","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/ui/fl/registry/Settings"],function(e,r,t,i,n,a,p){"use strict";function s(e,r){return p.getInstance().then(function(t){if(t.isAtoEnabled()){r.skipIam=true;r.transport="ATO_NOTIFICATION"}return n[e](r)})}function o(e){if(!e.appId){return Promise.reject("App Variant ID must be provided")}e.selector={appId:e.appId};var r=i.getFlexControllerInstance(e.selector);e.id=r.getComponentName();e.isForSmartBusiness=true}var u={create:function(e){if(!e.layer){return Promise.reject("Layer must be provided")}if(!e.selector||!e.selector.appId){return Promise.reject("selector.appId must be provided")}if(!e.id){return Promise.reject("App variant ID must be provided")}var r=i.getFlexControllerInstance(e.selector);e.reference=r.getComponentName();e.isForSmartBusiness=true;return s("saveAs",e)},update:function(e){o(e);return s("updateAppVariant",e)},remove:function(e){o(e);return s("deleteAppVariant",e)},getDesignTimeVariant:function(r){if(!r.id){return Promise.reject("App Variant ID must be provided")}return e.load(r)},getRunTimeVariant:function(e){if(!e.appId){return Promise.reject("Reference App ID must be provided")}if(!e.id){return Promise.reject("App Variant ID must be provided")}var r="/sap/bc/lrep/content/apps/"+e.appId+"/appVariants/"+e.id+"/manifest.appdescr_variant";return a.appVariant.getManifest({appVarUrl:r})},createDescriptorInlineChanges:function(e){if(!e.appId){return Promise.reject("appId must be provided")}if(!e.changeSpecificData){return Promise.reject("changeSpecificData must be provided")}e.selector={appId:e.appId};return t.create(e)},add:function(e){if(!e.appId){return Promise.reject("appId must be provided")}if(!e.change){return Promise.reject("Change instance must be provided")}e.selector={appId:e.appId};return r.add(e)}};return u});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/SmartVariantManagementWriteAPI",["sap/ui/fl/apply/_internal/flexState/compVariants/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/write/_internal/transport/TransportSelection","sap/base/util/UriParameters","sap/ui/fl/registry/Settings"],function(t,n,e,a,r,i){"use strict";function u(e,a){e.persistencyKey=t.getPersistencyKey(e.control);if(!e.reference){e.reference=n.getFlexReferenceForControl(e.control)}return a(e)}var o={addVariant:function(t){return u(t,e.addVariant)},updateVariant:function(t){return u(t,e.updateVariant)},updateVariantContent:function(t){t.action=e.updateActionType.UPDATE;return u(t,e.updateVariant)},saveVariantContent:function(t){t.action=e.updateActionType.SAVE;return u(t,e.updateVariant)},discardVariantContent:function(t){t.action=e.updateActionType.DISCARD;return u(t,e.discardVariantContent)},updateVariantMetadata:function(t){t.action=e.updateActionType.UPDATE_METADATA;return u(t,e.updateVariant)},removeVariant:function(t){return u(t,e.removeVariant)},revert:function(t){return u(t,e.revert)},save:function(t){return u(t,e.persist)},setDefaultVariantId:function(t){return u(t,e.setDefault)},isVariantSharingEnabled:function(){return i.getInstance().then(function(t){return t.isVariantSharingEnabled()})},isVariantPersonalizationEnabled:function(){return i.getInstance().then(function(t){return t.isVariantPersonalizationEnabled()})},isVariantAdaptationEnabled:function(){return i.getInstance().then(function(t){return t.isVariantAdaptationEnabled()})},overrideStandardVariant:function(t){u(t,e.overrideStandardVariant)},revertSetDefaultVariantId:function(t){return u(t,e.revertSetDefaultVariantId)},_getTransportSelection:function(){function t(){var t=r.fromQuery(window.location.search).get("sap-ui-layer")||"";return!!t}var n=new a;n.selectTransport=function(e,r,i,u,o,c){if(!t()){r(n._createEventObject(e,{transportId:""}));return}a.prototype.selectTransport.call(this,e,r,i,u,o,c)};return n}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/TranslationAPI",["sap/ui/core/Core","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/write/_internal/flexState/FlexObjectState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/Storage","sap/ui/fl/ChangePersistenceFactory","sap/base/util/isEmptyObject","sap/ui/fl/Utils"],function(e,r,t,n,a,o,i,s,l){"use strict";function u(e){if(!e){return[]}var r=i.getChangePersistenceForComponent(e);return r.getDirtyChanges()}function c(e){var r=l.getAppComponentForControl(e.selector);var t=a.getFlexReferenceForControl(r);return u(l.normalizeReference(t))}var p={};p.hasTranslationRelevantDirtyChanges=function(e){return[].concat(t.getDirtyFlexObjects(e),c(e)).some(function(e){return!s(e.getTexts())})};p.getTexts=function(e){if(!e.selector){return Promise.reject("No selector was provided")}if(!e.sourceLanguage){return Promise.reject("No sourceLanguage was provided")}if(!e.targetLanguage){return Promise.reject("No targetLanguage was provided")}if(!e.layer){return Promise.reject("No layer was provided")}var r=l.getAppComponentForControl(e.selector);e.reference=a.getFlexReferenceForControl(r);return Promise.resolve().then(o.translation.getTexts.bind(undefined,e))};p.getSourceLanguages=function(r){if(!r.selector){return Promise.reject("No selector was provided")}if(!r.layer){return Promise.reject("No layer was provided")}var t=l.getAppComponentForControl(r.selector);r.reference=a.getFlexReferenceForControl(t);return o.translation.getSourceLanguages(r).then(function(t){var n=e.getConfiguration().getLanguage();if(!t.includes(n)&&p.hasTranslationRelevantDirtyChanges(r)){t.push(n)}return t})};p.uploadTranslationTexts=function(e){if(!e.layer){return Promise.reject("No layer was provided")}if(!e.payload){return Promise.reject("No payload was provided")}return Promise.resolve().then(o.translation.postTranslationTexts.bind(undefined,e))};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/UI2PersonalizationWriteAPI",["sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/ChangesController","sap/base/util/restricted/_omit"],function(e,t,r,n){"use strict";var o={create:function(o){var a=r.getFlexControllerInstance(o.selector);o.reference=a.getComponentName();if(!o.reference||!o.containerKey||!o.itemName||!o.content||!o.category||!o.containerCategory){return Promise.reject(new Error("not all mandatory properties were provided for the storage of the personalization"))}return t.initialize({componentId:o.selector.getId()}).then(function(){return e.setPersonalization(n(o,["selector"]))})},deletePersonalization:function(n){var o=r.getFlexControllerInstance(n.selector);n.reference=o.getComponentName();if(!n.reference||!n.containerKey||!n.itemName){return Promise.reject(new Error("not all mandatory properties were provided for the deletion of the personalization"))}return t.initialize({componentId:n.selector.getId()}).then(function(){return e.deletePersonalization(n.reference,n.containerKey,n.itemName)})}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/VersionsAPI",["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/write/_internal/Versions","sap/ui/fl/Utils","sap/ui/fl/write/api/Version","sap/ui/fl/apply/_internal/flexState/ManifestUtils"],function(e,r,o,n,t){"use strict";function i(e){var r=t.getFlexReferenceForControl(e);if(!r){throw Error("The application ID could not be determined")}return r}function a(e){if(!e.control){throw Error("No control was provided")}if(!e.layer){throw Error("No layer was provided")}var n=i(e.control);return r.getVersionsModel({nonNormalizedReference:n,reference:o.normalizeReference(n),layer:e.layer})}var l={};l.initialize=function(e){if(!e.control){return Promise.reject("No control was provided")}if(!e.layer){return Promise.reject("No layer was provided")}var n=o.getAppComponentForControl(e.control);return r.initialize({reference:o.normalizeReference(i(n)),layer:e.layer})};l.isDraftAvailable=function(e){var r=a(e);var o=r.getProperty("/versions");var t=o.find(function(e){return e.version===n.Number.Draft});return!!t};l.isOldVersionDisplayed=function(e){var r=a(e);var o=r.getProperty("/displayedVersion");var t=r.getProperty("/activeVersion");return o!==n.Number.Draft&&o!==t};l.loadDraftForApplication=function(e){e.version=n.Number.Draft;return l.loadVersionForApplication(e)};l.loadVersionForApplication=function(r){if(!r.control){return Promise.reject("No control was provided")}if(!r.layer){return Promise.reject("No layer was provided")}var n=a(r);if(n){if(r.version===undefined){r.version=n.getProperty("/activeVersion")}n.setProperty("/displayedVersion",r.version);n.setProperty("/persistedVersion",r.version)}var t=o.getAppComponentForControl(r.control);var l=i(t);return e.clearAndInitialize({componentId:t.getId(),reference:l,version:r.version,allContexts:r.allContexts})};l.activate=function(e){if(!e.control){return Promise.reject("No control was provided")}if(!e.layer){return Promise.reject("No layer was provided")}if(!e.title){return Promise.reject("No version title was provided")}var n=i(e.control);return r.activate({nonNormalizedReference:n,reference:o.normalizeReference(n),layer:e.layer,title:e.title,appComponent:o.getAppComponentForControl(e.control),displayedVersion:e.displayedVersion})};l.discardDraft=function(n){if(!n.control){return Promise.reject("No control was provided")}if(!n.layer){return Promise.reject("No layer was provided")}var t=o.getAppComponentForControl(n.control);var a=i(t);return r.discardDraft({nonNormalizedReference:a,reference:o.normalizeReference(a),layer:n.layer}).then(function(r){if(r.backendChangesDiscarded){return e.clearAndInitialize({componentId:t.getId(),reference:a}).then(function(){return r})}return r})};l.publish=function(e){if(!e.selector){return Promise.reject("No selector was provided")}if(!e.layer){return Promise.reject("No layer was provided")}if(!e.version){return Promise.reject("No version was provided")}e.styleClass=e.styleClass||"";e.reference=i(e.selector);return r.publish(e)};return l});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/connectors/FileListBaseConnector",["sap/ui/fl/initial/_internal/StorageUtils","sap/base/util/LoaderExtensions"],function(e,t){"use strict";return{getFileList:function(){return Promise.reject("not implemented")},layers:[],loadFlexData:function(n){return this.getFileList(n.reference).then(function(n){return Promise.all(n.map(function(e){return t.loadResource({dataType:"json",url:e,async:true})})).then(function(t){var n=e.getGroupedFlexObjects(t);return e.filterAndSortResponses(n)})})}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/connectors/ObjectStorageConnector",["sap/base/strings/hash","sap/base/util/restricted/_uniqBy","sap/base/util/each","sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/StorageUtils","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils"],function(e,t,n,r,i,a,o){"use strict";function s(e){var t=[];return o.forEachObjectInStorage(e,function(e){t.push(e.changeDefinition)}).then(function(){return t})}function c(e,t){var n=true;if(e.selectorIds){if(t.selector){n=e.selectorIds.indexOf(t.selector.id)>-1}else{n=false}}if(n&&e.changeTypes){n=e.changeTypes.indexOf(t.changeType)>-1}return n}function u(e,t){if(!e.creation){var n=Date.now()+t;e.creation=new Date(n).toISOString()}return e}function f(t){return e(t.reduce(function(e,t){return e+new Date(t.creation).getTime()},""))}function l(e,t){n(e,function(e,r){r.forEach(function(e){n(e,function(e,n){t(n,e)})})})}function g(e,t){var n=[];var r=0;l(e,function(e,i){var a=o.createFlexKey(i);var s=t.find(function(t){return t.getId()===e.fileName});if(!s.getCreation()){var c=Date.now()+r;r++;s.setCreation(new Date(c).toISOString())}n.push({key:a,value:s})});return n}function h(e,t){var n=[];l(e,function(e,r){var i=o.createFlexKey(r);var a;t.some(function(e){if(e.getId()===r){a=e;return true}});n.push({key:i,value:a})});return n}function v(e,t){var r=[];n(e,function(e,n){if(n.length<2){return}var i=t.filter(function(t){return t.getFileType()===e});i.forEach(function(e,t){if(n.indexOf(e.getId())>-1&&t<i.length-1){var a=i[t+1];var s=new Date(e.getCreation());var c=new Date(a.getCreation());if(a&&s>=c){var u=s.getTime()+1;a.setCreation(new Date(u).toISOString());var f=o.createFlexKey(a.getId());r.push({key:f,value:a})}}})});return r}function d(e){var t=[];if(e){Object.values(e).forEach(function(e){e.forEach(function(e){var n=o.createFlexKey(e);t.push(this.storage.removeItem(n))}.bind(this))}.bind(this))}return t}var b=r({},i,{storage:undefined,layers:["ALL"],loadFlexData:function(e){return s({storage:this.storage,reference:e.reference}).then(function(e){a.sortFlexObjects(e);var t=a.getGroupedFlexObjects(e);var n=a.filterAndSortResponses(t);if(n.length){n[0].cacheKey=f(e)}return n})},write:function(e){var t=e.flexObjects.map(function(e,t){var n=o.createFlexObjectKey(e);e=u(e,++t);var r=this.storage._itemsStoredAsObjects?e:JSON.stringify(e);return this.storage.setItem(n,r)}.bind(this));return Promise.all(t).then(function(){})},update:function(e){var t=e.flexObject;var n=o.createFlexObjectKey(e.flexObject);var r=this.storage._itemsStoredAsObjects?t:JSON.stringify(t);var i=this.storage.setItem(n,r);return Promise.resolve(i)},reset:function(e){return o.forEachObjectInStorage({storage:this.storage,reference:e.reference,layer:e.layer},function(t){if(c(e,t.changeDefinition)){return Promise.resolve(this.storage.removeItem(t.key)).then(function(){return{fileName:t.changeDefinition&&t.changeDefinition.fileName}})}}.bind(this)).then(function(e){return{response:e.filter(function(e){return!!e})}})},remove:function(e){var t=o.createFlexObjectKey(e.flexObject);this.storage.removeItem(t);var n=this.storage.removeItem(t);return Promise.resolve(n)},loadFeatures:function(){return Promise.resolve({isKeyUser:true,isVariantSharingEnabled:true,isProductiveSystem:false,isCondensingEnabled:true,isContextSharingEnabled:false})},getFlexInfo:function(e){e.storage=this.storage;return o.getAllFlexObjects(e).then(function(e){return{isResetEnabled:e.length>0}})},condense:function(e){var n=e.flexObjects;var r=[];r=r.concat(g(n.create,e.condensedChanges));r=r.concat(h(n.update,e.condensedChanges));r=r.concat(v(n.reorder,e.condensedChanges));r=t(r,"key");var i=[];i=i.concat(d.call(this,n.delete));r.forEach(function(e){var t=e.value.convertToFileContent();var n=this.storage._itemsStoredAsObjects?t:JSON.stringify(t);i.push(this.storage.setItem(e.key,n))}.bind(this));return Promise.all(i)}});return b});
sap.ui.require.preload({
	"sap/ui/fl/variants/context/view/ContextVisibility.view.xml":'<mvc:View\n\tcontrollerName="sap.ui.fl.variants.context.controller.ContextVisibility"\n\txmlns:mvc="sap.ui.core.mvc"\n\tdisplayBlock="true"\n\txmlns="sap.m"><Panel id="visibilityPanel"><headerToolbar><Toolbar id="visibilityToolbar"><Label id="visibilityToolbarLabel" labelFor="visibilityRadioButtonGroup" text="{i18n>RADIO_BUTTON_GROUP_LABEL}" design="Bold"  /></Toolbar></headerToolbar><content><MessageStrip\n\t\t\t\tid="visibilityMessageStrip"\n\t\t\t\ttext="{i18n>VISIBILITY}"\n\t\t\t\tvisible="{parts: [{path: \'selectedContexts>/selected\'}, {path: \'selectedContexts>/showMessageStrip\'} ], formatter: \'.isMessageStripVisible\'}"\n\t\t\t\ttype="Information"\n\t\t\t\tshowIcon="true"/><List\n\t\t\t\tid="selectedContextsList"\n\t\t\t\tnoDataText="{i18n>NO_SELECTED_ROLES}"\n\t\t\t\tmode="Delete"\n\t\t\t\tdelete=".onDeleteContext"\n\t\t\t\tgrowing="true"\n\t\t\t\titems="{selectedContexts>/selected}"><headerToolbar><Toolbar style="Clear" id="restrictedToolbar"><Label labelFor="selectedContextsList" text="{i18n>SELECTED_CONTEXT_LIST_TITLE}" design="Bold" wrapping="true"/><ToolbarSpacer /><Button id="removeAllButton" text="{i18n>REMOVE_ALL_BUTTON}" press=".removeAll" enabled="{path: \'selectedContexts>/selected\', formatter: \'.isRemoveAllEnabled\'}"/><Button id="addContextsButton" ariaHasPopup="Dialog" text="{i18n>ADD_CONTEXTS_BUTTON}" press=".onAddContextsHandler"/></Toolbar></headerToolbar><StandardListItem\n\t\t\t\t\ttitle="{selectedContexts>id}"\n\t\t\t\t\ttooltip="{path: \'selectedContexts>description\', formatter: \'.formatTooltip\'}"/></List></content></Panel></mvc:View>',
	"sap/ui/fl/write/_internal/fieldExtensibility/cap/dialog/CustomFieldCAPDialog.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:editor="sap.ui.integration.designtime.baseEditor"\n><Dialog\n\t\tclass="sapUiContentPadding"\n\t\ttitle="{i18n>CAP_ADD_FIELD_TITLE}"\n\t\tverticalScrolling="true"\n\t\tresizable="false"\n\t\tdraggable="true"\n\t\tcontentWidth="42rem"\n\t\tcontentHeight="80vh"\n\t><content><editor:BaseEditor layout="form" /></content><beginButton><Button\n\t\t\t\tenabled="{dialog>/isValid}"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttext="{i18n>CAP_ADD_FIELD_CREATE}"\n\t\t\t\tpress="onSave"\n\t\t\t/></beginButton><endButton><Button\n\t\t\t\ttype="Transparent"\n\t\t\t\ttext="{i18n>CAP_ADD_FIELD_CANCEL}"\n\t\t\t\tpress="onCancel"\n\t\t\t/></endButton></Dialog></core:FragmentDefinition>\n',
	"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/booleanEditor/BooleanEditor.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n><CheckBox select="_onChange" /></core:FragmentDefinition>',
	"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/rangeEditor/RangeEditor.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:baseEditor="sap.ui.integration.designtime.baseEditor"\n><HBox><baseEditor:PropertyEditor\n\t\t\tinit="wrapperInit"\n\t\t\tconfig="{contentModel>/0/config}"\n\t\t\tvalue="{contentModel>/0/value}"\n\t\t\trenderLabel="false"\n\t\t\tvalueChange="_onChange"\n\t\t/><baseEditor:PropertyEditor\n\t\t\tinit="wrapperInit"\n\t\t\tconfig="{contentModel>/1/config}"\n\t\t\tvalue="{contentModel>/1/value}"\n\t\t\trenderLabel="false"\n\t\t\tvalueChange="_onChange"\n\t\t/></HBox></core:FragmentDefinition>',
	"sap/ui/fl/write/_internal/fieldExtensibility/cap/editor/propertyEditor/timeEditor/TimeEditor.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n><TimePicker\n\t\tvalue="{displayValue}"\n\t\tvalueFormat="HH:mm:ss.SSSS"\n\t\tchange="_onChange"\n\t/></core:FragmentDefinition>'
},"sap/ui/fl/library-preload-write");
