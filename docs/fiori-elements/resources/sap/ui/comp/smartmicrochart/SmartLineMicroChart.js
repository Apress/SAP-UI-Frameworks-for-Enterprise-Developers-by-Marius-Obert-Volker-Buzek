/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/library","sap/suite/ui/microchart/library","sap/ui/core/Control","sap/ui/model/odata/CountMode","sap/ui/core/format/DateFormat","sap/m/library","sap/base/Log","sap/suite/ui/microchart/LineMicroChart","sap/suite/ui/microchart/LineMicroChartLine","sap/suite/ui/microchart/LineMicroChartPoint","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(t,i,e,a,r,o,n,s,h,c,g,p){"use strict";var u=g.extend("sap.ui.comp.smartmicrochart.SmartLineMicroChart",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartLineMicroChart.designtime"},renderer:p});u.prototype._CHART_TYPE=["Line"];u.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Line",true);this.setAggregation("_chart",new s({showThresholdLine:false}),true)};u.prototype.onBeforeRendering=function(){var t=this.getAggregation("_chart");t.setSize(this.getSize(),true);t.setWidth(this.getWidth(),true);t.setHeight(this.getHeight(),true)};u.prototype.setShowLabel=function(t){var i;if(this.getShowLabel()!==t){i=this.getAggregation("_chart");this.setProperty("showLabel",t,true);i.setProperty("showTopLabels",t,true);i.setProperty("showBottomLabels",t,true);i.invalidate()}return this};u.prototype._createAndBindInnerChart=function(){if(this._aDataPointAnnotations.length===0){n.error("DataPoint annotation missing! Cannot create the SmartLineMicroChart");return}for(var t=0;t<this._aDataPointAnnotations.length;t++){if(!(this._aDataPointAnnotations[t].Value&&this._aDataPointAnnotations[t].Value.Path)){n.error("Value DataPoint annotation missing! Cannot create the SmartLineMicroChart");return}}var i=this.getAggregation("_chart"),e;this._aDataPointAnnotations.forEach(function(t,a){e=new h(this.getId()+"-line-"+a,{points:{path:this._getBindingPath(),factory:this._pointFactory.bind(this),events:{change:this._onBindingDataChange.bind(this)}}});i.addLine(e)},this)};u.prototype._pointFactory=function(t,i){var e,a,r,o=t.split("-").slice(-2,-1),n=this.getAggregation("_chart").getLines()[o],s=this._aDataPointAnnotations[o],h;e=i.getProperty(this._oChartViewMetadata.dimensionFields[o]);e=this._formatDimension.call(this,e);a=i.getProperty(s.Value.Path);a=Number(a);r=new c({x:e,y:a});if(n&&s.Criticality&&s.Criticality.Path){h=this._mapCriticalityTypeWithColor(i.getProperty(s.Criticality.Path));this.getAggregation("_chart").getLines()[o].setColor(h)}return r};u.prototype._onBindingDataChange=function(){var t=this.getAggregation("_chart").getLines()[0].getBinding("points");this._updateAssociations(t);this.updateChartLabels.call(this,t)};u.prototype._updateLabel=function(t,i){this.getAggregation("_chart").setProperty(t,i.text,true)};u.prototype._getLabelsMap=function(){return{leftTop:"leftTopLabel",rightTop:"rightTopLabel",leftBottom:"leftBottomLabel",rightBottom:"rightBottomLabel"}};return u});