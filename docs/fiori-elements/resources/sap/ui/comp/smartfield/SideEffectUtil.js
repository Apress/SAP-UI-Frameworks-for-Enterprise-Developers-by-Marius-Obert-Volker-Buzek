/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/odata/SideEffects"],function(t){"use strict";var e=function(e){this._oParent=e;this._oSideEffects=new t};e.prototype.getFieldGroupIDs=function(t,e){var i,n,r,o;if(t.property&&t.property.complex){n=t.property.parents[0];r=this._toTypePath(t.path,n)}i={entitySet:t.entitySet,entityType:t.entityType,complexType:n};o=this._oSideEffects.getSideEffects(t.path,r,i);return this._calcFieldGroups(o,t,e)};e.prototype._calcFieldGroups=function(t,e,i){var n,r,o,f,s=[],p;r=this._getSideEffects(t,e,i);f=r.length;p=this._oParent.getBindingContext();n=p.getPath();for(o=0;o<f;o++){this._calcFieldGroups2(r[o],s,i,n,p)}return s.length>0?s:null};e.prototype._calcFieldGroups2=function(t,e,i,n,r){var o,f,s,p=this;t.sideEffects.forEach(function(c){s={name:c.name,originType:c.originType,originName:t.origin.name,originNamespace:t.origin.namespace,context:n};f=JSON.stringify(s);f=f.substring(1,f.length-2);o=i.data(f);if(!o){o=p.createUUID();s.contextObject=r;i.data(o,s);i.data(f,o)}e.push(o)})};e.prototype._getSideEffects=function(t,e){var i=[];var n={};n.sideEffects=this._getSideEffectsFromEntity("entitySet",t);if(n.sideEffects&&n.sideEffects.length){n.origin=e.entitySet;i.push(n)}n={};n.sideEffects=this._getSideEffectsFromEntity("entityType",t);if(n.sideEffects&&n.sideEffects.length){n.origin=e.entityType;i.push(n)}n={};n.sideEffects=this._getSideEffectsFromEntity("complexType",t);if(n.sideEffects&&n.sideEffects.length){n.origin=e.property.parents[0];i.push(n)}return i};e.prototype._getSideEffectsFromEntity=function(t,e){var i,n=[];if(e[t]){for(i in e[t]){n.push({name:i,originType:t,sideEffect:e[t][i]})}}return n};e.prototype._toTypePath=function(t,e){var i=t.split("/");return t.replace(i[0],e.name)};e.prototype.createUUID=function(){var t=(new Date).getTime();var e="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(e){var i=(t+Math.random()*16)%16|0;t=Math.floor(t/16);return(e==="x"?i:i&7|8).toString(16)});return e};e.prototype.destroy=function(){if(this._oSideEffects){this._oSideEffects.destroy()}this._oSideEffects=null};return e},true);