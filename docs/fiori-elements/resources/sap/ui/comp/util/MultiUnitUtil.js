/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/m/List","sap/m/ResponsivePopover","sap/m/CustomListItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/syncStyleClass","sap/base/util/merge"],function(e,t,a,r,i,o,n){"use strict";var s={isMultiUnit:function(e){return e==="*"},isNotMultiUnit:function(e){return e!=="*"},openMultiUnitPopover:function(s,l){var p=sap.ui.getCore().byId(l.smartTableId);var u=p.getTable();var g=u.getBinding("rows");var d=l.value;var c=l.unit;var m=l.template;var T,f;if(!g||!d||!c){return}var v=s.getSource();var y=v.getParent();if(l.additionalParent){y=y.getParent()}var P=u.getAnalyticalInfoOfRow(y.getParent());if(!P){return}var b,L=[],I=[d,c],C=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_TOTAL_TITLE")||"Total";if(g.aApplicationFilter){L=[].concat(g.aApplicationFilter)}var U=u.getBindingInfo("rows");var A=U&&U.parameters&&U.parameters.custom?n({},U.parameters.custom):undefined;if(P.groupTotal||P.group){var B=P.groupedColumns;for(b=0;b<B.length;b++){f=sap.ui.getCore().byId(B[b]).getLeadingProperty();if(!f){continue}T=g.getAnalyticalInfoForColumn(f);if(T){f=T.dimensionPropertyName}if(f){L.push(new r(f,i.EQ,P.context.getProperty(f)))}}C=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal"}else if(!P.grandTotal){var S=Object.getOwnPropertyNames(g.getDimensionDetails());for(b=0;b<S.length;b++){L.push(new r(S[b],i.EQ,P.context.getProperty(S[b])))}C=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal"}var w=m.clone();w.unbindProperty("visible");var M=l.smartTableId+"-multiUnitPopover",R,_;R=sap.ui.getCore().byId(M);if(!R){_=new e(M+"-detailsList",{showSeparators:"None",ariaLabelledBy:M+"-title"});_.addStyleClass("sapUiContentPadding sapUiCompMultiCurrency");R=new t(M,{content:_});o("sapUiSizeCompact",u,R);u.addDependent(R)}if(!_){_=sap.ui.getCore().byId(M+"-detailsList")}R.setTitle(C);R.setPlacement(P.grandTotal?"VerticalPreferredTop":"VerticalPreferredBottom");_.bindItems({path:g.getPath(),filters:L,parameters:{select:I.join(","),custom:A},templateShareable:false,template:new a({content:[w]})});R.openBy(v)}};return s},true);