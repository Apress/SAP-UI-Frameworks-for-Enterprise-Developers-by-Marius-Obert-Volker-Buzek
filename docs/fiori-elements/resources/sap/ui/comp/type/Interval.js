/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/util/DateTimeUtil","sap/ui/model/CompositeType","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/core/LocaleData"],function(e,t,i,a,n,r){"use strict";var s=t.extend("sap.ui.comp.type.Interval",{constructor:function(){t.apply(this,arguments);this.sName="Interval";this.bUseInternalValues=true}});s.prototype.formatValue=function(e,t){if(e==undefined||e==null){return null}if(!Array.isArray(e)){throw new i("Cannot format interval: "+e+" is expected as an Array but given the wrong format")}if(e.length<1||e.length>2){throw new i("Cannot format interval: "+e+" is expected as an Array with 1 or 2 entries")}if(!t){t="string"}switch(this.getPrimitiveType(t)){case"string":case"any":if(e[0]===null&&(e.length===1||e[1]===null)){return""}var a=this.oFormatOptions.type;var n=l.call(this,a);var r;var s;var o;if(a){if(a.isA("sap.ui.model.odata.type.Time")){r=a.formatValue(u(e[0]),"string")}else{r=a.formatValue(e[0],"string")}}else{r=e[0]}if(e.length===1||e[1]===null){o=r}else{if(a){if(a.isA("sap.ui.model.odata.type.Time")){s=a.formatValue(u(e[1]),"string")}else{s=a.formatValue(e[1],"string")}}else{s=e[1]}o=n.replace(/\{0\}/g,r).replace(/\{1\}/g,s)}return o;default:throw new i("Don't know how to format Interval to "+t)}};s.prototype.parseValue=function(e,t,i){if((!t||t==="any")&&typeof e==="string"){t="string"}switch(this.getPrimitiveType(t)){case"string":if(!e){return[null,null]}var n=this.oFormatOptions.type;var r=l.call(this,n);var s=o.call(this,n);var u=[];var p=e.indexOf(s);var m=null;var h=null;if(p<0&&s.length>1){s=s.replace(/\s+/g,"");p=e.indexOf(s)}if(p<0&&s!==" - "&&s!=="-"){s=" - ";p=e.indexOf(s)}if(p<0&&s!=="-"){s="-";p=e.indexOf(s)}if(p===0&&s==="-"){p=e.slice(1).indexOf(s);if(p>=0){p++}}if(p<0){m=e;if(!m){throw new a(e+" is not a valid interval")}}else if(p===0){m="";h=e.slice(s.length);if(!h){throw new a(e+" is not a valid interval")}}else{m=e.slice(0,p);h=e.slice(p+s.length);if(!m||!h){throw new a(e+" is not a valid interval")}}if(n){m=n.parseValue(m,"string");if(n.isA("sap.ui.model.odata.type.Time")){m=f(m)}if(p>=0){h=n.parseValue(h,"string");if(n.isA("sap.ui.model.odata.type.Time")){h=f(h)}}}if(r.indexOf("{0}")<r.indexOf("{1}")){u.push(m);u.push(h)}else{u.push(h);u.push(m)}return u;default:throw new a("Don't know how to parse Interval from "+t)}};s.prototype.validateValue=function(e){if(e==undefined||e==null){return}if(!Array.isArray(e)){throw new n("An array is expected")}if(e.length<1||e.length>2){throw new n("There must be only one or two values in the array")}if(e.length===2&&e[1]!==null&&typeof e[0]!==typeof e[1]){throw new n("Low and high value must have the same type")}var t=this.oFormatOptions.type;if(t){if(t.isA("sap.ui.model.odata.type.Time")){t.validateValue(u(e[0]))}else{t.validateValue(e[0])}if(e.length===2&&e[1]!==null){if(t.isA("sap.ui.model.odata.type.Time")){t.validateValue(u(e[1]))}else{t.validateValue(e[1])}}}if(typeof e[0]==="number"){if(e.length===2&&e[1]!==null&&e[0]>e[1]){throw new n("Low value must be smaller than high value")}}else if(e[0]instanceof Date){if(e.length===2&&e[1]instanceof Date&&e[0]>e[1]){throw new n("Low value must be smaller than high value")}}};s.prototype._handleLocalizationChange=function(){delete this._sPattern;delete this._sDelimiter};function l(e){if(this.oFormatOptions.delimiter){return"{0} "+this.oFormatOptions.delimiter+" {1}"}else if(!this._sPattern){var t=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var i=r.getInstance(t);if(e&&(e.isA("sap.ui.model.type.Time")||e.isA("sap.ui.model.odata.type.Time")||e.isA("sap.ui.model.type.Date")||e.isA("sap.ui.model.odata.type.Date")||e.isA("sap.ui.model.type.DateTime")||e.isA("sap.ui.model.odata.type.DateTime")||e.isA("sap.ui.model.odata.type.DateTimeOffset")||e.isA("sap.ui.model.odata.type.TimeOfDay"))){this._sPattern=i.getIntervalPattern()}else{this._sPattern=i.getMiscPattern("range")}return this._sPattern}else{return this._sPattern}}function o(e){if(this.oFormatOptions.delimiter){return this.oFormatOptions.delimiter}else if(!this._sDelimiter){var t=l.call(this,e);this._sDelimiter=t.replace(/\{0\}/g,"").replace(/\{1\}/g,"");return this._sDelimiter}else{return this._sDelimiter}}function u(t){if(t instanceof Date){t=e.localToUtc(t);return e.dateToEdmTime(t)}else{return t}}function f(t){var i;if(t&&t.ms){i=e.edmTimeToDate(t);return e.utcToLocal(i)}else{return t}}return s});