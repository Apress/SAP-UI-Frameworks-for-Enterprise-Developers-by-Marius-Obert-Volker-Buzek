/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/m/library","./ListPanelRenderer"],function(e,t,o,i){"use strict";var s=t.extend("sap.ui.vk.ListPanel",{metadata:{library:"sap.ui.vk",properties:{headerText:{type:"string",group:"Misc"},headerIcon:{type:"sap.ui.core.URI",group:"Misc"},expanded:{type:"boolean",group:"Misc",defaultValue:true},expandAnimation:{type:"boolean",group:"Misc",defaultValue:true},selectionMode:{type:"sap.m.ListMode",group:"Misc",defaultValue:sap.m.ListMode.MultiSelect}},aggregations:{items:{type:"sap.m.ListItemBase",multiple:true,singularName:"item"},panel:{type:"sap.m.Panel",multiple:false,visibility:"hidden"}},events:{headerIconPress:{},expand:{},selectionChange:{parameters:{listItem:{type:"sap.m.ListItemBase"},listItems:{type:"sap.m.ListItemBase[]"},selected:{type:"boolean"}}},itemPress:{parameters:{listItem:{type:"sap.m.ListItemBase"},srcControl:{type:"sap.ui.core.Control"}}}}}});s.prototype.getSelectedItem=function(){return this._oList.getSelectedItem()};s.prototype.setSelectedItem=function(e,t,o){this._oList.setSelectedItem(e,t,o)};s.prototype.getSelectedItems=function(){return this._oList.getSelectedItems()};s.prototype.init=function(){this._oList=new sap.m.ListBase({mode:this.getSelectionMode(),itemPress:this.fireItemPress.bind(this),selectionChange:this.fireSelectionChange.bind(this)});this._oPanel=new sap.m.Panel({expandable:true,expanded:true,expandAnimation:true,headerToolbar:new sap.m.Toolbar({active:false}),content:[this._oList],expand:this.fireExpand.bind(this)});this._oPanel.getHeaderToolbar().addStyleClass("sapUiVkLPTb");this.setAggregation("panel",this._oPanel,true);this._oHeaderIcon=null;this._oHeaderText=null;this._bHeaderToolbarChanged=true};s.prototype.exit=function(){this._destroyControl(this._oList);this._destroyControl(this._oPanel);this._destroyControl(this._oHeaderIcon);this._destroyControl(this._oHeaderText)};s.prototype.getItems=function(){return this._oList.getItems()};s.prototype.addItem=function(e){return this._oList.addItem(e)};s.prototype.insertItem=function(e,t){return this._oList.insertItem(e,t)};s.prototype.removeItem=function(e){return this._oList.removeItem(e)};s.prototype.removeAllItems=function(){return this._oList.removeAllItems()};s.prototype.setHeaderText=function(e){if(!this._oHeaderText){this._oHeaderText=new sap.m.Title}this._oHeaderText.setText(e);this._bHeaderToolbarChanged=true;if(this._oHeaderIcon){this._oHeaderIcon.setTooltip(e);this._oHeaderIcon.addAriaLabelledBy(this._oHeaderText);this._oHeaderIcon.addAriaDescribedBy(this._oHeaderText)}return this.setProperty("headerText",e)};s.prototype.getExpanded=function(){return this._oPanel.getExpanded()};s.prototype.setExpanded=function(e){return this._oPanel.setExpanded(e)};s.prototype.getExpandAnimation=function(){return this._oPanel.getExpandAnimation()};s.prototype.setExpandAnimation=function(e){return this._oPanel.setExpandAnimation(e)};s.prototype.setHeaderIcon=function(e){if(!this._oHeaderIcon){this._oHeaderIcon=new sap.m.Button({press:this.fireHeaderIconPress.bind(this),type:sap.m.ButtonType.Transparent,tooltip:this.getHeaderText()})}this._oHeaderIcon.setIcon(e);this._bHeaderToolbarChanged=true;if(this._oHeaderText){this._oHeaderIcon.addAriaLabelledBy(this._oHeaderText)}return this.setProperty("headerIcon",e)};s.prototype.setSelectionMode=function(e){this._oList.setMode(e);return this.setProperty("selectionMode",e)};s.prototype.onBeforeRendering=function(){if(this._bHeaderToolbarChanged){var e=this._oPanel.getHeaderToolbar();e.removeAllContent();if(this._oHeaderIcon){e.addContent(this._oHeaderIcon)}if(this._oHeaderText){e.addContent(this._oHeaderText)}this._bHeaderToolbarChanged=false}};s.prototype._destroyControl=function(e){if(e){e.destroy();e=undefined}};return s});