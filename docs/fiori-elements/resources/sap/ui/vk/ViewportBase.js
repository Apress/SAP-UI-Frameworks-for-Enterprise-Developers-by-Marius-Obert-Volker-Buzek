/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/Core","./tools/Tool","./library","./Core","./SelectionMode","./SelectionDisplayMode","./RenderMode","./SafeArea"],function(e,t,n,a,i,o,r,l,s){"use strict";var u=e.extend("sap.ui.vk.ViewportBase",{metadata:{library:"sap.ui.vk",abstract:true,properties:{showDebugInfo:{type:"boolean",defaultValue:false},backgroundColorTop:{type:"sap.ui.core.CSSColor",defaultValue:"rgba(50, 50, 50, 1)"},backgroundColorBottom:{type:"sap.ui.core.CSSColor",defaultValue:"rgba(255, 255, 255, 1)"},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},selectionMode:{type:"sap.ui.vk.SelectionMode",defaultValue:o.Sticky},selectionDisplayMode:{type:"sap.ui.vk.SelectionDisplayMode",defaultValue:r.Highlight},showSelectionBoundingBoxes:{type:"boolean",defaultValue:true},freezeCamera:{type:"boolean",defaultValue:false},renderMode:{type:"sap.ui.vk.RenderMode",defaultValue:l.Default},showSafeArea:{type:"boolean",defaultValue:false},showAllHotspots:{type:"boolean",defaultValue:false},disableHotspotHovering:{type:"boolean",defaultValue:false},hotspotColorABGR:{type:"int",defaultValue:1493172411},hotspotColor:{type:"sap.ui.core.CSSColor",defaultValue:"rgba(89, 0, 0, 0.73)"},keepOutputSize:{type:"boolean",defaultValue:false},showAllHotspotsTintColor:{type:"sap.ui.core.CSSColor",defaultValue:"rgba(255, 255, 0, .35)"},autoStartRendering:{type:"boolean",defaultValue:true}},associations:{contentConnector:{type:"sap.ui.vk.ContentConnector",multiple:false},viewStateManager:{type:"sap.ui.vk.ViewStateManagerBase",multiple:false},tools:{type:"sap.ui.vk.tools.Tool",multiple:true}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true},safeArea:{type:"sap.ui.vk.SafeArea",multiple:false},annotations:{type:"sap.ui.vk.Annotation",multiple:true},outputSettings:{type:"sap.ui.vk.OutputSettings",multiple:false}},events:{urlClicked:{parameters:{nodeRef:"any",url:"string"},enableEventBubbling:true},nodeClicked:{parameters:{nodeRef:"any",x:"int",y:"int"},enableEventBubbling:true},resize:{parameters:{size:"object"},enableEventBubbling:true},nodesPicked:{parameters:{picked:{type:"any[]"}},enableEventBubbling:true},nodeZoomed:{parameters:{zoomed:{type:"any"},isZoomIn:{type:"boolean"}},enableEventBubbling:true},viewActivated:{parameters:{viewIndex:"int",view:"sap.ui.vk.View",type:{type:"string"}},enableEventBubbling:true},procedureFinished:{enableEventBubbling:true},viewFinished:{parameters:{viewIndex:"int"},enableEventBubbling:true}}},constructor:function(t,n){e.apply(this,arguments);i.observeAssociations(this)}});var p=u.getMetadata().getParent().getClass().prototype;u.prototype.init=function(){if(p.init){p.init.call(this)}if(this.getSafeArea()==null){this.setSafeArea(new s)}this._camera=null};u.prototype.exit=function(){if(this._camera){var e=t.byId(this.getContentConnector());if(e){var n=e.getContentManager();if(n){n.destroyCamera(this._camera)}this._camera=null}}if(p.exit){p.exit.call(this)}};u.prototype.onSetContentConnector=function(e){e.attachContentReplaced(this._onContentReplaced,this);this._setContent(e.getContent())};u.prototype.onUnsetContentConnector=function(e){e.detachContentReplaced(this._onContentReplaced,this);this._setContent(null);this.setCamera(null)};u.prototype._onContentReplaced=function(e){this._setContent(e.getParameter("newContent"))};u.prototype._setContent=function(e){if(e&&!this.getViewStateManager()){var n=t.byId(this.getContentConnector());if(n){var a=n.getDefaultViewStateManager();if(a){this.setViewStateManager(a)}}}return this};u.prototype.addTool=function(e){this.addAssociation("tools",e);e=e instanceof n?e:t.byId(e);e.setViewport(this)};u.prototype.getImage=function(e,t){return null};u.prototype.stickySelectionHandler=function(e){if(this._viewStateManager==null){return}if(e.length===0){var t=[];if(this.getSelectionDisplayMode()===r.Outline){this._viewStateManager.enumerateOutlinedNodes(function(e){t.push(e)});if(t.length>0){this._viewStateManager.setOutliningStates([],t)}}else{this._viewStateManager.enumerateSelection(function(e){t.push(e)});if(t.length>0){this._viewStateManager.setSelectionStates([],t)}}}else{var n=[];var a=[];var i,o;if(this.getSelectionDisplayMode()===r.Outline){i=this._viewStateManager.getOutliningState(e);for(o=0;o<i.length;o++){if(i[o]){a.push(e[o])}else{n.push(e[o])}}this._viewStateManager.setOutliningStates(n,a)}else{i=this._viewStateManager.getSelectionState(e);for(o=0;o<i.length;o++){if(i[o]){a.push(e[o])}else{n.push(e[o])}}this._viewStateManager.setSelectionStates(n,a)}}};u.prototype.exclusiveSelectionHandler=function(e){if(this._viewStateManager==null){return}var t=true;if(e.length===1){t=!this._viewStateManager.getSelectionState(e[0])}else if(e.length>1){var n;if(this.getSelectionDisplayMode()===r.Outline){n=this._viewStateManager.getOutliningState(e)}else{n=this._viewStateManager.getSelectionState(e)}for(var a=0;a<n.length;a++){if(n[a]){t=false;break}}}var i=[];if(e.length===0||t){if(this.getSelectionDisplayMode()===r.Outline){this._viewStateManager.enumerateOutlinedNodes(function(e){i.push(e)})}else{this._viewStateManager.enumerateSelection(function(e){i.push(e)})}}if(this.getSelectionDisplayMode()===r.Outline){this._viewStateManager.setOutliningStates(e,i)}else{this._viewStateManager.setSelectionStates(e,i)}};u.prototype.setCamera=function(e){if(e!==this._camera){var n=t.byId(this.getContentConnector());if(this._camera&&n){var a=n.getContentManager();if(a){a.destroyCamera(this._camera)}}}this._camera=e;return this};u.prototype.getCamera=function(){return this._camera};u.prototype.activateView=function(e,t,n){return this};u.prototype.pan=function(e,t){return this};u.prototype.rotate=function(e,t){return this};u.prototype.zoom=function(e){return this};u.prototype.projectToScreen=function(e,t,n,a){return{x:0,y:0,depth:0}};u.prototype.normalizeRectangle=function(e,t,n,a){return{x:0,y:0,width:0,height:0}};u.prototype.deNormalizeRectangle=function(e,t,n,a){return{x:0,y:0,width:0,height:0}};u.prototype.renderTools=function(e){var n=this.getTools();for(var a=0,i=n.length;a<i;a++){var o=t.byId(n[a]);var r=o.getGizmoForContainer(this);if(r&&r.hasDomElement()){e.renderControl(r)}}};u.prototype.renderContent=function(e){var t=this.getContent();for(var n=0,a=t.length;n<a;n++){e.renderControl(t[n])}};u.prototype.getMeasurementSurface=function(){return null};return u});