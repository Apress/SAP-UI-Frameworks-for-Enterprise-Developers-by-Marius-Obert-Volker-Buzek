/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/EventProvider","./HitTestClickType"],function(t,e){"use strict";var i=t.extend("sap.ui.vk.tools.HitTestToolHandler",{metadata:{library:"sap.ui.vk"},constructor:function(t){this._priority=0;this._tool=t;this._rect=null;this._gesture=false;this._nomenu=false}});i.prototype.destroy=function(){this._tool=null;this._rect=null;this._gesture=false};i.prototype._getOffset=function(t){var e=t.getBoundingClientRect();var i={x:e.left+window.pageXOffset,y:e.top+window.pageYOffset};return i};i.prototype._inside=function(t){var e=this._tool._viewport.getIdForLabel();var i=document.getElementById(e);if(i==null){return false}var o=this._getOffset(i);this._rect={x:o.x,y:o.y,w:i.offsetWidth,h:i.offsetHeight};return t.x>=this._rect.x&&t.x<=this._rect.x+this._rect.w&&t.y>=this._rect.y&&t.y<=this._rect.y+this._rect.h};i.prototype.beginGesture=function(t){t.handled=false};i.prototype.move=function(t){t.handled=false};i.prototype.endGesture=function(t){t.handled=false};i.prototype._executeHittest=function(t,e){if(this._inside(t)&&!this._gesture){this._gesture=false;var i=t.x-this._rect.x,o=t.y-this._rect.y;this._gizmo=this._tool.getGizmo();if(this._gizmo){this._gizmo.show(this._tool._viewport);this._gizmo.moveGizmo(i,o)}var s=this._tool._viewport.getScene();var r=this._tool._viewport.getCamera();this._tool.hitTest(i,o,s,r,e);if(this._gizmo){this._gizmo.hide()}}};i.prototype.click=function(t){this._executeHittest(t,e.Single);t.handled=true};i.prototype.doubleClick=function(t){this._executeHittest(t,e.Double);t.handled=false};i.prototype.contextMenu=function(t){this._executeHittest(t,e.Context);t.handled=false};i.prototype.getViewport=function(){return this._tool._viewport};return i});