/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/EventProvider","../svg/Element"],function(t,e){"use strict";var i=t.extend("sap.ui.vk.tools.CreatePathToolHandler",{metadata:{library:"sap.ui.vk"},constructor:function(t){this._priority=30;this._tool=t;this._rect=null;this._gesture=false}});i.prototype._getPosition=function(t){var i=this._tool._viewport._camera._screenToWorld(t.x-this._rect.x,t.y-this._rect.y);var o=e._invertMatrix(this._tool.getGizmo()._root._matrixWorld());return e._transformPoint(i.x,i.y,o)};i.prototype.hover=function(t){var e=this._tool.getGizmo();if(e&&e._activeElement){t.handled=true;this._tool.getGizmo()._addPoint(this._getPosition(t),false)}};i.prototype.beginGesture=function(t){var e=this._tool.getGizmo();if(e&&t.buttons===1&&this._inside(t)){t.handled=true;this._gesture=true;e._addPoint(this._getPosition(t),true,true)}};i.prototype.move=function(t){var e=this._tool.getGizmo();if(e&&this._gesture&&this._inside(t)){t.handled=true;this._tool.getGizmo()._addPoint(this._getPosition(t),true)}};i.prototype.endGesture=function(t){var e=this._tool.getGizmo();if(e&&this._gesture&&this._inside(t)){this._gesture=false;t.handled=true;this._tool.getGizmo()._checkClosure(this._getPosition(t))}};i.prototype.click=function(t){var e=this._tool.getGizmo();if(e&&this._inside(t)){t.handled=true}};i.prototype.doubleClick=function(t){var e=this._tool.getGizmo();if(e&&this._inside(t)){t.handled=true;e._finishPath(false)}};i.prototype.contextMenu=function(t){};i.prototype.getViewport=function(){return this._tool._viewport};i.prototype._getOffset=function(t){var e=t.getBoundingClientRect();var i={x:e.left+window.pageXOffset,y:e.top+window.pageYOffset};return i};i.prototype._inside=function(t){var e=this._tool._viewport.getIdForLabel();var i=document.getElementById(e);if(i==null){return false}var o=this._getOffset(i);this._rect={x:o.x,y:o.y,w:i.offsetWidth,h:i.offsetHeight};return t.x>=this._rect.x&&t.x<=this._rect.x+this._rect.w&&t.y>=this._rect.y&&t.y<=this._rect.y+this._rect.h};return i});