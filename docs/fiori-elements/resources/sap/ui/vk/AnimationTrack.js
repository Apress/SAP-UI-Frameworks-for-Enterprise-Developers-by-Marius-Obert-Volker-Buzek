/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/Object","./AnimationTrackValueType","./findIndexInArray","./Core"],function(t,e,i,s){"use strict";var n=t.extend("sap.ui.vk.AnimationTrack",{constructor:function(t,i){this._jsonData={};this._jsonData.id=t;this._jsonData.type=i&&i.trackValueType?i.trackValueType:e.Scalar;this._jsonData.keys=[];this._jsonData.cycleForward=!!(i&&i.cycleForward);this._jsonData.cycleBackward=!!(i&&i.cycleBackward);this._jsonData.infinite=!!(i&&i.infinite);this._jsonData._isAbsoluteValue=i&&i.isAbsoluteValue?i.isAbsoluteValue:false}});n.prototype.setJSONModel=function(t){this._model=t;return this};n.prototype.getIsAbsoluteValue=function(){return this._jsonData._isAbsoluteValue};n.prototype.setIsAbsoluteValue=function(t){this._jsonData._isAbsoluteValue=t};n.prototype.getId=function(){return this._jsonData.id};n.prototype.getKeysType=function(){return this._jsonData.type};n.prototype.setKeysType=function(t){if(this.getKeysCount()>0){return false}this._jsonData.type=t;return true};n.prototype.isCycleForward=function(){return this._jsonData.cycleForward};n.prototype.setCycleForward=function(t){this._jsonData.cycleForward=t;if(this._model){this._model.updateBindings()}return this};n.prototype.isCycleBackward=function(){return this._jsonData.cycleBackward};n.prototype.setCycleBackward=function(t){this._jsonData.cycleBackward=t;if(this._model){this._model.updateBindings()}return this};n.prototype.isInfinite=function(){return this._jsonData.infinite};n.prototype.setInfinite=function(t){this._jsonData.infinite=t;if(this._model){this._model.updateBindings()}return this};n.prototype.getKeysCount=function(){return this._jsonData.keys.length};n.prototype.getKey=function(t){if(t<0||t>=this._jsonData.keys.length){return undefined}return this._jsonData.keys[t]};n.prototype.updateKey=function(t,e,i){if(t>=0||t<this._jsonData.keys.length){this._jsonData.keys[t].value=e;if(this._model){this._model.updateBindings()}}if(!i){this._fireTrackChanged()}return this};n.prototype.removeKey=function(t,e){var i=false;if(t>=0||t<this._jsonData.keys.length){this._jsonData.keys.splice(t,1);if(this._jsonData.keys.length===0){i=true}if(this._model){this._model.updateBindings()}}if(!e){this._fireTrackChanged(i)}return this};n.prototype.findKeyIndex=function(t){var e=-1;if(this._jsonData.keys.length===1){e=0}else if(this._jsonData.keys.length>1){for(var i=1;i<this._jsonData.keys.length;i++){var s=this.getKey(i-1);var n=this.getKey(i);if(t>=s.time&&t<=n.time){e=t-s.time<n.time-t?i-1:i;break}}}return e};n.prototype.insertKey=function(t,e,s){var n=i(this._jsonData.keys,function(e){return e.time===t});if(n<0){this._jsonData.keys.push({time:t,value:e});this._jsonData.keys.sort(function(t,e){return t.time-e.time})}else{this.updateKey(n,e,true);if(this._model){this._model.updateBindings()}}if(!s){this._fireTrackChanged()}return this};n.prototype._fireTrackChanged=function(t){s.getEventBus().publish("sap.ui.vk","trackChanged",{trackId:this._jsonData.id,emptyTrack:t})};n.prototype.getJSONData=function(){return this._jsonData};return n});