/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/util/ObjectPath","./Scene","./ViewStateManagerBase","sap/ui/core/Core"],function(t,e,i,n){"use strict";var o=i.extend("sap.ui.vk.ViewStateManager",{metadata:{library:"sap.ui.vk"}});var a=o.getMetadata().getParent().getClass().prototype;o.prototype.init=function(){if(a.init){a.init.call(this)}this._implementation=null};o.prototype.exit=function(){this._destroyImplementation();if(a.exit){a.exit.call(this)}};o.prototype._destroyImplementation=function(){if(this._implementation){this._implementation.destroy();this._implementation=null}return this};o.prototype.getImplementation=function(){return this._implementation};o.prototype._setContent=function(t){var i=null;if(t&&t instanceof e){i=t}this._setScene(i);return this};o.prototype._setScene=function(i){if(i&&i instanceof e){var o=(this.getFeatures()||[]).includes("MultipleViewports");var a=i.getMetadata().getName();var r=this._implementation&&this._implementation.getMetadata().getName();var s=a==="sap.ui.vk.dvl.Scene"&&r==="sap.ui.vk.dvl.ViewStateManager"||a==="sap.ui.vk.threejs.Scene"&&(r==="sap.ui.vk.threejs.ViewStateManager"&&!o||r==="sap.ui.vk.threejs.v2.ViewStateManager"&&o)||a==="sap.ui.vk.svg.Scene"&&r==="sap.ui.vk.svg.ViewStateManager";if(!s){this._destroyImplementation();var m;if(a==="sap.ui.vk.dvl.Scene"){m="sap.ui.vk.dvl.ViewStateManager"}else if(a==="sap.ui.vk.threejs.Scene"){if(o){m="sap.ui.vk.threejs.v2.ViewStateManager"}else{m="sap.ui.vk.threejs.ViewStateManager"}}else if(a==="sap.ui.vk.svg.Scene"){m="sap.ui.vk.svg.ViewStateManager"}if(m){var p=this;var l=t.get(m);this._implementation=new l({shouldTrackVisibilityChanges:this.getShouldTrackVisibilityChanges(),recursiveSelection:this.getRecursiveSelection(),contentConnector:this.getContentConnector(),viewManager:this.getViewManager(),visibilityChanged:function(t){p.fireVisibilityChanged({visible:t.getParameter("visible"),hidden:t.getParameter("hidden")})},selectionChanged:function(t){p.fireSelectionChanged({selected:t.getParameter("selected"),unselected:t.getParameter("unselected")})},outliningChanged:function(t){p.fireOutliningChanged({outlined:t.getParameter("outlined"),unoutlined:t.getParameter("unoutlined")})},opacityChanged:function(t){p.fireOpacityChanged({changed:t.getParameter("changed"),opacity:t.getParameter("opacity")})},tintColorChanged:function(t){p.fireTintColorChanged({changed:t.getParameter("changed"),tintColor:t.getParameter("tintColor"),tintColorABGR:t.getParameter("tintColorABGR")})},nodeHierarchyReplaced:function(t){p.fireNodeHierarchyReplaced({oldNodeHierarchy:t.getParameter("oldNodeHierarchy"),newNodeHierarchy:t.getParameter("newNodeHierarchy")})},viewStateApplying:function(t){p.fireViewStateApplying({view:t.getParameter("view")})},viewStateApplied:function(t){p.fireViewStateApplied({view:t.getParameter("view")})},transformationChanged:function(t){p.fireTransformationChanged(t.getParameters())},highlightColorChanged:function(t){p.fireHighlightColorChanged(t.getParameters())}});var h=n.byId(this.getViewManager());if(h){var u=n.byId(h.getAnimationPlayer());if(u){u.setViewStateManager(this._implementation)}}}}}else{this._destroyImplementation()}return this};o.prototype.getAnimationPlayer=function(){var t;var e=n.byId(this.getViewManager());if(e){t=n.byId(e.getAnimationPlayer())}return t};o.prototype.getNodeHierarchy=function(){return this._implementation&&this._implementation.getNodeHierarchy()};o.prototype.getVisibilityChanges=function(){return this._implementation&&this._implementation.getVisibilityChanges()};o.prototype.getVisibilityComplete=function(){return this._implementation&&this._implementation.getVisibilityComplete()};o.prototype.getVisibilityState=function(t){return this._implementation&&this._implementation.getVisibilityState(t)};o.prototype.setVisibilityState=function(t,e,i,n){if(this._implementation){this._implementation.setVisibilityState(t,e,i,n)}return this};o.prototype.resetVisibility=function(){if(this._implementation){this._implementation.resetVisibility()}return this};o.prototype.enumerateSelection=function(t){if(this._implementation){this._implementation.enumerateSelection(t)}return this};o.prototype.enumerateOutlinedNodes=function(t){if(this._implementation&&this._implementation.enumerateOutlinedNodes){this._implementation.enumerateOutlinedNodes(t)}return this};o.prototype.setShowSelectionBoundingBox=function(t){if(this._implementation){this._implementation.setShowSelectionBoundingBox(t)}};o.prototype.getShowSelectionBoundingBox=function(){if(this._implementation){return this._implementation.getShowSelectionBoundingBox()}};o.prototype.getSelectionState=function(t){return this._implementation&&this._implementation.getSelectionState(t)};o.prototype.setSelectionState=function(t,e,i,n){if(this._implementation){this._implementation.setSelectionState(t,e,i,n)}return this};o.prototype.setSelectionStates=function(t,e,i,n){if(this._implementation){this._implementation.setSelectionStates(t,e,i,n)}return this};o.prototype.getOutliningState=function(t){if(this._implementation&&this._implementation.getOutliningState){return this._implementation.getOutliningState(t)}else{return false}};o.prototype.setOutliningStates=function(t,e,i){if(this._implementation&&this._implementation.setOutliningStates){this._implementation.setOutliningStates(t,e,i)}return this};o.prototype.getJoints=function(){if(this._implementation&&this._implementation.getJoints){return this._implementation.getJoints()}return undefined};o.prototype.setJoints=function(t,e){if(this._implementation&&this._implementation.setJoints){this._implementation.setJoints(t,e)}return this};o.prototype.getOpacity=function(t){return this._implementation&&this._implementation.getOpacity(t)};o.prototype.setOpacity=function(t,e,i){if(this._implementation){this._implementation.setOpacity(t,e,i)}return this};o.prototype.getTotalOpacity=function(t){if(this._implementation&&this._implementation.getTotalOpacity){return this._implementation.getTotalOpacity(t)}return 1};o.prototype.setTotalOpacity=function(t,e){if(this._implementation&&this._implementation.setTotalOpacity){return this._implementation.setTotalOpacity(t,e)}return null};o.prototype.getRestOpacity=function(t){if(this._implementation&&this._implementation.getRestOpacity){return this._implementation.getRestOpacity(t)}return null};o.prototype.setRestOpacity=function(t,e){if(this._implementation&&this._implementation.setRestOpacity){this._implementation.setRestOpacity(t,e)}return this};o.prototype.restoreRestOpacity=function(t){if(this._implementation&&this._implementation.restoreRestOpacity){this._implementation.restoreRestOpacity(t)}return this};o.prototype.updateRestOpacity=function(t){if(this._implementation&&this._implementation.updateRestOpacity){this._implementation.updateRestOpacity(t)}return this};o.prototype.getTintColor=function(t,e){return this._implementation&&this._implementation.getTintColor(t,e)};o.prototype.setTintColor=function(t,e,i){if(this._implementation){this._implementation.setTintColor(t,e,i)}return this};o.prototype.setHighlightColor=function(t){if(this._implementation&&this._implementation.setHighlightColor){this._implementation.setHighlightColor(t)}return this};o.prototype.getHighlightColor=function(t){if(this._implementation&&this._implementation.getHighlightColor){return this._implementation.getHighlightColor(t)}};o.prototype.setOutlineColor=function(t){if(this._implementation&&this._implementation.setOutlineColor){this._implementation.setOutlineColor(t)}return this};o.prototype.getOutlineColor=function(t){if(this._implementation&&this._implementation.getOutlineColor){return this._implementation.getOutlineColor(t)}else{return null}};o.prototype.setOutlineWidth=function(t){if(this._implementation&&this._implementation.setOutlineWidth){this._implementation.setOutlineWidth(t)}return this};o.prototype.getOutlineWidth=function(){if(this._implementation&&this._implementation.getOutlineWidth){return this._implementation.getOutlineWidth()}else{return 0}};o.prototype.setRecursiveOutlining=function(t){this.setProperty("recursiveOutlining",t,true);if(this._implementation&&this._implementation.setRecursiveOutlining){this._implementation.setRecursiveOutlining(t)}return this};o.prototype.setRecursiveSelection=function(t){this.setProperty("recursiveSelection",t,true);if(this._implementation){this._implementation.setRecursiveSelection(t)}return this};o.prototype.setHighlightDisplayState=function(t){if(this._implementation&&this._implementation.setHighlightDisplayState){this._implementation.setHighlightDisplayState(t)}return this};o.prototype.setTransformation=function(t,e){if(this._implementation&&this._implementation.setTransformation){this._implementation.setTransformation(t,e)}return this};o.prototype.getTransformation=function(t){if(this._implementation&&this._implementation.getTransformation){return this._implementation.getTransformation(t)}return null};o.prototype.getTransformationWorld=function(t){if(this._implementation&&this._implementation.getTransformationWorld){return this._implementation.getTransformationWorld(t)}return null};o.prototype.getRestTransformationWorld=function(t){if(this._implementation&&this._implementation.getRestTransformationWorld){return this._implementation.getRestTransformationWorld(t)}return null};o.prototype.getRestTransformationUsingJoint=function(t){if(this._implementation&&this._implementation.getRestTransformationUsingJoint){return this._implementation.getRestTransformationUsingJoint(t)}return null};o.prototype.updateNodesRestTransformation=function(t){if(this._implementation&&this._implementation.updateNodesRestTransformation){this._implementation.updateNodesRestTransformation(t)}return this};o.prototype.updateRestTransformation=function(t,e){if(this._implementation&&this._implementation.updateRestTransformation){this._implementation.updateRestTransformation(t,e)}return this};o.prototype.restoreRestTransformation=function(t){if(this._implementation&&this._implementation.restoreRestTransformation){this._implementation.restoreRestTransformation(t)}return this};o.prototype.setRestTransformation=function(t,e,i,n){if(this._implementation&&this._implementation.setRestTransformation){this._implementation.setRestTransformation(t,e,i,n)}return this};o.prototype.getRelativeTransformation=function(t){if(this._implementation&&this._implementation.getRelativeTransformation){return this._implementation.getRelativeTransformation(t)}return null};o.prototype.getRestTransformation=function(t){if(this._implementation&&this._implementation.getRestTransformation){return this._implementation.getRestTransformation(t)}return null};o.prototype.setInterpolatedRelativeValues=function(t,e){if(this._implementation&&this._implementation.setInterpolatedRelativeValues){return this._implementation.setInterpolatedRelativeValues(t,e)}return null};o.prototype._getEndPropertyInLastPlayback=function(t,e){if(this._implementation&&this._implementation._getEndPropertyInLastPlayback){return this._implementation._getEndPropertyInLastPlayback(t,e)}return null};o.prototype._getEndPropertyInPreviousPlayback=function(t,e,i){if(this._implementation&&this._implementation._getEndPropertyInPreviousPlayback){return this._implementation._getEndPropertyInPreviousPlayback(t,e,i)}return null};o.prototype._convertTracksToRelative=function(t){if(this._implementation&&this._implementation._convertTracksToRelative){this._implementation._convertTracksToRelative(t)}return this};o.prototype._setJointNodeOffsets=function(t,e){if(this._implementation&&this._implementation._setJointNodeOffsets){this._implementation._setJointNodeOffsets(t,e)}return this};o.prototype._setJointNodeMatrix=function(){if(this._implementation&&this._implementation._setJointNodeMatrix){this._implementation._setJointNodeMatrix()}return this};o.prototype._propagateOpacityToJointChildren=function(t,e){if(this._implementation&&this._implementation._propagateOpacityToJointChildren){this._implementation._propagateOpacityToJointChildren(t,e)}return this};o.prototype.setTranslationKey=function(t,e,i,n){if(this._implementation&&this._implementation.setTranslationKey){this._implementation.setTranslationKey(t,e,i,n)}return this};o.prototype.setScaleKey=function(t,e,i,n){if(this._implementation&&this._implementation.setScaleKey){this._implementation.setScaleKey(t,e,i,n)}return this};o.prototype.setRotationKey=function(t,e,i,n,o){if(this._implementation&&this._implementation.setRotationKey){this._implementation.setRotationKey(t,e,i,n,o)}return this};o.prototype.setOpacityKey=function(t,e,i,n){if(this._implementation&&this._implementation.setOpacityKey){this._implementation.setOpacityKey(t,e,i,n)}return this};o.prototype.getSymbolNodes=function(t){if(this._implementation&&this._implementation.getSymbolNodes){return this._implementation.getSymbolNodes(t)}return[]};o.prototype.getBackgroundImageType=function(){if(this._implementation&&this._implementation.getBackgroundImageType){return this._implementation.getBackgroundImageType()}return null};o.prototype.setBackgroundImageType=function(t){if(this._implementation&&this._implementation.setBackgroundImageType){return this._implementation.setBackgroundImageType(t)}return undefined};o.prototype.getSelectable=function(t){var e=this._implementation;if(e){return e.getSelectable(t)}if(Array.isArray(t)){return new Array(t.length).fill(true)}else{return true}};o.prototype.setSelectable=function(t,e){var i=this._implementation;if(i){return i.setSelectable(t,e)}return this};return o});