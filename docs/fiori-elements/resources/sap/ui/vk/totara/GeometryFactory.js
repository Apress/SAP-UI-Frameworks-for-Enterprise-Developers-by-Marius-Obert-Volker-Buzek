/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./IndexCompressor"],function(r){"use strict";var t=1;var e=2;var a=4;var u=0;var o=3;var n=function(){};n.getGeometryInfo=function(u,o){var n=new DataView(o.buffer,o.byteOffset,o.byteLength);var v=0;var l=(u.flags&e)>0;var p=(u.flags&a)>0;var C=(u.flags&t)>0;var g=[];var h=[];var y=[];var m=[];if(u.encodingType===0){for(var d=0,F=u.pointCount;d<F;++d){g.push(n.getFloat32(v,true));g.push(n.getFloat32(v+4,true));g.push(n.getFloat32(v+8,true));v+=12;if(l){h.push(n.getFloat32(v,true));h.push(n.getFloat32(v+4,true));h.push(n.getFloat32(v+8,true));v+=12}if(p){y.push(n.getFloat32(v,true));y.push(n.getFloat32(v+4,true));v+=8}}for(var c=0,B=u.elementCount*(C?2:3);c<B;++c){m.push(n.getUint16(v,true));v+=2}}else{var O=new r(o,o.length);O.setCurByte(v);if(!O.ReadCommand()){throw"buffer over flow"}var k=O.rvalue;var R;if(k){R=i(O,u.pointCount,k,u.box,g);if(R.isOk){g=R.array}else{return false}}var w=1;if(l){if(!O.ReadCommand()){return false}w=O.rvalue;if(w){R=s(O,u.pointCount,w);if(R.isOk){h=R.array}else{return false}}}var b=1;var M=false;if(p){if(!O.ReadCommand()){return false}b=O.rvalue;if(b){R=f(O,u.pointCount,b);if(R.isOk){M=true;y=R.array}else{return false}}}if(!k||!w||!b||M){if(M){v=O.getCurByte();var I=n.getFloat32(v,true);var x=n.getFloat32(v+4,true);O.moveCurByte(8);if(I!==0||x!==1){var A=x-I;for(var D=0;D<u.pointCount*2;D++){y[D]=y[D]*A+I}}}var P;if(!k){v=O.getCurByte();for(P=0;P<u.pointCount;P++){g.push(n.getFloat32(v+P*4,true));g.push(n.getFloat32(v+(P+u.pointCount)*4,true));g.push(n.getFloat32(v+(P+u.pointCount*2)*4,true))}O.moveCurByte(u.pointCount*3*4)}if(!w){v=O.getCurByte();for(P=0;P<u.pointCount;P++){h.push(n.getFloat32(v+P*4,true));h.push(n.getFloat32(v+(P+u.pointCount*1)*4,true));h.push(n.getFloat32(v+(P+u.pointCount*2)*4,true))}O.moveCurByte(u.pointCount*3*4)}if(!b){if(p){v=O.getCurByte();for(P=0;P<u.pointCount;P++){y.push(n.getFloat32(v+P*4,true));y.push(n.getFloat32(v+(P+u.pointCount*1)*4,true))}O.moveCurByte(u.pointCount*2*4)}}}var U=O.getCurByte();O.Reset();O.setCurByte(U);var G=[0,0,0];var L=C?2:3;for(var T=0;T<u.elementCount;T++){for(var V=0;V<L;V++){if(!O.ReadCommand(G[V])){throw"UIC1 Decompression error!!!"}else{m.push(O.rvalue);G[V]=O.rvalue}}}}return{id:u.id,isPolyline:C,data:{indices:m,points:g,normals:h,uvs:y}}};function i(r,t,e,a){var n={array:new Array(t*3),isOk:false};for(var i=0;i<3;i++){var s=a[u+i];var f=(a[o+i]-s)/e;for(var v=0;v<t;v++){if(!r.ReadCommand()){return n}n.array[v*3+i]=f*r.rvalue+s}}n.isOk=true;return n}function s(r,t,e){var a={array:[],isOk:false};var u=[];var o;for(o=0;o<t;o++){if(!r.ReadCommand()){return a}u.push(r.rvalue)}var n=2*Math.PI/e;var i;var s;var f;for(o=0;o<t;o++){if(!r.ReadCommand()){return a}i=n*u[o];s=n*r.rvalue;f=Math.sin(s);a.array.push(f*Math.cos(i));a.array.push(f*Math.sin(i));a.array.push(Math.cos(s))}a.isOk=true;return a}function f(r,t,e){var a={array:new Array(t*2),isOk:false};var u=1/e;for(var o=0;o<2;o++){for(var n=0;n<t;n++){if(!r.ReadCommand()){return false}a.array[n*2+o]=u*r.rvalue}}a.isOk=true;return a}return n});