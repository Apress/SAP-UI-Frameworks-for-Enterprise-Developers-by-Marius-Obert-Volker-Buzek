/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/base/Log","./Element"],function(e,t){"use strict";var i=function(e){e=e||{};t.call(this,e);this.type="Path";this.segments=e.segments||[];this.setMaterial(e.material)};i.prototype=Object.assign(Object.create(t.prototype),{constructor:i});i.prototype.tagName=function(){return"path"};i.prototype._expandBoundingBox=function(e,t){if(this.domRef){var i=this.domRef.getBBox();if(i){this._expandBoundingBoxCE(e,t,i.x+i.width*.5,i.y+i.height*.5,i.width*.5,i.height*.5);return}}var n=isNaN(this.strokeWidth)?0:this.strokeWidth*.5;var r=0,s=0;for(var a=0,o=this.segments.length;a<o;a++){var p=this.segments[a];var h=p.points;var f=p.dimension||2,c,u;switch(p.type){case"arc":if(p.relative){r+=h[0];s+=h[1]}else{r=h[0];s=h[1]}this._expandBoundingBoxCE(e,t,r,s,n,n);break;case"move":r=h[0];s=h[1];this._expandBoundingBoxCE(e,t,r,s,n,n);for(c=f,u=h.length-1;c<u;c+=f){if(p.relative){r+=h[c];s+=h[c+1]}else{r=h[c];s=h[c+1]}this._expandBoundingBoxCE(e,t,r,s,n,n)}break;case"line":for(c=0,u=h.length-1;c<u;c+=f){if(p.relative){r+=h[c];s+=h[c+1]}else{r=h[c];s=h[c+1]}this._expandBoundingBoxCE(e,t,r,s,n,n)}break;case"bezier":var d=p.degree||2;for(c=0,u=h.length-1;c<u;c+=f){if(p.relative){this._expandBoundingBoxCE(e,t,r+h[c],s+h[c+1],n,n);if(c/f%d===d-1){r+=h[c];s+=h[c+1]}}else{r=h[c];s=h[c+1];this._expandBoundingBoxCE(e,t,r,s,n,n)}}break;default:break}}};function n(t,i){var n,r;var s=i.points;switch(i.degree||2){case 2:for(n=0,r=s.length-3;n<r;n+=4){t.push(i.relative?"q":"Q",s[n],s[n+1],s[n+2],s[n+3])}break;case 3:if(!i.smooth){for(n=0,r=s.length-5;n<r;n+=6){t.push(i.relative?"c":"C",s[n],s[n+1],s[n+2],s[n+3],s[n+4],s[n+5])}}else{for(n=0,r=s.length-3;n<r;n+=4){t.push(i.relative?"s":"S",s[n],s[n+1],s[n+2],s[n+3])}}break;default:e.warning("Unsupported bezier segment degree:",i.type);break}}function r(e,t){var i=t.points;e.push(t.relative?"m":"M",i[0],i[1]);var n=t.dimension||2;for(var r=n,s=i.length-1;r<s;r+=n){e.push(t.relative?"l":"L",i[r],i[r+1])}}function s(e,t){var i=t.points;var n=t.dimension||2;for(var r=0,s=i.length-1;r<s;r+=n){e.push(t.relative?"l":"L",i[r],i[r+1])}}function a(e,t){e.push(t.relative?"a":"A",t.major,t.minor,"0",t.short===false?"1":"0",t.clockwise===false?"0":"1",t.points[0],t.points[1])}i.prototype._setSpecificAttributes=function(t){var i=[];this.segments.forEach(function(t){switch(t.type){case"move":r(i,t);break;case"line":s(i,t);break;case"close":i.push("Z");break;case"arc":a(i,t);break;case"bezier":n(i,t);break;default:e.warning("Unsupported path segment type:",t.type,JSON.stringify(t));break}});if(i.length>0){t("d",i.join(" "))}};i.prototype._getParametricShape=function(e,i,n){var r=t.prototype._getParametricShape.call(this,e,i,n);r.type="path";r.segments=this.segments;return r};i.prototype.copy=function(e,i){t.prototype.copy.call(this,e,i);for(var n=0,r=e.segments.length;n<r;n++){var s=e.segments[n];var a={type:s.type};if(s.points!==undefined){a.points=s.points.slice()}if(s.dimension!==undefined){a.dimension=s.dimension}if(s.degree!==undefined){a.degree=s.degree}if(s.smooth!==undefined){a.smooth=s.smooth}if(s.relative!==undefined){a.relative=s.relative}if(s.major!==undefined){a.major=s.major}if(s.minor!==undefined){a.minor=s.minor}if(s.short!==undefined){a.short=s.short}if(s.clockwise!==undefined){a.clockwise=s.clockwise}this.segments.push(a)}return this};i._extractSegmentsFromDomRef=function(t){var i=[];var n=t.getAttribute("d").split(" ");var r=0;function s(){return n[r++]}function a(){return parseFloat(s())}for(var o=s();o!==undefined;o=s()){switch(o){case"M":i.push({type:"move",points:[a(),a()]});break;case"L":i.push({type:"line",points:[a(),a()]});break;case"Q":i.push({type:"bezier",degree:2,relative:false,points:[a(),a(),a(),a()]});break;case"Z":i.push({type:"close"});break;default:e.warning('Path.createFromDomRef: "'+o+'" path segment is not supported.');break}}return i};return i});