/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["../OrthographicCamera"],function(t){"use strict";var i=t.extend("sap.ui.vk.svg.OrthographicCamera",{metadata:{library:"sap.ui.vk"}});var o=t.getMetadata().getParent().getClass().prototype;i.prototype.init=function(){if(o.init){o.init.call(this)}this.zoom=1;this.offsetX=0;this.offsetY=0;this._width=0;this._height=0;this.zoomedObject=null};i._MIN_ZOOM=1e-15;i.prototype.update=function(t,o,h){if(this._width!==t||this._height!==o){if(this._width>0&&this._height>0){var s=Math.min(t,o)/Math.min(this._width,this._height);s=Math.max(s,i._MIN_ZOOM/this.zoom);this.zoom*=s;this.offsetX=(this.offsetX-this._width*.5)*s+t*.5;this.offsetY=(this.offsetY-this._height*.5)*s+o*.5}else{h=true}this._width=t;this._height=o;if(h){this.reset()}}};i.prototype.reset=function(){if(this._initialZoom){this.setZoomFactor(this._initialZoom)}if(this._initialPosition){this.setPosition(this._initialPosition)}};i.prototype._getViewBox=function(){var t=this.zoom>0?1/this.zoom:1;return[-this.offsetX*t,-this.offsetY*t,this._width*t,this._height*t]};i.prototype._setViewBox=function(t,o,h){this.zoom=Math.min(o,h)/Math.min(t[2],t[3]);this.zoom=Math.max(this.zoom,i._MIN_ZOOM);this.offsetX=o*.5-(t[0]+t[2]*.5)*this.zoom;this.offsetY=h*.5-(t[1]+t[3]*.5)*this.zoom;this._width=o;this._height=h};i.prototype._zoomTo=function(t,o,h,s){var e=Math.min(o/(t.max.x-t.min.x),h/(t.max.y-t.min.y))/(1+(s||0));e=Math.max(e,i._MIN_ZOOM);this.zoom=e;this.offsetX=(o-(t.min.x+t.max.x)*e)*.5;this.offsetY=(h-(t.min.y+t.max.y)*e)*.5;this._width=o;this._height=h};i.prototype._screenToWorld=function(t,i){return{x:(t-this.offsetX)/this.zoom,y:(i-this.offsetY)/this.zoom}};i.prototype._worldToScreen=function(t,i){return{x:t*this.zoom+this.offsetX,y:i*this.zoom+this.offsetY}};i.prototype._transformRect=function(t){var i=this._screenToWorld(t.x1,t.y1);var o=this._screenToWorld(t.x2,t.y2);return{x1:Math.min(i.x,o.x),y1:Math.min(i.y,o.y),x2:Math.max(i.x,o.x),y2:Math.max(i.y,o.y)}};i.prototype._getYSign=function(){return this.getUpDirection()[1]>=0?-1:1};i.prototype.getPosition=function(){var t=this.zoom>0?1/this.zoom:1;return[(this._width*.5-this.offsetX)*t,(this._height*.5-this.offsetY)*t*this._getYSign(),0]};i.prototype.setPosition=function(t){if(Array.isArray(t)&&t.length>=2){if(!this._initialPosition){this._initialPosition=t.slice()}if(this._width>0&&this._height>0){this.offsetX=this._width*.5-t[0]*this.zoom;this.offsetY=this._height*.5-t[1]*this._getYSign()*this.zoom}}};i.prototype.getZoomFactor=function(){var t=Math.min(this._width,this._height);if(t===0){return null}return this.zoom*2/t};i.prototype.setZoomFactor=function(t){if(this._initialZoom==null){this._initialZoom=t}if(this._width>0&&this._height>0){var o=t*.5*Math.min(this._width,this._height);o=Math.max(o,i._MIN_ZOOM);this.offsetX+=(this._width*.5-this.offsetX)*(this.zoom-o)/this.zoom;this.offsetY+=(this._height*.5-this.offsetY)*(this.zoom-o)/this.zoom;this.zoom=o}};return i});