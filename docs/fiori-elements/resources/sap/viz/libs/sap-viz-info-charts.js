/* SAP CVOM 4.0 Â© <2012-2014> SAP SE. All rights reserved. Build Version 7.34.1-SNAPSHOT, Build Context N/A */
sap.viz.extapi.env.Language.register({id:"language",value:{IDS_MULTIDUALLINECHART:"Multiple Line Chart with 2 Y-Axes",IDS_BASESINGLECHART:"Base Single Chart",IDS_TRELLISCOMBINATIONEXCHART:"Trellis Combination Chart",IDS_HORIZONTALAREACHART:"Horizontal Area Chart",IDS_BULLETFORECASTVALUES:"Forecast Values",IDS_TRELLISPERCENTAGEHORIZONTALAREACHART:"Trellis 100% Horizontal Area Chart",IDS_ANIMATION:"animation",IDS_COLORING_TYPE_POSITIVE:"Good",IDS_INVALID_DATE:"Invalid date",IDS_ITEM_SELECTED:"item selected",IDS_GRIDVISIBLE:"gridVisible",IDS_MULTIHORIZONTALAREACHART:"Multiple Horizontal Area Chart",IDS_ENABLEROUNDCORNER:"enableRoundCorner",IDS_TREECHART:"Tree",IDS_TRELLISHORIZONTALLINECHART:"Trellis Horizontal Line Chart",IDS_MULTISTACKEDBARCHART:"Multiple Stacked Bar Chart",IDS_RADARAXESVALUE:"Radar Axes Values",IDS_MULTIPIEWITHDEPTHCHART:"Multiple Pie with Depth Chart",IDS_PIESECTORCOLORNAME:"Sector Color",IDS_TRELLISBARCHART:"Trellis Bar Chart",IDS_TRELLISDUALPERCENTAGESTACKEDBARCHART:"Trellis 100% Stacked Bar Chart with 2 X-Axes",IDS_TIMEVALUEBUBBLECHART:"Time Bubble Chart",IDS_FORMAT:"Format",IDS_SECONDARYAXISLABELNAME:"Secondary Category Axis",IDS_LABEL:"Label",IDS_TRELLISPERCENTAGESTACKEDBARCHART:"Trellis 100% Stacked Bar Chart",IDS_DATA_FRAME:"Data Frame",IDS_SECONDARYVALUES:"Secondary Values",IDS_SEMANTIC_DEFAULT_TITLE:"Semantic Rules",IDS_TIMEBUBBLECHART:"Time Bubble Chart",IDS_COLORING_TYPE_NEUTRAL:"Neutral",IDS_MULTIPIECHART:"Multiple Pie Chart",IDS_NETLINK:"Network Link",IDS_VARIANTBARCHART:"Variant Bar Chart (POC)",IDS_MULTISTACKEDVERTICALBARCHART:"Multiple Stacked Column Chart",IDS_TRELLISAREACHART:"Trellis Area Chart",IDS_MULTIVERTICALBARCHART:"Multiple Column Chart",IDS_INCREASING:"Increasing",IDS_MULTIPERCENTAGESTACKEDBARCHART:"Multiple 100% Stacked Bar Chart",IDS_STACKEDVERTICALBARCHART:"Stacked Column Chart",IDS_VALUE_AXIS:"Value Axis",IDS_ABOVE_IS_GOOD:"Above is Good",IDS_TIMESERIESCOLUMNCHART:"Column Chart for Date/Time Series",IDS_MULTIDUALSTACKEDVERTICALBARCHART:"Multiple Stacked Column Chart with 2 Y-Axes",IDS_TRELLISHORIZONTALCOMBINATIONCHART:"Trellis Combined Bar Line Chart",IDS_SCATTERMATRIXCHART:"Scatter Matrix Chart",IDS_ENDCOLUMN:"endColumn",IDS_DUALSTACKEDVERTICALBARCHART:"Stacked Column Chart with 2 Y-Axes",IDS_DEFAULTMND:"All Measures",IDS_VALUE_SELECTED:"value selected",IDS_MARKERS:"Markers",IDS_TAGFAMILY:"Tags Family",IDS_POSITIVE_INFINITY:"+Infinity",IDS_PRIMARYVALUES:"Primary Values",IDS_DONUTWITHDEPTHCHART:"Doughnut with Depth Chart",IDS_LEGEND_TITLE:"Title of Legend",IDS_TREENODE:"Tree Node",IDS_VERTICALBULLETCHART:"Vertical Bullet Chart",IDS_FISCALPERIOD:"Fiscal Period",IDS_CATEGORY_AXIS2:"Category Axis 2",IDS_MULTIDUALHORIZONTALLINECHART:"Multiple Horizontal Line Chart with 2 X-Axes",IDS_MULTIDUALPERCENTAGESTACKEDVERTICALBARCHART:"Multiple 100% Stacked Column Chart with 2 Y-Axes",IDS_TRELLISBULLETCHART:"Trellis Bullet Chart",IDS_MULTIDONUTWITHDEPTHCHART:"Multiple Doughnut with Depth Chart",IDS_AUTOBINNINGOTHERS:"Others",IDS_PIESECTORSIZE:"Sector Size",IDS_COMBINATIONCHART:"Combined Column Line Chart",IDS_COLORING_TYPE_OTHER:"Other",IDS_COLUMNCONFIG:"columnConfig",IDS_MULTIDUALBARCHART:"Multiple Bar Chart with 2 X-Axes",IDS_TAGNAME:"Tags Name",IDS_TYPE:"Type",IDS_STARTCOLOR:"startcolor",IDS_PERCENTAGESTACKEDBARCHART:"100% Stacked Bar Chart",IDS_STARTCOLUMN:"startColumn",IDS_DUALHORIZONTALLINECHART:"Horizontal Line Chart with 2 X-Axes",IDS_NUMBERCHART_VALUE:"Value",IDS_SHAPE:"Shape",IDS_TRELLISSTACKEDCOLUMNCHART:"Trellis Stacked Column Chart",IDS_VERTICALBOXPLOTCHART:"Box Plot",IDS_BASEHORIZONTALCHART:"Base horizontal XY Chart",IDS_SCATTERCHART:"Scatter Plot",IDS_TOOLTIPVISIBLE:"tooltipVisible",IDS_PERCENTAGEAREACHART:"100% Area Chart",IDS_WATERFALLTYPE:"Waterfall Type",IDS_SEMANTICCOLOROTHERS:"Others",IDS_HORIZONTALCOMBINATIONCHART:"Combined Bar Line Chart",IDS_REGIONCOLOR:"Region Color",IDS_BORDER:"Border",IDS_ITEMS_SELECTED:"items selected",IDS_TRENDLINE_LINEAR:"Linear Regression",IDS_MULTIPERCENTAGEAREACHART:"Multiple 100% Area Chart",IDS_REFERENCEVALUES:"Reference Values",IDS_WATERFALLCHART:"Waterfall Chart",IDS_TRELLISHORIZONTALAREACHART:"Trellis Horizontal Area Chart",IDS_HORIZONTALSTACKEDWATERFALL:"Horizontal Stacked Waterfall Chart",IDS_STACKEDWATERFALLCHART:"Stacked Waterfall Chart",IDS_DUALTIMESERIESCOMBINATIONCHART:"Combined Column Line Chart for Date/Time Series with 2 Y-Axes",IDS_VISIBLE:"visible",IDS_GRIDLINE:"Gridline",IDS_BULLETADDITIONALVALUES:"Additional Values",IDS_SECONDARYVALUESCOLORPALETTE:"secondaryValuesColorPalette",IDS_SIZE:"size",IDS_MULTIBARCHART:"Multiple Bar Chart",IDS_DUALPERCENTAGESTACKEDVERTICALBARCHART:"100% Stacked Column Chart with 2 Y-Axes",IDS_TRELLISSCATTERCHART:"Trellis Scatter Chart",IDS_TARGET:"Target",ID_FORECAST_VALUES:"Forecast Values",IDS_TAGCLOUDCHART:"Tag Cloud",IDS_TIMESERIESBUBBLECHART:"Bubble Chart for Date/Time Series",IDS_LOWCOLUMN:"lowColumn",IDS_TARGETVALUES:"Target Values",IDS_MULTIBUBBLECHART:"Multiple Bubble Chart",IDS_FILLVISIBLE:"fillVisible",IDS_TRELLISDUALPERCENTAGESTACKEDCOLUMNCHART:"Trellis 100% Stacked Column Chart with 2 Y-Axes",IDS_END_OF_PERIOD:"End of Period",IDS_STACKEDBARCHART:"Stacked Bar Chart",IDS_PIECHART:"Pie Chart",IDS_VERTICALBARCHART:"Column Chart",IDS_TIME_FROM:"From",IDS_SPARKLINECHART:"Spark Line Chart (POC)",IDS_TRELLISPERCENTAGESTACKEDCOLUMNCHART:"Trellis 100% Stacked Column Chart",IDS_ISNOVALUE:"No value",IDS_BUBBLEWIDTH:"Bubble Width",IDS_BUBBLESIZE:"Bubble Size",IDS_TIMESERIESSCATTERCHART:"Scatter Plot for Date/Time Series",IDS_HORIZONTALWATERFALLCHART:"Horizontal Waterfall Chart",IDS_TIMESERIESSTACKEDCOMBINATIONCHART:"Combined Stacked Line Chart for Date/Time Series",IDS_VALUEFORMAT:"valueFormat",IDS_PIEWITHDEPTHCHART:"Pie with Depth Chart",IDS_BASEBUBBLECHART:"Base Scatter Chart",IDS_REFINEVISIBLE:"reflineVisible",IDS_TRELLISSTACKEDBARCHART:"Trellis Stacked Bar Chart",IDS_DUALLINECHART:"Line Chart with 2 Y-Axes",IDS_BULLETACTUALVALUES:"Actual Values",IDS_HEATMAPCHART:"Heat Map",IDS_BELOW_IS_BAD:"Below is Bad",IDS_WIDTH:"Width",IDS_MEKKOCHART:"Marimekko chart",IDS_HOVERLINEVISIBLE:"hoverlineVisible",IDS_COMBINATIONEXCHART:"Combination Chart",IDS_HORIZONTALMEKKOCHART:"Horizontal Marimekko Chart",IDS_BUBBLECHART:"Bubble Chart",IDS_BASEMULTIPLEXYCHART:"Base Multiple XY Chart",IDS_TRELLISRADARCHART:"Trellis Radar Chart",IDS_TRELLISVERTICALBULLETCHART:"Trellis Vertical Bullet Chart",IDS_HEADERVISIBLE:"headerVisible",IDS_FISCALYEAR:"Fiscal Year",IDS_LINECHART:"Line Chart",IDS_BUBBLEHEIGHT:"Bubble Height",IDS_NUMBERCHART:"Numeric Point",IDS_PERCENTAGEHORIZONTALMEKKOCHART:"100% Horizontal Marimekko Chart",IDS_PERCENTAGESTACKEDVERTICALBARCHART:"100% Stacked Column Chart",IDS_MARKER:"Marker",IDS_BASEVERTICALCHART:"Base Vertical XY Chart",IDS_SEMANTICTOTAL:"Total",IDS_DIUALLINECHART:"Line Chart with 2 Y-Axes",IDS_TRELLIS_COLUMN:"Trellis Column",IDS_BASEMULTIPLECHART:"Base Multiple Chart",IDS_PERCENTAGEMEKKOCHART:"100% Marimekko Chart",IDS_MULTIDUALVERTICALBARCHART:"Multiple Column Chart with 2 Y-Axes",IDS_DUALCOMBINATIONCHART:"Combined Column Line Chart with 2 Y-Axes",IDS_RADARCHART:"Radar Chart",IDS_TRELLISCOMBINATIONCHART:"Trellis Combined Column Line Chart",IDS_DUALSTACKEDBARCHART:"Stacked Bar Chart with 2 X-Axes",IDS_TRELLISPERCENTAGEAREACHART:"Trellis 100% Area Chart",IDS_SELECTABILITY:"Selectability",IDS_AXISVISIBLE:"axisVisible",IDS_TRELLISDUALSTACKEDCOLUMNCHART:"Trellis Stacked Column Chart with 2 Y-Axes",IDS_DEFAULTCHARTTITLE:"Title of Chart",IDS_ERROR_INVALIDE_DATA_MULTIPLEUNITS:"Some measures have different units.",IDS_MULTIPERCENTAGESTACKEDVERTICALBARCHART:"Multiple 100% Stacked Column Chart",IDS_AXISLABELS:"Axis Labels",IDS_MULTIDUALSTACKEDBARCHART:"Multiple Stacked Bar Chart with 2 X-Axes",IDS_MULTIRADARCHART:"Multiple Radar Chart",IDS_COLORING_TYPE_CRITICAL:"Warning",IDS_TRELLIS_ROW:"Trellis Row",IDS_TIMESERIESBULLETCHART:"Bullet Chart for Date/Time Series",IDS_MULTILINECHART:"Multiple Line Chart",IDS_BARCHART:"Bar Chart",IDS_3D_BAR:"3D Bar Chart",IDS_TRELLISCOLUMNCHART:"Trellis Column Chart",IDS_DATAUPDATING:"dataUpdating",IDS_3D_COLUMN:"3D Column Chart",IDS_TRELLISPIECHART:"Trellis Pie Chart",IDS_NETWORKCHART:"Network Chart",IDS_HORIZONTALLINECHART:"Horizontal Line Chart",IDS_DUALVERTICALBARCHART:"Column Chart with 2 Y-Axes",IDS_DECREASING:"Decreasing",IDS_RECTANGLEWEIGHT:"Rectangle Weight",IDS_PIEDEPTHSIZE:"Depth Size",IDS_MULTIHORIZONTALLINECHART:"Multiple Horizontal Line Chart",IDS_DUALHORIZONTALSTACKEDCOMBINATIONCHART:"Horizontal Combined Stacked Line Chart with 2 X-Axes",IDS_COLOR:"color",IDS_TEXT:"Text",IDS_DUALBARCHART:"Bar Chart with 2 X-Axes",IDS_DATALOADING:"dataLoading",IDS_TRELLISLINECHART:"Trellis Line Chart",IDS_LINECONFIG:"lineConfig",IDS_BASECHART:"Base Chart",IDS_TRELLISDUALCOLUMNCHART:"Trellis Column Chart with 2 Y-Axes",IDS_HORIZONTALBOXPLOTCHART:"Horizontal Box Plot",IDS_VALUES_SELECTED:"values selected",IDS_PRIMARYVALUECOLORPALETTE:"primaryValuesColorPalette",IDS_DUALHORIZONTALCOMBINATIONCHART:"Combined Bar Line Chart with 2 X-Axes",IDS_TRELLISDONUTCHART:"Trellis Doughnut Chart",IDS_HIGHCOLUMN:"highColumn",IDS_PERCENTAGEHORIZONTALAREACHART:"100% Horizontal Area Chart",IDS_TREEMAPCHART:"Tree Map",IDS_TIMESERIESPERCENTSTACKEDCOLUMNCHART:"100% Stacked Column Chart for Date/Time Series",IDS_MULTISCATTERCHART:"Multiple Scatter Plot",IDS_TIMELINECHART:"Line Chart for Date/Time Series",IDS_SEMANTICCOLORRANGE:"Semantic Range",IDS_MODE:"Mode",IDS_TIME_TO:"To",IDS_TRELLISDUALLINECHART:"Trellis Line Chart with 2 Y-Axes",IDS_COLORING_TYPE_NEGATIVE:"Bad",IDS_BULLETCHART:"Bullet Chart",IDS_AREACHART:"Area Chart",IDS_TIMESERIESCOMBINATIONCHART:"Combined Column Line Chart for Date/Time Series",IDS_FORECAST_VALUES:"Forecast Values",IDS_LINE:"Line",IDS_CATEGORY_AXIS:"Category Axis",IDS_ENDCOLOR:"endcolor",IDS_TIMESERIESSTACKEDCOLUMNCHART:"Stacked Column Chart for Date/Time Series",IDS_DUALPERCENTAGESTACKEDBARCHART:"100% Stacked Bar Chart with 2 X-Axes",IDS_VALUE_AXIS2:"Value Axis 2",IDS_WEIGHT:"weight",IDS_REGIONSHAPE:"Region Shape",IDS_DONUTCHART:"Donut Chart",IDS_TITLE:"Title",IDS_CURRENT_SELECTION:"Current Selection",IDS_TIMESERIESWATERFALLCHART:"Waterfall Chart for Date/Time Series",IDS_MULTIPERCENTAGEHORIZONTALAREACHART:"Multiple 100% Horizontal Area Chart",IDS_RECTANGLECOLOR:"Rectangle Color",IDS_CATEGORYAXIS:"Axis Labels Category",IDS_COLUMNSEQUENCE:"columnSequence",IDS_MAINLABELAXISNAME:"Main Category Axis",IDS_RADARAXES:"Radar Axes",IDS_DAY:"Day",IDS_HORIZONTALSTACKEDCOMBINATIONCHART:"Horizontal Combined Stacked Line Chart",IDS_PERCENTAGEDONUTCHART:"100% Donut Chart",IDS_SHOWFIRSTLINE:"showFirstLine",IDS_DRAWINGEFFECT:"drawingEffect",IDS_MULTIDUALPERCENTAGESTACKEDBARCHART:"Multiple 100% Stacked Bar Chart with 2 X-Axes",IDS_TRELLISBUBBLECHART:"Trellis Bubble Chart",IDS_TRELLISDUALBARCHART:"Trellis Bar Chart with 2 X-Axes",IDS_TRELLISDUALHORIZONTALLINECHART:"Trellis Horizontal Line Chart with 2 X-Axes",IDS_BAR:"Bar",IDS_TAGWEIGHT:"Tags Weight",IDS_POSITION:"Position",IDS_STACKEDCOMBINATIONCHART:"Combined Stacked Line Chart",IDS_TRELLISDUALSTACKEDBARCHART:"Trellis Stacked Bar Chart with 2 X-Axes",IDS_NEGATIVE_INFINITY:"-Infinity",IDS_MULTIAREACHART:"Multiple Area Chart",IDS_DUALSTACKEDCOMBINATIONCHART:"Combined Stacked Line Chart with 2 Y-Axes",IDS_MULTIDONUTCHART:"Multiple Doughnut Chart",IDS_RECTANGLETITLE:"Rectangle Title"}});(function(e){sap.viz.moduleloader.originalDefine=e.define;sap.viz.moduleloader.originalRequire=e.require;sap.viz.moduleloader.originalRequirejs=e.requirejs;e.define=sap.viz.moduleloader.define;e.require=sap.viz.moduleloader.require.config({context:"info"});e.requirejs=require})(this);define("sap/viz/chart/layout/BaseLayout",["sap/viz/framework/property/PropertyManager"],function(e){function t(t){this.config=new e;this.config.add({container:t,totalWidth:0,totalHeight:0})}var i=t.prototype;i.layout=function(e){};i._dictToArray=function(e){var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(e[i])}}return t};i.destroy=function(){this.config.destroy();this.config=null};return t});define("sap/viz/chart/layout/DockLayout",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/layout/BaseLayout"],function(e,t,i,a,r,o){var n=function(){n.superclass.constructor.apply(this,arguments);this.config.add({padding:null,paddingLeft:null,paddingRight:null,paddingTop:null,paddingBottom:null,isTrellis:false})};e.extend(n,o);n.Position={top:"top",bottom:"bottom",left:"left",right:"right"};var l=108;var s=5;var u=0;var c=t.AXIS.FIX_SPACING_MAX_IN_PX;var h=t.TITLE.FIX_SPACING_MAX_IN_PX;function p(e,t,i,a){var r=t.minWidth||0;var o=t.minHeight||0;if(e.width<r||e.height<o){return false}if(t.width&&t.height){if(t.width<t.minWidth||t.height<t.minHeight){return false}}if(a===false&&i.maxWidth&&i.maxWidth<t.minWidth){return false}if(a===true&&i.maxHeight&&i.maxHeight<t.minHeight){return false}return true}function d(e,t,i){var r={};if(i==null){return r}[{d:"width",md:"maxWidth",pd:e},{d:"height",md:"maxHeight",pd:t}].forEach(function(e){var t,o;t=parseFloat(i[e.d])>=0&&a.getSizeValue(i[e.d],e.pd);o=a.getSizeValue(i[e.md],e.pd);if(t>o){r[e.md]=t}else if(i[e.md]){r[e.md]=o}});return r}function f(e,i,r){var o=a.getPositiveInt;var n=t.PADDING.DEFAULT;if(n<1&&n>0){n=n*Math.min(i,r)}var u=o(e.get("padding"),n);var c=o(e.get("paddingTop"),u);var h=o(e.get("paddingRight"),u);var p=o(e.get("paddingBottom"),u);var d=o(e.get("paddingLeft"),u);var f=e.get("isFixedPadding");if(!f&&(i<=l||r<=l)){c=Math.min(s,c);h=Math.min(s,h);p=Math.min(s,p);d=Math.min(s,d);e.set("paddingTop",c);e.set("paddingRight",h);e.set("paddingBottom",p);e.set("paddingLeft",d)}return{paddingTop:c,paddingRight:h,paddingBottom:p,paddingLeft:d}}function v(e){return e.option.spacing}n.prototype.layout=function(e,t){var i=this.config;var o=i.get("totalWidth");var l=i.get("totalHeight");var s=i.get("isFixedPadding");var g=v;var m=f(i,o,l);var y={x:m.paddingLeft,y:m.paddingTop,width:o-(m.paddingLeft+m.paddingRight)>0?o-(m.paddingLeft+m.paddingRight):u,height:l-(m.paddingTop+m.paddingBottom)>0?l-(m.paddingTop+m.paddingBottom):u};var _=y.width;var A=y.height;var b=this._dictToArray(e);b.sort(function(e,t){return e.option.priority-t.option.priority});var x={};var S=i.get("isTrellis");var D=function(e){if(e.width<1){e.width=0}if(e.height<1){e.height=0}};for(var w=0;w<b.length;w++){var C=b[w];var T=C.option;var z=C.module;var L=d(_,A,T);var P=r.isHorizontal(T.position);var k=(P?parseFloat(T.height)>=0:parseFloat(T.width)>=0)&&C.module.properties().visible===true;if(T&&T.position){var E,I;var O=g(C);if(O){E=O.spacingWithMainToRough||0;I=O.spacingMaxInPX||0}else{E=0;I=0}if(k){y.maxWidth=a.getSizeValue(T.width,y.width-Math.min(E*y.width,I));y.maxHeight=a.getSizeValue(T.height,y.height-(z.alias==="title"?0:Math.min(E*y.height,I)))}var R=z.getPreferredSize(y,S,k,t);if(!k&&!p(y,R,L,P)){x[z.alias]={x:0,y:0,width:0,height:0};continue}var N={width:k?a.getSizeValue(T.width,y.width-Math.min(E*y.width,I)):R.width,height:k?a.getSizeValue(T.height,y.height-(z.alias==="title"?0:Math.min(E*y.height,I))):R.height};if(P){if(R.maxSize&&R.maxSize.width<y.width){N.actualWidth=R.maxSize.width}N.width=y.width;if(L.maxHeight&&L.maxHeight<N.height){N.height=L.maxHeight}}else{if(R.maxSize&&R.maxSize.height<y.height){N.actualHeight=R.maxSize.height}N.height=y.height;if(L.maxWidth&&L.maxWidth<N.width){N.width=L.maxWidth}}if(!k&&(N.width===0||N.height===0)){E=0;I=0}var M=T.position;if(n.Position[M]===undefined){if(T.defaultPosition){M=T.defaultPosition}}var B=0;var V=s&&N.width!==0&&N.height!==0;if(M===n.Position.top){B=V?h:k&&z.alias==="title"?0:Math.min(E*y.height,I);N.x=y.x;N.y=y.y;y.y+=N.height+B;y.height-=N.height+B}else if(M===n.Position.bottom){B=V?h:k&&z.alias==="title"?0:Math.min(E*y.height,I);y.height-=N.height;N.x=y.x;N.y=y.y+y.height;if(s&&z.alias==="legendGroup"){B=c}y.height-=B;if(y.height<0){y.height=0}}else if(M===n.Position.left){B=V?h:Math.min(E*y.width,I);N.x=y.x;N.y=y.y;y.x+=N.width+B;y.width-=N.width+B}else if(M===n.Position.right){B=V?h:Math.min(E*y.width,I);y.width-=N.width;N.x=y.x+y.width;N.y=y.y;y.width-=B;if(y.width<0){y.width=0}}x[z.alias]=N;if(k){D(y);if(!p(N,R,L,P)){x[z.alias]={x:x[z.alias].x?x[z.alias].x:0,y:x[z.alias].y?x[z.alias].y:0,width:0,height:0}}}}else{x[z.alias]={x:y.x,y:y.y,width:y.width,height:y.height}}}return x};return n});define("sap/viz/chart/layout/GridLayout",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/layout/DockLayout"],function(e,t,i,a,r,o){var n=function(){n.superclass.constructor.apply(this,arguments);this.config.add({legendGroup:{layout:{respectPlotPosition:true,alignment:"topLeft"}},title:{layout:{respectPlotPosition:true}}})};e.extend(n,o);n.prototype.layout=function(e,i){var a=o.Position;var r=n.superclass.layout.call(this,e,i);var l=this._getCenterModuleKey(e,a);if(l==null){for(var s in e){if(e.hasOwnProperty(s)){var u=e[s].module;u.setSize(r[s]);if(u.layout){u.layout()}}}return r}var c=r[l];var h=e[l].module;h.setSize(c);if(h.layout){h.layout(i,c)}var p=c.x;var d=c.y;var f=c.width;var v=c.height;if(h.getPlotPosition){var g=h.getPlotPosition();p+=g.x;f=g.width;d+=g.y;v=g.height}for(var m in e){if(e.hasOwnProperty(m)){if(m===l){continue}var y=e[m].option;var _=y.position||y.defaultPosition;if((m!==t.LEGEND_GROUP.KEY||this.config.get("legendGroup.layout.respectPlotPosition"))&&(m!==t.TITLE.KEY||this.config.get("title.layout.respectPlotPosition"))){if(_==="top"||_==="bottom"){r[m].x=p;r[m].width=f}else if(_==="left"||_==="right"){r[m].y=d;r[m].height=v}}if(m===t.LEGEND_GROUP.KEY&&this.config.get("legendGroup.layout.alignment")==="center"){if((_==="left"||_==="right")&&r[m].actualHeight&&r[m].actualHeight<r[m].height){r[m].y+=(r[m].height-r[m].actualHeight)/2}else if((_==="top"||_==="bottom")&&r[m].actualWidth&&r[m].actualWidth<r[m].width){r[m].x+=(r[m].width-r[m].actualWidth)/2}}if(m===t.LEGEND_GROUP.KEY&&i.isRTL&&this.config.get("legendGroup.layout.alignment")==="topLeft"&&(_==="top"||_==="bottom")){var A=r[m].width-r[m].actualWidth;if(A>0){r[m].x+=A}}var b=e[m].module;b.setSize(r[m]);if(b.layout){b.layout()}}}return r};n.prototype._getCenterModuleKey=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){var a=e[i].option;var r=a.position||a.defaultPosition;if(t[r]==null){return i}}}return null};return n});define("sap/viz/chart/components/UIComponent",["sap/viz/framework/common/util/EventDispatch","sap/viz/framework/core/Runtime","sap/viz/framework/property/PropertyManager"],function e(t,i,a){var r=function(e,a){a=a||{};this._options=a;this._name=a.name?a.name:null;this._eventDispatch=new t;this._data=null;this.alias=a.alias||null;this._renderTo="SVG";this._size={width:0,height:0};this._realSize={width:0,height:0};this._runtime=e?e:i._create(a);var r=a.properties||this._runtime._propertyMgr;this._properties=this._name?r.proxy(this._name):r;if(e==null){this._addDefaultProperties()}};r.prototype._isRTL=function(){var e=false;var t=this._runtime.envManager();if(t){e=t.isRTL()}return e};r.prototype.properties=function(e){if(arguments.length===0||typeof e==="string"){return this._properties.get(e)}this._properties.set(e)};r.prototype.runtime=function(){return this._runtime};r.prototype.isVisible=function(){return true};r.prototype.getName=function(){return this._name};r.prototype.setData=function(e){this._data=e;return this};r.prototype.getData=function(){return this._data};r.prototype.renderTo=function(e){if(arguments.length){this._renderTo=e;return this}return this._renderTo};r.prototype.setSize=function(e){if(e.width!=null){this._size.width=e.width;this._realSize.width=e.width}if(e.height!=null){this._size.height=e.height;this._realSize.height=e.height}return this};r.prototype.getSize=function(){return{height:this._size.height,width:this._size.width}};r.prototype.clearSize=function(){this._size.height=0;this._size.width=0;return this};r.prototype.setRealSize=function(e){if(e.width!=null){this._realSize.width=e.width}if(e.height!=null){this._realSize.height=e.height}return this};r.prototype.getPreferredSize=function(e){};r.prototype.render=function(e){};r.prototype.getDispatch=function(){return this._eventDispatch};r.prototype.destroy=function(){if(this._eventDispatch){this._eventDispatch.destroy()}this._runtime=null;this._eventDispatch=null;this._data=null;if(this._properties&&this._properties.origin!=this._properties){this._properties.destroy()}this._properties=null;this._size=null;this._name=null;this._options=null;this._renderTo=null;this._realSize=null;this.alias=null};r.prototype._exposeMoreEvents=function(){this._eventDispatch.addEventTypes.apply(this._eventDispatch,arguments);return this};r.prototype._addDefaultProperties=function(){};r.prototype.statusChanged=function(e){};return r});define("sap/viz/chart/components/util/BoundUtil",[],function e(){var t="v-bound";var i={drawBound:function(e,i,a,r,o){var n;if(i<0||a<0){return null}if(e.select("."+t).node()==null){n=e.insert("rect",":first-child").attr("class",t).attr("width",i).attr("height",a);if(o){n.attr("fill","transparent")}else{n.attr("visibility","hidden")}}else{n=e.select("."+t).attr("width",i).attr("height",a)}if(r){for(var l in r){if(r.hasOwnProperty(l)){n.attr(l,r[l])}}}return n}};return i});define("sap/viz/chart/components/util/StyleUtils",[],function(){var e={color:"fill",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",letterSpacing:"letter-spacing",fontStyle:"font-style"};var t={};t.convertToCss=function(t){var i=[];for(var a in e){if(t[a]!=null){i.push(e[a]+":"+t[a])}}return i.join(";")};t.buildParentStyle=function(e,t){var i={};var a;for(a in e){if(e.hasOwnProperty(a)){i[a]=t&&t[a]||e[a]}}return i};return t});define("sap/viz/chart/components/util/TextUtils",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/GeometryUtils","sap/viz/chart/components/util/StyleUtils"],function e(t,i,a,r,o){var n="http://www.w3.org/2000/svg";var l;var s;var u;var c;var h;var p;var d=["font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","letter-spacing","word-spacing","alignment-baseline","baseline-shift","dominant-baseline"];var f={};var v=[];var g={};var m={};var y=[];var _={};function A(){var e=document.body.appendChild(document.createElementNS(n,"svg"));e.style.cssText="position:absolute;top:-1000px;z-index:-9000;width:1px;height:1px";return e}function b(){if(!l){if(!s){s=A()}l=s.appendChild(document.createElementNS(n,"text"))}return l}function x(e,i){var r=b();if(!i){r.removeAttribute("style")}else{if(!t.isString(i)){var o=a.isIE()?i.ownerSVGElement.getComputedStyle(i):window.getComputedStyle(i);var n="";d.forEach(function(e){var t=o.getPropertyValue(e);if(t!==null){n+=e+":"+t+";"}});i=n}r.style.cssText=i}if(e===undefined||e===null){e=""}r.textContent=e;return r}function S(e){var t=e.textContent;if(t.substr(t.length-1,1)===" "){var i="M";e.textContent=i;var a=e.getComputedTextLength();e.textContent=t+i;var r=e.getComputedTextLength();var o=r-a;e.textContent=t;return o}else{return e.getComputedTextLength()}}function D(e,t){return a.isIE()&&(t<=0||e.getSubStringLength(0,t-1)<e.getSubStringLength(0,t))}function w(e,t,i,a,r,o,n,l){l=l||"";var s={};var u=0;s.realLength=0;var c="";var h;if(e){h=e.toString();c=h+l}function p(){if(t){t.textContent=""}s.text=""}if(i<=0){p();return s}var d,f;d=r?b():x(c,a||t);f=n?d.getBoundingClientRect().width:S(d);if(f<=i){if(t){t.textContent=c}s.text=c;s.realLength=f;return s}var v="..."+a;if(!y[v]){d.textContent="...";y[v]=n?d.getBoundingClientRect().width:S(d)}else{if(c.length>3){if(i<y[v]/3*4){p();return s}}else if(i<y[v]/3*c.length){p();return s}}u=y[v];i-=u;d.textContent=c;var g;var m=false;if(i>0){var _=c.length;var A=l&&l.length||0;g=Math.ceil(i/f*_)-A;var w;if(!D(d,g)||l){d.textContent=e.toString().substring(0,g)+l;w=n?d.getBoundingClientRect().width:S(d)}else{w=d.getSubStringLength(0,g)}var C=w;var z=w<=i;var L=z?+1:-1;while(0<g&&g<=_){C=T(z,h,l,g,d,t,s,a,i,o,n,u,C);if(C===-1){m=true;break}g+=L}}if(!m){p()}return s}function C(e){if(t.isExist(e)){var i=e[e.length-1]===" ";while(i){e=e.substring(0,e.length-1);i=e[e.length-1]===" "}}return e}function T(e,t,i,a,r,o,n,l,s,u,c,h,p){var d=t.substring(0,a)+i;var f,v;if(!D(r,a)||i){r.textContent=d;f=c?r.getBoundingClientRect().width:S(r)}else{f=r.getSubStringLength(0,a)}if(e&&f>s||!e&&f<=s){d=e?t.substring(0,a-1):t.substring(0,a);var g=false;if(c){var m=C(d);d=m.substring(0,m.length-1);g=d.length===0}if(u){v=g?"":i+"..."+d}else{v=g?"":d+"..."+i}if(o){o.textContent=v;o.appendChild(document.createElementNS(o.namespaceURI,"title")).textContent=t+i}n.text=v;n.realLength=(e?p:f)+h;return-1}return f}function z(e){var t={};var i=[];e.forEach(function(e){if(!t[e]){t[e]=true;i.push(e)}});return i}function L(e){if("[]\\^$.|?*+(){}".split("").indexOf(e)>-1){return"\\"+e}else{return e}}function P(e,t){if(e==null||e===""){return e}var i=z(e.split(""));var a="["+i.map(L).join("")+"]+";var r=true;if(t==="start"){a="^"+a;r=false}else if(t==="end"){a=a+"$";r=false}return r?new RegExp(a,"g"):new RegExp(a)}function k(e){return P(e.join(""))}return{measure:function(e,t){if(e===""){return{width:0,height:0,x:0,y:0}}var i=r.getBBox(x(e,t));return{width:i.width,height:i.height,x:i.x,y:i.y}},measureInCanvas:function(e,t,a,r){if(!r||!t||!a){return}var o=0;if(!u){u=document.createElement("canvas");u.style.cssText="position:absolute;top:-1000px;z-index:-9000;width:0px;height:0px;visibility:hidden";document.body.appendChild(u)}if(u.getContext){if(!c){c=u.getContext("2d")}var n=a+" "+t+" "+r;if(h!=n){h=n;c.font=n}o=c.measureText(e).width}if(!g[t]){g[t]=i.preciseSimple(parseFloat(t)*1.2)}var l=g[t];return{width:o,height:l}},fastMeasure:function(e,t,i,a,r,o){var n=e+t+i+a+r;if(o){n+=o}var l=f[n];if(!l){var s="font-size:"+t+"; font-weight:"+i+"; font-family:"+a+"; letter-spacing:"+r;if(o){s=s+"; font-style: "+o}f[n]=this.measure(e,s);l=f[n]}return{width:l.width,height:l.height,x:l.x,y:l.y}},bestMeasureFun:function(e,t,i,a){if(!p){var r;var o=100;var n="Test";var l=(new Date).getTime();for(r=0;r<o;r++){this.measureInCanvas(n,e,t,i)}var s=(new Date).getTime();var u=s-l;var c=(new Date).getTime();for(r=0;r<o;r++){this.measure(n,"font-size:"+e+"; font-weight:"+t+"; font-family:"+i+"; letter-spacing:"+a)}var h=(new Date).getTime();var d=h-c;if(u<d){p="C"}else{p="M"}}return p},superFastMeasure:function(e,t,i,a){var r,o,n,l,s;if(arguments.length===2){s=this.parseStyle(t);o=s.FontSize;n=s.FontWeight;l=s.FontFamily}else if(arguments.length===4){o=t;n=i;l=a}r=e+o+n+l;var u=v[r];if(!u){if(this.bestMeasureFun(o,n,l)==="C"){v[r]=this.measureInCanvas(e,o,n,l)}else{v[r]=this.measure(e,"font-size:"+o+"; font-weight:"+n+"; font-family:"+l)}u=v[r]}return u},canvasMeasure:function(e,t,i,a,r){var o,n,l,s,u,c;if(arguments.length===2){c=this.parseStyle(t);n=c.FontSize;l=c.FontWeight;s=c.FontFamily;u=c.LetterSpacing}else{n=t;l=i;s=a;if(r!==undefined&&r!==null){u=r}}n=n.toString();var h=n[n.length-1];if(!isNaN(parseFloat(h))){n+="px"}if(u!==undefined&&u!==null){u=u.toString();h=u[u.length-1];if(!isNaN(parseFloat(h))){u+="px"}}o=e+n+l+s;if(u!==undefined&&u!==null){o+=u}var p=m[o];if(!p){p=m[o]=this.measureInCanvas(e,n,l,s)}return p},ellipsis:function(e,t,i,a,r,o){var n=w(e,t,i,a,false,r&&r.reverseDots,r&&r.hasLetterSpacing,o);if(r&&r.needRealLength){return n}else{return n.text}},ellipsisInCircle:function(e,t,i,a,o){var n=x(e,t);var l=Math.sqrt(Math.pow(i,2)-Math.pow(a+r.getBBox(n).height/2,2))*2;w(e,t,l,o,true)},verticalCentralOffset:function(e,t){var i=x(e,t);var a=r.getBBox(i);var o=-a.y;var n=parseInt(i.ownerSVGElement.getComputedStyle(i)["fontSize"],0);return(o-(a.height-n))/2},parseStyle:function(e){var t={};var i=e.toLowerCase();t.FontSize=this.getStyleValue(i,"font-size");t.FontWeight=this.getStyleValue(i,"font-weight");t.FontFamily=this.getStyleValue(i,"font-family");t.LetterSpacing=this.getStyleValue(i,"letter-spacing");return t},getStyleValue:function(e,t){var i,a,r;a=e.indexOf(t);if(a>=0){a=e.indexOf(":",a)+1;r=e.indexOf(";",a);if(r<0){r=e.length}i=e.substring(a,r)}return i},getTextBaselineOffset:function(e){var t=this.fastMeasure("Tag",e["fontSize"],e["fontWeight"],e["fontFamily"],e["letterSpacing"]);return t.height+t.y},getAbsoluteTextBaselineOffset:function(e){var t=this.fastMeasure("Tag",e["fontSize"],e["fontWeight"],e["fontFamily"],e["letterSpacing"]);return t.y},getTextBBox:function(e){var t;if(e.parentNode){t=r.getBBox(e)}else{if(!s){s=A()}s.appendChild(e);t=r.getBBox(e)}return t},validateFontStyle:function(e){if(t.isNumber(e)){return e+"px"}return e},destroy:function(){if(s&&s.parentNode){s.parentNode.removeChild(s)}s=null;l=null;f=[];v=[];g={};m={};y=[];if(u){u.parentNode.removeChild(u)}u=null;c=null;h=null},wrapText:function(e,i,a,r,n){var l,s=false,u=0;var c=t.isString(n)?n:o.convertToCss(n);var h=[];var p=this.getTextLength("M...",c);if(r===1){l=this.getTextLength(e,c);if(a===undefined||a===null){s=true;u=l}else{s=l>a;u=Math.min(l,a)}return{lines:[e],maxWidth:u,beyond:s,lineWidthArray:[u]}}var d=k(i);var f=String(e).trim();if(f===""){return{lines:[e],maxWidth:u,beyond:s,lineWidthArray:[u]}}var v=[];var g=f.split(d);var m=g.length;if(m<=1){v=[e];u=this.getTextLength(e,c);if(a===undefined||a===null){s=true}else{s=u>a;u=Math.min(u,a)}h=[u]}else{var y;if(d===""){y=Array.apply(null,new Array(m-1)).map(String.prototype.valueOf,"")}else{y=f.match(d)}var _=y.length;var A=0;var b="";var x;for(var S=0;S<m;++S){if(s){b=b+(S<_?g[S]+y[S]:g[S])}else{var D=b+(S<_?g[S]+y[S]:g[S]);x=l;l=this.getTextLength(D,c);++A;if(l>a){if(A===1||v.length===r-1){s=true;u=a>p?a:p;b=D;continue}else{v.push(b);h.push(x);--S;A=0;b=""}}else{u=Math.max(u,l);b=D;if(S===m-1){v.push(b);h.push(l)}}}}if(s){v.push(b);h.push(u)}}return{lines:v,maxWidth:u,beyond:s,lineWidthArray:h}},drawWrappedText:function(e,i,a,r,n,l,s,u){var c;var h;var p=true;if(u){c=u.isRTL;h=u.ellipsisOptions;p=u.middleText}if(t.isString(i)){i=this.wrapText(i,a,n,r,s)}e.selectAll("tspan").remove();e.selectAll("title").remove();var d=i.lines;var f=d.length;var v=0;for(var g=0;g<f;++g){var m=e.append("tspan").attr("aria-hidden",true);if(i.beyond){this.ellipsis(d[g],m.node(),n,o.convertToCss(s),h);m.selectAll("title").remove()}else{m.node().textContent=d[g]}m.attr("y",v).attr("x",0).attr("font-weight",s["fontWeight"]).attr("font-family",s["fontFamily"]).attr("font-size",s["fontSize"]).attr("letter-spacing",s["letterSpacing"]).attr("font-style",s["fontStyle"]);v+=l;var y;if(p){y=i.lineWidthArray[g];m.attr("x",(n-y)/2)}else if(c){y=i.beyond?m.node().getComputedTextLength():i.maxWidth;m.attr("x",n-y)}}e.attr("height",l*f);if(i.beyond){e.append("title").node().textContent=i.lines.join("")}var _=0;if(i&&i.maxWidth){_=i.maxWidth}return _},getTextLength:function(e,t){var i=e+t;var a=_[i];if(!a){var r=x(e,t);_[i]=S(r);a=_[i]}return a}}});define("sap/viz/chart/components/title/Title",["sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/framework/common/lang/LangManager","sap/viz/chart/components/util/BoundUtil","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/TitleUtil"],function(e,t,i,a,r,o,n,l,s){var u=function(e,t){u.superclass.constructor.apply(this,arguments);this._wrapper=null;this._height=0;this._width=0;this._pfSize={maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,width:0,height:0};var i=this;e.zoneManager().add({tempPropertyZone:{title:{value:[],readonly:true,serializable:false,get:function(){var e=[],t,a;if(i.isVisible()){t=i._wrapper.node().getBoundingClientRect();a=[[]];a[0].push([t.left,t.top]);a[0].push([t.right,t.top]);a[0].push([t.right,t.bottom]);a[0].push([t.left,t.bottom]);e.push({name:"title",bound:a});if(i._wrapper&&i._wrapper.node()){var r=i._wrapper.node().ownerSVGElement;l.calcOffsetFromChart(r,e)}}return e}}}});var a=this._properties;["height"].forEach(function(e){var t={set:function(e,t){if(e===null||parseFloat(e)>=0){return e}else{return t.value}}},i={layout:{}};i.layout[e]=t;a.add(i)});var r=this.runtime().graphicModel();if(r){r.registerExposedModule(t.name)}};e.extend(u,t);u.prototype.setPosition=function(e){this._position=e};u.prototype.setSize=function(e){this._width=e.width;this._height=e.height};u.prototype.getSize=function(){return{width:this._width,height:this._height}};u.prototype.getPosition=function(){var e="layout.position",t=this._position||this._properties.get(e);if(["top","bottom"].indexOf(t)==-1){t=this._properties.getDefault(e)}return t||"top"};u.prototype._getPostfix=function(){var e=this._runtime.statusManager().get("dynamicScale");return e&&e.onlyChartTitle&&e.postfix||""};u.prototype.getPreferredSize=function(e,t,i,a){this._pfSize={maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,width:0,height:0};if(this._properties.get("visible")===true){var o=this._properties.get("style.fontSize");var n=this._properties.get("style.fontWeight");var l=this._properties.get("style.fontFamily");var u=this._properties.get("style.letterSpacing");var c=this._properties.get("text");if(a&&a._semanticDisplayStyleRules&&a._semanticDisplayStyleRules.title){var h=a._semanticDisplayStyleRules.title;if(h.fontWeight){n=h.fontWeight}if(h.fontFamily){l=h.fontFamily}}var p=s.getTextShow(c);p+=this._getPostfix();var d=r.fastMeasure(p,o,n,l,u);this._pfSize.width=this._pfSize.maxWidth=d.width;this._pfSize.height=this._pfSize.maxHeight=d.height;var f=r.fastMeasure("...",o,n,l,u);this._pfSize.minWidth=f.width;this._pfSize.minHeight=f.height;this._pfSize.width=Math.max(this._pfSize.minWidth,this._pfSize.width);this._pfSize.height=Math.max(this._pfSize.minHeight,this._pfSize.height);this._pfSize.hideOversize=true;this._pfSize.maxSizeConstant=1/3}return this._pfSize};u.prototype.isVisible=function(){var e=this._properties.get("visible");return e===true&&this._width>0&&this._height>0};u.prototype.render=function(e,t){var i=this._properties.get("text");var l=s.getTextShow(i);var u=e.selectAll("text.v-title").data([l]);this._wrapper=u;var c=this.isVisible();if(c){var h=this._width;var p=this._height;var d=this._properties.get("alignment");var f,v,g,m,y;if(t&&t.title){var _=t.title;if(_.fontWeight){f=_.fontWeight}if(_.fontFamily){v=_.fontFamily}if(_.color){g=_.color}if(_.letterSpacing){m=_.letterSpacing}if(_.fontStyle){y=_.fontStyle}}var A={color:g||this._properties.get("style.color"),fontFamily:v||this._properties.get("style.fontFamily"),fontSize:this._properties.get("style.fontSize"),fontWeight:f||this._properties.get("style.fontWeight"),letterSpacing:m||this._properties.get("style.letterSpacing"),fontStyle:y||this._properties.get("style.fontStyle")};a.drawBound(e,h,p,undefined,true);var b=d||"center";var x=null;var S=this.runtime().envManager();if(S){x=S.textAnchor()}var D={};D.reverseDots=S&&S.reverseDots();var w=this._pfSize.width;var C=this._pfSize.width/2;if(this._pfSize.width>h){w=h;C=h/2}var T={right:h-w,center:h/2-C,left:0}[b];if(T==null){T=h/2-C}var z;var L;u.exit().remove();u.enter().append("text").attr("class","v-title viz-title-label");var P=this.runtime().effectManager().register({fillColor:A.color});u.attr("fill",P).attr("font-family",A.fontFamily).attr("font-size",A.fontSize).attr("font-weight",A.fontWeight).attr("font-style",A.fontStyle).attr("text-anchor",x).attr("x",T).attr("y","top"==this.getPosition()?this._pfSize.height/2:p-this._pfSize.height/2).attr("dominant-baseline","central");if(n.isIE()){u.attr("y","top"==this.getPosition()?this._pfSize.height:p).attr("dominant-baseline","auto")}r.ellipsis(l,u.node(),h,o.convertToCss(A),D,this._getPostfix())}else{e.selectAll("text.v-title").remove()}};u.prototype.destroy=function(){u.superclass.destroy.call(this);this.clear();this._wrapper=null;this._height=null;this._width=null};u.prototype.clear=function(){if(this._wrapper){this._wrapper.remove()}};u.prototype.supportFixedLayout=true;return u});define("sap/viz/chart/components/Background",["sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/framework/common/util/DataGraphics"],function(e,t,i){var a=d3.dispatch;var r="v-background-border",o="viz-plot-background-border";var n="v-background-body",l="viz-plot-background";var s="v-morphable-background";function u(e,t){u.superclass.constructor.apply(this,arguments);this._eDispatch=new a("initialized")}e.extend(u,t);var c=u.prototype;c.render=function(e){var t=this._properties;if(t.get("visible")&&this._size.width>0&&this._size.height>0){var a=e.select("."+n);if(a.empty()){a=e.append("svg:rect").attr("class",n+" "+l+" "+s)}var u=this._data&&this._data.color||t.get("color")||"transparent";i.setData(a.node(),{color:u});var c=this._size;var h=c.height;var p=c.width;var d=this.runtime().effectManager().register({graphType:"background",fillColor:u,drawingEffect:t.get("drawingEffect"),direction:t.get("gradientDirection")});a.attr("x",0).attr("y",0).attr("width",p).attr("height",h).style("fill",d);var f=!(this._data&&this._data.hasBorder===false);if(f){var v=[];if(t.get("border.left.visible")){v.push({x1:0,y1:0,x2:0,y2:h})}if(t.get("border.right.visible")){v.push({x1:p,y1:0,x2:p,y2:h})}if(t.get("border.top.visible")){v.push({x1:0,y1:0,x2:p,y2:0})}if(t.get("border.bottom.visible")){v.push({x1:0,y1:h,x2:p,y2:h})}var g=e.selectAll("."+r).data(v);g.enter().append("svg:line").attr("class",r+" "+o);g.exit().remove();g.attr("x1",function(e){return e.x1}).attr("y1",function(e){return e.y1}).attr("x2",function(e){return e.x2}).attr("y2",function(e){return e.y2});g.style("stroke",t.get("border.stroke")).style("stroke-width",t.get("border.strokeWidth"))}}else{var m=e.node();while(m.hasChildNodes()){m.removeChild(m.firstChild)}}this._eDispatch.initialized();return this};c.adjustPosition=function(e,t){if(!e||!t){return}var i=this._properties;if(i.get("visible")&&this._size.width>0&&this._size.height>0){var a=e.select("."+n);a.attr("x",t.x);a.attr("y",t.y);a.attr("width",t.width);a.attr("height",t.height);var o=e.selectAll("."+r)[0];var l,s,u,c;for(var h=0;h<o.length;h++){l=o[h];s=Number(l.getAttribute("x1"));u=Number(l.getAttribute("y1"));c=Number(l.getAttribute("x2"));if(s===0&&u===0&&c===0){l.setAttribute("x1",t.x);l.setAttribute("y1",t.y);l.setAttribute("x2",t.x);l.setAttribute("y2",t.y+t.height)}else if(s>0&&u===0&&c>0){l.setAttribute("x1",t.x+t.width);l.setAttribute("y1",t.y);l.setAttribute("x2",t.x+t.width);l.setAttribute("y2",t.y+t.height)}else if(s===0&&u===0&&c>0){l.setAttribute("x1",t.x);l.setAttribute("y1",t.y);l.setAttribute("x2",t.x+t.width);l.setAttribute("y2",t.y)}else if(s===0&&u>0&&c>0){l.setAttribute("x1",t.x);l.setAttribute("y1",t.y+t.height);l.setAttribute("x2",t.x+t.width);l.setAttribute("y2",t.y+t.height)}}}};c.destroy=function(){u.superclass.destroy.call(this);this._eDispatch.on("initialized",null);this._eDispatch=null};return u});define("sap/viz/chart/components/scrollbar/Scrollbar",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/PositionUtil"],function e(t,i,a,r,o,n,l){var s="v-m-scrollbarThumb";var u="v-m-scrollbarTrack";var c=function(e,t){c.superclass.constructor.apply(this,arguments);this._exposeMoreEvents("scroll");this._thumbSpace=c.getThumbSpace(t.location);this._thumbSize=0;this._trackSize=0;this._contentSize=0;this._borderWidth=0;this._spacingPadding=0;this._thumbPosition=0;this._minThumbPosition=0;this._maxThumbPosition=0;this._isExist=true;this._isVisible=true;this._position="bottom";this._selection=null;this._wrapper=null;this._thumbNode=null;this._trackNode=null;this._thumbHover=false};i.extend(c,a);c.getThumbSpace=function(e){if(n.isMobile()){return 7}else{if(e==="legend"){return 8}return 12}};c.prototype._notNeedDesktopInteraction=function(){return n.isMobile()||this.runtime().effectManager().ghostEffect()};c.prototype._initSetting=function(){var e=this._properties;if(!n.isMobile()){this._borderWidth=h(e,"border.width");this._borderWidth=Math.min(this._borderWidth,4);this._borderWidth=Math.max(this._borderWidth,0)}this._spacingPadding=h(e,"spacing");this._spacingPadding=Math.min(this._spacingPadding,4);this._spacingPadding=Math.max(this._spacingPadding,0)};function h(e,t){var i=parseFloat(e.get(t));if(o.isNaN(i)){i=parseFloat(e.getDefault(t))}return i}c.prototype.render=function(e){c.superclass.render.apply(this,arguments);if(e){this._selection=e;this._wrapper=this._selection.selectAll("g");if(this._wrapper.empty()){this._wrapper=this._selection.append("g")}}if(!this._selection){return}if(this._isExist){var t=this._isVertical();var i=t?"height":"width";var a=this._trackSize||this._size[i];a=parseFloat(a);this._trackSize=a;var r=this._contentSize||this._realSize[i];r=parseFloat(r);if(r<a){r=a}this._contentSize=r;this._thumbSpace=parseFloat(this._thumbSpace);var o=this._thumbSpace;var l=this._properties;this.getThumbRatio();var h=parseFloat(this._borderWidth);var d=n.isMobile()?l.getDefault("border.color"):l.get("border.color");var f=this._spacingPadding;var v=this._wrapper;var g=this._isVisible?"visible":"hidden";var m=v.select("rect."+u);if(m.empty()){m=v.append("rect").attr("class",u)}m.attr("visibility",g).attr("fill",l.get("track.fill"));m.attr("stroke-width",h).attr("stroke",d);if(t){m.attr("width",o).attr("height",a)}else{m.attr("width",a).attr("height",o)}this._trackNode=m;var y=v.select("rect."+s);if(y.empty()){y=v.append("rect").attr("class",s)}var _=this._thumbHover?"thumb.hoverFill":"thumb.fill";y.attr("visibility",g).attr("fill",l.get(_));var A=this._thumbSize;var b=f+h;if(t){y.attr("width",o-b*2).attr("height",A).attr("transform","translate("+b+", "+(this._thumbPosition+b)+")")}else{y.attr("width",A).attr("height",o-b*2).attr("transform","translate("+(this._thumbPosition+b)+", "+b+")")}this._thumbNode=y;this.show(1600);if(this._notNeedDesktopInteraction()){return}(function e(t,i,a){function r(e){return e.bind(a)}var o=r(function(e){this._startPos=undefined;var t=this._thumbSize;var i=this._trackNode.node().getBoundingClientRect();if(this._isVertical()){if(e.clientY<i.top+this._thumbPosition){t=-t}}else{if(e.clientX<i.left+this._thumbPosition){t=-t}}this._scroll(t);var a=this.runtime();if(a){a.fireInteractionEvent("scrollbarReleased")}return false});var n=r(function(e){if(this._isVertical()){this._startPos=e.clientY}else{this._startPos=e.clientX}this._thumbHover=true;this._thumbNode.attr("fill",this._properties.get("thumb.hoverFill"));this._isPressed=true;p(e)});var l=r(function(e){this._startPos=undefined;this._isPressed=false;if(this._thumbNode&&e.target!==this._thumbNode.node()){this._thumbNode.attr("fill",this._properties.get("thumb.fill"));this._thumbHover=false}var t=this.runtime();if(t){t.fireInteractionEvent("scrollbarReleased")}});var s=r(function(e){if(this._startPos!==undefined){if(this._isVertical()){this._scroll(e.clientY-this._startPos);this._startPos=e.clientY}else{this._scroll(e.clientX-this._startPos);this._startPos=e.clientX}}});var u=r(function(){this._thumbNode.attr("fill",this._properties.get("thumb.hoverFill"));this._thumbHover=true});var c=r(function(){if(!this._isPressed){if(this._thumbNode){this._thumbHover=false;this._thumbNode.attr("fill",this._properties.get("thumb.fill"))}}});function h(){var e=window;if(e.addEventListener===undefined){e=document.body}return e}function d(e){s(e);e.preventDefault();p(e);return false}function f(e){l(e);var t=h();t.removeEventListener("mousemove",d,true);t.removeEventListener("mouseup",f,true);return false}t.on("mouseover",u).on("mouseleave",c).on("mousedown",function(){var e=d3.event;n(e);var t=h();t.addEventListener("mousemove",d,true);t.addEventListener("mouseup",f,true);p(e);return false});i.on("click",function(){return o(d3.event)})})(y,m,this)}else{if(this._wrapper){this._wrapper.remove();this._wrapper=null;this._thumbNode=null;this._trackNode=null}}};var p=function(e){if(e&&e.stopPropagation){e.stopPropagation()}};c.prototype._isFull=function(){return this._trackSize>=this._contentSize};c.prototype.destroy=function(){this._eventDispatch.on("scroll",null);c.superclass.destroy.call(this);this._thumbSpace=0;this._thumbSize=0;this._trackSize=0;this._contentSize=0;this._borderWidth=0;this._spacingPadding=0;this._thumbPosition=0;this._maxThumbPosition=0;this._minThumbPosition=0;this._isExist=true;this._isVisible=true;this._position="bottom";this._selection=null;this._wrapper=null;this._thumbNode=null;this._trackNode=null};c.prototype.getPreferredSize=function(){var e={maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,width:0,height:0,spacings:[{interval:0,type:t.SPACING_TYPE.STEP}]};if(this._isExist){var i=this._thumbSpace;if(this._isVertical()){e.maxWidth=e.width=i}else{e.maxHeight=e.height=i}e.spacings[0].interval=i}return e};c.prototype.setPosition=function(e){this._position=e;return this};c.prototype._isVertical=function(){return l.isVertical(this._position)};c.prototype._isHorizontal=function(){return l.isHorizontal(this._position)};c.prototype.isExist=function(e){if(!arguments.length){return this._isExist}this._isExist=!!e;return this};c.prototype.isVisible=function(e){if(!arguments.length){return this._isVisible}this._isVisible=!!e;return this};c.prototype.setTrackSize=function(e){this._trackSize=+e;return this};c.prototype.getTrackSize=function(){return this._trackSize};c.prototype.getContentSize=function(){return this._contentSize};c.prototype.setContentSize=function(e){this._contentSize=+e;return this};c.prototype.getThumbSize=function(){return this._thumbSize};c.prototype.isThumbOverTrack=function(e){var t=false;var i=this._thumbPosition;var a=this._minThumbPosition;var r=this._maxThumbPosition;if(i===a&&i+e<a){t=true}if(Math.floor(i)===Math.floor(r)&&i+e>r){t=true}return t};c.prototype.getThumbRatio=function(){this._initSetting();var e=this._trackSize;var t=this._contentSize;var i=this._borderWidth;var a=this._spacingPadding;var r=this._thumbSpace;var o=2*(a+i);if(e<=0||t<=0){return null}if(t<e){t=e}var n=0;if(t!==0){n=(e-i)*e/t}var l=r*2;if(l>e){l=e}if(n<l){n=l}this._thumbSize=n;this._maxThumbPosition=e-n-o;this._minThumbPosition=0;this._offsetRatio=(t-e)/(e-o-n);return this._offsetRatio};c.prototype._scroll=function(e,t,i){var a=Math.min(this._maxThumbPosition,Math.max(this._minThumbPosition,this._thumbPosition+e));if(!i&&t||this._thumbPosition!==a){this.setThumbPosition(a);var r=-Math.ceil(a*this._offsetRatio);this._eventDispatch.scroll({offset:r,reachMax:a===this._maxThumbPosition})}};c.prototype.getThumbPosition=function(){return this._thumbPosition};c.prototype.setThumbPosition=function(e){if(!this._isExist){return}var t=+e;var i=this._thumbSpace;var a=this._spacingPadding;var r=this._borderWidth;var o=a+r;this._thumbPosition=Math.min(this._maxThumbPosition,t);if(this._thumbNode){if(this._isVertical()){this._thumbNode.attr("transform","translate("+o+", "+(this._thumbPosition+o)+")")}else{this._thumbNode.attr("transform","translate("+(this._thumbPosition+o)+", "+o+")")}}return this};function d(){if(this._thumbNode){this._thumbNode.attr("visibility","visible")}if(this._trackNode){this._trackNode.attr("visibility","visible")}}function f(){if(this._thumbNode){this._thumbNode.attr("visibility","hidden")}if(this._trackNode){this._trackNode.attr("visibility","hidden")}}c.prototype.show=function(e,t){var i=d.bind(this),a=f.bind(this);if(!t&&(this._isFull()||!this.isVisible())){a();return}i();if(n.isMobile()){if(!e){e=800}if(this._timeoutId){window.clearTimeout(this._timeoutId)}this._timeoutId=window.setTimeout(a,e)}};return c});define("sap/viz/chart/components/scrollbar/PaginationScrollbar",["sap/viz/framework/common/util/oo","sap/viz/chart/components/scrollbar/Scrollbar"],function e(t,i){var a="scroll";var r=function(e,t){r.superclass.constructor.apply(this,arguments);var i=t.properties||this._runtime._propertyMgr;this._properties=i.proxy("plotArea.scrollbar");this._thumbRatio=0};t.extend(r,i);r.prototype._scroll=function(e,t){r.superclass._scroll.apply(this,arguments);var i={};this._thumbRatio=this._thumbPosition/this._maxThumbPosition;i.position=this._thumbRatio;if(this.runtime()){this.runtime().eventDispatcher().fire(a,i)}};return r});define("sap/viz/chart/components/legend/BaseLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/chart/components/util/BoundUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/interaction/Constants"],function(e,t,i,a,r,o,n,l,s,u,c,h){var p="measureNames";var d=3;var f=function(e,t){f.superclass.constructor.apply(this,arguments);this._type="BaseLegend";this._title=undefined;this._bindingFields=null;this._parent=null;this._pos={x:0,y:0};this._titleMarginBottom=.5;this._width=0;this._height=0;this._position=null;var i=this;var a={},r={};a[this._name]={value:[],readonly:true,serializable:false,get:function(){var e=[],t,a,r,n,l,s,u;t=i.getZonePrefix();if(i.isVisible()&&i._properties.get("title.visible")&&i._parent){var c=i._parent.select(".viz-legend-title.v-title").node();a=c?c.getBoundingClientRect():null;if(a&&a.width>1.5&&a.height>1.5){n=[[]];n[0].push([a.left,a.top]);n[0].push([a.right,a.top]);n[0].push([a.right,a.bottom]);n[0].push([a.left,a.bottom]);e.push({name:t+" title",bound:n})}}if(i._parent&&i._parent.select(".v-bound").node()){s=i._parent.select(".v-bound").node().getBoundingClientRect();if(s.width>1.5&&s.height>1.5){r={left:s.left,right:s.right,top:s.top,bottom:s.bottom};if(e.length>0){r.top=e[0].bound[0][3][1]+1}l=[[]];l[0].push([r.left,r.top]);l[0].push([r.right,r.top]);l[0].push([r.right,r.bottom]);l[0].push([r.left,r.bottom]);e.push({name:t,bound:l})}u=i._parent.node().ownerSVGElement}o.calcOffsetFromChart(u,e);return e}};var l=t&&t.options&&t.options.noFeeding;if(!l){r[this._name]={value:[],readonly:true,serializable:false,get:function(){var e,t,a;if(i._parent&&!i._isDedicated){var r=d3.select(i._parent.node().ownerSVGElement);t=i.getZonePrefix();e=n.buildRes(t,a,r,true)}return e}};this.runtime().zoneManager().add({tempPropertyZone:a,tempFeedingZone:r})}else{this.runtime().zoneManager().add({tempPropertyZone:a})}var s=this._properties;this._orientation=null;this._titleFont={fontFamily:s.get("title.style.fontFamily"),fontSize:s.get("title.style.fontSize"),fontWeight:s.get("title.style.fontWeight"),color:s.get("title.style.color"),fontStyle:s.get("title.style.fontStyle")};var u=this.runtime().graphicModel();if(u){u.registerExposedModule(t.name)}};e.extend(f,t);f.prototype.getType=function(){return this._type};f.prototype._addDefaultProperties=function(){this._properties.add({visible:true,title:{visible:false,text:null,style:{color:"#000000",fontFamily:"'Open Sans', Arial, Helvetica, sans-serif",fontSize:"14px",fontWeight:"bold",fontStyle:"normal"}},label:{style:{color:"#000000",fontFamily:"'Open Sans', Arial, Helvetica, sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}}})};f.prototype.visible=function(){return this._properties.get("visible")};f.prototype.setPosition=function(e){this._position=e};f.prototype.getPosition=function(){return this._position};f.prototype.setOrientation=function(e){this._orientation=e};f.prototype.setDedicated=function(e){this._isDedicated=e};f.prototype.isHorizontal=function(){return this._orientation==="top"||this._orientation==="bottom"};f.prototype.render=function(e,t){this._pos={x:0,y:0};var a;var o=e.selectAll("text.v-title");if(this.isVisible()||this._isDedicated){var n=this._properties;a=i.drawBound(e,this._width,this._height,undefined,true);a.attr("x",null);a.attr("y",null);if(!t){a.attr("stroke",null).attr("stroke-width",null)}if(this._properties.get("title.visible")===true){if(o.empty()){o=e.append("text").attr("class","v-title viz-legend-title")}else{o.html("")}var l=null;var s=this.runtime().envManager();if(s){l=s.textAnchor()}o.attr("text-anchor",l);var u;u={fill:n.get("title.style.color"),"font-family":n.get("title.style.fontFamily"),"font-size":n.get("title.style.fontSize"),"font-weight":n.get("title.style.fontWeight"),"font-style":n.get("title.style.fontStyle")};var c=this._getWrapText();c=c&&c>1?c:1;var h=parseInt(this._titleFont.fontSize,10);var p={};p.isRTL=this._isRTL();p.ellipsisOptions={};p.middleText=false;p.ellipsisOptions.reverseDots=s&&s.reverseDots();r.drawWrappedText(o,this._titleText,[" "],c,this._width,h,this._titleFont,p);var d=parseInt(o.attr("height"));this._pos.y=this._pos.y+d;o.attr("font-weight",u["font-weight"]).attr("fill",u.fill).attr("font-family",u["font-family"]).attr("font-size",u["font-size"]).attr("font-style",u["font-style"]).attr("x",this._pos.x).attr("y",this._pos.y).attr("visibility","inherit");o.selectAll("tspan").attr("dy","1em");this._pos.y=this._pos.y+h*this._titleMarginBottom}else{o.remove()}}else{var f;if(this._properties._props["legendGroup.layout.width"]&&this._properties._props["legendGroup.layout.height"]){f={width:this._properties._props["legendGroup.layout.width"].value,height:this._properties._props["legendGroup.layout.height"].value}}if(this.visible()&&f&&(f.width||f.height)){a=i.drawBound(e,f.width||this._originWidth,f.height||this._originHeight)}else{a=i.drawBound(e,0,0)}o.remove()}if(this._properties.origin.get("legendGroup.layout.alignment")==="center"&&(this._properties.origin.get("legendGroup.layout.position")==="top"||this._properties.origin.get("legendGroup.layout.position")==="bottom")){this._renderedWidth=0;var v=o.node();if(v){this._renderedWidth=v.getBoundingClientRect().width}}if(a){this._bound=a.node()}return this};f.prototype.width=function(e){if(!arguments.length){return this._width}this._width=e;if(e>0){this._originWidth=e}return this};f.prototype.height=function(e){if(!arguments.length){return this._height}this._height=e;if(e>0){this._originHeight=e}return this};f.prototype.setSize=function(e){this._width=e.width;this._height=e.height;if(e.width>0){this._originWidth=e.width}if(e.height>0){this._originHeight=e.height}};f.prototype.setBindingFields=function(e){this._bindingFields=e;return this};f.prototype.parent=function(e){if(!arguments.length){return this._parent}this._parent=e;return this};f.prototype.getParent=function(){return this._parent};f.prototype._getTitleText=function(){var e="";var t=this._properties.get("title.text");if(a.isString(t)){e=t}else if(this._bindingFields&&this._bindingFields.length){e=this._constructTitle(this._bindingFields)}else{e=l.get("IDS_LEGEND_TITLE")}return e};f.prototype.getLegendTitleText=function(){return this._getTitleText()};f.prototype._constructTitle=function(e){var t=e.filter(function(e){return!e.hidden}).map(function(e){if(e.id===p){return e.name||l.get("IDS_DEFAULTMND")||e.id}return e.name||e.id});var i=[];for(var a=0;a<t.length;a++){if(e&&e.length>1&&e[a].id===p&&e[a].values.length===1){continue}i.push(t[a])}return i.join(" / ")};f.prototype._getTitlePreferredSize=function(e){this._setupThemeStyleDef();var t={maxWidth:0,maxHeight:0,minWidth:0,minHeight:0};if(this._properties.get("title.visible")){var i=parseInt(this._titleFont.fontSize,10);var a=c.convertToCss(this._titleFont);var o=this._getTitleText();var n=this._getWrapText();o=r.wrapText(o,[" "],e.maxWidth,n,this._properties.get("title.style"));var l=o.lines.length;t={maxHeight:i*(l+this._titleMarginBottom),minWidth:r.getTextLength("M...",a),minHeight:i*(l+this._titleMarginBottom),maxWidth:o.maxWidth};this._titleText=o}return t};f.prototype.getData=function(){return this._data};f.prototype.setData=function(e){this._data=e;return this};f.prototype.data=function(e){if(!arguments.length){return this.getData()}return this.setData(e)};f.prototype.destroy=function(){this._properties=null;this._title=null;this._parent=null;this._bindingFields=null;this._pos=null;this._titleMarginBottom=null;this._width=null;this._height=null;this._titleFont=null;this._orientation=null;this._isDedicated=null;this._wrap=null;f.superclass.destroy.call(this)};f.prototype.hasData=function(){return true};f.prototype.getPreferredSize=function(e){var t={width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0};if(!this.hasData()){return t}this._pos={x:0,y:0};var i=u.extend(false,e);i.maxWidth=i.maxWidth||i.width;i.maxHeight=i.maxHeight||i.height;if(this.visible()||this._isDedicated){var a=this._getTitlePreferredSize(i);i.height-=a.maxHeight;var r=this._getBodyPreferredSize(i);t={width:a.maxWidth>r.maxWidth?a.maxWidth:r.maxWidth,height:a.maxHeight+r.maxHeight,maxWidth:a.maxWidth>r.maxWidth?a.maxWidth:r.maxWidth,maxHeight:a.maxHeight+r.maxHeight,minWidth:a.minWidth>r.minWidth?a.minWidth:r.minWidth,minHeight:a.minHeight+r.minHeight};if(this._isDedicated){this._width=t.maxWidth;this._height=t.maxHeight}}return t};f.prototype.isVisible=function(){return this.visible()&&this._width>0&&this._height>0};f.prototype.isSelectable=function(){var e=this._properties.origin,t=(e.get("interaction.selectability.mode")||"").toUpperCase(),i=(e.get("interaction.selectability.behavior")||"").toUpperCase();return!(t===h.SELECTION_MODE.NONE||e.get("interaction.selectability.legendSelection")===false||t===h.SELECTION_MODE.SINGLE&&i!==h.SELECTION_BEHAVIOR.SERIES)};f.prototype._setupThemeStyleDef=function(){var e=this._properties.proxy("title.style");var t;t={fill:e.get("color"),"font-family":e.get("fontFamily"),"font-size":e.get("fontSize"),"font-weight":e.get("fontWeight"),"font-style":e.get("fontStyle")};if(t){if(t.fill){this._titleFont.color=t.fill}if(t["font-family"]){this._titleFont.fontFamily=t["font-family"]}if(t["font-size"]){this._titleFont.fontSize=t["font-size"]}if(t["font-weight"]){this._titleFont.fontWeight=t["font-weight"]}if(t["font-style"]){this._titleFont.fontStyle=t["font-style"]}}};f.prototype._adjustRendererOption=function(e){};f.prototype._getWrapText=function(){var e=1;if(!this._isRTL()){var t=this._properties.origin.get("legendGroup.layout.position");if(t==="left"||t==="right"){e=this._properties.origin.get("legendGroup.linesOfWrap");if(isNaN(e)||e<1){e=1}else if(e>d){e=d}}}return e};f.prototype.getZonePrefix=function(){return"legend"};var v=function(e){var t=false;if(e==="SizeLegend"){t=true}return t};return f});define("sap/viz/chart/components/util/DrawUtil",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/SVG"],function e(t,i){var a={};var r={};var o=2;function n(e){var t="_";return e.type+t+e.rx+t+e.ry}var l={};l.createMarkerData=function(e){return i.generateMarkerPath(e)};l.createElements=function(e,t){return e.append("path").attr("class",t.className)};l.createElement=function(e,t,i){var a=e.append("path").attr("class",t.className);t.node=a;l.drawGraph(t,i);return a};l.drawGraph=function(e,t){return l.updateGraph(e,t,l.createGraph(e))};l.createGraph=function(e){var t={type:typeof e.graphType==="string"?e.graphType:e.graphType.type,rx:Math.round(e.rx),ry:Math.round(e.ry),borderWidth:Math.round(e.borderWidth),innerBorder:e.dpPattern==="noFill"};var i=l.createMarkerData(t);if(!i&&e.defaultShape){t.type=e.defaultShape;i=l.createMarkerData(t)}return i};l.updateGraph=function(e,t,i){var a=e.graphType.style;var r=e.opacity;if(!r){r=1}var o=t?t.register(e):e.fillColor;var n=e.borderColor;if(e.dpPattern==="noFill"){n=o;o=e.bgColor}if(t&&n){n=t.register({fillColor:n})}var l=e.node;l.setAttribute("class",e.className);l.setAttribute("fill",o);if(o!=="transparent"||n!=="transparent"){l.setAttribute("stroke-width",e.borderWidth);l.setAttribute("stroke",n);l.setAttribute("opacity",r);var s=e.fillOpacity;if(s!=null){l.setAttribute("fill-opacity",s)}}if(a){Object.keys(a).forEach(function(e){this.setAttribute(e,a[e])},l)}l.setAttribute("stroke-opacity",e.strokeOpacity);if(i){l.setAttribute("d",i)}return l};l.rgb2Hex=function(e){return"#"+((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1)};l.colorLinerTransform=function(e,t,i){var a=e.color2rgba(i);var r=1,o=0;r=t.factor;o=t.constant;return{r:Math.min(255,Math.round(a.r*r+o)),g:Math.min(255,Math.round(a.g*r+o)),b:Math.min(255,Math.round(a.b*r+o))}};l.barUpdate=function(e,t,i){var a=t.graphic;var r=i.width;var n=i.height;var l=i.minSize;var s=e.querySelector("rect");if(s){s.setAttribute("width",r);s.setAttribute("height",n);if(a.stroke){var u=l>a.strokeWidth+o?a.strokeWidth:l-o;if(u>=1){s.setAttribute("stroke",a.stroke);s.setAttribute("stroke-width",a.strokeWidth)}else{s.removeAttribute("stroke");s.removeAttribute("stroke-width")}}}if(a.pattern==="noFill"&&t.path){var c=e.querySelector("path");if(c){c.setAttribute("d",t.path)}}};return l});define("sap/viz/chart/components/util/DataPointUtils",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils"],function(e,t,i,a,r){var o=i.CSS.CLASS.DATAPOINT,n="g",l="."+o,s=i.CSS.CLASS.DATAPOINTDEFAULT;var u="data-highlighted";var c="data-id";var h="data-datapoint-id";var p="data-datastack-id";var d="data-recap-id";var f="data-area-id";function v(e,t){var i=t.getNodes(t.NodeType.DATA_POINT,false);var a=g(i,e);return[].slice.apply(a)}function g(e,t){return m.findIdsWithClassId(e,t,h)}var m={findArea:function(e,t){return e.querySelector("["+f+"='"+t+"']")},setAreaId:function(e,t){e.setAttribute(f,t)},findAll:function(e){return e.querySelectorAll(l)},find:function(e,t){return e.querySelector("."+o+"["+c+"='"+t+"']")},findByDataPointId:function(e,t){return e.querySelector("["+h+"='"+t+"']")},findIdsWithClassId:function(e,t,i){if(!r.isArray(t)){t=[t]}var a={};var o;for(o=t.length;o--;){a[t[o]]=1}var n={};var l=[];for(o=e.length;o--;){var s=e[o];var u=s.getAttribute(i);if(a[u]){n[u]=s;l.push(u)}}var c=[];for(o=l.length;o--;){c.push(n[l[o]])}return c},findByDataStackIds:function(e,t){return m.findIdsWithClassId(e,t,p)},findByDataRecapIds:function(e,t){return m.findIdsWithClassId(e,t,d)},findByDataPointIds:g,isDataPoint:function(e){return t.matches(e,l)},setDataId:function(e,t){e.setAttribute(c,t)},getDataId:function(e){return e.getAttribute(c)},setDataPointId:function(e,t){e.setAttribute(h,t)},getDataStackId:function(e,t){return e.getAttribute(p)},getDataRecapId:function(e,t){return e.getAttribute(d)},setDataStackId:function(e,t){e.setAttribute(p,t)},setDataRecapId:function(e,t){e.setAttribute(d,t)},getDataPointId:function(e){return e.getAttribute(h)},highlight:function(e){e.setAttribute(u,"true")},unhighlight:function(e){e.removeAttribute(u)},isHighlighted:function(e){return e.getAttribute(u)==="true"},create:function(t,a){var r=e.create(n,t);r.setAttribute("class",o+" "+s+" "+i.CSS.CLASS.MORPHABLEDATAPOINT);r.setAttribute(c,a);return r},setContext:function(e,t){return a.setContext(e,t)},getContext:function(e){return a.getContext(e)},getAdditionCtx:function(e){return a.getAdditionCtx(e)},getAdditionCtxByDataModel:function(e,t){var i=a.getAdditionCtx(e);if(i!=null){return i}var r=this.getDataPointId(e);var o=t.getDataPoint(r);if(o==null){return null}return o.additionCtx()},getContextByDataModel:function(e,t){var i=a.getContext(e);if(i!=null){return i}var r=this.getDataPointId(e);var o=t.getDataPoint(r);if(o==null){return null}return o.context()},getDataPointByDataLabel:function(e,t){var i=this.getDataPointId(e);var a=t.getNodes(t.NodeType.DATA_POINT,false);return g(a,i)[0]},getNodes:function(e,t){if(t.isBigDataMode()){return e}return v(e,t)},getNodeDom:v};return m});define("sap/viz/chart/behavior/config/SelectionUtil",["sap/viz/framework/chartmodel/DataSelector","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/RuleUtil","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o,n,l,s){var u="date";var c=r.RANGE_SELECTION.OFFSET;function h(e,t){var a=y(e,t);var r=t.getNodes(t.NodeType.DATA_POINT,false);var o=i.findByDataPointIds(r,a);return[].slice.apply(o)}function p(e,a){var r=a.getSemanticManager().isHideSemanticLegend();var o=i.getDataPointId(e);var n=a.getDataModel().getDataPoint(o);if(r&&n._isSemantic){return null}var l;var s=a.getNodes(a.NodeType.LEGEND_ITEM,false);for(var u=0;!l&&u<s.length;u++){var c=t.getContext(s[u]).ctx;var p=h(c,a);for(var d=0;!l&&d<p.length;d++){var f=i.getDataPointId(p[d]);if(f===o){l=s[u]}}}return l}function d(e,i){if(!e.isTrellis()&&e.getProperties().get("legend.selectionFeedback")){var r=e.getStatus("selectedDataPoints")||[];var o;var n;if(i){o=e.NodeType.MBC_LEGEND_ITEM;n=a.CSS.CLASS.MBCLEGENDITEM}else{o=e.NodeType.LEGEND_ITEM;n=a.CSS.CLASS.LEGENDITEM}var l=e.getNodes(o,false);for(var u=0;u<l.length;u++){var c=d3.select(l[u]);var h=t.getContext(l[u]).ctx;if(i){h=s.extend({},h);delete h.measureName}var p=y(h,e);var d=p&&p.length;for(var f=0;d&&f<p.length;f++){d=r.indexOf(p[f])>=0}c.classed(n+a.CSS.CLASS.SELECTED,d)}if(i){T(e)}else{w(e)}}}function f(e,t,i){var a=t._bindingFeeds,r;if(a){for(var o=0;o<a.length;o++){if(t["_"+a[o]]&&t["_"+a[o]].metaData){var n=t["_"+a[o]].metaData;for(var l=0;l<n.length;l++){if(n[l].dataType&&n[l].dataType.toLowerCase()===i){r=n[l].id}}}}}return r}function v(e,t,i,a){var r=f(e,t,i);if(o.isExist(r)){g(e,r,i,a)}}function g(e,t,i,a){if(o.isArray(e)||o.isPlainObject(e)){for(var r in e){if(e.hasOwnProperty(r)){if(r===t){l.parseRules[i](e,r,a);e[r+n.DIMENSION_PARSED_VALUE_SUFFIX]=e[r];delete e[r]}else{g(e[r],t,i,a)}}}}}function m(t,i,a,r){var o=i.getDataModel();if(a){t=s.clone(t,true);v(t,o,u,r)}var n=new e(t,o);return n.getDataPoints()}function y(e,t,i,a){var r=m(e,t,i,a);return r.map(function(e){return e.id.toString()})}function _(e,t){var i=e.getProperties().get("interaction.selectability");if(!i){return false}var a=e.getProperties().get("interaction.selectability.behavior");var o=a?a.toUpperCase():a;var n=i.mode?i.mode.toUpperCase():i.mode;var l=e.getNodes(t);if(!i.legendSelection||n===r.SELECTION_MODE.NONE||n===r.SELECTION_MODE.SINGLE&&o!==r.SELECTION_BEHAVIOR.SERIES||!l.node()){return false}else{return true}}function A(e,t){var i=t.getStatus("lassoStartPoint");var a=t.getStatus("rangeSelection");var r=t._rootNode.node().style;if(!i&&a){var o=e.data.point;var n=t.getBBox(t.BoxType.RANGE_SELECTION);var l=t.getBBox(t.BoxType.PLOT_BOUND_NODE);if(l.x>o.x||l.x+l.width<o.x||l.y>o.y||l.y+l.height<o.y){r.cursor="default"}else if(Math.abs(o.x-n.x)<=c||Math.abs(o.x-n.x-n.width)<=c){r.cursor="col-resize"}else if(n.x<o.x&&n.x+n.width>o.x){r.cursor="move"}else{r.cursor="default"}}else{r.cursor="default"}}function b(e,t){var i=e.map(function(e){return e.data});var a=t.getStatusManager();var r=t._getRenderType();var o={dataTimeLevel:null,showAsUTC:false};var n=/timeseries.*column|timeseries.*combination|timeseries_bullet|timeseries_waterfall/;if(n.test(r)){o={dataTimeLevel:a.get("timeLevels")[0],showAsUTC:t.getProperties().get("general.showAsUTC")}}o.originProps=t.getProperties();return y(i,t,true,o)}function x(e){var t=e.getStatus("selectedDataPoints");if(e.getStatus("rangeSelection")){e.setStatus("selectedDataPoints",[]);e.fireEvent("clearPlot").fireEvent("deselectDataPoint",{targets:i.getNodes(t,e),isAnyOtherSelected:false});e.setStatus("rangeSelection",false);e.setStatus("rangeDomain",null)}}function S(e,t){var i=[];for(var a=0,r=t.length;a<r;a++){var o=e.mappingDataPointInfo(t[a]);if(o){i.push(o)}}i=i.sort(function(e,t){return e.seqId-t.seqId});return i}function D(e,t){var i=[];var a=e.getDataModel();if(a&&a._timeAxis){var r=a.timeAxis().metaData.map(function(e){return e.id});t.forEach(function(e){var t=a.getDataPoint(e);if(t&&t._data&&i.indexOf(t._data[r+n.DIMENSION_PARSED_VALUE_SUFFIX])<0){i.push(t._data[r+n.DIMENSION_PARSED_VALUE_SUFFIX])}})}return i}var w=function(e){if(!e.isTrellis()&&e.getProperties().get("legend.selectionFeedback")){e.getNodes(e.NodeType.LEGEND_ITEM).each(function(){var t=d3.select(this);if(t.classed(a.CSS.CLASS.LEGENDITEM)){var i="transparent";var r=t.select("rect").classed(a.CSS.CLASS.HOVER_SHADOW);if(t.classed(a.CSS.CLASS.LEGENDITEM+a.CSS.CLASS.SELECTED)){var o=r?"legend.hoverSelectedShadow.color":"legend.mouseDownShadow.color";i=e.getProperties().get(o)}else if(r){i=e.getProperties().get("legend.hoverShadow.color")}t.select("rect").attr("fill",i)}})}};function C(e,t,i){var a=e.getProperties().get(t);var r;if(a&&a.color){r=a.color}else{r=i}return r}var T=function(e){if(!e.isTrellis()&&e.getProperties().get("legend.selectionFeedback")){e.getNodes(e.NodeType.MBC_LEGEND_ITEM).each(function(){var t=d3.select(this);if(t.classed(a.CSS.CLASS.MBCLEGENDITEM)){var i=null;var r=null;var o=t.classed(a.CSS.CLASS.HOVER_SHADOW);if(t.classed(a.CSS.CLASS.MBCLEGENDITEM+a.CSS.CLASS.SELECTED)){r=a.MBCLEGEND.VISIBLE_STROKE_WIDTH;if(o){i=C(e,"legend.hoverSelectedShadow")}else{i=C(e,"legend.mouseDownShadow",a.MBCLEGEND.HOVER_SHADOW_MOUSE_DOWN_COLOR)}}else if(o){r=a.MBCLEGEND.VISIBLE_STROKE_WIDTH;i=C(e,"legend.hoverShadow",a.MBCLEGEND.HOVER_SHADOW_COLOR)}t.attr("stroke",i);t.attr("stroke-width",r)}})}};return{getDataPointIds:y,getDataPointNodes:h,isLegendTriggerable:_,getTargets:b,getDataPoint:function(e){return i.getContext(e)},getDataPointContext:function(e){return e},hasDataPoint:function(e,t){return e&&e.some(function(e){return+e===+t})},processTimeCursor:A,getDpInfos:S,cleanRangeSelection:x,getSelectedPeriods:D,getCorrespondingLegendItem:p,updateCorrespondingSelectedLegendItems:d,resetLegendSelectionEffect:w,resetMBCLegendSelectionEffect:T,getColorProperty:C}});define("sap/viz/chart/components/util/ColorUtil",["sap/viz/framework/common/util/DataGraphics"],function(e){var t="#000000";var i="#ffffff";var a="#333333";var r=116;var o="#ffffff";var n=1.2;var l=.7;var s={};var u=function(e){var t=e;t=t.toLowerCase();t=d3.rgb(t);return t};s.getMixedColor=function(e,t,i){var a=e;if(i!==1){if(t.toLowerCase()==="transparent"){t="#ffffff"}var r=u(e);var o=u(t);var n=d3.rgb(r.r*i+o.r*(1-i),r.g*i+o.g*(1-i),r.b*i+o.b*(1-i));a=n.toString()}return a};s.getReferenceColorValue=function(e){e=e.toLowerCase();var t=/([a-z]+)\((.*)\)/i.exec(e);var i;if(t&&t[1]==="rgba"&&t[2]){var a=t[2].split(",");var r=a[3];e=d3.rgb(a[0],a[1],a[2]);i=d3.rgb(s.getMixedColor(e.toString(),o,r))}else{i=u(e)}var n=(i.r*299+i.g*587+i.b*114)/1e3;return n};s.getDataLabelColor=function(e,o){var n=t;if(o){n=a}else{if(e){if(e.toLowerCase()==="transparent"){e="#ffffff"}var l=s.getReferenceColorValue(e);if(l<=r){n=i}}}return n};s.getStrokeColorAdjustValue=function(e){var t=s.getBackgroundColor(e);if(t.toLowerCase()==="transparent"){t="#ffffff"}var i=s.getReferenceColorValue(t);var a=l;if(i<=r){a=n}return a};s.getBackgroundColor=function(t){var i="transparent";var a="v-background-body";var r;var o;for(o=t;o;o=o.parentNode){if(!d3.select(o).select("."+a).empty()){r=o;break}}if(r){var n=d3.select(r).select("."+a).node();var l;if(n){l=e.getData(n);if(l){i=l.color}}if(!i||i.toLowerCase()==="transparent"){var s;if(r.parentNode&&r.parentNode.parentNode){s=d3.select(r.parentNode.parentNode).select("."+a).node()}if(s){l=e.getData(s);if(l){i=l.color}}}if(!i){i="transparent"}}return i};s.getBgColor=function(e,t){var i="#ffffff";for(var a=0;a<t.length;++a){var r=e.get(t[a]);if(r&&r!=="transparent"){i=r;break}}return i};return s});define("sap/viz/chart/components/plots/PlotHelper",["jquery"],function(e){var t={pie:{options:{isDonut:false}},donut:{options:{isDonut:true}},column:{options:{isHorizontal:false}},stacked_column:{options:{isSupportFlexibleStack:true,isHorizontal:false}},"100_stacked_column":{options:{isHorizontal:false}},bar:{options:{isHorizontal:true}},bullet:{options:{isHorizontal:true}},vertical_bullet:{options:{isHorizontal:false}},stacked_bar:{options:{isHorizontal:true}},"100_stacked_bar":{options:{isHorizontal:true}},line:{options:{isHorizontal:false}},area:{options:{isHorizontal:false}},horizontal_area:{options:{isHorizontal:true}},horizontal_line:{options:{isHorizontal:true}},"100_area":{options:{isHorizontal:false}},"100_horizontal_area":{options:{isHorizontal:true}},combination:{options:{isHorizontal:false}},horizontal_combination:{options:{isHorizontal:true}},bubble:{options:{}},time_bubble:{options:{}},scatter:{options:{}},timeseries_scatter:{options:{}},timeseries_bubble:{options:{}},stacked_combination:{options:{isHorizontal:false}},horizontal_stacked_combination:{options:{isHorizontal:true}},mekko:{options:{isHorizontal:false}},"100_mekko":{},timeseries_line:{options:{isHorizontal:false}},timeseries_column:{options:{isHorizontal:false}},timeseries_stacked_column:{options:{isHorizontal:false}},timeseries_100_stacked_column:{options:{isHorizontal:false}},timeseries_combination:{options:{isHorizontal:false}},dual_timeseries_combination:{options:{isHorizontal:false}},timeseries_stacked_combination:{options:{isHorizontal:false}},horizontal_mekko:{options:{isHorizontal:true}},"100_horizontal_mekko":{options:{isHorizontal:true}},timeseries_waterfall:{options:{isHorizontal:false}},waterfall:{options:{isHorizontal:false}},stacked_waterfall:{options:{isHorizontal:false}},horizontal_waterfall:{options:{isHorizontal:true}},horizontal_stacked_waterfall:{options:{isHorizontal:true}},radar:{options:{isHorizontal:false}},heatmap:{options:{}},treemap:{options:{}},timeseries_bullet:{options:{isHorizontal:false}},combinationEx:{options:{}}};return{register:function(e,i){t[e]=i},create:function(i,a,r,o){var n=t[i];var l=o?e.extend(true,{},n?n.options:{},o):n.options;l.name="plotArea";l.renderType=i;return new a(r,l)},getOptions:function(e){var i=t[e];return i&&i.options}}});define("sap/viz/chart/components/util/ChartConstants",[],function e(){var t="_";var i="horizontal";var a="combination";var r="stacked";var o="column";var n="bar";var l="bullet";var s="line";var u="scatter";var c="bubble";var h="pie";var p="timeseries_scatter";var d="categoryAxisNavigator";var f="categoryAxis2Navigator";var v="timeAxisNavigator";var g="datapointNavigator";var m="legendNavigator";var y="colorLegendNavigator";var _="mbcLegendNavigator";var A="heatmap";var b="treemap";var x="waterfall";var S="timeseries_waterfall";var D="area";var w="radar";var C="100";var T={STACKED:r,COMBINATION:a,COLUMN:o,BAR:n,BULLET:l,LINE:s,SCATTER:u,BUBBLE:c,PIE:h,TIMESCATTER:p,COLUMN_COMBINATION:o+t+a,STACKED_COLUMN:r+t+o,STACKED_BAR:r+t+n,STACKED_COMBINATION:r+t+a,HORIZONTAL_COMBINATION:i+t+a,HORIZONTAL_STACKED_COMBINATION:i+t+r+t+a,CATEGORYAXIS_NAVIGATOR:d,CATEGORYAXIS2_NAVIGATOR:f,TIMEAXIS_NAVIGATOR:v,DATAPOINT_NAVIGATOR:g,LEGEND_NAVIGATOR:m,COLORLEGEND_NAVIGATOR:y,MBCLEGEND_NAVIGATOR:_,HEATMAP:A,TREEMAP:b,WATERFALL:x,TIMEWATERFALL:S,AREA:D,RADAR:w,PERCENT_STACKED_COLUMN:C+t+r+t+o,PERCENT_STACKED_BAR:C+t+r+t+n};return T});define("sap/viz/chart/components/util/ChartTypeUtils",["sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/components/util/ChartConstants"],function e(t,i){var a={addTrellisType:function(e){var t=[];for(var i=0;i<e.length;++i){if(e[i].indexOf("info/")>=0&&e[i].indexOf("info/trellis_")===-1){var a=e[i].replace("info/","info/trellis_");t.push(a)}}return[].concat(e,t)},getChartTypeProperty:function(e){var a={};if(e.indexOf(i.STACKED)>-1){if(e.search(/bar|column/)!==-1){a.type=i.STACKED_COLUMN}else if(e.indexOf(i.STACKED_COMBINATION)>-1){a.type=i.STACKED_COMBINATION}}else{if(e.search(/bar|column/)!==-1){a.type=i.COLUMN}else if(e.indexOf(i.BULLET)>-1){a.type=i.BULLET}else if(e.indexOf(i.LINE)>-1){a.type=i.LINE}else if(e.indexOf(i.COMBINATION)>-1){a.type=i.COLUMN_COMBINATION}else if(e.search(/pie|donut/)!==-1){a.type=i.PIE}else if(e.search(/^timeseries.*(scatter|bubble)/)!==-1){a.type=i.TIMESCATTER}else if(e.search(/(scatter|bubble)/)!==-1){a.type=i.SCATTER}else if(e.indexOf(i.HEATMAP)>-1){a.type=i.HEATMAP}else if(e.indexOf(i.TREEMAP)>-1){a.type=i.TREEMAP}else if(e.indexOf(i.WATERFALL)>-1){a.type=i.WATERFALL}else if(e.indexOf(i.AREA)>-1){a.type=i.AREA}else if(e.indexOf(i.RADAR)>-1){a.type=i.RADAR}}var r=t.getOptions(e);if(!r){return null}if(r.isHorizontal!==undefined){a.isVerticalRender=!r.isHorizontal}return a}};return a});define("sap/viz/chart/components/accessibility/ChartComponentNavigator",["sap/viz/framework/common/util/ObjectUtils"],function(e){function t(t){this._isVerticalRender=t.isVerticalRender;this._renderType=t.renderType;this._navigatorType=t.navigatorType;this._constants={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"};e.extendByRepalceArray(true,this._constants,t.chartConstants)}var i=t.prototype;i.init=function(){};i.destroy=function(){this._renderType=null;this._isVerticalRender=null;this._constants=null;this._navigatorType=null};i.left=function(e){return null};i.right=function(e){return null};i.up=function(e){return null};i.down=function(e){return null};i.getFirstStartPoint=function(){return null};return t});define("sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory",["sap/viz/chart/components/util/ChartTypeUtils","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/accessibility/ChartComponentNavigator"],function(e,t,i){var a={};a.createNavigator=function(a,r){var o=a.renderType;var n=e.getChartTypeProperty(o);if(!n){return null}a.renderType=n.type;if(n.isVerticalRender!==undefined){a.isVerticalRender=n.isVerticalRender}a.chartConstants=t;a.isDual=o.indexOf("dual")>-1;a.isPercentage=o.indexOf("100")>-1;a.isTimeColumn=/timeseries_column/.test(o);a.isTimeWaterfall=/timeseries_waterfall/.test(o);a.isTimeBullet=/timeseries_bullet/.test(o);a.navigatorType=r;var l=this.get(r,n.type)||i;return new l(a)};var r={};a.get=function(e,i){if(e===t.DATAPOINT_NAVIGATOR){return r[i]}else{return r[e]}};a.register=function(e,i,a){if(e===t.DATAPOINT_NAVIGATOR){r[i]=a}else{r[e]=a}};return a});define("sap/viz/chart/components/accessibility/ColorLegendNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/ChartComponentNavigator"],function(e,t){function i(e){i.superclass.constructor.apply(this,arguments);this._legendLabels=this.buildLegendLabels(e.cells);this._cells=e.cells;this._horizontalSingle=this._cells.length==1?true:false}e.extend(i,t);var a=i.prototype;a.buildLegendLabels=function(e){var t=[];this._verticalSingle=true;for(var i=0;i<e.length;++i){if(e[i].length>1){this._verticalSingle=false}for(var a=0;a<e[i].length;++a){var r=e[i][a].id;var o={row:i,col:a};t[r]=o}}return t};a.destroy=function(){i.superclass.destroy.apply(this,arguments);this._cells=null;this._legendLabels=null};a.up=function(e){if(this._horizontalSingle){return this.getSiblingCell(e,-1)}else{return this.getNextRowCell(e,-1)}};a.down=function(e){if(this._horizontalSingle){return this.getSiblingCell(e,1)}else{return this.getNextRowCell(e,1)}};a.left=function(e){if(this._verticalSingle){return this.getNextRowCell(e,-1)}else{return this.getSiblingCell(e,-1)}};a.right=function(e){if(this._verticalSingle){return this.getNextRowCell(e,1)}else{return this.getSiblingCell(e,1)}};a.getCell=function(e){var t=this._legendLabels[e];return this._cells[t.row][t.col]||null};a.getSiblingCell=function(e,t){var i=this._legendLabels[e];var a=this._cells[i.row][i.col+t];return a?a:null};a.getNextRowCell=function(e,t){var i=this._legendLabels[e];var a=this._cells[i.row+t];if(!a){return null}return a[i.col]!=null?a[i.col]:a[a.length-1]};a.getFirstStartPoint=function(){return this._cells[0][0]};a.isLastCellID=function(e){if(this._cells){var t=this._cells.length;var i=this._cells[t-1].length;return e===this._cells[t-1][i-1].id}else{return false}};return i});define("sap/viz/chart/scales/BaseScale",[],function(){var e=function(e,t){this.__className="sap.viz.scale.BaseScale";this._scale=undefined;this._type=null;this._domain=e;this._range=t;this._metaData=null;this._isReset=false;this._option=null};e.prototype.scale=function(e){};e.prototype.getDomain=function(){return this._domain};e.prototype.setDomain=function(e){this._domain=e;this._isReset=true;return this};e.prototype.getRange=function(){return this._range};e.prototype.setRange=function(e){this._range=e;this._isReset=true;return this};e.prototype.getOption=function(){return this._option};e.prototype.setOption=function(e){this._option=e;return this};e.prototype.getMetaData=function(){return this._metaData};e.prototype.normalizeValue=function(e){return e};e.prototype.destroy=function(){this._domain=null;this._range=null;var e=this._scale;if(e){if(e.domain){e.domain([])}if(e.range){e.range([])}}this._scale=null;this._type=null;this._metaData=null;this.__className=null};return e});define("sap/viz/chart/scales/ValueScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/NumberUtils"],function(e,t,i){var a=function(e,t,i,r){a.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.ValueScale";this._tickHint=undefined;this._domainFixed=i?i:[false,false];this._type="linear";this._min="auto";this._max="auto";this._dataBound=r&&r.dataBound;this._autoDomain=[];this._domainChanged=false;this._zeroAdjusted=true;this.maximizedDomain=r&&r.maximizedDomain;this._allowDecimals=r&&r.hasOwnProperty("allowDecimals")?r.allowDecimals:true;this._initScale()};e.extend(a,t);a.prototype.scale=function(e){this._ensureScaled();return this._scale(e)};a.prototype.nice=function(){this._ensureScaled();this._scale=this._scale.nice();this._domain=this._scale.domain();this._range=this._scale.range();return this};a.prototype.ticks=function(e){this._ensureScaled();var t=this._scale.ticks(e);if(!this.getAllowDecimals()){t=t.filter(function(e){return!i.isFloat(e)})}return t};a.prototype.getTickHint=function(){return this._tickHint};a.prototype.setTickHint=function(e){this._tickHint=e};a.prototype.isFixed=function(){return this._domainFixed&&(this._domainFixed[0]||this._domainFixed[1])};a.prototype.getDataBound=function(){return this._dataBound};a.prototype.getDomainFixed=function(){return this._domainFixed};a.prototype.setDomainFixed=function(e){this._domainFixed=e};a.prototype.getDomainChanged=function(){return this._domainChanged};a.prototype.setDomainChanged=function(e){this._domainChanged=e};a.prototype.getAllowDecimals=function(){return this._allowDecimals};a.prototype.setAllowDecimals=function(e){this._allowDecimals=e};a.prototype.getZeroAdjusted=function(){return this._zeroAdjusted};a.prototype.setZeroAdjusted=function(e){this._zeroAdjusted=e};a.prototype.total=function(e){if(this._domain){this._scale.domain([0,e])}};a.prototype._ensureScaled=function(){if(this._scale===undefined||this._isReset===true){this._initScale()}};a.prototype._initScale=function(){this._scale=d3.scale.linear();if(this._domain){this._scale.domain(this._domain)}if(this._range){this._scale.range(this._range)}this._isReset=false};a.prototype.getAutoDomain=function(){return this._autoDomain};a.prototype.setAutoDomain=function(e){this._autoDomain=e;return this};a.prototype.destroy=function(){a.superclass.destroy.call(this);this._domainFixed=null;this._autoDomain=null;this._min=null;this._max=null;this._isReset=null;this._tickHint=null;this._domainChanged=null;this._zeroAdjusted=null};return a});define("sap/viz/chart/scales/ScalesFactory",[],function(){var e=[];var t={};t.register=function(t,i,a){e.push({chartType:t,scaleType:i,scaleClass:a})};t.getScale=function(t,i){var a=null;for(var r=e.length-1;r>=0;--r){var o=e[r];if(o.chartType===t&&o.scaleType===i){a=o.scaleClass;break}if(!a&&!o.chartType&&o.scaleType===i){a=o.scaleClass}}return a};return t});define("sap/viz/chart/scales/ScaleUtil",["sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/chart/scales/ScalesFactory","sap/viz/framework/common/util/DataUtils","sap/viz/framework/scale/ScaleUtil"],function e(t,i,a,r,o,n,l){var s=["measureNamesDimension","measureNames"];var u=l.hasNoNullValue;function c(e,t){var i=false;if(!/timeseries/.test(e._chartType)){var a=e.valueAxis().values[t];var r=e.valueAxis2().values[t];i=u(a,r)}else{var o=e.color();var n=e.getInitSeries();var l=o.rowArray.length;var s=n.length/l;for(var c=t*s;!i&&c<(t+1)*s;c++){i=n[c].some(function(e){return e.valueAxis!=null})}}return i}function h(e,t){var i=false;var a;if(!/timeseries/.test(e._chartType)){var r=e.valueAxis().values;var o=e.valueAxis2().values;if(e.color().rowArray){for(a=0;!i&&a<r.length;++a){i=u(r[a][t],o[a][t])}}else{i=u(r[t],o[t])}}else{var n=e.shape();var l=n.rowArray.length;var s=e.getInitSeries();for(a=t;!i&&a<s.length;a+=l){i=s[a].some(function(e){return e.valueAxis!=null})}}return i}var p={generateUniqueDomain:function(e,t,i,a,r,o,l){e=e.filter(function(e,t){return!i[t].hidden});t=Math.min(t,i.filter(function(e){return!e.hidden}).length);if(e.length===0){return[]}var s=[];var u=e[0].length;var p,d;var f={};for(p=0;p<u;++p){if(o&&(l==="color"?!c(r,p):!h(r,p))){continue}var v=[];for(d=0;d<t;++d){v.push(e[d][p])}var g=n.valuesToString(v);if(f.hasOwnProperty(g)){f[g].oriIndex.push(p);continue}v.oriIndex=[p];f[g]=v;s.push(v)}return s},getRoughTickNum:function(e){var i=1;var a=-1;var r=e.getRange();var o=Math.abs(r[0]-r[r.length-1]);if(o>10){a=i+Math.round(o/100)}else{a=i}if(!e.getAllowDecimals()){var n=e.ticks(a);var l=2;var s=n[1]-n[0];if(t.isFloat(s)){a=Math.floor(n.length*s);if(a<l){a=Math.ceil(e._domain[1]-e._domain[0]);a=Math.max(a,l)}}}e.setTickHint(a);return a},nice:function(e,t){if(!e.isFixed()){return this.perfect(e,t)}else{var i=e.getDomainFixed();if(!(i[0]&&i[1])){var a=e.getDomain();var r=e.getRange();var n=o.getScale(null,"value");var l=new n(a,r,i);this.perfect(l);var s=l.getDomain();if(i[0]){e.setDomain([a[0],s[1]])}else{e.setDomain([s[0],a[1]])}}return this.getRoughTickNum(e)}},perfect:function(e,i){var a=e.nice();var r=1;var o=100;var n=e.getDomain(),l=n.length;n=t.preciseObject(n);var s=n[0];var u=n[1];var c=i||this.getRoughTickNum(e);var h=a.ticks(c);h=t.preciseObject(h);var p=true;var d;if(h.length===0){p=false}else if(h.length>1){d=h[1]-h[0]}else{var f=Math.abs(n[0]-h[0]);var v=Math.abs(n[l-1]-h[0]);if(f>v){d=f}else{d=v}}var g=r;var m=h.length;if(p){g=m;var y,_;if(n[0]<n[1]){y=0;_=l-1}else{y=l-1;_=0}if(h[0]!==n[y]){n[y]=h[0]-d;g++}if(h[m-1]!==n[_]){n[_]=h[m-1]+d;g++}}a.tickNum=g;a.distance=d;a.setTickHint(g-1);var A=t.preciseObject(n);a.setDomain(A);a.setAutoDomain(A);return g-1},sync:function(e,i){var a=e.getDomain();var r=i.getDomain();if(a[0]>a[1]&&r[0]<r[1]||a[0]<a[1]&&r[0]>r[1]||a[0]<0&&a[1]<0||r[0]<0&&r[1]<0||a[0]>0&&a[1]>0||r[0]>0&&r[1]>0){return}var o=0;var n=0;var l=0;var s=0;var u=e.tickNum;var c=i.tickNum;var h=(a[1]-a[0])/(u-1);h=t.preciseSimple(h);var p,d,f;for(p=0;p<u;p++){d=t.preciseSimple(a[0]+p*h);if(d>0){o++}else if(d<0){n++}}var v=(r[1]-r[0])/(c-1);v=t.preciseSimple(v);for(p=0;p<c;p++){d=t.preciseSimple(r[0]+p*v);if(d>0){l++}else if(d<0){s++}}if(o>l){f=o-l;if(r[0]<r[1]){r[1]+=f*Math.abs(v);i.tickNum+=f}else if(r[0]>r[1]){r[0]+=f*Math.abs(v);i.tickNum+=f}}else if(o<l){f=l-o;if(a[0]<a[1]){a[1]+=f*Math.abs(h);e.tickNum+=f}else if(a[0]>a[1]){a[0]+=f*Math.abs(h);e.tickNum+=f}}if(n>s){f=n-s;if(r[0]<r[1]){r[0]-=f*Math.abs(v);i.tickNum+=f}else if(r[0]>r[1]){r[1]-=f*Math.abs(v);i.tickNum+=f}}else if(n<s){f=s-n;if(a[0]<a[1]){a[0]-=f*Math.abs(h);e.tickNum+=f}else if(a[0]>a[1]){a[1]-=f*Math.abs(h);e.tickNum+=f}}a[0]=t.preciseSimple(a[0]);a[1]=t.preciseSimple(a[1]);r[0]=t.preciseSimple(r[0]);r[1]=t.preciseSimple(r[1]);e.setDomain(a);i.setDomain(r);e.setTickHint(e.tickNum-1);i.setTickHint(i.tickNum-1)},domainArrayCompare:function(e,t){function i(e){var t=null;if(typeof e==="string"||!e){t=e}else if(typeof e==="object"&&(e.d||e.v)){t=e.v||e.d}return t}function a(e,t){var a=i(t);for(var r=0;r<e.length;r++){var o=i(e[r]);if(a===o){return r}}return-1}if(e===t){return true}if(!e||!t){return false}if(e.length!==t.length){return false}var r=t.slice(0);for(var o=0;o<e.length;o++){var n=a(r,e[o]);if(n===-1){return false}else{r.splice(n,1)}}return true},findScaleResult:function(e,t,i){if(!e){return null}i=i||p.domainArrayCompare;var a=e.results;var r,o;for(o=0;o<a.length;o++){r=a[o];if(i(r.dataContext,t)){return r}}return null},shrinkedDomainFromColumns:function(e,t){var i=[];e=e||[];t=t||[];for(var a=0;a<e.length;a++){var r=[];for(var o=0;o<t.length;o++){var n=t[o];if(n>=e[a].length){break}r.push(e[a][n])}if(r.length>0){i.push(r)}}return i},shrinkedDomain:function(e,t){function a(e){var t=e.values;if(t.length>1){var i=t[0];for(var a=1;a<t.length;a++){if(i!==t[a]){return false}}}return true}var r=[];if(!i.isExist(t)||t.length<=1){return e}for(var o=0;o<t.length;o++){var n=t[o];if(s.indexOf(n.id)===-1||!a(n)){r.push(o)}}return p.shrinkedDomainFromColumns(e,r)}};return p});define("sap/viz/chart/scales/ScaleConstant",[],function(){var e={};e.TYPE_VALUE_SCALE_MEKKO="mekko";e.PATTERN_DEFAULT_VALUE={AC:{color:"#323232"},FC:{color:"#3F3F3F",pattern:"hatching",stroke:"#ffffff",strokeWidth:"1px"},PY:{color:"#969696"},PL:{color:"#ffffff",pattern:"nonFill",stroke:"#323232",strokeWidth:"1px"}};e.DEFAULTPATTERN="pattern";e.DEFAULTPATTERN2="pattern2";e.PATTERN_DEFAULT_VALUE[e.DEFAULTPATTERN]={color:"black",pattern:"solid",stroke:"rgb(187, 189, 191)",strokeWidth:"1px"};e.PATTERN_DEFAULT_VALUE[e.DEFAULTPATTERN2]={color:"rgb(50, 50, 50)",pattern:"nonFill",stroke:"rgb(128, 128, 128)",strokeWidth:"1px"};return e});define("sap/viz/chart/scales/ValueScaleUtil",["sap/viz/framework/common/util/NumberUtils","sap/viz/chart/scales/ScaleUtil","sap/viz/chart/scales/ScaleConstant","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ScalesFactory"],function(e,t,i,a,r){var o="layout";var n=7;var l=3;var s=6;var u={};u.getStackedArrayValues=function(e,t){if(a.isArray(e)){var i=[0,0];for(var r in e){if(e.hasOwnProperty(r)){u.getStackedArrayValues(e[r],i)}}if(i[0]<t[0]){t[0]=i[0]}if(i[1]>t[1]){t[1]=i[1]}}else{if(+e<0){t[0]+=+e}else{t[1]+=+e}}};u.prepareValueScaleData=function(e,t,i){if(t===o){var a=[];var r=function(e,t,i){if(e.values.hasOwnProperty(t)){i[t]=[];i[t][0]=0;i[t][1]=0;u.getStackedArrayValues(e.values[t],i[t])}};if(i&&i.length>0){for(var n=0;n<i.length;n++){r(e,i[n],a)}}else{for(var l in e.values){if(e.values.hasOwnProperty(l)){r(e,l,a)}}}e.range=a}};u.getTicksPosition=function(e,t){var i=[];for(var a=0,r=e.length;a<r;++a){i.push(t.scale(e[a]))}return i};u.getTicks=function(t){function i(t,i){i=i.map(function(t){return e.precise(t)});var a;var r;var o=t.length;if(t[0]<=t[o-1]){a=t[0];r=t[o-1]}else{a=t[o-1];r=t[0]}if(i.length>0){if(i[0]!==a){i.unshift(a)}if(i[i.length-1]!==r){i.push(r)}}return i}var a=t.getTickHint()||n;var r=t.ticks(a);var o=i(t.getDomain(),r);return e.preciseObject(o)};u.perfectTicks=function(e,i){return t.nice(e,i)};u.perfectTimeTicks=function(i){var a=i.getDomain();var r=1e3*60*60;var o=r*24;var n=o*30;var l=n*12;if(e.isNoValue(a[0])){a[0]=0}if(e.isNoValue(a[1])){a[1]=a[0]+1}var s=a[1]-a[0];var u=new Date(a[0]);var c=new Date(a[1]);u.setMinutes(0);u.setSeconds(0);u.setMilliseconds(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);var h;if(s<3*o){c.setHours(c.getHours()+1);h={get:Date.prototype.getHours,set:Date.prototype.setHours,format:"dd/mm/yyyy hh:mm"};s=(c.getTime()-u.getTime())/r}else if(s<3*n){u.setHours(0);c.setHours(0);c.setDate(c.getDate()+1);h={get:Date.prototype.getDate,set:Date.prototype.setDate,format:"dd/mm/yyyy"};s=(c.getTime()-u.getTime())/o}else if(s<3*l){u.setHours(0);u.setDate(1);c.setHours(0);c.setDate(1);c.setMonth(c.getMonth()+1);h={get:Date.prototype.getMonth,set:Date.prototype.setMonth,format:"mm/yyyy"};s=(c.getFullYear()-u.getFullYear())*12+c.getMonth()-u.getMonth()}else{u.setHours(0);u.setDate(1);u.setMonth(0);c.setHours(0);c.setDate(1);c.setMonth(0);c.setFullYear(c.getFullYear()+1);h={get:Date.prototype.getFullYear,set:Date.prototype.setFullYear,format:"yyyy"};s=c.getFullYear()-u.getFullYear()}var p=t.getRoughTickNum(i);var d;var f=1;if(p>2){p=e.preciseSimple(p);s=e.preciseSimple(s);for(d=0;d<p-1;d++){var v=false;for(f=p-1;f>1;f--){if((s+d)%f===0){v=true;break}}if(v){break}}}if(p>2){i.tickNum=f+1;i.timeUnitGap=(s+d)/f}else{i.tickNum=p;i.timeUnitGap=s}h.set.apply(c,[h.get.apply(c,[])+d]);var g=i.getDomainFixed();if(!g[0]&&!g[1]){i.setDomain([u.getTime(),c.getTime()])}else if(!g[0]){i.setDomain([u.getTime(),a[1]])}else if(!g[1]){i.setDomain([a[0],c.getTime()])}i.timeUnit=h};u.syncTicks=function(e,i){if(!e.isFixed()&&!i.isFixed()){t.sync(e,i)}};u.correctNoValueDomain=function(t){var i=t.slice();i[0]=e.isNoValue(i[0])?0:t[0];i[1]=e.isNoValue(i[1])?t[0]+1:t[1];return i};u.extendDomainForDataLabel=function(e,t,i,a){var r=e.slice(),o,n,l,s;if(r[0]>0){r[0]=0}else if(r[1]<0){r[1]=0}s=a?[i[0]?i[0].width:0,i[1]?i[1].width:0]:[i[0]?i[0].height:0,i[1]?i[1].height:0];if(r[1]>0&&r[0]<0){if(s[0]+s[1]>=t[1]/2){r[1]=e[1]+(e[1]-e[0])/(1+s[0]/s[1]);r[0]=r[1]-2*(e[1]-e[0])}else{var u=[r[0],r[1]];r[0]=(s[0]*u[1]-t[1]*u[0]+s[1]*u[0])/(s[0]+s[1]-t[1]);r[1]=(t[1]*u[1]-s[1]*r[0])/(t[1]-s[1])}}else if(r[1]>0){if(s[1]>=t[1]/2){r[1]=r[1]*2}else{r[1]=s[1]*r[1]/(t[1]-s[1])+r[1]}}else if(r[0]<0){if(s[0]>t[1]/2){r[0]=r[0]*2}else{r[0]=s[0]*r[0]/(t[1]-s[0])+r[0]}}return r};u.generateValueScale=function(e,t){var i=null;var o=null;if(t){i=+t.min;if(isNaN(i)){i=null}o=+t.max;if(isNaN(o)){o=null}}var n=i!=null;var l=o!=null;var s=t.minMax||{};if(s.min===undefined){s.min=0}if(s.max===undefined){s.max=0}var u=n?parseFloat(i):s.min;var c=l?parseFloat(o):s.max;if(u>=c){if(n===true){n=false;l=false;u=s.min;c=s.max}else if(l===true){n=false;l=true;u=s.min}}if(!n&&!l){if(c===0&&u===0&&!(t&&t.allowZeroMinMax===true)){c=1}}if(a.isExist(t)&&a.isExist(t.allowZeroMinMax)){delete t.allowZeroMinMax}var h=null;t=t||{};t.maximizedDomain=e.maximizedDomain;var p=r.getScale(t.type,"value");h=new p([u,c],[0,1],[n,l],t);h.setAutoDomain([s.min,s.max]);return h};return u});define("sap/viz/chart/components/util/ValueAxisUtils",["sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/scales/ScaleConstant","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ScalesFactory"],function(e,t,i,a,r,o,n){var l=[0,1];var s=function(e,t,i,a,r){var o=n.getScale(r,"value");var l=new o(e,t,i,{maximizedDomain:a&&a.maximizedDomain,mekkoValue:a&&a.getMekkoValue&&a.getMekkoValue()});if(a&&a.getDomainChanged){l.setDomainChanged(a.getDomainChanged())}if(a&&a.getZeroAdjusted){l.setZeroAdjusted(a.getZeroAdjusted())}if(a&&a.getAllowDecimals){l.setAllowDecimals(a.getAllowDecimals())}return l};function u(e,t){if(e._minmax){return e._minmax}t=t||[Infinity,-Infinity];for(var i=e.length;i--;){var a=e[i];if(a instanceof Array){t=u(a,t)}else if(a!=null){if(a<t[0]){t[0]=a}if(a>t[1]){t[1]=a}}}return t}function c(e,t){if(e&&t){var i=e.getDomain().slice();if(!i.length){i=l.slice()}var a=e.getDomainFixed().slice();var r,o;if(!a[0]||!a[1]){var n=[];var s=u(t);if(e.getDomainChanged()){n=i}else{n=s}t._minmax=s;r=n[0];o=n[1]}var c=a[0]?parseFloat(i[0]):r;var h=a[1]?parseFloat(i[1]):o;if(r>o){a=[false,false];c=r;h=o}return{domain:[c,h],domainFixed:a}}else{return null}}function h(e,t,i){var r=e.domain.slice(),o=e.domainFixed.slice();if(!o[0]){if(r[0]<0){r[0]=r[0]*(1+t)}else if(i){r[0]=0}else{r[0]=r[0]*(1-t)}}if(!o[1]){if(r[1]<0){if(i){r[1]=0}else{r[1]*=1-t}}else{r[1]*=1+t}}return{domain:a.correctNoValueDomain(r),domainFixed:o}}function p(e,t){var i=e.domain.slice(),r=e.domainFixed.slice(),o=i[0]===i[1]?1:Math.floor((i[1]-i[0])*t);i[0]-=r[0]?0:o;i[1]+=r[1]?0:o;return{domain:a.correctNoValueDomain(i),domainFixed:r}}function d(e,t){return e.start>=t.start&&e.start<=t.end||e.end>=t.start&&e.end<=t.end||t.start>=e.start&&t.start<=e.end||t.end>=e.start&&t.end<=e.end}function f(e,t){var i=e.length;var a=[];for(var r=0;r<=i-1;r++){var o=true;for(var n=0;n<i-1;n+=r+1){var l=e[n];if(n!==0){var s=a[a.length-1];if(d(l,s)){if(t&&l.value===0){a.push(l);continue}if(a.length>1){o=false;break}}else{a.push(l)}}else{a.push(l)}}if(e.length&&a.length){var u=e[i-1];var c=a[a.length-1];if(d(u,c)){if(!(t&&c.value===0)){a.pop()}}a.push(u)}if(o){break}else{a=[]}}return a}function v(e,t){if(0===e[0]&&0===e[1]){e[1]=1}if(!t.getAllowDecimals()){e[0]=Math.floor(e[0]);e[1]=Math.ceil(e[1])}}var g={isOverLapped:d,calculateLabelsToDrawHelper:f,calcScale:function(e,t,i){var r=e.getDomain().slice();var o=e.getDomainFixed();var n=e.getAutoDomain().slice();var l=e.isFixed();if(r[0]>0&&!(l&&o[0])){if(e.getZeroAdjusted()||r[0]===r[1]){r[0]=0}}if(r[1]<0&&!(l&&o[1])){if(e.getZeroAdjusted()||r[0]===r[1]){r[1]=0}}if(n[0]>0){n[0]=0}if(n[1]<0){n[1]=0}if(i.domain){if(!(l&&o[0])&&i.domain[0]!=null){r[0]=i.domain[0]}if(!(l&&o[1])&&i.domain[1]!=null){r[1]=i.domain[1]}}if(i.isLineChart){var u=Math.abs((r[1]-r[0])*5/(t[1]-t[0]));if(r[0]!==0&&!(l&&o[0])){r[0]-=u}if(r[1]!==0&&!(l&&o[1])){r[1]+=u}if(!i.keepAutoScale){var c=Math.abs((n[1]-n[0])*5/(t[1]-t[0]));if(n[0]!==0){n[0]-=c}if(n[1]!==0){n[1]+=c}}}v(r,e);v(n,e);var h=e&&e.getType&&e.getType();var p=s([r[0],r[1]],t,o,e,h);var d=s([n[0],n[1]],t,[false,false],e,h);var f=a.perfectTicks(p);a.perfectTicks(d);if(p.isFixed()){p.setAutoDomain(d.getDomain())}return{scale:p,tickHint:f,autoScale:d}},calcPercentageScale:function(e){var t=s([0,1],e);var i=a.perfectTicks(t);return{scale:t,tickHint:i}},updateScatterValueAxis:function(e,t,i,r){var o=r?p:h;var n=r?a.perfectTimeTicks:a.perfectTicks;var l=e.scale;var u=o(c(l,e.values),i,l.getZeroAdjusted());var d=u.domain;v(d,l);var f=s(d,t,u.domainFixed,l),g=n(f);var m=l.getAutoDomain();var y=s([m[0],m[1]],t,[false,false],l);m=o(c(y,e.values),i,l.getZeroAdjusted()).domain;v(m,l);y=s(m,t,[false,false],l);n(y);f.setAutoDomain(y.getDomain());return{scale:f,tickHint:g}},getTrellisBaseValueIndex:function(e,t){if(e===0){return 0}else if(t===0){return 1}else if(e<0&&t<0){return e>t?0:1}else if(e>0&&t>0){return e<t?0:1}else{return-1}},visibleRangeTransform:function(e,t,i){if(!o.isNumeric(t)||t<e[0]){t=e[0]}if(!o.isNumeric(i)||i>e[1]){i=e[1]}if(t>=i){return null}if(t>e[1]||i<e[0]){return null}return{ratio:(e[1]-e[0])/(i-t),delta:(e[0]-t)/(e[1]-e[0])}},getTimeAxisDomain:function(e,t,i,a,r,o){var n,l,s;if(r){n=e.height;l=i.height;s=t.y}else{n=e.width;l=i.width;s=t.x}s=Math.abs(s);var u=[],c=a[1]-a[0];if(o){u[0]=a[0]+c*s/l;u[1]=a[0]+c*(s+n)/l}else{u[0]=a[0]+parseInt(c*s/l);u[1]=a[0]+parseInt(c*(s+n)/l)}return u}};return g});define("sap/viz/chart/components/util/SeriesUtil",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/util/ChartConstants","sap/viz/framework/chartmodel/ContextBuilder"],function(e,t,i,a,r){var o=i.convertColor;var n=t.LINE_TYPE;function l(e,t,i,a,r){var o=t.position;var n=r?r.x:0;var l=r?r.y:0;var s=o.x+n;var u=o.y+l;var c=s+o.width;var h=u+o.height;if(a){if(i){s=c;c-=o.width}e.push([s,u]);e.push([c,u]);e.push([c,h]);e.push([s,h])}else{if(i){h=u;u+=o.height}e.push([s,h]);e.push([s,u]);e.push([c,u]);e.push([c,h])}}function s(e,t){e.graphic={color:e.color,width:1,opacity:1};delete e.color;e.isHorizontal=t}function u(e,t){var i=e.graphic.fill;var a=e.rawData.dp.context();var r=e.rawData.dp.additionCtx();var n=t.analyzeDataPoint("color",a,false,r);if(n&&n.color){i=o(n.color)}return i}function c(e,t,i,a){var r=i;var n=t.analyzeDataPoint("lineColor",e,false,a);if(n&&n.lineColor){r=o(n.lineColor)}return r}function h(e,t,i,a){var r=i||"solid";var o=t.analyzeDataPoint("lineType",e,false,a);if(o&&(o.lineType===n.DOT||o.lineType===n.DASHED||o.lineType===n.DOTTED)){r=o.lineType}return r}function p(e){var t=0;if(e){e.forEach(function(e){var i=0;for(var a=0;a<e.length;a++){if(e[a].valueAxis){i++}}t=Math.max(t,i)})}return t}function d(e,t){return e/t<10}function f(e,t,i){var a=r.buildSeriesLineContext(e,t);var o=i.analyzeSeriesStyle(a,"line");return o&&o.line&&o.line.type}var v={getMaxSeriesLength:p,isBigDensityMode:d,addRectSeriesPathPoints:l,parseSemanticColor:u,parseSemanticLineColor:c,parseSemanticLineType:h,parseSeriesLineType:f,getSeriesType:function(e,t,i){var r;if(e){switch(i){case a.COLUMN_COMBINATION:r=e.color?e.color.mndIndex:-1;break;case a.STACKED_COMBINATION:if(e.color){r=e.color.mndIndex}else if(e.color2){r=e.color2.mndIndex}else{r=-1}break}return t[r]||a.LINE}return a.LINE}};return v});define("sap/viz/chart/components/trendline/algorithm/Linear",[],function(){function e(e){var t,i,a,r,o,n,l,s,u=e.length;t=i=a=r=o=0;var c=+e[0].x;e.forEach(function(e){c=c<+e.x?c:+e.x});c=c<0?-1*c:c;for(var h=0;h<u;h++){var p=+e[h].x-c;t+=p;i+=+e[h].y;a+=p*e[h].y;r+=p*p;o+=e[h].y*e[h].y}var d=u*r-t*t;if(d===0){return false}n=(u*a-t*i)/d;l=(i-n*t)/u-n*c;return function(e){return n*e+l}}function t(e){return e instanceof Array&&e.length>1}return{type:"Linear",compute:e,validate:t}});define("sap/viz/chart/components/trendline/Trendline",["sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/SeriesUtil","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/ColorUtils","sap/viz/framework/common/util/TypeUtils","./algorithm/Linear"],function(e,t,i,a,r,o,n,l,s){var u=r.getDimensionParsedValue;var c=.1;function h(e){for(var t=0;t<e.length;t++){if(e[t]){return e[t]}}return null}var p={seriesAxisId:function(e){var t=h(e);if(t){return t.hasOwnProperty("valueAxis")?"valueAxis":"valueAxis2"}return null},indexOfObj:function(e,t){for(var a=0;a<t.length;a++){if(i.deepEqual(e,t[a])){return a}}return-1},seriesAxisHasTime:function(e){var t=h(e);if(t){return t.hasOwnProperty("timeAxis")}return false},findMapObj:function(e,t){var a=[];for(var r=0;r<t.length;r++){if(i.deepEqual(e,t[r])){a.push(r)}}return a}};function d(e,t){return e.map(function(e){return{x:u(e.timeAxis[0]),y:e.valueAxis instanceof Array?e.valueAxis[0]:e.valueAxis}}).filter(function(e){if(e){if(!l.isExist(e.y)&&t.invalidity){if(t.invalidity==="connect"){e.y=0;return true}else{return false}}}return!!e})}var f={yy:function(e,t){var i;if(p.seriesAxisHasTime(e)){i=d(e,t)}else{i=e.map(function(e){return{x:e.valueAxis instanceof Array?e.valueAxis[0]:e.valueAxis,y:e.valueAxis2 instanceof Array?e.valueAxis2[0]:e.valueAxis2}})}i=i.sort(function(e,t){return e.x<t.x?-1:e.x>t.x?1:0}).reduce(function(e,t){var i=e[e.length-1];if(i.x!==t.x||i.y!==t.y){e.push(t)}return e},[i[0]]);return i},spread:function(e,t){var i;if(p.seriesAxisHasTime(e)){return d(e,t)}else{var a=p.seriesAxisId(e);return e.map(function(e,t){return{x:t+1,y:e[a]}}).filter(function(e){return!!e})}}};function v(e,t,i,a,r){if(p.seriesAxisHasTime(i)){var n=Math.max.apply(null,i.map(function(e){return u(e.timeAxis[0])}));var l=r[0];var s;for(var c=1;c<=t;c++){s=o.getNperiodByTimeLevel(l,n,c,true);a.push({x:s,y:e(s)})}}else{var h=Math.max.apply(null,a.map(function(e){return e.x}));for(var d=0;d<t;d++,h++){a.push({x:h+1,y:e(h+1)})}}}var g=function(){var t={color:{name:"stroke"},type:{name:"stroke-dasharray",fn:function(t,i){switch(t){case e.LINE_TYPE.DASHED:return e.LINE_DASH_TYPE_ARRAY;case e.LINE_TYPE.SOLID:return t;default:return"1, "+ +i.size*2}}},size:{name:"stroke-width"}};function a(i){return Object.keys(i).reduce(function(a,r){var o=i[r],n=t[r];if(n){a[n.name]=n.fn?n.fn(o,i):o;if(n.name==="stroke-dasharray"&&o!==e.LINE_TYPE.DASHED&&o!==e.LINE_TYPE.SOLID){a["stroke-linecap"]="round"}}return a},{})}function r(e){var t=[];if(e._seriesType==="yy"){var i={};e.seriesContext.forEach(function(e){var a=JSON.stringify(e);if(!i[a]){t.push(e);i[a]=true}})}else{t=e.seriesContext}return t.map(function(e){return{seriesContext:e}})}function o(e,t){var i,a;if(e._seriesType==="yy"){var r=p.findMapObj(t.seriesContext,e.seriesContext);if(r.length>0){a=[];r.forEach(function(t){e.series[t].forEach(function(e){a.push(e)})});i=r[0]}}else{i=p.indexOfObj(t.seriesContext,e.seriesContext);if(i!==-1||i<e.series.length){a=e.series[i]}}return{series:a,seriesId:i}}function s(e,t,i,a){if(!e||!e.lines||e.lines!=="all"&&!l.isArray(e.lines)){return[]}var n=e.lines;if(t.seriesContext===null||t.seriesContext.length===0){if(n==="all"&&t.series&&t.series.length>0){var s=t.series[0];if(!s||s.length<2){return null}var u=f[t._seriesType](s,i),c=y(u);if(!c){return null}var h=+e.defaultStyle.forecast||0;if(h>0){v(c,h,s,u,a)}return[{seriesId:0,seriesContext:null,series:s,raw:u,fx:c,forecast:h}]}}else{var p=n==="all"?r(t):n;return p.map(function(r){if(r&&l.isPlainObject(r)){var n,s,u=o(t,r);var c=u.series,h=u.seriesId;if(!c||c.length<2){return null}n=f[t._seriesType](c,i);s=y(n);if(n.length<2||!s){return null}var p=+r.forecast||+e.defaultStyle.forecast||0;if(p>0){v(s,p,c,n,a)}return{seriesId:h,seriesContext:r.seriesContext,series:c,raw:n,fx:s,forecast:p}}})}}function u(e,t,i,a){var r,o=e[i];if(o&&o.scale){r=o.scale.scale(t[i]);r=n.fromCSSColor(r).lighter(c).toString();if(a){r=a.register({fillColor:r})}}return r}function d(e,t,s,c){if(!e||!e.lines||e.lines!=="all"&&!l.isArray(e.lines)){return[]}var d=e.lines,f=e.defaultStyle;var v=s&&s.rules&&s.rules.map(function(e){return e.dataContext&&e.dataContext[0]});if(t&&t.seriesContext===null||t.seriesContext.length===0){if(d==="all"&&t.series&&t.series.length>0){var g=t.series[0];if(!g||g.length<1){return null}var m=h(g);if(!m){return null}var y=m.color2?"color2":"color",_=n.isCSSColorString(f.color)?f.color:u(t,m,y,c);return[{style:a(i.extend(true,{},f,{color:_})),colorBind:m[y]}]}}else{var A=d==="all"?r(t):d;return A.map(function(e){if(e&&l.isPlainObject(e)){var r=o(t,e),d=r.series,g=r.seriesId;if(!d||d.length<1){return null}var m={};if(v){var y=p.indexOfObj(e.seriesContext,v);var _=y===-1?null:s.rules[y];if(_&&_.properties&&_.properties.line){m.color=_.properties.line.color;m.color=n.isCSSColorString(m.color)&&m.color;m.size=_.properties.line.width}}if(e.type){m.type=e.type}if(e.size){m.size=e.size}var A=h(d);if(!A){return null}var b=A.color2?"color2":"color";if(n.isCSSColorString(e.color)){m.color=e.color}else{m.color=n.isCSSColorString(f.color)?f.color:u(t,A,b,c)}return{text:e.displayName,style:a(i.extend(true,{},f,m)),colorBind:A[b],seriesContext:e.seriesContext}}})}}return{basic:s,color:d}}();function m(e,t){var i=t.map(function(t){return e(t.x)});return[Math.min.apply(null,i),Math.max.apply(null,i)]}function y(e){var t=s;if(!t.validate(e)){return null}return t.compute(e)}function _(e,i,a){if(typeof e._trendlineValueDomain!=="function"){return null}var r=e._trendlineValueDomain(a),o=Object.keys(r).length;if(o===0){return null}var n=/line/.test(e._options.renderType);var l=Object.keys(r).reduce(function(e,o){var l=a[o].scale.getDomain(),s=r[o];if(l[0]>s[0]||l[1]<s[1]){var u=Math.min(l[0],s[0]),c=Math.max(l[1],s[1]);var h=t.calcScale(a[o].scale,i[o],{isLineChart:n,domain:[u,c]});h.scale.setRange([0,1]);h.metaData=a[o].metaData;e[o]=h}return e},{});return l}function A(e,t,i,a){if(typeof e._trendlineValueDomain==="function"){var r=e._trendlineValueDomain(i,a),o=Object.keys(r).length;if(o!==0){var n=r.valueAxis[0];var l=r.valueAxis[1];n=t[0]>n?n:t[0];l=t[1]>l?t[1]:l;return[n,l]}}return t}function b(e,t){if(!e||e.length<2||!t){return}var i=0;t.forEach(function(e){if(e&&e.fx&&e.forecast){var t=e.raw.length;i=e.raw[t-1].x>i?e.raw[t-1].x:i}});if(i>0){e[1]=i}}function x(e,t,i){if(!e||!t){return}var a=0;t.forEach(function(e){if(e&&e.raw&&e.fx&&e.forecast){a=e.forecast<a?a:e.forecast}});for(var r=0;r<a;r++){var o=[];for(var n=0;n<e[0].length;n++){o.push("")}e.push(o)}}return{calculate:y,Parser:g,updateValueScale:_,Utils:p,domainPerTrendline:m,getValueScaleDomain:A,expandTimeAxisDomain:b,expandCategoryDomain:x}});define("sap/viz/chart/components/trendline/mixin/legendItems",["sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/lang/LangManager","sap/viz/chart/components/trendline/Trendline"],function(e,t,i,a,r){var o={};o[t.CSS.CLASS.LEGENDITEM]=false;o["v-trendline-legend-item"]=true;function n(t,a){var r=a&&Object.keys(a);var o=[];if(r){for(var n=0;n<t.length;n++){var l=true;r.forEach(function(e){var r=t[n].context[e+i.DIMENSION_VALUE_SUFFIX]||t[n].context[e];if(a[e]!==r){l=false;return}});if(l){o=e.extend(true,[],t[n].data);break}}}return o}return function(t,i){var l=t._data,s=t._properties.parentLevel.get("plotArea.trendLine"),u=t._properties.parentLevel.get("plotArea.dataPointStyleMode"),c=t._properties.parentLevel.get("plotArea.seriesStyle"),h=this._properties.get("dataPointStyle"),p=r.Parser.color(s,l,c,t._runtime._effectMgr),d=[];if((!h||!u||u!=="override")&&p&&p.length>0){p.map(function(t){if(!t){return null}var r=e.extend(true,{},t.style,{fill:"none"});var l=t.text;if(!l){l=n(i,t.seriesContext);l.callback=function(e){if(e&&e!==""){return a.get("IDS_TRENDLINE_LINEAR")+": "+e}else{return a.get("IDS_TRENDLINE_LINEAR")}}}d.push({data:l,color:t.style.stroke,context:t.seriesContext,cls:o,shape:{type:"line",style:r}})})}return d}});define("sap/viz/chart/components/legend/ColorLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/legend/BaseLegend","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataUtils","sap/viz/framework/chartmodel/DataSelector","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/scale/ColorShapeScaleMerger","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/chart/components/util/ColorUtil","sap/viz/framework/common/util/StatusConstants","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/ColorLegendNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/trendline/mixin/legendItems"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b){"use strict";var x=u.LEGEND.HORIZONTAL_OFFSET;var S=u.CSS.CLASS.LEGENDITEM,D="v-legend-element";function w(e,t){w.superclass.constructor.apply(this,arguments);this._labelFont={fontFamily:null,fontSize:null,fontWeight:null,color:null,fontStyle:null};var i=this.runtime().semanticManager();i.addDataPointChangeCallback(this._onDataPointChange.bind(this));this._defaultItemMargin=this._properties.getDefault("itemMargin");this._colorLabelSize=1;this._markerMargin={right:.5,bottom:.5,left:1,top:0};this._maxItemsNum=12;this._maxItemTextWidth=80;this._colorScale=null;this._shapeScale=null;this._colorShapeScale=null;this._scrollBar=undefined;this._type="ColorLegend";this._noFillSupport=t&&t.options&&t.options.noFillSupport;this._scrollThumbSpace=o.getThumbSpace("legend");this._contentSize=0;this._pageCount=2;this._domID=s.guid();this._isOverflow=false;this._overflowOffset=0;this._lastRowOffset=0;this._markerSize=0;this._cDomain=null;this._offset={x:0,y:0};this.BGCOLORPROPS=["general.background.color"]}e.extend(w,t);function C(e,t){var i=[];var a=Object.keys(t).sort();for(var r=0;r<a.length;r++){var o=t[a[r]];var n=o&&o.scale&&o.scale._type;if(n==="color"){i.push(o)}else if(n==="shape"){e.setShapeScale(o)}}e.setColorScale(i)}w.prototype._addDefaultProperties=function(){w.superclass._addDefaultProperties.call(this);this._properties.add({drawingEffect:"normal",formatString:null,hoverShadow:{color:"#cccccc"},isScrollable:false,itemMargin:.5,marker:{size:null,shape:"squareWithRadius"},mouseDownShadow:{color:"#808080"},scrollbar:{thumb:{fill:"#e5e5e5",hoverFill:"#dedede"},track:{fill:"f7f7f7"}}})};w.prototype._onDataPointChange=function(){this._colorShapeScale=null};w.prototype.setData=function(e){this._data=e;C(this,e);return this};w.prototype.setColorScale=function(e){this._colorScale=n.isArray(e)?e:[e];this._colorShapeScale=null;return this};w.prototype.setShapeScale=function(e){this._shapeScale=e;return this};w.prototype.isVisible=function(){return w.superclass.isVisible.apply(this,arguments)&&this.hasData()};w.prototype.getScrollbar=function(){return this._scrollBar};w.prototype.scroll=function(e,t){if(this._scrollBar){this._scrollBar._scroll(e,true,t);this._scrollBar.show()}};w.prototype._scroll=function(e){if(e.reachMax){this.loadMore()}var t=e.offset;if(this.isHorizontal()){this._offset.x=t;this._offset.y=0}else{this._offset.x=0;this._offset.y=t}this._setTranslate()};w.prototype.loadMore=function(e){e=+e;if(isNaN(e)){e=2}this._pageCount+=e;this.render(this._parent,true);var t=this.runtime();if(t&&t._interaction&&t._interaction._service){l.updateCorrespondingSelectedLegendItems(t._interaction._service)}};w.prototype._setTranslate=function(){if(!this._isRTL()){this._parent.select(".v-groups").attr("transform","translate("+this._offset.x+", "+this._offset.y+")")}else{var e=this._parent.select(".v-groups");var t=v.getBBox(e.node());if(this._cDomain.width>t.width){if(this._scrollBar&&this._scrollBar._isVisible){e.attr("transform","translate("+(this._offset.x+this._cDomain.width-t.width+x-this._scrollThumbSpace+(this._lastRowOffset?0:this._overflowOffset))+", "+this._offset.y+")")}else{e.attr("transform","translate("+(this._offset.x+this._cDomain.width-t.width+x+this._cDomain.markerMarginRight-this._scrollThumbSpace+(this._lastRowOffset?0:this._overflowOffset))+", "+this._offset.y+")")}}else{e.attr("transform","translate("+(this._offset.x+this._cDomain.markerMarginRight)+", "+this._offset.y+")")}}};var T=function(e,t,i,a,r){var o=e.select(".v-split-lines");if(o.empty()){o=e.append("g").classed("v-split-lines",true)}var n=o.select("line");if(n.empty()){n=o.append("line")}n=n.node();n.setAttribute("stroke","#d8d8d8");n.setAttribute("stroke-width",1);n.setAttribute("shape-rendering","crispEdges");n.setAttribute("x1",t);n.setAttribute("y1",i);if(r){n.setAttribute("x2",t);n.setAttribute("y2",i+a)}else{n.setAttribute("x2",t+a);n.setAttribute("y2",i)}};w.prototype._drawSplitLine=function(e,t){var i=false;if(t._intervalIndex>=0&&t._intervalLen>0&&t.length-1>t._intervalIndex){i=true}if(i){if(!this.isHorizontal()){var a=t[t._intervalIndex+1].pos.y;a-=t._intervalLen/2;var r=this._isScrollable()?t.width-this._scrollThumbSpace:t.width;T(e,0,a,r,false)}else{var o=t[t._intervalIndex+1].pos.x;o-=t._intervalLen;T(e,o,0,t.eachRowHeight,true)}}else{e.selectAll(".v-split-lines").remove()}};w.prototype._createLegendContent=function(e,t,i){var a=this._labelFont;var r=e.selectAll("g.v-content").data(["content"]);r.enter().append("g").classed("v-content",true);r.exit().remove();r.attr("transform","translate(0, "+this._pos.y+")").attr("font-size",a.fontSize).attr("font-family",a.fontFamily).attr("font-weight",a.fontWeight).attr("fill",a.color).attr("font-style",a.fontStyle);var o=r.selectAll("rect.v-legend-body-bound").data(["bound"]);o.enter().append("rect").classed("v-legend-body-bound",true).attr("fill","transparent");o.exit().remove();o.attr("x",this._isRTL()?0:-x);o.attr("width",this._width+x).attr("height",this._height-this._pos.y);var n=r.selectAll("g.v-groups").data(["groups"]);n.enter().append("g").classed("v-groups",true).classed("v-label",true).classed("viz-legend-valueLabel",true);n.attr("role","listbox");n.exit().remove();n.attr("transform","translate(0, 0)");this._createGroupItems(n,t);this._handleOverflow(r,t,i);this._drawSplitLine(n,t);if(this._properties.origin.get("legendGroup.layout.alignment")==="center"&&(this._position==="top"||this._position==="bottom")){var l=n.node();if(l){var s=l.getBoundingClientRect().width;if(this._width+x>s){o.attr("width",parseFloat(s))}}}else{if(this._isRTL()){var u=v.getBBox(n.node());if(t.width>u.width){if(this._scrollBar&&this._scrollBar._isVisible){n.attr("transform","translate("+(t.width-u.width+x-this._scrollThumbSpace+(this._lastRowOffset?0:this._overflowOffset))+", 0)")}else{n.attr("transform","translate("+(t.width-u.width+x+t.markerMarginRight+(this._lastRowOffset?0:this._overflowOffset))+", 0)")}}else{n.attr("transform","translate("+t.markerMarginRight+", 0)")}}}return r};var z=["noFill","solid"];w.prototype._getGroupItemInfo=function(e){var t=this;var i=e.width;var a=e.textHeight;var o=e.markerSize;var n=this._getMarkerWidth(o);var l=this._isScrollable();var s=this.isHorizontal();var u=this._markerMargin;var c=this.runtime().propertyManager();var h=this._properties.get("drawingEffect");var p=this._properties.get("showFullLabel");var d=this._options&&this._options.options?this._options.options.defaultMarkerShape:null;var f=e.eachItemWidth;if(!this.isHorizontal()||!l&&f>i){f=i;if(l){f-=this._scrollThumbSpace}}var v=f-e.miscWidth;if(s){v=Math.min(v,i)}var g=s&&e.length===1&&e.columnCount===2;var m=this.runtime().semanticManager();return e.map(function(y){if(s){if(l&&t._isOverflow){v=y.labelWidth}else if(p){v=Math.min(y.labelWidth,i-o-u.right*a)}if(g){v=Math.min(v,i-e.miscWidth-e.ellipsisWidth)}}var _=0;if(s){if(!l&&p){_=v+n+u.right*a+x}else{var A=f+x-u.right*a;if(t._isOverflow||l){var b=x+y.labelWidth+n+(u.right+u.left/2)*a;if(!l&&A<b){b=A}_=b;if(g){_=Math.min(_,v+e.miscWidth)}}else{_=A}}}else{_=f+x}var S={drawingEffect:h,borderWidth:0,rx:o/2,ry:o/2,direction:"vertical",fillColor:y.color,graphType:y.shape,defaultShape:d,borderColor:"transparent"};S.dpPattern=y.pattern;if(!y.isSemantic){var D=t._getSereisStyle(y.ctx,t._data,m,"dataPoint");if(D&&D.dataPoint){if(D.dataPoint.pattern){var w=D.dataPoint.pattern;var C=m._chartType;if(y.seriesShape==="line"&&z.indexOf(w)===-1||C==="info/area"){w=null}S.patternEffect=S.dpPattern=w}if(D.dataPoint.color){S.fillColor=r.convertColor(D.dataPoint.color)}}}if(S.dpPattern==="noFill"&&!t._noFillSupport){S.patternEffect=S.dpPattern=null}if(S.dpPattern==="noFill"){S.borderColor=c.get("plotArea.background.color");if(!S.borderColor||S.borderColor==="transparent"){S.borderColor=c.get("general.background.color")}S.borderWidth=1;if(c.get("plotArea.dataPoint.stroke.visible")){S.borderColor=c.get("plotArea.dataPoint.stroke.color")}}var T=t.runtime().semanticManager().isUseSemanticPattern();if(T&&y.pattern){S.patternEffect=y.pattern}return{eventLayerWidth:_,shapeOptions:S,expectedWidth:v}})};w.prototype._getSereisStyle=function(e,t,i,a){var r=false;var o=t&&t.valueAxis;if(e&&!e["measureNames"]&&o&&o.metaData&&o.metaData.length===1){e["measureNames"]=o.metaData[0].id;r=true}var n=i.analyzeSeriesStyle(e,a);if(r){delete e["measureNames"]}return n};function L(e){var t=0;e.forEach(function(e){if(e.cls){t++}});return t}w.prototype._createGroupItems=function(e,t){var a=this._labelFont;var r=this._getGroupItemInfo(t);var o=e.selectAll("g."+D).data(t);o.enter().append("g").classed(D+" "+S,true);o.each(function(e){if(!e.cls){d3.select(this).classed(S,true)}else{d3.select(this).classed(e.cls)}});o.exit().remove();o.attr("role","option");o.attr("transform",function(e){return"translate ("+(e.pos.x-x)+","+e.pos.y+")"});o.attr("legendlabel-id",function(e){return e.id});if(this.isSelectable()){var l=this._colorShapeScale.getLength()-L(t);o.attr("aria-posinset",function(e){return e.id+1}).attr("aria-setsize",l)}var s=o.selectAll("rect").data(["rect"]);s.enter().append("rect");s.exit().remove();s.attr("height",function(e,i,a){return n.isArray(t[a].text)?(t[a].line||t[a].text.length)*t.eachRowHeight:t.eachRowHeight}).attr("fill","transparent").attr("width",function(e,t,i){return r[i].eventLayerWidth});this._createShapeItems(o,t,r);var u,c;var h=o.selectAll("text").data(["text"]);h.enter().append("text");h.exit().remove();var p=null;var d=this.runtime().envManager();if(d){p=d.textAnchor()}h.attr("text-anchor",p);var f=this;h.each(function(e,o,l){var s=d3.select(this);if(f._isRTL()){s.attr("transform","translate("+0+", "+t.textY+")")}else{s.attr("transform","translate("+t.textX+", "+t.textY+")")}if(n.isArray(t[l].text)){u=t[l].text.join("");c=t[l].line||t[l].text.length}else if(n.isString(t[l].text)){u=t[l].text;c=1}else{u=String(t[l].text);c=1}var h={};h.isRTL=f._isRTL();h.ellipsisOptions=t.ellipsisOptions;i.drawWrappedText(s,u,[" "],c,f._isRTL()?r[l].eventLayerWidth-x-f._markerSize-t.markerMarginRight:r[l].expectedWidth,t.eachRowHeight,a,h);s.selectAll("tspan").attr("dy","0.85em")});s.each(function(){var e=this.parentNode.getElementsByTagName("text")[0];if(e){while(this.childNodes.length!==0){this.removeChild(this.childNodes[0])}var t=e.getElementsByTagName("title")[0];if(t!==undefined&&t.textContent!==""){e.appendChild(t)}}})};w.prototype._cleanLegendItemsWithLine=function(e){e.selectAll("line").remove();e.selectAll("g").remove()};w.prototype._getBGColor=function(){var e=this.runtime().propertyManager();var t="plotArea.dataPoint.stroke.color";var i="plotArea.dataPoint.stroke.visible";return g.getBgColor(e,e.get(i)?this.BGCOLORPROPS.concat(t):this.BGCOLORPROPS)};w.prototype._createShapeItems=function(e,t,i){var r=this.runtime().effectManager();var o=this.runtime().propertyManager();this._cleanLegendItemsWithLine(e);var n=e.selectAll("path").data(["shape"]);n.enter().append("path");n.exit().remove();var l=this._isRTL();if(!l){n.attr("transform","translate("+t.shapeX+","+t.shapeY+")")}var s=this._getBGColor();n.each(function(e,o,n){var u=i[n].shapeOptions;u.node=this;u.bgColor=s;a.drawGraph(u,r);if(l){this.setAttribute("transform","translate("+(i[n].eventLayerWidth-x-t.markerSize/2)+","+t.shapeY+")")}});n.attr("class","v-legend-marker")};function P(e,t,i){var a=i.querySelector('[legendlabel-id="'+t[e].id+'"]');return a.getBoundingClientRect()}w.prototype._handleOverflow=function(e,t,i){var a=e.selectAll(".v-groups").node();var r=e.selectAll(".v-overflow");if(this._isOverflow===true){var l=t.width;var s=t.height;var u=this._isScrollable();var c=this.isHorizontal();var h=t.textHeight;var p=t.colorMarkerSize;if(r.empty()){r=e.append("g").attr("class","v-overflow")}if(!u){if(!r.selectAll("g").empty()){e.selectAll("defs").remove();e.attr("clip-path",null);r.selectAll("g").remove();r.attr("transform","translate(0, 0)")}if(t.length!==0){var d=e.selectAll(".v-overflow text");if(d.empty()){d=r.append("text").text("...");d.attr("dy","")}a.appendChild(r.node());var f=a.getBoundingClientRect();var v=t[t.length-1];var g=P(t.length-1,t,a);var m=g.left-f.left;var y=v.pos.y;var _,A;var b;if(t.columnCount>1){b=0;var S=this._getMaxNumOfItems();if(S<this._colorShapeScale.getLength()&&t.rowCount>Math.floor(S/t.columnCount)){if(S%t.columnCount===0){_=t.columnCount*v.rowIndex;A=P(_,t,a);m=A.left-f.left;y+=t.eachRowHeight}else{m=g.right-f.left+x}}else{if(t.length>t.columnCount){_=v.rowIndex*t.columnCount-1;A=P(_,t,a);m=A.left-f.left}else{m=g.right-f.left+x}}}else{b=t.textX-x;if(n.isArray(v.text)){y+=t.eachRowHeight*(v.line||v.text.length)}else{y+=t.eachRowHeight}}if(!this._isRTL()){r.attr("transform","translate("+(m-x+b)+","+y+")")}else{if(this._position==="top"||this._position==="bottom"){if(t.columnCount>1){this._overflowOffset=2*d.node().getComputedTextLength()+x+b;r.attr("transform","translate("+(-this._overflowOffset+this._lastRowOffset)+","+y+")")}else{r.attr("transform","translate("+(t.eachItemWidth-2*d.node().getComputedTextLength()-2*x-this._markerSize)+","+y+")")}}else{r.attr("transform","translate("+(t.width-2*d.node().getComputedTextLength()-x-this._markerSize)+","+y+")")}}d.attr("x",this._isRTL()?0:x).attr("y",t.textY).attr("dy","0.85em");var D=null;var w=this.runtime().envManager();if(w){D=w.textAnchor()}d.attr("text-anchor",D)}}else{e.node().appendChild(r.node());if(!r.selectAll("text").empty()){r.selectAll("text").remove()}if(!i){this._scrollBar=undefined}if(this._scrollBar===undefined){this._scrollBar=new o(this.runtime(),{name:"legend.scrollbar",location:"legend"})}if(e.selectAll(".legend-clip-rect").empty()){e.insert("svg:defs",":first-child").append("svg:clipPath").attr("id","legend_"+this._domID).append("rect").attr("class","legend-clip-rect").attr("x",c?0:-5).style("stroke","blue").style("fill","none")}var C=c?l+"px":l+5+"px";var T=c?s-this._pos.y+5+"px":s-this._pos.y+"px";e.selectAll(".legend-clip-rect").attr("width",C).attr("height",T).attr("y",c?-5:0);e.attr("clip-path","url(#"+"legend_"+this._domID+")");var z,L;var k=this._scrollBar._properties;var E=parseFloat(k.get("border.width"))||k.getDefault("border.width");E=E>4?4:E;E=E<0?0:E;if(i){z=this._scrollBar.getThumbPosition();L=this._scrollBar.getThumbRatio()}if(c){this._scrollBar.setTrackSize(l-this._pos.x-2*E);r.attr("transform","translate("+E+", "+t.eachRowHeight+")")}else{this._scrollBar.setTrackSize(s-this._pos.y-2*E);r.attr("transform","translate("+(l-this._scrollThumbSpace-E/2)+", "+""+E+")")}this._scrollBar.getDispatch().on("scroll.legend",this._scroll.bind(this));this._scrollBar.setPosition(this._orientation).setContentSize(this._contentSize).render(r);var I=this._scrollBar.getThumbRatio();if(i&&I!==L){this._scrollBar.setThumbPosition(z/I*L);this._setTranslate()}}}else{if(!r.empty()){e.selectAll("defs").remove();r.remove();this._scrollBar=undefined}e.attr("clip-path",null)}};w.prototype.render=function(e,t){this._parent=e;this._overflowOffset=0;this._lastRowOffset=0;w.superclass.render.apply(this,arguments);if(!this.isVisible()&&!this._isDedicated||!this._colorShapeScale){e.selectAll("g.v-content").remove();return this}var i=this._getAvailableDomain();var a=this._createLegendContent(this._parent,i,t).node();if(this._properties.origin.get("legendGroup.layout.alignment")==="center"&&(this._position==="top"||this._position==="bottom")){if(a){var r=a.getBoundingClientRect().width;if(!this._renderedWidth||this._renderedWidth<r){this._renderedWidth=r}if(this._bound){var o=this._bound.getAttribute("width");this._bound.setAttribute("x",0);if(parseFloat(o)>0){this._bound.setAttribute("width",Math.min(o,this._renderedWidth));this._bound.setAttribute("x",-x);if(this._isRTL()){var n=e.select("rect.v-legend-body-bound");n.attr("x",parseFloat(n.attr("x"))+(this._lastRowOffset?0:this._overflowOffset));var l=e.selectAll("g.v-groups");var s=v.getBBox(l.node());l.attr("transform","translate("+(Math.min(o,this._renderedWidth)-s.width+(this._lastRowOffset?0:this._overflowOffset))+", 0)");if(this._properties.get("title.visible")===true){var u=e.select(".viz-legend-title");var c=u.node();u.select("tspan").attr("x",Math.min(o,this._renderedWidth)-c.getBoundingClientRect().width-this._markerSize)}}}}if(!this._isScrollable()||this._isScrollable()&&this._width>this._renderedWidth){this._width=this._renderedWidth}}}this._postRenderer=this._properties.get("postRenderer");if(this._postRenderer){var p={dataModel:this._data,DataSelector:h,domain:i.slice(),effectManager:this.runtime().effectManager(),itemInfo:this._getGroupItemInfo(i)};var d={target:e,x:i.postRenderX,y:i.postRenderY,markerSize:i.markerSize};this._adjustRendererOption(d);this._postRenderer(p,d)}return this};w.prototype._getContentDomain=function(e){var t=this._getWrapText();var i=this._colorShapeScale;var a=this._properties.origin.get("general.hideNoValueLabel");var r;if(this._isScrollable()){r=i.getLength()}else{r=Math.min(i.getLength(),this._getMaxNumOfItems())}var o=[];for(var n=0;n<r;n++){o.push(i.getItem(n))}o=this._sort(o);var l=this._calcDomain(o,a);l.width=e.width;l.height=e.height;l.maxWidth=e.maxWidth||e.width;l.maxHeight=e.maxHeight||e.height;l.wrap=t;l.len=r;this._calcMetaInfo(l);this._calcItemLayout(l);this._calcItemPosition(l);return l};w.prototype._calcDomain=function(e,t){return e.map(function(e,i){e.id=i;var a=this._toValueString(e.data,t);var o=e.color;if(n.isString(o)&&o&&o.indexOf("url")===-1){o=r.convertColor(o)}return{id:i,val:e.data,text:a,ctx:e.context,color:o,cls:e.cls,shape:e.shape,pattern:e.pattern,isSemantic:e.isSemanticItem}},this)};w.prototype._getMarkerWidth=function(e){return e};w.prototype._calcMetaInfo=function(e){var t=this._labelFont;var a=t.fontSize;var r=parseInt(t.fontSize,10);var o=this._markerMargin;var l=this._properties.get("marker.size");l=l&&parseFloat(l);var s=this.isHorizontal();var u=this._isScrollable();var c=o.bottom*r;var h=this._colorLabelSize*r;var p=this._getMarkerWidth(h);var d=(1+o.bottom)*r;var v=(s?o.left+o.right:o.right)*r;if(l&&l>r){c=o.bottom*l;h=l;p=this._getMarkerWidth(h);d=(1+o.bottom)*l}this._markerSize=h;var g=e.maxWidth-v-p;if(u){g-=this._scrollThumbSpace}var m;if(s||u){m=e.length}else{if(!n.isNumeric(e.height)){e.height=d*e.len}m=Math.min(Math.floor(e.height*2/d),e.length)}var y=0;for(var _=0;_<m;_++){var A=e[_].text;var b={width:i.getTextLength(A,f.convertToCss(t))};if(b.width>g&&e.wrap>1){var S=i.wrapText(e[_].text,[" "],g,e.wrap,t);e[_].text=S.lines;b={height:r*S.lines.length,width:S.maxWidth}}e[_].textSize=b;y=Math.max(y,b.width)}if(s){y=Math.min(y,this._maxItemTextWidth)}var D=y+h+v;if(!s&&u){D+=this._scrollThumbSpace}if(!n.isNumeric(e.width)){e.width=D}var w=Math.max(h,r);var C=o.bottom*r/2;var T=h/2+x;var z=w/2+C;var L=h+o.right*r+x;var P=(w-r)/2+C;var k=h/2+x;var E=w/2+C;e.shapeX=T;e.shapeY=z;e.textX=L;e.textY=P;e.postRenderX=k;e.postRenderY=E;e.overallHeight=w;e.maxHeight=e.height-this._pos.y;e.maxTextWidth=y;e.minTextWidth=i.getTextLength("M...",f.convertToCss(t));e.ellipsisWidth=i.getTextLength("...",f.convertToCss(t));e.ellipsisItemWidth=e.ellipsisWidth+x;e.eachRowHeight=d;e.markerSize=h;e.textHeight=r;e.colorMarkerSize=l;e.paddingWidth=v;e.paddingBottom=c;e.miscWidth=h+v;e.eachItemWidth=D;e.availableLabelCount=m;e.maxRowCount=Math.floor(e.maxHeight/e.eachRowHeight);e._intervalLen=0;var I={};var O=this.runtime().envManager();I.reverseDots=O&&O.reverseDots();e.ellipsisOptions=I;e.markerMarginRight=o.right*r;this._cDomain=e;this._getIntervalInfo(e);if(this._maxWidth!==0){e.width=Math.min(this._maxWidth,e.width)}};w.prototype._calcHorizontalFullLegendLayout=function(e){var t=e.length;if(this._getMaxNumOfItems()<this._colorShapeScale.getLength()){t++}var i=t;var a=1;var r,o,n,l,s;var u=[];var c=e.maxRowCount;for(i=1;i<=t;++i){var h=Math.ceil(t/i);a=Math.min(h,c);var p=Math.max(a*i,2);var d=[];for(r=0;r<i;++r){var f=0;for(o=0;o<a;++o){s=o*i+r;if(s!==p-1||p>=e.length){l=e[s];if(l){f=Math.max(f,l.textSize.width)}}}d[r]=f}var v=0;for(o=0;o<i;++o){v+=d[o]+e.miscWidth}if(v<=e.width||i===1){u.push({totalRowCount:h,columnCount:i,rowCount:a,actualCount:p<t?p-1:t,holeCount:t%i&&i-t%i,columnWidths:d})}}u.sort(function(e,t){if(e.actualCount===t.actualCount){if(e.totalRowCount===t.totalRowCount){return e.holeCount-t.holeCount}return e.totalRowCount-t.totalRowCount}return t.actualCount-e.actualCount});var g=u[0];for(r=e.length;r--;){if(r<g.columnCount*g.rowCount){e[r].labelWidth=g.columnWidths[r%g.columnCount]}}return{columnCount:g.columnCount,rowCount:g.rowCount}};w.prototype._calcItemLayout=function(e){var t=e.availableLabelCount;var i=1;var a=t;var r;var o,n;var l=e.eachRowHeight*u.LEGEND.SEMANTIC_ITEMS_INTERVAL;if(this.isHorizontal()){if(this._isScrollable()){i=t;a=1}else{if(this._properties.get("showFullLabel")){var s=this._calcHorizontalFullLegendLayout(e);i=s.columnCount;a=s.rowCount}else{var c;if(this._getMaxNumOfItems()<this._colorShapeScale.getLength()){c=1}else{c=0}i=Math.max(Math.floor(e.width/e.eachItemWidth),1);a=Math.ceil((t+c)/i);if(this._maxRowCount&&a>this._maxRowCount){a=this._maxRowCount}a=Math.min(e.maxRowCount,a);r=Math.min(e.maxTextWidth,this._maxItemTextWidth)}if(i===1&&t>1&&e.eachRowHeight*2>e.height-this._pos.y){i=2}if(this._getMaxNumOfItems()===i&&i!=this._colorShapeScale.getLength()){a=Math.min(e.maxRowCount,2)}}if(a===1&&e._intervalIndex>=0){e._intervalLen=l}}else{if(e._intervalIndex>=0){e._intervalLen=l}}for(o=e.length;o--;){n=e[o];n.labelWidth=n.labelWidth||r||n.textSize&&n.textSize.width;n.itemWidth=n.labelWidth+e.miscWidth}if(this.isHorizontal()&&e.maxRowCount===1&&t>i){var h=e.ellipsisItemWidth;for(o=0;o<i;++o){h+=e[o].itemWidth}if(h<=e.width-this._pos.x){i++}}for(o=e.length;o--;){n=e[o];n.colIndex=o%i;n.rowIndex=Math.floor(o/i)}e.columnCount=i;e.rowCount=a;if(!this._maxRowCount){this._maxRowCount=a}};w.prototype._calcItemPosition=function(e){var t=this._isScrollable();var i=this.isHorizontal();var a=this._colorShapeScale.getLength();var r=e.eachRowHeight;var o=e.columnCount,l=e.rowCount;e.lastRowIdxOffset=o*l-e.length;if(e.lastRowIdxOffset<0){e.lastRowIdxOffset=1}var s=0;var u=0;var c=e.length;var h,p,d;this._isOverflow=Math.min(this._getMaxNumOfItems(),e.length)<this._colorShapeScale.getLength();for(var f=0;f<e.length;f++){var v=e[f];if(i){if(!t){if(v.colIndex===0&&f>0){s=0;u+=r}if(v.colIndex===e.columnCount-1&&(a-f>1&&u+r*2>e.height-this._pos.y||v.colIndex>0&&s+v.itemWidth>e.width-this._pos.x)){this._isOverflow=true;c=f;if(f===0){c=1;v.pos={x:s,y:u}}break}v.pos={x:s,y:u};if(this._isRTL()){if(l>1&&e.lastRowIdxOffset>0&&v.rowIndex===l-1){var g=v.rowIndex-1,m=v.colIndex+e.lastRowIdxOffset;var y=g*o+m;v.pos.x=e[y].pos.x;v.itemWidth=e[y].itemWidth;v.labelWidth=e[y].labelWidth;if(v.colIndex===0){this._lastRowOffset=v.pos.x}}}s+=v.itemWidth;if(e._intervalIndex>=0&&f===e._intervalIndex){s+=e._intervalLen}}else{var _=e.width-this._pos.x;if(s+v.itemWidth>_){this._isOverflow=true}_=e._intervalLen+e.width*this._pageCount-this._pos.x;v.pos={x:s,y:u};s+=v.itemWidth;if(e._intervalIndex>=0&&f===e._intervalIndex){s+=e._intervalLen}if(s>_){c=f+1;break}}}else{var A=e.height-this._pos.y;e.lines=e.lines!==undefined?e.lines:0;p=0;d=n.isArray(v.text)?v.text.length:1;if(e._intervalIndex>=0&&f>e._intervalIndex){p=e._intervalLen}h=Math.floor((A+e.paddingBottom-p)/r);if(n.isArray(v.text)){e.lines+=d}else{e.lines+=1}var b=r*e.lines+p-e.paddingBottom;if(b>A){this._isOverflow=true}if(this._isOverflow){A=t?e.height*this._pageCount-this._pos.y:A-e.textHeight}if(h<=0){c=0;break}if(b>A){if(!t){if(n.isArray(v.text)&&d>1){if(e.lines===h+d){break}var x=h+d-e.lines;if(f!==e.length-1){x=x-1}else{this._isOverflow=false}if(x===0){c=f}else{c=f+1}v.line=x;v.pos={x:0,y:r*(e.lines-d)+p}}else{c=f-1}}else{e.lines=e.lines-1;c=f}break}else{v.pos={x:0,y:r*(e.lines-(n.isArray(v.text)?d:1))+p};if(!t&&e.lines===h&&f!==e.length-1){if(n.isArray(v.text)&&d>1){v.line=d-1;c=f+1}else{c=f}}}}}e.splice(c,e.length-c)};w.prototype._getItemCells=function(e){var t=[];var i,a,r,o=L(e);if(this._isScrollable()){var n=this.isHorizontal();var l=this._colorShapeScale.getLength()-o;var s=n?1:l;var u=n?l:1;for(a=0;a<s;++a){i=[];for(r=0;r<u;++r){i.push({id:n?r:a})}t.push(i)}}else{for(a=0;a<e.length-o;a++){var c=e[a];var h=c.rowIndex;var p=c.colIndex;i=t[h]=t[h]||[];i[p]={id:c.id}}}return t};w.prototype._getContentSize=function(e){var t=0;if(this._isScrollable()){if(this.isHorizontal()){var i=e[e.length-1];t=i.pos.x+i.itemWidth}else{t=e.eachRowHeight*e.lines+e._intervalLen}}return t};w.prototype._getAvailableDomain=function(){var e=this._getContentDomain({height:this._height,width:this._width});this._cells=this._getItemCells(e);this._contentSize=this._getContentSize(e);return e};w.prototype._getIntervalInfo=function(e){e._intervalLen=0;e._intervalIndex=-1;var t=[];if(this._colorShapeScale.items){t=this._colorShapeScale.items()}if(!this.getOrderByFunc()&&t.length>1){for(var i=0;i<t.length;++i){if(!t[i].isSemanticItem){e._intervalIndex=i-1;break}}}};w.prototype.getOffset=function(){return{x:this._offset.x,y:this._offset.y}};w.prototype.getActiveLevels=function(){return this._cells};w.prototype._getMaxNumOfItems=function(){var e=this._properties.get("maxNumOfItems");var t=parseInt(e);if(e==null){t=Number.POSITIVE_INFINITY}else{if(t.toString()!==e.toString()){t=Number.POSITIVE_INFINITY}else if(isNaN(t)){t=Number.POSITIVE_INFINITY}else if(t<1){t=Number.POSITIVE_INFINITY}else{t=Math.floor(t)}}return t};w.prototype._getBodyPreferredSize=function(e){var t=0;var i=0;var a=0;var r=0;var o;var n=this._isScrollable();var l=this.isHorizontal();this._maxWidth=0;this._setupThemeStyleDef();var s=this._colorShapeScale.getLength();this._maxRowCount=0;if(s>0){var c=this._markerMargin;o=this._getContentDomain(e);var h=o.lines;h=Math.min(h,this._getMaxNumOfItems());var p=o.eachRowHeight;a=Math.min(o.minTextWidth,o.maxTextWidth)+o.miscWidth;if(l){i=e.width;if(n){t=p+this._scrollThumbSpace;r=t}else{t=o.rowCount*p;r=p}}else{i=o.eachItemWidth;if(n){a+=this._scrollThumbSpace}if(!n&&h<s){h++}t=p*h+o._intervalLen;r=p+(s>1?o.textHeight:0)}}if(n&&this._getMaxNumOfItems()<this._colorShapeScale.getLength()){var d=0;if(this._getMaxNumOfItems()-1>o._intervalIndex&&o._intervalIndex>-1){d=o.eachRowHeight*u.LEGEND.SEMANTIC_ITEMS_INTERVAL}if(l){var f=0;var v=Math.min(this._getMaxNumOfItems(),o.length);for(var g=0;g<v;++g){var m=o[g].textSize.width+o.markerSize+o.paddingWidth;f+=m}i=f+d;this._maxWidth=i;if(i<a){a=i}}else{t=this._getMaxNumOfItems()*o.eachRowHeight+d;if(t<r){r=t}}}return{maxWidth:i,maxHeight:t,minWidth:a,minHeight:r}};w.prototype._sort=function(e){var t=this.getOrderByFunc();return t?e.sort(t):e};w.prototype.getOrderByFunc=function(){var e=this._properties.get("order");if(typeof e==="function"){var t=this._toValueString.bind(this);return function(i,a){return e(t(i.data),t(a.data))}}return undefined};w.prototype._shouldInitColorShapeScale=function(){return!this._colorShapeScale&&this._colorScale};w.prototype._initColorShapeScale=function(){if(this._shouldInitColorShapeScale()){var e=this._buildColorShapeScale(this._colorScale);this._colorShapeScale=e;this.setBindingFields(e.getBindingFields());if(this._properties&&this._properties.parentLevel&&this._properties.parentLevel.get("plotArea.trendLine")){e._items=e._items.concat(this._ColorShapeItemHooks(this,e._items))}}};w.prototype._buildColorShapeScale=function(e){var t=this.runtime().semanticManager();var i=this.runtime().markManager();var a=this._getLegendMarkerShape();if(!a&&i.getMode()==="single"){a=i.getShape()}var r=this._properties.get("ignoreNoValue");if(a&&!i.locked()){i.setShape(a)}var o=new d(i);this._hasOnlyOneMeasure=false;if(t.hasDataPointColorStyle()||t.hasDataPointLineStyle()){o.setSemanticColorScale(t.getDataPointColorScale())}if(!t.isOverrideMode()||!t.hasDataPointColorStyle()&&!t.hasDataPointLineStyle()){for(var n=0;n<e.length;n++){o.addColorScale(e[n])}}if(this._shapeScale!==null){o.setShapeScale(this._shapeScale)}o.merge(a,r,this._data);return o};w.prototype._getLegendMarkerShape=function(){var e=this._properties.get("marker.shape")||this._properties.origin.get("plotArea.marker.shape");if(u.LEGEND_MARKER_SHAPE.indexOf(e)===-1){e=this._properties.getDefault("marker.shape")||this._properties.origin.getDefault("plotArea.marker.shape")}return e};w.prototype._setupThemeStyleDef=function(){w.superclass._setupThemeStyleDef.apply(this,arguments);var e=this._properties;this._markerMargin.bottom=p.getPositiveNumber(e.get("itemMargin"),this._defaultItemMargin);var t=this._labelFont;e=e.proxy("label.style");t.color=e.get("color");t.fontFamily=e.get("fontFamily");t.fontSize=parseFloat(e.get("fontSize"))+"px";t.fontWeight=e.get("fontWeight");t.fontStyle=e.get("fontStyle")};w.prototype._isScrollable=function(){return this._properties.get("isScrollable")&&!this._properties.origin.get("interaction.noninteractiveMode")};w.prototype.setBindingFields=function(e){w.superclass.setBindingFields.apply(this,arguments);this._displayTextsConverter=c.getDisplayTextsConverter(this._bindingFields,this._mndIndex);return this};w.prototype.destroy=function(){w.superclass.destroy.apply(this,arguments);this._colorScale=null;this._shapeScale=null;this._colorShapeScale=null;this._displayTextsConverter=null;this._properties=null;this._colorLabelSize=null;this._markerMargin=null;this._maxItemsNum=null;this._maxItemTextWidth=null;if(this._scrollBar){this._scrollBar.destroy()}this._scrollBar=null;this._hasOnlyOneMeasure=null;this._labelFont=null;this._type=null;this._scrollThumbSpace=null;this._contentSize=null;this._pageCount=null;this._domID=null;this._isOverflow=null;this._cDomain=null;this.BGCOLORPROPS=null};w.prototype._toValueString=function(e,t){var i=e;if(n.isArray(e)){if(t===true){i=this._displayTextsConverter(e,true).filter(function(e){return e!==undefined})}else{i=this._displayTextsConverter(e)}i=i.join(" / ")}if(e&&e.callback&&typeof e.callback==="function"){return e.callback(i)}return i};w.prototype.hasData=function(){this._initColorShapeScale();return this._colorShapeScale&&this._colorShapeScale.getLength()>0};w.prototype.statusChanged=function(e){if(e===m.LOCALE_CHANGED){this._colorShapeScale=null}};y.register(A.COLORLEGEND_NAVIGATOR,null,_);w.prototype._ColorShapeItemHooks=b;return w});define("sap/viz/chart/components/container/UIContainer",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/FunctionUtils"],function(e,t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments);this._renderType=t&&t.renderType!=null?t.renderType:null;this._children={};this._layoutAlgorithm=null;this._layoutResult=null;this._selections=null};t.extend(o,i);o.prototype.setLayoutAlgorithm=function(e){this._layoutAlgorithm=e;return this};o.prototype.addAutoLayoutProperties=function(e){var t=this._properties;var i=this;[{name:"autoWidth",key:"width"},{name:"autoHeight",key:"height"}].forEach(function(a){var r=e+".layout."+a.name;t.origin.add(r,{defaultValue:0,readonly:true,serializable:false,get:function(){var t=i._layoutResult;if(t){var r=t[e];if(r&&r[a.key]){return r[a.key]}}return 0}})})};o.prototype.setChild=function(e,t,a){if(e&&t instanceof i){t.alias=e;var r=this._children[e]=this._children[e]||{};r.module=t;r.option=a||{};if(t.supportFixedLayout===true){this.addAutoLayoutProperties(e)}}return this};o.prototype.getChild=function(e){if(e&&this._children&&this._children[e]){return this._children[e]}return null};o.prototype._configLayout=function(){};o.prototype._postLayout=function(e){};o.prototype.layout=function(e){var t=this._configLayout(e);e=e||{};e.isRTL=this._isRTL();if(this._layoutAlgorithm&&this._layoutAlgorithm.layout){this._layoutAlgorithm.config.add({isFixedPadding:this._properties.origin.get("general.layout.isFixedPadding")});this._layoutResult=this._layoutAlgorithm.layout(t||this._children,e);this._postLayout(this._layoutResult);return this._layoutResult}return{}};o.prototype._initRenderBase=function(e){if(this._selections==null){this._selections={}}var t=e.node();for(var i in this._children){if(this._children.hasOwnProperty(i)){if(this._selections[i]!=null){continue}var o=this._children[i].module.renderTo();if(o.toLowerCase()==="div"||o==="BorderDIVFlow"){if(t.tagName.toLowerCase()!=="div"){r.error(a.getLogMessage("IDS_ERROR_NODE_DIV_IN_SVG"))}this._selections[i]=e.append("div").attr("class","v-m-"+i).style("height","100%").style("width","100%")}else{if(t.tagName.toLowerCase()==="div"){this._selections[i]=e.append("svg").style({position:"absolute",width:"100%",height:"100%"}).append("g").attr("class","v-m-"+i)}else{this._selections[i]=e.append("g").attr("class","v-m-"+i)}}}}};o.prototype.supportExportToContentType=function(e){var t=this._children.length;for(var i=0;i<t;i++){if(this._children.supportExportToContentType){return this._children.supportExportToContentType(e)}}};o.prototype.exportContent=function(e){var t=this._children.length;for(var i=0;i<t;i++){if(this._children.exportContent){return this._children.exportContent(e)}}};o.prototype.clearSize=function(e){if(!e){this._size.height=0;this._size.width=0}for(var t in this._children){if(this._children.hasOwnProperty(t)){var i=this._children[t].module;if(i&&i.clearSize){i.clearSize()}}}return this};o.prototype.destroy=function(){o.superclass.destroy.call(this);var e;for(e in this._selections){if(this._selections.hasOwnProperty(e)&&this._selections[e]){this._selections[e].remove()}}for(e in this._children){if(this._children.hasOwnProperty(e)){if(this._children[e]==null){continue}var t=this._children[e].module;if(t&&t.destroy){t.destroy()}this._children[e]=null}}this._selections=null;this._renderType=null;this._children=null;if(this._layoutAlgorithm&&this._layoutAlgorithm.destroy){this._layoutAlgorithm.destroy()}this._layoutAlgorithm=null};o.prototype.calculatePaddingInPX=function(t,i,a){var r,o;var n,l;var s,u;var c=Math.min(i,a);r=e.PADDING.DEFAULT;if(r<1&&r>0){r=r*c}o=t.get("general.layout.padding");if(o<1&&o>0){o=o*c}n=t.get("general.layout.paddingTop");if(n<1&&n>0){n=n*c}l=t.get("general.layout.paddingRight");if(l<1&&l>0){l=l*c}s=t.get("general.layout.paddingBottom");if(s<1&&s>0){s=s*c}u=t.get("general.layout.paddingLeft");if(u<1&&u>0){u=u*c}return{constantPaddingInPX:r,propertyPaddingInPX:o,propertyPaddingTopInPX:n,propertyPaddingRightInPX:l,propertyPaddingBottomInPX:s,propertyPaddingLeftInPX:u}};o.prototype.statusChanged=function(e){for(var t in this._children){if(this._children.hasOwnProperty(t)){if(this._children[t].module.statusChanged){this._children[t].module.statusChanged(e)}}}};return o});define("sap/viz/chart/layout/LegendLayout",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/layout/BaseLayout"],function(e,t,i){function a(){a.superclass.constructor.apply(this,arguments);this.config.add({position:"",spacing:12,legendPreferSizes:null})}e.extend(a,i);a.prototype.layout=function(e){var i={},a=false,o=this.config,n=o.get("totalWidth"),l=o.get("totalHeight"),s=o.get("legendPreferSizes"),u=o.get("position"),c=o.get("spacing"),h=t.isHorizontal(u),p=this._dictToArray(e),d=r(p,n,l,s,h);var f=0,v,g=d.availableSize,m=d.referenceSize,y=d.referenceMinSizes,_=d.maxSizes,A=d.minSizes;if(d3.sum(_)<=g){a=true}for(var b=0,x=p.length;b<x;b++){var S=p[b].module;var D={x:0,y:0};var w=_[b];var C=A[b];if(h){D.x=f}else{D.y=f}if(a&&y[b]<m){f=f+w;v=w}else{if(g<C||y[b]>m){D.width=D.height=0;i[S.alias]=D;continue}else if(g>w){f=f+w;v=w;g=g-w-c}else{f=f+g;v=g;g=0}}if(h){D.width=v;D.height=l}else{D.width=n;D.height=v}f+=c;i[S.alias]=D}return i};function r(e,t,i,a,r){var o,n,l=[],s=[],u=[];if(r){o=t;n=i;e.forEach(function(e){var t=a[e.module.alias];l.push(t.maxWidth);s.push(t.minWidth);u.push(t.minHeight)})}else{o=i;n=t;e.forEach(function(e){var t=a[e.module.alias];l.push(t.maxHeight);s.push(t.minHeight);u.push(t.minWidth)})}return{availableSize:o,referenceSize:n,maxSizes:l,minSizes:s,referenceMinSizes:u}}return a});define("sap/viz/chart/components/legend/LegendGroup",["sap/viz/framework/common/util/oo","sap/viz/chart/components/container/UIContainer","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/layout/LegendLayout","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o,n,l,s){var u=function(e,t){u.superclass.constructor.apply(this,arguments);var i=this;this._subSelection={};this._position=null;this._defaultPosition=null;this._legendPreferSizes=null;this.setLayoutAlgorithm(new o);this._isDedicated=false;this._maxSize={width:0,height:0};this._height=0;this._width=0;this._spacing=12;var a=this._properties;["height","width"].forEach(function(e){var t={set:function(e,t){if(e===null||parseFloat(e)>=0){return e}else{return t.value}}};a.add("layout."+e,t)});a.add("visible",{get:function(e,t){var a=i._children;for(var r in a){if(a.hasOwnProperty(r)){var o=a[r].module;if(o.visible()){return true}}}return false}});this.runtime().statusManager().add("legendGroup.isHorizontal")};e.extend(u,t);var c=["right","left","top","bottom","auto"];u.prototype.getPosition=function(){var e="layout.position",t=this._defaultPosition||this._position||this._properties.get(e);return c.indexOf(t)!==-1?t:this._properties.getDefault(e)};u.prototype.setPosition=function(e){this._position=e};u.prototype.setDefaultPosition=function(e){this._defaultPosition=e};u.prototype.visible=function(){var e=this._children;for(var t in e){if(e.hasOwnProperty(t)){var i=e[t].module;if(i.visible()){return true}}}return false};u.prototype._isPropVisible=function(){var e=this._children;for(var t in e){if(e.hasOwnProperty(t)){var i=e[t].module;if(i.properties("visible")){return true}}}return false};u.prototype.isVisible=function(){var e=this._children;for(var t in e){if(e.hasOwnProperty(t)){var i=e[t].module;if(i.isVisible()){return true}}}return false};u.prototype._configLayout=function(){var e={};if(this._isPropVisible()){var t=this._children;var i;if(this._isDedicated){i={width:this._maxSize.width,height:this._maxSize.height+this._spacing}}else{i={height:this._height,width:this._width}}for(var a in t){if(t.hasOwnProperty(a)){var r=t[a];var o=r.module;if(o.visible()||this._isDedicated){e[a]=r}}}this._layoutAlgorithm.config.set({totalWidth:i.width,totalHeight:i.height,position:this.getPosition()||this._properties.get("layout.position"),spacing:this._spacing,legendPreferSizes:this._legendPreferSizes})}return e};u.prototype._postLayout=function(){var e=this._layoutResult;for(var t in e){if(e.hasOwnProperty(t)){var i=this._children[t].module;var a=e[t];if(a){i.width(a.width).height(a.height)}}}};function h(e,t){if(e===undefined||e===null||i.isFunction(e)&&!e()){return t}var a=d3.select(e());if(a.empty()){return t}return a}u.prototype.render=function(e){var t=this._properties.get("renderTo");e=h(t,e);e.select(".v-m-highlight").remove();e.attr("role","listbox");var i=this._isDedicated?d3.select(t()):undefined;var a=this._children;var r=null;if(this._isPropVisible()){r=this.layout()}var o=[];var n=0;for(var l in a){if(a.hasOwnProperty(l)){var s=a[l].module;var u=null;if(i&&!i.empty()){u=i.selectAll(".v-m-"+l);if(u.empty()){u=i.append("g").attr("class","v-m-"+l)}e.selectAll(".v-m-"+l).selectAll("*").remove()}else{if(this._subSelection[l]){u=e.selectAll(".v-m-"+l)}else{this._subSelection[l]=e.append("g").attr("class","v-m-"+l);u=this._subSelection[l]}}if(this._isDedicated&&i){var c=s.height();i.attr("height",c).attr("width",this._maxSize.width)}s.render(u);if(!s.visible()){continue}if(r&&r[l]&&r[l].x!==undefined&&r[l].y!==undefined){u.attr("transform","translate("+r[l].x+","+r[l].y+")")}if(this._properties.get("layout.alignment")==="center"&&(this._properties.get("layout.position")==="top"||this._properties.get("layout.position")==="bottom")){if(s._width<r[l].width){n+=(r[l].width-s._width)/2}var p={};p.wrapper=u;p.layoutInfo=r[l];o.push(p)}}}for(var d=0;d<o.length;d++){var f=o[d];var v=f.layoutInfo;f.wrapper.attr("transform","translate("+(v.x+n)+","+v.y+")")}this._properties.setDefault("computedVisibility",this.isVisible(),true)};u.prototype.setSize=function(e){var t=this._children;this._height=e.height;this._width=e.width;for(var i in t){if(t.hasOwnProperty(i)){var a=t[i].module;if(a.visible()){a.setSize({height:e.height,width:e.width})}}}return this};u.prototype.resetPreviousLimit=function(e){if(this._width&&(this._position==="left"||this._position==="right")){e.width=this._width;e.minWidth=this._width;e.maxWidth=this._width}else if(this._height&&(this._position==="top"||this._position==="bottom")){e.height=this._height;e.minHeight=this._height;e.maxHeight=this._height}};u.prototype.paginationOptions=function(){var e=this._runtime&&this._runtime._interaction&&this._runtime._interaction._service&&this._runtime._interaction._service.getDataModel();var t;if(e&&e.getPaginationOptions){t=e.getPaginationOptions()}return t};u.prototype.getPreferredSize=function(e,t,a,r){var o={width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0};if(!this._isPropVisible()){return o}var u=this._properties;var c=!t&&this._properties.origin.get("legendGroup.forceToShow");var h=e.maxHeight=l.getSizeValue(u.get("layout.maxHeight"),e.height);var p=e.maxWidth=e.maxWidth||l.getSizeValue(u.get("layout.maxWidth"),e.width);var d=u.get("layout.position");var f=[],v=[],g=[],m=[];var y=this._children;var _=0;var A=0;this._legendPreferSizes={};var b=u.get("renderTo");if(b!==undefined&&b!==null&&i.isFunction(b)&&b()){this._isDedicated=true}else{this._isDedicated=false}for(var x in y){if(y.hasOwnProperty(x)){var S=y[x].module;S.setDedicated(this._isDedicated);S.setPosition(this.getPosition());if(S.visible()||this._isDedicated){if(this._isDedicated){S.setOrientation("right")}else{S.setOrientation(this.getPosition()||d)}var D=S.getPreferredSize(e);this._legendPreferSizes[x]=D;if(!this._isDedicated&&!c){if(S.isHorizontal()){if(D.minHeight>h||D.minWidth>e.width){continue}}else{if(D.minWidth>p||D.minHeight>e.height){continue}}}f.push(D.minWidth);g.push(D.minHeight);v.push(D.maxWidth);m.push(D.maxHeight)}}}var w;if(c){w={width:d3.max(f),height:d3.max(g)}}else{w={width:d3.min(f),height:d3.min(g)}}var C={width:d3.max(v),height:d3.max(m)};if(w.width>0||w.height>0||C.width>0||C.height>0){if(this.isHorizontal()){A=e.maxHeight>C.height?C.height:e.maxHeight;_=C.width;this._maxSize.width=d3.sum(v);this._maxSize.height=C.height}else{_=e.maxWidth>C.width?C.width:e.maxWidth;A=C.height;this._maxSize.height=d3.sum(m);this._maxSize.width=C.width}}if(!this._isDedicated){if(c){if(_<w.width){_=w.width}if(A<w.height){A=w.height}}o={width:_,height:A,minWidth:w.width,maxWidth:C.width,minHeight:w.height,maxHeight:C.height};if(this._isRTL()||this._properties.get("layout.alignment")==="center"){o.maxSize=s.clone(this._maxSize)}}var T=r.pagination;if(r.dataChanged&&T&&T.mode===n.PAGINATION_MODE.UPDATE||!r.isSizeChanged&&r.propertiesChanged===false&&T&&T.mode===n.PAGINATION_MODE.UPDATE&&!a){this.resetPreviousLimit(o)}return o};u.prototype.isHorizontal=function(){var e=this.getPosition();if(!e){e=this._properties.get("layout.position")}var t=r.isHorizontal(e);this.runtime().statusManager().set("legendGroup.isHorizontal",t);return t};u.prototype.setData=function(){var e=this._children;for(var t in e){if(e.hasOwnProperty(t)){var i=e[t].module;i.setData.apply(i,arguments)}}};u.prototype.destroy=function(){u.superclass.destroy.call(this);this.clear();this._position=null;this._subSelection=null;this._legendPreferSizes=null;this._isDedicated=null;this._maxSize=null;this._height=null;this._width=null};u.prototype.clear=function(){for(var e in this._subSelection){if(this._subSelection.hasOwnProperty(e)&&this._subSelection[e]){this._subSelection[e].remove();this._subSelection[e]=null}}};u.prototype.supportFixedLayout=true;return u});define("propertyDefs",[],function(){return{"":{"general.accDescription":null,"general.background.border.bottom.visible":false,"general.background.border.left.visible":false,"general.background.border.right.visible":false,"general.background.border.stroke":"#d8d8d8","general.background.border.strokeWidth":1,"general.background.border.top.visible":false,"general.background.color":"transparent","general.background.drawingEffect":"normal","general.background.gradientDirection":"vertical","general.background.visible":true,"general.layout.isFixedPadding":false,"general.layout.padding":24,"general.layout.paddingBottom":null,"general.layout.paddingLeft":null,"general.layout.paddingRight":null,"general.layout.paddingTop":null,"general.tabIndex":0,"legend.drawingEffect":"normal","legend.isScrollable":false,"legend.itemMargin":.5,"legend.label.style.color":"#000000","legend.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","legend.label.style.fontSize":"12px","legend.label.style.fontStyle":"normal","legend.label.style.fontWeight":"normal","legend.marker.size":null,"legend.postRenderer":null,"legend.scrollbar.border.color":"white","legend.scrollbar.border.width":0,"legend.scrollbar.spacing":0,"legend.scrollbar.thumb.fill":"#e5e5e5","legend.scrollbar.thumb.hoverFill":"#dedede","legend.scrollbar.track.fill":"#f7f7f7","legend.showFullLabel":true,"legend.title.style.color":"#000000","legend.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","legend.title.style.fontSize":"14px","legend.title.style.fontStyle":"normal","legend.title.style.fontWeight":"bold","legend.title.text":null,"legend.title.visible":false,"legend.visible":true,"legendGroup.computedVisibility":{defaultValue:true,readonly:true,serializable:false},"legendGroup.forceToShow":false,"legendGroup.layout.alignment":"topLeft","legendGroup.layout.height":null,"legendGroup.layout.maxHeight":.25,"legendGroup.layout.maxWidth":.25,"legendGroup.layout.position":"right","legendGroup.layout.width":null,"legendGroup.linesOfWrap":1,"legendGroup.renderTo":{defaultValue:null,serializable:false},"plotArea.dataPoint.stroke.color":"#000000","plotArea.dataPoint.stroke.visible":false,"title.alignment":"center","title.layout.height":null,"title.layout.maxHeight":.2,"title.layout.respectPlotPosition":true,"title.style.color":"#333333","title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","title.style.fontSize":"16px","title.style.fontStyle":"normal","title.style.fontWeight":"bold","title.text":null,"title.visible":false,"tooltip.background.borderColor":"#cccccc","tooltip.background.color":"#ffffff","tooltip.bodyDimensionLabel.color":"#666666","tooltip.bodyDimensionValue.color":"#666666","tooltip.bodyMeasureLabel.color":"#666666","tooltip.bodyMeasureValue.color":"#000000","tooltip.closeButton.backgroundColor":"#ffffff","tooltip.closeButton.borderColor":"#cccccc","tooltip.footerLabel.color":"#000000","tooltip.formatString":null,"tooltip.layinChart":true,"tooltip.postRender":null,"tooltip.preRender":{defaultValue:null,serializable:false},"tooltip.separationLine.color":"#a7a9ac","tooltip.showFullText":{access:"internal",defaultValue:false},"tooltip.unitFormatType":"FinancialUnits","tooltip.visible":true},_bullet:{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.ignoreNoValue":false,"legend.label.text.target":null,"legend.maxNumOfItems":null,"legend.order":{defaultValue:null,serializable:false},"legendGroup.layout.respectPlotPosition":true,"plotArea.actualColor":["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E"],"plotArea.additionalColor":["#A7BFE5","#CFF9AA","#FFFF91","#FFE0AC","#FF9DAF","#BBA6D5","#6DC8E6","#E9FF7C","#FFFF9F","#FFAC8B","#D983B7","#3396E4","#40DB74","#FFEA50","#FF8953","#E560A1","#6F69C1"],"plotArea.background.border.bottom.visible":false,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":false,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":false,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.dataPoint.stroke.color":"#ffffff","plotArea.dataPoint.stroke.visible":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":false,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.markerRenderer":{access:"internal",defaultValue:null},"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.target.shadowColor":"","plotArea.target.valueColor":"#333333","plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},_dual:{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.markerRenderer":null,"plotArea.primaryValuesColorPalette":{defaultValue:["#8FBADD","#B8D4E9","#7AAED6","#A3C7E3","#3D88C4","#66A1D0","#297CBE","#5295CA","#005BA3","#146FB7","#005395","#0063B1"],serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.secondaryValuesColorPalette":{defaultValue:["#F6A09B","#F9C3C0","#F58E88","#F8B1AD","#F05B52","#F37D76","#EE4A40","#F16C64","#D92419","#ED382D","#C52117","#EB271B"],serializable:false},"plotArea.seriesStyle":null,"plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#8FBADD","valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":true,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true,"valueAxis2.axisLine.size":1,"valueAxis2.axisLine.visible":true,"valueAxis2.axisTick.visible":true,"valueAxis2.color":"#F6A09B","valueAxis2.label.formatString":null,"valueAxis2.label.style.color":"#333333","valueAxis2.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.label.style.fontSize":"12px","valueAxis2.label.style.fontStyle":"normal","valueAxis2.label.style.fontWeight":"normal","valueAxis2.label.unitFormatType":"FinancialUnits","valueAxis2.label.visible":true,"valueAxis2.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis2.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis2.layout.height":null,"valueAxis2.layout.maxHeight":.25,"valueAxis2.layout.maxWidth":.25,"valueAxis2.layout.width":null,"valueAxis2.title.applyAxislineColor":true,"valueAxis2.title.style.color":"#000000","valueAxis2.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.title.style.fontSize":"14px","valueAxis2.title.style.fontStyle":"normal","valueAxis2.title.style.fontWeight":"bold","valueAxis2.title.style.letterSpacing":null,"valueAxis2.title.text":null,"valueAxis2.title.visible":false,"valueAxis2.visible":true},_pie:{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(0%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":false,"interaction.selected.stroke.width":"1px","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.marker.shape":"squareWithRadius","legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"plotArea.alignment.vertical":{access:"internal",defaultValue:"top"},"plotArea.background.border.bottom.visible":false,"plotArea.background.border.left.visible":false,"plotArea.background.border.right.visible":false,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":false,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.distance":.1,"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.line.color":"#a8a8a8","plotArea.dataLabel.line.visible":true,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.type":"colorAndPercentage","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.highlight.contextInfos":[],"plotArea.markerRenderer":null,"plotArea.radius":.38,propertyZone:{defaultValue:null,readonly:true,serializable:false},"tooltip.bodyMeasureValue.type":"value"},_scatter:{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.adjustScale":false,"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorDepth":1,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPoint.opacity":.8,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.markerRenderer":null,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.shapeDepth":1,"plotArea.shapePalette":{defaultValue:["circle","square","diamond","triangleUp","triangleDown","triangleLeft","triangleRight","cross","intersection"],serializable:false},"plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},_trellis:{},_xy:{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.markerRenderer":null,"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.seriesStyle":null,"plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},_xySimple:{},"info/100_area":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.areaRenderer":null,"plotArea.areaStyle":{access:"internal",defaultValue:null},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.type":"value","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.markerRenderer":null,"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.seriesStyle":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"tooltip.bodyMeasureValue.type":"percentage","valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},"info/100_dual_stacked_bar":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"legend.marker.shape":"squareWithRadius","plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"value","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"tooltip.bodyMeasureValue.type":"percentage"},"info/100_dual_stacked_column":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"legend.marker.shape":"squareWithRadius","plotArea.dataLabel.overlapBehavior":"hideExceededLabels","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"value","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"tooltip.bodyMeasureValue.type":"percentage"},"info/100_horizontal_area":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.areaRenderer":null,"plotArea.areaStyle":{access:"internal",defaultValue:null},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.type":"value","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.markerRenderer":null,"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.seriesStyle":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"tooltip.bodyMeasureValue.type":"percentage","valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},"info/100_stacked_bar":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"legend.marker.shape":"squareWithRadius","plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"value","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"tooltip.bodyMeasureValue.type":"percentage"},"info/100_stacked_column":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"legend.marker.shape":"squareWithRadius","plotArea.dataLabel.overlapBehavior":"hideExceededLabels","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"value","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"tooltip.bodyMeasureValue.type":"percentage"},"info/DEFAULT":{"legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false}},"info/area":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.area.stroke.color":"#000000","plotArea.area.stroke.visible":false,"plotArea.areaRenderer":null,"plotArea.areaStyle":{access:"internal",defaultValue:null},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.markerRenderer":null,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.seriesStyle":null,"plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},"info/bar":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.position":"outsideFirst","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"value","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"valueAxis.label.allowDecimals":true},"info/bubble":{"plotArea.dataLabel.respectShapeWidth":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"bubbleWidth","plotArea.minMarkerSize":null,"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"plotArea.showNegativeValues":true,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"sizeLegend.drawingEffect":"normal","sizeLegend.formatString":null,"sizeLegend.label.style.color":"#000000","sizeLegend.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","sizeLegend.label.style.fontSize":"12px","sizeLegend.label.style.fontStyle":"normal","sizeLegend.label.style.fontWeight":"normal","sizeLegend.title.style.color":"#000000","sizeLegend.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","sizeLegend.title.style.fontSize":"14px","sizeLegend.title.style.fontStyle":"normal","sizeLegend.title.style.fontWeight":"bold","sizeLegend.title.text":null,"sizeLegend.title.visible":false,"sizeLegend.unitFormatType":"FinancialUnits","sizeLegend.visible":true,"valueAxis.label.formatString":null,"valueAxis.label.unitFormatType":"FinancialUnits","valueAxis2.axisLine.size":1,"valueAxis2.axisLine.visible":true,"valueAxis2.axisTick.visible":true,"valueAxis2.color":"#6c6c6c","valueAxis2.label.allowDecimals":true,"valueAxis2.label.formatString":null,"valueAxis2.label.style.color":"#333333","valueAxis2.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.label.style.fontSize":"12px","valueAxis2.label.style.fontStyle":"normal","valueAxis2.label.style.fontWeight":"normal","valueAxis2.label.unitFormatType":"FinancialUnits","valueAxis2.label.visible":true,"valueAxis2.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis2.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis2.layout.height":null,"valueAxis2.layout.maxHeight":.25,"valueAxis2.layout.maxWidth":.25,"valueAxis2.layout.width":null,"valueAxis2.title.applyAxislineColor":false,"valueAxis2.title.style.color":"#000000","valueAxis2.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.title.style.fontSize":"14px","valueAxis2.title.style.fontStyle":"normal","valueAxis2.title.style.fontWeight":"bold","valueAxis2.title.style.letterSpacing":null,"valueAxis2.title.text":null,"valueAxis2.title.visible":false,"valueAxis2.visible":true},"info/bullet":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"legend.label.text.negativeGap":null,"legend.label.text.positiveGap":null,"plotArea.forecastColor":["#D5DADC"],"plotArea.gap.negativeColor":"#e34352","plotArea.gap.positiveColor":"#87c27e","plotArea.gap.type":"both","plotArea.gap.visible":false,"valueAxis.layout.position":"top"},"info/column":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.dataLabel.position":"outside","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"valueAxis.label.allowDecimals":true},"info/combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.isFixedDataPointSize":false,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"valueAxis.label.allowDecimals":true},"info/donut":{"plotArea.highlight.centerName.style.color":null,"plotArea.highlight.centerName.style.fontFamily":"Arial, Helvetica, sans-serif","plotArea.highlight.centerName.style.fontSize":"14px","plotArea.highlight.centerName.style.fontStyle":"normal","plotArea.highlight.centerName.style.fontWeight":"normal","plotArea.highlight.centerName.visible":true,"plotArea.highlight.centerValue.style.color":null,"plotArea.highlight.centerValue.style.fontFamily":"Arial, Helvetica, sans-serif","plotArea.highlight.centerValue.style.fontSize":"22px","plotArea.highlight.centerValue.style.fontStyle":"normal","plotArea.highlight.centerValue.style.fontWeight":"normal","plotArea.highlight.centerValue.visible":true,"plotArea.highlight.highlightContext":[],"plotArea.highlight.unhighlightSliceColor":"#dddddd","plotArea.innerRadiusRatio":.5},"info/dual_bar":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.position":"outsideFirst","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"value","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"valueAxis.label.allowDecimals":true,"valueAxis2.label.allowDecimals":true},"info/dual_column":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.dataLabel.position":"outside","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"valueAxis.label.allowDecimals":true,"valueAxis2.label.allowDecimals":true},"info/dual_combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.dataShape.secondaryAxis":["line","line","line"],"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.title.applyAxislineColor":false,"valueAxis2.label.allowDecimals":true},"info/dual_horizontal_combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.background.gradientDirection":"horizontal","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.dataShape.secondaryAxis":["line","line","line"],"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.title.applyAxislineColor":false,"valueAxis2.label.allowDecimals":true},"info/dual_horizontal_stacked_combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.dataShape.secondaryAxis":["bar","line","line"],"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.title.applyAxislineColor":false,"valueAxis2.label.allowDecimals":true},"info/dual_line":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.showLine":false,"plotArea.callout.label.formatString":null,"plotArea.callout.label.style.color":"#333333","plotArea.callout.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.callout.label.style.fontSize":"12px","plotArea.callout.label.style.fontStyle":"normal","plotArea.callout.label.style.fontWeight":"normal","plotArea.callout.label.unitFormatType":"FinancialUnits","plotArea.callout.left":null,"plotArea.callout.line.color":"#343434","plotArea.callout.top":null,"plotArea.isSmoothed":false,"plotArea.lineRenderer":null,"plotArea.lineStyle":{access:"internal",defaultValue:null},"plotArea.lineVisible":true,"plotArea.marker.displayMode":"manual","plotArea.marker.shape":"circle","plotArea.marker.size":6,"plotArea.marker.visible":true,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"plotArea.width":2,"valueAxis.label.allowDecimals":true,"valueAxis2.label.allowDecimals":true},"info/dual_stacked_bar":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.showTotal":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"valueAxis.label.allowDecimals":true,"valueAxis2.label.allowDecimals":true},"info/dual_stacked_column":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.dataLabel.overlapBehavior":"hideExceededLabels","plotArea.dataLabel.showTotal":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"valueAxis.label.allowDecimals":true,"valueAxis2.label.allowDecimals":true},"info/dual_stacked_combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.dataShape.secondaryAxis":["bar","line","line"],"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.title.applyAxislineColor":false,"valueAxis2.label.allowDecimals":true},"info/dual_timeseries_combination":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataLabel.position":"outside","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPoint.invalidity":"break","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.5,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.title.applyAxislineColor":false,"valueAxis2.label.allowDecimals":true},"info/heatmap":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"categoryAxis2.axisLine.size":1,"categoryAxis2.axisLine.visible":true,"categoryAxis2.axisTick.shortTickVisible":null,"categoryAxis2.axisTick.visible":true,"categoryAxis2.color":"#6c6c6c","categoryAxis2.hoverShadow.color":"#cccccc","categoryAxis2.label.alignment":"top","categoryAxis2.label.hideSubLevels":false,"categoryAxis2.label.parentStyle.color":null,"categoryAxis2.label.parentStyle.fontFamily":null,"categoryAxis2.label.parentStyle.fontSize":null,"categoryAxis2.label.parentStyle.fontStyle":null,"categoryAxis2.label.parentStyle.fontWeight":null,"categoryAxis2.label.style.color":"#333333","categoryAxis2.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis2.label.style.fontSize":"12px","categoryAxis2.label.style.fontStyle":"normal","categoryAxis2.label.style.fontWeight":"normal","categoryAxis2.label.visible":true,"categoryAxis2.labelRenderer":null,"categoryAxis2.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis2.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis2.layout.height":null,"categoryAxis2.layout.maxHeight":.3,"categoryAxis2.layout.maxWidth":.3,"categoryAxis2.layout.width":null,"categoryAxis2.mouseDownShadow.color":"#808080","categoryAxis2.title.applyAxislineColor":false,"categoryAxis2.title.style.color":"#000000","categoryAxis2.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis2.title.style.fontSize":"14px","categoryAxis2.title.style.fontStyle":"normal","categoryAxis2.title.style.fontWeight":"bold","categoryAxis2.title.style.letterSpacing":null,"categoryAxis2.title.text":null,"categoryAxis2.title.visible":false,"categoryAxis2.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","legend.formatString":null,"legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.marker.shape":"squareWithRadius","legend.mouseDownShadow.color":"#e8eff6","legend.onlyShowStartEndLabel":{access:"internal",defaultValue:false},"legend.selectionFeedback":false,"legend.unitFormatType":"FinancialUnits","legendGroup.layout.respectPlotPosition":true,"plotArea.autoLegendValues":{access:"internal",defaultValue:[],readonly:true,serializable:false},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.border.visible":true,"plotArea.colorPalette":{defaultValue:[],serializable:false},"plotArea.dataLabel.formatString":"0.0","plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"white","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.defaultOthersStyle.color":"#000000","plotArea.dimensionLabel.renderer":null,"plotArea.dimensionLabel.style.color":null,"plotArea.dimensionLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dimensionLabel.style.fontSize":"12px","plotArea.dimensionLabel.style.fontStyle":"normal","plotArea.dimensionLabel.style.fontWeight":"normal","plotArea.dimensionLabel.visible":true,"plotArea.endColor":{defaultValue:"#73C03C",serializable:false},"plotArea.legendValues":{defaultValue:[],serializable:false},"plotArea.nullColor":{access:"internal",defaultValue:"#e0e0e0"},"plotArea.startColor":"#C2E3A9",propertyZone:{defaultValue:null,readonly:true,serializable:false}},"info/horizontal_area":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.areaRenderer":null,"plotArea.areaStyle":{access:"internal",defaultValue:null},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.markerRenderer":null,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.seriesStyle":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},"info/horizontal_stacked_combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"valueAxis.label.allowDecimals":true},"info/horizontal_waterfall":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.label.text.negativeValue":null,"legend.label.text.positiveValue":null,"legend.label.text.total":null,"legend.marker.shape":"squareWithRadius","legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"horizontal","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPoint.color.isSemanticColoring":true,"plotArea.dataPoint.color.negative":"#EB271B","plotArea.dataPoint.color.positive":"#67AC36","plotArea.dataPoint.color.total":"#848f94","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.linkline.color":"#333333","plotArea.linkline.size":1,"plotArea.linkline.type":"solid","plotArea.linkline.visible":true,"plotArea.markerRenderer":null,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},"info/line":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.showLine":false,"plotArea.adjustScale":false,"plotArea.callout.label.formatString":null,"plotArea.callout.label.style.color":"#333333","plotArea.callout.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.callout.label.style.fontSize":"12px","plotArea.callout.label.style.fontStyle":"normal","plotArea.callout.label.style.fontWeight":"normal","plotArea.callout.label.unitFormatType":"FinancialUnits","plotArea.callout.left":null,"plotArea.callout.line.color":"#343434","plotArea.callout.top":null,"plotArea.isFixedDataPointSize":false,"plotArea.isSmoothed":false,"plotArea.lineRenderer":null,"plotArea.lineStyle":{access:"internal",defaultValue:null},"plotArea.lineVisible":true,"plotArea.marker.displayMode":"manual","plotArea.marker.shape":"circle","plotArea.marker.size":6,"plotArea.marker.visible":true,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"plotArea.width":2,"valueAxis.label.allowDecimals":true,"valueAxis.layout.direction":"bottomUp"},"info/pie":{},"info/radar":{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.area.color":null,"interaction.deselected.area.opacity":.12,"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.area.color":null,"interaction.selected.area.opacity":.4,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.area.opacity":.3,"plotArea.area.visible":false,"plotArea.areaStyle":{access:"internal",defaultValue:null},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"darken(20%)","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.visible":true,"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.lineStyle":{access:"internal",defaultValue:null},"plotArea.marker.shape":"circle","plotArea.marker.size":6,"plotArea.marker.visible":true,"plotArea.polarAxis.axisLine.size":1,"plotArea.polarAxis.axisLine.visible":true,"plotArea.polarAxis.color":"#999999","plotArea.polarAxis.hoverShadow.color":"#cccccc","plotArea.polarAxis.label.style.color":"#666666","plotArea.polarAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.polarAxis.label.style.fontSize":"12px","plotArea.polarAxis.label.style.fontStyle":"normal","plotArea.polarAxis.label.style.fontWeight":"normal","plotArea.polarAxis.label.visible":true,"plotArea.polarAxis.labelRenderer":null,"plotArea.polarAxis.mouseDownShadow.color":"#808080","plotArea.polarAxis.title.style.color":"#000000","plotArea.polarAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.polarAxis.title.style.fontSize":"14px","plotArea.polarAxis.title.style.fontStyle":"normal","plotArea.polarAxis.title.style.fontWeight":"bold","plotArea.polarAxis.title.style.letterSpacing":null,"plotArea.polarAxis.title.text":null,"plotArea.polarAxis.title.visible":false,"plotArea.polarAxis.visible":true,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.seriesStyle":null,"plotArea.valueAxis.label.allowDecimals":true,"plotArea.valueAxis.label.formatString":null,"plotArea.valueAxis.label.style.color":"#333333","plotArea.valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.valueAxis.label.style.fontSize":"12px","plotArea.valueAxis.label.style.fontStyle":"normal","plotArea.valueAxis.label.style.fontWeight":"normal","plotArea.valueAxis.label.unitFormatType":"FinancialUnits","plotArea.valueAxis.label.visible":true,"plotArea.valueAxis.title.style.color":"#000000","plotArea.valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.valueAxis.title.style.fontSize":"14px","plotArea.valueAxis.title.style.fontStyle":"normal","plotArea.valueAxis.title.style.fontWeight":"bold","plotArea.valueAxis.title.style.letterSpacing":null,"plotArea.valueAxis.title.text":null,"plotArea.valueAxis.title.visible":false,"plotArea.valueAxis.visible":true,propertyZone:{defaultValue:null,readonly:true,serializable:false}},"info/scatter":{"plotArea.markerSize":10,"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"valueAxis.label.formatString":null,"valueAxis.label.unitFormatType":"FinancialUnits","valueAxis2.axisLine.size":1,"valueAxis2.axisLine.visible":true,"valueAxis2.axisTick.visible":true,"valueAxis2.color":"#6c6c6c","valueAxis2.label.allowDecimals":true,"valueAxis2.label.formatString":null,"valueAxis2.label.style.color":"#333333","valueAxis2.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.label.style.fontSize":"12px","valueAxis2.label.style.fontStyle":"normal","valueAxis2.label.style.fontWeight":"normal","valueAxis2.label.unitFormatType":"FinancialUnits","valueAxis2.label.visible":true,"valueAxis2.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis2.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis2.layout.height":null,"valueAxis2.layout.maxHeight":.25,"valueAxis2.layout.maxWidth":.25,"valueAxis2.layout.width":null,"valueAxis2.title.applyAxislineColor":false,"valueAxis2.title.style.color":"#000000","valueAxis2.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.title.style.fontSize":"14px","valueAxis2.title.style.fontStyle":"normal","valueAxis2.title.style.fontWeight":"bold","valueAxis2.title.style.letterSpacing":null,"valueAxis2.title.text":null,"valueAxis2.title.visible":false,"valueAxis2.visible":true},"info/stacked_bar":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.alignment":"top","categoryAxis.label.hideSubLevels":false,"categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.background.gradientDirection":"horizontal","plotArea.dataLabel.showTotal":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"valueAxis.label.allowDecimals":true},"info/stacked_column":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"legend.marker.shape":"squareWithRadius","plotArea.dataLabel.overlapBehavior":"hideExceededLabels","plotArea.dataLabel.showTotal":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.series":null,"valueAxis.label.allowDecimals":true},"info/stacked_combination":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"valueAxis.label.allowDecimals":true},"info/time_bubble":{"general.defaultTimePeriodColor":"#ff0000","general.timePeriodStyle":null,"interaction.selectability.axisLabelSelection":true,"plotArea.dataLabel.respectShapeWidth":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"bubbleWidth","plotArea.minMarkerSize":null,"plotArea.secondaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.secondaryScale.fixedRange":false,"plotArea.secondaryScale.maxValue":null,"plotArea.secondaryScale.minValue":null,"plotArea.showNegativeValues":true,"sizeLegend.drawingEffect":"normal","sizeLegend.formatString":null,"sizeLegend.label.style.color":"#000000","sizeLegend.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","sizeLegend.label.style.fontSize":"12px","sizeLegend.label.style.fontStyle":"normal","sizeLegend.label.style.fontWeight":"normal","sizeLegend.title.style.color":"#000000","sizeLegend.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","sizeLegend.title.style.fontSize":"14px","sizeLegend.title.style.fontStyle":"normal","sizeLegend.title.style.fontWeight":"bold","sizeLegend.title.text":null,"sizeLegend.title.visible":false,"sizeLegend.unitFormatType":"FinancialUnits","sizeLegend.visible":true,"valueAxis.axisTick.fixedTicks":null,"valueAxis2.axisLine.size":1,"valueAxis2.axisLine.visible":true,"valueAxis2.axisTick.visible":true,"valueAxis2.color":"#6c6c6c","valueAxis2.label.allowDecimals":true,"valueAxis2.label.formatString":null,"valueAxis2.label.style.color":"#333333","valueAxis2.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.label.style.fontSize":"12px","valueAxis2.label.style.fontStyle":"normal","valueAxis2.label.style.fontWeight":"normal","valueAxis2.label.unitFormatType":"FinancialUnits","valueAxis2.label.visible":true,"valueAxis2.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis2.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis2.layout.height":null,"valueAxis2.layout.maxHeight":.25,"valueAxis2.layout.maxWidth":.25,"valueAxis2.layout.width":null,"valueAxis2.title.applyAxislineColor":false,"valueAxis2.title.style.color":"#000000","valueAxis2.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis2.title.style.fontSize":"14px","valueAxis2.title.style.fontStyle":"normal","valueAxis2.title.style.fontWeight":"bold","valueAxis2.title.style.letterSpacing":null,"valueAxis2.title.text":null,"valueAxis2.title.visible":false,"valueAxis2.visible":true},"info/timeseries_100_stacked_column":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.zoom.direction":"categoryAxis","legend.marker.shape":"squareWithRadius","plotArea.dataLabel.overlapBehavior":"hideExceededLabels","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.color":null},"info/timeseries_bubble":{"general.defaultTimePeriodColor":"#ff0000","general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.plotLassoMode":"standard","plotArea.dataLabel.respectShapeWidth":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.type":"bubbleWidth","plotArea.minMarkerSize":null,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"sizeLegend.drawingEffect":"normal","sizeLegend.formatString":null,"sizeLegend.label.style.color":"#000000","sizeLegend.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","sizeLegend.label.style.fontSize":"12px","sizeLegend.label.style.fontStyle":"normal","sizeLegend.label.style.fontWeight":"normal","sizeLegend.title.style.color":"#000000","sizeLegend.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","sizeLegend.title.style.fontSize":"14px","sizeLegend.title.style.fontStyle":"normal","sizeLegend.title.style.fontWeight":"bold","sizeLegend.title.text":null,"sizeLegend.title.visible":false,"sizeLegend.unitFormatType":"FinancialUnits","sizeLegend.visible":true,"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.label.formatString":null,"valueAxis.label.unitFormatType":"FinancialUnits"},"info/timeseries_bullet":{"general.defaultTimePeriodColor":"#ff0000","general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","plotArea.background.border.left.visible":false,"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.color":null},"info/timeseries_column":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","legend.marker.shape":"squareWithRadius","plotArea.dataLabel.position":"outside","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.5,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.label.allowDecimals":true},"info/timeseries_combination":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataLabel.position":"outside","plotArea.dataLabel.style.colorRange":"all","plotArea.dataPoint.invalidity":"break","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.5,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.label.allowDecimals":true},"info/timeseries_line":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","legend.marker.showLine":false,"plotArea.adjustScale":false,"plotArea.callout.label.formatString":null,"plotArea.callout.label.style.color":"#333333","plotArea.callout.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.callout.label.style.fontSize":"12px","plotArea.callout.label.style.fontStyle":"normal","plotArea.callout.label.style.fontWeight":"normal","plotArea.callout.label.unitFormatType":"FinancialUnits","plotArea.callout.left":null,"plotArea.callout.line.color":"#343434","plotArea.callout.top":null,"plotArea.dataPoint.invalidity":"break","plotArea.isSmoothed":false,"plotArea.lineRenderer":null,"plotArea.lineStyle":{access:"internal",defaultValue:null},"plotArea.lineVisible":true,"plotArea.marker.hoverOnlyMode":{access:"internal",defaultValue:true,serializable:false},"plotArea.marker.shape":"circle","plotArea.marker.size":6,"plotArea.marker.visible":true,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.scrollbar.visible":{access:"internal",defaultValue:true},"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"plotArea.width":2,"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.interval.keyLabel":{access:"internal",defaultValue:null},"timeAxis.interval.number":{access:"internal",defaultValue:1},"timeAxis.interval.unit":{access:"internal",defaultValue:""},"timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.5,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.label.allowDecimals":true},"info/timeseries_scatter":{"general.defaultTimePeriodColor":"#ff0000","general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.plotLassoMode":"standard","plotArea.markerSize":10,"plotArea.trendLine.defaultStyle.color":null,"plotArea.trendLine.defaultStyle.forecast":0,"plotArea.trendLine.defaultStyle.size":2,"plotArea.trendLine.defaultStyle.type":"dot","plotArea.trendLine.lines":null,"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.label.formatString":null,"valueAxis.label.unitFormatType":"FinancialUnits"},"info/timeseries_stacked_column":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","legend.marker.shape":"squareWithRadius","plotArea.dataLabel.overlapBehavior":"hideExceededLabels","plotArea.dataLabel.showTotal":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.isFixedDataPointSize":false,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.color":null,"valueAxis.label.allowDecimals":true},"info/timeseries_stacked_combination":{"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.hideNoValueLabel":{access:"internal",defaultValue:false},"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.selectability.plotLassoMode":"standard","interaction.syncValueAxis":false,"interaction.zoom.direction":"categoryAxis","legend.groupByShape":false,"legend.marker.shape":"squareWithRadius","legend.marker.showLine":false,"plotArea.dataLabel.style.colorRange":"all","plotArea.dataPoint.invalidity":"break","plotArea.dataPoint.savingMode":true,"plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataShape.primaryAxis":["bar","line","line"],"plotArea.gap.barSpacing":1,"plotArea.isFixedDataPointSize":false,"plotArea.line.isSmoothed":false,"plotArea.line.lineRenderer":null,"plotArea.line.marker.shape":"circle","plotArea.line.marker.size":6,"plotArea.line.marker.visible":true,"plotArea.line.style":{access:"internal",defaultValue:null},"plotArea.line.visible":true,"plotArea.line.width":2,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.color":null,"valueAxis.label.allowDecimals":true},"info/timeseries_waterfall":{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.defaultTimePeriodColor":"#ff0000","general.enableScalingFactor":{access:"internal",defaultValue:false},"general.groupData":false,"general.respectOrderInGroup":false,"general.showAsUTC":false,"general.timePeriodStyle":null,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectByTimeAxisGroup":{access:"internal",defaultValue:true},"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoMode":"standard","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.syncValueAxis":false,"interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.label.text.negativeValue":null,"legend.label.text.positiveValue":null,"legend.marker.shape":"squareWithRadius","legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legendGroup.layout.respectPlotPosition":true,"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.recapTitle":"","plotArea.dataLabel.renderer":null,"plotArea.dataLabel.showRecap":false,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPoint.color.isSemanticColoring":true,"plotArea.dataPoint.color.negative":"#EB271B","plotArea.dataPoint.color.positive":"#67AC36","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.linkline.color":"#333333","plotArea.linkline.size":1,"plotArea.linkline.type":"solid","plotArea.linkline.visible":true,"plotArea.markerRenderer":null,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.startValue":0,"plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"timeAxis.axisLine.size":1,"timeAxis.axisLine.visible":true,"timeAxis.axisTick.visible":true,"timeAxis.color":"#6c6c6c","timeAxis.combinationConfig":null,"timeAxis.fiscal.periodNumbers":{access:"internal",defaultValue:null},"timeAxis.hoverShadow.color":"#EBEBEB","timeAxis.label.forceToShowFirstLastData":false,"timeAxis.label.showFirstLastDataOnly":false,"timeAxis.label.style.color":"#333333","timeAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.label.style.fontSize":"12px","timeAxis.label.style.fontStyle":"normal","timeAxis.label.style.fontWeight":"normal","timeAxis.label.style.parentColor":"#A6A6A6","timeAxis.label.visible":true,"timeAxis.layout.height":null,"timeAxis.layout.maxHeight":.3,"timeAxis.levelConfig":null,"timeAxis.levels":["day","month","year"],"timeAxis.mouseDownShadow.color":"#808080","timeAxis.title.style.color":"#000000","timeAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","timeAxis.title.style.fontSize":"14px","timeAxis.title.style.fontStyle":"normal","timeAxis.title.style.fontWeight":"bold","timeAxis.title.style.letterSpacing":null,"timeAxis.title.text":null,"timeAxis.title.visible":false,"timeAxis.visible":true,"tooltip.applyTimeAxisFormat":true,"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":null,"valueAxis.label.allowDecimals":true,"valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true},"info/treemap":{feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","legend.formatString":null,"legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.marker.shape":"squareWithRadius","legend.mouseDownShadow.color":"#e8eff6","legend.onlyShowStartEndLabel":{access:"internal",defaultValue:false},"legend.selectionFeedback":false,"legend.unitFormatType":"FinancialUnits","plotArea.autoLegendValues":{access:"internal",defaultValue:[],readonly:true,serializable:false},"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.border.visible":true,"plotArea.colorPalette":{defaultValue:[],serializable:false},"plotArea.dataLabel.formatString":"0.0","plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"white","plotArea.dataLabel.style.colorRange":"all","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.text":{defaultValue:null,serializable:false},"plotArea.dataLabel.truncationBehavior":"truncate","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPointStyle":null,"plotArea.defaultOthersStyle.color":"#000000","plotArea.dimensionLabel.renderer":null,"plotArea.dimensionLabel.style.color":null,"plotArea.dimensionLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dimensionLabel.style.fontSize":"12px","plotArea.dimensionLabel.style.fontStyle":"normal","plotArea.dimensionLabel.style.fontWeight":"normal","plotArea.dimensionLabel.visible":true,"plotArea.endColor":{defaultValue:"#73C03C",serializable:false},"plotArea.labelPosition":"center","plotArea.legendValues":{defaultValue:[],serializable:false},"plotArea.nullColor":{access:"internal",defaultValue:"#e0e0e0"},"plotArea.startColor":"#C2E3A9",propertyZone:{defaultValue:null,readonly:true,serializable:false}},"info/vertical_bullet":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,"legend.label.text.negativeGap":null,"legend.label.text.positiveGap":null,"plotArea.background.border.bottom.visible":true,"plotArea.forecastColor":["#D5DADC"],"plotArea.gap.negativeColor":"#e34352","plotArea.gap.positiveColor":"#87c27e","plotArea.gap.type":"both","plotArea.gap.visible":false},"info/waterfall":{"categoryAxis.axisLine.size":1,"categoryAxis.axisLine.visible":true,"categoryAxis.axisTick.shortTickVisible":null,"categoryAxis.axisTick.visible":true,"categoryAxis.color":"#6c6c6c","categoryAxis.hoverShadow.color":"#cccccc","categoryAxis.label.angle":90,"categoryAxis.label.hideSubLevels":false,"categoryAxis.label.linesOfWrap":1,"categoryAxis.label.overlapBehavior":"auto","categoryAxis.label.parentStyle.color":null,"categoryAxis.label.parentStyle.fontFamily":null,"categoryAxis.label.parentStyle.fontSize":null,"categoryAxis.label.parentStyle.fontStyle":null,"categoryAxis.label.parentStyle.fontWeight":null,"categoryAxis.label.rotation":"auto","categoryAxis.label.style.color":"#333333","categoryAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.label.style.fontSize":"12px","categoryAxis.label.style.fontStyle":"normal","categoryAxis.label.style.fontWeight":"normal","categoryAxis.label.truncatedLabelRatio":.2,"categoryAxis.label.visible":true,"categoryAxis.labelRenderer":null,"categoryAxis.layout.autoHeight":{defaultValue:null,readonly:true},"categoryAxis.layout.autoWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.categoryWidth":{defaultValue:null,readonly:true},"categoryAxis.layout.height":null,"categoryAxis.layout.maxHeight":.3,"categoryAxis.layout.maxWidth":.3,"categoryAxis.layout.offsetToChart":{defaultValue:null,readonly:true},"categoryAxis.layout.width":null,"categoryAxis.mouseDownShadow.color":"#808080","categoryAxis.title.applyAxislineColor":false,"categoryAxis.title.style.color":"#000000","categoryAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","categoryAxis.title.style.fontSize":"14px","categoryAxis.title.style.fontStyle":"normal","categoryAxis.title.style.fontWeight":"bold","categoryAxis.title.style.letterSpacing":null,"categoryAxis.title.text":null,"categoryAxis.title.visible":false,"categoryAxis.visible":true,feedingZone:{defaultValue:[{bindDef:[{id:null}],bound:[[[0,0],[0,0],[0,0],[0,0]]],name:null}],readonly:true,serializable:false},"general.enableScalingFactor":{access:"internal",defaultValue:false},"general.groupData":false,"general.respectOrderInGroup":false,"interaction.behaviorType":null,"interaction.decorations":{defaultValue:null,serializable:false},"interaction.deselected.color":null,"interaction.deselected.opacity":.4,"interaction.deselected.stroke.color":"darken(20%)","interaction.deselected.stroke.visible":false,"interaction.deselected.stroke.width":"1px","interaction.enableDeselectAll":true,"interaction.enableInternalEvents":{access:"internal",defaultValue:false},"interaction.enableKeyboard":false,"interaction.extraEventInfo":{access:"internal",defaultValue:false,readonly:false,serializable:true},"interaction.hover.color":null,"interaction.hover.opacity":1,"interaction.hover.stroke.color":"darken(20%)","interaction.hover.stroke.visible":true,"interaction.hover.stroke.width":"2px","interaction.keyboard.color":"#000000","interaction.keyboard.width":"1px","interaction.noninteractiveMode":false,"interaction.selectability.axisLabelSelection":true,"interaction.selectability.behavior":{access:"internal",defaultValue:"DATAPOINT",serializable:false},"interaction.selectability.legendSelection":true,"interaction.selectability.mode":"INCLUSIVE","interaction.selectability.plotLassoSelection":true,"interaction.selectability.plotStdSelection":true,"interaction.selected.color":null,"interaction.selected.stroke.color":"darken(20%)","interaction.selected.stroke.visible":true,"interaction.selected.stroke.width":"1px","interaction.zoom.direction":"all","interaction.zoom.enablement":"auto","legend.hoverSelectedShadow.color":"#dde8f1","legend.hoverShadow.color":"#f0f0f0","legend.ignoreNoValue":false,"legend.label.text.negativeValue":null,"legend.label.text.positiveValue":null,"legend.label.text.total":null,"legend.marker.shape":"squareWithRadius","legend.maxNumOfItems":null,"legend.mouseDownShadow.color":"#e8eff6","legend.order":{defaultValue:null,serializable:false},"legend.selectionFeedback":false,"legendGroup.layout.respectPlotPosition":true,"plotArea.background.border.bottom.visible":true,"plotArea.background.border.left.visible":true,"plotArea.background.border.right.visible":true,"plotArea.background.border.stroke":"#d8d8d8","plotArea.background.border.strokeWidth":1,"plotArea.background.border.top.visible":true,"plotArea.background.color":"transparent","plotArea.background.drawingEffect":"normal","plotArea.background.gradientDirection":"vertical","plotArea.background.visible":true,"plotArea.colorPalette":{defaultValue:["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"],serializable:false},"plotArea.dataLabel.formatString":null,"plotArea.dataLabel.hideWhenOverlap":false,"plotArea.dataLabel.renderer":null,"plotArea.dataLabel.style.color":"#333333","plotArea.dataLabel.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","plotArea.dataLabel.style.fontSize":"12px","plotArea.dataLabel.style.fontStyle":"normal","plotArea.dataLabel.style.fontWeight":"normal","plotArea.dataLabel.unitFormatType":"FinancialUnits","plotArea.dataLabel.visible":false,"plotArea.dataPoint.color.isSemanticColoring":true,"plotArea.dataPoint.color.negative":"#EB271B","plotArea.dataPoint.color.positive":"#67AC36","plotArea.dataPoint.color.total":"#848f94","plotArea.dataPointSize.max":96,"plotArea.dataPointSize.min":24,"plotArea.dataPointStyle":null,"plotArea.dataPointStyleMode":"update","plotArea.defaultOthersStyle.color":"#000000","plotArea.drawingEffect":"normal","plotArea.gap.barSpacing":1,"plotArea.gap.groupSpacing":1,"plotArea.gap.innerGroupSpacing":.125,"plotArea.gridline.color":"#d8d8d8","plotArea.gridline.size":1,"plotArea.gridline.type":"solid","plotArea.gridline.visible":true,"plotArea.gridline.zeroLine.color":null,"plotArea.gridline.zeroLine.highlight":true,"plotArea.gridline.zeroLine.unhighlightAxis":true,"plotArea.isFixedDataPointSize":false,"plotArea.linkline.color":"#333333","plotArea.linkline.size":1,"plotArea.linkline.type":"solid","plotArea.linkline.visible":true,"plotArea.markerRenderer":null,"plotArea.primaryScale.autoMaxValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.autoMinValue":{defaultValue:null,readonly:true,serializable:false},"plotArea.primaryScale.fixedRange":{defaultValue:false,serializable:false},"plotArea.primaryScale.maxValue":{defaultValue:null,serializable:false},"plotArea.primaryScale.minValue":{defaultValue:null,serializable:false},"plotArea.referenceLine.defaultStyle.color":"#666666","plotArea.referenceLine.defaultStyle.label.background":"#333333","plotArea.referenceLine.defaultStyle.label.color":"#ffffff","plotArea.referenceLine.defaultStyle.label.fontFamily":'"Open Sans", Arial, Helvetica, sans-serif',"plotArea.referenceLine.defaultStyle.label.fontSize":"11px","plotArea.referenceLine.defaultStyle.label.fontStyle":"normal","plotArea.referenceLine.defaultStyle.label.fontWeight":"normal","plotArea.referenceLine.defaultStyle.size":2,"plotArea.referenceLine.defaultStyle.type":"dash","plotArea.referenceLine.line":null,"plotArea.scrollbar.border.color":"white","plotArea.scrollbar.border.width":0,"plotArea.scrollbar.spacing":0,"plotArea.scrollbar.thumb.fill":"#e5e5e5","plotArea.scrollbar.thumb.hoverFill":"#dedede","plotArea.scrollbar.track.fill":"#f7f7f7","plotArea.window.end":null,"plotArea.window.start":null,propertyZone:{defaultValue:null,readonly:true,serializable:false},"valueAxis.axisLine.size":1,"valueAxis.axisLine.visible":true,"valueAxis.axisTick.visible":true,"valueAxis.color":"#6c6c6c","valueAxis.label.allowDecimals":true,"valueAxis.label.formatString":null,"valueAxis.label.style.color":"#333333","valueAxis.label.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.label.style.fontSize":"12px","valueAxis.label.style.fontStyle":"normal","valueAxis.label.style.fontWeight":"normal","valueAxis.label.unitFormatType":"FinancialUnits","valueAxis.label.visible":true,"valueAxis.layout.autoHeight":{defaultValue:null,readonly:true},"valueAxis.layout.autoWidth":{defaultValue:null,readonly:true},"valueAxis.layout.height":null,"valueAxis.layout.maxHeight":.25,"valueAxis.layout.maxWidth":.25,"valueAxis.layout.width":null,"valueAxis.title.applyAxislineColor":false,"valueAxis.title.style.color":"#000000","valueAxis.title.style.fontFamily":"'Open Sans', Arial, Helvetica, sans-serif","valueAxis.title.style.fontSize":"14px","valueAxis.title.style.fontStyle":"normal","valueAxis.title.style.fontWeight":"bold","valueAxis.title.style.letterSpacing":null,"valueAxis.title.text":null,"valueAxis.title.visible":false,"valueAxis.visible":true}}});define("sap/viz/chart/metadata/properties/PropertyLoader",["propertyDefs","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/core/ChartPropertyRegistry","sap/viz/framework/property/PropertyManager","sap/viz/framework/core/ChartViewRegistry","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r,o,n){var l=[];var s={};var u=["Title","Legend","Tooltip","Interaction","plotArea"];var c=["Title","Legend","Tooltip","Interaction"];function h(e,i,a,r,o){if((!o||o(i))&&e[r]){t.extend(true,a,p(e[r]))}return a}function p(e){for(var t in e){if(r.isValidValue(e[t])){e[t]={defaultValue:e[t]}}}return e}function d(e,i,a){if(i.isEmpty){return e}var r=c;if(a){r=u}if(r.length){e=t.extend(true,{},e)}r.forEach(function(t){var a=i.metadata["extend"+t];if(a){return}var r=new RegExp("^"+t,"i");for(var o in e){if(r.test(o)){delete e[o]}}});if(i.metadata["extendInteraction"]){e["interaction.behaviorType"]={defaultValue:null}}return t.extend(false,e,i.properties)}function f(e,t){var i=m(e);if(!i[e]){e="info/DEFAULT"}var a=s[e];if(!a||t){a=s[e]={};h(i,e,a,"");h(i,e,a,"_xy",function(e){return/bar|column|line|combination/.test(e)&&!/dual/.test(e)});h(i,e,a,"_xySimple",function(e){return/bar|column|line|combination/.test(e)&&!/trellis/.test(e)});h(i,e,a,"_dual",function(e){return/dual/.test(e)});h(i,e,a,"_trellis",function(e){return/trellis/.test(e)});h(i,e,a,"_scatter",function(e){return/scatter|bubble/.test(e)});h(i,e,a,"_pie",function(e){return/pie|donut/.test(e)});h(i,e,a,"_bullet",function(e){return/bullet/.test(e)});h(i,e,a,"_mekko",function(e){return/mekko/.test(e)});h(i,e,a,e)}return a}function v(e){var t=o.getMetadataWithFamily(e);var i=t&&t.family===n.EXTENSION.FAMILYNAME;var r=a.get(e);var s=f(e,l.length>1);return d(s,r,i)}function g(e){var t;for(t=0;t<l.length;t++){if(l[t].propDefs===e){return}}var i={propDefs:e,chartTypes:[]};for(t in e){if(e.hasOwnProperty(t)){if(t.indexOf("info/")>=0&&t!=="info/DEFAULT"){i.chartTypes.push(t)}}}l.push(i)}function m(e){var t=l[0].propDefs;if(l.length>1){for(var i=0;i<l.length;i++){if(l[i].chartTypes.indexOf(e)>=0){t=l[i].propDefs;break}}}return t}if(i.isArray(e)){e.forEach(function(e){g(e)})}else{g(e)}return{getProperties:v,addPropertyDefs:g}});define("sap/viz/chart/components/util/ScrollbarUtil",["sap/viz/framework/common/util/TypeUtils"],function e(t){function i(e){var t=0;switch(e.name){case"wheelmove":t=.1;if(e.data.wheelDelta>0){t=-t}break;case"leftarrow":case"uparrow":t=-.06;break;case"rightarrow":case"downarrow":t=.06;break}return t}function a(e,a,r,o,n,l){if(a){var s=i(e)*a.getThumbSize();if(!a.isThumbOverTrack(s)){e.data.originalEvent.preventDefault();var u=a.getThumbRatio();s*=t.isNumber(u)?u:1;if(o){r.scroll(s)}else{var c=r.getOffset();if(n){c.y-=s}else{c.x-=s}r.scroll(c);l.fireEvent("hideDetail",{mode:"actionMode"})}}}}var r={showScrollbar:function(e,t){var i=e.getModule("main");if(!i){i=e.getModule("plot")}if(i){var a,r;if(i.getVScrollbar&&i.getVScrollbar()){a=i.getVScrollbar();a.show(null,t)}if(i.getHScrollbar&&i.getHScrollbar()){r=i.getHScrollbar();r.show(null,t)}}},onScrollKeyboardHandler:function(e,i){var r=i.getModule("main")||i.getModule("plot");if(!r||!t.isFunction(r.scroll)){return}var o;var n;var l=e.name;if(["leftarrow","rightarrow"].indexOf(l)>-1){n=r.getHScrollbar();o=false}else if(["wheelmove","uparrow","downarrow"].indexOf(l)>-1){n=r.getVScrollbar();o=true}else{return}a(e,n,r,false,o,i)},onLegendScrollWheelHandler:function(e,i){var r=i.getModule("legendGroup.legend");if(!r||!t.isFunction(r.scroll)){return}var o=r.getPosition();if(o==="left"||o==="right"){a(e,r.getScrollbar(),r,true)}}};return r});define("sap/viz/chart/components/plots/PlotGeometryKeeper",["sap/viz/framework/common/util/ObjectUtils"],function(e){function t(t){var i=t.getStatus("plotArea.window")||{},a=t.getStatusManager().get("plotArea.window")||{};return!e.deepEqual(i,a)}var i={key:"plot.realsize",save:function(e){if(e.getStatusManager().get("hasCustomization")){return}var t=e.getModule("main.plot").getRealSize(),i=e.getStatusManager().get("plot.transform.scale");if(i.x===1){delete t.width}if(i.y===1){delete t.height}e.setStatus(this.key,t)},load:function(e){if(e.getStatusManager().get("hasCustomization")){return}var t=e.getStatus(this.key),i=e.getModule("main"),a=e.getModule("main.plot");if(t&&i&&a){var r=a.getSize();if(r.width>0&&r.height>0){var o=i.getZoomer().limits();var n=e.getStatusManager().get("sizeChanged");var l=n?Number.MAX_VALUE:o.x.max||Number.MAX_VALUE;var s=n?Number.MAX_VALUE:o.y.max||Number.MAX_VALUE;e.getStatusManager().set("plot.transform.scale",{x:Math.max(1,Math.min((t.width||0)/r.width,l)),y:Math.max(1,Math.min((t.height||0)/r.height,s))})}}},clear:function(e){e.removeStatus(this.key)}};var a={key:"plot.scroll",save:function(e){if(e.getStatusManager().get("hasCustomization")){return}var t=e.getModule("main.plot").getOffset(),i=e.getStatusManager().get("plot.offsetInValue");e.setStatus(this.key+".pixel",t);e.setStatus(this.key+".value",i)},load:function(e){if(e.getStatusManager().get("hasCustomization")){return}var t=e.getModule("main"),i=e.getStatus(this.key+".pixel"),a=e.getStatus(this.key+".value");if(i&&t){t.scroll(i)}if(a){e.getStatusManager().set("plot.offsetInValue",a)}},clear:function(e){e.removeStatus(this.key+".pixel");e.removeStatus(this.key+".value")}};function r(e,t,i){var a=e.h,r=e.v;return{x:a?a._scale.invert(-t.x/i.width):null,y:r?r._scale.invert((i.height+t.y)/i.height):null}}return{hasRangeChange:t,size:i,scroll:a,offsetInValue:r}});define("sap/viz/chart/behavior/config/PlotScrollBehaviorConfig",["sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/ScrollbarUtil","sap/viz/chart/components/plots/PlotGeometryKeeper"],function(e,t,i){var a=["info/bar","info/column","info/dual_bar","info/dual_column","info/stacked_bar","info/stacked_column","info/dual_stacked_bar","info/dual_stacked_column","info/100_stacked_bar","info/100_stacked_column","info/100_dual_stacked_bar","info/100_dual_stacked_column","info/line","info/horizontal_line","info/dual_line","info/dual_horizontal_line","info/combination","info/combinationEx","info/horizontal_combination","info/bullet","info/vertical_bullet","info/stacked_combination","info/horizontal_stacked_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination","info/bullet","info/vertical_bullet","info/mekko","info/100_mekko","info/horizontal_mekko","info/100_horizontal_mekko","info/area","info/horizontal_area","info/100_area","info/100_horizontal_area","info/dual_combination","info/dual_horizontal_combination","info/timeseries_scatter","info/timeseries_bubble"];var r=["info/bubble","info/scatter","info/waterfall","info/horizontal_waterfall"];function o(e){return e.getModule("main").getVScrollbar().isExist()}var n=function(i,a){if(e.isMobile()||!a.getProperties().get("plotArea.isFixedDataPointSize")){return}t.onScrollKeyboardHandler(i,a)};return[{id:"wheel_move_on_eventLayer_single",triggerEvent:{name:"wheelmove",targets:["v-m-plot","v-m-action-layerrange","v-m-datapoints"],supportedChartTypes:a.concat(r)},handler:function(e,a){if(!e.data.originalEvent.ctrlKey&&o(a)){if(!a.getDataModel().getPaginationOptions()){t.onScrollKeyboardHandler(e,a);i.scroll.save(a)}}}},{id:"on_plot_scroll",triggerEvent:{name:"plotScroll"},handler:function(e,t){t.fireEvent("hideDetail",{mode:"actionMode"})}},{id:"save_scroll_position_on_scrollbar_release",triggerEvent:{name:"scrollbarReleased"},handler:function(e,t){t.fireEvent("saveZoom",{scroll:true})}}]});define("sap/viz/chart/behavior/config/handler/AxisBehaviorHandler",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DOM","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r,o,n,l,s){var u=t.BEHAVIOR;var c=e.CSS.CLASS;var h="#333333";var p="parsedValue";function d(){}var f=d.prototype;function v(e){var i=e.getProperties().get("interaction.selectability");if(!i){return false}var a=e.getProperties().get("interaction.selectability.behavior");var r=a?a.toUpperCase():a;var o=i.mode?i.mode.toUpperCase():i.mode;var n=e.getNodes(e.NodeType.AXIS_ITEM);if(!i.axisLabelSelection||o===t.SELECTION_MODE.NONE||o===t.SELECTION_MODE.SINGLE&&r!==t.SELECTION_BEHAVIOR.CATEGORY||!n.node()){return false}else{return true}}function g(e){var i=e.getProperties().get("interaction.selectability");if(!i){return false}var a=i.mode?i.mode.toUpperCase():i.mode;var r=e.getNodes(e.NodeType.TIMEAXIS_ITEM)||e.getNodes(e.NodeType.TIMEAXIS_ITEM_UPPERLEVEL);if(!i.axisLabelSelection||a===t.SELECTION_MODE.NONE||a===t.SELECTION_MODE.SINGLE||!r.node()){return false}else{return true}}function m(e){var t=e;while(t&&t.getAttribute){if(r.hasClass(t,c.AXIS.CONTAINER)){break}t=t.parentNode}return t}function y(e){var t=e.data.currentTarget;var i=m(t);var a=o.getContext(i);if(a&&a.name){return a.name}else{return"categoryAxis"}}function _(e,t){var i=y(e);if(i&&i.toLowerCase()==="categoryaxis"){var a=t.getModule("main.categoryAxis.axisBody");return a&&a.isOnlyShowingFirstAndLastLabel&&a.isOnlyShowingFirstAndLastLabel()}return false}var A=function(e,t){var i=e.data.currentTarget,a=o.getContext(i);if(!a.hasOwnProperty("rectX")){return}n.cleanRangeSelection(t);var r={},l=t.getDataModel()._timeAxis.metaData[0].id;r[l+"."+p]=a.range;return n.getDataPointIds(r,t)};f.getTargetsAndCtxs=function(e,t,i){var r={};var s;var u=a.extendByRepalceArray({},o.getContext(e).ctx);if(t){s=o.getContext(t);if(s){if(u&&u.or&&l.isArray(u.or)){u.or.forEach(function(e){a.extendByRepalceArray(e,s.ctx)})}else{a.extendByRepalceArray(u,s.ctx)}}}r.targets=n.getDataPointIds(u,i);r.ctxs=this.filterCtx(u,s);return r};f.hoverOnAxisLabel=function(e,t){if(t.getStatus("rangeSelection")){return}if(!v(t)||_(e,t)){return}var i=t._getRenderType().indexOf("radar")>-1;var a="plotArea.polarAxis";var r=i?a:y(e);t.fireEvent("processUnhighlight");var o=t.getProperties().get(r+".hoverShadow.color");if(o){d3.select(e.data.currentTarget).select("rect").attr("fill",e.data.byKeyboard?"transparent":o).classed(c.HOVER_SHADOW,true)}var n=this.getTargetsAndCtxs(e.data.currentTarget,null,t).targets;t.fireEvent("processHighlight",{targets:n})};f.hoverOnTimeAxisLabel=function(e,t){if(t.getStatus("rangeSelection")){return}if(!g(t)){return}t.fireEvent("processUnhighlight");var i=t.getProperties().get("timeAxis.hoverShadow.color");if(i){d3.select(e.data.currentTarget).select("rect").attr("fill",e.data.byKeyboard?"transparent":i).classed(c.HOVER_SHADOW,true)}var a=e.data.currentTarget;var r=o.getContext(a);var n=m(a);if(n){var l=n.querySelector(".v-label-upperLevel[timelabel-id='"+r.id+"']");if(l){var s=t.getProperties().get("timeAxis.label.style.color")||h;var u=t.getEffectManager();s=u.register({fillColor:s});l.setAttribute("fill",s)}}var p=A(e,t);t.fireEvent("processHighlight",{targets:p})};f.hoverOnNonAxisLabel=function(e,t){if(!(v(t)||g(t))){return}t.fireEvent("processUnhighlight")};var b=function(e,t){var i=e.selectAll(".v-m-highlight")[0];if(i.length>0){var a=t.getStatus("selectedDataPoints").length;switch(a){case 0:d3.select(i[i.length-1]).remove();break;case 1:if(i.length===1){var r=s.getData(i[0].parentNode)||{};if(!r.isZeroValue){d3.select(i[0]).remove()}}break}}};var x=function(e){if(e.node()){return e}return null};f.cleanAxisHoverEffect=function(e,t){t.getNodes(t.NodeType.AXIS_ITEM_BACKGROUND).attr("fill","transparent").classed(c.HOVER_SHADOW,false).classed(c.FOCUS_SHADOW,false);var i=t.getNodes(t.NodeType.TIMEAXIS_ITEM_UPPERLEVEL,false);if(i&&i.length>0){var a=m(i[0]);var r=a.querySelectorAll(".v-label-upperLevel");var o=t.getProperties().get("timeAxis.label.style.parentColor");for(var n=0;n<r.length;n++){r[n].setAttribute("fill",o)}}var l=x(t.getNodes(t.NodeType.MAIN_NODE))||x(t.getNodes(t.NodeType.PLOT_NODE));b(l,t)};f.clickOnAxisLabel=function(e,t){if(!v(t)||_(e,t)){return}var i=e.data.currentTarget;var a=m(i);var r=this.getTargetsAndCtxs(i,a,t);var o=r.targets;var n=r.ctxs;t.fireEvent("processSelection",{ctx:n,targets:o,deselectable:true,ctrlKeyPressed:e.data.ctrlKey});t.fireEvent("processMultipleSelectionTooltip",{targets:o,point:e.data.point})};f.clickOnTimeAxisLabel=function(e,t){if(!g(t)){return}var i=A(e,t);t.fireEvent("processSelection",{targets:i,deselectable:true,ctrlKeyPressed:e.data.ctrlKey});t.fireEvent("processMultipleSelectionTooltip",{targets:i,point:e.data.point})};f.filterCtx=function(e){return e};f.downOnAxisLabel=function(e,t){if(_(e,t)){return}var i;if(v(t)){var a=y(e);i=t.getProperties().get(a+".mouseDownShadow.color")}else if(g(t)){i=t.getProperties().get("timeAxis"+".mouseDownShadow.color")}else{return}t.getNodes(t.NodeType.AXIS_ITEM_BACKGROUND).attr("fill","transparent").classed(c.HOVER_SHADOW,false);if(i){d3.select(e.data.currentTarget).select("rect").attr("fill",i).classed(c.FOCUS_SHADOW,true)}};f.upOnAxisLabel=function(e,t){if(_(e,t)){return}var a;if(v(t)){var r=y(e);a=t.getProperties().get(r+".hoverShadow.color")}else if(g(t)){a=t.getProperties().get("timeAxis"+".hoverShadow.color")}else{return}var o=t.getNodes(t.NodeType.AXIS_ITEM_BACKGROUND);o.attr("fill","transparent").classed(c.FOCUS_SHADOW,false);if(i.isMobile()){o.classed(c.HOVER_SHADOW,false)}else{if(a){d3.select(e.data.currentTarget).select("rect").attr("fill",a).classed(c.HOVER_SHADOW,true)}}};return d});define("sap/viz/chart/behavior/config/AxisBehaviorConfig",["sap/viz/chart/behavior/config/handler/AxisBehaviorHandler","sap/viz/framework/common/util/Constants"],function(e,t){var i="v-axis-item";var a="v-mbc-axis-item";var r="v-timeaxis-item";var o="v-timeaxis-item-upperLevel";var n="v-axis-mekko-item";return[{id:"axisBehaviorDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"hover",targets:i,excludeTargets:n,method:"hoverOnAxisLabel"},{name:"hover",excludeTargets:[i,r,o,t.CSS.CLASS.LEGENDITEM],method:"hoverOnNonAxisLabel"},{name:"hover",targets:[r,o],method:"hoverOnTimeAxisLabel"},{name:"cleanAxisHoverEffect",method:"cleanAxisHoverEffect"},{name:"click",targets:i,excludeTargets:[n,a],method:"clickOnAxisLabel"},{name:"click",targets:[r,o],method:"clickOnTimeAxisLabel"},{name:"down",targets:[i,r,o],excludeTargets:n,method:"downOnAxisLabel"},{name:"up",targets:[i,r,o],excludeTargets:n,method:"upOnAxisLabel"}]}]});define("sap/viz/chart/behavior/config/HighlightHelper",["sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/RuleUtil","sap/viz/framework/common/util/DOM","sap/viz/framework/common/effect/EffectManager","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/ChartConstants"],function(e,t,i,a,r,o,n,l,s,u){var c=function(e,a,r,o,n,l,s){var u=s?s:t.getData(a);var c,h=o?o:u.color,p=e.getEffectManager();if(r){if(i.isFunction(r)){c=r(h)}else if(i.isString(r)){c=p.parseColorProperty(r,h)}}var d=e.isHorizontal();var f=null;if(l&&l.isReverse){f=f===d?null:d?"horizontal":"vertical"}else{f=f===d?null:d?"vertical":"horizontal"}var v=u.shape;var g=u.r;if(n&&h){h=p.register({drawingEffect:n,fillColor:h,patternEffect:u.pattern,isNegative:u.isNegative,direction:f,graphType:v,radius:g})}if(n&&c){c=p.register({drawingEffect:n,fillColor:c,patternEffect:u.pattern,isNegative:u.isNegative,direction:f,graphType:v,radius:g})}return{defaultColor:h,customizedColor:c}};var h=function(e,t,a){var r;if(t==null){t=0}if(!i.isNumber(t)){t=+t.match(/[0-9]+/)}if(!e){r=t}else if(i.isNumber(e)){r=e}else{if(!i.isNumber(r)){r=+e.match(/[0-9]+/)}}if(r>4){r=t}return(a===undefined?r:r*a)+"px"};function p(t,i){return e.rgb2Hex(e.colorLinerTransform(new n,{constant:0,factor:i?i:1},t))}function d(e){return i.isArray(e)?e:[e]}function f(e,t,a,r,o,n,l){var u=d3.select("."+s.CSS.CLASS.ZEROVALUEHOVER).node();var p=d3.select(t).selectAll(a);if(i.isExist(u)&&i.isExist(l)){if(l.isZeroOnFirstTab){p=d3.select(u).selectAll(a)}}if(!n&&p&&p[0]&&p[0].length>1){var d=p[0];p=d3.select(d[d.length-1])}var f=i.isExist(l)?l.isZeroValue:false;if(!f){p.attr("stroke-dasharray",undefined)}if(r.visible===true){var v=c(e,t,r.color);var g=v.customizedColor||v.defaultColor;p.attr("stroke",g);p.attr("stroke-width",h(r.width,o))}else{p.attr("stroke",undefined);p.attr("stroke-width",undefined)}}function v(e,a,r,o,n,l){var s=t.getData(a);var u=i.isExist(o.opacity)?o.opacity:1;a.setAttribute("fill-opacity",u);var h=d3.select(a).selectAll(r);if(l){h.attr("fill-opacity",u)}h.attr("stroke-opacity",u);if(!n){var p=s.pattern==="noFill"?null:e.getProperties().get("plotArea.drawingEffect");var d=c(e,a,o.color,null,p);var f=d.customizedColor||d.defaultColor;if(s.pattern==="noFill"){h[0][0].setAttribute("stroke",f)}else{h.attr("fill",f)}}}function g(){var e=["v-datapoint","v-legend-item","v-axis-item","v-timeaxis-item","v-timeaxis-item-upperLevel","v-datalabel","v-mbc-legend-item","v-m-scrollbarTrack","v-area","v-area-point","v-area-ref-line","v-area-ref-line-selected","v-selected-area","v-nonLeafDimensionLabel"];if(!l.isMobile()){e.push("v-m-action-layerrange")}return e}function m(e){var t=e||window.event;return{x:t.layerX||t.offsetX,y:t.layerY||t.offsetY}}function y(e,t){return{left:e.x-t.x,top:e.y-t.y}}function _(e,t,i){if(!t||!t.getAttribute){return null}if(o.hasClass(t,e)){return t}if(t!==i.node()){return _(e,t.parentNode,i)}return null}var A={transformColor:p,turnToArray:d,getColors:c,drawStroke:f,drawFill:v,getWidth:h,getDeselAllExTargets:g,getLayerCoord:y,tryToFindNode:_};return A});define("sap/viz/chart/behavior/config/ContextualDataUtil",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/common/util/DataContextUtils"],function(e,t,i,a,r,o,n){function l(e){var t;if(e&&e.timeAxis&&e.timeAxis()){t=e.timeAxis().metaData.map(function(e){return e.id})}return t}function s(e,t){var i=e&&e._rawData&&e._rawData.measures&&e._rawData.measures();return n.convertBigNumString(i,t)}function u(e,i){var a=e;if(i&&i.length){a=t.extend(true,{},e);i.forEach(function(e){delete a[e+r.DIMENSION_PARSED_VALUE_SUFFIX]})}return a}function c(t,r,o,n,c){var h=n.getDataModel();var p=l(h);var d=r==="datapoint";var f=t.map(function(e){var t=a.getDataPointId(e);if(!t){return}var r=d?h.getDataPoint(t).context():i.getContext(e);r=s(h,r);r=u(r,p);return{target:e,data:r}});if(c){f.dateTimeRange=c}n.fireExternalEvent("contextualData",{name:e.Event.ContextualData.name,type:r,data:f,point:o})}function h(t,i,a,r,o){var n=r.getDataModel();var c=l(n);var h=t.map(function(e){if(!e){return}var t=n.getDataPoint(e).context();t=s(n,t);t=u(t,c);return{target:null,data:t}});if(o){h.dateTimeRange=o}r.fireExternalEvent("contextualData",{name:e.Event.ContextualData.name,type:i,data:h,point:a})}function p(t,a,r){var o=[];var n=f(t,t.data.currentTarget,r);var l=s(r.getDataModel(),i.getContext(n));o.push({target:n,data:l});r.fireExternalEvent("contextualData",{name:e.Event.ContextualData.name,type:a,data:o,point:t.data.point})}function d(t,a,r,o){var n={context:i.getContext(t.data.currentTarget).ctx,target:t.data.currentTarget};o.fireExternalEvent("contextualData",{name:e.Event.ContextualData.name,type:a,data:[],context:n,point:t.data.point})}function f(e,t,i){var a=m(e.data.originalEvent);var r=g(t);return v(a,r,i)}function v(e,t,i){var a=i.isHorizontal();var r=a?"y":"x";var o,n,l;t.forEach(function(t){l=y(t);var i=Math.abs(l[r]-e[r]);if(!n||!o){n=t;o=i;return}if(i<o){o=i;n=t}});return n}function g(e){if(e){var t=i.getData(e).dataPoints;return t}}function m(e){var t=e||window.event;return{x:t.pageX,y:t.pageY}}function y(e){var t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function _(e,t){var a=i.getContext(e);var r=i.getData(e);if(!r){return null}var n=r.timeField,l={};if(!n||n.length===0){return null}n=n[0];l[n]=a[n];return o.getDataPointNodes(l,t).sort(function(e,t){var a=i.getData(e).seriesIndex;var r=i.getData(t).seriesIndex;return a-r})}return{getTimeField:l,removeTimeSuffix:u,fireContextualDataEvent:c,fireContextualDataEventByIDs:h,fireContextualDataEventForArea:p,fireContextualDataEventForLegendItem:d,getDataPointsByTimeField:_}});define("sap/viz/chart/behavior/config/ContextualDataConfig",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DOM","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r,o,n,l){var s="v-axis-item",u="v-nonLeafDimensionLabel",c="v-m-valueAxis",h="v-m-valueAxis2",p="v-m-categoryAxis",d="v-m-categoryAxis2",f="v-m-timeAxis";var v="v-m-legend",g="v-m-sizeLegend",m="v-legend-item";var y="v-m-title";var _="v-datapoint",A="v-datalabel",b="v-selected-area",x="v-area";var S="v-m-plot",D="v-m-plot-bound";var w="v-m-background",C="v-subtitle";var T="v-m-action-layerrange-content";var z="v-trellistitle-left",L="v-trellistitle-right",P="v-trellistitle-bottom",k="v-trellistitle-top";var E=e.CSS.CLASS;var I=n.getTimeField,O=n.removeTimeSuffix,R=n.fireContextualDataEvent,N=n.fireContextualDataEventByIDs,M=n.fireContextualDataEventForArea;return[{id:"right_click_anywhere",triggerEvent:{name:"contextmenu"},handler:function(e,t){t.fireEvent("hideDetail",{mode:"actionMode"}).fireEvent("hideDetail",{mode:"infoMode"})}},{id:"right_click_on_axis",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[c,h,p,d,f],excludeTargets:[s,u]},handler:function(e,t){var a;var r=e.data.currentTarget;if(i.hasClass(r,c)){a="valueAxis"}else if(i.hasClass(r,h)){a="valueAxis2"}else if(i.hasClass(r,p)){a="categoryAxis"}else if(i.hasClass(r,d)){a="categoryAxis2"}else if(i.hasClass(r,f)){a="timeAxis"}R([],a,e.data.point,t)}},{id:"right_click_on_axis_label",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[s,u]},handler:function(e,r){var n=e.data.currentTarget;var l=n;while(l&&l.getAttribute){if(i.hasClass(l,E.AXIS.CONTAINER)){break}l=l.parentNode}var s=t.extendByRepalceArray({},a.getContext(n).ctx);if(l){var u=a.getContext(l);if(u){t.extendByRepalceArray(s,u.ctx)}}if(r.isBigDataMode()){var c=o.getDataPointIds(s,r);N(c,"axisLabel",e.data.point,r)}else{var h=o.getDataPointNodes(s,r);R(h,"axisLabel",e.data.point,r)}}},{id:"right_click_on_axis_label_treemap",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[s,u],supportedChartTypes:"info/treemap"},handler:function(e,t){var i=e.data.currentTarget;var r=a.getContext(i);var n=o.getDataPointNodes(r,t);R(n,"axisLabel",e.data.point,t)}},{id:"right_click_on_legend",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[m,v,g]},handler:function(e,t){var a=e.data.currentTarget;if(i.hasClass(a,m)){n.fireContextualDataEventForLegendItem(e,"legend",e.data.point,t)}else{R([],"legend",e.data.point,t)}}},{id:"right_click_on_title",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:y},handler:function(e,t){R([],"title",e.data.point,t)}},{id:"right_click_on_trellis_title",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[z,L,P,k]},handler:function(e,t){R([],"trellis_title",e.data.point,t)}},{id:"right_click_on_chartarea",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[w,C]},handler:function(e,t){R([],"chartArea",e.data.point,t)}},{id:"right_click_on_datapoint",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[_,A]},handler:function(e,t){if(!t.getStatus("rangeSelection")){var i;if(t.getProperties().get("interaction.selectByTimeAxisGroup")){i=n.getDataPointsByTimeField(e.data.currentTarget,t)}else{i=r.turnToArray(e.data.currentTarget)}if(i){R(i,"datapoint",e.data.point,t)}}else{R([],"plot",e.data.point,t)}}},{id:"right_click_on_area",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[x,b]},handler:function(e,t){M(e,"datapoint",t)}},{id:"right_click_on_lasso_box",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[T]},handler:function(e,t){var i=t.getStatus("selectedDataPoints");var r=a.getNodes(i,t);var o=t.getStatus("rangeDomain");var n=t.getDataModel()._timeAxis.metaData[0].id;var l=o&&o.length===2?{start:{},end:{}}:null;if(l){l.start[n]=o[0];l.end[n]=o[1]}R(r,"plot",e.data.point,t,l)}},{id:"right_click_on_plot",declaredEvents:"contextualData",triggerEvent:{name:"contextmenu",targets:[S,D],excludeTargets:[_,A,s,u,x,b]},handler:function(t,i){if(!i.isBigDataMode()){R([],"plot",t.data.point,i);return}var a=t.data.originalEvent;var r=i.getOffsetMatrix(i.OffsetType.PLOT_NODE,true);var o={left:t.data.pointToChart.x-r.e,top:t.data.pointToChart.y-r.f};var n=i.getModule("main.plot");var l=n.getOffset();o.left-=l.x;o.top-=l.y;var s=n.hitTest(o);if(s.length===0){R([],"plot",t.data.point,i);return}var u=i.getDataModel();var c,h,p;for(var d=0;d<s.length;d++){c=s[d];p=u.getDataPoint(c.dataId);if(p){var f=I(u);h=O(p.context(),f);break}}if(p==null){R([],"plot",t.data.point,i)}else{i.fireExternalEvent("contextualData",{name:e.Event.ContextualData.name,type:"datapoint",data:[{target:null,data:h}],point:t.data.point})}}}]});define("sap/viz/chart/behavior/config/AlignToUtil",["sap/viz/framework/common/util/TypeUtils"],function(e){var t={l:function(e){return{x:e.left,y:e.top+e.height/2}},r:function(e){return{x:e.right,y:e.top+e.height/2}}};function i(i){if(!e.isArray(i)){i=[i]}var r={};i.forEach(function(e){var i=t[e.source.pos](e.source.dom.getBoundingClientRect()),o=t[e.target.pos](e.target.dom.getBoundingClientRect());a(r,{x:o.x-i.x,y:o.y-i.y},e.aspects||"xy")});return r}function a(e,t,i){i.split("").forEach(function(i){if(t.hasOwnProperty(i)){e[i]=t[i]}})}function r(e,t,i,a){var r={isAnchored:true,point:e.data.point,targets:i,forceStyle:{padding:"0px"}};var o=t.getModule("legendGroup");var n=o?o.getPosition().charAt(0):null;if(n==="l"||n==="r"){r.point.offset={x:n==="l"?10:-10};r.point.alignTo={source:{pos:n},target:{dom:a,pos:n==="l"?"r":"l"}}}return r}function o(e,t,i,a,r){var o={isAnchored:true,point:e.data.point,targets:i,forceStyle:{padding:"0px"}};var n=t.getModule("legendGroup");var l=n?n.getPosition().charAt(0):null;if(l==="l"||l==="r"){o.point.offset={x:l==="l"?10:-10};o.point.alignTo=[{aspects:"y",source:{pos:l},target:{dom:a,pos:l==="l"?"r":"l"}},{aspects:"x",source:{pos:l},target:{dom:r,pos:l==="l"?"r":"l"}}]}return o}var n={calculate:i,getTooltipData:r,getMBCTooltipData:o};return n});define("sap/viz/chart/behavior/config/handler/LegendBehaviorHandler",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/AlignToUtil","sap/viz/framework/common/util/DOM","sap/viz/chart/components/util/ScrollbarUtil"],function(e,t,i,a,r,o,n,l,s){var u=t.BEHAVIOR;var c=e.CSS.CLASS;var h="legendPanLastPos";var p=function(){};p.prototype={standAloneInitialized:function(e,t){t.getProperties().origin.add({legend:{mouseDownShadow:{color:"#808080"},hoverShadow:{color:"#cccccc"}},interaction:{selectability:{legendSelection:true}}})},getTargetsFromCtx:function(e,t,i){if(i.isBigDataMode()){var a=i.getModule("main.plot");if(a.setLastSeries){a.setLastSeries(e,true)}}return this._getTargets(e,t,i)},dragStart:function(e,t){if(!t.getProperties().get("legend.isScrollable")||t.getProperties().get("interaction.noninteractiveMode")||!i.isMobile()){return}e.data.originalEvent.preventDefault();var a=e.data.point;var r=t.getModule("legendGroup.legend");var o=r.isHorizontal()?a.x:a.y;t.setStatus(h,o);t.fireEvent("hideDetail",{mode:"infoMode"}).fireEvent("hideDetail",{mode:"actionMode"})},dragMove:function(e,t){if(!t.getProperties().get("legend.isScrollable")||t.getProperties().get("interaction.noninteractiveMode")||!i.isMobile()){return}if(!t.getStatus(h)){return}var a=t.getModule("legendGroup.legend");if(!a){return}e.data.originalEvent.preventDefault();var r=e.data.point;var o=t.getStatus(h);var n;if(a.isHorizontal()){n=o-r.x;t.setStatus(h,r.x)}else{n=o-r.y;t.setStatus(h,r.y)}if(a.scroll){a.scroll(n)}},dragEnd:function(e,t){t.removeStatus(h)},hover:function(e,t){if(t.getStatus("rangeSelection")){return}t.fireEvent("processUnhighlight");if(!r.isLegendTriggerable(t,t.NodeType.LEGEND_ITEM)){return}this.highlightLegendItem(e,t);var i=a.getContext(e.data.currentTarget).ctx;var o=this.getTargetsFromCtx(i,e,t);t.setStatus("hoveringLegend",true);t.fireEvent("processHighlight",{targets:o})},highlightLegendItem:function(e,t){var i=d3.select(e.data.currentTarget);i.select("rect").attr("fill",e.data.byKeyboard?"transparent":t.getProperties().get("legend.hoverShadow.color")).classed(c.HOVER_SHADOW,true);if(!e.data.byKeyboard){r.resetLegendSelectionEffect(t)}},syncSelectedLegendItems:function(e,t){r.updateCorrespondingSelectedLegendItems(t)},nonHover:function(e,t){t.fireEvent("processUnhighlight");t.setStatus("hoveringLegend",false)},cleanLegendHoverEffect:function(e,t){var i=t.getNodes(t.NodeType.LEGEND_ITEM);i.selectAll("rect").attr("fill","transparent").classed(c.HOVER_SHADOW,false).classed(c.FOCUS_SHADOW,false);r.resetLegendSelectionEffect(t);t.getNodes(t.NodeType.LEGEND_GROUP).select(".v-m-highlight").remove()},click:function(e,t){if(!r.isLegendTriggerable(t,t.NodeType.LEGEND_ITEM)){return}r.cleanRangeSelection(t);var i=a.getContext(e.data.currentTarget).ctx;var o=this.getTargetsFromCtx(i,e,t);t.fireEvent("processSelection",{ctx:{series:i},targets:o,deselectable:true,ctrlKeyPressed:e.data.ctrlKey});var s=l.parent(e.data.target,".v-legend-item")||e.data.target;var u=n.getTooltipData(e,t,o,s);t.fireEvent("processMultipleSelectionTooltip",u)},_getTargets:function(e,t,i){return r.getDataPointIds(e,i)},mouseDown:function(e,t){if(!r.isLegendTriggerable(t,t.NodeType.LEGEND_ITEM)){return}t.getNodes(t.NodeType.LEGEND_ITEM).selectAll("rect").attr("fill","transparent").classed(c.HOVER_SHADOW,false);r.resetLegendSelectionEffect(t);d3.select(e.data.currentTarget).select("rect").attr("fill",t.getProperties().get("legend.mouseDownShadow.color")).classed(c.FOCUS_SHADOW,true)},mouseUp:function(e,t){if(!r.isLegendTriggerable(t,t.NodeType.LEGEND_ITEM)){return}var a=t.getNodes(t.NodeType.LEGEND_ITEM);a.selectAll("rect").classed(c.FOCUS_SHADOW,false);if(i.isMobile()){a.selectAll("rect").attr("fill","transparent").classed(c.HOVER_SHADOW,false)}else{this.highlightLegendItem(e,t)}r.resetLegendSelectionEffect(t)},mouseWheel:function(e,t){if(t.getProperties().get("legend.isScrollable")){s.onLegendScrollWheelHandler(e,t)}}};return p});define("sap/viz/chart/behavior/config/LegendBehaviorConfig",["sap/viz/chart/behavior/config/handler/LegendBehaviorHandler","sap/viz/framework/common/util/Constants"],function(e,t){var i="v-legend-item";var a="v-legend-bullet";return[{id:"legendBehaviorDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"standAloneInitialized",method:"standAloneInitialized"},{name:"dragstart",targets:[i,a],method:"dragStart"},{name:"dragmove",targets:[i,a],method:"dragMove"},{name:"dragend",targets:[i,a],method:"dragEnd"},{name:"hover",targets:i,method:"hover"},{name:"highlightLegendItem",excludeTargets:i,method:"highlightLegendItem"},{name:"syncSelectedLegendItems",excludeTargets:i,method:"syncSelectedLegendItems"},{name:"hover",excludeTargets:[i,t.CSS.CLASS.DATAPOINT,t.CSS.CLASS.DATALABEL,t.CSS.CLASS.AXIS.LABEL_SELECTION,t.CSS.CLASS.AXIS.LABEL_SELECTION_TIMEAXIS,t.CSS.CLASS.AXIS.LABEL_SELECTION_TIMEAXIS_UPPERLEVEL],method:"nonHover"},{name:"cleanLegendHoverEffect",method:"cleanLegendHoverEffect"},{name:"click",targets:i,method:"click"},{name:"down",targets:i,method:"mouseDown"},{name:"up",targets:i,method:"mouseUp"},{name:"wheelmove",targets:["v-content"],method:"mouseWheel"}]}]});define("sap/viz/chart/behavior/config/LassoDecoration",["sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/interaction/Constants"],function(e,t,i){var a="lasso";var r="range";var o="rgba(102,151,231, 0.25)";var n="rgba(102,151,231, 0.5)";var l="rgb(102,151,231)";var s=1;var u="3px";var c="0px";var h=i.RANGE_SELECTION.OFFSET;var p=function(e,t){this._actionLayer=e;this._startPoint=null;this._shapeModel=null;this._service=t;this._shapeLine={points:[],width:c,color:l,pointerEvent:"none"}};p.prototype.start=function(e,t,i,n){var c;this._startPoint=d(e,t);var p;var f;if(n==="range"){this._mode=r}else{this._mode=a}var v=this._service;var g=this._shapeModel;p=this._actionLayer.createLayer(this._mode);var m=this._shapeLine;if(this._mode===r){var y=false;v.fireEvent("hideDetail",{mode:"actionMode"});if(g&&v.getStatus("rangeSelection")){if(g.x-h<=this._startPoint.x&&this._startPoint.x<=g.x+g.width+h){y=true;var _=Math.abs(this._startPoint.x-g.x);var A=Math.abs(g.x+g.width-this._startPoint.x);if(_<=A&&_<=h){this._direction="right";f=g.x}else if(A<=h){this._direction="left";f=g.x+g.width}else{this._direction="drag"}}if(f){m.points=[[f,g.y],[f,g.y+g.height]];m.width=u;p.addPolyLine(m)}}if(!y){v.setStatus("rangeSelection",true);this._direction=null;this._actionLayer.clear(this._mode);g=this._shapeModel={x:this._startPoint.x,y:i.y-e.y-s,width:0,height:i.height+s*2,fill:o,strokeWidth:s+"px",stroke:l};f=g.x;m.points=[[f,g.y],[f,g.y+g.height]];m.width=u;p.addPolyLine(m);c={};c.x=i.x-e.x;c.y=i.y-e.y;c.width=i.width;c.height=i.height;p.addRect(this._shapeModel);this._actionLayer.drawLayer(p,c)}}else{this._actionLayer.clear(this._mode);p=this._actionLayer.createLayer(this._mode);this._shapeModel={x:this._startPoint.x,y:this._startPoint.y,width:0,height:0,pointerEvent:"none",fill:"rgba(64,176,240, 0.4)",strokeWidth:"2px",stroke:"rgb(64, 176, 240)"};p.addRect(this._shapeModel);this._direction=null;this._actionLayer.drawLayer(p)}};function d(e,t){var i=t.x-(e.x||e.left);var a=t.y-(e.y||e.top);return{x:i,y:a}}p.prototype.moveTo=function(e,t,i,o){var l=this._service;if(this._startPoint&&this._shapeModel){var s=this._startPoint;var c=this._shapeModel;var h;if(this._mode===r){h=d(e,i)}var p=d(e,t);var f={x:t.x,y:t.y};var v;if(this._direction){if(this._direction==="right"){if(p.x<=h.x){c.width=c.width-h.x+c.x;c.x=h.x;f.x=i.x}else if(p.x<c.x+c.width){c.width=c.width-p.x+c.x;c.x=p.x}else{c.x=c.x+c.width-2;c.width=2}v=c.x}else if(this._direction==="left"){if(p.x>=h.x+i.width){c.width=h.x+i.width-c.x;f.x=i.x+i.width}else if(p.x>c.x){c.width=p.x-c.x}else{c.width=2}v=c.x+c.width}else if(this._direction==="drag"){this._startPoint=p;var g=p.x-s.x;if(c.x<=h.x&&c.x+c.width>=h.x+i.width||c.x<=h.x&&g<0||c.x+c.width>=h.x+i.width&&g>0){return}if(c.x<h.x){if(c.x+c.width+g<=h.x+i.width){c.x=c.x+g}else{c.x=h.x+i.width-c.width}}else if(c.x+c.width>=h.x+i.width){if(c.x+g>=h.x){c.x=c.x+g}else{c.x=h.x}}else{if(c.x+g<h.x){c.x=h.x}else if(c.x+c.width+g>h.x+i.width){c.x=h.x+i.width-c.width}else{c.x=c.x+g}}c.fill=n}}else{v=p.x;var m=Math.min(p.x,s.x);var y=Math.min(p.y,s.y);var _=Math.abs(p.x-s.x);var A=Math.abs(p.y-s.y);c.x=m;c.width=_;if(this._mode===a){c.y=y;c.height=A}else{if(m<h.x){c.x=h.x;c.width-=h.x-m}if(c.x+c.width>h.x+i.width){c.width=h.x+i.width-c.x}if(f.x<i.x){f.x=i.x}if(f.x>i.x+i.width){f.x=i.x+i.width}if(v<c.x){v=c.x}if(v>c.x+c.width){v=c.x+c.width}}}var b=this._actionLayer.createLayer(this._mode);b.addRect(c);if(v&&this._mode===r){this._shapeLine.points=[[v,c.y],[v,c.y+c.height]];this._shapeLine.width=u;b.addPolyLine(this._shapeLine)}this._actionLayer.drawLayer(b);if(this._mode===r){l.fireEvent("timeRangeChanged",{mode:"actionMode",point:f,target:o.data.target,bTimeRange:true})}}};p.prototype.end=function(){if(this._mode===a){this._actionLayer.clear(a)}else{var e=this._actionLayer.createLayer(this._mode);this._shapeModel.fill=o;e.addRect(this._shapeModel);this._shapeLine.points=[];this._shapeLine.width=c;e.addPolyLine(this._shapeLine);this._actionLayer.drawLayer(e)}};p.prototype.rangeRecover=function(e){var i=this._service;this._actionLayer.clear();var a=i.getStatus("rangeDomain");if(!a){return}var n=a[0];var u=a[1];var c=i.getDataModel();if(c&&c._rawData&&t.isFiscal(c._rawData)){n=t.fiscalToQuantity(n,i.getProperties());u=t.fiscalToQuantity(u,i.getProperties())}var h=i.getModule("main.plot");var p=i.getModule("main.timeAxis.axisBody");var f=p.getScale();var v=f.getRange();var g=v[1]-v[0];var m=i.getBBox(i.BoxType.PLOT_BOUND_NODE);var y=i.getBBox(i.BoxType.ROOT_NODE);if(!m||!y){return}var _=d(y,m);var A=h.getRealSize();var b=h.getOffset();var x=i.getTransformScaleRatio();var S=f.scale(n)/g*A.width+b.x;S*=x.x;var D=(f.scale(u)-f.scale(n))/g;var w=D*A.width*x.x;this._shapeModel={x:S+_.x,y:_.y-s,width:w,height:m.height+s*2,fill:o,strokeWidth:s+"px",stroke:l};this._mode=r;var C=this._actionLayer.createLayer(this._mode);C.addRect(this._shapeModel);i.setStatus("rangeSelection",true);this._actionLayer.drawLayer(C,{x:_.x,y:_.y,width:m.width,height:m.height})};p.prototype.changeRangeEffect=function(e){var t=e.data.direction;if(t==="up"){this._shapeModel.fill=o}else{this._shapeModel.fill=n}var i=this._actionLayer.createLayer(this._mode);i.addRect(this._shapeModel);this._actionLayer.drawLayer(i)};p.prototype.getBoundingClientRect=function(){return this._actionLayer.getBoundingClientRect(this._shapeModel)};p.prototype.getShapeModel=function(){return this._shapeModel};p.prototype.destroy=function(){this._actionLayer=null;this._shapeModel=null;this._startPoint=null;this._mode=null;this._shapeLine=null};return p});define("sap/viz/chart/components/util/BoundingBoxUtils",[],function e(){var t={};t.intersects=function(e,t){return e.left<=t.left+t.width&&t.left<=e.left+e.width&&e.top<=t.top+t.height&&t.top<=e.top+e.height};t.intersection=function(e,i){if(t.intersects(e,i)){var a=Math.max(e.left,i.left),r=Math.min(e.left+e.width,i.left+i.width),o=Math.max(e.top,i.top),n=Math.min(e.top+e.height,i.top+i.height);return{x:a,y:o,left:a,top:o,width:r-a,height:n-o}}return null};t.contains=function(e,t){return t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height};return t});define("sap/viz/chart/behavior/config/handler/LassoBehaviorHandler",["sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/chart/behavior/config/LassoDecoration","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/BoundingBoxUtils","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/behavior/config/SelectionUtil"],function(e,t,i,a,r,o,n,l,s,u){var c=t.isMobile;function h(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width,height:e.height}}function p(e){if(c()){return e.data.point}var t=e.data.originalEvent||window.event;return{x:t.pageX,y:t.pageY}}function d(){}d.prototype={standAloneInitialized:function(e,t){t.getProperties().origin.add({interaction:{selectability:{plotLassoSelection:true}}})},initialized:function(e,t){this._lassoDecoration=new i(t._getActionLayer(),t);t.setStatus("lassoStartPoint",null);t.setStatus("lassoEndPoint",null);t.setStatus("lassoCoveredDataPoints",[])},unloadClear:function(e,t){if(this._lassoDecoration){this._lassoDecoration.destroy();this._lassoDecoration=null;delete this._lassoDecoration}t.removeStatus("lassoStartPoint");t.removeStatus("lassoEndPoint");t.removeStatus("lassoCoveredDataPoints");t.removeStatus("rangeDomain");t.removeStatus("rangeSelection")},lassoStart:function(t,i){var a=this._lassoDecoration;if(!a){return}var o=i.getProperties().get("interaction.selectability");if(!o){return}var n=i.getProperties().get("interaction.selectability.plotLassoMode");var l=o.mode?o.mode.toUpperCase():o.mode;if(!o.plotLassoSelection||l===e.SELECTION_MODE.NONE||l===e.SELECTION_MODE.SINGLE){return}var s=t.data.point;var u=i.getBBox(n==="range"?i.BoxType.PLOT_BOUND_NODE:i.BoxType.ROOT_NODE);var c=i.getBBox(i.BoxType.ROOT_NODE);if(!r.contains(u,s)){return}i.setStatus("lassoStartPoint",p(t));a.start(c,s,u,n);i.fireEvent("hideDetail",{mode:"infoMode",action:"interrupt"}).fireEvent("hideDetail",{mode:"actionMode",action:"interrupt"}).fireEvent("cleanLegendHoverEffect").fireEvent("cleanAxisHoverEffect").fireExternalEvent("lassoStart")},lassoMove:function(e,t){this._drawLassoRect(e,t)},_getStartEnd:function(e,t){return t},_postProcessTargets:function(e,t){if(e._getChartType()&&e._getChartType().indexOf("bullet")>-1){t=s.unique(t)}return t},lassoEnd:function(e,t){if(this._validLasso(t)){var i=t.getProperties().get("interaction.selectByTimeAxisGroup");var r=this._lassoDecoration;var o=e.data.point;t.setStatus("lassoEndPoint",o);var n=null;var l=t.getNodes(t.NodeType.DATA_POINT);var s=this._lassoDecoration.getBoundingClientRect();var c=t.getModule("main.plot");if(t.getStatus("rangeSelection")&&c&&c.hitTestForRangeSelection){var p=t.getStatus("rangeDomain");var d=this._getStartEnd(t,{start:p[0],end:p[1]});n=c.hitTestForRangeSelection(d)}else if(t.isBigDataMode()&&c&&c.hitTest){var f=h(s,t.getBBox(t.BoxType.PLOT_BOUND_NODE));n=c.hitTest(f).map(function(e){return e.dataId.toString()})}else{n=A.call(this,t)}n=this._postProcessTargets(t,n);if(t.getStatus("rangeSelection")){var v=t.getStatus("selectedDataPoints");t.setStatus("selectedDataPoints",[]);var g=v.filter(function(e){return n.indexOf(e)<0});if(g&&g.length>0){t.fireEvent("deselectDataPoint",{targets:a.getNodes(g,t),isAnyOtherSelected:n.length>0});t.fireEvent("dispatchDataEvent",{targets:g,isSelected:false});if(n.length===0){t.fireEvent("clearPlot",{isGray:false,rangeSelection:"clear"})}}if(n.length===0){t.fireEvent("dispatchDataEvent",{targets:[],isSelected:true})}}r.end();if(!t.getStatus("rangeSelection")||n.length>0){this._fireEvent(e,t,n,o,true)}else if(t.getStatus("rangeSelection")&&n.length===0){t.fireEvent("showDetail",{mode:"actionMode",point:o,bLassoEnd:true})}t.fireExternalEvent("lassoEnd")}t.setStatus("lassoStartPoint",null);u.processTimeCursor(e,t)},lassoEndForArea:function(e,t){if(this._validLasso(t)){var i=this._lassoDecoration;var a=t.getStatus("lassoStartPoint");var r=p(e);t.setStatus("lassoEndPoint",r);var o=null;o=y.call(this,t,a,r);i.end();this._fireEvent(e,t,o,e.data.point,true);t.setStatus("lassoStartPoint",null);t.fireExternalEvent("lassoEnd")}},lassoEndForComboEx:function(e,t){if(this._validLasso(t)){var i=t.getStatus("lassoStartPoint"),a=p(e);t.setStatus("lassoEndPoint",a);var r=A.call(this,t);var o=Array.prototype.slice.call(t.getNodes(t.NodeType.DATA_POINT,false)),n=t.getStatusManager().get("plotArea.series").map(function(e,t){return e.type==="area"}),s=[].filter.call(o,function(e){return n[l.getData(e).seriesIndex]});var u=y.call(this,t,i,a,s);r=r.concat(u.filter(function(e){return r.indexOf(e)===-1}));this._lassoDecoration.end();this._fireEvent(e,t,r,e.data.point,true);t.setStatus("lassoStartPoint",null);t.fireExternalEvent("lassoEnd")}},_validLasso:function(t){var i=this._lassoDecoration;if(!i){return false}var a=t.getProperties().get("interaction.selectability");if(!a){return false}var r=a.mode?a.mode.toUpperCase():a.mode;if(!a.plotLassoSelection||r===e.SELECTION_MODE.NONE||r===e.SELECTION_MODE.SINGLE||!t.getStatus("lassoStartPoint")){return false}return true},_fireEvent:function(e,t,i,r,n){t.fireEvent("processSelection",{targets:i,deselectable:false,ctrlKeyPressed:e.data.ctrlKey});var l=t.getStatus("selectedDataPoints");if(l.length&&i.length){var s=e.data.target;while(s){if(s.getAttribute){if(o.hasClass(s,"v-datalabel")){s=a.getDataPointByDataLabel(s,t);if(!c()){t.setStatus("hoveringDataPoint",s)}break}if(o.hasClass(s,"v-datapoint")){if(!c()){t.setStatus("hoveringDataPoint",s)}break}s=s.parentNode}else{s=undefined}}if(!s){s=this._getShowDetailTarget(l,t)}if(n){this._fireShowDetail(t,s,r)}}else{this._fireHideDetail(t)}},_fireShowDetail:function(e,t,i){e.fireEvent("showDetail",{target:t,mode:"actionMode",point:i,bLassoEnd:true,action:"select"})},_fireHideDetail:function(e){e.fireEvent("hideDetail",{mode:"actionMode"})},_drawLassoRect:function(t,i){var a=this._lassoDecoration;if(!a){return}var r=i.getProperties().get("interaction.selectability");if(!r){return}var o=r.mode?r.mode.toUpperCase():r.mode;if(!r.plotLassoSelection||o===e.SELECTION_MODE.NONE||o===e.SELECTION_MODE.SINGLE||!i.getStatus("lassoStartPoint")){return}t.data.originalEvent.preventDefault();a.moveTo(i.getBBox(i.BoxType.ROOT_NODE),t.data.point,i.getBBox(i.BoxType.PLOT_BOUND_NODE),t)},_getBoundSelection:function(e){return e.getNodes(e.NodeType.PLOT_BOUND_SELECTION,false)},_isCovered:function(e,t){var i=e.getBoundingClientRect();for(var a=-1;++a<t.length;){if(r.intersects(i,t[a])){return true}}return false},_getShowDetailTarget:function(e,t){var i=t.getProperties().get("interaction.selectByTimeAxisGroup");var r=[];if(i){r=u.getSelectedPeriods(t,e)}if(e.length===1||i&&r.length===1){var o=t.getNodes(t.NodeType.DATA_POINT_GROUP,false)[0];return a.findByDataPointId(o,e[0])}},_getTargets:function(e,t){var i=t.getNodes(t.NodeType.DATA_POINT,false);return[].slice.call(i).filter(function(t){return this._isCovered(t,e)},this).map(function(e){var t=l.getData(e);return a.getDataPointId(e)})}};function f(e,t){return e.x*t.y-e.y*t.x}function v(e,t){var i=e.point1.x;var a=e.point1.y;var r=e.point2.x;var o=e.point2.y;var n=t.point1.x;var l=t.point1.y;var s=t.point2.x;var u=t.point2.y;var c={x:i-n,y:a-l};var h={x:r-n,y:o-l};var p={x:s-n,y:u-l};var d=f(c,p)*f(h,p);c={x:n-i,y:l-a};h={x:s-i,y:u-a};p={x:r-i,y:o-a};return d<=0&&f(c,p)*f(h,p)<=0?true:false}d._isContains=function(e,t){var i,a;var r=false;for(i=0,a=t.length-1;i<t.length;a=i++){if(t[i].y>e.y!=t[a].y>e.y&&e.x<(t[a].x-t[i].x)*(e.y-t[i].y)/(t[a].y-t[i].y)+t[i].x){r=!r}}return r};function g(e,t){var i=[];e.forEach(function(e){i.push({x:e.x+t.x,y:e.y+t.y})});return i}d._isIntersect=function(e,t){var i,a,r,o;for(i=1;i<e.length;i++){for(a=1;a<t.length;a++){r={point1:e[i-1],point2:e[i]};o={point1:t[a-1],point2:t[a]};if(v(r,o)){return true}}}return false};function m(e,t){var i=[];i.push({x:e.x,y:e.y});i.push({x:t.x,y:e.y});i.push({x:t.x,y:t.y});i.push({x:e.x,y:t.y});i.push({x:e.x,y:e.y});return i}function y(e,t,i,r){var o=_.call(this,e);var n=r||e.getNodes(e.NodeType.DATA_POINT,false);var s=m(t,i);var u=e.getNodes(e.NodeType.PLOT_BOUND_SELECTION,false)[0].getBoundingClientRect(),c={x:u.left+window.pageXOffset,y:u.top+window.pageYOffset};return[].slice.call(n).filter(function(e){var i=this._isCovered(e,o);if(i){return true}else{var a=l.getGraphicInfo(e);var r=g(a.areaPath,c);if(d._isIntersect(r,s)||d._isContains(t,r)){return true}}return false},this).map(function(e){return a.getDataPointId(e)})}function _(e){var t=this._lassoDecoration.getBoundingClientRect();var i=[];var a=this._getBoundSelection(e);if(!(a instanceof window.NodeList)&&!n.isArray(a)){a=[a]}a.forEach(function(e){var a=r.intersection(t,e.getBoundingClientRect());if(a){i.push(a)}});return i}function A(e){var t=_.call(this,e);return this._getTargets(t,e)}return d});define("sap/viz/chart/behavior/config/LassoBehaviorConfig",["sap/viz/chart/behavior/config/handler/LassoBehaviorHandler"],function(e){var t="v-m-root";var i=["info/timeseries_line","info/timeseries_column","info/timeseries_scatter","info/timeseries_bubble","info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_column","info/timeseries_stacked_combination","info/timeseries_100_stacked_column","info/timeseries_bullet","info/timeseries_waterfall"];return[{id:"lassoBehaviorDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"standAloneInitialized",method:"standAloneInitialized"},{name:"afterBehaviorLoaded",method:"initialized"},{name:"beforeBehaviorUnloaded",method:"unloadClear"},{name:"lassostart",targets:t,excludeTargets:"v-m-scrollbarThumb",method:"lassoStart"},{name:"lassomove",targets:t,method:"lassoMove"},{name:"lassoend",targets:t,method:"lassoEnd"},{name:"lassoend",targets:t,supportedChartTypes:["info/area","info/horizontal_area","info/100_area","info/100_horizontal_area","info/trellis_area","info/trellis_horizontal_area","info/trellis_100_area","info/trellis_100_horizontal_area"],method:"lassoEndForArea"},{name:"lassoend",targets:t,supportedChartTypes:["info/combinationEx"],method:"lassoEndForComboEx"}]}]});define("sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/chart/components/util/SeriesUtil","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/ContextualDataUtil"],function(e,t,i,a,r,o,n,l,s,u,c,h){var p=t.BEHAVIOR;var d=e.CSS.CLASS;var f=e.LINE_TYPE;var v="datapoint";var g="dataline";var m=2;var y=d.LIGHT_LINE;var _="data-from";var A="data-to";var b=r.getColors;function x(e,t){return e&&e.getDataPointShape&&e.getDataPointShape(t)}function S(t,i,r,o,c){var h=u.getData(i);var p=h[r?"next":"prev"];if(!p){return}var v=i.parentNode;var g=a.findByDataPointId(v,p);var m=a.getDataPointId(i);var b=r?[m,p]:[p,m];var x=v.querySelector("."+y+"["+_+"='"+b[0]+"']"+"["+A+"='"+b[1]+"']");if(o&&g&&a.isHighlighted(g)){var S=v.querySelector("."+d.LINES_GROUP);var D=u.getData(S);var w=t.isHorizontal();var C=[u.getData(g).translate.slice(),h.translate.slice()];if(r){C.reverse()}C[0].id=b[0];C[1].id=b[1];var T=t.getSemanticManager();var L=D.color;var P=null;var k;var E=t.getDataModel();var I=z.getPlot(t,i);var O=null;if(I.getDefaultLineRenderer){O=I.getDefaultLineRenderer()?I.getDefaultLineRenderer().expose:null}var R=n.parseSeriesLineType(I.getData(),h.seriesIndex,T);if(T.hasDataPointLineStyle()){var N=t.getEffectManager();var M=[a.getContextByDataModel(i,E),a.getContextByDataModel(g,E)];var B=[a.getAdditionCtxByDataModel(i,E),a.getAdditionCtxByDataModel(g,E)];L=N.register({fillColor:n.parseSemanticLineColor(M,T,L,B)});var V=n.parseSemanticLineType(M,T,null,B);if(V===f.DASHED||V===f.DOTTED||V===f.DOT){R=V}}var F={graphic:{color:L,width:D.width},points:C,isHorizontal:w,ctx:u.getContext(i)};if(R===e.LINE_TYPE.DASHED||R===e.LINE_TYPE.DOTTED){P=e.LINE_DASH_TYPE_ARRAY}else if(R===e.LINE_TYPE.DOT){P="0,"+D.width*2;F.graphic.linecap="round"}if(P){F.graphic.dash=P}var H;if(c){H=c(F,O)||O.renderer(F)}if(H){if(x){s.empty(x)}else{x=l.create("g");x.setAttribute("class",y);x.setAttribute("fill-opacity","1");x.setAttribute("stroke-opacity","1")}x.setAttribute(_,b[0]);x.setAttribute(A,b[1]);x.appendChild(H);v.insertBefore(x,S.nextElementSibling)}}else{if(x){v.removeChild(x)}}}function D(e,i,r){var o=i.getProperties().get("interaction.selectByTimeAxisGroup");var n=w(i);if(!n){return false}var l=n.mode?n.mode.toUpperCase():n.mode;if(!n.plotStdSelection||l===t.SELECTION_MODE.NONE||!r){return}var s=i.getStatus("selectedDataPoints");if(i.getStatus("rangeSelection")){i.setStatus("selectedDataPoints",[]);i.fireEvent("clearPlot").fireEvent("deselectDataPoint",{targets:a.getNodes(s,i),isAnyOtherSelected:false});i.setStatus("rangeSelection",false)}var u=e.data;var c;if(o){var p=h.getDataPointsByTimeField(r,i);var d=p.length,f=this;c=[];p.forEach(function(e){c.push(f._getDataPoint(e,i))})}else{c=this._getDataPoint(r,i)}var v=this._hasDataPoint(i.getStatus("selectedDataPoints"),this._getDataPoint(r,i));i.fireEvent("processSelection",{targets:c,deselectable:true,ctrlKeyPressed:u.ctrlKey});if(this._hasDataPoint(i.getStatus("selectedDataPoints"),this._getDataPoint(r,i))){i.fireEvent("showDetail",{target:r,mode:"actionMode",point:u.point,action:"select"})}else{i.fireEvent("hideDetail",{target:r,mode:"actionMode",action:"deselect"}).setStatus("isHoveringDeselectedDataPoint",v)}}function w(e){return e.getProperties().get("interaction.selectability")}function C(e,t,i){var a=e.getSize();var r=i.getMaskManager();var o={x:t.e,y:t.f,width:a.width,height:a.height};r.addRect(o)}function T(e,t,i){if(!i){return}var r=e.data.point;if(t.getStatus("rangeSelection")){return}var o=t.getStatus("hoveringDataPoint");var n=this._getDataPoint(i,t);var l=this._hasDataPoint(t.getStatus("selectedDataPoints"),n);if(o){if(o===i){if(!t.getStatus("isHoveringDeselectedDataPoint")){t.fireEvent("showDetail",{target:i,mode:l?"actionMode":"infoMode",point:r,action:"hover"})}return}t.fireEvent("unhoverOnDataPoint",{targets:o,byKeyboard:e.data.byKeyboard})}if(o!==i){t.setStatus("isHoveringDeselectedDataPoint",false)}o=i;t.setStatus("hoveringLegend",false);t.fireEvent("hoverOnDataPoint",{targets:o,byKeyboard:e.data.byKeyboard}).fireEvent("showDetail",{target:i,mode:l?"actionMode":"infoMode",point:r,action:"hover"}).setStatus("hoveringDataPoint",o).setStatus("hoveredDataPointId",a.getDataPointId(o))}function z(){}var L=z.prototype;L.standAloneInitialized=function(e,t){t.getProperties().origin.add({interaction:{selectability:{plotStdSelection:true}}})};L.initialize=function(e,t){t.setStatus("hoveringDataPoint",null);t.setStatus("isHoveringDeselectedDataPoint",false)};L.clickOnDataPoint=function(e,t){D.call(this,e,t,e.data.currentTarget)};L.hoverOnDataPoint=function(e,t){T.call(this,e,t,e.data.currentTarget)};L.clickOnDataLabel=function(e,t){D.call(this,e,t,a.getDataPointByDataLabel(e.data.currentTarget,t))};L.hoverOnDataLabel=function(e,t){T.call(this,e,t,a.getDataPointByDataLabel(e.data.currentTarget,t))};L.isHoveringDataPointHighlighted=function(e){var t=e.getStatus("highlightedDataPoints");var i=e.getStatus("hoveringDataPoint");var r=false;var o;if(i){o=a.getDataPointId(i);if(t&&t.length>0&&t.indexOf(o)>=0){r=true}}return r};L.hoverOnNonDataPoint=function(e,t){t.setStatus("isHoveringDeselectedDataPoint",false);var i=t.getStatus("hoveringDataPoint");if(i&&!this.isHoveringDataPointHighlighted(t)){t.fireEvent("unhoverOnDataPoint",{targets:i})}t.setStatus("hoveringDataPoint",null);t.fireEvent("hideDetail",{mode:"infoMode",target:"nonDataPoint",action:"interrupt"})};L.hoverOnTimeArea=function(e,t){o.processTimeCursor(e,t)};L.selectDataPoint=function(e,t){var i=r.turnToArray(e.data.targets);i.forEach(function(e){var t=d3.select(e);t.classed(d.DATAPOINTDEFAULT,false);t.classed(d.DATAPOINTSELECTED,true)})};L.deselectDataPoint=function(e,t){var i=r.turnToArray(e.data.targets);i.forEach(function(e){var t=d3.select(e);t.classed(d.DATAPOINTSELECTED,false);if(!t.classed(d.DATAPOINTHOVER)){t.classed(d.DATAPOINTDEFAULT,true)}})};L.hoverEffectOnDataPoint=function(e,t){var i=r.turnToArray(e.data.targets);i.forEach(function(e){var t=d3.select(e);t.classed(d.DATAPOINTDEFAULT,false);t.classed(d.DATAPOINTHOVER,true)})};L.unhoverOnDataPoint=function(e,t){t.setStatus("hoveringDataPoint",null);var i=r.turnToArray(e.data.targets);i.forEach(function(e){var t=d3.select(e);t.classed(d.DATAPOINTHOVER,false);if(!t.classed(d.DATAPOINTSELECTED)){t.classed(d.DATAPOINTDEFAULT,true)}})};function P(t,i,a,r,o){var l,s,u,c,h,p,d,v,g,m,y;var _=null;var A=null;var b=r.getSemanticManager();var x=[];var S={points:[]};var D=0,w=t.length;if(b.hasDataPointLineStyle()){var C=r.getEffectManager();b.beginSession();for(;D<w;D++){s=t[D];if(A!==s.seqId-1||_!==s.seriesIndex){if(S.points.length>=2){l=o.getSeriesStyle(_);S.width=l.lineWidth;S.color=c;S.type=p;x.push(S)}m=null;S={points:[]}}v=[s.rawData.dp.context()];y=[s.rawData.dp.additionCtx()];d=t[D+1];g=s.data.translate.slice();g.id=s.dataId;if(m==null){S.points.push(g)}m=null;if(d&&s.seqId===d.seqId-1&&s.seriesIndex===d.seriesIndex){v.push(d.rawData.dp.context());y.push(d.rawData.dp.additionCtx());m=d.data.translate.slice();m.id=d.dataId}l=o.getSeriesStyle(s.seriesIndex);u=C.register({fillColor:n.parseSemanticLineColor(v,b,l.color,y)});h=n.parseSemanticLineType(v,b,null,y);if(S.points.length>=2&&(c!==u||p!==h)){l=o.getSeriesStyle(_);S.width=l.lineWidth;S.color=c;S.type=p;x.push(S);m=null;S={points:[g]}}else if(m){S.points.push(m)}c=u;p=h;_=s.seriesIndex;A=s.seqId}if(S.points.length>=2){l=o.getSeriesStyle(_);S.width=l.lineWidth;S.color=c;S.type=p;x.push(S)}b.endSession()}else{for(;D<w;D++){s=t[D];if(S.points.length>0&&(A!==s.seqId-1||_!==s.seriesIndex)){l=o.getSeriesStyle(_);S.width=l.lineWidth;S.color=l.color;S.type=l.lineType;x.push(S);S={points:[]}}g=s.data.translate.slice();g.id=s.dataId;S.points.push(g);_=s.seriesIndex;A=s.seqId}if(S.points.length>0){l=o.getSeriesStyle(_);S.width=l.lineWidth;S.color=l.color;S.type=l.lineType;x.push(S)}}var T=r.isHorizontal();var L=z.getLineRenderer(r);var P=null;if(o.getDefaultLineRenderer){P=o.getDefaultLineRenderer().expose}x.forEach(function(t){if(t.type===f.DASHED||t.type===f.DOTTED){t.strokeDashArray=e.LINE_DASH_TYPE_ARRAY}else if(t.type===f.DOT){t.strokeDashArray="0,"+t.width*2;t.linecap="round"}delete t.type;t.isHorizontal=T;t.offset=a;t.renderer=L;t.defaultLineRenderer=P;i.addPolyLine(t)})}function k(e,t,i,a,o){var l=a.getProperties();var s,u,c,h;var p=null;var d=l.get("interaction.selected.color");var f=a.isHorizontal();var v=a.getSemanticManager();var g=[];var m={points:[]};var y=0,_=e.length;if(v.hasDataPointColorStyle()){var A=a.getEffectManager();v.beginSession();for(;y<_;y++){s=e[y];u=r.getColors(a,null,d,null,null,null,{color:n.parseSemanticColor(s,v)});h=u.customizedColor||u.defaultColor;if(m.points.length!==0&&(p!==s.seriesIndex||c!==h)){m.color=c;g.push(m);m={points:[]}}n.addRectSeriesPathPoints(m.points,s,!!s.negative,f);p=s.seriesIndex;c=h}v.endSession()}else{for(;y<_;y++){s=e[y];if(m.points.length!==0&&p!==s.seriesIndex){m.color=c;g.push(m);m={points:[]};c=null}n.addRectSeriesPathPoints(m.points,s,!!s.negative,f);if(!c){u=r.getColors(a,null,d,null,null,null,{color:s.graphic.fill});c=u.customizedColor||u.defaultColor}p=s.seriesIndex}}if(m.points.length>0){m.color=c;g.push(m)}g.forEach(function(e){e.isHorizontal=f;e.offset=i;e.width=1;e.pointerEvent="none";t.addPolyLine(e)})}function E(e,t){if(!t.getStatus("rangeSelection")){return}var i=t.getBBox(t.BoxType.RANGE_SELECTION);var a=e.data.point;if(!(a.x>=i.left&&a.x<=i.right&&a.y>=i.top&&a.y<=i.bottom)){return}t.fireEvent("showDetail",{mode:"actionMode",point:e.data.point,bLassoEnd:true})}function I(e,t){if(t.getStatus("rangeSelection")){var i=t.getBBox(t.BoxType.RANGE_SELECTION);var a=e.data.point;if(!!i&&!!a&&a.x>=i.x&&a.x<=i.x+i.width&&a.y>=i.y&&a.y<=i.y+i.height){t.fireEvent("showDetail",{mode:"actionMode",point:a,bLassoEnd:true});return true}}return false}z.showDetailForRangeSelectionWhenHover=E;z.showDetailForRangeSelection=I;z.updateRangeEffect=function(e,t){if(!U(e,t)){return}t.fireEvent({name:"changeRangeEffect",data:{direction:"down",target:e.data.target}})};z.recoverRangeEffect=function(e,t){if(!U(e,t)){return}t.fireEvent({name:"changeRangeEffect",data:{direction:"up",target:e.data.target}})};z.renderLightLine=function(e,t,i,a){S(e,t,true,i,a);S(e,t,false,i,a)};z.getLineRenderer=function(e,t){var i=z.getPlot(e,t);return i?i.getLineRenderer():null};z.getPlot=function(e,t){var i;var a;if(t&&u.getData(t)){a=u.getData(t).trellisInfo}if(a){i=e.getModule("main").getChildPlot(a)}else{i=e.getModule("main.plot")}return i};z.selectOnLineOnNormalMode=function(e,t){var i=r.turnToArray(e.data.targets);var o=t.getProperties();t._getDecorationLayer().clear();t.fireEvent(e,true);var n=o.get("interaction.selected");var l=c.isExist(o.get("plotArea.markerRenderer"));var s;i.forEach(function(e){var i=u.getData(e);var o=!i.isZeroValue;a.highlight(e);s=z.getLineRenderer(t,e);z.renderLightLine(t,e,true,s);r.drawStroke(t,e,"path, rect",n.stroke,1,undefined,i);r.drawFill(t,e,"path, rect",n,l,o)})};function O(e,t){var i=R(e,t);if(!i){return}var a=i.elements;var r=i.dlLayer;var n=i.offset;var l=i.plotModule;var s=i.actionLayer;var u=o.getDpInfos(l,a);P(u,r,n,t,l);s.drawLayer(r)}z.selectOnLineDuringBigData=function(e,t){return O(e.data.targets,t)};z.highlightOnLineDuringBigData=function(e,t){var i=t.getStatus("selectedDataPoints");var a=i.concat(e.data.targets);return O(a,t)};z.unhighlightOnLineDuringBigData=function(e,t){var i=t.getStatus("selectedDataPoints");return O(i,t)};z.selectOnBarOnNormalMode=function(e,t){var i=r.turnToArray(e.data.targets);var a=t.getProperties();t._getDecorationLayer().clear();t.fireEvent(e,true);var o=a.get("interaction.selected");var n=c.isExist(a.get("plotArea.markerRenderer"));i.forEach(function(e){var i=u.getData(e);var a="rect";if(i.pattern==="noFill"){a="rect, path"}r.drawStroke(t,e,"rect",o.stroke,1,undefined,i);r.drawFill(t,e,a,o,n)})};z.highlightOnCombDuringBigData=function(e,t){var i=t.getStatus("selectedDataPoints");var a=i.concat(e.data.targets);return N(a,t)};z.unhighlightOnCombDuringBigData=function(e,t){var i=t.getStatus("selectedDataPoints");return N(i,t)};function R(e,t){var i=r.turnToArray(e);var a=t._getDecorationLayer();a.clear(g);var o=t.getModule("main.plot");if(!o){return null}var n=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var l=o.getOffset();l.x+=n.e;l.y+=n.f;var s=a.createLayer(g);C(o,n,s);return{elements:i,dlLayer:s,offset:l,plotModule:o,actionLayer:a}}function N(e,t){var i=R(e,t);if(!i){return}var a=i.elements;var r=i.dlLayer;var n=i.offset;var l=i.plotModule;var s=i.actionLayer;var u=o.getDpInfos(l,a);var c=[];var h=[];var p=t.getDataModel();for(var d=0;d<u.length;d++){var f=u[d];var v=p.getDataPoint(f.dataId);if(v){var g=x(l,v);if(g==="line"){h.push(f)}else if(g==="bar"){c.push(f)}}}k(c,r,n,t,l);P(h,r,n,t,l);s.drawLayer(r)}function M(e,t){var i=R(e,t);if(!i){return}var a=i.elements;var r=i.dlLayer;var n=i.offset;var l=i.plotModule;var s=i.actionLayer;var u=o.getDpInfos(l,a);k(u,r,n,t,l);s.drawLayer(r)}z.selectOnBarDuringBigData=function(e,t){return M(e.data.targets,t)};z.highlightOnBarDuringBigData=function(e,t){var i=t.getStatus("selectedDataPoints");var a=i.concat(e.data.targets);return M(a,t)};z.unhighlightOnBarDuringBigData=function(e,t){var i=t.getStatus("selectedDataPoints");return M(i,t)};z.hoverOnLineDuringBigData=function(e,t,i){if(!t.isBigDataMode()||t.getStatus("rangeSelection")){return}var a=e.data.originalEvent;var n=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var s={left:e.data.pointToChart.x-n.e,top:e.data.pointToChart.y-n.f};var u=t.getModule("main.plot");var c=u.getOffset();s.left-=c.x;s.top-=c.y;var h=t._getDecorationLayer();h.clear(v);var p,d;var f=t.getDataModel();if(!i){var g=u.hitTest(s);if(g.length===0){t.fireEvent("hideTooltipHoverOnPlot",{mode:"infoMode",action:"interrupt"});return}for(var m=0;m<g.length;m++){i=g[m];d=f.getDataPoint(i.dataId);if(d){p=i.data.translate;break}}}else{d=f.getDataPoint(i.dataId);p=i.data.translate}if(d==null){return}c=u.getOffset();c.x+=n.e+p[0];c.y+=n.f+p[1];var y=t.getProperties().get("interaction.hover");var _=t.getSemanticManager();var A=_.analyzeDataPoint("color",d.context(),false,d.additionCtx());if(A&&A.color){i.graphic.fill=A.color}var b={color:i.graphic.fill,shape:i.graphic.shape,r:i.graphic.size};var x=r.getColors(t,null,y.stroke.color,null,i.graphic.drawingEffect,null,b),S=r.getColors(t,null,y.color,null,i.graphic.drawingEffect,null,b);var D=h.createLayer(v,c);var w=y.stroke&&y.stroke.visible===false;D.addPath({d:l.generateMarkerPath({type:i.graphic.shape,rx:i.graphic.size/2,ry:i.graphic.size/2,borderWidth:2}),stroke:w?"none":x.customizedColor?x.customizedColor:x.defaultColor,pointerEvent:"none",fill:S.customizedColor?S.customizedColor:S.defaultColor,opacity:y.opacity?y.opacity:1,strokeWidth:w?"none":y.stroke&&y.stroke.width?y.stroke.width:"2px"});h.drawLayer(D);var C="infoMode";if(o.hasDataPoint(t.getStatus("selectedDataPoints"),d.id)){C="actionMode"}t.fireEvent("showTooltipHoverOnPlot",{target:d.id,mode:C,point:{x:e.data.point.x,y:e.data.point.y-s.top+p[1]},action:"hover"})};var B=z.getGroupTargets=function(e,t){var i=r.turnToArray(e.data.targets),a=[];i.forEach(function(e){if(a.indexOf(e)===-1){var i=h.getDataPointsByTimeField(e,t);a=a.concat(i)}});return a};z.hoverEffectDuringNormalMode=function(e,t){var i=t.getProperties().get("interaction.selectByTimeAxisGroup");if(i){var o=B(e,t);if(o.length>0){e.data.targets=o}}t.fireEvent(e,true);var n=t.getProperties();var l=r.turnToArray(e.data.targets);var s=n.get("interaction.hover");var h=c.isExist(n.get("plotArea.markerRenderer"));var p=t.getModule("main.plot");var d=t.getDataModel();l.forEach(function(i){if(t.isTrellis()){r.drawStroke(t,i,"rect",s.stroke,2);r.drawFill(t,i,"rect, path",s,h)}else{var o=a.getDataPointId(i);var n=d.getDataPoint(o);if(n){var l=x(p,n);if(l==="line"){r.drawStroke(t,i,"path, rect",s.stroke,2);r.drawFill(t,i,"path, rect",s,h,true)}else{if(!e.data.byKeyboard){var c=u.getData(i);r.drawStroke(t,i,"rect",s.stroke,2,undefined,c)}r.drawFill(t,i,"rect, path",s,h)}}}})};z.unhoverEffectDuringNormalMode=function(e,t){var i=t.getProperties().get("interaction.selectByTimeAxisGroup");if(i){var o=B(e,t);if(o.length>0){e.data.targets=o}}t.fireEvent(e,true);var n=c.isArray(e.data.targets)?e.data.targets[0]:e.data.targets;if(c.isExist(n)){var l=n.parentNode;var s=d3.select(l).selectAll("."+d.ZEROVALUEHOVER);s.remove()}var h=r.turnToArray(e.data.targets);var p=t.getProperties();var f;var v=c.isExist(p.get("plotArea.markerRenderer"));var g=t.getModule("main.plot");var m=t.getDataModel();h.forEach(function(e){var i=a.getDataPointId(e);var o=m.getDataPoint(i);var n=x(g,o);var l;var s=1;var c;if(d3.select(e).classed(d.DATAPOINTSELECTED)){f=p.get("interaction.selected");l=true}else{if(t.shouldUseDeselectedColor()){f=p.get("interaction.deselected")}else{f=p.get("plotArea.dataPoint");c=u.getData(e);if(c){s=c.strokeWidth}}l=false}if(n==="line"){r.drawStroke(t,e,"path, rect",f.stroke,s);r.drawFill(t,e,"path, rect",f,v,true);if(!l){W(t,e)}}else{c=u.getData(e);r.drawStroke(t,e,"rect",f.stroke,s,undefined,c);r.drawFill(t,e,"rect, path",f,v)}})};z.hoverOnBarDuringBigData=function(e,t,i){t.setStatus("hoveringOnPlotEvent",null);if(!t.isBigDataMode()||t.getStatus("rangeSelection")){return}var a=e.data.originalEvent;var n=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var l={left:e.data.pointToChart.x-n.e,top:e.data.pointToChart.y-n.f};var s=t.getModule("main.plot");var u=s.getOffset();l.left-=u.x;l.top-=u.y;var c=t._getDecorationLayer();c.clear(v);var h=c.createLayer(v);C(s,n,h);var p,d;var f=t.getDataModel();if(!i){var g=s.hitTest(l);if(g.length===0){t.fireEvent("hideTooltipHoverOnPlot",{mode:"infoMode",action:"interrupt"});return}for(var m=0;m<g.length;m++){i=g[m];d=f.getDataPoint(i.dataId);if(d){p=i.position;break}}}else{d=f.getDataPoint(i.dataId);p=i.position}if(d==null){return}t.setStatus("hoveringOnPlotEvent",e);u=s.getOffset();u.x+=n.e;u.y+=n.f;var y=t.getProperties().get("interaction.hover");var _=t.getSemanticManager();var A=_.analyzeDataPoint("color",d.context(),false,d.additionCtx());if(A&&A.color){i.graphic.fill=A.color}var b={color:i.graphic.fill};var x=r.getColors(t,null,"darken(20%)",null,i.graphic.drawingEffect,null,b);var S=r.getColors(t,null,y.color,null,i.graphic.drawingEffect,null,b);var D=S.defaultColor;var w=x.customizedColor;if(S.customizedColor){D=w=S.customizedColor}h.addRect({x:p.x+u.x,y:p.y+u.y,width:p.width,height:p.height,stroke:w,pointerEvent:"none",fill:D,opacity:!isNaN(+y.opacity)?+y.opacity:1,strokeWidth:"2px"});c.drawLayer(h);var T="infoMode";if(o.hasDataPoint(t.getStatus("selectedDataPoints"),d.id)){T="actionMode"}t.fireEvent("showTooltipHoverOnPlot",{target:d.id,mode:T,point:{x:e.data.point.x,y:e.data.point.y},action:"hover"})};function V(e,t,i,r,n,l){if(e.getStatus("rangeSelection")){var s=e.getStatus("selectedDataPoints");e.setStatus("selectedDataPoints",[]);e.fireEvent("clearPlot").fireEvent("deselectDataPoint",{targets:a.getNodes(s,e),isAnyOtherSelected:false});e.setStatus("rangeSelection",false);e.setStatus("rangeDomain",null)}e.fireEvent("processSelection",{targets:[i.id.toString()],deselectable:true,ctrlKeyPressed:t.data.ctrlKey});if(o.hasDataPoint(e.getStatus("selectedDataPoints"),i.id)){var u;if(n){u=t.data.point.y-r.top+l.data.translate[1]}else{u=t.data.point.y}e.fireEvent("showTooltipClickBigData",{target:i.id,mode:"actionMode",point:{x:t.data.point.x,y:u}})}else{e.fireEvent("hideTooltipClickBigData",{target:i.id,mode:"actionMode"});e._getDecorationLayer().clear(v)}}function F(e,t){e.setStatus("rangeSelection",false);e.setStatus("rangeDomain",null);e.fireEvent(t,true)}z.clickOnCombDuringBigData=function(e,t){if(I(e,t)){return}if(t.isBigDataMode()){var i=e.data.originalEvent;var a=i.target;var o=r.tryToFindNode("v-m-plot",a,t._rootNode);if(o){var n=t.getBBox(t.BoxType.PLOT_NODE);var l=r.getLayerCoord(e.data.point,n);var s=t.getModule("main.plot");var u=s.hitTest(l,true);var c=t.getDataModel();for(var h=0;h<u.length;h++){var p=u[h];var d=c.getDataPoint(p.dataId);if(d){var f=x(s,d);if(f==="line"){V(t,e,d,l,true,p);return}else if(f==="bar"){V(t,e,d,l);return}}}}}if(!t.getProperties().get("interaction.enableDeselectAll")){return}F(t,e)};z.clickOnLineDuringBigData=function(e,t){if(I(e,t)){return}if(t.isBigDataMode()&&t.getProperties().get("interaction.selectability.plotStdSelection")){var i=e.data.originalEvent;var a=i.target;var o=r.tryToFindNode("v-m-plot",a,t._rootNode);if(o){var n=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var l={left:e.data.pointToChart.x-n.e,top:e.data.pointToChart.y-n.f};var s=t.getModule("main.plot");var u=s.getOffset();l.left-=u.x;l.top-=u.y;var c=s.hitTest(l,t.isCombChart());var h=t.getDataModel();for(var p=0;p<c.length;p++){var d=h.getDataPoint(c[p].dataId);if(!d){continue}V(t,e,d,l,true,c[p]);return}}}F(t,e)};z.clickOnBarDuringBigData=function(e,t){if(I(e,t)){return}if(!t.isBigDataMode()||!t.getProperties().get("interaction.selectability.plotStdSelection")){t.setStatus("rangeSelection",false);t.setStatus("rangeDomain",null);t.fireEvent(e,true);return}var i=e.data.originalEvent;var a=i.target;var o=r.tryToFindNode("v-m-plot",a,t._rootNode);if(o){var n=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var l={left:e.data.pointToChart.x-n.e,top:e.data.pointToChart.y-n.f};var s=t.getModule("main.plot");var u=s.getOffset();l.left-=u.x;l.top-=u.y;var c=s.hitTest(l,t.isCombChart());var h=t.getDataModel();for(var p=0;p<c.length;p++){var d=h.getDataPoint(c[p].dataId);if(!d){continue}V(t,e,d,l,false);return}}F(t,e)};z.hoverOnCombDuringBigData=function(e,t){t.setStatus("hoveringOnPlotEvent",null);if(!t.isBigDataMode()||t.getStatus("rangeSelection")){return}var i=e.data.originalEvent;var a=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var r={left:e.data.pointToChart.x-a.e,top:e.data.pointToChart.y-a.f};var o=t.getModule("main.plot");var n=o.getOffset();r.left-=n.x;r.top-=n.y;var l=o.hitTest(r,true);var s=t._getDecorationLayer();if(l.length===0){s.clear(v);t.fireEvent("hideTooltipHoverOnPlot",{mode:"infoMode",action:"interrupt"});return}var u,c;var h=t.getDataModel();for(var p=0;p<l.length;p++){c=l[p];u=h.getDataPoint(c.dataId);if(u){break}}if(u){if(x(o,u)==="bar"){z.hoverOnBarDuringBigData(e,t,c)}else{z.hoverOnLineDuringBigData(e,t,c)}}else{s.clear(v)}};z.selectOnCombinationDuringBigData=function(e,t){var i=r.turnToArray(e.data.targets);var a=t.getProperties();var o=t._getDecorationLayer();o.clear(g);var n=t.getModule("main.plot");if(!n){return}var l=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var s=n.getOffset();s.x+=l.e;s.y+=l.f;var u=o.createLayer(g);C(n,l,u);var c=[];var h=[];for(var p=0;p<i.length;p++){var d=n.mappingDataPointInfo(i[p]);if(d){var f=x(n,d.seriesIndex);if(f==="line"){h.push(d)}else if(f==="bar"){c.push(d)}}}c=c.sort(function(e,t){return e.seqId-t.seqId});h=h.sort(function(e,t){return e.seqId-t.seqId});k(c,u,s,t,n);P(h,u,s,t,n);o.drawLayer(u)};var H=t.RANGE_SELECTION.OFFSET;function U(e,t){var i=e.data.point;var a=t.getBBox(t.BoxType.RANGE_SELECTION);var r=false;if(a&&a.x+H<i.x&&i.x<a.x+a.width-H){r=true}return r}L.clearPlot=function(e,t){var a=t.getNodes(t.NodeType.DATA_POINT_GROUP);function r(){var e=t.getProperties();if(e){var i=e.get("interaction.deselected.opacity");a.each(function(){this.setAttribute("fill-opacity",i);this.setAttribute("stroke-opacity",i)})}}function o(){a.each(function(){this.removeAttribute("fill-opacity");this.removeAttribute("stroke-opacity")})}var n=e.data.isGray;if(i.isIE()&&i.version()<=9){if(n){window.setTimeout(r,0)}else{window.setTimeout(o,0)}}else{if(n){r()}else{o()}}};L._getDataPoint=function(e,t){return a.getDataPointId(e)};L._hasDataPoint=function(e,t){return o.hasDataPoint(e,t)};z.clearForTime=function(e,t){t.fireEvent(e,true);if(!e.data.rangeSelection){t._getDecorationLayer().clear();t._getActionLayer().clear()}};z.clickOnNonSelection=function(e,t,i){if(!t.getProperties().get("interaction.enableDeselectAll")){return}if(i.indexOf(t._getChartType())>-1){if(I(e,t)){return}t.setStatus("rangeSelection",false);t.setStatus("rangeDomain",null)}t.fireEvent(e,true)};z.cleanBar=function(e,t){var i=e.data.isGray;var a=e.data.rangeSelection;var r=a&&a!=="clear";var o=t.getProperties();if(t.isBigDataMode()){var n=t.getNodes(t.NodeType.BAR_SERIES,false);if(i||r){var l=o.get("interaction.deselected.color");n.forEach(function(e){var i=b(t,e,l);var a=i.customizedColor||i.defaultColor;e.setAttribute("stroke",a)})}else{n.forEach(function(e){var t=u.getData(e);var i=t.color;e.setAttribute("stroke",i)})}}};z.cleanLine=function(e,t){var i=e.data.isGray;var a=e.data.rangeSelection;var r=a&&a!=="clear";var o=t.getProperties();var n=o.get("interaction.deselected");var l=t.getNodes(t.NodeType.LINE,false);l.forEach(function(e){var a=b(t,e,n.color);if((i||r)&&a.customizedColor){e.setAttribute("stroke",a.customizedColor)}else{e.setAttribute("stroke",a.defaultColor)}})};var W=z.setMakerOpacity=function(e,t){var i=u.getData(t);if(!(i.type&&i.type.toLowerCase()==="line")){return}var a=e.getProperties();var r=a.has("plotArea.line.marker.visible")?a.get("plotArea.line.marker.visible"):a.get("plotArea.marker.visible");var o=e.getModule("main.plot");if(o&&o.isMarkerVisible){r=o.isMarkerVisible()}var n=t.firstChild;if(!r){n.setAttribute("fill-opacity","0");n.setAttribute("stroke-opacity","0")}};return z});define("sap/viz/chart/behavior/config/DataPointBehaviorConfig",["sap/viz/framework/common/util/Constants","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler"],function(e,t){var i=e.CSS.CLASS;var a=i.DATAPOINT;var r=i.DATALABEL;var o=i.AREA;var n=i.AREA_POINT;var l=i.AREA_SELECTED;var s=["info/timeseries_line","info/timeseries_column","info/timeseries_scatter","info/timeseries_bubble","info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_column","info/timeseries_stacked_combination","info/timeseries_100_stacked_column","info/timeseries_bullet","info/timeseries_waterfall"];return[{id:"dataPointBehaviorDefinition",handler:t,handlerType:"class",triggerEvent:[{name:"standAloneInitialized",method:"standAloneInitialized"},{name:"afterBehaviorLoaded",method:"initialize"},{name:"click",targets:a,excludeTargets:["v-m-action-layerrange"],method:"clickOnDataPoint"},{name:"hover",targets:a,method:"hoverOnDataPoint"},{name:"click",targets:r,excludeTargets:["v-m-action-layerrange"],method:"clickOnDataLabel"},{name:"hover",targets:r,method:"hoverOnDataLabel"},{name:"hover",excludeTargets:[a,r,o,n,l],method:"hoverOnNonDataPoint"},{name:"selectDataPoint",method:"selectDataPoint"},{name:"deselectDataPoint",method:"deselectDataPoint"},{name:"hoverOnDataPoint",method:"hoverEffectOnDataPoint"},{name:"unhoverOnDataPoint",method:"unhoverOnDataPoint"},{name:"clearPlot",method:"clearPlot"},{name:"hover",supportedChartTypes:s,targets:["v-m-root","v-m-action-layerrange"],method:"hoverOnTimeArea"}]}]});define("sap/viz/chart/behavior/config/tooltip/TooltipUtils",["sap/viz/framework/common/format/FormatManager","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/format/UnitFormat"],function(e,t,i,a){var r="Invalid date";var o=a.SUPPORT_CUSTOM_COMPONENTS.TOOLTIP;function n(i,r,o,n,l){if(!i){return""}var s,u;if(t.isString(r)){s=r}else if(t.isPlainObject(r)){var c=r[n];if(t.isArray(c)){s=c[0];u=c[1]}else if(t.isString(c)){s=c}}else if(t.isArray(r)){s=r[0];u=r[1]}u=u||e.getPercentagePattern(2);var h={decimalFormatString:a.getDecimalFormatString(a.SUPPORT_CUSTOM_COMPONENTS.TOOLTIP)};var p=a.format(i.value,s,o,h);if(l){p+=" "+l}p+=" (";p+=a.format(i.percentage,u,o,h);p+=")";return p}function l(i,r,l,u,c){if(!t.isArray(i.data)){return i}var h=i.data;var p=r.get("tooltip.bodyMeasureValue.type");var d=r.get("general.showAsUTC");for(var f=-1,v=0;++f<h.length;){var g=h[f];var m=g.value;var y=g["value.d"];var _=g.id;if(m===null){continue}var A=r.get("tooltip.formatString");var b=g.formatString;var x=g.formatString;if(t.isArray(x)){x=x[0]}var S=null;var D=g.bothValue;if(!g.bTimeRange&&g.type==="Measure"){if(g.strValue!=null){m=g.strValue}if(h.timeMeasure!==undefined&&h.timeMeasure===v){g.value=e.format(new Date(parseInt(m)),x||e.DEFAULT_FORMAT_DATE_TIME,d)}else{var w=r.get("tooltip.unitFormatType");A=A||b;if(D&&p&&p==="valueAndPercentage"){g.value=n(D,A,w,_,g.unit)}else{var C=D&&p==="percentage";if(l){var T=l._getChartType();if(T&&T.indexOf("timeseries_100_stacked_column")>-1){C=true;p="percentage"}}var z=D&&p==="value";if(t.isPlainObject(A)){S=A[_];if(t.isArray(S)){S=C?S[1]:S[0]}}else if(t.isString(A)){S=A}else if(t.isArray(A)){S=C?A[1]:A[0]}if(C){S=S||e.getPercentagePattern(2);m=D?D[p]:m}else if(z){m=D?D[p]:m}var L={decimalFormatString:a.getDecimalFormatString(o)};var P=c||a.format;g.value=P(m,S,w,L);if(!u&&g.unit&&(!D||z)){g.value+=" "+g.unit}}}++v}else if(g.type==="Dimension"&&(h.timeDimensions!==undefined&&h.timeDimensions.indexOf(f)>=0)){s(g,A,d)}}return i}function s(a,o,n){var l=a["value.d"],s,u=a.formatString;if(a.timeAxis){if(l&&t.isString(l)){a.value={day:l}}else{a.value=a.timeAxis.getFormatTimeValue(a.value)}}else{var c=e.DEFAULT_FORMAT_DATE_TIME;var h=new Date(a.value);if(!isNaN(h.getTime())){if(t.isExist(o)&&t.isExist(o[a.id])){s=o[a.id]}s=s||u||c;a.value={day:e.format(h,s,n)}}else{a.value={day:i.get("IDS_INVALID_DATE")||r}}if(l!=null){a.value={day:l}}}}function u(e,t,i){var a={};if(t){if(t.patternFill){a.pattern=t.patternFill}else if(t.pattern){a.pattern=t.pattern}if(t.color){a.color=t.color;if(t.actual&&a.color["v-primary"]){a.color["v-primary"]["id"]=t.actual}if(t.additional&&a.color["v-additional"]){a.color["v-additional"]["id"]=t.additional}if(t.forecast&&a.color["v-forecast"]){a.color["v-forecast"]["id"]=t.forecast}}if(t.fill){a.color=t.fill}if(t.shape){a.shape=t.shape}if(t.type){a.type=t.type}if(t.type==="line"){c(e,a,t,i)}}return a}function c(e,t,i,a){var r=e.getSemanticManager();var o=i.seriesIndex;var n=e.getModule("main.plot");var l=n.getSeriesStyle(o,null,true);t.lineInfo={};if(a){var s=r.getOthersStyle("color,lineType,lineColor");if(a.properties&&a.properties.lineColor){t.lineInfo.lineColor=a.properties.lineColor}else{if(!r.isOverrideMode()){t.lineInfo.lineColor=i.color}else{t.lineInfo.lineColor=s.properties.lineColor||s.properties.color;if(!t.lineInfo.lineColor){t.lineInfo.lineColor=l&&l.color||"#000000"}}}t.lineInfo.lineType=l&&l.lineType;if(a.properties&&a.properties.lineType){t.lineInfo.lineType=a.properties.lineType}else if(s.lineType){t.lineInfo.lineType=s.lineType}}else{if(l){t.lineInfo.lineColor=l.color;t.lineInfo.lineType=l.lineType}}var u=e.getProperties();if(u.get("plotArea.dataPoint.stroke.visible")){t.stroke={};t.stroke.visible=true;t.stroke.color=u.get("plotArea.dataPoint.stroke.color")}}return{format:l,formatTimeDimension:s,buildEventGraphicInfo:u}});define("sap/viz/chart/behavior/config/handler/TooltipTimerHandler",["sap/viz/framework/core/config"],function e(t){var i={Cleared:"Cleared",Active:"Active",Standby:"Standby",Appeared:"Appeared",Selected:"Selected",Deselected:"Deselected"};var a=1e3;var r=100;var o=5e3;var n=1e3;function l(){this._init()}l.prototype.setShowTooltipHandler=function(e){this._showHandler=e};l.prototype.setHideTooltipHandler=function(e){this._hideHandler=e};l.prototype.setMode=function(e){this._mode=e};l.prototype._setStatus=function(e){this._status=e;var t="_"+i[e].toLowerCase()+"Handler";this[t]()};l.prototype._clearedHandler=function(){this._isFirstShow=true;this._hideHandler()};l.prototype._activeHandler=function(){this._hideHandler();this._currentTime=Date.now();if(!this._isFirstShow&&this._currentTime-this._lastTime<n){this._timer=r}else{this._timer=a}if(this._showTimeOut){clearTimeout(this._showTimeOut)}function e(){this._setStatus(i.Appeared)}var o=t.globalSetting("disableTooltipTimer");if(o){e.call(this)}else{this._showTimeOut=setTimeout(e.bind(this),this._timer)}};l.prototype._standbyHandler=function(){if(this._showTimeOut){clearTimeout(this._showTimeOut);this._showTimeOut=null}if(this._hideTimeOut){clearTimeout(this._hideTimeOut);this._hideTimeOut=null}this._hideHandler()};l.prototype._appearedHandler=function(){this._lastTime=Date.now();this._isFirstShow=false;this._showHandler();if(this._mode!=="actionMode"){if(this._hideTimeOut){clearTimeout(this._hideTimeOut)}var e=function(){this._setStatus(i.Cleared)};var a=t.globalSetting("disableTooltipTimer");if(!a){this._hideTimeOut=setTimeout(e.bind(this),this._hideTimer)}}};l.prototype._selectedHandler=function(){if(this._showTimeOut){clearTimeout(this._showTimeOut);this._showTimeOut=null}if(this._hideTimeOut){clearTimeout(this._hideTimeOut);this._hideTimeOut=null}this._showHandler();this._lastTime=Date.now()};l.prototype._deselectedHandler=function(){if(this._showTimeOut){clearTimeout(this._showTimeOut);this._showTimeOut=null}if(this._hideTimeOut){clearTimeout(this._hideTimeOut);this._hideTimeOut=null}this._hideHandler()};l.prototype.hover=function(e){switch(this._status){case i.Cleared:if(e!=="nonDataPoint"){this._setStatus(i.Active)}break;case i.Active:if(e==="nonDataPoint"){this._setStatus(i.Standby)}else{this._setStatus(i.Active)}break;case i.Appeared:if(e==="nonDataPoint"){this._setStatus(i.Standby)}else if(s(this._target,e)){if(this._mode!=="actionMode"){this._setStatus(i.Appeared)}}else{this._setStatus(i.Active)}break;case i.Standby:if(e!=="nonDataPoint"){this._setStatus(i.Active)}break;case i.Selected:case i.Deselected:if(e!=="nonDataPoint"&&!s(this._target,e)){this._setStatus(i.Active)}break}this._target=e};function s(e,t){var i=e&&e.getAttribute?e.getAttribute("data-datapoint-id"):e;var a=t&&t.getAttribute?t.getAttribute("data-datapoint-id"):t;return a===i}l.prototype.select=function(e){this._setStatus(i.Selected);this._target=e};l.prototype.deselect=function(e){this._setStatus(i.Deselected);this._target=e};l.prototype.interrupt=function(){this._setStatus(i.Standby)};l.prototype._init=function(){this._status=i.Cleared;this._showTimeOut=null;this._hideTimeOut=null;this._timer=a;this._hideTimer=o;this._showHandler=null;this._hideHandler=null;this._currentTime=null;this._lastTime=null;this._target=null;this._isFirstShow=true};l.prototype.reset=function(){clearTimeout(this._showTimeOut);clearTimeout(this._hideTimeOut);this._init()};return l});define("sap/viz/chart/behavior/config/tooltip/Tooltip",["sap/viz/chart/behavior/config/tooltip/TooltipUtils","sap/viz/framework/common/util/CSSUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/log/Logger","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/FiscalUtil","sap/viz/chart/behavior/config/AlignToUtil","sap/viz/chart/components/util/TextUtils"],function e(t,i,a,r,o,n,l,s,u,c,h,p){var d="values selected";var f="value selected";var v={INFO_MODE:"infoMode",ACTION_MODE:"actionMode"};var g=8;var m=g+"px";var y={padding:"10px",paddingNum:10,paddingBottom:"10",paddingTop:"10",horizontalLine:{borderBottom:"solid 1px",borderBottomNum:1,marginTop:"10px",marginTopNum:10},dimensionName:{fontSize:"12px",fontFamily:"Arial",paddingBottom:m,paddingBottomNum:g,whiteSpace:"nowrap",overflow:"hidden"},dimensionValue:{fontSize:"13px",fontFamily:"Arial",fontWeight:"bold",paddingBottom:m,paddingBottomNum:g,paddingLeft:"7px",paddingLeftNum:7,whiteSpace:"nowrap",overflow:"hidden"},measureName:{fontSize:"12px",fontFamily:"Arial",paddingBottom:m,paddingBottomNum:g,whiteSpace:"nowrap",overflow:"hidden"},measureValue:{fontSize:"13px",fontFamily:"Arial",fontWeight:"bold",paddingBottom:m,paddingBottomNum:g,paddingLeft:"7px",paddingLeftNum:7,whiteSpace:"nowrap",overflow:"hidden"},selectedText:{fontSize:"12px",fontFamily:"Arial",fontWeight:"bold",marginTop:"8px",marginTopNum:8},closeButton:{size:20,borderSize:2,borderStyle:"solid",forkSize:10},mouseMarginTop:3,truncatedWidth:140,contentMaxSize:"42px",truncatedHeight:12,borderWidth:"1px",borderWidthNum:1,borderStyle:"solid",borderRadius:"3px",boxShadow:"1px 1px #AFAFAF"};var _=s.getPositiveNumber;function A(e,t){if(a.isFunction(e)){return e}else{return t.defaultValue}}var b=function(e){this._properties=e;this._properties.add({tooltip:{preRender:{set:A},postRender:{set:A},formatString:{set:function(e,t){if(a.isString(e)||a.isPlainObject(e)||a.isArray(e)){return e}else{return t.defaultValue}}},unitFormatType:{set:function(e,t){if(a.isString(e)){return e}else{return t.defaultValue}}}}});this._display=r.extend(true,{},y);this._tooltipMode=r.extend(true,{},v);this._defaultToolTipColors={backgroundColor:"",borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:"",dimensionName:"",dimensionValue:"",measureName:"",measureValue:"",separationLineSingleColor:"",footerLabelColor:"",closeButtonBackground:"#ffffff",closeButtonBorderColor:"#cccccc"};this._data=null;this._semanticResult=null;this._div=null;this._borderDiv=null;this._mainDiv=null;this._isShown=false;this._closeButtonDiv=null;this._extensionDiv=null;this._mode=null;this._dimensionOrMeasureTitles=[];this._maxRatio=.75;this._isRTL=false;if(n.isWindowsSurface()){this._touchEvent={touchstart:"pointerdown",touchend:"pointerup"}}else{this._touchEvent={touchstart:"touchstart",touchend:"touchend"}}};function x(e){if(e==null){return o.get("IDS_ISNOVALUE")}else{return e}}b.prototype.isActionMode=function(){return this._mode===v.ACTION_MODE};b.prototype.isInfoMode=function(){return this._mode===this._tooltipMode.INFO_MODE};b.prototype.shouldShowFullText=function(){return this._properties.get("tooltip.showFullText")};b.prototype._willHaveScrollbar=function(){return this.isActionMode()&&this._isTextTooTall&&!this.shouldShowFullText()};b.prototype.onClose=function(e){this._onClose=e};b.prototype._clearGlobalValues=function(){this._dimensionOrMeasureTitles=[]};b.prototype._getTooltipContainer=function(){return this._div.node().parentNode};b.prototype._getRootParent=function(){return this._rootNode&&this._rootNode.parentNode};b.prototype.createNode=function(e){if(e!==null&&e!==undefined){var t=d3.select(e);this._div=t.select(".v-m-tooltip");if(this._div.node()===null){this._div=t.append("div").attr("class","v-m-tooltip")}}return this};b.prototype._formatTooltipData=function(e,i){return t.format(e,this._properties,i)};var S=function(e,t,i){if(e){try{return e(t,i)}catch(e){l.error("ERROR in Tooltip callback")}}};b.prototype.showTooltip=function(e,t,i,r){if(!this._div||this._getTooltipContainer()===null){this.createNode(e.container)}this._rootNode=e.root;this._mode=e.mode;this._data=this._formatTooltipData(e,r);this._semanticResult=t;if(this._borderDiv!==null){this._borderDiv.remove()}this._isRTL=i;this._isTextTooTall=false;this._isTextTooLong=false;this._maxUntruncatedTextWidth=null;var n=false;var l;for(l=0;l<u.RTL_LANG.length;l++){if(o.currentLanguage.indexOf(u.RTL_LANG[l])===0){n=true;break}}if(this._properties.get("tooltip.visible")){this._borderDiv=this._div.append("div").attr("class","v-background");if(this._data.data&&this._data.data.rangeSelectionStage==="inLasso"){this._div.node().style["pointer-events"]="none"}else{this._div.node().style["pointer-events"]=""}this._mainDiv=this._borderDiv.append("div").attr("class","v-tooltip-mainDiv").style("position","relative").style("direction",n?"rtl":null);if(D()){this._borderDiv.style("-webkit-overflow-scrolling","auto");this._closeButtonDiv=this._borderDiv.append("div").attr("class","v-closeButton").style("position","absolute").style("direction",n?"rtl":null);var s=this;this._closeButtonDiv.on(this._touchEvent.touchstart,function(){d3.event.stopPropagation();d3.event.preventDefault()},true).on(this._touchEvent.touchend,function(){if(s._onClose&&a.isFunction(s._onClose)){s._onClose.call(s)}s.hideTooltip(s._mode);d3.event.stopPropagation();d3.event.preventDefault()},true)}this._extensionDiv=this._borderDiv.append("div").attr("class","v-tooltip-extension").style("position","relative").style("display","block").style("margin-top","10px");this._updateTooltipColor();if(this.isActionMode()){var c=S(this._properties.get("tooltip.preRender"),this._extensionDiv);if(a.isExist(c)&&c instanceof Object&&a.isExist(c.then)&&a.isFunction(c.then)){var h=function(){this._renderTooltip()};c.then(h.bind(this))}else{this._renderTooltip()}}else{this._renderTooltip()}S(this._properties.get("tooltip.postRender"),this._borderDiv);this._isShown=true}};b.prototype.isShown=function(){return this._isShown};b.prototype.hideTooltip=function(e){if(e==null||e===this._mode){if(this._borderDiv){this._borderDiv.remove();this._borderDiv=null}if(this._mainDiv){this._mainDiv=null}if(this._extensionDiv){this._extensionDiv=null}if(this._closeButtonDiv){this._closeButtonDiv.on(this._touchEvent.touchend,null);this._closeButtonDiv.on(this._touchEvent.touchstart,null);this._closeButtonDiv=null}this._defaultToolTipColors.background="";this._defaultToolTipColors.border="";this._defaultToolTipColors.dimensionName="";this._defaultToolTipColors.dimensionValue="";this._defaultToolTipColors.measureName="";this._defaultToolTipColors.measureValue="";this._defaultToolTipColors.separationLineSingleColor="";if(this._div){this._div.style("visibility","hidden").style("padding","0px").style("max-height","").style("top","-65535px").style("left","-65535px")}this._clearGlobalValues();this._isShown=false}};b.prototype._calculateDesktopPos=function(e,t){var i=t.x;var a=t.y;var r=+this._display.paddingBottom;var o=+this._display.paddingTop;var n=this._display.mouseMarginTop;var l=this._div.node();var s=l.offsetWidth;var u=l.offsetHeight;if(i+s/2>e.right){i=e.right-s}else if(i-s/2<e.left){i=e.left}else{i=i-s/2}if(!this.isInfoMode()&&a-n-u<e.top){a=a+13-o}else if(this.isInfoMode()&&a-r-n-u<e.top){a=a+13}else{a=a-n-u;if(this.isInfoMode()){a=a-r}}if(a+u>e.bottom){if(t.y<=(e.bottom+e.top)/2){a=t.y+13;if(!this.isInfoMode()){a=a-o}}else{a=t.y-n-u;if(this.isInfoMode()){a=a-r}}}return{x:i,y:a}};b.prototype._calculateMobilePos=function(e,t){var i=t.x;var a=t.y;var r=this._display.closeButton.size;var o=this._display.mouseMarginTop;var n=this._div.node();var l=n.offsetWidth;var s=n.offsetHeight;if(i+l/2+r/2>e.right){i=e.right-l-r/2}else if(i-l/2<e.left){i=e.left}else{i=i-l/2-r/2}if(a-o-s-r/2<e.top){a=a+13+r/2}else{a=a-o-s}if(a+s+r/2>e.bottom){if(t.y<=(e.bottom+e.top)/2){a=t.y+13+r/2}else{a=t.y-o-s}}return{x:i,y:a}};function D(){return n.isMobile()&&(!n.isIE()||n.isPointerEnabled())}b.prototype._calculatePos=function(e){var t;if(a.isExist(e.alignTo)){var i=this._div.node();[].concat(e.alignTo).forEach(function(e){if(e.source.dom){return}else if(!e.source.selector){e.source.dom=i}else{e.source.dom=i.querySelector(e.source.selector)}});t=h.calculate(e.alignTo)}else{var r=this._getLimit();var o=this._getTooltipContainer().getBoundingClientRect();var n=D()?this._calculateMobilePos:this._calculateDesktopPos;var l=n.call(this,r,e);t={x:l.x-o.left,y:l.y-o.top}}if(e.offset){t.x+=e.offset.x||0;t.y+=e.offset.y||0}return t};b.prototype._getMaxWidth=function(){var e=this._getRootParent()&&+this._getRootParent().offsetWidth||0;var t=_(this._getTooltipContainer().getAttribute("actualWidth"),0);return Math.max(e,t)*this._maxRatio};b.prototype._getMaxWidthForText=function(){var e=Math.max(this._getMaxWidth()-2*(this._display.paddingNum+this._display.borderWidthNum),0);if(C(this._data)){e=Math.max(this._getReservedSpaceForSelection().width,e)}return Math.max(e,this._maxUntruncatedTextWidth)};b.prototype._getMaxHeight=function(){var e=this._getRootParent()&&+this._getRootParent().offsetHeight||0;var t=_(this._getTooltipContainer().getAttribute("actualHeight"),0);var i=Math.max(e,t)*this._maxRatio;if(C(this._data)){i-=this._getReservedSpaceForSelection().height}return Math.max(i,0)};b.prototype._getMaxHeightForText=function(){return Math.max(this._getMaxHeight()-2*this._display.paddingNum,0)};b.prototype._getLimit=function(){function e(e,t,i){if(!e){return 0}return e.hasAttribute(t)?_(e.getAttribute(t),0):e[i]}var t;if(this._properties.get("tooltip.layinChart")&&!this.shouldShowFullText()){var i=this._getTooltipContainer();var a=i.getBoundingClientRect();var r=e(i,"actualWidth","offsetWidth");var o=e(i,"actualHeight","offsetHeight");t={top:a.top,left:a.left,bottom:a.top+o,right:a.left+r}}else{var n=[0,0];["clientWidth","clientHeight"].forEach(function(e,t){if(document.documentElement[e]){n[t]=document.documentElement[e]}else if(document.body&&document.body[e]){n[t]=document.body[e]}});t={top:0,left:0,bottom:n[1],right:n[0]}}return t};b.prototype._adjustTooltipHeight=function(e){this._div.style("max-height",e/2-this._display.truncatedHeight+"px")};b.prototype._renderTooltip=function(){if(!this._extensionDiv.node()||this._extensionDiv.node().childNodes.length===0){this._extensionDiv.remove()}var e=this._getTextsAndStyles();if(e){if(this.shouldLayout()){e=this.layout(e)}this._drawContent(e);this._postUpdateTable(this._data.data)}this._updateSelection();this._updateBorderDiv();this._updateDiv();this._adjustCloseBtnForMobile()};b.prototype._postUpdateTable=function(e){};b.prototype._updateBorderDiv=function(){this._borderDiv.style("background",this._defaultToolTipColors.backgroundColor);this._borderDiv.style("border-color",this._defaultToolTipColors.border);var e=["borderTopColor","borderBottomColor","borderLeftColor","borderRightColor"];var t=["border-top-color","border-bottom-color","border-left-color","border-right-color"];for(var i=0;i<e.length;i++){if(this._defaultToolTipColors[e[i]]!==""){this._borderDiv.style([t[i]],this._defaultToolTipColors[e[i]])}}this._borderDiv.style("border-style",this._display.borderStyle).style("border-width",this._display.borderWidth).style("border-radius",this._display.borderRadius).style("box-shadow",this._display.boxShadow).style("overflow-x","hidden").style("overflow-y","auto").style("padding",this._display.padding)};b.prototype._updateDiv=function(){this._div.style("position","absolute").style("left","0px").style("top","0px").style("width","auto").style("height","auto").style("float","left").style("visibility","hidden").style("line-height","normal");this._addPadding();if(this.isActionMode()){this._div.style("padding-bottom",this._display.paddingBottom+"px");if(!D()){this._div.style("padding-top",this._display.paddingTop+"px")}}else{this._div.style("padding-top","0px")}var e;if(document.documentElement.clientHeight){e=document.documentElement.clientHeight}else if(document.body&&document.body.clientHeight){e=document.body.clientHeight}if(this._div.node().offsetHeight>e){this._adjustTooltipHeight(e)}this._div.style("visibility","visible").style("white-space","nowrap");if(this._data.forceStyle){this._div.style(this._data.forceStyle)}var t=this._calculatePos(this._data.position);this._div.style("left",t.x+"px").style("top",t.y+"px")};b.prototype._adjustCloseBtnForMobile=function(){if(D()){var e=this._div.node();var t=this._getPaddingForCloseBtn(e);var i=e.offsetWidth-parseInt(t.paddingRight);var a=this._display.closeButton.size,r=a/2;var o=this._display.closeButton.forkSize,l=o/2;var s=this._display.closeButton.borderSize;var u=r-l;var c=r-s/2;var h="-webkit-transform";if(n.isWindowsSurface()){h="transform"}var p={position:"absolute",height:this._display.closeButton.borderSize,width:o+"px","border-bottom-color":this._defaultToolTipColors.closeButtonBorderColor,"border-bottom-width":this._display.closeButton.borderSize+"px","border-bottom-style":this._display.closeButton.borderStyle,top:c+"px",left:u+"px"};p[h]="rotate(-45deg)";this._closeButtonDiv.append("div").style(p);p[h]="rotate(45deg)";this._closeButtonDiv.append("div").style(p);var d=r-parseInt(t.paddingTop);this._closeButtonDiv.style("left",i-r-this._display.closeButton.borderSize+"px").style("top",-d+"px").style("width",a+"px").style("height",a+"px").style("border-width",this._display.closeButton.borderSize+"px").style("border-radius",a+"px").style("border-style",this._display.closeButton.borderStyle).style("border-color",this._defaultToolTipColors.closeButtonBorderColor).style("background",this._defaultToolTipColors.closeButtonBackground)}};b.prototype._getPaddingForCloseBtn=function(e){if(e){var t=/(\d*)px/i;var i=e.style;var a=i.paddingRight;var r=i.paddingTop;var o=t.exec(a);a=o&&o[1]||0;o=t.exec(r);r=o&&o[1]||0;return{paddingRight:a,paddingTop:r}}return{paddingRight:0,paddingTop:0}};b.prototype._addPadding=function(){if(this.isActionMode()){this._div.style("padding-bottom",this._display.paddingBottom+"px")}};b.prototype._getReservedSpaceForSelection=function(){var e=this._getStyleForSelection();var t=this._getTextForSelection();var i=this.measure(t,e);var a=i.height+this._display.horizontalLine.borderBottomNum+this._display.horizontalLine.marginTopNum+this._display.selectedText.marginTopNum;return{height:a,width:i.width}};b.prototype._getReservedSpaceForScrollbar=function(){if(this.shouldShowFullText()){return 0}else if(D()){var e=10;return e}else if(n.isIE()){var t=30;return t}else{var i=20;return i}};function w(e){if(e.selectedNumber<=0){return false}return e.selectedNumber>1||e.data&&e.data.rangeSelectionStage==="lassoEnd"}function C(e){return e.data&&e.selectedNumber>0&&w(e)}b.prototype._getStyleForSelection=function(){var e=P(this._display.selectedText);if(this._defaultToolTipColors.footerLabelColor!==""){e+=";color:"+this._defaultToolTipColors.footerLabelColor}if(!this._data.data){e=e.replace(/margin-top:[0-9]+px/,"margin-top:0px")}return e};b.prototype._getTextForSelection=function(){var e=this._data.selectedNumber===1;var t=e?o.get("IDS_VALUE_SELECTED"):o.get("IDS_VALUES_SELECTED");if(!t){t=e?f:d}return this._data.selectedNumber+" "+t};b.prototype._updateSelection=function(){if(this.isActionMode()){var e=this._data;if(C(e)){var t=this._mainDiv.append("div").attr("class","v-separationline").style("margin-top",this._display.horizontalLine.marginTop).style("border-bottom-width","1px").style("border-bottom-style","solid");if(this._defaultToolTipColors.separationLineSingleColor!==""){t.style("border-bottom-color",this._defaultToolTipColors.separationLineSingleColor)}}if(w(e)||!e.data){var a=this._getStyleForSelection();var r=this._getTextForSelection();this._mainDiv.append("div").each(function(){i.setDOMStyle(this,a)}).attr("class","v-footer-label tooltipfooterlabel").text(r)}}};b.prototype._processTimeRange=function(e){var t=e.length;var i=0;if(t<2||!e[i].bTimeRange){return}if(e[0].value.time&&e[0].value.day&&e[0].value.day===e[1].value.day){e[0].value.day=null}};b.prototype._getDimensionTextAndStyle=function(e,t,i,o){var n=r.extend(true,{},this._display.dimensionName);var l=r.extend(true,{},this._display.dimensionValue);var s=i.bTimeRange||i.bValueDate;var u=s?i.value.time||i.value.day:i.value;if(o&&(!s||!i.value.time||!i.value.day)){n.paddingBottom="0px";l.paddingBottom="0px"}if(i.bValueDate){l.paddingLeft="0px"}var c=[];var h=[];var p,d;if(!i.bValueDate){if(this._defaultToolTipColors.dimensionName!==""){n.color=this._defaultToolTipColors.dimensionName}if(this._isRTL){n._float="left"}var f;var v=this._semanticResult;if(v&&v.dataName){f=v.dataName[i.id]}d=x(a.isExist(f)?f:i.name)+":";h.push(d);c.push(n)}var g=x(u);var m=r.extend(true,{},l);if(this._defaultToolTipColors.dimensionValue!==""){m.color=this._defaultToolTipColors.dimensionValue}h.push(g);c.push(m);if(s&&i.value.day&&i.value.time){if(o){l=r.extend(true,{},this._display.dimensionValue);l.paddingBottom="0px";l.color=this._defaultToolTipColors.dimensionValue;m=l}g=x(i.value.day);h.push(g);c.push(m);i.drawAsTwoRow=true}t.push(c);e.push(h)};function T(e,t,i){var a=[];for(var r=0;r<e.length;r++){if(t.indexOf(r)>-1){if(i){a.push(e[r]);a.push(e[r])}else{if(e[r].length===2){a.push([e[r][0]]);a.push([e[r][1]])}else{a.push(e[r].slice(0,2));a.push(e[r].slice(2))}}}else{a.push(e[r])}}return a}b.prototype._getTextsAndStyles=function(){var e=this._data.data,t=this._semanticResult;if(e&&e.length){var i,o,n,l,s,u;var h=[],p=[];for(var d=-1;++d<e.length;){if(e[d].type==="Dimension"){var f=e[d];if(c.hasFiscalLevel(this._properties)){c.tooltipDataToDate(f)}h.push(f)}else if(e[d].type==="Measure"){p.push(e[d])}}this._processTimeRange(h);var v=[],g=[];var m=[];for(d=0;d<h.length;++d){var y=d===h.length-1&&p.length===0;if(y){i=r.extend(true,{},this._display.dimensionName);i.paddingBottom="0px";o=r.extend(true,{},this._display.dimensionValue);o.paddingBottom="0px"}else{i=this._display.dimensionName;o=this._display.dimensionValue}this._getDimensionTextAndStyle(v,g,h[d],y);if(h[d].drawAsTwoRow){m.push(d)}}if(m.length>0){h=T(h,m,true);v=T(v,m);g=T(g,m)}var _=[],A=[];for(d=-1;++d<p.length;){i=r.extend(true,{},this._display.measureName);o=r.extend(true,{},this._display.measureValue);if(d===p.length-1){i.paddingBottom="0px";o.paddingBottom="0px"}if(this._defaultToolTipColors.measureName!==""){i.color=this._defaultToolTipColors.measureName}if(this._isRTL){i._float="left"}var b;if(t&&t.dataName){b=t.dataName[p[d].id]}var S=x(a.isExist(b)?b:p[d].name)+":";var D=x(p[d].value);if(this._defaultToolTipColors.measureValue!==""){o.color=this._defaultToolTipColors.measureValue}_.push([S,D]);A.push([i,o])}return{dimTexts:v,dimStyles:g,msrTexts:_,msrStyles:A,dims:h,measures:p}}};b.prototype._drawContent=function(e){var t=e.dimTexts;var i=e.dimStyles;var a=e.msrTexts;var r=e.msrStyles;var o=e.dims;var n=e.measures;var l;var s=this._mainDiv.append("div").attr("class","v-tooltip-mainDiv-scrollable-container");var u=s.append("table").attr("class","v-tooltip-dimension-measure").style("border-collapse","collapse");if(!this._isTextTooLong){this.drawToTable(u,o,t,i,true);this.drawToTable(u,n,a,r,false)}else{l=this._getMaxWidthForText();if(this.isActionMode()){if(this._isTextTooTall){l-=this._getReservedSpaceForScrollbar()}this.drawLongTextToTable(l,u,o,t,i,true);this.drawLongTextToTable(l,u,n,a,r,false)}else{this.drawLongTextToTable(l,u,o,t,i,true);this.drawLongTextToTable(l,u,n,a,r,false)}}if(this._isTextTooTall){var c=u.node().offsetHeight;this._isTextTooTall=c>this._getMaxHeight()}if(this._willHaveScrollbar()){var h=this._getMaxHeightForText();s.style("height",h+"px").style("overflow-y","scroll")}if(this._isTextTooLong){var p=u.node().offsetWidth;this._isTextTooLong=p>l}if(this._isTextTooLong&&!this.shouldShowFullText()){s.style("width",this._getMaxWidthForText()+"px").style("overflow-x","hidden")}};b.prototype.calculateLineNum=function(e,t){if(this._isRTL){return 1}return this.isActionMode()&&t>0?Math.ceil(e/t)+2:2};b.prototype.measureWrappedText=function(e,t,i,a){var r=this.measure(e,t);var o;if(r.width<i||a){return r}var n=this.calculateLineNum(r.width,i);var l=p.wrapText(e,[" "],i,n,P(t));if(l.lines.length===1){return r}else{var s=0;var u=0;l.lines.forEach(function(e){var i=this.measure(e,t);s+=i.height;u=Math.max(u,i.width)},this);o=s;return{height:o,width:u}}};b.prototype.shouldLayout=function(){return true};b.prototype.measure=function(e,t){var i=p.fastMeasure(e,t.fontSize,t.fontWeight,t.fontFamily);var a=t.paddingBottomNum||0;var r=t.paddingLeftNum||0;var o=1;i.height+=a+o;i.width+=r+o;return i};b.prototype.layout=function(e){var t=e.dimTexts;var i=e.dimStyles;var a=e.msrTexts;var r=e.msrStyles;var o=e.dims;var n=e.measures;var l=t.concat(a);var s=i.concat(r);var u=o.concat(n);var c=this._getMaxWidthForText();var h=this._getMaxHeightForText();var p=0;var d=0;var f,v;var y;var _;var A;var b;var x=0;var S=this._isRTL?"right":"left";var D=l.length;var w=0;var C=[];var T=[];var z=this.isInfoMode()&&!this.shouldShowFullText();function P(e){if(x>h){e._isTextTooTall=true;if(z){D=f;return true}}return false}for(f=0;f<l.length;f++){y=l[f];_=s[f];A=u[f];if(y.length===2){var k=this.measure(y[0],_[0]);var E=this.measure(y[1],_[1]);x+=Math.max(k.height,E.height);if(P(this)){break}b=E.width;p=Math.max(p,k.width);d=Math.max(d,b);if(p+d>c){this._isTextTooLong=true}}else if(y.length===1){var I=this.measure(y[0],_[0]);x+=I.height;if(P(this)){break}b=I.width;if(b>c){this._isTextTooLong=true}}if(L(A)){C.push(y.length===2?y[1]:y[0]);T.push(_.length===2?_[1]:_[0])}}if(this._isTextTooLong){for(f=0;f<s.length;f++){var O=s[f];for(v=0;v<O.length;v++){var R=O[v];R.paddingLeft="0px";R.paddingLeftNum=0;R._float=S;if(f===s.length-1&&v===O.length-1){R.paddingBottom="0px";R.paddingBottomNum=0}else{R.paddingBottom=m;R.paddingBottomNum=g}}}}var N=false;function M(e){if(!N&&e._willHaveScrollbar()&&e._maxUntruncatedTextWidth>0){e._maxUntruncatedTextWidth+=e._getReservedSpaceForScrollbar();N=true}}if(C.length>0){for(f=0;f<C.length;f++){b=this.measure(C[f],T[f]).width;this._maxUntruncatedTextWidth=Math.max(this._maxUntruncatedTextWidth,b)}M(this)}c=this._getMaxWidthForText();if((!this._isTextTooTall||z||this.shouldShowFullText())&&this._isTextTooLong){x=0;var B=false;for(f=0;f<D&&!B;f++){y=l[f];_=s[f];A=u[f];for(v=0;v<y.length;v++){var V=y.length===2&&v===0?false:L(A);var F=this.measureWrappedText(y[v],_[v],c,V);x+=F.height;if(this.shouldShowFullText()){this._maxUntruncatedTextWidth=Math.max(this._maxUntruncatedTextWidth,F.width)}if(x>h){this._isTextTooTall=true;if(!this.shouldShowFullText()){B=true}if(z){D=f;w=v;break}}}}}if(this._isTextTooTall&&z){l=l.slice(0,D+1);u=u.slice(0,D+1);s=s.slice(0,D+1);if(w===1){l[D][1]="...";s[D][1]._float=S}else{l[D]=["..."];s[D][0]._float=S}var H=o.length;var U=u.length;t=l.slice(0,H);i=s.slice(0,H);o=u.slice(0,H);a=l.slice(H);r=s.slice(H);n=u.slice(H);e.dimTexts=t;e.dimStyles=i;e.msrTexts=a;e.msrStyles=r;e.dims=o;e.measures=n}M(this);return e};function z(e,t,a,r){var o=a.append("td").each(function(){i.setDOMStyle(this,P(e))}).text(t).attr("class",r);return o}b.prototype.drawToTable=function(e,t,i,a,r){for(var o=0;o<i.length;o++){var n=i[o];var l=a[o];var s=e.append("tr");var u,c;var h=t[o];if(n.length===2){c=r?"v-body-dimension-label":"v-body-measure-label";u=z(l[0],n[0],s,c);this._dimensionOrMeasureTitles.push(u);c=r?"v-body-dimension-value":"v-body-measure-value";u=z(l[1],n[1],s,c)}else if(n.length===1){c=r?"v-body-dimension-value":"v-body-measure-value";u=z(l[0],n[0],s,c);if(h.bValueDate||h.bTimeRange){u.attr("colspan","2")}}if(h.bTimeRange){u.attr("align","right")}}};function L(e){return e.type==="Measure"||e.bTimeRange||e.bValueDate}b.prototype.renderLongTextIntoCell=function(e,t,a,r,o,n){var l=[e];t=P(t);var s=this.measure(e,t).width;if(s>n&&!a){var u=this.calculateLineNum(s,n);var c=p.wrapText(e,[" "],n,u,t);l=c.lines;if(!this.shouldShowFullText()){var h=l.length-1;l[h]=p.ellipsis(l[h],null,n,t)}}for(var d=0;d<l.length;d++){var f=o.append("tr");var v=f.append("td").each(function(){i.setDOMStyle(this,t)}).text(l[d]).attr("class",r)}};b.prototype.drawLongTextToTable=function(e,t,i,a,r,o){for(var n=0;n<a.length;n++){var l=a[n];var s=r[n];var u=i[n];var c,h;if(l.length===2){h=o?"v-body-dimension-label":"v-body-measure-label";this.renderLongTextIntoCell(l[0],s[0],false,h,t,e);this._dimensionOrMeasureTitles.push(c);h=o?"v-body-dimension-value":"v-body-measure-value";this.renderLongTextIntoCell(l[1],s[1],L(u),h,t,e)}else if(l.length===1){h=o?"v-body-dimension-value":"v-body-measure-value";this.renderLongTextIntoCell(l[0],s[0],L(u),h,t,e)}}};function P(e){if(a.isString(e)){return e}var t="";var i={_float:"float",color:"color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",whiteSpace:"white-space",textOverflow:"text-overflow",overflow:"overflow",paddingLeft:"padding-left",paddingBottom:"padding-bottom",marginTop:"margin-top"};for(var r in i){if(i.hasOwnProperty(r)&&e[r]){t+=i[r]+":"+e[r]+";"}}return t}b.prototype._getStyle=function(e){return P(e)};b.prototype.destroy=function(){this._extensionDiv=null;this._mainDiv=null;this._properties=null;this._display=null;this._defaultToolTipColors=null;this._data=null;this._semanticResult=null};b.prototype._updateTooltipColor=function(){var e=this._properties.get("tooltip");var t=this._defaultToolTipColors;t.backgroundColor=e.background.color;t.border=e.background.borderColor;if(e.bodyDimensionLabel&&e.bodyDimensionLabel.color){t.dimensionName=e.bodyDimensionLabel.color}if(e.bodyDimensionValue&&e.bodyDimensionValue.color){t.dimensionValue=e.bodyDimensionValue.color}if(e.bodyMeasureLabel&&e.bodyMeasureLabel.color){t.measureName=e.bodyMeasureLabel.color}if(e.bodyMeasureValue&&e.bodyMeasureValue.color){t.measureValue=e.bodyMeasureValue.color}if(e.separationLine&&e.separationLine.color){t.separationLineSingleColor=e.separationLine.color}if(e.footerLabel&&e.footerLabel.color){t.footerLabelColor=e.footerLabel.color}if(e.closeButton&&e.closeButton.backgroundColor){t.closeButtonBackground=e.closeButton.backgroundColor}if(e.closeButton&&e.closeButton.borderColor){t.closeButtonBorderColor=e.closeButton.borderColor}};return b});define("sap/viz/chart/behavior/config/TooltipClassMap",["sap/viz/chart/behavior/config/tooltip/Tooltip"],function(e){var t={"*":e};var i={};i.register=function(e,i){for(var a=0;a<e.length;++a){t[e[a]]=i}};i.get=function(e){return t[e]||t["*"]};return i});define("sap/viz/chart/behavior/config/handler/TooltipBehaviorHandler",["sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/format/FormatManager","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/DOM","sap/viz/chart/behavior/config/handler/TooltipTimerHandler","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/chart/behavior/config/TooltipClassMap"],function(e,t,i,a,r,o,n,l,s,u,c,h){var p="measureNames";var d="_context_row_number";var f="Dimension";var v="inLasso";var g="lassoEnd";function m(e,t){var i={body:[],footer:[],point:e.position,selectedValues:e.selectedNumber};if(t){i.plotArea=t}var a=e.data;if(a&&a.length){for(var r=-1;++r<a.length;){var o=a[r];if(o.type==="Measure"){i.body.push({name:o.name,val:[{value:o.value}]})}else if(o.type==="Dimension"){i.footer.push({label:{val:o.name},value:{val:o.value}})}}}return i}function y(e,i){var a=false;if(i.getProperties()){var o=i.getProperties().get("interaction.decorations");if(r.isArray(o)){o.forEach(function(e){if(e.name==="hideDetail"){e.fn.call(this,i.getStatus("tooltipMode"));a=true}})}}if(!a){if(e.isShown()){e.hideTooltip();i.setStatus("tooltipMode",null);i.fireExternalEvent("hideTooltip",{name:t.Event.TooltipHide.name})}}}function _(e,t){if(r.isExist(e[t+i.DIMENSION_DISPLAYNAME_SUFFIX])){return e[t+i.DIMENSION_DISPLAYNAME_SUFFIX]}else if(r.isExist(e[t])){return e[t]}return null}function A(e,t,i){if(r.isExist(e[t])){return e[t]}else if(i===true&&e[t]===undefined){return undefined}return null}function b(e,t){for(var i in t){if(t.hasOwnProperty(i)){for(var a=0;a<t[i].length;++a){var r=t[i][a];if(r.id===e){return r}}}}return null}function x(e,t){if(r.isExist(e[t+i.DIMENSION_DISPLAYNAME_SUFFIX])){return e[t+i.DIMENSION_DISPLAYNAME_SUFFIX]}return null}function S(e,t){var i,a;if(t){a=t.timeField}else{i=e.getDataModel().timeAxis();a=i.metaData.map(function(e){return e.id})}return a}var D=d3.format(".2%");var w=function(){};w.processDateFormat=function(e,t,i){if(e.timeDimensions!==undefined){var a=e.timeDimensions;for(var r=0;r<a.length;++r){var o=e[a[r]];o.bValueDate=true;if(t){o.timeAxis=i}}}};w.prototype={standAloneInitialized:function(e,t){t.getProperties().origin.add({tooltip:{layinChart:true,visible:true,background:{color:"#ffffff",borderColor:"#cccccc"},bodyDimensionLabel:{color:"#666666"},bodyDimensionValue:{color:"#666666"},bodyMeasureLabel:{color:"#666666"},bodyMeasureValue:{color:"#000000"},closeButton:{backgroundColor:"#ffffff",borderColor:"#cccccc"},footerLabel:{color:"#000000"},separationLine:{color:"#a7a9ac"},preRender:null,postRender:null,formatString:null,unitFormatType:"FinancialUnits"}})},createTooltipInstance:function(e){var t=h.get(e._getChartType());return new t(e.getProperties())},initialized:function(e,i){this._tooltipModule=this.createTooltipInstance(i);this._tooltipModule.onClose(function(){i.fireExternalEvent("hideTooltip",{name:t.Event.TooltipHide.name})});i.setStatus("tooltipMode",null);this._createTooltipTimerHandler()},_createTooltipTimerHandler:function(){this._tooltipTimerHandler=new u},unloadedClear:function(e,t){var i=this._tooltipModule;if(i){y.call(this,i,t);i.destroy()}delete this._tooltipModule;t.removeStatus("tooltipMode");this._tooltipTimerHandler.reset()},refreshedTooltip:function(e,t){var i=this._tooltipModule;if(!i){return}y.call(this,i,t);this._tooltipTimerHandler.reset()},_getShowTooltipHandler:function(e,i){function a(){var a=this._tooltipModule;if(!a){return}var r=this._handleShowDetail(e,i);var o=e.data.mode;i.setStatus("tooltipMode",o);i.fireExternalEvent("showTooltip",{name:t.Event.TooltipShow.name,data:r.eventtData})}return a.bind(this)},_getHideTooltipHandler:function(e,t){function i(){var i=this._tooltipModule;if(!i){return}var a=t.getStatus("tooltipMode");if(!a||e.data.mode!==a){return}var o=t.getProperties().get("interaction.decorations");var n=false;if(r.isArray(o)){o.forEach(function(t){if(t.name==="hideDetail"){t.fn.call(this,e.data.mode);n=true}})}y.call(this,i,t)}return i.bind(this)},showDetail:function(e,t){var i=e.data.action;var a=this._getShowTooltipHandler(e,t);var r=this._getHideTooltipHandler(e,t);if(i){this._tooltipTimerHandler.setShowTooltipHandler(a);this._tooltipTimerHandler.setHideTooltipHandler(r);this._tooltipTimerHandler.setMode(e.data.mode);this._tooltipTimerHandler[i](e.data.target)}else{a()}},_handleShowDetail:function(e,t){var i,o=this._tooltipModule;var n=t.getProperties().get("tooltip.applyTimeAxisFormat");var s=t.getProperties().get("tooltip.formatString");var u;var c=t.getModule("main.timeAxis");if(c){var h=t.getDataModel();if(h&&h._timeAxis){u=h._timeAxis.metaData[0].id;n=n&&!(r.isExist(s)&&r.isExist(s[u]))}}if(e.data.target&&!t.getStatus("rangeSelection")){t.fireEvent("extractTooltipData",{target:e.data.target});i=t.getStatus("tooltipData");w.processDateFormat(i,n,c)}else if(t.getStatus("rangeSelection")){var p=t.getStatus("rangeDomain");var d="From";var y="To";i=[{id:u,name:l.get("IDS_TIME_FROM")||d,value:p[0],type:f,bTimeRange:true,timeAxis:n?c:null},{id:u,name:l.get("IDS_TIME_TO")||y,value:p[1],type:f,bTimeRange:true,timeAxis:n?c:null}];i.timeDimensions=[0,1];i.rangeSelectionStage=v;if(e.data.bLassoEnd){i.rangeSelectionStage=g}}var _=e.data.mode;var A={data:i,container:this._getTooltipContainer(t),root:t.getRootContainer(),mode:_,position:e.data.point,isAnchored:!!e.data.isAnchored,forceStyle:e.data.forceStyle};if(!i||i.rangeSelectionStage!==v){A["selectedNumber"]=t.getStatus("selectedDataPoints").length}var b=m(A,t.getBBox(t.BoxType.PLOT_NODE));var x=t.getProperties().get("interaction.decorations");var S=false;if(r.isArray(x)){x.forEach(function(e){if(e.name==="showDetail"){e.fn.call(this,a.extend(true,{},A));S=true}})}if(!S){this._processDecoration(o,A,t,e.data.target)}return{eventtData:b,tooltipData:A}},_processDecoration:function(e,t,i,a){var r=i?i.getSemanticManager():null,o;try{o=r?r.analyzeDataPoint("color,lineColor,lineType,pattern",n.getContext(a),true,n.getAdditionCtx(a)||{}):null}catch(e){o=null}var l=i?i.getEnvManager():null;var s=false;if(l){s=l.isRTL()}e.showTooltip(t,o,s,i)},_getTooltipContainer:function(e){return e.getTooltipContainer()},hideDetail:function(e,t){var i=e.data.action;var a=this._getHideTooltipHandler(e,t);if(i){this._tooltipTimerHandler.setHideTooltipHandler(a);this._tooltipTimerHandler[i](e.data.target)}else{a()}},showTooltipHoverOnPlot:function(e,t){t.fireEvent("showDetail",e.data)},hideTooltipHoverOnPlot:function(e,t){t.fireEvent("hideDetail",e.data)},showTooltipClickBigData:function(e,t){e.data.action="select";t.fireEvent("showDetail",e.data)},hideTooltipClickBigData:function(e,t){e.data.action="deselect";t.fireEvent("hideDetail",e.data)},extractTooltipData:function(e,t){var a=t.getDataModel();var o=a.getBindingMetaData();var l=t.getProperties().get("general.hideNoValueLabel");var s=e.data.target,u,c=[],h=[],f=[],v=[];if(s.context){u=s.context}else if(r.isString(s)||r.isNumber(s)){u=a.getDataPoint(s).context()}else{u=n.getContextByDataModel(s,a)}function g(e){for(var t in o){if(o.hasOwnProperty(t)){for(var i=0;i<o[t].length;++i){var a=o[t][i];if(a.id===e){return a}}}}return null}var m=a.context()&&a.context().metaData;function y(e){for(var t=0;m&&t<m.length;++t){if(m[t].id===e){return m[t]}}return null}var b=t._statusMgr.get("data.unit");var S;for(var D in u){if(u.hasOwnProperty(D)){S=null;if(D===p){continue}var w=g(D)||{};var C=null,T,z=w.type,L;T=z;if(z==="Dimension"){C=c;L=_(u,D)}else if(z==="Measure"||D===d){C=h;L=u[D]==null?u[D]:+u[D];if(z==="Measure"&&typeof u[D]==="string"){S=u[D]}}else{w=y(D)||{};if(!w.showInTooltip){continue}T=w.type;if(T==="Dimension"){C=f}else{C=v}L=_(u,D)}var P=this.decorateFieldName(w.name||D,D,a,s,t.getProperties());var k={id:D,name:P,value:L,strValue:S,type:T,formatString:w.formatString};if(r.isExist(x(u,D))){k["value"+i.DIMENSION_DISPLAYNAME_SUFFIX]=x(u,D);k["value"+i.DIMENSION_VALUE_SUFFIX]=A(u,D,l)}if(b[k.id]){k.unit=b[k.id]}if(C){C.push(k)}}}t.setStatus("tooltipData",c.concat(f).concat(h).concat(v))},decorateFieldName:function(e,t,i,a,r){return e},extractTooltipDataPie:function(t,i){i.fireEvent(t,true);var a=i.getProperties().get("tooltip.bodyMeasureValue.type");var o=i.getStatus("tooltipData");o.forEach(function(i){if(i.type==="Measure"&&t.data.target instanceof SVGElement){var o=e.getData(t.data.target).percentage;if(r.isNaN(o)){var n=d3.select(t.data.target.childNodes[0]).datum();o=(n.endAngle-n.startAngle)/(2*Math.PI)}i.bothValue={value:i.strValue?i.strValue:i.value,percentage:o,primaryKey:a==="percentage"?"percentage":"value"}}});i.setStatus("tooltipData",o)},extractTooltipDataPercentage:function(t,i){i.fireEvent(t,true);var a=i.getStatus("tooltipData");a.forEach(function(i){if(i.type==="Measure"&&t.data.target instanceof SVGElement){i.value=e.getData(t.data.target).percentageValue;var a=e.getContext(t.data.target);i.bothValue={value:a[a.measureNames],percentage:i.value,primaryKey:"percentage"}}});i.setStatus("tooltipData",a)},extractTooltipDataTimebubble:function(e,t){t.fireEvent(e,true);var i=t.getStatus("tooltipData");i.timeMeasure=0;t.setStatus("tooltipData",i)},extractTooltipDataPercentageMekko:function(t,i){i.fireEvent(t,true);var a=i.getStatus("tooltipData");var r=i.getDataModel().getBindingMetaData();var o;if(r){o=r.valueAxis[0]?r.valueAxis[0].id:undefined}a.forEach(function(i){if(i.type==="Measure"&&i.id===o){i.value=e.getData(t.data.target).percentageValue;var a=e.getContext(t.data.target);i.bothValue={value:a[a.measureNames],percentage:i.value,primaryKey:"percentage"};i.value=D(i.value)}});i.setStatus("tooltipData",a)},extractTooltipDataTimeStackedColumnPercentage:function(t,i){i.fireEvent(t,true);var a=i.getStatus("tooltipData");var r=t.data.target;var o=e.getData(r);var n=S(i,o);var l,s=[];a.forEach(function(t,i){if(n.indexOf(t.id)>=0){s.push(i)}if(t.type==="Measure"){t.value=o.percentageValue;l=e.getContext(r);t.bothValue={value:l[l.measureNames],percentage:t.value,primaryKey:"percentage"}}});a.timeDimensions=s;i.setStatus("tooltipData",a)},extractTooltipDataTimeWaterfall:function(t,i){i.fireEvent(t,true);var a=i.getDataModel();var r=a.getBindingMetaData();var o=i.getStatus("tooltipData");var n=e.getData(t.data.target);var s=[],u=[],h=[],p;var d=S(i,n);var f=i.getProperties().get("interaction.selectByTimeAxisGroup");for(var v=0;v<o.length;++v){if(d.indexOf(o[v].id)>=0){s.push(v);if(f){u.push(o[v])}}else if(o[v].type==="Dimension"){if(f){h.push(o[v].id)}}else if(o[v].type==="Measure"){if(f){p=o[v].formatString}}}o.timeDimensions=s;var g=i._statusMgr.get("data.unit"),m=[];if(f){var y=i.getProperties().get("plotArea.dataLabel.recapTitle")||l.get("IDS_END_OF_PERIOD");var _=c.getDataPointsByTimeField(t.data.target,i);if(_){_.forEach(function(t){var a=e.getContext(t);var o=b(a.measureNames,r);var n=e.getData(t).recap;var s="",c=a[a.measureNames];h.forEach(function(e){s+=(a[e+".d"]||a[e]||l.get("IDS_ISNOVALUE"))+" / "});s+=o.name||o.id;u.push({formatString:p,id:a.measureNames,name:s,type:"Measure",value:c,color:e.getData(t).color,unit:g[a.measureNames]});if(n){var d=i.getDataModel().valueAxis().metaData[0];u.push({formatString:d.formatString,id:d.id,name:y,type:"Measure",value:n.value,unit:g[d.id]})}})}u.timeDimensions=s;o=u}i.setStatus("tooltipData",o)},extractTooltipDataTimeLine:function(t,i){i.fireEvent(t,true);var a=i.getStatus("tooltipData");var r=e.getData(t.data.target);var o=S(i,r);var n=[];for(var l=0;l<a.length;++l){if(o.indexOf(a[l].id)>=0){n.push(l)}}a.timeDimensions=n;i.setStatus("tooltipData",a)},extractTooltipDataWaterfall:function(e,t){t.fireEvent(e,true);var i=t.getStatus("tooltipData");i=i.filter(function(e){var i=t.getDataModel();var a=i.waterfallType()?i.waterfallType().metaData:undefined;var r=a&&a[0]?a[0].id:undefined;return e.id!==r});t.setStatus("tooltipData",i)},extractTooltipDataCombination:function(e,t){t.fireEvent(e,true);var a=t.getProperties().get("general.hideNoValueLabel");if(!a){return}var r=t.getStatus("tooltipData");r=r.filter(function(e){if(e.hasOwnProperty("value"+i.DIMENSION_VALUE_SUFFIX)&&e["value"+i.DIMENSION_VALUE_SUFFIX]===undefined){return false}return true});t.setStatus("tooltipData",r)},extractTooltipDataComboEx:function(t,i){this.extractTooltipDataCombination(t,i);var a=i.getStatus("tooltipData");var r=t.data.target;if(!s.hasClass(r,"v-datapoint")){r=[].filter.call(i.getNodes(i.NodeType.DATA_POINT,false),function(e){return e.getAttribute("data-id")===t.data.target.getAttribute("data-id")})[0]}Object.defineProperty(a,"seriesType",{enumerable:false,value:e.getData(r).seriesType});i.setStatus("tooltipData",a)}};return w});define("sap/viz/chart/behavior/config/handler/RuntimeSelectionHelperHandler",["sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/chartmodel/DataSelector","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/tooltip/TooltipUtils","sap/viz/chart/behavior/config/handler/TooltipBehaviorHandler","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/lang/LangManager"],function(e,t,i,a,r,o,n,l,s,u,c,h,p){var d=o.SELECTION_MODE;var f="datapoint";var v="measureNames";var g="_context_row_number";var m="Dimension";var y="Measure";var _="timeAxis";var A="color";var b="waterfallType";var x="percentage";var S=function(e){if(!e.isTrellis()&&e.getProperties().get("legend.selectionFeedback")){e.fireEvent("syncSelectedLegendItems");e.fireEvent("syncSelectedMBCLegendItems")}};var D=function(){};D.prototype.initializedClearSelection=function(e,t){t.setStatus("selectedDataPoints",[])};D.prototype.unloadedClearSelection=function(e,t){var i=t.getStatus("selectedDataPoints");if(i&&i.length){t.fireEvent("clearPlot",{isGray:false})}t.removeStatus("selectedDataPoints")};D.prototype.refreshedKeepSelection=function(e,t){var i=t.getProperties().get("interaction.selectability.mode");var a=i?i.toUpperCase():i;var r=t.getStatus("selectedDataPoints");var o=t.getStatus("rangeSelection")&&t.getStatus("rangeDomain");var n=false;if(!t.getStatusManager().get("interaction.holdSelection")||a===d.NONE||a===d.SINGLE){if(r.length||o){t.fireEvent("clearPlot",{isGray:false});if(o){t.removeStatus("rangeDomain");t.removeStatus("rangeSelection")}}t.setStatus("selectedDataPoints",[]);n=true}else if(r.length){t.fireEvent("clearPlot",{isGray:!o,rangeSelection:o}).fireEvent("selectDataPoint",{targets:this._getNodes(r,t),disableAnimation:true}).setStatus("selectedDataPoints",r)}S(t);return n};D.prototype.reRenderKeepSelection=function(e,t){var i=t.getStatus("selectedDataPoints");var a=t.getStatus("hoveringDataPoint");var r=t.getStatus("rangeSelection")&&t.getStatus("rangeDomain");if(i.length){var o=this._getNodes(i,t);t.fireEvent("clearPlot",{isGray:!r,rangeSelection:r}).fireEvent("selectDataPoint",{targets:o,disableAnimation:true}).setStatus("selectedDataPoints",i)}if(a){t.fireEvent("hoverOnDataPoint",{targets:a})}if(r){t.fireEvent("rangeRecover")}if(t.getStatus("hoveringOnPlotEvent")){t.fireEvent(t.getStatus("hoveringOnPlotEvent"))}var n=t._getDecorationLayer();n.clear(f)};D.prototype.deselectAll=function(e,t){var i=t.getStatus("selectedDataPoints");t.fireEvent("clearPlot").fireEvent("deselectDataPoint",{targets:this._getNodes(i,t),isAnyOtherSelected:false}).fireEvent("hideDetail",{mode:"actionMode"}).setStatus("selectedDataPoints",[]);S(t);if(i&&i.length){t.fireEvent("dispatchDataEvent",{targets:i,isSelected:false})}if(t.getProperties().get("interaction.enableInternalEvents")){t.fireExternalEvent("_selectionDetails",{name:"_selectionDetails",data:[]})}};D.prototype.processMultipleSelectionTooltip=function(e,i){var a=i.getStatus("selectedDataPoints");if(a.length&&t.hasDataPoint(a,e.data.targets[0])){i.fireEvent("showDetail",{target:null,mode:"actionMode",point:e.data.point,forceStyle:e.data.forceStyle,isAnchored:e.data.isAnchored})}else{i.fireEvent("hideDetail",{mode:"actionMode"})}};var w={};w[d.SINGLE]=1;w[d.MULTIPLE]=1;w[d.EXCLUSIVE]=1;w[d.INCLUSIVE]=1;var C=["id","label","value","type","unit","unbound"];D.prototype.processSelection=function(t,i){var a=i.getStatus("selectedDataPoints");if(!a){return}if(!a.length){i.fireEvent("clearPlot",{isGray:!i.getStatus("rangeSelection"),rangeSelection:i.getStatus("rangeSelection")})}var r=t.data;var n=String(r.mode).toUpperCase();var l=e.turnToArray(r.targets);var s=[];var u=[];var c=[];var h={};var p,f;if(!w[n]){var v=i.getProperties().get("interaction.selectability.mode");n=v?String(v).toUpperCase():v}var g=i.getProperties().get("interaction.selectability.behavior");var m=g?g.toUpperCase():g;var y=i.getProperties().get("interaction.selectByTimeAxisGroup");if(!y&&n===d.SINGLE&&m===o.SELECTION_BEHAVIOR.DATAPOINT){l=[l[0]]}for(p=l.length;p--;){h[l[p]]=1}for(p=0,f=a.length;p<f;++p){var _=a[p];if(h[_]){c.push(_);h[_]=2}else{s.push(_)}}for(p=0,f=l.length;p<f;++p){if(h[l[p]]===1){u.push(l[p])}}var A=u.concat(a);var b=r.ctrlKeyPressed;var x=[];var D=[];var C=false;if(r.deselection===true){x=s;D=c;C=true}else{if(n===d.SINGLE){if(m===o.SELECTION_BEHAVIOR.CATEGORY&&c.length&&a.length!==l.length){x=l;D=s}else{if(c.length&&a.length===l.length){C=true}x=u;D=a}}else if(!b&&n===d.EXCLUSIVE){x=l;D=s}else if(!b&&n===d.INCLUSIVE){x=A}else if(b||n===d.MULTIPLE){if(!r.deselectable||u.length){x=A}else{x=s;D=c;C=true}}}this._fireEventForProcessSelection(i,D,x,u,r.fireEvents);i.setStatus("selectedDataPoints",x);S(i);if(i.getProperties().get("interaction.enableInternalEvents")){this._fireSelectionDetails(i,x,y)}var T={isDeselect:C,ctrlKey:b};return T};D.prototype.processHighlight=function(t,i){if(!i.isTrellis()&&!i.isDisableSyncHightlight()){if(i.isBigDataMode()){var a=i.getStatus("selectedDataPoints");if(!a.length){i.fireEvent("clearPlot",{isGray:!i.getStatus("rangeSelection"),rangeSelection:i.getStatus("rangeSelection")})}}var r=e.turnToArray(t.data.targets);if(r&&r.length>0){i.fireEvent("hoverOnDataPoint",{targets:this._getNodes(r,i)});i.setStatus("highlightedDataPoints",r)}}};D.prototype.processUnhighlight=function(e,t){t.fireEvent("cleanAxisHoverEffect");t.fireEvent("cleanLegendHoverEffect");t.fireEvent("cleanMBCHoverEffect");if(!t.isTrellis()&&!t.isDisableSyncHightlight()){if(t.isBigDataMode()){var i=t.getStatus("selectedDataPoints");if(!i.length){t.fireEvent("clearPlot")}}var a=t.getStatus("highlightedDataPoints");if(a&&a.length>0){if(a&&a.length){t.fireEvent("unhoverOnDataPoint",{targets:this._getNodes(a,t)})}t.setStatus("highlightedDataPoints",[])}}};D.prototype._fireSelectionDetails=function(e,t,i){var a=function(e,t){for(var i=0;e&&i<e.length;++i){if(e[i].id===t){return e[i]}}return null};var r=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){var r=a(e[i],t);if(r){return{role:i,metaData:r}}}}return null};var o=e.getDataModel();var d=o&&o.getBindingMetaData();var f=o&&o.context()&&o.context().metaData;var S=e.getStatusManager().get("data.unit");var D=e.getSemanticManager();var w;if(i){w=e.getProperties().get("plotArea.dataLabel.recapTitle")||p.get("IDS_END_OF_PERIOD")}var T=this;var z=t.map(function(t){var p=o&&o.getDataPoint(t);if(!p){return{data:null,displayData:[]}}var z=l.clone(p.context());var L=D.analyzeDataPoint("color,lineColor,lineType,pattern",z,true,p.additionCtx());var P=L&&L.dataName||{};var k=z[v];delete z[v];var E=[],I=[],O=[],R=[],N=[],M=[];for(var B in z){if(z.hasOwnProperty(B)&&B!==g){var V=r(d,B)||{metaData:{}};var F=null,H=V.role,U,W,G=false,Y=null,X=V.metaData.type,j=V.metaData.name;if(X===m){if(H===b){continue}else if(H===_){F=E;W=z[B+n.DIMENSION_PARSED_VALUE_SUFFIX];U=z[B]}else{if(H===A){F=I}else{F=O}U=z[B+n.DIMENSION_DISPLAYNAME_SUFFIX]||z[B]}}else if(X===y){F=R;U=z[B];z[B]=U==null?U:+U;if(B===k&&z.hasOwnProperty(x)){Y={value:U,percentage:z[x]}}}else{V=a(f,B)||{};j=V.name;if(!V.showInTooltip){continue}G=true;X=V.type;if(X===m){F=N;U=z[B+n.DIMENSION_DISPLAYNAME_SUFFIX]||z[B]}else{F=M;U=z[B]}}if(F){F.push({id:B,label:P[B]||j||B,value:U,"value.d":W,type:X,formatString:V.formatString,unit:S[B],unbound:G,bothValue:Y})}}}var Z,q=e.getModule("main.plot");if(e.isBigDataMode()){Z=q.mappingDataPointInfo(t).graphic}else{if(q){var K=q.getSeriesIndex(p);var Q=p.address(p.addressType.CATEGORY);var $=q.getSeries();if($&&$[K]){var J=$[K].getDataPoints();if(J&&J[Q]){Z=J[Q].getData()}if(!Z){var ee;for(var te=0;te<J.length;te++){ee=J[te];if(ee&&ee.getData&&ee.getData()){Z=ee.getData();break}}}}}if(!Z){var ie=T._getNodes([t],e)[0];if(ie){Z=h.getData(ie)}}}if(i){var ae=Z.recap;if(ae){var re=e.getDataModel().valueAxis().metaData[0];R.push({id:re.id,label:w,value:ae.value,"value.d":ae.value,type:y,formatString:re.formatString,unit:S[re.id],unbound:false})}}var oe=E.concat(I).concat(O).concat(N).concat(M).concat(R);var ne=e.getProperties();if(E.length>0){var le=E.map(function(e,t){return t});oe.timeDimensions=le;var se=ne.get("tooltip.applyTimeAxisFormat");var ue=ne.get("tooltip.formatString");var ce=e.getModule("main.timeAxis");var he=o.timeAxis().metaData[0].id;se=se&&!(s.isExist(ue)&&s.isExist(ue[he]));c.processDateFormat.call(null,oe,se,ce)}var pe=function(e){return Object.keys(e).reduce(function(t,i){if(C.indexOf(i)!==-1){t[i]=e[i]}return t},{})};oe=u.format({data:oe},ne,e,true).data.map(function(e){var t,i=e.timeAxis&&e.timeAxis.getFiscalUnitLabels&&e.timeAxis.getFiscalUnitLabels();if(i&&i.length>0){t=i.map(function(t,i){var a=pe(e);a.label=t;a.value=i===0?e.value.fiscalyear:e.value.fiscalperiod;return a})}else{t=pe(e)}return t});var de=[];oe.forEach(function(e){if(s.isArray(e)){de=de.concat(e)}else{de.push(e)}});return{data:z,displayData:de,graphicInfo:u.buildEventGraphicInfo(e,Z,L)}});e.fireExternalEvent("_selectionDetails",{name:"_selectionDetails",data:z})};D.prototype._fireEventForProcessSelection=function(e,t,i,a,r){if(t.length){e.fireEvent("deselectDataPoint",{targets:this._getNodes(t,e),isAnyOtherSelected:i.length>0})}if(i.length){e.fireEvent("selectDataPoint",{targets:this._getNodes(i,e)})}else{e.fireEvent("clearPlot",{isGray:false})}if(r!==false){if(a.length){e.fireEvent("dispatchDataEvent",{targets:a,isSelected:true})}if(t.length){e.fireEvent("dispatchDataEvent",{targets:t,isSelected:false})}}};function T(e,t,i,a){var o,n;if(t){o=r.Event.SelectData.name;n="selectData"}else{o=r.Event.DeSelectData.name;n="deselectData"}var l={name:o,data:i,type:a};if(t&&e.getStatus("rangeSelection")){var s=e.getStatus("rangeDomain");var u=e.getDataModel();var c=u._timeAxis.metaData[0].id;var h={},p={};h[c]=s[0];p[c]=s[1];l.dateTimeRange={start:h,end:p}}e.fireExternalEvent(n,l)}D.prototype.dispatchDataEvent=function(e,t){var i=e.data.targets;var a=this._buildEventData(i,t);var r=e.data.isSelected;T(t,r,a,"dataPoint")};D.prototype.dispatchRangeDataEvent=function(e,t){var i=e.data.targets;var a,r;if(t.isBigDataMode()){a=L(i,t);r="range"}else{a=this._buildEventData(i,t);r="dataPoint"}var o=e.data.isSelected;T(t,o,a,r)};D.prototype._buildEventData=function(e,t){var i=t.getDataModel();var r=t.getNodes(t.NodeType.DATA_POINT,false);var o={};for(var n=r.length;n--;){var l=a.getDataPointId(r[n]);o[l]=r[n]}return e.map(function(e){var t=i.getDataPoint(e);return{target:o[e]||null,data:t.context()}})};D.prototype._getNodes=function(e,t){return a.getNodes(e,t)};D.prototype._hasDataPoint=function(e,i){return t.hasDataPoint(e,i)};function z(e,t){var i=[],a=[];var r,o;for(var n in t){if(t.hasOwnProperty(n)){if(e.horizontal.indexOf(n)!==-1||e.vertical.indexOf(n)!==-1){r=t[n];for(o=0;o<r.length;o++){i.push(r[o].id)}continue}r=t[n];for(o=0;o<r.length;o++){if(r[o].id==="measureNames"){continue}a.push(r[o].id)}}}return{axisDef:i,seriesDef:a}}function L(e,t){var i=t.getModule("main.plot");if(!i){return}var a=i.getAxisBinding();var r=t.getDataModel();var o=z(a,r.getBindingMetaData());var l=[],s=null,u;var c=null;var h=null;var p=o.axisDef;var d=o.seriesDef;e=e.slice().sort(function(e,t){return e-t});var f=[];for(u=0;u<e.length;u++){f.push(r.getDataPoint(e[u]))}for(u=0;u<f.length;u++){var v=f[u];var g=v.address(v.addressType.SERIES);if(u!==0&&(h!==v.id-1||c!==g)){l.push(s);s=null}var m=v.context();if(s==null){s={};d.forEach(function(e){s[e]=n.getContextValue(m,e)});p.forEach(function(e){var t=n.getContextValue(m,e);s[e]={min:t,max:t}})}else{p.forEach(function(e){var t=n.getContextValue(m,e);s[e].min=Math.min(t,s[e].min);s[e].max=Math.max(t,s[e].max)})}c=g;h=v.id}if(s!=null){l.push(s)}return l}return D});define("sap/viz/chart/behavior/config/RuntimeSelectionHelperConfig",["sap/viz/chart/behavior/config/handler/RuntimeSelectionHelperHandler","sap/viz/chart/behavior/config/HighlightHelper"],function(e,t){return[{id:"runtimeSelectionHelperDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"afterBehaviorLoaded",method:"initializedClearSelection"},{name:"beforeBehaviorUnloaded",method:"unloadedClearSelection"},{name:"afterChartRendered",method:"refreshedKeepSelection"},{name:"reRenderComplete",method:"reRenderKeepSelection"},{name:"click",excludeTargets:t.getDeselAllExTargets(),method:"deselectAll"},{name:"processMultipleSelectionTooltip",method:"processMultipleSelectionTooltip"},{name:"processSelection",method:"processSelection"},{name:"processHighlight",method:"processHighlight"},{name:"processUnhighlight",method:"processUnhighlight"},{name:"dispatchDataEvent",declaredEvents:["selectData","deselectData"],method:"dispatchDataEvent"},{name:"dispatchDataEvent",declaredEvents:["selectData","deselectData"],supportedChartTypes:["info/timeseries_line","info/timeseries_column","info/timeseries_stacked_column","info/timeseries_100_stacked_column","info/timeseries_watefall"],method:"dispatchRangeDataEvent"}]}]});define("sap/viz/chart/behavior/config/SelectionTreeUtil",["sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/interaction/Constants"],function(e,t,i,a){var r="measureNames";var o="*";var n={bindings:["color","color2"],selectionTree:"seriesSelectionTree",metaInfo:"seriesMetaInfo"};var l={bindings:["color","shape"],maxDimension:[1,1],selectionTree:"seriesSelectionTree",metaInfo:"seriesMetaInfo"};var s=null;var u={categoryAxis:{bindings:["categoryAxis"],selectionTree:"categorySelectionTree",metaInfo:"categoryMetaInfo"},categoryAxis2:{bindings:["categoryAxis2"],selectionTree:"category2SelectionTree",metaInfo:"category2MetaInfo"},series:n};function c(e,t,i,r,o,n){var l=e.getProperties().get("interaction.selectability");var s=l.mode?l.mode.toUpperCase():l.mode;var u=l.behavior?l.behavior.toUpperCase():l.behavior;var c;if(u===a.SELECTION_BEHAVIOR.CATEGORY){c=g(r,n);if(!o){p(i,c,n,0)}else{d(i,c,n,0)}e.setStatus(t,i)}else if(u===a.SELECTION_BEHAVIOR.SERIES){c=g(r,n);if(!o){p(i,c,n,0)}else{d(i,c,n,0)}e.setStatus(t,i)}}function h(e,t,i){var r=e.getProperties().get("interaction.selectability");var o=t.mode||(r.mode?r.mode.toUpperCase():r.mode);var n=r.behavior?r.behavior.toUpperCase():r.behavior;var l;if(t.isDeselect){l=e.getStatus(i)}else{l=o===a.SELECTION_MODE.EXCLUSIVE&&!t.ctrlKey||o===a.SELECTION_MODE.SINGLE&&!t.isDeselect?{}:e.getStatus(i)}return l}function p(e,t,i,a){if(!i[a]){return}var r=i[a].id;var o;if(t.hasOwnProperty(r)){o=t[r]&&t[r]["in"]?t[r]["in"]:[t[r]]}else{o=i[a].values}if(!e.children){e.children=[]}for(var n=0;n<o.length;++n){var l=o[n];for(var s=0;s<e.children.length;++s){if(e.children[s].value===l){break}}var u;if(s<e.children.length){p(e.children[s],t,i,a+1);u=e.children[s]}else{u={dimension:r,maxChildren:i[a+1]?i[a+1].values.length:0,value:l,children:[]};e.children.push(u);p(u,t,i,a+1)}}}function d(e,t,i,a){if(!i[a]){return true}var r=i[a].id;var o;if(t.hasOwnProperty(r)){o=t[r]["in"]?t[r]["in"]:[t[r]]}else{o=i[a].values}for(var n=0;n<o.length;++n){var l=o[n];if(!e.children){return}for(var s=0;s<e.children.length;++s){if(e.children[s].value===l){if(d(e.children[s],t,i,a+1)){e.children.splice(s,1)}break}}if(e.children.length===0){return true}}}function f(t,i,a){for(var r=0;r<t.children.length;++r){var o=t.children[r];var n=e.clone(a);n[o.dimension]=o.value;if(o.children.length===0){i.push({data:n})}else{f(o,i,n)}}}function v(e,i){var a=[];for(var o=0;o<e.length;++o){var n={},l=false;n.id=e[o].id;n.type=e[o].type;if(i[o].some(function(e){return e===null})){l=true}n.values=i[o]?t.unique(i[o],function(e){return e?e.toString():false}):[];if(l){n.values.push(null)}if(e[o].hidden){n.hidden=true}if(n.id===r&&n.values.length<2&&e.length>1){continue}a.push(n)}return a}function g(t,i){var a=i.filter(function(e){return e.id==="measureNames"})[0];if(a){var o=[];var n=e.clone(t);for(var l in n){if(n.hasOwnProperty(l)){if(a.values.indexOf(l)>-1){delete n[l];o.push(l)}}}if(o.length){n[r]={in:o}}return n}else{return t}}function m(e,t,i,r){var o,n;var l={};if(i===a.SELECTION_BEHAVIOR.CATEGORY){n="categoryAxis";o=t.getStatus(u[n].metaInfo);l[n]=y(e,o);l[n]=_(l[n],o);n="categoryAxis2";o=t.getStatus(u[n].metaInfo);l[n]=y(e,o);l[n]=_(l[n],o)}else if(i===a.SELECTION_BEHAVIOR.SERIES){n="series";o=t.getStatus(u[n].metaInfo);l[n]=y(e,o)}else{return e}if(l[n]&&r){A(l[n],o)}return l}function y(t,a){var r=null;if(a){var o=a.filter(function(e){return e.id==="measureNames"})[0];var n=e.clone(t);for(var l in n){if(n.hasOwnProperty(l)){var s=a.filter(function(e){return e.id===l});if(s.length===0){if(!o||o.values.indexOf(l)<0){delete n[l]}else{n[l]="*"}}}}if(!i.isEmptyObject(n)){r=n}}return r}function _(t,a){var r=e.clone(t);if(!a||!r){return null}a.forEach(function(e){if(e.hidden){delete r[e.id]}});return i.isEmptyObject(r)?null:r}function A(e,t){for(var i=0;i<t.length;++i){var a=t[i];if(!e[a.id]){e[a.id]=a.values[0]}}}function b(e){var t=e.getDataModel()&&e.getDataModel().chartType?e.getDataModel().chartType():null;switch(t){case"info/bubble":case"info/scatter":case"info/timeseries_bubble":case"info/timeseries_scatter":u.series=l;break;case"info/heatmap":case"info/treemap":u.series=s;break;default:u.series=n}}function x(e){if(e._dataModelMgr&&e.getDataModel()){var t=e.getDataModel();b(e);for(var a in u){if(u.hasOwnProperty(a)&&u[a]){var r=u[a].bindings;var o=[],n=[];for(var l=0;l<r.length;++l){var s=t[r[l]];if(s&&!i.isEmptyObject(s())){var c=s();var h=c.metaData;var p=c.values;if(h&&p){var d=u[a].maxDimension;var f=d?d[l]||h.length:h.length;var g;for(var m=0;m<f;++m){for(var y=0;y<o.length;++y){if(o[y].id===h[m].id){if(p[m]){if(p[m][0]&&p[m][0].v){g=p[m].map(function(e){return e&&e.v})}else{g=p[m]}n[y]=n[y].concat(g)}break}}if(y===o.length){o.push(h[m]);if(p[m]){if(p[m][0]&&p[m][0].v){g=p[m].map(function(e){return e&&e.v})}else{g=p[m]}n.push(g)}}}}}}if(o.length&&n.length){var _=v(o,n);e.setStatus(u[a].selectionTree,{});e.setStatus(u[a].metaInfo,_)}}}}}function S(e,t){var i=e.getProperties().get("interaction.selectability.behavior");i=i?i.toUpperCase():i;var r=e.getDataModel().chartType();var o=false;if(t==="DATAPOINT"){if(i===a.SELECTION_BEHAVIOR.SERIES){if(e.getStatus("seriesMetaInfo")&&r.indexOf("bullet")<=-1&&r.indexOf("timeseries_waterfall")<=-1&&r!=="info/heatmap"){o=true}}else if(i===a.SELECTION_BEHAVIOR.CATEGORY){if(e.getStatus("categoryMetaInfo")||r==="info/heatmap"&&e.getStatus("categoryMetaInfo")&&e.getStatus("category2MetaInfo")){o=true}}else{o=true}}else if(i===a.SELECTION_BEHAVIOR.DATAPOINT){o=true}else if(i===t){if(!(i===a.SELECTION_BEHAVIOR.SERIES&&r.indexOf("waterfall")>-1)){o=true}}return o}function D(e,t){var i;if(t===a.SELECTION_BEHAVIOR.CATEGORY){i=u.categoryAxis.selectionTree;e.setStatus(i,{});i=u.categoryAxis2.selectionTree;e.setStatus(i,{})}else if(t===a.SELECTION_BEHAVIOR.SERIES){i=u.series.selectionTree;e.setStatus(i,{})}}return{getSelectionResult:f,filterDimension:y,applyDimensionalSelection:c,initSelectionTree:x,removeSelectionTree:d,getSelectionTree:h,applyFilterDimension:m,bindingConfig:u,isSelectable:S,emptySelectionTree:D}});define("sap/viz/chart/behavior/config/handler/SelectionAPIHandler",["sap/viz/framework/interaction/Constants","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/chart/behavior/config/SelectionTreeUtil","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/behavior/config/ContextualDataUtil"],function(e,t,i,a,r,o,n,l,s,u,c){function h(i,r){r.fireEvent("hideDetail",{mode:"infoMode"});r.fireEvent("hideDetail",{mode:"actionMode"});var n=r.getProperties().get("interaction.selectability.behavior");var l=r.getProperties().get("interaction.selectability.mode");var u=l?l.toUpperCase():l;var h=n?n.toUpperCase():n;var p=i.options||{};var d;if(p.selectionMode){d=String(p.selectionMode).toUpperCase()}var f=false;for(var v in e.SELECTION_MODE){if(e.SELECTION_MODE.hasOwnProperty(v)&&v===d){f=true;break}}if(!f){if(p.hasOwnProperty("clearSelection")&&u!==e.SELECTION_MODE.NONE){d=p.clearSelection?e.SELECTION_MODE.EXCLUSIVE:e.SELECTION_MODE.INCLUSIVE;if(h!==e.SELECTION_BEHAVIOR.DATAPOINT){o.emptySelectionTree(r,h)}}else{d=u}}d=d?d.toUpperCase():d;if(d===e.SELECTION_MODE.NONE){i.success=false;return}var g=i.items;var m=[];var y=true;var _,A;var b={};var x=[],S=[];if(d===e.SELECTION_MODE.RANGE){var D=r.getProperties().get("interaction.selectability.plotLassoMode");D=D?D.toUpperCase():D;var w=r.getProperties().get("interaction.selectability.plotLassoSelection");if(w&&D===e.SELECTION_MODE.RANGE&&a.isArray(g)&&g.length===2){var C=r.getDataModel(),T=C.dimensions(),z=C._timeAxis.metaData[0].id;_=g[0].data?new Date(g[0].data[z]).getTime():null;A=g[1].data?new Date(g[1].data[z]).getTime():null;if(a.isNaN(_)||a.isNaN(A)){i.success=false;return}var L=[{data:{}}];if(_>A){var P=_;_=A;A=P}var k=r.getExtendTimeRange();if(_>k[1]||A<k[0]){i.success=false;return}_=Math.max(_,k[0]);A=Math.min(A,k[1]);L[0].data[z]={min:_,max:A};m=this._getTargets(L,r)}else{i.success=false;return}}else if(a.isArray(g)&&g.length){if(r.getProperties().get("interaction.behaviorType")===e.BEHAVIOR.NOHOVER_BEHAVIOR_ID&&h!==e.SELECTION_BEHAVIOR.DATAPOINT){y=false;if(o.isSelectable(r,"DATAPOINT")){var E=false;if(u===e.SELECTION_MODE.SINGLE&&h===e.SELECTION_BEHAVIOR.SERIES){E=true}for(var I=0;I<g.length;++I){var O=o.applyFilterDimension(g[I].data,r,h,E);var R;var N;if(O){for(var M in O){if(O.hasOwnProperty(M)&&O[M]){R=this._getTargets([{data:O[M]}],r);if(R.length>0){if(m.length===0){x=R;S[M]=[];S[M].push(O[M])}m=m.concat(R);y=true;b[M]=b[M]||[];b[M].push(O[M])}}}}}m=s.unique(m)}}else{m=this._getTargets(g,r);y=m.length>0}}i.success=y;if(y){var B=r.getProperties().get("interaction.selectByTimeAxisGroup");if(B){var V=[];m.forEach(function(e){if(V.indexOf(e)===-1){var i=r.getNodes(r.NodeType.DATA_POINT_GROUP,false)[0];var a=t.findByDataPointId(i,e);var o=c.getDataPointsByTimeField(a,r).map(function(e){return t.getDataPointId(e)});V=V.concat(o)}});if(V.length>0){m=s.unique(V)}}if(r.getStatus("rangeSelection")||d===e.SELECTION_MODE.RANGE){r._actionLayer.clear();r.setStatus("rangeSelection",false);var F=r.getStatus("selectedDataPoints");if(F&&F.length>0){r.setStatus("selectedDataPoints",[]).fireEvent("clearPlot");if(p.deselection===true){r.fireEvent("dispatchDataEvent",{targets:F,isSelected:false}).fireEvent("deselectDataPoint",{targets:t.getNodes(F,r),isAnyOtherSelected:false});return}else{r.fireEvent("deselectDataPoint",{targets:t.getNodes(F,r),isAnyOtherSelected:m.length>0})}}}if(d===e.SELECTION_MODE.RANGE){r.setStatus("rangeDomain",[_,A]);r.fireEvent("rangeRecover");if(m.length>0){r.fireEvent("processSelection",{targets:m,mode:e.SELECTION_MODE.EXCLUSIVE})}}else{r.setStatus("rangeDomain",null);if(u===e.SELECTION_MODE.SINGLE&&h!==e.SELECTION_BEHAVIOR.DATAPOINT){b=S;m=x}r.fireEvent("processSelection",{ctx:b,targets:m,deselection:p.deselection,mode:d,fireEvents:p.fireEvents})}}}function p(t){var i=t.getStatus("selectedDataPoints");var r=a.isArray(i)&&i.length?this._buildGetSelectionResult(i,t):[];var n=t.getProperties().get("interaction.selectability.plotLassoMode");if(n&&n.toUpperCase()===e.SELECTION_MODE.RANGE){var l=t.getProperties().get("interaction.selectability.mode");l=l?l.toUpperCase():l;if(l!==e.SELECTION_SINGLE&&l!==e.SELECTION_NONE){var s=t.getStatus("rangeDomain");var u=t.getDataModel(),c=u.dimensions(),h=u._timeAxis.metaData[0].id;r.dateTimeRange=s&&s.length===2&&h?{start:{},end:{}}:null;if(r.dateTimeRange){r.dateTimeRange.start[h]=s[0];r.dateTimeRange.end[h]=s[1]}}}var p=t.getProperties().get("interaction.selectability.behavior");var d=p?p.toUpperCase():p;if(t.getProperties().get("interaction.behaviorType")===e.BEHAVIOR.NOHOVER_BEHAVIOR_ID&&d!==e.SELECTION_BEHAVIOR.DATAPOINT){var f;var v=[];if(d===e.SELECTION_BEHAVIOR.CATEGORY){f=t.getStatus("categorySelectionTree");if(!a.isEmptyObject(f)&&f){o.getSelectionResult(f,v,{})}f=t.getStatus("category2SelectionTree");if(!a.isEmptyObject(f)&&f){var g=[];o.getSelectionResult(f,g,{});r.category=v.concat(g)}else{r.category=v}}else if(d===e.SELECTION_BEHAVIOR.SERIES){f=t.getStatus("seriesSelectionTree");if(!a.isEmptyObject(f)&&f){o.getSelectionResult(f,v,{})}r.series=v}}return r}var d=function(){};d.prototype.initialize=function(t,i){if(i.getProperties().get("interaction.behaviorType")===e.BEHAVIOR.NOHOVER_BEHAVIOR_ID){o.initSelectionTree(i)}var a=this;i.getStatusManager().add("interaction.selectedDataPoints",{serializable:false,set:function(e){h.call(a,e||{},i)},get:function(){return p.call(a,i)}})};d.prototype._getTargets=function(e,t){return r.getTargets(e,t)};d.prototype._buildGetSelectionResult=function(e,t){var a,r=[],o=[],l=t.getDataModel(),s=t.getSemanticManager();if(l&&l.timeAxis&&l.timeAxis()){a=l.timeAxis().metaData.map(function(e){return e.id})}if(l&&l._rawData&&l._rawData.data()){var u=l._rawData.data().metadata;if(u&&u.fields){r=u.fields.filter(function(e){return e.semanticType==="Measure"});o=u.fields.filter(function(e){return e.semanticType==="Dimension"})}}return e.map(function(e){var t=l.getDataPoint(e);var u=i.clone(t.context());delete u["measureNames"];delete u["_id"];delete u[a+n.DIMENSION_PARSED_VALUE_SUFFIX];var c={data:u};var h=s.analyzeDataPoint("color,lineColor,lineType,pattern",t.context(),true,t.additionCtx());var p=h&&h.dataName||{};r.forEach(function(e){var t=e.id;if(u.hasOwnProperty(t)&&e.hasOwnProperty("unit")){c.unit=c.unit||{};c.unit[t]=e.unit}if(c.data[t]!=null){c.data[t]=+c.data[t]}if(p.hasOwnProperty(t)){c.dataName=c.dataName||{};c.dataName[t]=p[t]}});o.forEach(function(e){var t=e.id;if(p.hasOwnProperty(t)){c.dataName=c.dataName||{};c.dataName[t]=p[t]}});return c})};return d});define("sap/viz/chart/behavior/config/SelectionAPIConfig",["sap/viz/chart/behavior/config/handler/SelectionAPIHandler"],function(e){return[{id:"selectionAPIDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"afterBehaviorLoaded",method:"initialize"}]}]});define("sap/viz/chart/behavior/config/PinchBehaviorConfig",["sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/ScrollbarUtil","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/plots/PlotGeometryKeeper","sap/viz/framework/interaction/Constants"],function(e,t,i,a,r){var o=["info/bar","info/column","info/dual_bar","info/dual_column","info/stacked_bar","info/stacked_column","info/dual_stacked_bar","info/dual_stacked_column","info/100_stacked_bar","info/100_stacked_column","info/100_dual_stacked_bar","info/100_dual_stacked_column","info/line","info/horizontal_line","info/dual_line","info/dual_horizontal_line","info/combination","info/combinationEx","info/horizontal_combination","info/stacked_combination","info/horizontal_stacked_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination","info/bullet","info/vertical_bullet","info/mekko","info/100_mekko","info/horizontal_mekko","info/100_horizontal_mekko","info/dual_combination","info/dual_horizontal_combination","info/area","info/horizontal_area","info/100_area","info/100_horizontal_area","info/waterfall","info/stacked_waterfall","info/horizontal_waterfall","info/horizontal_stacked_waterfall"],n=["info/bubble","info/scatter","info/time_bubble","info/timeseries_bubble","info/timeseries_scatter"],l=["info/timeseries_waterfall","info/timeseries_line","info/timeseries_column","info/timeseries_stacked_column","info/timeseries_100_stacked_column","info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_combination","info/timeseries_bullet"];var s=o.concat(n,l);function u(e){var t=e.getModule("main"),i=t.getHScrollbar(),a=t.getVScrollbar(),r="";if(i&&i.isExist){r+="x"}if(a&&a.isExist){r+="y"}return r}function c(e,t){if(!i.isMobile()){return null}var a=t.getModule("main"),r=e.data.scale,o=t.getStatus("ratioBeforePinch");return a.getZoomer().zoom({x:o.x*r,y:o.y*r},e.data.point)}function h(e,t){var i=t.getModule("main.plot");t.setStatus("canvasBBox",i.getSize());t.fireEvent(e,true)}var p=2;var d=r.RANGE_SELECTION.OFFSET;function f(e,t,i,a){var r=false,o=i.getModule("main").getHScrollbar(),n=i.getModule("main").getVScrollbar(),l=o?o._isFull():true,s=n?n._isFull():true,u=o?o.isThumbOverTrack(-e):true,c=n?n.isThumbOverTrack(-t):true,h=false;switch(a){case"x":h=Math.abs(e)<p&&t!==0;r=l||u;break;case"y":h=Math.abs(t)<p&&e!==0;r=s||c;break;case"xy":r=l&&s||u&&c||l&&c||u&&s;break}return h||r}function v(e,a){if(!i.isMobile()){return}if(a.getStatus("dragAsLasso")){a.fireEvent({name:"lassomove",data:e.data});return}var r=a.getStatus("panLastPoint");if(!r){return}var o=e.data.point,n=u(a),l=o.x-r.x,s=o.y-r.y,c=a.getStatusManager().get("plot.transform.translate"),h={x:c.x+l,y:c.y+s},p=f(l,s,a,n);a.setStatus("panLastPoint",o);a.getStatusManager().set("plot.transform.translate",h);if(!p&&e.data.originalEvent.cancelable){e.data.originalEvent.preventDefault()}else if(i.isWindowsSurface()||i.isWindowsPhone()){window.scrollBy(-l,-s)}t.showScrollbar(a);a.setStatus("needToPreventDefault",!p)}return[{id:"initialized_pinch",triggerEvent:{name:"afterChartRendered",supportedChartTypes:s},handler:h},{id:"pinchstart_on_eventLayer",triggerEvent:{name:"pinchstart",targets:"v-m-root",supportedChartTypes:s},handler:function(e,t){if(i.isMobile()){t.setStatus("ratioBeforePinch",t.getStatusManager().get("plot.transform.scale"));return c(e,t)}else{return null}}},{id:"pinchmove_on_eventLayer",triggerEvent:{name:"pinchmove",targets:"v-m-root",supportedChartTypes:s},handler:c},{id:"pinchend_on_eventLayer",triggerEvent:{name:"pinchend",targets:"v-m-root",supportedChartTypes:s},handler:c},{id:"2Xfingertouch_show_indicator",triggerEvent:{name:"touchchange",targets:"v-m-root",supportedChartTypes:s},handler:function(e,a){if(!i.isMobile()||e.data.totalTouchesNumber!==2){return}a.fireEvent("hideDetail",{mode:"actionMode"});t.showScrollbar(a,true)}},{id:"pan_start_on_plot_pinch",triggerEvent:{name:"dragstart",targets:["v-m-plot","v-m-action-layerrange-content","v-m-datapoints"],supportedChartTypes:s},handler:function(e,a){if(!i.isMobile()){return}if(a.getStatus("rangeSelection")){var r=a.getBBox(a.BoxType.RANGE_SELECTION);if(r){var o=e.data.point;if(o.x>=r.left-d&&o.x<=r.right+d&&o.y>=r.top&&o.y<=r.bottom){a.setStatus("dragAsLasso",true);a.fireEvent({name:"lassostart",data:e.data});return}}}a.fireEvent("hideDetail",{mode:"actionMode"});a.setStatus("panLastPoint",e.data.point);if(a.getStatus("needToPreventDefault")&&e.data.originalEvent.cancelable){e.data.originalEvent.preventDefault()}t.showScrollbar(a)}},{id:"pan_move_on_plot_pinch",triggerEvent:{name:"dragmove",targets:["v-m-plot","v-m-action-layerrange-content","v-m-datapoints"],supportedChartTypes:s},handler:v},{id:"pan_end_on_plot_pinch",triggerEvent:{name:"dragend",targets:["v-m-plot","v-m-action-layerrange-content","v-m-datapoints"],supportedChartTypes:s},handler:function(e,t){if(!i.isMobile()){return}if(t.getStatus("dragAsLasso")){t.fireEvent({name:"lassoend",data:e.data});t.removeStatus("dragAsLasso");return}if(t.getStatus("needToPreventDefault")&&e.data.originalEvent.cancelable){e.data.originalEvent.preventDefault()}t.removeStatus("panLastPoint");a.scroll.save(t)}}]});define("sap/viz/chart/behavior/config/TooltipBehaviorConfig",["sap/viz/chart/behavior/config/handler/TooltipBehaviorHandler"],function(e){return[{id:"tooltipBehaviorDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"standAloneInitialized",method:"standAloneInitialized"},{name:"afterBehaviorLoaded",method:"initialized"},{name:"beforeBehaviorUnloaded",method:"unloadedClear"},{name:"afterChartRendered",method:"refreshedTooltip"},{name:"showDetail",method:"showDetail"},{name:"hideDetail",method:"hideDetail"},{name:"showTooltipHoverOnPlot",method:"showTooltipHoverOnPlot"},{name:"hideTooltipHoverOnPlot",method:"hideTooltipHoverOnPlot"},{name:"showTooltipClickBigData",method:"showTooltipClickBigData"},{name:"hideTooltipClickBigData",method:"hideTooltipClickBigData"},{name:"extractTooltipData",method:"extractTooltipData"},{name:"extractTooltipData",supportedChartTypes:["info/100_stacked_bar","info/100_stacked_column","info/100_dual_stacked_bar","info/100_dual_stacked_column","info/trellis_100_stacked_bar","info/trellis_100_stacked_column","info/trellis_100_dual_stacked_bar","info/trellis_100_dual_stacked_column","info/100_area","info/100_horizontal_area","info/trellis_100_area","info/trellis_100_horizontal_area"],method:"extractTooltipDataPercentage"},{name:"extractTooltipData",supportedChartTypes:["info/pie","info/donut","info/trellis_pie","info/trellis_donut"],method:"extractTooltipDataPie"},{name:"extractTooltipData",supportedChartTypes:["info/time_bubble"],method:"extractTooltipDataTimebubble"},{name:"extractTooltipData",supportedChartTypes:["info/100_mekko","info/100_horizontal_mekko"],method:"extractTooltipDataPercentageMekko"},{name:"extractTooltipData",supportedChartTypes:["info/timeseries_line","info/timeseries_column","info/timeseries_stacked_column","info/timeseries_scatter","info/timeseries_bubble","info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_combination","info/timeseries_bullet"],method:"extractTooltipDataTimeLine"},{name:"extractTooltipData",supportedChartTypes:["info/waterfall","info/stacked_waterfall","info/horizontal_waterfall","info/horizontal_stacked_waterfall"],method:"extractTooltipDataWaterfall"},{name:"extractTooltipData",supportedChartTypes:["info/combination","info/horizontal_combination","info/stacked_combination","info/horizontal_stacked_combination","info/dual_combination","info/dual_horizontal_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination"],method:"extractTooltipDataCombination"},{name:"extractTooltipData",supportedChartTypes:["info/combinationEx","info/trellis_combinationEx"],method:"extractTooltipDataComboEx"},{name:"extractTooltipData",supportedChartTypes:["info/timeseries_100_stacked_column"],method:"extractTooltipDataTimeStackedColumnPercentage"},{name:"extractTooltipData",supportedChartTypes:["info/timeseries_waterfall"],method:"extractTooltipDataTimeWaterfall"}]}]});define("sap/viz/chart/behavior/config/ZoomBehaviorConfig",["sap/viz/framework/interaction/utils/PlotZoomUtils","sap/viz/chart/components/plots/PlotGeometryKeeper","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants"],function(e,t,i,a){var r=["info/100_dual_stacked_bar","info/100_dual_stacked_column","info/100_stacked_bar","info/100_stacked_column","info/bar","info/bullet","info/vertical_bullet","info/column","info/combination","info/combinationEx","info/dual_combination","info/dual_bar","info/dual_column","info/dual_stacked_bar","info/dual_stacked_column","info/horizontal_combination","info/dual_horizontal_combination","info/stacked_bar","info/stacked_column","info/stacked_combination","info/horizontal_stacked_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination","info/dual_horizontal_line","info/dual_line","info/horizontal_line","info/line","info/scatter","info/bubble","info/time_bubble","info/timeseries_line","info/timeseries_column","info/timeseries_stacked_column","info/timeseries_100_stacked_column","info/timeseries_bubble","info/timeseries_scatter","info/timeseries_combination","info/timeseries_bullet","info/dual_timeseries_combination","info/timeseries_stacked_combination","info/timeseries_waterfall","info/waterfall","info/stacked_waterfall","info/horizontal_stacked_waterfall","info/horizontal_waterfall","info/area"];var o=["stroke","stroke-opacity","stroke-width","fill","fill-opacity"];return[{id:"restore_size_and_position_on_render",triggerEvent:{name:"afterChartRendered"},handler:function(e,i){var a=i.getProperties();if(a.get("plotArea.scrollbar.visible")===false){i.setStatus("plotArea.window",[]);return}if(a.get("plotArea.isFixedDataPointSize")===false&&a.get("interaction.zoom.enablement")!=="enabled"&&!a.get("plotArea.window.start")&&!a.get("plotArea.window.end")){return}if(t.hasRangeChange(i)){i.setStatus("plotArea.window",i.getStatusManager().get("plotArea.window"));t.size.save(i);t.scroll.save(i)}else{t.size.load(i);t.scroll.load(i)}}},{id:"discard_saved_zoom_onscalechange",triggerEvent:{name:"scalesUpdated"},handler:function(e,i){if(e.data instanceof Array&&e.data.some(function(e){return e.feed!=="color"&&e.feed!=="shape"})){t.size.clear(i);t.scroll.clear(i)}}},{id:"discard_saved_zoom_ondatachange",triggerEvent:{name:"dataUpdated"},handler:function(e,i){t.size.clear(i);t.scroll.clear(i)}},{id:"discard_saved_zoom",triggerEvent:{name:"discardSavedZoom"},handler:function(e,i){t.size.clear(i);t.scroll.clear(i)}},{id:"save_zoom",triggerEvent:{name:"saveZoom",supportedChartTypes:r},handler:function(e,i){t.size.save(i);t.scroll.save(i)}},{id:"zoom_on_mousewheel_area_prezoom",triggerEvent:{name:"wheelmove",targets:["v-m-plot","v-m-action-layerrange"],supportedChartTypes:["info/combinationEx"]},handler:function(e,t){if(!e.data.originalEvent.ctrlKey){return}var a=[].slice.call(t.getNodes(t.NodeType.DATA_POINT,false)),r=a.filter(function(e){return i.getData(e).seriesType==="area"});t.setStatus("areaDpStyles",r.filter(function(e){return e.getAttribute("opacity")!=="0"}).map(function(e){var t=e.querySelector("path");return{dataId:e.getAttribute("data-id"),opacity:e.getAttribute("opacity"),pathAttrs:o.map(function(e){return t.getAttribute(e)})}}))}},{id:"zoom_on_mousewheel",triggerEvent:{name:"wheelmove",targets:["v-m-plot","v-m-action-layerrange","v-m-datapoints"],supportedChartTypes:r},handler:function(e,t){if(e.data.originalEvent.ctrlKey){t.getNodes(t.NodeType.LEGEND_GROUP).select(".v-m-highlight").remove();t.getNodes(t.NodeType.MAIN_NODE).select(".v-m-highlight").remove();var i=e.data.wheelDelta>0?"in":"out";var r=t.isBigDataMode();t.getModule("main").getZoomer().zoomInOut(i,e.data.point,a.ZOOM.DEFAULT_ZOOM_LEVEL_STEPS_MOSUSEWHEEL);e.data.originalEvent.preventDefault();var o=t.isBigDataMode();if(r&&!o){var n=t._getDecorationLayer();n.clear()}}}},{id:"zoom_on_mousewheel_area_rehighlight",triggerEvent:{name:"wheelmove",targets:["v-m-plot","v-m-action-layerrange"],supportedChartTypes:["info/combinationEx"]},handler:function(e,t){var i=t.getStatus("areaDpStyles");if(!e.data.originalEvent.ctrlKey||!i||!i.length){return}var a=t.getNodes(t.NodeType.DATA_POINT,false),r=[].reduce.call(a,function(e,t){e[t.getAttribute("data-id")]=t;return e},{});i.forEach(function(e){var t=r[e.dataId],i;if(t){t.setAttribute("opacity",e.opacity);i=t.querySelector("path");o.forEach(function(t,a){i.setAttribute(t,e.pathAttrs[a])})}});var n=t.getStatus("hoveringDataPoint");if(n){t.setStatus("hoveringDataPoint",r[n.getAttribute("data-id")])}t.removeStatus("areaDpStyles")}}]});define("sap/viz/chart/behavior/config/ScreenReaderUtil",["jquery","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/interaction/Constants"],function(e,t,i,a,r,o,n,l,s){var u="hours";var c="minutes";var h="senconds";var p=function(e,t){var i=e.rootContainer;if(i.attr("markARIAforNonInteractive")==="true"){return}i.attr("markARIAforNonInteractive","true");var a=t._getRenderType();var o=e.rootElement;var n=o.node();var l=e.chartAppId;var s=o.append("g").attr("class",r.CSS.CLASS.NONINTERACTIVEARIA);var u=i.attr("aria-labelledby");var c=n.querySelectorAll(".v-datapoint");u+=d(c,s,t,1,"DataPoint",l);var h;if(A(t)){h=n.querySelectorAll(".v-timeaxis-item")}else{var p=n.querySelector(".v-m-categoryAxis");h=p?p.querySelectorAll(".v-axis-item"):[]}u+=d(h,s,t,2,"Axis",l);var f=y(t)||_(t)?n.querySelectorAll(".v-mbc-legend-item"):n.querySelectorAll(".v-legend-item");u+=d(f,s,t,3,"Legend",l);var v=n.querySelector(".v-m-categoryAxis2");if(v){h=v.querySelectorAll(".v-axis-item");u+=d(h,s,t,4,"Axis2",l)}i.attr("aria-labelledby",u)};var d=function(e,t,i,a,r,o){if(e.length===0){return""}else{var n,l="";var s=A(i);for(var u=0;u<e.length;u++){l+=" "+g(i,e[u],s,a,true)}n=o+"-Aria"+r;t.append("g").attr("aria-label",l).attr("id",n);return" "+n}};var f=function(e,t){var i=t.rootContainer;var a=i.node();if(a.getAttribute("markARIAforNonInteractive")){var o=t.chartAppId;a.removeAttribute("markARIAforNonInteractive");a.setAttribute("aria-labelledby",o+"-title");var n=t.rootElement.node().querySelector("."+r.CSS.CLASS.NONINTERACTIVEARIA);if(n){n.parentNode.removeChild(n)}}};var v=function(e,t,i){g(e,t,i,null,false)};var g=function(e,s,p,d,f){d=d||e.getStatus("tabOrder");if(!f&&!m(e,d)){return}var v=s.getAttribute("data-datapoint-id");var g="";var _;var A;var b=e.getStatusManager().get("data.unit");switch(d){case 1:if(y(e)&&!v){g=" Category Axis Item "+g;g+=s.nextSibling.value;if(!f){d3.select(s).attr("role","option")}break}g=" Data Value "+g;if(e&&v){A=t.getContextByDataModel(s,e.getDataModel())}if(A){if(y(e)){delete A.level;delete A.levelNum;delete A.realLabelWidth}_=Object.keys(A);if(p){var x=e.getDataModel().measures();var S=e._dataModelMgr._bindings;var D=[],w=[];for(var C in S){if(x.indexOf(S[C].feed)!==-1){D=D.concat(S[C].source)}}var T=_.filter(function(e){if(D.indexOf(e)===-1){return e}else{w.push(e)}});_=T.concat(w)}var z={};var L=[];var P=[];var k=[];var E;_.forEach(function(e){if(/(\.d)$/.test(e)){L.push(e)}else{P.push(e)}});if(L.length>0){P.forEach(function(e){E=L.indexOf(e+".d");if(E>-1){L.splice(E,1)}});L.forEach(function(e){E=L.indexOf(e+".d");if(E>-1){L.splice(E,1)}})}k=P.concat(L);if(k.length!==_.length){_.forEach(function(e){if(k.indexOf(e)>-1&&_.indexOf(e+".d")>-1){z[e]=A[e+".d"]}else if(k.indexOf(e)>-1){z[e]=A[e]}});A=z;_=k}}if(!f){d3.select(s).attr("role","listitem")}break;case 2:case 4:g=(p?" Time Axis Item ":" Category Axis Item ")+g;g+=a.getContext(s).text;if(!f){d3.select(s).attr("role","option")}break;case 3:if(s.getAttribute("aria-posinset")==="1"){var I=e.getProperties();if(I.get("legend.title.visible")){g=" Legend title is "+e.getModule("legendGroup.legend").getLegendTitleText()+". "}}g=g+" Legend Item ";_=a.getContext(s).val;if(!o.isArray(_)){if(_==="N/A"){_=i.get("IDS_ISNOVALUE");g+=_}else{var O=a.getContext(s).ctx;var R=O.measureName;if(R){var N=O[R].min;var M=O[R].openmax;if(N===-Number.MAX_VALUE){g+=" below "+M}else if(M===Number.MAX_VALUE){g+=" above "+N}else{g+=N+" to "+M}}else{g+=_}}_=null}else{var B=[];_.forEach(function(e){if(!o.isString(e)&&o.isPlainObject(e)){B.push(e.d)}});_=B.length>0?B:_}if(!f){d3.select(s).attr("role","option").attr("tabindex","0")}break}var V=e.getProperties().get("interaction.selectByTimeAxisGroup");if(_){_.forEach(function(t){if(d!==3&&A){var a=A[t];if(!o.isExist(a)){a=i.get("IDS_ISNOVALUE")}if(t!==r.BINDING.MEASURE_NAMES&&t!==r.BINDING.CONTEXT_ID_NAME&&!/(\.parsedValue)$/.test(t)){var n=e.getModule("main.timeAxis");if(t.toLowerCase()===r.DATA_TYPE.DATE&&n){var l=false;var s=n.getFormatTimeValue(A.Date);if(e.getProperties().get("interaction.behaviorType")==="noHoverBehavior"){var p=new Date(a);g=s.day+" "+p.getHours()+" "+u+" "+p.getMinutes()+" "+c+" "+p.getSeconds()+" "+h+" "}else{if(e.getProperties().get("tooltip")){l=e.getProperties().get("tooltip").applyTimeAxisFormat}if(l){g=s.time===null?s.day+" ":s.time+" "+s.day+" "}else{var f=new Date(a);g=s.day+" "+f.getHours()+" "+u+" "+f.getMinutes()+" "+c+" "+f.getSeconds()+" "+h+" "}}}else{if(!V){if(b&&b[t]){g+=t+" "+a+b[t]+" "}else{g+=t+" "+a+" "}}}}}else{if(!o.isExist(t)){t=i.get("IDS_ISNOVALUE")}g+=t+" "}});if(V&&d===1){var F=e.getDataModel().color().metaData;var H=F?F.map(function(e){return e.id}):[];F=e.getDataModel().context().metaData;var U=F?F.filter(function(e){return e.showInTooltip&&e.type==="Dimension"}).map(function(e){return e.id}):[];H=H.concat(U);var W=e.getProperties().get("plotArea.dataLabel.recapTitle")||i.get("IDS_END_OF_PERIOD");var G=n.getDataPointsByTimeField(s,e);G.forEach(function(e){var t=a.getContext(e);var i="",o="";for(var n in t){if(t.hasOwnProperty(n)){if(n!==r.BINDING.MEASURE_NAMES&&n.toLowerCase()!==r.DATA_TYPE.DATE&&!/(\.parsedValue)$/.test(n)){if(H.indexOf(n)===-1){o+=n+" "+t[n]+" "}else{i+=t[n]+" "}}}}g+=i+o;var l=a.getData(e).recap;if(l){g+=W+" "+l.value}})}}if(!f&&d===1&&l.hasDataPoint(e.getStatus("selectedDataPoints"),v)){g=g+" is selected"}g+=". ";if(!f){d3.select(s).attr("aria-label",g).attr("focusable",true).style("outline","none");if(typeof s.focus==="function"){s.focus()}else{HTMLElement.prototype.focus.call(s)}}else if(d===3){g+=s.getAttribute("aria-posinset")+" of "+s.getAttribute("aria-setsize")+". "}return g};var m=function(e,t){var i=true;var a=e.getProperties().get("interaction.selectability");if(!a){i=false}else{var r=(a.mode||"").toUpperCase();var o=(a.behavior||"").toUpperCase();if(r===s.SELECTION_MODE.NONE){i=false}else{switch(t){case 1:i=a.plotStdSelection;break;case 3:if(!a.legendSelection||r===s.SELECTION_MODE.SINGLE&&o!==s.SELECTION_BEHAVIOR.SERIES){i=false}break;case 2:case 4:if(!a.axisLabelSelection||r===s.SELECTION_MODE.SINGLE&&o!==s.SELECTION_BEHAVIOR.CATEGORY){i=false}break}}}return i};var y=function(e){var t=e._getRenderType();return t.indexOf("treemap")>-1};var _=function(e){var t=e._getRenderType();return t.indexOf("heatmap")>-1};var A=function(e){var t=e._getRenderType();return t.indexOf("timeseries")>-1};return{clearNonInteractiveAria:f,setInteractiveScreenReaderDesc:v,setNonInteractiveScreenReaderDesc:p}});define("sap/viz/chart/behavior/config/ScreenReaderConfig",["sap/viz/chart/behavior/config/ScreenReaderUtil"],function(e){var t=[{id:"focus_chart_on_non_interactive_mode",triggerEvent:{name:"focusOnChart"},handler:function(t,i){e.clearNonInteractiveAria(i,t.data);var a=t.data.rootContainer.node();var r=i._propertyMgr.get("interaction.noninteractiveMode");if(r){a.onfocusin=function(){e.setNonInteractiveScreenReaderDesc(t.data,i)}}else if(a.onfocusin){a.onfocusin=null}}}];return t});define("sap/viz/chart/behavior/config/handler/KeyboardBehaviorHandler",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/ScrollbarUtil","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/interaction/utils/PlotZoomUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/lang/LangManager","sap/viz/chart/components/plots/PlotGeometryKeeper","sap/viz/framework/interaction/Constants","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/behavior/config/ScreenReaderUtil","sap/viz/chart/components/util/BoundingBoxUtils","sap/viz/chart/components/util/ChartTypeUtils"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y){var _=.05;var A=.95;var b="tabOrder";var x=r.DATAPOINT_NAVIGATOR;var S=r.CATEGORYAXIS_NAVIGATOR;var D=r.CATEGORYAXIS2_NAVIGATOR;var w=r.TIMEAXIS_NAVIGATOR;var C=r.LEGEND_NAVIGATOR;var T=r.COLORLEGEND_NAVIGATOR;var z=r.MBCLEGEND_NAVIGATOR;var L="parsedValue";var P="mainNode";var k="legendGroup";var E="plotNode";var I=i.CSS.CLASS.CATEGORY_BOUND_SELECTION;var O=i.CSS.CLASS.CATEGORY2_BOUND_SELECTION;var R=i.CSS.CLASS.TIME_BOUND_SELECTION;var N=i.CSS.CLASS.LEGEND_BOUND_SELECTION;var M=i.CSS.CLASS.PLOT_BOUND_SELECTION;var B=i.CSS.CLASS.LEGEND_ITEM_BOUND_SELECTION;var V=i.CSS.CLASS.AXIS_ITEM_BOUND_SELECTION;var F=i.CSS.CLASS.DATAPOINTHOVER;var H=i.CSS.CLASS.ZEROVALUEHOVER;var U=i.CSS.CLASS.ZERO_LINE_GROUP;var W=i.CSS.CLASS.STACK;var G="v-focusInside";var Y={RECT:2,LINE:1};var X=function(e){return e.getModule("legendGroup.legend").getScrollbar()};var j=function(e){var t=e.getModule("main");if(!t){return null}var i=e.isHorizontal();if(i===undefined){return null}if(i){return t.getVScrollbar()}else{return t.getHScrollbar()}};var Z=function(e,t,i,a){var r=null;var o=t.name;var n=t.data.originalEvent.altKey;if(n){switch(o){case"uparrow":r=e.upSeries(i);break;case"downarrow":r=e.downSeries(i);break;case"leftarrow":r=e.leftSeries(i);break;case"rightarrow":r=e.rightSeries(i);break}}else{switch(o){case"uparrow":var l=0;if(a){l=q(a).getOffset()}r=e.up(i,l);break;case"downarrow":r=e.down(i);break;case"leftarrow":r=e.left(i);break;case"rightarrow":r=e.right(i);break}}return r};function q(e){return e.getModule("main.plot")||e.getModule("plot")}function K(e){return e.getModule("main")||e.getModule("plot")}function Q(e,t,i,a,r,o){if(e.height!==t.height){i=i||{x:r.x};i.y=null;if(o){if(a.y+a.height+r.y>t.height){i.y=-(a.y+a.height-t.height*A)}else if(a.y+a.height+r.y<t.height*_){if(a.height>=t.height*(1-_)){i.y=-(a.y+a.height-t.height*A)}else{i.y=-(a.y-t.height*(1-A))}}}else{if(a.y+r.y>t.height*(1-_)){if(a.height>=t.height*(1-_)){i.y=-(a.y-t.height*(1-A))}else{i.y=-(a.y+a.height-t.height*A)}}else if(a.y+r.y<0){i.y=-(a.y-t.height*(1-A))}}}return i}function $(e,t,i,a,r,o){if(e.width!==t.width){i=i||{y:r.y};i.x=null;if(o){if(a.x+r.x<0){i.x=-(a.x-t.width*(1-A))}else if(a.x+r.x>t.width*(1-_)){if(a.width>t.width*(1-_)){i.x=-(a.x-t.width*(1-A))}else{i.x=-(a.x+a.width-t.width*A)}}}else{if(a.x+a.width+r.x<t.width*_){if(a.width>t.width*(1-_)){i.x=-(a.x+a.width-t.width*A)}else{i.x=-(a.x-t.width*(1-A))}}else if(a.x+a.width+r.x>t.width){i.x=-(a.x+a.width-t.width*A)}}}return i}function J(e,t,i,a,r){var o=q(t);var n=K(t);var l=o.getOffset();var s=o.getSize();var u=o.getRealSize();var c=null;var h=t._getRenderType().indexOf("bubble")>-1;var p=t._getRenderType().indexOf("scatter")>-1;var d={x:i.x,y:i.y,width:i.width,height:i.height};if(i.width===0||i.height===0){i.width=0;i.height=0}if(h||p){d=i}if(a==null&&i.r!=null){if(i.x<-l.x||i.x+i.r>-l.x+s.width||i.y<-l.y||i.y+i.r>-l.y+s.height){if(e==="leftarrow"){c={x:-i.x,y:null}}else if(e==="rightarrow"){c={x:s.width-i.x-i.width,y:null}}else if(e==="downarrow"){c={x:null,y:s.height-i.y-i.height}}else{c={x:null,y:-i.y}}}if(r.needAdjust){if(["rightarrow","leftarrow"].indexOf(e)!==-1){c=Q(u,s,c,i,l,true)}else{c=$(u,s,c,i,l,true)}}}else if(a===true){if(d.y<-l.y||d.y+d.height>s.height-l.y){if("downarrow"===e){var f=d.y+d.height-s.height;c={x:null,y:-f}}else{c={x:null,y:-d.y}}}if(r.needAdjust){c=$(u,s,c,i,l,r.isNegative)}}else{if(d.x<-l.x||d.x+d.width>s.width-l.x){if("rightarrow"===e){var v=d.x+d.width-s.width;c={x:-v,y:null}}else{c={x:-d.x,y:null}}}if(r.needAdjust){c=Q(u,s,c,i,l,r.isNegative)}}if(c){n.scroll(c);if(this._isTimeseries){var g=this[w];var m=t.getModule("main.timeAxis.axisBody").getActiveLabels();g.updateCells(m)}return true}return false}var ee=function(e,i,a){if(!a){return}var r=i.getNodes(i.NodeType.LEGEND_BODY_BOUND_SELECTION,false)[0];if(!r){return}var o=r.getBoundingClientRect();if(!o){return}var n=a.getBoundingClientRect();var l=0;if(t.isIE()||t.isFirefox()){l=2}var s;if(n.right>o.right+l){s=n.right-o.right}else if(n.left<o.left-l){s=n.left-o.left}else if(n.top<o.top-l){s=n.top-o.top}else if(n.bottom>o.bottom+l){s=n.bottom-o.bottom}if(s!=null){var u=i.getModule("legendGroup.legend");var c=u.getScrollbar();if(c&&c.isExist()){var h=c.getThumbRatio();s/=h?h:1;u.scroll(s)}e.data.originalEvent.preventDefault()}};function te(e,t,i,a,r,o){if(!a){if(r){var n=t.getStatus("keyArrowHoveredDataPoint");if(n){t.fireEvent("unhoverOnDataPoint",{targets:n})}}return}if(i==="hover"){g.setInteractiveScreenReaderDesc(t,a,r)}var l=t.getStatus("tabOrder");if(l===1&&e.name==="tab"&&t.getProperties().get("interaction.selectability.plotStdSelection")){de(d3.select(a),true)}var s=a.getBoundingClientRect();var u=t.getBBox(t.BoxType.PLOT_BOUND_NODE);var c,h,p,d,f;var v,m;if(l===1){c=Math.max(s.left,u.left);h=Math.min(s.right,u.right);p=Math.max(s.top,u.top);d=null;f=t._getRenderType();if(f.indexOf("pie")>-1||f.indexOf("donut")>-1||f.indexOf("bubble")>-1||f.indexOf("scatter")>-1||f.indexOf("heatmap")>-1||f.indexOf("treemap")>-1){d=Math.min(s.bottom,u.bottom)}v=(c+h)/2;m=d?(p+d)/2:p}else{v=(s.left+s.right)/2;m=(s.top+s.bottom)/2}t.fireEvent(i,{target:a,ctrlKey:e.data.originalEvent.ctrlKey,point:{x:v,y:m},byKeyboard:!!o})}var ie=function(e,t,i,a,r,o){if(i){var n=a.getProperties().get("interaction.keyboard");n.color=a.getEffectManager().register({fillColor:n.color});n.angle=a.getProperties().get("categoryAxis.label.angle");var l=a.getProperties().get("interaction.selectByTimeAxisGroup");var s=u.getData(t);if(c.isExist(s)){for(var h in s){if(s.hasOwnProperty(h)&&!n.hasOwnProperty(h)){n[h]=s[h]}}}var p=a._getRenderType();n.renderType=p;n.isVerticalRender=y.getChartTypeProperty(p).isVerticalRender;if(r===1&&l){var d=f.getDataPointsByTimeField(t,a);if(d){d.forEach(function(t){pe(e,d3.select(t),i,n)})}}else{pe(e,o?d3.select(t.parentNode):d3.select(t),i,n)}}};var ae=function(e){return e.indexOf(r.PERCENT_STACKED_COLUMN)>-1||e.indexOf(r.PERCENT_STACKED_BAR)>-1};var re=function(e){return e.indexOf(r.TIMEWATERFALL)>-1};var oe=function(e,t){e.a=!t.isAllZero&&t.isAllValueNegative&&!ae(t.renderType)&&!t.isNegative?-1:1;return e};var ne=function(e,t){e.d=!t.isAllZero&&t.isAllValueNegative&&!ae(t.renderType)&&!t.isNegative?1:-1;return e};var le=function(e,t){if(t.isZeroValue){var i=t.isVerticalRender?ne:oe;e=i(e,t)}return e};var se=function(e,t){if(t.isZeroValue){for(var i in e){if(e[i]===0){e[i]=Y.RECT}}}return e};var ue=function(e,t,i,a){if(i.renderType.indexOf("stacked")>-1&&i.isZeroValue){if(!i.isVerticalRender){return e.left>=t.left&&e.right<=t.right}else{return e.top+a>=t.top&&e.bottom-a<=t.bottom}}return false};var ce=function(e,t){var i={deltaX:0,deltaY:0};if(t.isZeroValue){if(!t.isVerticalRender){if(e.hoverPos.left<e.axisPos.right){i.deltaX=Math.abs(e.hoverPos.left-e.axisPos.right)}if(e.hoverPos.top<e.plotPos.top){i.deltaY=Math.abs(e.hoverPos.top-e.plotPos.top)}if(e.hoverPos.left<e.wtfLinePos.right){i.deltaX=Math.abs(e.hoverPos.left-e.wtfLinePos.right)}}else{if(e.hoverPos.left<e.plotPos.left){i.deltaX=Math.abs(e.hoverPos.left-e.plotPos.left)}if(e.hoverPos.bottom>e.axisPos.top){i.deltaY=Math.abs(e.hoverPos.bottom-e.axisPos.top)}if(e.hoverPos.bottom>e.wtfLinePos.top){i.deltaY=Math.abs(e.hoverPos.bottom-e.wtfLinePos.top)}}}return i};var he=function(e,t,i){var a=e[0];for(var r=1;r<e.length;++r){if(i){if(Math.abs(e[r].getBoundingClientRect().left-t.left)<Math.abs(a.getBoundingClientRect().left-t.left)){a=e[r]}}else{if(Math.abs(e[r].getBoundingClientRect().top-t.top)<Math.abs(a.getBoundingClientRect().top-t.top)){a=e[r]}}}return a};var pe=function(t,i,a,r){de(i);var o=i.select(a),n=o.node();if(!n){return}var l=d3.select(i.node().parentNode).node();var s=c.isExist(l)?l.getBoundingClientRect():{};var h=u.getData(n);if(c.isExist(h)){r.bTinyValue=h.bTinyValue}var p=n.getBoundingClientRect(),d=parseFloat(r.width)||1,f=d+", "+d;var v=i.append("g").attr("class","v-m-highlight");var g={rect:null,line:null};var y;if(r.renderType){y=r.renderType.indexOf("stacked")>-1}var _=r.angle;if(y&&r.isZeroValueInStack&&r.isZeroOnFirstTab){g.line=v.append("line").attr("class","v-highlight-bound").attr("stroke",r.color).attr("stroke-width",r.width).attr("stroke-dasharray",f).style("pointer-events","none")}else{g.rect=v.append("rect").attr("class","v-highlight-bound").attr("transform",o.attr("transform")).attr("width",o.attr("width")).attr("height",o.attr("height")).attr("x",o.attr("x")).attr("y",o.attr("y")).attr("fill","transparent").attr("fill-opacity",0).attr("stroke",r.color).attr("stroke-width",r.width).attr("stroke-dasharray",f).attr("shape-rendering","crispEdges").style("pointer-events","none")}if(a==="rect"||a==="path"){var A=e.getTransformToElement(n,i.node());var b=d3.select(I).node()||d3.select(O).node()||d3.select(R).node();var x=c.isExist(b)?b.getBoundingClientRect():{};var S=d3.select(M).node();var D=c.isExist(S)?S.getBoundingClientRect():{};var w=d3.select("."+U).node();var C=c.isExist(w)?w.getBoundingClientRect():{};var T=[];if(r.isZeroValue){var z=d3.selectAll(".v-wtf-linkline");for(var L=0;L<z[0].length;++L){T.push(z[0][L])}}var P=v.node().getBoundingClientRect();var k=T.length>0?he(T,P,!r.isVerticalRender).getBoundingClientRect():{};if(r.isZeroValue&&r.isZeroOnFirstTab){if(r.isVerticalRender){r.bCloseCategory=x.top<=P.top||D.top<=P.top}else{r.bCloseCategory=x.right<=P.left||D.right<=P.left}}if(!r.isZeroValueInStack){if(c.isExist(i.select(".negative-datapoint").node())){r.isNegative=true}A=le(A,r);v.attr("transform","translate("+A.e+","+A.f+") "+"scale("+A.a+","+A.d+") ")}else{var E,N;N={a:r.isVerticalRender?0:ae(r.renderType)?-1*.5*Y.LINE:.5*Y.LINE,b:r.isVerticalRender?ae(r.renderType)?.5*Y.LINE:-1*.5*Y.LINE:0};E=N;if(!r.isAllValueNegative&&!ae(r.renderType)){E={a:r.isVerticalRender?0:-1*.5*Y.LINE,b:r.isVerticalRender?.5*Y.LINE:0}}A=r.isAllValueNegative?N:E;if(r.bCloseCategory){if(r.isVerticalRender){A.b*=-1}else{A.a*=-1}}}var B=o.attr("x"),V=o.attr("y");var W=a==="rect"?parseFloat(o.attr("width")):p.width,G=a==="rect"?parseFloat(o.attr("height")):p.height;var X=parseFloat(o.attr("stroke-width"))||0;if(!r.isZeroValue){if(a==="path"){B-=.5*W;V-=.5*G}B-=X;V-=X;W=W?W+2*X:0;G=G?G+2*X:0}if(c.isExist(g.line)||c.isExist(g.rect)){var j={plotPos:D,axisPos:x,zeroLine:{zeroLinePos:C,strokeWidth:c.isExist(w)?parseFloat(w.getAttribute("stroke-width")):0},hoverPos:P,wtfLinePos:k};B+=ce(j,r).deltaX;V+=ce(j,r).deltaY}var Z={width:W,height:G};Z=se(Z,r);var q,K,Q,$;if(c.isExist(g.rect)){g.rect.attr("width",Z.width).attr("height",Z.height).attr("x",B).attr("y",V);if(r.bTinyValue||ue(P,s,r,Y.RECT)){d3.select(l).selectAll("."+H).remove();q=e.create("g");K=d3.select("."+F);Q=d3.select(".v-m-highlight");q.setAttribute("class",H);$=K.attr("transform");q.setAttribute("transform",$);q.appendChild(Q.node());l.appendChild(q)}}else{if(r.isVerticalRender){g.line.attr("x1",B).attr("y1",V).attr("x2",B+Z.width).attr("y2",V)}else{g.line.attr("x1",B).attr("y1",V).attr("x2",B).attr("y2",V+Z.height)}g.line.attr("transform","translate("+A.a+","+A.b+")");if(r.bCloseCategory||ue(P,s,r,Y.LINE)){if(r.bCloseCategory){var J=Math.max(parseFloat(r.width),2);g.line.attr("stroke-width",J+"")}d3.select(l).selectAll("."+H).remove();q=e.create("g");K=d3.select("."+F);Q=d3.select(".v-m-highlight");q.setAttribute("class",H);$=K.attr("transform");q.setAttribute("transform",$);q.appendChild(Q.node());l.appendChild(q)}}if(re(r.renderType)){var ee=r.isVerticalRender?"height":"width";var te=d3.selectAll(".v-m-highlight")[0];if(te){for(var ie=0;ie<te.length;++ie){if(parseFloat(d3.select(te[ie]).select(".v-highlight-bound").attr(ee))===0){d3.select(te[ie]).select(".v-highlight-bound").attr(ee,Y.RECT)}}}}}else if(!_||_%90===0){var oe=t.getBoundingClientRect();var ne=m.intersection(oe,p);if(ne){g.rect.attr("width",ne.width).attr("height",ne.height);if(ne.left!==p.left){g.rect.attr("x",(parseFloat(o.attr("x"))||0)+ne.left-p.left)}if(ne.top!==p.top){g.rect.attr("y",(parseFloat(o.attr("y"))||0)+ne.top-p.top)}}}};var de=function(e,t){var i=e.selectAll(".v-m-highlight")[0];if(i){for(var a=0;a<i.length;++a){var r=u.getData(i[a].parentNode)||{};if(!r.isZeroValue||t){d3.select(i[a]).remove()}}}};var fe=function(e){var t=e._getRenderType();return t.indexOf("treemap")>-1};var ve=function(e){var t;var i,a,r,o;var n,l;if(e.length===0){return null}var s=e[0].getBoundingClientRect();i=s.left;a=s.right;r=s.top;o=s.bottom;for(t=1;t<e.length;++t){s=e[t].getBoundingClientRect();i=s.left<i?s.left:i;a=s.right>a?s.right:a;r=s.top<r?s.top:r;o=s.bottom>o?s.bottom:o}n=(i+a)/2;l=(r+o)/2;if(n&&l){return{x:n,y:l}}else{return null}};var ge=function(e){var t=e.getStatus("keyArrowHoveredDataPoint");if(fe(e)&&t){var i=e.getStatus("hoveredDataPointId");var a=e.getNodes(e.NodeType.DATA_POINT_GROUP);var r=a.selectAll("g.v-datapoint[data-datapoint-id='"+i+"']").node();if(r){e.fireEvent("unhoverOnDataPoint",{targets:t})}}else if(t){e.fireEvent("unhoverOnDataPoint",{targets:t})}e.fireEvent("processUnhighlight");e.setStatus("keyArrowHoveredDataPoint",null);e.setStatus("hoveredDataPointId",null);e.setStatus("keyArrowHoveredCategoryLabel",null);e.setStatus("keyArrowHoveredCategory2Label",null);e.setStatus("keyArrowHoveredTimeLabel",null);e.setStatus("hoveredCategoryLabelId",null);e.setStatus("hoveredCategory2LabelId",null);e.setStatus("hoveredTimeLabelId",null);e.setStatus("orgHoveredTimeLabelId",null);e.setStatus("keyArrowHoveredLegendLabel",null);e.setStatus("hoveredLegendLabelId",null);e.setStatus("hoveredRadarLabelId",null);e._rootNode.selectAll('g[focusable="true"]').attr("focusable",false)};var me=function(e,t){_e.call(this,e,t,undefined)};var ye=function(e,t){var i=n.getContext(e);if(!i.hasOwnProperty("rectX")){return}l.cleanRangeSelection(t);var a={},r=t.getDataModel()._timeAxis.metaData[0].id;a[r+"."+L]=i.range;return l.getDataPointIds(a,t)};var _e=function(e,t,i,a,o){var s=t.getStatus("tabOrder");if(s===-1){return}e.data.originalEvent.preventDefault();var h=null;var p=null;var d=null;var f=null;var g=null;var m=null;var y=t.isHorizontal();var _;var A={};var b=null;var T=t._getRenderType();var z=false;var L=t._getRenderType().indexOf("radar")>-1;switch(s){case 1:h=this[x];if(!h){return}if(/line|bullet|pie|donut/.test(T)){b=null}else if(/scatter|bubble/.test(T)){b="path"}else{b="rect"}p=t.getStatus("keyArrowHoveredDataPoint");m=t.getStatus("hoveredDataPointId");if(!p){f=h.getFirstStartPoint()}else if(i){f=h.getDataPoint(m)}else{f=Z(h,e,m,t)}if(!f){return}if(this.plotScrollable){var P=f.address();var k=q(t);_=k.getDataPointPosition(P[1],P[0],true);if(!_){return}A.needAdjust=true;A.isNegative=false;if(f._data){if(t._getRenderType().indexOf("bullet")>-1){var E=k.getData().series[P[1]][P[0]];A.isNegative=true;["actualValues","additionalValues","forecastValues"].forEach(function(e){if(c.isNumber(E[e])&&E[e]>0){A.isNegative=false}})}else{A.isNegative=f._data[f._data.measureNames]<0?true:false}A.isZeroValue=f._data[f._data.measureNames]===0}J.call(this,e.name,t,_,y,A)}d=f.id;g=t.getNodes(t.NodeType.DATA_POINT_GROUP);p=g.selectAll("g.v-datapoint[data-datapoint-id='"+d+"']").node();var I=y?"width":"height";var O=d3.select(p).select("rect");var R;if(O.node()){R=parseInt(O.attr(I))===0}if(R){var N=g.selectAll("g.v-datapoint[data-datapoint-id='"+m+"']").node();var M=Z(h,e,d,t)||{};var F=g.selectAll("g.v-datapoint[data-datapoint-id='"+M.id+"']").node();var H,U;var W=y?"leftarrow":"uparrow";var Y=y?"rightarrow":"downarrow";if(N&&F){if(T===r.STACKED_COMBINATION){switch(e.name){case W:H=!this.isAllValueNegative?N:F;break;case Y:H=!this.isAllValueNegative?F:N;break}}if(H){U=H.getAttribute("transform");p.setAttribute("transform",U)}}}if(p==null&&fe(t)){p=g.selectAll("g [data-datapoint-id='"+d+"'] .v-labelarea").node();z=true;b="rect.v-labelarea"}if(d&&p){t.setStatus("keyArrowHoveredDataPoint",p);t.setStatus("hoveredDataPointId",d)}t.fireEvent("saveZoom",{scroll:true});if(e&&e.data&&e.data.rootHandler){d3.select(e.data.rootHandler).classed(G,true)}if(f&&f._data&&p){var X=u.getData(p);var j,K;if(this._isBulletChart){if(f&&f._data){X.isZeroValue=true;var Q=f._model;if(Q.hasOwnProperty("forecastValues")){j=Q.forecastValues.values;if(j){K=j[f.address()[0]][f.address()[1]];if(c.isArray(K)){K=K[0]}}X.isZeroValue=K===0||!c.isExist(K)}}}else if(this._isPieChart||this._isDonutChart){X.isZeroValue=X.startAngle===X.endAngle}else if(this._isTimeseriesWaterFall){X.isZeroValue=false}else{X.isZeroValue=f._data[f._data.measureNames]===0;if(X.isZeroValue&&c.isExist(this.zeroValueInStackIndex)){var $=f.address()[0];X.isZeroValueInStack=this.zeroValueInStackIndex.indexOf($)>-1}}X.isAllValueNegative=this.isAllValueNegative;X.isAllZero=this.isAllZero;u.setData(p,X)}break;case 2:case 4:if(L){var ae=t.getNodes(t.NodeType.RADAR_AXIS).node();var re=0;var oe=ae.childElementCount-1;var ne=u.getData(ae);if(c.isUndefined(ne)){u.setData(ae,{focusPos:0})}var le=u.getData(ae).focusPos;switch(e.name){case"leftarrow":if(le!==re){le=le===oe?re:le+1}break;case"rightarrow":if(le!==re+1){le=le===re?oe:le-1}break}ne=u.getData(ae);ne.focusPos=le;u.setData(ae,ne);p=t.getNodes(t.NodeType.AXIS_ITEM)[0][le];b=V;t.setStatus("hoveredRadarLabelId",le)}else{var se=this._isTimeseries?t.getModule("main.timeAxis.axisBody"):s==2?t.getModule("main.categoryAxis.axisBody"):t.getModule("main.categoryAxis2.axisBody");if(se.isOnlyShowingFirstAndLastLabel&&se.isOnlyShowingFirstAndLastLabel()){return}b=V;h=this._isTimeseries?this[w]:s==2?this[S]:this[D];p=this._isTimeseries?t.getStatus("keyArrowHoveredTimeLabel"):s==2?t.getStatus("keyArrowHoveredCategoryLabel"):t.getStatus("keyArrowHoveredCategory2Label");m=this._isTimeseries?t.getStatus("hoveredTimeLabelId"):s==2?t.getStatus("hoveredCategoryLabelId"):t.getStatus("hoveredCategory2LabelId");if(!p){if(this._isTimeseries){h.updateCells(t.getModule("main.timeAxis.axisBody").getActiveLabels())}d=h.getFirstStartPoint().id}else if(i){f=h.getCell(m);d=f&&f.id||h.getFirstStartPoint().id}else{f=Z(h,e,m,t);d=f&&f.id}var ue=false;if(!d&&m&&this._isTimeseries&&["rightarrow","leftarrow"].indexOf(e.name)>-1){var ce=t.getModule("main.timeAxis.axisBody").getRange(),he=m.split("-")[1];if("leftarrow"===e.name&&he>ce[0]||"rightarrow"===e.name&&he<ce[1]){d=m;ue=true}}if(d!=null){_=se.getCellPosition(d);if(ue&&_){if("rightarrow"===e.name){_.x=_.x+_.width}else if("leftarrow"===e.name){_.x=_.x-_.width}}A.needAdjust=false;var pe;if(this._isTimeseries&&["rightarrow","leftarrow"].indexOf(e.name)===-1){pe=false}else if(_){pe=J.call(this,e.name,t,_,y,A)}if(this._isTimeseries){if(pe){f=Z(h,e,m,t);d=f&&f.id}if(!d&&ue){d=m}g=t.getNodes(t.NodeType.TIME_LABEL_GROUP);p=g.node().querySelector("g.v-label-interaction .v-timeaxis-item[timelabel-id='"+d+"']")||g.node().querySelector("g.v-label-interaction .v-timeaxis-item-upperLevel[timelabel-id='"+d+"']")}else{g=s==2?t.getNodes(t.NodeType.CATEGORY_LABEL_GROUP):t.getNodes(t.NodeType.CATEGORY2_LABEL_GROUP);p=g.node().querySelector("g.v-label[categorylabel-id='"+d+"']")}if(p){if(this._isTimeseries){t.setStatus("keyArrowHoveredTimeLabel",p);t.setStatus("hoveredTimeLabelId",d);t.setStatus("orgHoveredTimeLabelId",d)}else{if(s===2){t.setStatus("keyArrowHoveredCategoryLabel",p);t.setStatus("hoveredCategoryLabelId",d)}else{t.setStatus("keyArrowHoveredCategory2Label",p);t.setStatus("hoveredCategory2LabelId",d)}}}}}break;case 3:if(/bullet|timeseries_waterfall/.test(T)){t.fireEvent("processUnhighlight");return}b=B;h=this[C];p=t.getStatus("keyArrowHoveredLegendLabel");m=t.getStatus("hoveredLegendLabelId");if(!p){d=h.getFirstStartPoint().id}else if(i){f=h.getCell(m);d=f&&f.id}else{f=Z(h,e,m,t);d=f&&f.id}var ve=t.getSemanticManager();var ge=t.NodeType.LEGEND_ITEM;if((T.indexOf("heatmap")>-1||T.indexOf("treemap")>-1)&&!(ve.hasDataPointColorStyle()&&ve.isOverrideMode())){ge=t.NodeType.MBC_LEGEND_ITEM}var me=t.getNodes(ge,false);function _e(e,t){if(t==null){return null}for(var i=0;i<e.length;++i){if(e[i].getAttribute("legendlabel-id")===t.toString()){return e[i]}}return null}p=_e(me,d);if(d!==null&&!p){if(!h.isLastCellID(d)){var Ae=t.getModule("legendGroup.legend");if(Ae&&Ae.loadMore){Ae.loadMore();me=t.getNodes(t.NodeType.LEGEND_ITEM,false)}p=_e(me,d)}}if(d!=null&&p){ee(e,t,p);t.setStatus("keyArrowHoveredLegendLabel",p);t.setStatus("hoveredLegendLabelId",d)}break}var be;if(this._isTimeseries){if(s!==1){var xe=ye(p,t);be=n.getNodes(xe,t);be.forEach(function(e){Se=u.getData(e);if(Se.isZeroValue){Se.isZeroOnFirstTab=false}u.setData(e,Se)})}}if(p){var Se=u.getData(p);if(!c.isExist(Se)){var De=v.extendByRepalceArray({},n.getContext(p).ctx);be=l.getDataPointNodes(De,t);be.forEach(function(e){Se=u.getData(e);if(Se.isZeroValue){Se.isZeroOnFirstTab=s===1}u.setData(e,Se)})}else{if(Se.isZeroValue){Se.isZeroOnFirstTab=s===1}u.setData(p,Se)}}te(e,t,"hover",p,this._isTimeseries,true);if(a){this._mainNode=a}if(o){this._mainBoundNode=this._mainNode.select(o).node()}if(p){if(this._mainNode){de(this._mainNode)}ie(this._mainBoundNode,p,b,t,s,z)}};var Ae=function(e,t){var i;var a;var r;var o;var n=t.getStatus("tabOrder");var l=null;var s=t._getRenderType().indexOf("radar")>-1;switch(n){case 1:r=t.getStatus("hoveredDataPointId");var u=t.getNodes(t.NodeType.DATA_POINT_GROUP);l=u.node().querySelector("g.v-datapoint[data-datapoint-id='"+r+"']");if(l==null&&fe(t)){l=u.node().querySelector("g [data-datapoint-id='"+r+"'] .v-labelarea")}break;case 2:if(this._isTimeseries){i=t.getStatus("hoveredTimeLabelId");var c=t.getNodes(t.NodeType.TIME_LABEL_GROUP);l=c.node().querySelector("g.v-label-interaction .v-timeaxis-item[timelabel-id='"+i+"']")||c.node().querySelector("g.v-label-interaction .v-timeaxis-item-upperLevel[timelabel-id='"+i+"']")}else if(s){o=t.getStatus("hoveredRadarLabelId");var h=t.getNodes(t.NodeType.AXIS_ITEM);l=h[0][o]}else{a=t.getStatus("hoveredCategoryLabelId");var p=t.getNodes(t.NodeType.CATEGORY_LABEL_GROUP);l=p.node().querySelector("g.v-label[categorylabel-id='"+a+"']")}break;case 3:l=t.getStatus("keyArrowHoveredLegendLabel");break;case 4:l=t.getStatus("keyArrowHoveredCategory2Label");break}if(l){if(n===1&&t.getProperties().get("interaction.selectability.plotStdSelection")){de(this[P])}te(e,t,"click",l);te(e,t,"down",l);setTimeout(function(){te(e,t,"up",l)},100);e.data.originalEvent.preventDefault()}};var be=function(e,t){if(!t.getStatusManager().get("plot.zoom")){return}if(e.data.originalEvent.altKey||e.data.originalEvent.ctrlKey){return}var i=t.getStatus("tabOrder");if(i!=1&&i!=2){return}e.data.originalEvent.preventDefault();var a=null;var r,o=[];if(e.name==="plus"){a="in"}else if(e.name==="minus"){a="out"}var s,u;var h,p,d;var f;var v=null;var g=false;switch(i){case 1:var m=t._getRenderType();if(/line|bullet|pie|donut/.test(m)){v=null}else if(/scatter|bubble/.test(m)){v="path"}else{v="rect"}s=t.getStatus("hoveredDataPointId");u=t.getNodes(t.NodeType.DATA_POINT_GROUP);r=u.node().querySelector("g.v-datapoint[data-datapoint-id='"+s+"']");if(r){o=c.isArray(r)?r:[r]}break;case 2:v=V;if(this._isTimeseries){h=t.getStatus("hoveredTimeLabelId");d=t.getNodes(t.NodeType.TIME_LABEL_GROUP);r=d.node().querySelector("g.v-label-interaction .v-timeaxis-item[timelabel-id='"+h+"']")||d.node().querySelector("g.v-label-interaction .v-timeaxis-item-upperLevel[timelabel-id='"+h+"']");t.setStatus("keyArrowHoveredTimeLabel",r)}else{h=t.getStatus("hoveredCategoryLabelId");p=t.getNodes(t.NodeType.CATEGORY_LABEL_GROUP);r=p.node().querySelector("g.v-label[categorylabel-id='"+h+"']");t.setStatus("keyArrowHoveredCategoryLabel",r)}if(r){var y;if(this._isTimeseries){y=n.getContext(r);var _={},A=t.getDataModel()._timeAxis.metaData[0].id;_[A+"."+L]=y.range;o=l.getDataPointNodes(_,t)}else{y=n.getContext(r).ctx;o=l.getDataPointNodes(y,t)}}break}if(t._getRenderType().indexOf("bullet")>-1){var b=false;var x=false;var D=[];for(var C=0;C<o.length;++C){var T=Array.prototype.slice.call(o[C].querySelectorAll(".v-primary, .v-additional, .v-forecast"));D=D.concat(T);if(!x&&o[C].querySelectorAll(".v-target").length>0){x=true}if(!b){for(var z=0;z<T.length;++z){var P=T[z].getBoundingClientRect();if(P.width&&P.height){b=true;break}}}}if(b||!x){o=D}}var k=ve(o);if(!k&&i==2&&r){var E=r.getBoundingClientRect();var I,O;if(t.isHorizontal()){I=E.right;O=(E.top+E.bottom)/2}else{I=(E.left+E.right)/2;O=E.top}k={x:I,y:O}}var R;if(i===2){R=this._isTimeseries?t.getModule("main.timeAxis.axisBody").getActiveLabels().length:t.getModule("main.categoryAxis.axisBody").getActiveLevels().length}t.getModule("main").getZoomer().zoomInOut(a,k,14);if(i===2){var N=this._isTimeseries?d.node():p.node(),M=this._isTimeseries?this[w]:this[S],B=this._isTimeseries?t.getModule("main.timeAxis.axisBody").getActiveLabels():t.getModule("main.categoryAxis.axisBody").getActiveLevels(),F=B.length;var H=h,U;if(R!==F&&!this._isTimeseries&&c.isExist(H)){var W=N.querySelector("g.v-label[categorylabel-id='"+H+"']"),G=M.getParentCell(H);while(!W&&G){H=G.id;W=N.querySelector("g.v-label[categorylabel-id='"+H+"']");G=M.getParentCell(H)}U=M.getCell(H).ctx;M.updateCells(B);h=(M.findCell(U)||M.getFirstStartPoint()).id;t.setStatus("hoveredCategoryLabelId",h)}else if(this._isTimeseries){M.updateCells(B);f=t.getStatus("orgHoveredTimeLabelId");U=f?M.getCell(f)||{id:f}:M.getCell(H)||{id:H};h=(M.findCell(U)||M.getFirstStartPoint()).id;t.setStatus("hoveredTimeLabelId",h);if(!f){t.setStatus("orgHoveredTimeLabelId",h)}}r=this._isTimeseries?N.querySelector("g.v-label-interaction .v-timeaxis-item[timelabel-id='"+h+"']")||N.querySelector("g.v-label-interaction .v-timeaxis-item-upperLevel[timelabel-id='"+h+"']"):N.querySelector("g.v-label[categorylabel-id='"+h+"']");if(this._isTimeseries){t.setStatus("keyArrowHoveredTimeLabel",r)}}else if(i===1){r=u.node().querySelector("g.v-datapoint[data-datapoint-id='"+s+"']")}te(e,t,"hover",r,this._isTimeseries,true);if(r){ie(this._mainBoundNode,r,v,t,i,g)}return};var xe=function(){};xe.prototype={initialized:function(e,t){t.setStatus("tabOrder",-1);this[P]=t.getNodes(t.NodeType.MAIN_NODE);this[k]=t.getNodes(t.NodeType.LEGEND_GROUP);this[E]=t.getNodes(t.NodeType.PLOT_NODE);this._mainNode=null;this._mainBoundNode=null;var i=t._getRenderType();this._isTimeseries=i.indexOf("timeseries")>-1;var a={renderType:i,dataModel:t.getDataModel(),propertyManager:t.getProperties(),treeRect:t.getStatusManager().get("treeRect"),borderWidth:t.getProperties().get("plotArea.border.visible")?1:0,isTimeseries:this._isTimeseries};this._isBulletChart=i.indexOf("bullet")>-1;this._isStackedChart=i.indexOf("stacked")>-1;this._isWaterFallChart=i.indexOf("waterfall")>-1;this._isPieChart=i.indexOf("pie")>-1;this._isTimeseriesWaterFall=i.indexOf("timeseries_waterfall")>-1;this._isDonutChart=i.indexOf("donut")>-1;this._isDualChart=t._getChartType().indexOf("dual")>-1;this.isAllValueNegative=true;var r=q(t).getData().series;var n,l,s;if(this._isBulletChart){n=["actualValues","additionalValues","forecastValues","targetValues"];for(l=0;l<r[0].length;++l){for(var u=0;u<n.length;++u){var h=r[0][l][n[u]];if(c.isNumber(h)&&h>0){this.isAllValueNegative=false;break}}}}else if(this._isWaterFallChart){this.isAllValueNegative=!r[0].some(function(e){return e.base>0||e.total>0});this.isAllZero=!r[0].some(function(e){return e.valueAxis!==0})}else if(this._isPieChart||this._isDonutChart){this.isAllValueNegative=!r.some(function(e){return e[0].size>0});this.isAllZero=!r.some(function(e){return e[0].size!==0})}else{this.isAllZero=true;for(l=0;l<r.length;++l){for(s=0;s<r[l].length;++s){if(r[l][s]&&r[l][s].dp&&r[l][s].dp._data){n=r[l][s].dp._data[r[l][s].dp._data.measureNames];if(n!==0){this.isAllZero=false;break}}}}for(l=0;l<r.length;++l){var p=false;for(s=0;s<r[l].length;++s){if(r[l][s]&&r[l][s].dp&&r[l][s].dp._data){n=r[l][s].dp._data[r[l][s].dp._data.measureNames];if(n>0){p=true;break}}}if(p){this.isAllValueNegative=false;break}}if(this._isStackedChart){this.zeroValueInStackIndex=[];for(s=0;s<r[0].length;++s){var d=[];for(l=0;l<r.length;++l){if(c.isExist(r[l][s])&&(c.isExist(r[l][s].valueAxis)||c.isExist(r[l][s].valueAxis2))){n=c.isExist(r[l][s].valueAxis)?r[l][s].valueAxis:r[l][s].valueAxis2;d.push(n)}}if(d.indexOf(0)>-1){d=d.filter(function(e){return e!==0});if(d.length>0){this.zeroValueInStackIndex.push(s)}}}}}var f=o;var v=!t.isBigDataMode()?f.createNavigator(a,x):null;if(v){v.init();this[x]=v;t.setStatus("keyArrowHoveredDataPoint",null)}a={renderType:i};if(t.getModule("main.categoryAxis")){var g=t.getModule("main.categoryAxis.axisBody");if(t._propertyMgr.get("categoryAxis.label.overlapBehavior")!=="auto"){a.cells=g.getActiveLevels.bind(g)}else{a.cells=g.getActiveLevels()}if(a.cells){a.isVerticalRender=true;v=f.createNavigator(a,S)}if(v){v.init();this[S]=v;t.setStatus("keyArrowHoveredCategoryLabel",null)}}if(t.getModule("main.categoryAxis2")){a.cells=t.getModule("main.categoryAxis2.axisBody").getActiveLevels();if(a.cells){a.isVerticalRender=false;v=f.createNavigator(a,S)}if(v){v.init();this[D]=v;t.setStatus("keyArrowHoveredCategory2Label",null)}}if(t.getModule("main.timeAxis")){a.cells=t.getModule("main.timeAxis.axisBody").getActiveLabels();if(a.cells){a.isVerticalRender=false;v=f.createNavigator(a,w)}if(v){v.init();this[w]=v;t.setStatus("keyArrowHoveredTimeLabel",null)}}var m=t.getModule("legendGroup.legend");if(m&&m.isVisible()){var y=m.getType();if(y.search(/(ColorLegend|MBCLegend)/)!=-1){var _=m.getActiveLevels();if(_){a={renderType:t._getRenderType(),cells:_};var A;switch(y){case"ColorLegend":A=T;break;case"MBCLegend":A=z;break}v=f.createNavigator(a,A)}if(v){v.init();this[C]=v;t.setStatus("keyArrowHoveredLegendLabel",null)}}}var b=j(t);if(b&&b.isExist()){this.plotScrollable=true}t.fireEvent(e,true)},unloaded:function(e,t){t.fireEvent(e,true);if(this[x]){this[x].destroy();this[x]=null}if(this[S]){this[S].destroy();this[S]=null}if(this[D]){this[D].destroy();this[D]=null}if(this[w]){this[w].destroy();this[w]=null}if(this[C]){this[C].destroy();this[C]=null}this[P]=null;this[k]=null;t.removeStatus("keyArrowHoveredDataPoint");t.removeStatus("keyArrowHoveredCategoryLabel");t.removeStatus("keyArrowHoveredCategory2Label");t.removeStatus("keyArrowHoveredTimeLabel");t.removeStatus("keyArrowHoveredLegendLabel");t.removeStatus("tabOrder");t.removeStatus("hoveredTimeLabelId");t.removeStatus("orgHoveredTimeLabelId")},uparrowHandler:function(e,t){me.call(this,e,t)},downarrowHandler:function(e,t){me.call(this,e,t)},leftarrowHandler:function(e,t){me.call(this,e,t)},rightarrowHandler:function(e,t){me.call(this,e,t)},tabKeyHandler:function(e,t){var i=M,a=this[P].empty()?this[E]:this[P];var r=t.getStatus("tabOrder");var o=false;var n=e.data.originalEvent.shiftKey;var l=t.getModule("main.categoryAxis");var s=t.getModule("main.categoryAxis2");var u=t.getModule("main.timeAxis");var c=t.getModule("legendGroup.legend");var h=null;var p=this._isTimeseries?t.getModule("main.timeAxis.axisBody"):t.getModule("main.categoryAxis.axisBody")||t.getModule("main.categoryAxis2.axisBody");var d=p&&p.isOnlyShowingFirstAndLastLabel&&p.isOnlyShowingFirstAndLastLabel();var f=function(){if(d&&(i===I||i===O||i===R)){var e=t.getProperties().get("interaction.keyboard");e.color=t.getEffectManager().register({fillColor:e.color});var r=a.select(i).node();pe(r,d3.select(r.parentNode),".v-bound",e)}};if(r===-1){if(!n){e.data.originalEvent.preventDefault();r=1;f()}else{r=-1;o=true}t.setStatus("tabOrder",r)}else{switch(r){case 1:de(a);if(!n){if(t._getChartType().indexOf("radar")>-1){r++}else if(l&&l.isVisible()){i=I;r++}else if(u&&u.isVisible()){i=R;r++}else if(c&&c.isVisible()){a=this[k];i=N;r+=2}else if(s&&s.isVisible()){i=O;r+=3}else{r=-1;o=true}}else{r=-1;o=true}break;case 2:de(a);if(!n){if(!this._isBulletChart&&c&&c.isVisible()){a=this[k];i=N;r++}else if(s&&s.isVisible()){i=O;r+=2}else{r=-1;o=true}}else{i=M;r--}break;case 3:de(this[k]);if(!n){if(s&&s.isVisible()){i=O;r++}else{r=-1;o=true}}else{if(t._getRenderType().indexOf("radar")>-1){i=V;r--}else if(l&&l.isVisible()){i=I;r--}else if(u&&u.isVisible()){i=R;r--}else{t.fireEvent("processUnhighlight");r=1}}break;case 4:de(a);if(!n){r=-1;o=true}else if(c&&c.isVisible()){a=this[k];i=N;r=3}else if(l&&l.isVisible()){i=I;r=2}else{i=M;r=1}break}t.fireEvent("hideDetail",{mode:"infoMode",action:"interrupt"});t.setStatus("tabOrder",r);if(o){ge(t);if(e&&e.data&&e.data.rootHandler){d3.select(e.data.rootHandler).classed(G,false)}return}else{e.data.originalEvent.preventDefault();f()}}switch(r){case 1:h=t.getStatus("keyArrowHoveredDataPoint");break;case 2:h=this._isTimeseries?t.getStatus("keyArrowHoveredTimeLabel"):t.getStatus("keyArrowHoveredCategoryLabel");break;case 3:h=t.getStatus("keyArrowHoveredLegendLabel");break;case 4:h=this._isTimeseries?t.getStatus("keyArrowHoveredTimeLabel"):t.getStatus("keyArrowHoveredCategory2Label");break}_e.call(this,e,t,!!h,a,i)},spaceKeyHandler:function(e,t){Ae.call(this,e,t)},enterKeyHandler:function(e,t){Ae.call(this,e,t)},plusKeyHandler:function(e,t){be.call(this,e,t)},minusKeyHandler:function(e,t){be.call(this,e,t)},clearHighlightBorder:function(e,t){if(t.getStatus("tabOrder")===-1){de(this[P]);de(this[k])}}};return xe});define("sap/viz/chart/behavior/config/KeyboardBehaviorConfig",["sap/viz/chart/behavior/config/handler/KeyboardBehaviorHandler"],function(e){var t=["info/bar","info/dual_bar","info/stacked_bar","info/dual_stacked_bar","info/100_stacked_bar","info/100_dual_stacked_bar","info/column","info/dual_column","info/stacked_column","info/dual_stacked_column","info/100_stacked_column","info/100_dual_stacked_column","info/line","info/horizontal_line","info/combination","info/horizontal_combination","info/stacked_combination","info/horizontal_stacked_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination","info/bullet","info/vertical_bullet","info/pie","info/donut","info/scatter","info/bubble","info/time_bubble","info/timeseries_scatter","info/timeseries_bubble","info/dual_line","info/dual_horizontal_line","info/timeseries_line","info/timeseries_column","info/timeseries_bullet","info/timeseries_stacked_column","info/timeseries_100_stacked_column","info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_combination","info/dual_combination","info/dual_horizontal_combination","info/heatmap","info/waterfall","info/horizontal_waterfall","info/timeseries_waterfall","info/treemap","info/area","info/radar"];return[{id:"keyboardBehaviorDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"afterChartRendered",supportedChartTypes:t,method:"initialized"},{name:"beforeBehaviorUnloaded",supportedChartTypes:t,method:"unloaded"},{name:"uparrow",targets:"*",supportedChartTypes:t,method:"uparrowHandler"},{name:"downarrow",targets:"*",supportedChartTypes:t,method:"downarrowHandler"},{name:"leftarrow",targets:"*",supportedChartTypes:t,method:"leftarrowHandler"},{name:"rightarrow",targets:"*",supportedChartTypes:t,method:"rightarrowHandler"},{name:"tab",targets:"*",supportedChartTypes:t,method:"tabKeyHandler"},{name:"space",targets:"*",supportedChartTypes:t,method:"spaceKeyHandler"},{name:"enter",targets:"*",supportedChartTypes:t,method:"enterKeyHandler"},{name:"blur",targets:"*",supportedChartTypes:t,method:"clearHighlightBorder"},{name:"plus",targets:"*",supportedChartTypes:t,method:"plusKeyHandler"},{name:"minus",targets:"*",supportedChartTypes:t,method:"minusKeyHandler"}]}]});define("sap/viz/chart/behavior/DefaultBehavior",["sap/viz/framework/interaction/Constants","sap/viz/framework/interaction/BehaviorFactory","sap/viz/framework/interaction/BehaviorManager","sap/viz/chart/behavior/config/PlotScrollBehaviorConfig","sap/viz/chart/behavior/config/AxisBehaviorConfig","sap/viz/chart/behavior/config/ContextualDataConfig","sap/viz/chart/behavior/config/LegendBehaviorConfig","sap/viz/chart/behavior/config/LassoBehaviorConfig","sap/viz/chart/behavior/config/DataPointBehaviorConfig","sap/viz/chart/behavior/config/RuntimeSelectionHelperConfig","sap/viz/chart/behavior/config/SelectionAPIConfig","sap/viz/chart/behavior/config/PinchBehaviorConfig","sap/viz/chart/behavior/config/TooltipBehaviorConfig","sap/viz/chart/behavior/config/ZoomBehaviorConfig","sap/viz/chart/behavior/config/ScreenReaderConfig","sap/viz/chart/behavior/config/KeyboardBehaviorConfig"],function(e,t,i){return i.register(e.BEHAVIOR.DEFAULT_BEHAVIOR_ID,t.buildBehavior([].slice.call(arguments,3)))});define("sap/viz/chart/behavior/SFinBehavior",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/BoundingBoxUtils","sap/viz/framework/interaction/BehaviorManager","sap/viz/chart/behavior/DefaultBehavior","sap/viz/chart/behavior/config/handler/RuntimeSelectionHelperHandler","sap/viz/chart/behavior/config/handler/TooltipBehaviorHandler","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler","sap/viz/chart/behavior/config/SelectionTreeUtil","sap/viz/chart/behavior/config/handler/AxisBehaviorHandler","sap/viz/chart/behavior/config/handler/LegendBehaviorHandler","sap/viz/chart/behavior/config/handler/LassoBehaviorHandler","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/behavior/config/tooltip/TooltipUtils","sap/viz/chart/behavior/config/handler/TooltipTimerHandler","sap/viz/framework/common/util/DOM","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/framework/common/util/DataUtils"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S){var D="pop";function w(e,t){var i=t.getNodes(t.NodeType.PLOT_BOUND_SELECTION).node();if(!i){return null}var r=t.getNodes(t.NodeType.DATA_POINT,false),o=a.findByDataPointIds(r,e);var n=e.reduce(function(e,t,i){e[t]=i;return e},{});o.sort(function(e,t){return n[a.getDataPointId(e)]-n[a.getDataPointId(t)]});for(var l=0,s=o.length;l<s;l++){if(C(o[l],i)){return o[l]}}return null}function C(e,t){var i=t?t.getBoundingClientRect():null;return e&&i&&o.intersects(i,e.getBoundingClientRect())}function T(e,t,i){var a,r;var o=p.bindingConfig;for(var n in t){if(t.hasOwnProperty(n)&&t[n]){var l=o[n].selectionTree;a=p.getSelectionTree(e,i,l);r=e.getStatus(o[n].metaInfo);var s=t[n];if(s.or||s instanceof Array){var u=s.or||s;for(var c=0;c<u.length;++c){p.applyDimensionalSelection(e,l,a,u[c],i.isDeselect,r)}}else{p.applyDimensionalSelection(e,l,a,s,i.isDeselect,r)}}}}var z=n.get("default").clone();var L=function(){};e.extend(L,s);L.prototype.processMultipleSelectionTooltip=function(e,t){if(t.getStatus("selectedDataPoints").length){t.fireEvent("showDetail")}else{t.fireEvent("hideDetail")}};L.prototype.deselectAll=function(e,t){L.superclass.deselectAll.apply(this,arguments);t.setStatus("categorySelectionTree",{});t.setStatus("category2SelectionTree",{});t.setStatus("seriesSelectionTree",{})};L.prototype.processSelection=function(e,t){var a=L.superclass.processSelection.apply(this,arguments);var r=t.getProperties().get("interaction.selectability.behavior");r=r?r.toUpperCase():r;if(e.data.ctx&&r!==i.SELECTION_BEHAVIOR.DATAPOINT){a.mode=e.data.mode;T(t,e.data.ctx,a)}};L.prototype.refreshedKeepSelection=function(e,t){var a=L.superclass.refreshedKeepSelection.apply(this,arguments);var r=t.getProperties().get("interaction.selectability.behavior");r=r?r.toUpperCase():r;if(a&&r!==i.SELECTION_BEHAVIOR.DATAPOINT){p.initSelectionTree(t)}};var P=["id","name","type","value"];L.prototype._buildEventData=function(e,t){var i=s.prototype._buildEventData.call(this,e,t);function a(e){var t=Object.keys(e).reduce(function(t,i){if(P.indexOf(i)!==-1){t[i]=e[i]}return t},{});return t}var r=t.getProperties();var o=t.getProperties().get("tooltip.applyTimeAxisFormat");var n=t.getProperties().get("tooltip.formatString");var l;var c=t.getModule("main.timeAxis");if(c){var h=t.getDataModel();if(h&&h._timeAxis){l=h._timeAxis.metaData[0].id;o=o&&!(m.isExist(n)&&m.isExist(n[l]))}}if(r.get("interaction.extraEventInfo")){i.forEach(function(e,i){t.fireEvent("extractTooltipData",{target:e.target||{context:e.data}});var n=t.getStatus("tooltipData");u.processDateFormat.call(null,n,o,c);e.tooltipText=_.format({data:n},r).data.map(a)}.bind(this))}return i};z.getActionById("runtimeSelectionHelperDefinition").setHandler(L);var k=function(){};e.extend(k,h);function E(e,t,a){if(!p.isSelectable(t,"DATAPOINT")){return}var o=t.getProperties().get("interaction.selectability");var n=o.mode?o.mode.toUpperCase():o.mode;if(!o.plotStdSelection||n===i.SELECTION_MODE.NONE||!a){return}var l=t.getProperties().get("interaction.selectByTimeAxisGroup");var s=e.data;var u=[],h,d,f,v,m;if(l){f=r.getContext(a);var y=x.getDataPointsByTimeField(a,t);var _=this;y.forEach(function(e){u.push(_._getDataPoint(e,t))})}else{switch(o.behavior){case i.SELECTION_BEHAVIOR.SERIES:f=r.getContext(a);if(!f){v=a.getAttribute("data-datapoint-id");f=t.getDataModel().getDataPoint(v).context()}f=p.applyFilterDimension(f,t,o.behavior);u=c.getTargets([{data:f.series}],t);break;case i.SELECTION_BEHAVIOR.CATEGORY:f=r.getContext(a);f=p.applyFilterDimension(f,t,o.behavior);u=c.getTargets([{data:f.categoryAxis}],t);if(f.categoryAxis2){var A=c.getTargets([{data:f.categoryAxis2}],t);u=u.concat(A);u=g.unique(u)}break;default:u=this._getDataPoint(a)}}var b=this._hasDataPoint(t.getStatus("selectedDataPoints"),v||this._getDataPoint(a));t.fireEvent("processSelection",{ctx:f,targets:u,deselectable:true,ctrlKeyPressed:s.ctrlKey});var S=t.getStatus("selectedDataPoints");if(this._hasDataPoint(t.getStatus("selectedDataPoints"),v||this._getDataPoint(a))){t.fireEvent("showDetail",{target:a})}else{if(b){a=w(S,t);if(a){t.fireEvent("showDetail",{target:a})}}else{t.fireEvent("hideDetail")}t.setStatus("isHoveringDeselectedDataPoint",b)}t.fireEvent("hideDetail",{target:a,action:"select",type:"instantTooltip"})}function I(e,t,i){if(!i){return}var a=e.data.point;var r=t.getStatus("hoveringDataPoint");var o=this._getDataPoint(i);var n=this._hasDataPoint(t.getStatus("selectedDataPoints"),o);if(r){if(r===i){if(!t.getStatus("isHoveringDeselectedDataPoint")){t.fireEvent("showDetail",{target:i,point:a,action:"hover",originalEvent:e.data.originalEvent,type:"instantTooltip"})}return}t.fireEvent("unhoverOnDataPoint",{targets:r})}if(r!==i){t.setStatus("isHoveringDeselectedDataPoint",false)}r=i;t.fireEvent("hoverOnDataPoint",{targets:r,byKeyboard:!!e.data.byKeyboard}).setStatus("hoveringDataPoint",r).fireEvent("showDetail",{target:i,point:a,action:"hover",originalEvent:e.data.originalEvent,type:"instantTooltip"})}k.prototype.clickOnDataPoint=function(e,t){E.call(this,e,t,e.data.currentTarget)};k.prototype.clickOnDataLabel=function(e,t){E.call(this,e,t,a.getDataPointByDataLabel(e.data.currentTarget,t))};k.prototype.hoverOnDataPoint=function(e,t){I.call(this,e,t,e.data.currentTarget)};k.prototype.hoverOnDataLabel=function(e,t){I.call(this,e,t,a.getDataPointByDataLabel(e.data.currentTarget,t))};k.prototype.hoverOnNonDataPoint=function(e,t){t.setStatus("isHoveringDeselectedDataPoint",false);var i=t.getStatus("hoveringDataPoint");if(i&&!this.isHoveringDataPointHighlighted(t)){t.fireEvent("unhoverOnDataPoint",{targets:i})}t.setStatus("hoveringDataPoint",null);t.fireEvent("hideDetail",{mode:"infoMode",target:"nonDataPoint",action:"interrupt",type:"instantTooltip"})};var O=z.getActionById("dataPointBehaviorDefinition");O.setHandler(k);var R=function(){};e.extend(R,u);function N(e,t,i){t.left=-e.x;t.top=-e.y;i.left=i.x;i.top=i.y;return o.intersects(t,i)}function M(e,t){var i=t._getActionLayer();i.clear(D);var a=i.createLayer(D);var r=t.getOffsetMatrix(t.OffsetType.PLOT_NODE,true);var o=t.getModule("main.plot");var n=o.getOffset();n.x+=r.e;n.y+=r.f;a.addRect({x:e.x+n.x,y:e.y+n.y,width:e.width,height:e.height,pointerEvent:"none",fill:"transparent",opacity:0});return i.drawLayer(a)}function B(e,t){var i,o,n,l,s,u=t.getSemanticManager();var h=e.data.target;if(h){t.fireEvent("extractTooltipData",{target:h});i=t.getStatus("tooltipData");n=u.analyzeDataPoint("color,lineColor,lineType,pattern",a.getContext(h),true,a.getAdditionCtx(h));if(n&&n.dataName){for(var p=0;p<i.length;p++){var d=n.dataName[i[p].id];i[p].dataName=m.isNonEmptyString(d)?d:i[p].name}}}var f=t.getStatus("selectedDataPoints");var v={data:{val:i},selectedValues:f.length};if(e.data.type==="instantTooltip"){v.point=e.data.point}if(t.getProperties().get("interaction.selectByTimeAxisGroup")){var g=c.getSelectedPeriods(t,f);v.selectedValues=g.length}var A=h&&h.className&&h.className.baseVal;if(t.isBigDataMode()&&!A){var b=t.getModule("main.plot");var x=b.getSize();var S=b.getOffset();var D;if(h){D=b.mappingDataPointInfo(h);if(D&&D.position&&N(S,x,D.position)){o=D.graphic;v.target=M(D.position,t)}}else{for(l=0,s=f.length;l<s;l++){D=b.mappingDataPointInfo(f[l]);if(D&&D.position&&N(S,x,D.position)){o=D.graphic;v.target=M(D.position,t);break}}}}else{if(h){var T=t.getNodes(t.NodeType.PLOT_BOUND_SELECTION).node();v.target=C(h,T)?h:null;o=r.getData(h)}else{v.target=w(f,t);if(v.target){o=r.getData(v.target)}}}v.data=y.extend(true,v.data,_.buildEventGraphicInfo(t,o,n));return v}var V=function(){V.superclass.constructor.apply(this,arguments)};e.extend(V,A);R.prototype._createTooltipTimerHandler=function(e,t){this._tooltipTimerHandler=new V};V.prototype._selectedHandler=function(){if(this._showTimeOut){clearTimeout(this._showTimeOut);this._showTimeOut=null}if(this._hideTimeOut){clearTimeout(this._hideTimeOut);this._hideTimeOut=null}this._hideHandler()};R.prototype._getShowTooltipHandler=function(e,i){function a(){var a=B(e,i);var r=i._getRenderType();var o=i.getProperties().get("interaction.selectByTimeAxisGroup");if(r.indexOf("timeseries")>-1){var n=this._handleShowDetail(e,i),l;if(n&&n.tooltipData&&n.tooltipData.data){l=n.tooltipData.data}a=y.extend(true,a,{timeTooltipData:l,data:{selectByTimeAxisGroup:o}})}var s="showTooltip";if(e.data.type==="instantTooltip"){s="showInstantTooltip"}i.fireExternalEvent(s,{name:t.Event.TooltipShow.name,data:a})}return a.bind(this)};R.prototype._getHideTooltipHandler=function(e,i){function a(){var a="hideTooltip";if(e.data.type==="instantTooltip"){a="hideInstantTooltip"}i.fireExternalEvent(a,{name:t.Event.TooltipHide.name})}return a.bind(this)};R.prototype._processDecoration=function(e,t){if(m.isArray(t.data)){var i=e._properties,a=i.get("tooltip.formatString"),r=i.get("general.showAsUTC");t.data.forEach(function(e,i){if(e.type==="Dimension"&&t.data.timeDimensions!==undefined&&t.data.timeDimensions.indexOf(i)>=0){_.formatTimeDimension(e,a,r)}})}};R.prototype.refreshedTooltip=function(e,t){this.hideDetail.apply(this,arguments);this._tooltipTimerHandler.reset()};R.prototype.showTooltipHoverOnPlot=function(e,t){e.data.type="instantTooltip";t.fireEvent("showDetail",e.data)};R.prototype.hideTooltipHoverOnPlot=function(e,t){e.data.type="instantTooltip";t.fireEvent("hideDetail",e.data)};R.prototype.showTooltipClickBigData=function(e,t){t.fireEvent("showDetail",e.data);t.fireEvent("hideDetail",{target:e.data.target,action:"select",type:"instantTooltip"})};R.prototype.hideTooltipClickBigData=function(e,t){t.fireEvent("hideDetail",e.data);t.fireEvent("hideDetail",{target:e.data.target,action:"deselect",type:"instantTooltip"})};var F=z.getActionById("tooltipBehaviorDefinition");F.setHandler(R);var H=function(){};e.extend(H,d);H.prototype.clickOnAxisLabel=function(e,t){if(p.isSelectable(t,"CATEGORY")){H.superclass.clickOnAxisLabel.apply(this,arguments)}};H.prototype.filterCtx=function(e,t){var i={};if(t&&t.name==="categoryAxis2"){i["categoryAxis2"]=e}else{i["categoryAxis"]=e}return i};var U=z.getActionById("axisBehaviorDefinition");U.setHandler(H);var W=function(){};e.extend(W,f);W.prototype.click=function(e,t){var r=t.getProperties().get("interaction.selectability.behavior");r=r?r.toUpperCase():r;var o=a.getContext(e.data.currentTarget).isSemantic;if(r===i.SELECTION_BEHAVIOR.SERIES&&o){return}if(p.isSelectable(t,"SERIES")){W.superclass.click.apply(this,arguments)}};var G=z.getActionById("legendBehaviorDefinition");G.setHandler(W);var Y=function(){};e.extend(Y,v);Y.prototype.lassoStart=function(e,t){var a=t.getProperties().get("interaction.selectability.behavior");if(a===i.SELECTION_BEHAVIOR.DATAPOINT){Y.superclass.lassoStart.apply(this,arguments)}};Y.prototype._fireShowDetail=function(e,t,i){e.fireEvent("showDetail",{target:t,mode:"actionMode",point:i,bLassoEnd:true});e.fireEvent("hideDetail",{action:"select",type:"instantTooltip"})};Y.prototype._fireHideDetail=function(e){e.fireEvent("hideDetail",{mode:"actionMode"});e.fireEvent("hideDetail",{action:"select",type:"instantTooltip"})};var X=z.getActionById("lassoBehaviorDefinition");X.setHandler(Y);n.register("noHoverBehavior",z)});define("sap/viz/chart/behavior/AllBehaviors",["sap/viz/chart/behavior/DefaultBehavior","sap/viz/chart/behavior/SFinBehavior","require"],function(){return Array.prototype.slice.apply(arguments)});define("sap/viz/chart/scales/ColorScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/scales/ScaleUtil","sap/viz/framework/common/util/ArrayUtils"],function(e,t,i,a,r,o){var n=function(e,t,a){n.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.ColorScale";this._name=null;this._type="color";a=a||{};this._needRuntimeColorScales=a.needRuntimeColorScales!==false;this._sharedRuntimeColorScale=a.sharedRuntimeColorScale;this._metaData=(a.metaData||[]).map(function(e){var t=i.extend(true,{},e);if(!a.respectHidden){delete t.hidden}return t});this._runtimeColorScale=null;this._mergedRuntimeColorScale=null;this._colorId=a.colorId;this._initScale(a)};e.extend(n,t);n.prototype._initScale=function(e){if(this._scale===undefined){this._scale=d3.scale.ordinal();var t=[];for(var i=0,o=this._domain.length;i<o;i++){t.push(a.valuesToString(this._domain[i]))}var n=r.shrinkedDomain(this._domain,this.getMetaData());var l=e.colorId||"color";if(this._needRuntimeColorScales&&this._sharedRuntimeColorScale&&n.length!==0){this._handleRuntimeScale(t,n,l)}else{var s=[].concat(this._range);this._range=s.splice(0,t.length>0?t.length:1);this._scale.domain(t).range(this._range);if(this._needRuntimeColorScales){this._constructRuntimeColorScale(l)}}}};n.prototype._constructRuntimeColorScale=function(e){var t=[];var a=r.shrinkedDomain(this._domain,this.getMetaData());var o=this.getMetaData().map(function(e){return e.id});for(var n=0;n<a.length;n++){t.push({dataContext:a[n],scaleResult:{index:n,value:this._range[n%this._range.length]}})}this._runtimeColorScale={feed:e,fields:o,results:t};this._mergedRuntimeColorScale=i.clone(this._runtimeColorScale)};n.findMatchRuntimeScale=function(e,t){var i=e&&e.mappings;if(!i){return e}for(var a=0;a<i.length;++a){var r=i[a];var n=r.fields;if(o.equal(n,t)){return r}}return null};n.prototype._handleRuntimeScale=function(e,t,a){var o=[],l;var s=[];var u=[];var c=this._sharedRuntimeColorScale;var h=[];var p=this.getMetaData().map(function(e){return e.id});var d=n.findMatchRuntimeScale(c,p);var f=this._range.length;var v=[];if(d){var g=d.results;for(l=0;l<g.length;l++){v[g[l].scaleResult.index%f]=1}}var m,y;for(l=0;l<t.length;l++){m=t[l];var _=r.findScaleResult(d,m,r.domainArrayCompare);if(_){_=i.clone(_);y=_.scaleResult.index%this._range.length;v[y]=2;_.scaleResult.value=this._range[y];o[l]=_.scaleResult.value;u.push(_)}}var A=[];var b=[];for(l=0;l<f;++l){if(v[l]===1){b.push(l)}else if(v[l]!==2){A.push(l)}}A=A.concat(b);var x=A.length;var S=f;var D=0;for(l=0;l<t.length;l++){m=t[l];if(o[l]==null){y=D<x?A[D]:S++;++D;var w=y%f;var C=this._range[w];o[l]=C;var T={dataContext:m,scaleResult:{index:y,value:C}};s.push(T);u.push(T)}}this._range=o;this._scale.domain(e).range(this._range);this._runtimeColorScale={feed:a,fields:p,results:s};this._mergedRuntimeColorScale={feed:a,fields:p,results:u}};n.prototype.runtimeColorScale=function(){return this._runtimeColorScale};n.prototype.mergedRuntimeColorScale=function(){return this._mergedRuntimeColorScale};n.prototype.hasDomain=function(e){var t=false;if(this._domain&&this._domain.length&&e&&e.length){for(var i=this._domain.length;!t&&i>=0;--i){t=o.equal(this._domain[i],e)}}return t};n.prototype.scale=function(e){if(e){var t=this._metaData.map(function(e){return!!e.hidden});if(e instanceof Array){e=e.filter(function(e,i){return!t[i]})}return this._scale(a.valuesToString(e))}else{return this._scale(e)}};n.prototype.destroy=function(){n.superclass.destroy.apply(this,arguments);this._sharedRuntimeColorScale=null;this._runtimeColorScale=null;this._mergedRuntimeColorScale=null};return n});define("sap/viz/chart/util/PropertyUtils",["sap/viz/framework/common/util/NumberUtils"],function(e){var t={};var i="all";t.getBubbleDepth=function(t,a,r){if(!r||!r.length){return 0}var o=t.get(a);var n=r.length;if(o===i){o=r.length}else{o=parseInt(o);if(e.isNoValue(o)||o<=0){o=t.getDefault(a)}}return Math.min(o,n)};return t});define("sap/viz/chart/scales/ColorScaleProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleUtil","sap/viz/framework/scale/ScaleRepository","sap/viz/chart/scales/ColorScale","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/util/PropertyUtils","sap/viz/chart/scales/ScalesFactory","sap/viz/framework/scale/ScaleRoleTypeMapFactory","sap/viz/chart/scales/ScaleUtil"],function(e,t,i,a,r,o,n,l,s,u,c,h){var p=o.transpose;var d=h.generateUniqueDomain;var f=function(i,l,c,h,f,v){f=f||{};var g=f.seriesType;var m=f.colorPaletteNum;var y=f.customerColorPalette;var _=c.get(l);var A=c.get(l,"templateValue");var b=f.isDual;var x=c.get("sharedRuntime");var S=t.getScaleOfType(x,f.colorId||"color");var D=f.isPaging||!f.isGhost;var w=_?_.palette:y?y:null;if(o.equal(w,r.COLOR.SAPColorSingleAxis)&&y){w=y}var C={sharedRuntimeColorScale:S,needRuntimeColorScales:D,metaData:i.metaData,colorId:f.colorId};if(!e.isExist(i)){return new a([],w,C)}var T=[];var z=[A&&A.palette&&A.palette[0]||r.COLOR.SAPColorDualAxis1,A&&A.palette&&A.palette[1]||r.COLOR.SAPColorDualAxis2];if(i.values){if(g==="yy"){var L=s.getBubbleDepth(h.origin,"plotArea.colorDepth",i.values);var P=h.get("legend.ignoreNoValue");T=d(i.values,L,i.metaData,i.rowArray,v,P,"color");C.respectHidden=true}else if(g!=="bullet"){T=p(i.values);var k=f.noValueIndex;if(e.isArray(k)&&k.length>0){k.forEach(function(e){T.splice(e,1);i.rowArray[e].isNoValue=true})}}}var E=false;if(w&&e.isArray(w[0])&&(e.isArray(w[0][0])||e.isArray(w[0][1]))){E=true}if(f.seriesType==="bullet"||C.seriesType==="timeseries_bullet"){C.mnds=f.mnds;C.isTime=f.isTime;C.noValueIndex=f.noValueIndex;return new(u.getScale("bullet","color"))(i,h,C,c)}else{var I;if(!b){if(E){w=w[0][0]||r.COLOR.SAPColorSingleAxis}else if(!w){w=A&&A.palette||r.COLOR.SAPColorSingleAxis}else if(e.isArray(w)&&e.isArray(w[0])){if(f.chartFamily==="combex"){w=w[0]}else{w=r.COLOR.SAPColorSingleAxis}}I=r.COLOR.SAPColorSingleAxis;if(h.origin.has("plotArea.colorPalette")){h.origin.add("plotArea.colorPalette",{defaultValue:r.COLOR.SAPColorSingleAxis,serializable:false,get:function(){var e=_?_.palette:null;if(!e||e===r.COLOR.SAPColorSingleAxis){e=this.value||w}return e}})}}else{if(E){if(m===0){w=w[m][1]||z[m]}else{w=w[m]||z[m]}}else if(e.isArray(w)&&e.isArray(w[m])){w=w[m]}else{w=z[m]}I=z;if(m===0){if(h.origin.has("plotArea.primaryValuesColorPalette")){h.origin.add("plotArea.primaryValuesColorPalette",{defaultValue:z[0],serializable:false,get:function(){return w}})}}if(m===1){if(h.origin.has("plotArea.secondaryValuesColorPalette")){h.origin.add("plotArea.secondaryValuesColorPalette",{defaultValue:z[1],serializable:false,get:function(){return w}})}}}if(!e.isExist(c.getDefault(l))){if(f.chartFamily==="combex"){I=[[r.COLOR.SAPColorSingleAxis,z[0]],z[1]]}c.add(l,{serializable:true,defaultValue:{feed:l,type:"color",palette:n.clone(I,true)}})}return new a(T,w,C)}};i["colorScale"]=f;c.register(null,null,function(e,t,i,a){return{role:e.TO_OLD_SCALEROLE[t[a].role],type:e.TO_OLD_SCALETYPE[t[a].role],name:a}});c.register(null,"color",function(e,t){return{colorPaletteNum:0,role:e.TO_OLD_SCALEROLE[t["color"].role],type:e.TO_OLD_SCALETYPE[t["color"].role],name:"color"}});c.register(null,"color2",function(e,t){return{colorPaletteNum:1,role:e.TO_OLD_SCALEROLE[t["color2"].role],type:e.TO_OLD_SCALETYPE[t["color2"].role],name:"color"}})});define("sap/viz/chart/scales/PercentageValueScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/TypeUtils"],function(e,t,i){var a=function(e,t,i){this.__className="sap.viz.scale.PercentageValueScale";a.superclass.constructor.apply(this,arguments)};e.extend(a,t);a.prototype.scale=function(e){if(this._scale===undefined||this._isReset===true){this._initScale()}var t=this._scale(+e);return t<0?0:t};return a});define("sap/viz/chart/scales/ScaleTypeHandler",["sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/scales/PercentageValueScale"],function(e,t,i,a,r){var o="layout";var n=function(e){var t;var i=true;for(t=0;t<e.length;t++){if(!(e[t].hasOwnProperty("min")&&e[t].hasOwnProperty("max"))){i=false;break}}return i};var l=function(t){if(e.isArray(t)){for(var i in t){if(t.hasOwnProperty(i)){if(!e.isArray(t[i])){return true}else{return false}}}}return false};var s=function(t,i,a,r){if(e.isArray(t)){for(var o=0,n=t.length;o<n;++o){if(!t.hasOwnProperty(o)){continue}var l=t[o];s(l,i,a,r);if(r.withNoValue&&!r.allNoValue&&r.withMiddleValue&&r.withZeroValue){break}}}else{if(e.isExist(t)){r.allNoValue=false;if(t!==i&&t!==a){r.withMiddleValue=true}if(t===0){r.withZeroValue=true}}else{r.withNoValue=true}if(r.withNoValue&&!r.allNoValue&&r.withMiddleValue&&r.withZeroValue){return}}};var u=function(t){if(t==null){return true}for(var i in t){if(t[i]!=null){for(var a in t[i]){if(t[i][a]!=null){return false}}}else if(e.isArray(t[i])){if(t[i].length!==0){return false}}}return true};var c=function(e,t){if(!l(e)){for(var i in e){if(e.hasOwnProperty(i)){c(e[i],t)}}}else{t.push(e)}};var h=function(t){for(var i in t){if(t.hasOwnProperty(i)){for(var a in t[i]){if(t[i].hasOwnProperty(a)){if(e.isArray(t[i][a])){return true}else{return false}}}}}};var p=function(t){if(!e.isArray(t)){t=[t]}var i;var r;t.forEach(function(t){var o={};if(e.isArray(t)){o=p(t)}else{if(a.isNoValue(t)){return}o={min:t,max:t}}if(i===undefined){i=o.min;r=o.max}if(!a.isNoValue(o.min)){i=i>o.min?o.min:i;r=r>o.max?r:o.max}});return{min:i,max:r}};var d=i.prepareValueScaleData;var f=i.getStackedArrayValues;var v=function(t,i){if(t){if(e.isArray(t)){var a=[0,0,0];for(var r=t.length-1;r>=0;r--){v(t[r],a)}if(a[0]<i[0]){i[0]=a[0]}if(a[1]>i[1]){i[1]=a[1]}}else{var o=+t;if(i.length>2){i[2]=i[2]+o;i[0]=i[2]<i[0]?i[2]:i[0];i[1]=i[2]>i[1]?i[2]:i[1]}else if(o<0){i[0]+=o}else{i[1]+=o}}}};var g=function(t,i){if(e.isArray(t)){for(var a in t){if(t.hasOwnProperty(a)){g(t[a],i)}}}else{i[1]+=Math.abs(t)}};var m={stacked_combination:function(t,i,a,r,n,l){var s=[];var u=t.values;t.lineRawRange=t.lineRawRange||t.range;if(e.isArray(t.values)&&h(t.values)){c(t.values,s);t.values=s}if(r===o){var d=[];var v=[];for(var g in t.values){if(t.values.hasOwnProperty(g)){var m=t.values[g];var y=[];var _=[];for(var A in m){if(m[A]&&m.hasOwnProperty(A)){if(l&&l[A]&&n){var b=n[l[A].mndIndex||0];if(b==="bar"){y.push(t.values[g][A])}else{_.push(t.values[g][A])}}}}if(y.length){d[g]=[];d[g][0]=0;d[g][1]=0;f(y,d[g])}if(_.length){v[g]=[];var x=p(_);v[g][0]=x.min;v[g][1]=x.max}}}t.range=d.concat(v);t.stackedRange=d;t.lineRange=v}i.minMax=p(t.range);var S=a(t,i);t.values=u;return S},stacked:function(e,t,i,a){d(e,a,t&&t.rangeIndex);t=t||{};t.minMax=p(e.range);var r=i(e,t);if(!r.isFixed()){var o;if(n(e.metaData)){var l;var s=[0,0];for(l=0;l<e.metaData.length;l++){s[0]=Math.min(s[0],e.metaData[l].min,s[0]+e.metaData[l].min);s[1]=Math.max(s[1],e.metaData[l].max,s[1]+e.metaData[l].max)}var u=1;if(e.values.length){u=e.values[0].length/e.metaData.length}o=[s[0]*u,s[1]*u]}if(o){r.maximizedDomain=o}}return r},waterfall:function(e,t,i,a){t.minMax=p(e.range);return i(e,t)},area:function(e,t,i,a){if(a===o){var r=[];for(var n in e.values){if(e.values.hasOwnProperty(n)){r[n]=[];r[n][0]=0;r[n][1]=0;v(e.values[n],r[n])}}e.range=r}t.minMax=p(e.range);return i(e,t)},spread:function(e,t,i){e.lineRawRange=e.lineRawRange||e.range;t=t||{};t.minMax=p(e.range);return i(e,t)},bullet:function(e,t,i){var a=[e.minValue,e.maxValue];e.range=a;t=t||{};t.minMax=p(e.range);return i(e,t)},percentage:function(e,t,i,a){if(a===o){var n=[];for(var l in e.values){if(e.values.hasOwnProperty(l)){n[l]=[];n[l][0]=0;n[l][1]=0;g(e.values[l],n[l])}}e.range=n;return new r(n,[0,1])}else{t.minMax=p(e.range);return i(e,t)}},yy:function(e,t,i){var a=t||{};a.allowZeroMinMax=true;a.minMax=p(e.range);var r=i(e,a);var o=r._domain[0],n=r._domain[1];var l=e.values;var u={withNoValue:false,allNoValue:true,withMiddleValue:false,withZeroValue:false};for(var c=0,h=l.length;c<h;++c){s(l[c],o,n,u);if(u.withNoValue&&!u.allNoValue&&u.withMiddleValue&&u.withZeroValue){break}}var d=u.withNoValue,f=u.allNoValue,v=u.withMiddleValue,g=u.withZeroValue;if(d){r._domain.withNoValue=true}if(f){r._domain=[]}if(v){r._domain.withMiddleValue=true}if(g){r._domain.withZeroValue=true}return r}};return m});define("sap/viz/chart/scales/ValueScaleProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleRepository","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/scales/ScaleTypeHandler","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/framework/scale/ScaleDataParseFactory","sap/viz/chart/scales/ScalesFactory"],function(e,t,i,a,r,o,n,l){var s=function(t,r,n,l,s){s=s||{};var c=s.seriesType,h=s.role,p=s.series;var d;if(r=="valueAxis"){d="plotArea.dataShape.primaryAxis"}else if(r=="valueAxis2"){d="plotArea.dataShape.secondaryAxis"}var f;if(d){f=l.get(d);if(!(f instanceof Array)){f=l.get(d,"defaultValue")}}var v=n.get(r)||{};v=i.extend({},v);if(r==="valueAxis"&&s&&s.chartFamily==="ty"&&c==="stacked"){v.rangeIndex=s.rangeIndex}var g=[r,"valueAxis","plotArea.valueAxis"];for(var m=0;m<=g.length;m++){if(m===g.length){v.allowDecimals=true}else if(l.has(g[m]+".label.allowDecimals")){v.allowDecimals=l.get(g[m]+".label.allowDecimals");break}}var y=a[c].call(this,t,v,o.generateValueScale,h,f,s.color);if(!e.isExist(n.getDefault(r))&&(r.indexOf("valueAxis")>-1||r.indexOf("actualValues")>-1)){n.add(r,{serializable:true,defaultValue:{feed:r,type:"linear",min:"auto",max:"auto"}})}y.setOption(n.get(r));if(s.comboexStackSeries||s.isFlexibleStack){u(y,p,s.isTrellis,r)}return y};function u(e,t,i,a){var r=e.getDomainFixed();var o;if(i){for(var n=0;n<t.length;n++){for(var l=0;l<t[n].length;l++){var s=c(a,t[n][l]);if(!s){continue}o=o||s;if(o[0]>s[0]){o[0]=s[0]}if(o[1]<s[1]){o[1]=s[1]}}}}else{o=c(a,t)}if(o){var u=e.getDomain();if(!r[0]){u[0]=Math.min(u[0],o[0])}if(!r[1]){u[1]=Math.max(u[1],o[1])}e.setDomain(u);var h=[];h[0]=Math.min(e.getAutoDomain()[0],o[0]);h[1]=Math.max(e.getAutoDomain()[1],o[1]);e.setAutoDomain(h)}}function c(t,i){var a={};var r={};if(i.every(function(e){return!e.settings.group})){return null}i.forEach(function(e,i){if(e.spec.mndKey!==t||!e.settings.group){return}var o=e.settings.group;var n=a[o]=a[o]||[];var l=r[o]=r[o]||[];e.forEach(function(e,i){n[i]=n[i]||0;l[i]=l[i]||0;var a=e[t]||0;if(a>0){n[i]=n[i]+a}else{l[i]=l[i]+a}})});function o(t){return Object.keys(t).map(function(i){var a=t[i],r=a[0],o=a[0];for(var n=1;n<a.length;n++){if(r>a[n]||!e.isExist(r)&&e.isExist(a[n])){r=a[n]}if(o<a[n]||!e.isExist(o)&&e.isExist(a[n])){o=a[n]}}return[r,o]}).reduce(function(e,t){if(e[0]>t[0]){e[0]=t[0]}if(e[1]<t[1]){e[1]=t[1]}return e},[0,0])}var n=o(a);var l=o(r);return[l[0],n[1]]}t["valueScale"]=s;l.register(null,"value",r);n.register(null,"valueAxis",function(t,i){var a=t["valueAxis"]();if(a.values){var r=function(t){var i=0;var a=function(t){if(e.isArray(t)){i++;a(t[0])}};a(t);return i};if(i.indexOf("trellis")>-1){while(r(a.values)<4){var o=function(t){var i;if(e.isArray(t)&&e.isArray(t[0])){for(i=0;i<t.length;i++){if(t[i]!==undefined){o(t[i])}}}else{if(t.length){for(i=0;i<t.length;i++){t[i]=[t[i]]}}else{t[0]=[]}}};o(a.values)}}}return t})});define("sap/viz/chart/scales/CategoryScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/DataUtils"],function(e,t,i){var a=function(e,t){a.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.CategoryScale";this._type="categorical";this._initScale()};e.extend(a,t);a.prototype.getDomain=function(){this._ensureScaled();return this._domain};a.prototype.getRange=function(){this._ensureScaled();return this._range};a.prototype.scale=function(e){this._ensureScaled();return this._scale(i.valuesToString(e))};a.prototype.getRangeInterval=function(){this._ensureScaled();return this._scale.range()};a.prototype.getRangeBand=function(){this._ensureScaled();return this._rangeBand};a.prototype._ensureScaled=function(){if(this._scale===undefined||this._isReset===true){this._initScale()}};a.prototype._initScale=function(){var e=this._domain;var t=this._range;var a=e.length;var r=Math.abs(t[0]-t[1])/a;this._rangeBand=r;var o=Array(a);var n=e.map(function(e,t){var a=t*r;o[t]=[a,a+r];return i.valuesToString(e)});this._scale=d3.scale.ordinal().domain(n).range(o);this._isReset=false};a.prototype.destroy=function(){a.superclass.destroy.call(this);this._rangeBand=null;this._isReset=null};return a});define("sap/viz/chart/scales/CategoryScaleProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleRepository","sap/viz/chart/scales/CategoryScale","sap/viz/framework/common/util/ArrayUtils"],function(e,t,i,a){var r=a.transpose;var o=function(t,a,o,n){if(e.isArray(t.values)){var l=r(t.values);var s=new i(l,[0,1]);return s}};t["categoryScale"]=o});define("sap/viz/chart/scales/ScaleOptionsProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleOptionFactory"],function(e,t){function i(e,t,i,a){var r=[];if(!e.rowArray){return r}var o=a||e.rowArray.length;i=i||0;for(var n=o-1;n>=0;--n){var l=t[n+i].every(function(e){return e.valueAxis==null&&e.valueAxis2==null});t[n+i].isEmpty=l;if(l){r.push(n)}}return r}t.register("timeseries.*column|timeseries_bullet",null,function(e,t,i,a){e.allowEqual=true;e.dataTimeLevel=i.statusManager().get("timeLevels")[0];e.showAsUTC=a.get("general.showAsUTC")});t.register("stacked_","waterfallType",function(e,t,i,a){e.isStacked=true});t.register("timeseries.*stacked_column","valueAxis",function(e,t,i,a){e.isStacked=true;e.rangeIndex=t._rangeIndex});t.register("dual_.*",null,function(e,t,i,a){e.isDual=true});t.register(null,"valueAxis",function(e,t,i,a,r){e.color=t.color?t.color().rowArray:null});t.register(null,"valueAxis2",function(e,t,i,a,r){e.color=t.color2?t.color2().rowArray:null});t.register("^((?!(pie|donut|bullet|heatmap|treemap|tagcloud|timeseries)).)*$","color",function(e,t,a,r,o){var n=r.get("legend.ignoreNoValue");if(n&&!/bubble|scatter/.test(t.chartType())){e.noValueIndex=i(t.color(),t.getInitSeries())}e.colorId="color"});t.register("timeseries_((?!(bubble|scatter|combination|bullet)).)*$","color",function(e,t,a,r,o){var n=r.get("legend.ignoreNoValue")&&r.get("plotArea.dataPoint.invalidity")!=="connect";if(n){e.noValueIndex=i(t.color(),t.getInitSeries())}e.colorId="color"});t.register("timeseries_.*combination$","color",function(e,t,a,r,o){var n=r.get("legend.ignoreNoValue");if(n){e.noValueIndex=i(t.color(),t.getInitSeries(),0,r.get("plotArea.dataPoint.invalidity")==="connect"?1:0)}e.colorId="color"});t.register("pie|donut","color",function(t,i,a,r,o){var n=r.get("legend.ignoreNoValue");if(n){var l=i.size&&i.size();for(var s=l.values.length-1;s>=0;--s){if(!e.isExist(l.values[s])){t.noValueIndex=t.noValueIndex||[];t.noValueIndex.push(s)}}}t.colorId="color"});var a=["actualValues","additionalValues","forecastValues","targetValues"];var r=a.length;t.register("bullet","color",function(e,t,i,o,n){var l=o.get("legend.ignoreNoValue");if(l){e.noValueIndex=[];var s=t.getInitSeries();for(var u=0;u<s.length;++u){var c=s[u];var h=[false,false,false,false];var p=false;for(var d=0;d<c.length;++d){var f=c[d];a.forEach(function(e,t){if(f[e]!=null){p=h[t]=true}})}c.isEmpty=!p;h.forEach(function(t,i){if(!t){e.noValueIndex.push(u*r+i)}})}}e.colorId="color"});t.register("^((?!(dual_timeseries_combination|timeseries_combination)).)*$","color2",function(e,t,a,r,o){var n=r.get("legend.ignoreNoValue");if(n){var l=t.color();var s=l.rowArray?l.rowArray.length:0;e.noValueIndex=i(t.color2(),t.getInitSeries(),s)}e.colorId="color2"});t.register("timeseries_.*combination$","color2",function(e,t,a,r,o){var n=r.get("legend.ignoreNoValue")&&r.get("plotArea.dataPoint.invalidity")!=="connect";if(n){var l=t.color();var s=l.rowArray?l.rowArray.length:0;e.noValueIndex=i(t.color2(),t.getInitSeries(),s)}e.colorId="color2"});t.register("combinationEx",null,function(e,t,i,a,r){e.isDual=r.length>1;e.comboexStackSeries=true});t.register("trellis",null,function(e,t,i,a,r){e.isTrellis=true});t.register("stacked_column",null,function(e,t,i,a){if(a.origin.get("plotArea.series")){e.isFlexibleStack=true}})});define("sap/viz/chart/dynamicScales/BaseDyScaleProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/scale/DynamicScaleRepository"],function(e,t,i,a,r){function o(e,t,i,a){this._type=e;this._propertyMgr=t;this._dataModel=i.dataModel;this._scales=i.scales;this._runtime=a;this._units=this._runtime.statusManager().get("data.unit")||{};this._mainValue="valueAxis"}var n=3,l=6,s=9,u=12,c=15;var h=[c,u,s,l,n];function p(e){var t=e.toString();var i=t.length-1;var a=0;for(var r=0;r<h.length;r++){if(i>=h[r]){a=h[r];break}}return a}o.prototype.getValue=function(e){return e.valueAxis||e.valueAxis2};o.prototype.calculatedynamicScale=function(i,r,o){if(!i||!r||i.length===0||r.length===0){return null}var n=this._dataModel[o]();var l=this.getUnit(n,this._units);var s=l[0];var c=l[1];var h=n.metaData.map(function(e){return e.id||e.name});var d=[];var f=0;r.forEach(function(e,t){if(e===undefined){return}var a=p(e);var r=p(i[t]);f=0;if(r===a){f=r}else if(r+3===a&&a<=u){f=a}else if(r+6===a&&a<=u){f=r+3}d.push(f)});var v=null;if(t.unique(d).length!==1){f=0}else{f=d[0]}var g={3:"K",6:"M",9:"B",12:"T",15:"Q"};if(f&&g[f]||f===0&&s){var m=" in";if(g[f]){m+=" "+g[f]}if(s){m+=" "+s}var y=Math.pow(10,f);var _=function(t,i,r,o){if(y===0){t=a.format(t,i,r,o)}else if(e.isNumber(t)){t/=y;t=+t.toFixed(2);if(i&&i.indexOf("u")===i.length-1){t=t.toString()}else{t=a.format(t,i,r,o)}}else{t=t.toString()}return t};v={factor:y,symbol:g[f]||"",unit:s||"",isDifferentUnit:c,postfix:m,format:_,metaKeys:h}}return v};function d(e){return Math.abs(parseInt(e))}o.prototype.cleanValue=d;function f(e){var t=e.map(d).sort(function(e,t){return e-t});return t}o.prototype.cleanRange=f;o.prototype.getUnit=function(e,t){var i=false;var a="";if(e&&e.metaData&&e.metaData.length>0){a=t[e.metaData[0].id]||"";for(var r=1;r<e.metaData.length;r++){var o=t[e.metaData[r].id]||"";if(o!==a){i=true;a="";break}}}return[a,i]};o.prototype.generateResult=function(e,t){var i=null;var a=this._dataModel;if(this._type.indexOf("dual")>-1&&(e||t)){i={valueAxis:e,valueAxis2:t,onlyChartTitle:false};if(e&&t){var r=e.unit===t.unit;var o=e.factor===t.factor;if(o&&r){i.onlyChartTitle=true;i.postfix=e.postfix}else{i.showUnitOnDataLabel=!r||!o;i.showSymbolOnDatalabel=!r||!o}}else{i.showUnitOnDataLabel=true;i.showSymbolOnDatalabel=true}}else if(e){i={valueAxis:e,postfix:e.postfix,onlyChartTitle:true}}if(i){if(e&&e.isDifferentUnit||t&&t.isDifferentUnit){i.showUnitOnDataLabel=true}i.getScaleFactor=function(e){var t=[];for(var a in i){if(i.hasOwnProperty(a)&&i[a]&&i[a].format){t.push(i[a])}}for(var r=0;r<t.length;r++){if(t[r]&&t[r].metaKeys.indexOf(e)>-1){return t[r]}}}}return i};o.prototype.getMinMax=function(){return{}};o.prototype.getdynamicScale=function(){var e=this.getMinMax();var t=this._dataModel;var i=this.calculatedynamicScale(e.minTable,e.maxTable,this._mainValue);var a=t._valueAxis2&&this.calculatedynamicScale(e.minTable2,e.maxTable2,"valueAxis2");return this.generateResult(i,a)};return o});define("sap/viz/chart/dynamicScales/BaseColumnDyScaleProcessor",["sap/viz/framework/common/util/oo","sap/viz/framework/scale/DynamicScaleRepository","sap/viz/chart/dynamicScales/BaseDyScaleProcessor"],function(e,t,i){function a(e,t,i,r){a.superclass.constructor.apply(this,arguments)}e.extend(a,i);["column","dual_column","bar","dual_bar","line","horizontal_line","dual_line","dual_horizontal_line","timeseries_line","combination","horizontal_combination","dual_combination","dual_horizontal_combination","timeseries_column","timeseries_combination","dual_timeseries_combination"].forEach(function(e){t[e]=a});a.prototype.chooseMinMaxFromRanges=function(e){var t=[],i=[];if(e){e.forEach(function(e){if(e){e=this.cleanRange(e);t.push(e[0]);i.push(e[1])}},this)}return[t,i]};a.prototype.getMinMax=function(){var e={};var t=this._dataModel[this._mainValue]();var i=this.chooseMinMaxFromRanges(t.range);e.minTable=i[0];e.maxTable=i[1];if(this._dataModel._valueAxis2){i=this.chooseMinMaxFromRanges(this._dataModel._valueAxis2.range);e.minTable2=i[0];e.maxTable2=i[1]}return e};return a});define("sap/viz/chart/views/ChartView",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/layout/GridLayout","sap/viz/chart/components/title/Title","sap/viz/chart/components/Background","sap/viz/chart/components/scrollbar/PaginationScrollbar","sap/viz/chart/components/legend/ColorLegend","sap/viz/chart/components/legend/LegendGroup","sap/viz/chart/components/container/UIContainer","sap/viz/chart/metadata/properties/PropertyLoader","sap/viz/chart/behavior/AllBehaviors","sap/viz/chart/components/util/TextUtils","sap/viz/chart/scales/ColorScaleProcessor","sap/viz/chart/scales/ValueScaleProcessor","sap/viz/chart/scales/CategoryScaleProcessor","sap/viz/chart/scales/ScaleOptionsProcessor","sap/viz/chart/dynamicScales/BaseColumnDyScaleProcessor"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d){var f=function(e,t){f.superclass.constructor.apply(this,arguments);var i=h.getProperties(t.chartType,this._isTrellis());this._properties.add(i);this._exposeMoreEvents("ready");this._exposeMoreEvents("renderComplete");this._exposeMoreEvents("reRenderComplete");this._exposeMoreEvents("initialized");this._exposeMoreEvents("plotScroll");this.runtime().statusManager().add("ChartPaddingInfo");this.runtime().statusManager().add("sizeChanged");var a=this._getLayoutDefinition();this._supportLazyRender=false;this.setLayoutAlgorithm(new a);this._outline={visible:false};this._background=null;this._backgroundNode=null;this._rootContainer=null;this._paginationScrollbar=null;this._paginationScrollbarNode=null;this._initialized=false;this._legendIsAUTO=false;this._createChildren();this._plotAreaLayout=null;this._semanticMgr=this.runtime().semanticManager()};i.extend(f,c);f.prototype._createChildren=function(){this._createBackground();this._createTitle();this._createLegendGroup();this._createPaginationScrollbar()};f.prototype._createPaginationScrollbar=function(){var e=this._getPaginationScrollbarKey();this._paginationScrollbar=new l(this.runtime(),{name:e})};f.prototype._createTitle=function(t){var i=this._getTitleModuleKey();var r=this._getTitleDefinition();var o=new r(this.runtime(),{name:i});if(a.isFunction(o.setPosition)){o.setPosition(t)}this.setChild(i,o,{priority:1,spacing:{spacingWithMainToRough:e.TITLE.SPACING_WITH_MAIN_TO_ROUGH,spacingMaxInPX:e.TITLE.SPACING_MAX_IN_PX}})};f.prototype._createLegendGroup=function(t){var i=this._getLegendGroupModuleKey();var r=this._getLegendGroupDefinition();var o=new r(this.runtime(),{name:i});if(a.isFunction(o.setPosition)){o.setPosition(t)}var n=this._getLegendDefinition();var l=this._getLegendInitOptions();var s=this._getLegendModuleKey();var u;if(a.isArray(n)){for(var c=0;c<n.length;c++){var h=n[c];var p=s[c];u=new h(this.runtime(),{name:p,options:l[c]});o.setChild(p,u)}}else{u=new n(this.runtime(),{name:s,options:l});o.setChild(s,u)}this.setChild(i,o,{priority:2,spacing:{spacingWithMainToRough:e.LEGEND_GROUP.SPACING_WITH_MAIN_TO_ROUGH,spacingMaxInPX:e.LEGEND_GROUP.SPACING_MAX_IN_PX}})};f.prototype._createBackground=function(){this._background=new n(this.runtime(),{name:"general.background"})};f.prototype.clear=function(){if(this._rootContainer){this._rootContainer.removeAttribute("tabIndex")}if(this._backgroundNode){this._backgroundNode.select(".v-background-body").remove();this._backgroundNode.select(".v-background-border").remove()}if(this._paginationScrollbarNode){this._paginationScrollbarNode.select(".v-background-body").remove()}var e;if(this.getChild(this._getTitleModuleKey())){e=this.getChild(this._getTitleModuleKey()).module}if(e){e.clear()}var t;if(this.getChild(this._getLegendGroupModuleKey())){t=this.getChild(this._getLegendGroupModuleKey()).module}if(t){t.clear()}};f.prototype.paginationOptions=function(){var e;var t=this.getData();if(t&&t.dataModel&&t.dataModel.getPaginationOptions){e=t.dataModel.getPaginationOptions()}return e};f.prototype.savePlotAreaLayout=function(e){var t=this._plotArea._children;for(var i in t){if(t.hasOwnProperty(i)){var a=t[i].module;if(a._size){e[i]={};e[i].module={};e[i].module._size={};e[i].module._size.width=a._size.width;e[i].module._size.height=a._size.height}}}};f.prototype._getDataRange=function(e,t){return this._plotArea&&this._plotArea._getDataRange(e,t)};f.prototype._resetPlotContainer=function(){if(this._plotArea){if(this._selections&&this._selections[this._plotArea.alias]){var t=this.paginationOptions();if(t){this._selections[this._plotArea.alias].selectAll("*").remove();if(!this._plotAreaLayout){this._plotAreaLayout={};this.savePlotAreaLayout(this._plotAreaLayout)}if(t.mode!==e.PAGINATION_MODE.UPDATE){this._plotAreaLayout=null}}else{this._plotAreaLayout=null;this._selections[this._plotArea.alias].remove();this._selections[this._plotArea.alias]=null}}this._plotArea.destroy();this._plotArea=null}};f.prototype._createPlotContainer=function(e){};f.prototype._getPaginationScrollbarKey=function(){return"paginationScrollbar"};f.prototype._getLegendGroupDefinition=function(){return u};f.prototype._getLegendGroupModuleKey=function(){return e.LEGEND_GROUP.KEY};f.prototype._getTitleDefinition=function(){return o};f.prototype._getTitleModuleKey=function(){return"title"};f.prototype._getLegendDefinition=function(){return[s]};f.prototype._getLegendInitOptions=function(){return[null]};f.prototype._getLegendModuleKey=function(){return["legend"]};f.prototype._getLayoutDefinition=function(){return r};f.prototype.layoutPaginationScrollbar=function(e){var t=this._plotArea._categoryAxis._position;var i=this._layoutResult.main;var a=this._plotArea._layoutResult.plot;var r=this._plotArea._layoutResult.categoryAxis;var o=this._plotArea._categoryAxis._layoutResult.axisTitle;var n=this._plotArea._categoryAxis._layoutResult.axisScrollbar;var l=this.paginationOptions();var s=1;if(l){s=l.ratio}this._paginationScrollbar.setPosition(t);var u;var c;var h;if(this._paginationScrollbar._isVertical()){var p=0;if(this._plotArea._valueAxis&&this._plotArea._valueAxis._position==="top"){p=this._plotArea._layoutResult.valueAxis.height}u=i.x+a.x+a.width;c=i.y+p;h=this._plotArea.getVScrollbar()._trackSize}else{if(this._paginationScrollbarOffset===undefined||this._paginationScrollbarOffset===null){if(o.y>0&&n.height>0){this._paginationScrollbarOffset=o.y-n.y-n.height}else{this._paginationScrollbarOffset=0}}u=i.x+a.x;c=i.y+a.height+r.height-o.height-n.height-this._paginationScrollbarOffset;h=this._plotArea.getHScrollbar()._trackSize}e.attr("transform","translate("+u+","+c+")");if(s!==null&&s!==undefined){this._paginationScrollbar.setContentSize(h/s)}else{var d=this._paginationScrollbar.getTrackSize()/this._paginationScrollbar.getContentSize();if(d){this._paginationScrollbar.setContentSize(h/d)}}this._paginationScrollbar.setTrackSize(h)};f.prototype._updateBackgroundColor=function(e){if(e&&e.background&&e.background.color){this._background.setData({color:e.background.color})}else{this._background.setData(null)}};f.prototype.render=function(t,i){if(!this._size.width||!this._size.height){return}this._rootContainer=t.node().parentNode;if(this._rootContainer){this._rootContainer.setAttribute("tabIndex",this._properties.get("general.tabIndex"));if(this._outline.visible||this._properties.get("interaction.enableKeyboard")){this._rootContainer.style.outline=null}else{this._rootContainer.style.outline="none"}}if(this._background){this._background.setSize(this._size);var a=t.node().tagName;if(a.toLowerCase()==="div"){this._backgroundNode=this._backgroundNode||t.append("svg").style("position","absolute").style("height","100%").style("width","100%;").append("g").attr("class","v-m-background")}else{this._backgroundNode=this._backgroundNode||t.append("g").attr("class","v-m-background")}this._updateBackgroundColor(this._semanticDisplayStyleRules);this._background.render(this._backgroundNode)}this._initRenderBase(t);this.clearSize(true);i=i||{};var r=this.paginationOptions();if(r){i.pagination=r;if(i.dataChanged&&r&&r.mode===e.PAGINATION_MODE.UPDATE||!i.isSizeChanged&&!i.propertiesChanged){i.plotAreaLayout=this._plotAreaLayout}else{this._plotAreaLayout=null;this._paginationScrollbarOffset=null}i._paginationScrollbar=this._paginationScrollbar}i._semanticDisplayStyleRules=this._semanticDisplayStyleRules;this.layout(i);var o=this._layoutAlgorithm.config;this._runtime.statusManager().set("ChartPaddingInfo",{padding:o.get("padding"),paddingLeft:o.get("paddingLeft"),paddingRight:o.get("paddingRight"),paddingTop:o.get("paddingTop"),paddingBottom:o.get("paddingBottom")});for(var n in this._children){if(n!=="plot"){if(this._children.hasOwnProperty(n)){this.getChild(n).module.render(this._selections[n],this._semanticDisplayStyleRules)}}}if(this.getChild("plot")){this.getChild("plot").module.render(this._selections["plot"],null,this._semanticDisplayStyleRules)}this._renderForPagination(t,r,i);this._runtime.statusManager().set("sizeChanged",i.isSizeChanged);this._dispatchInitialized()};f.prototype._renderForPagination=function(t,i,r){if(i&&this._plotArea&&this._plotArea._categoryAxis){var o=this._plotArea._categoryAxis.getChild("axisScrollbar");var n=this._plotArea.getChild("scrollbar");if(o&&o.module&&o.module.isVisible()&&o.module.isExist()||n&&n.module&&n.module.isVisible()&&n.module.isExist()){if(!this._paginationScrollbar){this._createPaginationScrollbar()}if(!this._paginationScrollbarNode){this._paginationScrollbarNode=t.append("g").attr("class","v-m-paginationScrollbar")}if(i.mode===e.PAGINATION_MODE.RESET){this._paginationScrollbarOffset=null}if(r.isSizeChanged||r.propertiesChanged||i.mode===e.PAGINATION_MODE.RESET||i.mode===e.PAGINATION_MODE.UPDATE){this.layoutPaginationScrollbar(this._paginationScrollbarNode);this._paginationScrollbar.render(this._paginationScrollbarNode)}if(!r.isSizeChanged&&r.dataChanged&&i.mode===e.PAGINATION_MODE.RESET){this._paginationScrollbar.setThumbPosition(0);this._paginationScrollbar._thumbRatio=0}else{if(this._paginationScrollbar._thumbRatio){this._paginationScrollbar.setThumbPosition(this._paginationScrollbar._thumbRatio*this._paginationScrollbar._maxThumbPosition)}}}}else{if(this._paginationScrollbarNode){this._paginationScrollbarNode.remove()}this._paginationScrollbarNode=null;if(this._paginationScrollbar&&a.isFunction(this._paginationScrollbar.destroy)){this._paginationScrollbar.destroy()}this._paginationScrollbar=null}};f.prototype._dispatchInitialized=function(){if(this._eventDispatch){this._eventDispatch.ready()}d.destroy();window.setTimeout(function(){if(this._eventDispatch){this._initialized=true;this._eventDispatch.initialized();if(this._customerDispatch&&this._customerDispatch.initialized){this._customerDispatch.initialized()}if(this._eventDispatch){this._eventDispatch.renderComplete()}if(this._customerDispatch&&this._customerDispatch.renderComplete){this._customerDispatch.renderComplete()}}window.setTimeout(function(){if(window._sap_viz_notify_load_complete){window._sap_viz_notify_load_complete()}},0)}.bind(this),0)};f.prototype._configLayout=function(){var e=this._getLayoutComponents();var t=this.calculatePaddingInPX(this._properties.origin,this._size.width,this._size.height);var i=t.propertyPaddingInPX;var a=t.propertyPaddingTopInPX;var r=t.propertyPaddingRightInPX;var o=t.propertyPaddingBottomInPX;var n=t.propertyPaddingLeftInPX;var l=this._layoutAlgorithm.config;l.set("totalWidth",this._size.width);l.set("totalHeight",this._size.height);l.set("padding",i);l.set("paddingTop",a);l.set("paddingRight",r);l.set("paddingBottom",o);l.set("paddingLeft",n);l.set("isTrellis",this._isTrellis());l.set("legendGroup.layout.respectPlotPosition",this._properties.origin.get("legendGroup.layout.respectPlotPosition"));l.set("legendGroup.layout.alignment",this._properties.origin.get("legendGroup.layout.alignment"));l.set("title.layout.respectPlotPosition",this._properties.origin.get("title.layout.respectPlotPosition"));return e};f.prototype._postLayout=function(){var e=this._layoutResult;for(var t in e){if(e.hasOwnProperty(t)){var i=this._selections[t];if(i.node().tagName==="DIV"){i.style({position:"absolute",left:e[t].x+"px",top:e[t].y+"px",height:e[t].height+"px",width:e[t].width+"px"})}else{i.attr("transform","translate("+e[t].x+", "+e[t].y+")")}}}};f.prototype._getLayoutComponents=function(){for(var t in this._children){if(this._children.hasOwnProperty(t)){var i=this.getChild(t);var a=i.option;var r=this._properties.proxy(t+".layout");var o=r.get("position");var n=r.get("maxWidth");var l=r.get("maxHeight");var s=r.get("width");var u=r.get("height");var c=null;var h=null;if(t===e.LEGEND_GROUP.KEY){if(o==="auto"){c="right";if(this._size.width<e.LEGEND_GROUP.AUTO_THRESHOLD){c="bottom"}}else{c=o}i.module.setPosition(c);if(this._properties.origin.get("legendGroup.forceToShow")&&!this._isTrellis()){n=1;l=1}c=i.module.getPosition()}else{c=i.module.getPosition?i.module.getPosition():o}if(c){a.position=c}if(!i.module.getPosition){a.defaultPosition=r.getDefault("position")}if(n){a.maxWidth=n}if(l){a.maxHeight=l}if(s){a.width=s;a.maxWidth=s}else{a.width=null}if(u){a.height=u;a.maxHeight=u}else{a.height=null}}}return this._children};f.prototype.setSize=function(){f.superclass.setSize.apply(this,arguments);if(this._rawData){this._updateData()}};f.prototype.getData=function(){return this._rawData};f.prototype.setData=function(e){this._rawData=e;this._updateData()};f.prototype._updateData=function(){var e=this._rawData;var t=this._getDataItems();this._data={};for(var i=0;i<t.length;i++){var r=t[i];if(!e.dataModel[r]){continue}this._data[r]=e.dataModel[r]();if(e.scales.hasOwnProperty(r)){this._data[r].scale=e.scales[r]}}if(a.isFunction(e.dataModel.context)){var o=e.dataModel.context();this._data["context"]=o}this._data._dataPoints=e.dataModel._dataPoints;this._data._seriesType=e.dataModel._seriesType;this._extendData();this._dataChanged()};f.prototype._extendData=function(){this._data.rawData=this._rawData};f.prototype.getBindingMetaData=function(){var e={},t=this._getDataItems();for(var i=0;i<t.length;++i){var a=this._data[t[i]];if(a==null){continue}var r=a.metaData;if(r==null){continue}e[t[i]]=r}return e};f.prototype._getDataItems=function(){return[]};f.prototype._isTrellis=function(){return!!(this._data&&(this._data.trellisRow||this._data.trellisColumn))};f.prototype._dataChanged=function(){this._resetPlotContainer();this._createPlotContainer(this._isTrellis());if(this._supportLazyRender){this._plotArea.getDispatch().on("reRenderComplete.chartview",this._reRenderComplete.bind(this))}if(this._data){for(var e in this._children){if(this._children.hasOwnProperty(e)){this.getChild(e).module.setData(this._data)}}}};f.prototype._reRenderComplete=function(){if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};f.prototype.properties=function(e){if(!arguments.length){return this._properties.get()}this._properties.set(e);return this};f.prototype.chartType=function(e){if(!arguments.length){return this._chartType}this._chartType=e;return this};f.prototype.destroy=function(){f.superclass.destroy.call(this);if(this._backgroundNode){this._backgroundNode.remove()}this._backgroundNode=null;if(this._background&&a.isFunction(this._background.destroy)){this._background.destroy()}this._background=null;if(this._paginationScrollbarNode){this._paginationScrollbarNode.remove()}this._paginationScrollbarNode=null;if(this._paginationScrollbar&&a.isFunction(this._paginationScrollbar.destroy)){this._paginationScrollbar.destroy()}this._paginationScrollbar=null;this._chartType=null;this._properties=null;this._plotArea=null;this._plotAreaLayout=null;this._data=null;if(this._rawData){if(this._rawData.dataModel){var e=this._rawData.dataModel;if(a.isFunction(e.destroy)){e.destroy()}}if(this._rawData.scales){var t=this._rawData.scales;for(var i in t){if(t.hasOwnProperty(i)&&t[i]&&a.isFunction(t[i].destroy)){t[i].destroy();t[i]=null}}}}this._rawData=null;this._outline=null;if(this._semanticMgr){this._semanticMgr.destroy()}this._semanticMgr=null};f.prototype.changes=function(e){if(e.dataChanged){this.runtime().fireInteractionEvent("dataUpdated")}if(e.scalesChanged){this.runtime().fireInteractionEvent("scalesUpdated",e.scalesChanged)}};f.prototype.changePaddingTop=function(e,t){var i=e.get("valueAxis.label.style");var r=d.canvasMeasure("",i["fontSize"],i["fontWeight"],i["fontFamily"]).height;if(a.isExist(t.propertyPaddingInPX)&&t.propertyPaddingInPX<r/2){t.propertyPaddingTopInPX=r/2}if(a.isExist(t.propertyPaddingTopInPX)&&t.propertyPaddingTopInPX<r/2){t.propertyPaddingTopInPX=r/2}};return f});define("sap/viz/chart/components/callout/CalloutContainer",["sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/framework/chartmodel/DataSelector","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o,n,l){var s=2,u={top:{labelGap:12,labelMargin:2,lineExt:8,occupy:"width",prefer:"height",alignKey:"y",positionKey:"left",positionKey2:"top",offsetKey:"x"},left:{labelGap:0,labelMargin:2,lineExt:8,occupy:"height",prefer:"width",alignKey:"x",positionKey:"top",positionKey2:"left",offsetKey:"y"}},c="v-callout",h="2,3";var p=" ";var d=function(e,t){d.superclass.constructor.apply(this,arguments);this._callouts=[];this._plotOffset={x:0,y:0};this._plotRealSize=null};e.extend(d,t);function f(e){return u[e||this._options.position]}d.prototype.getPreferredSize=function(e){var t=this._options.position,r=this.properties(t),l={width:0,height:0};var u=r&&r.length;if(u){var c=this.properties("label.style.fontFamily"),h=this.properties("label.style.fontSize"),d=this.properties("label.style.fontWeight"),v=this.properties("label.style.fontStyle"),g=this.properties("label.formatString"),m=this.properties("label.unitFormatType");var y,_=f.call(this,t),A=_.occupy,b=_.prefer,x=e[A]-_.lineExt,S=_.labelGap,D=0,w=this._callouts,C=0,T=false,z=this.getData();var L=this.runtime().statusManager().get("data.unit");for(y=0;y<u;y++){var P=r[y];new i(P.dataContext,z).iterateDataPoints(function(t){var i={decimalFormatString:o.getDecimalFormatString(o.SUPPORT_CUSTOM_COMPONENTS.DATALABEL)};var r=t.context(),l=o.format(r[r.measureNames],g,m,i);if(l===null||l===undefined){l=n.get("IDS_ISNOVALUE")}else if(r.measureNames&&L[r.measureNames]){l+=p+L[r.measureNames]}var u=a.fastMeasure(l,h,d,c,v);var f=u[b];if(f<=e[b]-_.lineExt){var y=u[A];if(y<=x){if(!w[D]){w[D]={}}w[D].dpId=t.id;w[D].text=l;w[D].textMeasure=u;w[D].offset=0;D++;C=Math.max(C,f);if(D===s||(x-=y+S)<=0){T=true;return false}}}});if(T){break}}if(w.length){l[A]=e[A];l[b]=C+_.labelMargin+_.lineExt}}return l};d.prototype.render=function(e){var t=this._options.position;var i=this._callouts;if(!i.length){return}this._selection=e;e.selectAll("*").remove();var a=this._rootSelection=e.append("g");var r=this._mainSelection=a.append("g");var o=f.call(this),n=o.prefer,l=o.alignKey,s=this._size[o.prefer]-o.labelMargin-o.lineExt;var u=this._calloutsSelection=r.selectAll("."+c).data(i).enter().append("g").attr("class",c);var p=null;var d=this.runtime().envManager();if(d){p=d.textAnchor()}this._labelSelection=u.append("text").text(function(e){return e.text}).attr("font-family",this.properties("label.style.fontFamily")).attr("font-size",this.properties("label.style.fontSize")).attr("font-style",this.properties("label.style.fontStyle")).attr("font-weight",this.properties("label.style.fontWeight")).attr("fill",this.properties("label.style.color")).attr("text-anchor",p).attr(l,function(e){var i=e.textMeasure;var a=s;if(t==="left"){a=s-i[n]-i[l]}return a});var v=this._properties.get("line.color");if(!v){v=this._properties.getDefault("line.color")}this._lineSelection=u.append("polyline").attr("stroke",v).attr("fill","none").attr("stroke-dasharray",h)};d.prototype.postRender=function(e,t,i,a){var r=this._callouts;if(!r.length){return}this._plotNode=e;var o={};o.width=e.getBoundingClientRect().width;o.height=e.getBoundingClientRect().height;this._plotBoundRect=o;var n=this._size;var s={width:n.width,height:n.height};var u=f.call(this),c=u.prefer;s[c]+=t[c];var h="callout_clipPath"+l.guid();this._selection.append("clipPath").attr("id",h).append("rect").attr("width",s.width).attr("height",s.height);this._rootSelection.attr("clip-path","url(#"+h+")");this._plotRealSize=i;this.update(a)};d.prototype.update=function(e){var t=this._calloutsSelection;if(!t){return}this._selection.selectAll("text").attr("visibility","hidden");if(this._options.position==="top"){this._selection.selectAll("text").attr("x",0)}else{this._selection.selectAll("text").attr("y",0)}var i=f.call(this),a=i.positionKey,o=i.positionKey2,n=i.occupy,l=i.prefer;var s=this._plotBoundRect;var u=d3.select(this._plotNode).select(".v-plot-bound").node();if(u){s=u.getBoundingClientRect()}var c=this._mainSelection.append("rect");var h=c.node().getBoundingClientRect();c.remove();s={left:s.left-h.left,top:s.top-h.top,width:s.width,height:s.height};var p=this._callouts;p.forEach(function(t){t.visible=false;var i=t.dpRect;var u=r.findByDataPointId(e,t.dpId);if(u){i=u.getBoundingClientRect();i=t.dpRect={left:i.left-h.left,top:i.top-h.top,width:i.width,height:i.height};t.visible=i[o]+i[l]>s[o]&&i[o]<s[o]+s[l]&&i[a]+i[n]>s[a]&&i[a]<s[a]+s[n]}var c=t.lineStart={};var p=t.lineJoint={};if(i&&i[a]&&i[n]){var d=i[a]+i[n]/2;c[a]=p[a]=d;c[o]=Math.max(i[o],s[o]);p[o]=s[o]}});var d=t.select("text");d.each(function(e){var t=e.labelRect=this.getBoundingClientRect();t=e.labelRect={left:t.left-h.left,top:t.top-h.top,width:t.width,height:t.height};if(e.visible){e.offset=e.lineStart[a]-t[a]-t[n]/2}});var v=p.filter(function(e){return e.visible});v.sort(function(e,t){return e.lineStart[a]-t.lineStart[a]});var g=i.offsetKey;var m=false;var y;if(v.length>0){var _=v[0];y=_.labelRect[a]+_.offset;if(y<0){_.offset-=y;m=true}}var A;var b;var x;A=v.length;x=i.labelGap;this.layoutCallouts(v,a,n,x);var S=i.lineExt;var D=this._options.position;d.attr(g,function(e){return e.offset}).each(function(e){var t=this.getBoundingClientRect();var i=e.lineJoint;var r=i[a];var l=t[a]-h[a],s;if(r<l){s=l}else{var u=l+t[n];if(r>u){s=u}else{s=r}}var c=e.lineEnd={};c[o]=i[o]-S;c[a]=s});var w=t.attr("visibility",function(e){return e.visible?null:"hidden"}).filter(function(e){return e.visible});w.select("polyline").attr("points",function(e){return[e.lineStart,e.lineJoint,e.lineEnd].map(function(e){return e.left+","+e.top}).join(" ")});this._selection.selectAll("text").attr("visibility",null)};d.prototype.normalizeItem=function(e,t,i){if(e.offset<0){e.offset=0}else if(e.offset+e.labelRect[i]>this._plotRealSize[i]){e.offset=this._plotRealSize[i]-e.labelRect[i]}};d.prototype.layoutCallouts=function(e,t,i,a){var r=this._plotRealSize[i];if(e.length>0){e[0].offset+=e[0].labelRect[t];if(e[1]){e[1].offset+=e[1].labelRect[t]}}if(e.length===1){var o=e[0];this.normalizeItem(o,t,i)}else if(e.length===2){var n=e[0];var l=e[1];this.normalizeItem(n,t,i);this.normalizeItem(l,t,i);var s=false;if(n.offset+n.labelRect[i]+a>l.offset){s=true}if(s){var u;u=n.offset+n.labelRect[i]+a;if(u+l.labelRect[i]<=r){l.offset=u}else{u=l.offset-a-n.labelRect[i];if(u>0){n.offset=u}else{if(n.offset<r-l.offset){n.offset=0;l.offset=n.labelRect[i]+a}else{l.offset=r-l.labelRect[i];n.offset=r-l.labelRect[i]-a-n.labelRect[i]}}}}}if(e.length>0){e[0].offset-=e[0].labelRect[t];if(e[1]){e[1].offset-=e[1].labelRect[t]}}};d.prototype.afterPlotZoom=function(e){this.update(e)};d.prototype.setPlotRealSize=function(e){this._plotRealSize=e};d.prototype.scroll=function(e){var t=this._mainSelection;if(t){this._mainSelection.attr("transform","translate("+e.x+","+e.y+")")}};d.prototype.afterPlotScroll=function(e,t){var i=this._plotOffset;if(e.x!=null){i.x=e.x}if(e.y!=null){i.y=e.y}this.update(t)};d.prototype.destroy=function(){d.superclass.destroy.apply(this,arguments);this._selection=null;this._rootSelection=null;this._mainSelection=null;this._calloutsSelection=null;this._plotNode=null;this._plotRealSize=null};return d});define("sap/viz/chart/layout/XYLayout",["sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/oo","sap/viz/chart/layout/BaseLayout"],function e(t,i,a,r){var o={height:{max:"maxHeight",fix:"height"},width:{max:"maxWidth",fix:"width"}};var n={left:"width",right:"width",top:"height",bottom:"height"};var l={left:"height",right:"height",top:"width",bottom:"width"};var s=0;var u=1;var c=2;var h=3;var p=1/3;var d=1/3;function f(){f.superclass.constructor.apply(this,arguments);this.config.add({padding:[0,0,0,0],rootWidth:0,rootHeight:0,layoutSequence:[]})}a.extend(f,r);f.prototype.layout=function(e,a){var r={};var f={};var v=this.config;var y=0;var _=v.get("totalWidth");var A=v.get("totalHeight");var b=v.get("rootWidth");var x=v.get("rootHeight");var S={width:v.get("rootWidth"),height:v.get("rootHeight")};var D=v.get("padding");var w=v.get("layoutSequence");var C=_-(D[u]+D[h]);var T=A-(D[s]+D[c]);C=C>0?C:0;T=T>0?T:0;var z;var L,P;var k;var E;var I={};for(var O in e){if(e.hasOwnProperty(O)){z=e[O];k=z.option;E=k.position;if(!I.hasOwnProperty(E)){I[E]=[]}var R=k.priority;if(R==null){R=-1}var N=I[E];var M=N.length;for(y=0;y<M;y++){if(R>=N[y].option.priority){break}}N.splice(y,0,{module:z.module,option:{unique:k.unique,priority:R,position:E,padding:{paddingTop:g(k.paddingTop),paddingBottom:g(k.paddingBottom),paddingLeft:g(k.paddingLeft),paddingRight:g(k.paddingRight)},maxWidth:m(k.maxWidth)?k.maxWidth:p,maxHeight:m(k.maxHeight)?k.maxHeight:d,width:m(k.width)?k.width:null,height:m(k.height)?k.height:null}})}}var B=[];for(y=0;y<w.length;++y){E=w[y];if(i.isFunction(E)){B.push(E);continue}var V=I[E];if(V){Array.prototype.push.apply(B,V)}}B.push(I.center[0]);if(!I.center){throw"Cannot solve layout without plot"}var F={width:b?b:C,height:x?x:T};var H={width:C,height:T,x:D[u],y:D[s]};var U={center:false};var W=[];var G=B.length;for(y=0;y<G;y++){L=B[y];if(i.isFunction(L)){var Y={preferredSizeTable:f};L(r,H,Y);continue}P={};r[L.module.alias]=P;k=L.option;var X=L.module;E=k.position;if(E==="center"){continue}var j=n[E];var Z=l[E];P.padding=k.padding;var q={width:0,height:0};q.height+=P.padding.paddingTop+P.padding.paddingBottom;q.width+=P.padding.paddingLeft+P.padding.paddingRight;var K=0;var Q={},$=k[o[j].fix],J=L.module.properties("visible")===true&&$!==null?t.getSizeValue($,F[j]):undefined;if(J===undefined){if(i.isFunction(X.getPreferredSize)){var ee=t.getSizeValue(k[o[j].max],F[j]);ee=ee>H[j]?H[j]:ee;Q[Z]=H[Z];Q[j]=ee;if(!W[E]){var te=X.getPreferredSize(Q);K=te[j]+q[j];f[L.module.alias]=te}ee=K>ee?ee:K;H[j]=H[j]-ee;P[j]=ee}else{P[j]=0}}else{J=J>H[j]?H[j]:J;if(i.isFunction(X.getPreferredSize)){Q[Z]=H[Z];Q[j]=J;if(!W[E]){K=X.getPreferredSize(Q,a);f[L.module.alias]=K}}H[j]=H[j]-J;P[j]=J}if(K&&L.option.unique){W[E]=true}}for(y=0;y<G;y++){L=B[y];if(!L){continue}else if(i.isFunction(L)){continue}P=r[L.module.alias];if(!P.hasOwnProperty("width")){P.width=H.width}else if(!P.hasOwnProperty("height")){P.height=H.height}switch(L.option.position){case"top":H.y=H.y+P.height;break;case"left":H.x=H.x+P.width;break}}var ie=H.y,ae=H.x,re=H.y+H.height,oe=H.x+H.width;for(y=G-1;y>=0;y--){L=B[y];if(i.isFunction(L)){continue}else if(L){k=L.option;P=r[L.module.alias];switch(k.position){case"top":P.x=H.x;P.y=ie-=P.height;break;case"left":P.x=ae-=P.width;P.y=H.y;break;case"bottom":P.x=H.x;P.y=re;re+=P.height;break;case"right":P.x=oe;oe+=P.width;P.y=H.y;break;case"center":P=r[L.module.alias]={};P.x=H.x;P.y=H.y;P.width=H.width;P.height=H.height;break}if(!i.isPlainObject(P.padding)){P.padding=k.padding}if(k.position==="top"){P.y+=P.padding.paddingTop}if(k.position==="left"){P.x+=P.padding.paddingLeft}P.height-=P.padding.paddingTop+P.padding.paddingBottom;P.width-=P.padding.paddingLeft+P.padding.paddingRight;H.height=H.height>0?H.height:0;H.width=H.width>0?H.width:0}}return r};function v(e){return{paddingTop:parseFloat(e.paddingTop),paddingBottom:parseFloat(e.paddingBottom),paddingLeft:parseFloat(e.paddingLeft),paddingRight:parseFloat(e.paddingRight)}}function g(e){var t=parseFloat(e);if(isNaN(t)){t=0}return t}function m(e){var t=parseFloat(e);return i.isNumber(t)&&t>=0}return f});define("sap/viz/chart/components/container/utils/xyTransformUtils",["sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils"],function(e,t){function i(e){var t=e.getChildrenByPosition("center")[0],i=t.getRealSize(),a=t.getSize();var r=i.width/a.width;var o=i.height/a.height;if(!isFinite(r)){if(i.width===0){r=1}else{return null}}if(!isFinite(o)){if(i.height===0){o=1}else{return null}}return{x:r,y:o}}function a(e){return{scale:{set:function(t){e.zoom(t);e.getChildrenByPosition("center")[0].update();return i(e)},get:i.bind(null,e)},translate:{set:function(t){if(t.x!==undefined||t.y!==undefined){e.scroll(t)}else if(t.translateByPage){e.scrollByPage(t.translateByPage)}return t},get:function(){var t=e.getChildrenByPosition("center")[0];var i=t.getOffset();if(!i){i={}}i.position=0;if(e._paginationScrollbarRef){i.position=e._paginationScrollbarRef._thumbPosition/e._paginationScrollbarRef._maxThumbPosition;if(isNaN(i.position)){i.position=0}}return i}}}}function r(i,a,r){var o=e.getData(i);if(!o||!a){return}var n=0;var l=0;if(t.isExist(o.initPosX)){n=o.initPosX*a.x+r.x}else if(t.isExist(o.initPosY)){l=o.initPosY*a.y+r.y}i.setAttribute("transform","translate("+n+","+l+")")}return{defstatus:a,adjustXYTranslate:r}});define("sap/viz/chart/components/container/XYContainer",["sap/viz/framework/common/util/oo","sap/viz/chart/components/container/UIContainer","sap/viz/framework/common/util/PositionUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/chart/layout/XYLayout","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/chart/components/container/utils/xyTransformUtils","sap/viz/chart/behavior/config/SelectionUtil"],function(e,t,i,a,r,o,n,l,s,u,c,h){var p=function(e,t){p.superclass.constructor.apply(this,arguments);this._initLayout();this._layoutSequence=null;this._roughSize={width:0,height:0};this._posToModuleMap={};this._vScrollbar=null;this._hScrollbar=null;this._registerZoneManager(e,t);e.statusManager().proxy("plot.transform").add(c.defstatus(this));this._exposeMoreEvents("reRenderComplete");this._zoomer=this._getZoomer()};e.extend(p,t);p.prototype._registerZoneManager=function(e){e.zoneManager().add(n.plot(this));e.zoneManager().add(u.plot(this))};p.prototype._getLayoutDefinition=function(){return o};p.prototype._initLayout=function(){var e=this._getLayoutDefinition();this.setLayoutAlgorithm(new e)};p.prototype.setRoughSize=function(e){if(e.width!=null){this._roughSize.width=e.width}if(e.height!=null){this._roughSize.height=e.height}var t=this.updateValueScale();var i=this.runtime().statusManager();if(t&&i.has("updatedScaleValue")){i.set("updatedScaleValue",t)}for(var a in this._children){if(this._children.hasOwnProperty(a)){if(this._children[a].module&&this._children[a].module.setRoughSize){this._children[a].module.setRoughSize(e)}}}return this};p.prototype.getVScrollbar=function(){return this._vScrollbar};p.prototype.getHScrollbar=function(){return this._hScrollbar};p.prototype.updateValueScale=function(e){};p.prototype.setLayoutSequence=function(e){this._layoutSequence=e;return this};p.prototype.render=function(e){p.superclass.render.apply(this,arguments);if(this._size.width>0&&this._size.height>0&&this._layoutResult){this._initRenderBase(e);i.positionElements(this._layoutResult,this._selections);this._preRender();this._renderSub();this._postRender()}};function d(e){this._scroll({y:e.offset})}function f(e){this._scroll({x:e.offset})}p.prototype._preRender=function(){var e=this.getChildrenByPosition("center")[0];if(e&&(this._vScrollbar||this._hScrollbar)){var t=e.getSize();var i=e.getRealSize();if(this._vScrollbar){this._vScrollbar.setTrackSize(t.height).setContentSize(i.height);this._vScrollbar.getDispatch().on("scroll.xycontainer",d.bind(this))}if(this._hScrollbar){this._hScrollbar.setTrackSize(t.width).setContentSize(i.width);this._hScrollbar.getDispatch().on("scroll.xycontainer",f.bind(this))}}};p.prototype._postRender=function(){var e=this.getZoomer();if(e){e.reset(this._selections)}};p.prototype.scroll=function(e){var t=this.getChildrenByPosition("center")[0];var i=t.getSize();var r=t.getRealSize();var o,n,l,s,u;if(e.x!=null){l=i.width-r.width;o=Math.min(0,Math.max(l,e.x));if(this._hScrollbar){u=-o;s=this._hScrollbar.getThumbRatio();if(s){u/=s}this._hScrollbar.setThumbPosition(u)}}if(e.y!=null){l=i.height-r.height;n=Math.min(0,Math.max(l,e.y));if(this._vScrollbar){u=-n;s=this._vScrollbar.getThumbRatio();if(s){u/=s}this._vScrollbar.setThumbPosition(u)}}var c=this.getOffset();this._scroll({x:a.isNumber(o)?o:c.x,y:a.isNumber(n)?n:c.y})};p.prototype.scrollByPage=function(e){var t;if(e.context){var i=this.getChild("categoryAxis").module;if(i){var r=i.getChild("axisBody").module;t=r.getLabelOffsetByCtx(e.context)}}if(a.isNumber(e.offset)){var o=this.getChildrenByPosition("center")[0];t=o.getRemainingPlotOffset(t,e.offset)}if(t!==null&&t!==undefined){this.scroll(t)}};function v(e,t){var i=t.zoom;if(i){i.call(t,e)}}p.prototype.zoom=function(e){var t=this.getChildrenByPosition("center")[0];var i=t.getSize();var a=t.getRealSize();var r;if(e.x){r=v.bind(null,{x:e.x,y:1});a.width=i.width*e.x;this.getChildrenByPosition("top").forEach(r);this.getChildrenByPosition("bottom").forEach(r)}if(e.y){r=v.bind(null,{x:1,y:e.y});a.height=i.height*e.y;this.getChildrenByPosition("left").forEach(r);this.getChildrenByPosition("right").forEach(r)}t.setRealSize(a);if(this._vScrollbar){this._vScrollbar.setContentSize(a.height).render()}if(this._hScrollbar){this._hScrollbar.setContentSize(a.width).render()}var o=this.getChildrenByPosition("center")[0];if(o){v(e,o)}};p.prototype.getOffset=function(){var e=this.getChildrenByPosition("center")[0];return e&&e.getOffset()};function g(e,t){var i=t.scroll;if(i){i.call(t,e)}}p.prototype._scroll=function(e){if(!e){return}var t;if(e.x!=null){t=g.bind(null,{x:e.x,y:0});this.getChildrenByPosition("top").forEach(t);this.getChildrenByPosition("bottom").forEach(t)}if(e.y!=null){t=g.bind(null,{x:0,y:e.y});this.getChildrenByPosition("left").forEach(t);this.getChildrenByPosition("right").forEach(t)}var i=this.getChildrenByPosition("center")[0];if(i){g(e,i)}this.runtime().fireInteractionEvent("plotScroll",e);this.runtime().eventDispatcher().fire("plotScroll",e)};p.prototype.setChild=function(e,t,i){p.superclass.setChild.apply(this,arguments);if(i.position){var a=i.position;var r=this._posToModuleMap;if(!r.hasOwnProperty(a)){r[a]=[]}var o=r[a];var n,l;var s=true;for(n=0;n<o.length;n++){l=o[n];if(l===t||l.alias==t.alias){s=false;o[n]=t;break}}if(s){o.push(t)}if(t.setPosition){t.setPosition(a)}}};p.prototype.getChildrenByPosition=function(e){return this._posToModuleMap[e]||[]};p.prototype.removeChild=function(e){var t=this._children[e];var i=this._posToModuleMap[t.option.position];i.splice(i.indexOf(t.module),1);delete this._children[e]};p.prototype.getPlotPosition=function(){return this._layoutResult&&this._layoutResult.plot};p.prototype._configLayout=function(e){var t=l.getPositiveInt;var i=this._properties.origin;var a=this.calculatePaddingInPX(i,this._roughSize.width,this._roughSize.height);var r=t(a.propertyPaddingInPX,a.constantPaddingInPX);var o=t(a.propertyPaddingTopInPX,r);var n=t(a.propertyPaddingRightInPX,r);var u=t(a.propertyPaddingBottomInPX,r);var c=t(a.propertyPaddingLeftInPX,r);var h=this._layoutAlgorithm.config;h.set("totalWidth",this._size.width);h.set("totalHeight",this._size.height);h.set("rootWidth",this._roughSize.width-(n+c));h.set("rootHeight",this._roughSize.height-(o+u));h.set("paddings",[o,c,u,n]);h.set("layoutSequence",this._layoutSequence);for(var p in this._children){if(this._children.hasOwnProperty(p)){var d=this.getChild(p);var f=d.option;var v=this._properties.proxy(p+".layout");var g=v.get("maxWidth");var m=v.get("maxHeight");var y=v.get("width");var _=v.get("height");if(y){f.width=y}else{f.width=null}if(_){f.height=_}else{f.height=null}if(g){f.maxWidth=g}if(m){f.maxHeight=m}if(e&&e.pagination&&e.pagination.mode===s.PAGINATION_MODE.UPDATE&&e.plotAreaLayout&&e.plotAreaLayout[p]){var A=e.plotAreaLayout[p].module._size;if(!f.width&&A.width){f.width=A.width}if(!f.height&&A.height){f.height=A.height}}}}return this._children};p.prototype._postLayout=function(e){for(var t in this._children){if(this._children.hasOwnProperty(t)){var i=this._children[t].module;var a=e[t];i.setSize(a,i._needOtherSize?e:undefined)}}};p.prototype.paginationOptions=function(){var e=this._runtime&&this._runtime._interaction&&this._runtime._interaction._service&&this._runtime._interaction._service.getDataModel();var t;if(e&&e.getPaginationOptions){t=e.getPaginationOptions()}return t};p.prototype.getAddtionalInfo=function(){};p.prototype._renderSub=function(){var e=this.getChild("categoryAxis");var t;if(e){t=e.module}var i=this._layoutSequence||["left","right","bottom","top"];if(i.indexOf("center")<0){i.push("center")}var a=function(e){if(!this.paginationOptions()||e.alias!==s.SCROLLBAR.ALIAS||!t||t._position==="top"||t._position==="bottom"){e.render(this._selections[e.alias],this.getAddtionalInfo(e))}}.bind(this);for(var r=0;r<i.length;r++){this.getChildrenByPosition(i[r]).forEach(a)}};p.prototype._initRenderBase=function(e){if(this._selections){return}this._selections={};for(var t in this._children){if(this._children.hasOwnProperty(t)){if(this._selections[t]==null){if(this._children[t].option.position==="center"){this._selections[t]=e.insert("g",":first-child").attr("class","v-m-"+t)}else{this._selections[t]=e.append("g").attr("class","v-m-"+t)}}}}};p.prototype.destroy=function(){p.superclass.destroy.call(this);this._layoutSequence=null;this._layoutResult=null;this._roughSize=null;this._posToModuleMap={};this._vScrollbar=null;this._hScrollbar=null;if(this._zoomer){this._zoomer.destroy();this._zoomer=null}};p.prototype.getZoomer=function(){return this._zoomer};p.prototype._getZoomer=function(){return null};p.prototype._hasScrollbar=function(){var e=!!this._properties.get("plotArea.isFixedDataPointSize");var t=this._properties.get("plotArea.window.start");var i=this._properties.get("plotArea.window.end");var a=r.startEndConvertor(t,i,this._properties.origin);t=a.start;i=a.end;var o=!this._properties.get("interaction.noninteractiveMode");var n=(e||!!t||!!i)&&o&&!(t==="firstDataPoint"&&i==="lastDataPoint");return n};return p});define("sap/viz/chart/components/axis/sub/AxisComponent",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/chart/components/UIComponent","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/PositionUtil"],function(e,t,i,a,r,o){var n=t.CSS.CLASS.AXIS;var l=function(e,t){l.superclass.constructor.apply(this,arguments);this._position=null;this._formerProperties=null;this._preferredSize={minWidth:0,minHeight:0}};e.extend(l,i);l.prototype.setPosition=function(e){this._position=e;return this};l.prototype._isVertical=function(){return o.isVertical(this._position)};l.prototype._isHorizontal=function(){return o.isHorizontal(this._position)};l.prototype._measureTextSize=function(e,t){var i=r.canvasMeasure(e,t["fontSize"],t["fontWeight"],t["fontFamily"],t["letterSpacing"]);return a.preciseObject(i)};l.prototype._measureTextSizeForFixPadding=function(e,t){var i=r.fastMeasure(e,t["fontSize"],t["fontWeight"],t["fontFamily"],t["letterSpacing"]);return a.preciseObject(i)};l.prototype._updatePfdSize=function(e){if(e.minWidth!=null){this._preferredSize.minWidth=e.minWidth}if(e.minHeight!=null){this._preferredSize.minHeight=e.minHeight}};l.prototype._isSpaceEnough=function(){if(this._realSize.width===0||this._realSize.height===0){return false}var e=this._preferredSize;return Math.ceil(e.minWidth)<=Math.ceil(this._realSize.width)&&Math.ceil(e.minHeight)<=Math.ceil(this._realSize.height)};l.prototype.mayOnlyFirstAndLastLabel=function(){return false};l.prototype.destroy=function(){l.superclass.destroy.call(this);this._position=null;this._formerProperties=null;this._preferredSize=null};return l});define("sap/viz/migrate/PropertyUtil",["sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils"],function e(t,i){var a={};var r=Object.prototype.hasOwnProperty;function o(e){if(!e){return true}for(var t in e){if(r.call(e,t)){return false}}if(i.isFunction(e)){return false}return true}function n(e,t){var i=t.split("."),a,r;for(a=i.length-2;a>=0;a--){var n=e;for(r=0;r<a;r++){n=n[i[r]]}if(o(n[i[a]])){delete n[i[a]]}}}function l(e,t){if(!e){return false}for(var i=0;i<e.length;++i){if(e[i].properties&&e[i].properties[t]){return true}}return false}a.getProperty=function(e,t){var i=t.split("."),a=e,r;for(r=0;r<i.length;r++){if(a===null){return undefined}if(a[i[r]]===undefined){return undefined}a=a[i[r]]}return a};a.setProperty=function(e,t,i){var a=t.split("."),r=e,o;for(o=0;o<a.length-1;o++){if(r[a[o]]===undefined||r[a[o]]===null){r[a[o]]={}}r=r[a[o]]}r[a[a.length-1]]=i};a.setPropertyWithMergence=function(e,i,a){var r=i.split("."),o={},n=o,l;for(l=0;l<r.length-1;l++){n[r[l]]={};n=n[r[l]]}n[r[r.length-1]]=a;t.extend(true,e,o)};a.removeProperty=function(e,t){var i=t.split("."),a=e,r;for(r=0;r<i.length-1;r++){if(a[i[r]]===undefined){return}a=a[i[r]]}delete a[i[i.length-1]];n(e,t)};function s(e,t){if(e&&e.rules&&e.rules.length){var a=e.rules;for(var r=a.length-1;r>=0;--r){var o=a[r];var n=o.properties;delete n[t];if(i.isEmptyObject(n)){a.splice(r,1)}}}}a.migrateSeriesStyle=function(e,i,r,o){var n=a.getProperty(e,o.to);s(n,o.subProp);n=n||{rules:[]};if(r&&r.rules){var l=r.rules;for(var u=0;u<l.length;++u){var c={};var h=l[u];t.extend(true,c,h);if(h&&h.dataContext&&h.dataContext.length){var p=h.dataContext;for(var d=0;d<p.length;++d){if(p[d]===undefined){c.dataContext[d]=undefined}}}if(c.properties){var f=c.properties;delete c.properties;c.properties={};c.properties[o.subProp]=f}n.rules.push(c)}}a.setProperty(e,o.to,n)};a.getComplexProperty=function(e,t,a,r){var o;if(t[a]!==undefined){o=t[a]}else{var n=r.get(e,"templateValue");if(n&&n[a]){o=n[a]}else{var l=r.get(e,"defaultValue");if(i.isArray(l)){o=l[a]}else{o=l}}}return o};return a});define("sap/viz/chart/components/axis/sub/AxisTitle",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/AxisComponent","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/migrate/PropertyUtil"],function(e,t,i,a,r,o,n,l,s,u,c){var h=e.CSS.CLASS.AXIS;var p=function(e,t){p.superclass.constructor.apply(this,arguments);this._valueAxes=t?t.valueAxes:[];this.visibleItemsNumber=-1};t.extend(p,i);p.prototype._adjustTitleItems=function(e,t){var i;for(i=0;i<e.length;i++){if(i>=t){e[i].isHidden=true}else{e[i].isHidden=false}}};p.prototype._isApplyAxisLineColor=function(){if(this._properties.has("title.style.color","value")){return false}var e=this._properties.get("title.applyAxislineColor");if(a.isArray(e)){var t=this._valueAxes.length>1?1:0;e=c.getComplexProperty("title.applyAxislineColor",e,t,this._properties)}return e===true};p.prototype._convertStyleColor=function(t){if(this._isApplyAxisLineColor()){t=this._properties.get("color")}return this._isAllHidden()?e.AXIS.HIDDEN_TITLE.COLOR:t};p.prototype.render=function(t){t.select("g."+h.TITLE).remove();t.selectAll(".v-m-axisTitleEventLayer").remove();var i=this._properties;if(a.isString(this._data.text)&&this._isSpaceEnough()&&i.get("visible")&&i.get("title.visible")){var r=this._data.text;var l=this._getPostFix();var u=h.TITLE+" "+h.TITLE_BACKWORD;var p=h.TITLE_HIDDEN;var d=i.get("title.style");var f=true;var v=i.get("title.style.letterSpacing");if(v===undefined||v===null){f=false;v=0}d.letterSpacing=parseFloat(v).toString()+"px";if(d&&d.color){d.color=this._convertStyleColor(d.color);d.color=s.convertColor(d.color)}var g=n.getTextBaselineOffset(d);var m=this.runtime().effectManager();var y=i.get("color");if(a.isArray(y)){var _=this._valueAxes.length>1?1:0;y=c.getComplexProperty("color",y,_,i)}var A=m.register({fillColor:this._isApplyAxisLineColor()?s.convertColor(y):d.color});var b=m.register({fillColor:e.AXIS.HIDDEN_TITLE.COLOR});var x=t.append("g").attr("class",u).attr("fill",A).attr("font-size",d.fontSize).attr("font-weight",d.fontWeight).attr("font-family",d.fontFamily).attr("letter-spacing",d.letterSpacing).attr("font-style",d.fontStyle).append("text").text(r+l).attr("dominant-baseline","auto");var S=this.runtime().envManager();if(S){x=x.attr("text-anchor",S.textAnchor())}var D="";var w=o.convertToCss(d);var C;if(this._isVertical()){C=this._size.height}else{C=this._size.width}var T={};T.needRealLength=true;T.reverseDots=S&&S.reverseDots();T.hasLetterSpacing=f;var z=n.ellipsis(r,x.node(),C,w,T,l);D=z.text;var L=z.realLength;if(this._isVertical()){x.attr("x",this._size.width-g-L/2).attr("y",this._size.height/2).attr("transform","rotate(-90,"+(this._size.width-g)+","+this._size.height/2+")")}else{x.attr("x",this._size.width/2-L/2).attr("y",this._size.height-g)}var P=i.has("title.style.color","value");var k=this._data;if(!k.isCustomized){this._adjustTitleItems(k.items,this.visibleItemsNumber);x.text("");if(D!==r&&x.select("title").empty()){x.append("title").text(r+l)}var E;for(E=0;E<k.items.length;E++){var I=x.append("tspan");I.attr("class",u);I.attr("dominant-baseline","auto");if(k.items[E].isHidden&&!this._isApplyAxisLineColor()&&!P&&!k.noNeedApplyHiddenTitleColor){I.attr("class",u+" "+p);I.attr("fill",b)}var O=k.items[E].text+l;if(D.length>O.length){if(D.length-3<O.length&&D.substring(D.length-3)==="..."){I.text(D);break}else{I.text(O);D=D.substring(O.length)}}else{I.text(D);break}}}else{if(!k.isCustomizedColor&&this.visibleItemsNumber===0&&!P&&!this._isApplyAxisLineColor()){x.attr("class",u+" "+p);x.attr("fill",b)}}}};p.prototype._isAllHidden=function(){var e=this._properties.has("title.style.color","value");var t=this._data;if(t){if(!e&&t.isCustomized&&!t.isCustomizedColor&&this.visibleItemsNumber===0&&!t.noNeedApplyHiddenTitleColor){return true}if(!e&&!t.isCustomized&&!this._isApplyAxisLineColor()&&!t.noNeedApplyHiddenTitleColor){var i=t.items.length;for(var a=0;a<i;++a){if(!t.items[a].isHidden){return false}}return true}}return false};p.prototype.setTitleHiddenItems=function(e){this.visibleItemsNumber=e};p.prototype._getPostFix=function(){var e="";if(this._name.indexOf("valueAxis")>-1){var t=this._runtime.statusManager().get("dynamicScale");if(t&&!t.onlyChartTitle&&t[this._name]&&t[this._name].postfix){e=t[this._name].postfix}}return e};p.prototype.getPreferredSize=function(){var t={minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,spacings:[{interval:0,type:e.SPACING_TYPE.STEP}]};var i=this._properties;if(a.isString(this._data.text)&&i.get("visible")&&i.get("title.visible")){var o=i.get("title.style");var n=i.get("title.style.letterSpacing");if(n===undefined||n===null){n=0}if(n.toString().indexOf("px")===-1){o.letterSpacing=n.toString()+"px"}var l=this._data.text+this._getPostFix();var s=i.origin.get("general.layout.isFixedPadding");var u=s?this._measureTextSizeForFixPadding(l,o):this._measureTextSize(l,o);var c=this._getMinTextWidth(l,o);if(this._isVertical()){t.minWidth=u.height;t.maxWidth=u.height;t.minHeight=c;t.maxHeight=u.width}else{t.minWidth=c;t.maxWidth=u.width;t.minHeight=u.height;t.maxHeight=u.height}t.spacings[0].interval=u.height}var h=r.preciseObject(t);this._updatePfdSize(h);return h};p.prototype._getMinTextWidth=function(e,t){var i=this._measureTextSize(e,t);var a=i.width;if(a>0&&e.length){var r=this._measureTextSize(e[0]+"...",t);if(a>r.width){a=r.width}}return a};p.prototype.destroy=function(){this._properties.add("title.style.color",{get:null});p.superclass.destroy.call(this);this.visibleItemsNumber=null};return p});define("sap/viz/chart/components/axis/renderer/DefaultCategoryLabelRenderer",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r,o){function n(e,t,o,n){if(o&&o>1){var l=i.preciseSimple(parseFloat(t.fontSize)*1.2);var s=r.wrapText(e,[" "],n,o,t);var u=s.maxWidth;var c=s.lines.length;if(s.beyond){u=r.getTextLength(s.lines[c-1],a.convertToCss(t))}return{width:u,height:c*l,minHeight:l}}else{return r.canvasMeasure(e,t.fontSize,t.fontWeight,t.fontFamily)}}var l=function(t,o){var l=90;var s=5;var c=6;var h=c;var p=o.text;var d=o.styles;var f=o.labelOffset;var v=o.size;var g=o.sizeLimit;var m=r.getTextBaselineOffset({fontSize:d.fontSize,fontWeight:d.fontWeight,fontFamily:d.fontFamily});var y=o.needRowAxisOffset;var _=n(p,d);var A=t.firstChild;while(A){t.removeChild(A);A=t.firstChild}var b=d3.select(t);var x,S,D;x=i.preciseSimple(_.height);var w=false;var C=o.wrap;if(C&&C>1){var T=(v.height-s-c).toFixed(1);C=Math.min(C,Math.floor(T/x));w=C>1}var z,L;var P;if(w){P={};P.middleText=true;S=r.drawWrappedText(b,p,[" "],C,g,x,d,P);D=b.selectAll("tspan")[0];x=x*D.length}else{S=i.preciseSimple(_.width);if(g>=0&&S>g){if(o.noEllipsis){z="";L=0}else{P={};P.needRealLength=true;P.reverseDots=o.reverseDots;var k=r.ellipsis(p,t,g,a.convertToCss(d),P);S=k.realLength;z=k.text;L=S}}else{t.textContent=p}}var E,I;var O=L||S;switch(o.position){case e.POSITION.LEFT:case e.POSITION.RIGHT:I=x/2-m;if(y){I+=x/2-m+f}else{var R=0;if(o.labelAlignment!=="center"&&o.childCells&&o.childCells.length){var N=0;for(var M=0;M<o.childCells.length;M++){if(o.childCells[M].isVisible){N++;if(o.childCells[M].yOffset){R+=o.childCells[M].yOffset}else{R+=o.childCells[M].cellHeight/2}if(R<x/2){R=x/2}break}else{R+=o.childCells[M].cellHeight}}if(N===0){R=v.height/2}}else{R=v.height/2}I+=R;if(R===v.height/2){o.cell.yOffset=o.cell.cellHeight/2}else{o.cell.yOffset=R}}if(o.position===e.POSITION.LEFT){E=v.width-h-S}else{E=h}break;case e.POSITION.TOP:if(o.rotated){E=v.width/2+x/2-m;I=v.height-h}else{E=v.width/2-S/2;I=v.height-h-m}break;case e.POSITION.BOTTOM:if(o.rotated){E=v.width/2+x/2-m;I=h;E-=S*Math.cos(o.rotationAngle*Math.PI/180);I+=S*Math.sin(o.rotationAngle*Math.PI/180)}else{if(o.alignMode==="ALIGIN_RIGHT_MOST"){E=o.cellWidth-O/2}else if(o.alignMode==="ALIGIN_LEFT_MOST"){E=O/2}else{E=v.width/2}E-=S/2;I=h+x-m}break}t.setAttribute("x",E);t.setAttribute("y",I);if(o.rotated){var B=u(x,o.rotationAngle);t.setAttribute("transform","translate(0,"+B+") rotate(-"+o.rotationAngle+","+E+","+I+")")}if(w){var V=i.preciseSimple(parseFloat(d.fontSize)*.2);b.selectAll("tspan").attr("dy","1em").attr("y",null);b.attr("y",h-m+V)}var F={};F.x=E;F.y=I;return F};function s(e){var i=t.create("text");l(i,e);o.setCustomizationInfo(i,{defaultRenderer:true});return i}var u=function(e,t){return e*Math.cos(t*Math.PI/180)*.7};s.update=function(e,t){var i=l(e,t);if(t.rotated){var a={r:"-"+t.rotationAngle,x:i.x,y:i.y};o.setData(e,a)}else{e.setAttribute("transform","translate(0,0)")}};s.getPreferredSize=function(t){var i=90;var a=6;var o=t.text,l=t.styles;var s=t.wrap;if(t.disableAutoRotation===false||t.rotationAngle!==0){s=1}var c=t.size;var h=e.AXIS.FIRST_LETTER;if(o&&o.length>0){h=o[0]}h+=e.AXIS.FIRST_LETTER;var p=n(o,l,s,c);var d=t.noEllipsis?p:n(h,l);var f=p.height;var v=u(f,t.rotationAngle);var g=p.height,m=p.width,y;if((t.rotated||p.width>t.size)&&(t.position===e.POSITION.TOP||t.position===e.POSITION.BOTTOM)){if(!t.rotated&&t.disableAutoRotation){y=false;m=t.size}else{y=true;m=p.height;if(t.rotationAngle===i){g=p.width}else{var _=t.cellWidth/2+t.cellStart+(t.additionalWidth?t.additionalWidth:0);var A=_/Math.cos(t.rotationAngle*Math.PI/180);if(p.width<A){A=p.width}g=A*Math.sin(t.rotationAngle*Math.PI/180);g+=v;var b=m/Math.sin(t.rotationAngle*Math.PI/180)*.9;if(b>m){m=b}}}}var x={cellWidth:m,cellHeight:g,rotated:y,textSize:p};if(t.position===e.POSITION.TOP||t.position===e.POSITION.BOTTOM){if(y){x["minCellHeight"]=Math.min(d.width,p.width);if(t.rotationAngle!==i){x["minCellHeight"]=x["minCellHeight"]*Math.sin(t.rotationAngle*Math.PI/180);x["minCellHeight"]+=2*v-2*a+1}}else{if(p.hasOwnProperty("minHeight")){x["minCellHeight"]=p.minHeight}else{x["minCellHeight"]=p.height}if(x.cellWidth<Math.min(d.width,p.width)){x.noLabelSpace=true}}}else{x["minCellWidth"]=Math.min(d.width,p.width)}var S=r.getAbsoluteTextBaselineOffset({fontSize:l["fontSize"],fontWeight:l["fontWeight"],fontFamily:l["fontFamily"]});x.absoluteTextBaselineOffset=S;return x};s.autoHide=function(e,t){return true};s.expose={renderer:s,update:s.update,getPreferredSize:s.getPreferredSize,autoHide:s.autoHide};return s});define("sap/viz/chart/components/util/BuildLayerUtil",["sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/components/axis/renderer/DefaultCategoryLabelRenderer"],function(e,t,i,a){var r=6;var o=5;var n=90;var l={};l._filter=function(e,t){return t.reduce(function(t,i,a){return!i.invisible&&e[a]?t.concat(e[a]):t},[])};l._getLayerslength=function(e){var t=0;if(e.length&&e[0].length){t=e[0].length}return t};l._getDisplayTexts=function(e,a){return i.map(e,t.getDisplayTextsConverter(a))};function s(e,t){if(e&&!e.or){var i={or:[e]};i.or.push(t);e=i}else{e.or.push(t)}return e}l._mergeCtx=function(e,i){var a=e.length;var r={};for(var o=0;o<a;++o){var n=e[o];var l=i[o];if(!t.isPlainValue(n)){r[l]=t.getDimensionValue(n);r[l+t.DIMENSION_DISPLAYNAME_SUFFIX]=t.getDimensionDisplayName(n)}else{r[l]=n}}return r};function u(e,i){return t.getDimensionValue(e)===t.getDimensionValue(i)}l.mergeLabels=function(e,t,i,a,r){var o=[];var n=this._getLayerslength(t);var l=this._getDisplayTexts(t,e._bindingFields);var c=e._cellDict={};var h=0;var p;var d=t.length;for(var f=0;f<n;++f){var v=new Array(d);var g=new Array(d+1);var m=0;var y=0;var _=0;var A=0;var b=true;var x=o[f-1];var S=0;for(var D=0;D<d;++D){var w=this._mergeCtx(t[D],i);var C=1;if(f!==n-1){++y;++_;C=y;y=0;b=_===1;if(f>0&&_>=o[f-1].cells[A].space){_=0;++A}if(D>0&&!b&&u(t[D][f],t[D-1][f])){var T=m-1;v[T].ctx=s(v[T].ctx,w);v[T].space++;continue}}var z=r&&(D!==0&&D!==d-1)?"":l[D][f];var L=c[h]=v[m]={id:h,layer:f,text:z,ctx:w,space:C};g[m]=D;m++;h++;if(x){if(D>=p[S+1]){S++}var P=x.cells[S];P.children=P.children||[];P.children.push(L)}}v.length=m;g[m]=d;g.length=m+1;p=g;o.push({cells:v})}return o};l.assignCellSize=function(e,t,i,a){var r=e._isVertical();for(var o=0,n=t.length;o<n;++o){var l=t[o];var s=0;var u=l.cells;for(var c=0,h=u.length;c<h;++c){var p=u[c];_.getRangeInfo(i,s,a,p,r);s+=p.space}}};function c(e){return e.length===1}function h(e){return e._isTrellisAxis||e._isInTrellis}function p(e,t,i,a,r,o,n,l){var s=i[t];var u=e.length*a;var c=0;var h;if(s.rotated||a===0){h=false}else if(a===1){h=true}else{h=true;var p;for(p=0;p<e.length;p++){var d=e[p];var f=o(d,t,s);r.push(f);if(f.rotated&&!s.rotated){c++;if(c>u){h=false;break}}if(!n&&f[l]>d[l]){h=false;break}}}if(h||r.length!==e.length){r.splice(0,r.length)}return h}l.layoutCells=function(t,i,l,s,u){if(!s){return}var f=s.propStyle;var v=s.labelVisible;var m=s.checkLabelVisible;var y=+s.truncatedLabelRatioSetting;if(isNaN(y)){y=.2}y=Math.max(0,Math.min(1,y));var A=s.defaultRotationAngle;var b=s.autoRotateSetting;if(b!=="auto"&&b!=="fixed"){b="auto"}var x=s.rotationAngleSetting;var S=[0,30,45,60,90];if(S.indexOf(x)<0){x=A}var D=s.labelRenderer||a;var w;var C=t._isVertical();var T=function(e,i,a,r,o){var n=f;if(a.isParentLayer){n=s.propParentStyle}return _.fillPreferredSize(D,C,e,n,i,t._position,a.rotated,r,o,s.otherSize,s.wrap,s.noEllipsis)};var z=r+o;var L=l.slice();if(L[0]>L[1]){L.reverse()}var P,k,E;var I,O,R,N,M,B;var V,F,H;if(t._isVertical()){V="cellHeight";F="minCellWidth";H="cellWidth"}else{V="cellWidth";F="minCellHeight";H="cellHeight"}var U={};U.getPreferredSize=T;U.cellSizeField=V;U.minCellBandField=F;U.cellRefSizeField=H;U.offset=z;U.isVertical=C;O=i.length;for(I=O-1;I>=0;--I){var W=!D.autoHide||!D.autoHide(t._isVertical(),I,a.expose);P=i[I];P.onlyKeepFirstAndLast=u;P.isVisible=true;P.rotated=false;k=P.cells;M=0;if(I!==O-1){P.isParentLayer=true}if(m&&v===false){P.isVisible=false;continue}var G=y;var Y=h(t);if(Y){G=0}else if(s.paginationOptions||u){G=1}var X;if(I===0){var j,Z;X=0;var q=false;var K=x;var Q=false;if(x===0){Q=true}var $=c(i);if(!$||Y){if(t._isVertical()){K=0}else{K=n}}var J=function(e){return T(e,0,P,Q,K)};var ee;if(u){k[0].isFirstLabel=true;if(k.length>1){k[k.length-1].isLastLabel=true;ee=[k[0],k[k.length-1]]}else{ee=[k[0]]}}else{ee=k.slice()}var te;var ie=function(){var t;var i=false;if(!W&&!u){_.excludeCrossBoundCells(ee,L,J)}var a=ee.length;te=W?1:_.getStep(ee,0,J);if(G===1){te=1}var r=0;var o=0;var n=0;for(R=0;R<a;R+=te){E=ee[R];if(te===undefined||R<0){i=true;break}w=J(E);n++;if(w.rotated){o++}if(G===0&&o>0){i=true;break}if(!W&&R!==0&&E.start<t.end-.001){o=0;n=0;R=-te;te=_.getStep(ee,r,J);continue}r=R;t=E}if(K===0||G===1&&b!=="fixed"){i=false}else if(!C&&ee.length===0){i=true}else{if(b==="fixed"&&$){i=true}if(o>0&&n>0){if(e.preciseSimple(o/n)>e.preciseSimple(G)){i=true}}}return i};P.rotated=ie();if(P.rotated){P.rotationAngle=K}if(K===0&&s.wrap){P.wrap=s.wrap}else{P.wrap=null}q=P.rotated;Q=true;if(!W&&!u){_.excludeCrossBoundCells(ee,L,J)}j=[];M=X=0;var ae=Infinity;for(R=0;R<ee.length;R+=te){E=ee[R];if(te===undefined){if(P.rotated&&P.rotationAngle!==n){break}else{if(!E._preferredSize.noLabelSpace){j.push(E);w=E._preferredSize;M=w[H];X=w[F]}break}}if(m===false&&v===false){w={cellWidth:0,cellHeight:0,minCellHeight:0};if(E){E._preferredSize=w}}else{w=J(E)}if(s.noEllipsis&&s.refSize&&w.cellWidth+z>s.refSize.width){continue}if(!w.noLabelSpace||u){j.push(E)}else{continue}w=E._preferredSize;if(M<w[H]){M=w[H]}Z=w[F];if(Z&&X<Z){X=Z}if(Z&&ae>Z){ae=Z}}if(j.length===0){P.isVisible=false;M=-z;X=-z;ae=-z}B=e.preciseSimple(M+z);for(R=0,N=k.length;R<N;++R){E=k[R];E.isVisible=false}for(R=0,N=j.length;R<N;++R){E=j[R];E[H]=B;E.isVisible=true}P.layerBand=B;P.minLayerBand=s.noEllipsis?e.preciseSimple(ae+z):e.preciseSimple(X+z);if(s.isFlexibleLayers&&(C||P.rotated)){P.reCalculateLayerContext=true}}else{X=0;var re=[];var oe=p(P.cells,I,i,G,re,T,W,V);for(R=0,N=k.length;R<N;++R){E=k[R];E.isVisible=true;if(re.length>0){w=re[R]}else{w=T(E,I,P,oe)}if(w[F]&&X<w[F]){X=w[F]}if(w.rotated&&!P.rotated){P.rotated=true;P.rotationAngle=n;R=-1;continue}else if(w.noLabelSpace){E.isVisible=false}if(M<w[H]){M=w[H]}if(!W&&w[V]>E[V]){if(s.isFlexibleLayers){P.reCalculateLayerContext=true}else{P.isVisible=false;M=-z}break}}B=e.preciseSimple(M+z);var ne=0;for(R=0,N=k.length;R<N;++R){k[R][H]=B;if(k[R].isVisible){ne++}}P.layerBand=B;P.minLayerBand=e.preciseSimple(X+z);if(ne<=0){P.isVisible=false}}if(P.reCalculateLayerContext){d(i,I,U,s.isAllowEmptySegement,s.isSetParentStyleProp)}if(!P.isVisible){for(var le=i.length-1;le>I;le--){i[le].isVisible=false}}g(P,C)}};var d=function(t,i,a,r,o){var n=t[i];var l;var s;if(i>0){var u=t[i-1].cells;for(l=0;l<u.length;l++){for(s=0;s<u[l].children.length;s++){u[l].children[s].parentIndex=l}}}else{for(l=0;l<n.cells.length;l++){n.cells[l].parentIndex=-1}}var c=[];var h=[];f(n.cells,t,i,a.isVertical,c,h,r);if(c.length===0&&o&&i<t.length-1&&t[i+1].isVisible){var p;for(p=i+1;p<t.length;p++){t[p].isVisible=false}h=[];f(n.cells,t,i,a.isVertical,c,h,r)}for(l=0;l<n.cells.length;l++){n.cells[l].isVisible=false}for(l=0;l<h.length;l++){if(a.getPreferredSize){var d=a.getPreferredSize(h[l],i,n);h[l].textBand=d[a.cellRefSizeField];h[l].minTextBand=d[a.minCellBandField]}}if(c.length>0){n.isVisible=true;n.layerBand=0;n.minLayerBand=0;for(l=0;l<c.length;l++){c[l].isVisible=true;if(n.layerBand<c[l].textBand){n.layerBand=c[l].textBand}if(n.minLayerBand<c[l].minTextBand){n.minLayerBand=c[l].minTextBand}}n.layerBand=e.preciseSimple(n.layerBand+a.offset);for(l=0;l<c.length;l++){c[l][a.cellRefSizeField]=n.layerBand}n.minLayerBand=e.preciseSimple(n.minLayerBand+a.offset);g(n,a.isVertical)}else{n.isVisible=false}};var f=function(e,t,i,a,r,o,n){var l;for(var s=0;s<e.length;s++){if(a){if(e[s].contentHeight){l=e[s].contentHeight;break}}else{if(e[s].contentHeight){l=e[s].contentWidth;break}}}var u;var c=-1;for(u=t.length-1;u>=0;u--){if(t[u].isVisible||t[u].isVisible===undefined){c=u;break}}var h=[];var p;var d=null;var f=null;for(p=0;p<e.length;p++){if(f===null||f!==e[p].parentIndex){if(d){h.push(d)}d=[];f=e[p].parentIndex}if(f===e[p].parentIndex){d.push(e[p])}if(p===e.length-1){h.push(d)}}var g;for(g=0;g<h.length;g++){if(i!==c){v(l,h[g],a,o);for(p=0;p<h[g].length;p++){if(a){if(l<h[g][p].cellHeight){r.push(h[g][p])}}else{if(l<h[g][p].cellWidth){r.push(h[g][p])}}}for(p=0;p<r.length;p++){if(o.indexOf(r[p])<0){o.push(r[p])}}}else{var m=v(l,h[g],a,r);if(!n){if(m===0){r.splice(0,r.length);break}}for(p=0;p<r.length;p++){o.push(r[p])}}}};var v=function(e,t,i,a){var r="cellWidth";if(i){r="cellHeight"}var o=0;var n;var l=0;for(n=0;n<t.length;n++){l+=t[n][r]}var s=0;var u;for(n=0;n<t.length;n++){if(n===0){u=t[n][r]/2-e/2}else{u+=t[n-1][r]/2+t[n][r]/2}if(u>s&&u+e<=l){s=u+e;a.push(t[n]);o++}}return o};var g=function(t,i){var a=.8;if(!i&&!t.rotated){t.niceLayerBand=t.layerBand;t.maxLayerBand=t.layerBand}else{var r=t.layerBand;if(t.minLayerBand){r=t.minLayerBand}t.minLayerBand=r;t.maxLayerBand=r;t.niceLayerBand=r;if(t.isVisible){if(t.layerBand){t.maxLayerBand=e.preciseSimple(t.layerBand)}var o=[];var n;for(n=0;n<t.cells.length;n++){if(t.cells[n].isVisible){if(i){if(t.cells[n].contentWidth!==undefined&&t.cells[n].contentWidth!==null){o.push(t.cells[n].contentWidth)}}else{if(t.cells[n].contentHeight!==undefined&&t.cells[n].contentHeight!==null){o.push(t.cells[n].contentHeight)}}}}var l=function(e,t){return e-t};o.sort(l);var s=o[Math.ceil(o.length*a)-1];t.niceLayerBand=e.preciseSimple(s);if(t.maxLayerBand<t.minLayerBand){t.maxLayerBand=t.minLayerBand}if(t.niceLayerBand<t.minLayerBand){t.niceLayerBand=t.minLayerBand}}}};var m=function(t,i){var a=e.preciseSimple;var r=0;var o=0;var n;var l=a(i);var s;for(n=0;n<t.length;n++){if(a(t[n].minLayerBand)>a(l)){break}else{o++;l-=t[n].minLayerBand}}for(n=0;n<t.length;n++){t[n].isVisible=false;t[n].layerBand=0}if(o>0){var u=[];var c=0;var h=0;for(n=0;n<o;n++){t[n].isVisible=true;u.push(t[n]);c+=t[n].niceLayerBand;h+=t[n].maxLayerBand}c=a(c);h=a(h);l=a(i);if(l>=h){for(n=0;n<u.length;n++){u[n].layerBand=u[n].maxLayerBand}}else{var p=c;for(n=u.length-1;n>=0;n--){u[n].layerBand=l*(u[n].niceLayerBand/p)}for(var d=0;d<u.length;d++){l=i;p=c;s=false;for(n=u.length-1;n>=0;n--){if(u[n].layerBand<u[n].minLayerBand){u[n].layerBand=u[n].minLayerBand;u[n].adjusted=true;s=true}if(u[n].adjusted){l-=u[n].layerBand;p-=u[n].niceLayerBand}}if(s){for(n=u.length-1;n>=0;n--){if(!u[n].adjusted){u[n].layerBand=l*(u[n].niceLayerBand/p)}}}else{break}}l=a(i);p=a(c);for(n=0;n<u.length;n++){delete u[n].adjusted;s=false;if(u[n].layerBand>u[n].maxLayerBand){u[n].layerBand=u[n].maxLayerBand;s=true}l-=u[n].layerBand;p-=u[n].niceLayerBand;if(s){for(var f=n+1;f<u.length;f++){u[f].layerBand=l*(u[f].niceLayerBand/p)}}}for(n=0;n<u.length;n++){if(l>0){if(u[n].layerBand<u[n].maxLayerBand){if(l>u[n].maxLayerBand-u[n].layerBand){l-=u[n].maxLayerBand-u[n].layerBand;u[n].layerBand=u[n].maxLayerBand}else{u[n].layerBand+=l;l=0}}}else{break}}}r=0;for(n=0;n<u.length;n++){r+=u[n].layerBand}r=a(r)}return r};l.flexibleLayoutLayers=function(t,i,a,n){var l=r+o;var s=0;var u;var c;if(a===undefined||a===null){a=Infinity}var h=[];for(u=0;u<t.length;u++){if(t[u].isVisible===undefined||t[u].isVisible===true){h.push(t[u])}if(t[u].isVisible&&t[u].cells){t[u].hasEmptyCell=false;for(c=0;c<t[u].cells.length;c++){if(!t[u].cells[c].isVisible){t[u].hasEmptyCell=true;break}}}}for(u=0;u<t.length;u++){var p=h.length;s=m(h,a);if(!n){for(u=0;u<h.length;u++){var f=false;if(h[u].isVisible&&h[u].hasEmptyCell&&u!==h.length-1){f=true}if(h[u].isVisible&&h[u].cells){for(c=0;c<h[u].cells.length;c++){if(y(h[u].cells[c])){f=true;break}}}if(f){for(var v=h.length-1;v>u;v--){h[v].isVisible=false}}}}h=[];for(u=0;u<t.length;u++){if(t[u].isVisible===undefined||t[u].isVisible===true){h.push(t[u])}}if(h.length>0&&p!==h.length&&h[h.length-1].cells&&h[h.length-1].reCalculateLayerContext){var g={};if(i){g.cellSizeField="cellHeight";g.minCellBandField="minCellWidth";g.cellRefSizeField="cellWidth"}else{g.cellSizeField="cellWidth";g.minCellBandField="minCellHeight";g.cellRefSizeField="cellHeight"}g.offset=r+o;g.isVertical=i;d(h,h.length-1,g,n)}else{break}}for(u=0;u<t.length;u++){if(t[u].isVisible&&t[u].cells){for(c=0;c<t[u].cells.length;c++){if(i){t[u].cells[c].cellWidth=t[u].layerBand;if(t[u].cells[c].contentWidth>t[u].layerBand-l){t[u].cells[c].contentWidth=t[u].layerBand-l}}else{if(t[u].cells[c].cellHeight>t[u].layerBand){t[u].cells[c].cellHeight=t[u].layerBand}if(t[u].cells[c].contentHeight>t[u].layerBand-l){t[u].cells[c].contentHeight=t[u].layerBand-l}}}}}s=e.preciseSimple(s);return s};var y=function(e){var t=true;if(e.children){for(var i=0;i<e.children.length;i++){if(e.children[i].isVisible){t=false;break}}}return t};l.getVisibleLayers=function(e,t){var i=[];if(e._properties.get("label.hideSubLevels")){if(t.length){if(t[0].isVisible){i.push(t[0])}i=[t[0]]}}else{for(var a=0,r=t.length;a<r;++a){if(t[a].isVisible){i.push(t[a])}}}return i};var _={};_.defaultLabelGetPreferredSize=function(e){return{cellWidth:e.size,cellHeight:e.size}};_.getRangeInfo=function(e,t,i,a,r){var o=0;var n,l;var s=a.space;for(var u=0;u<s;++u){var c=e[u+t];var h=c[0]*i;var p=c[1]*i;o+=Math.abs(h-p);if(u===0){n=h}if(u===s-1){l=p}}if(r){a.cellHeight=o}else{a.cellWidth=o}a.cellStart=n;a.cellEnd=l;a.middle=(n+l)/2};_.fillPreferredSize=function(e,t,i,r,o,l,s,u,c,h,p,d){var f,v;if(t){f="cellHeight";v="minCellWidth"}else{f="cellWidth";v="minCellHeight"}var g,m;var y=e.getPreferredSize!==undefined;if(y){g=e.getPreferredSize}else{g=a.getPreferredSize}if(c===undefined){c=n}var _=0;if(h){if(h.valueAxis){_=h.valueAxis.width}else if(h.categoryAxis2){_=h.categoryAxis2.width}}var A={ctx:i.ctx,styles:r,text:i.text,layer:o,size:i[f],position:l,rotated:s,rotationAngle:c,cellWidth:i.cellWidth,cellStart:i.cellStart,disableAutoRotation:u,additionalWidth:_,noEllipsis:d};if(!s||c===0){A.wrap=p}m=g.call(e,A,a.expose);if(!m){m=a.getPreferredSize(A)}if(m[v]===undefined){m[v]=0}i._preferredSize=m;i.contentWidth=m.cellWidth;i.contentHeight=m.cellHeight;var b=i.middle;var x=m[f]/2;i.start=b-x;i.end=b+x;return m};_.isCellOutOfBound=function(e,t){var i=[e.start,e.end];if(i[0]>i[1]){i.reverse()}return i[0]<t[0]||i[1]>t[1]};_.findBoundaryBinary=function(e,t,i,a,r){if(r-a===1){return a}var o=Math.floor((r+a)/2);i(e[o]);if(_.isCellOutOfBound(e[o],t)){return _.findBoundaryBinary(e,t,i,o,r)}else{return _.findBoundaryBinary(e,t,i,a,o)}};_.excludeCrossBoundCells=function(e,t,i){var a;var r=Math.floor(e.length*.1)||1;var o,n=-1,l=e.length;for(o=0;o<l;){i(e[o]);if(!_.isCellOutOfBound(e[o],t)){n=o;break}if(o===l-1){break}o=Math.min(o+r,l-1)}if(n>0){a=_.findBoundaryBinary(e,t,i,n-r,n)}else if(n<0){e.splice(0);return}if(a!==undefined){e.splice(0,a+1);l=e.length;var s=l-(a+1);if(s>=0){a=undefined;i(e[s]);if(_.isCellOutOfBound(e[s],t)){a=s;for(o=s-1;o>=0;o--){i(e[o]);if(!_.isCellOutOfBound(e[o],t)){break}a=o}}else{for(o=s+1;o<l;o++){i(e[o]);if(_.isCellOutOfBound(e[o],t)){a=o;break}}}e.splice(a,l-a)}}};_.getStep=function(e,t,i){if(e.length<=1){return 1}var a;var r=e[t];var o=r.end-.001;var n=e.length;var l;for(var s=t+1;s<n;s++){l=e[s];if(l.cellStart>=o){for(var u=s;u<n;u++){i(e[u]);if(e[u].start>=o){a=u-t;break}}break}}return a};return l});define("sap/viz/chart/layout/AxisLayout",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/layout/BaseLayout","sap/viz/chart/components/util/BuildLayerUtil"],function(e,t,i,a,r,o){var n=t.DIRECTION.HORIZONTAL;var l=t.DIRECTION.VERTICAL;var s=t.AXIS.SPACING_TO_ROUGH;var u=t.AXIS.SPACING_MAX_IN_PX;var c=t.AXIS.FIX_SPACING_MAX_IN_PX;var h="axisTitle";var p=i.preciseSimple;function d(e,t){return e.option.order-t.option.order}function f(e,t){return e.option.priority-t.option.priority}function v(e,t){return e.module.getPreferredSize(t)}function g(e,i){if(e.option.offsetType===t.AXIS.FIX_LAYOUT_TYPE){return t.AXIS.FIX_TITLE_OFFSET}else{return e.option.offset*i}}var m=function(){m.superclass.constructor.apply(this,arguments);this.config.add({sortOrderFn:d,sortPriorityFn:f,offsetFn:g,sizeFn:v,rootWidth:0,rootHeight:0,roughWidth:0,roughHeight:0,position:"",layoutAlgorithm:"auto",isFlexibleLayers:false})};e.extend(m,r);m.prototype.layout=function(e){var t=this.config;var i=t.get("totalWidth");var a=t.get("totalHeight");var r=t.get("position");var o=t.get("offsetFn");var l=t.get("sizeFn");var d=t.get("rootWidth");var f=t.get("rootHeight");var v=t.get("roughWidth");var g=t.get("roughHeight");var m=t.get("isFlexibleLayers");var w=t.get("isFixedPadding");var C=b(r,i,a);var T=x(r,i,a);var z=_(r);var L=A(r);var P=this._dictToArray(e);var k=S(P,t);var E=D(P,t);var I=L===n;var O,R,N,M,B,V,F,H;H=Math.min(v,g);if(I){M="minWidth";B="maxWidth";V="minHeight";O="width";R="height";N="x";F=d}else{M="minHeight";B="maxHeight";V="minWidth";O="height";R="width";N="y";F=f}var U=T;var W=0,G=k.length,Y,X,j;var Z=false;var q=0;var K=s*H;for(;W<G;++W){Y=k[W];if(Z){Y.isEnough=false;continue}X=l(Y);q=o(Y,F);j=Math.min(q,K);j=w&&Y.module.alias==="axisTitle"?c:Math.min(j,u);if(X[B]&&p(U-j-X[M])>=0&&Math.ceil(X[V])<=Math.ceil(C)){Y.isEnough=true;U=p(U-j);if(U>=X[B]){Y[O]=X[B];U=p(U-X[B])}else{Y[O]=y(U,X.spacings,m);U=0}}else{Y.isEnough=false;if(X[B]){Z=true}}U=p(U)}W=0;G=E.length;var Q={};var $,J;if(z<0){J=0;for(;W<G;++W){$={x:0,y:0,width:0,height:0};Y=E[W];if(Y.isEnough){q=o(Y,F);j=Math.min(q,K);j=w&&Y.module.alias==="axisTitle"?c:Math.min(j,u);J+=j;$[N]=J;J+=$[O]=Y[O];$[R]=C;if(t.get("layoutAlgorithm")==="fixed"&&Y.module.alias===h){$[N]=T-Y[O]}}Q[Y.module.alias]=$}}else{J=T;for(;W<G;++W){$={x:0,y:0,width:0,height:0};Y=E[W];if(Y.isEnough){q=o(Y,F);j=Math.min(q,K);j=w&&Y.module.alias==="axisTitle"?c:Math.min(j,u);J-=j;J-=$[O]=Y[O];$[R]=C;if(t.get("layoutAlgorithm")==="fixed"&&Y.module.alias===h){J=0}}$[N]=J;Q[Y.module.alias]=$}}return Q};m.prototype.getPreferredSize=function(e){var t=this.config;var i=t.get("totalWidth");var r=t.get("totalHeight");var o=t.get("position");var l=t.get("sizeFn");var h=t.get("offsetFn");var d=this._dictToArray(e);var f=t.get("rootWidth");var v=t.get("rootHeight");var g=t.get("roughWidth");var m=t.get("roughHeight");var y=t.get("isFixedPadding");var _=[];var x=0;var D=0;var w=S(d,t);var C=w.length;var T=A(o);var z=T===n;var L=z?"height":"width";var P=z?"width":"height";var k=b(o,i,r);var E=a.isVertical(o)?i:r;var I,O,R,N,M,B,V,F;F=Math.min(g,m);if(z){M="maxWidth";B="minHeight";V=f}else{M="maxHeight";B="minWidth";V=v}var H=false;var U=[];var W={};for(;x<C&&!H;++x){I=w[x];var G=h(I,V);var Y=s*F;N=Math.min(G,Y);N=y&&I.module.alias==="axisTitle"?c:Math.min(N,u);var X={};X[P]=E-D-N;X[L]=k;O=l(I,X);if(Math.ceil(O[B])<=Math.ceil(k)&&O[M]&&p(D+N+O[M])<=p(E)){D+=N+O[M];U.push(I.module.alias);W[I.module.alias]=O[M]}else if(O[M]!==0){H=true}}var j=0,Z=0;if(z){j=D;Z=k}else{j=k;Z=D}return{width:j,height:Z,extra:{visibleComponents:U,componentsPrfSize:W}}};function y(e,i,a){var r;if(a){r=o.flexibleLayoutLayers(i,true,e)}else{r=0;var n;if(!i){return r}for(var l=0,s=i.length;l<s;++l){n=i[l];r+=n.interval;r=p(r);if(r>e){switch(n.type){case t.SPACING_TYPE.STEP:r-=n.interval;break;case t.SPACING_TYPE.RANGE:r=e;break}}}}return r}function _(e){if(e===t.POSITION.TOP||e===t.POSITION.LEFT){return 1}else{return-1}}function A(e){if(e===t.POSITION.TOP||e===t.POSITION.BOTTOM){return l}else{return n}}function b(e,t,i){return a.isVertical(e)?i:t}function x(e,t,i){return a.isVertical(e)?t:i}function S(e,t){return e.slice().sort(t.get("sortPriorityFn"))}function D(e,t){return e.slice().sort(t.get("sortOrderFn"))}return m});define("sap/viz/chart/components/util/AxisBodyUtil",[],function(){var e=function(e,t){var i="translate("+t.x+", "+t.y+")";if(e._tickGroupNode){e._tickGroupNode.attr("transform",i)}if(e._labelGroupNode){e._labelGroupNode.attr("transform",i)}};var t=function(e){var t;if(e){t=[];for(var i=0,a=e.length;i<a;++i){var r={id:e[i].id,name:e[i].name,invisible:e[i].hidden};if(e[i].values){var o={};e[i].values.forEach(function(e){o[e.id]=e.name});r.values=o}t.push(r)}}return t};return{setTransform:e,getBindingFields:t}});define("sap/viz/chart/components/axis/AxisContainer",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/container/UIContainer","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/components/util/BoundUtil","sap/viz/chart/components/axis/sub/AxisTitle","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/chart/layout/AxisLayout","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/chart/components/util/AxisBodyUtil","sap/viz/framework/interaction/Constants"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d){var f="Axis Title";var v={left:"v-m-yAxis",top:"v-m-xAxis2",right:"v-m-yAxis2",bottom:"v-m-xAxis"};var g=function(t,i){g.superclass.constructor.apply(this,arguments);this._valueAxes=i.valueAxes;this._disableTitle=!!i.disableTitle;this.categoryTitleXoffset=null;this.categoryTitleYoffset=null;this._roughSize={width:0,height:0};this._bodyLayersNumber=-1;var a=this._properties;var r=this;if(i&&i.hasScrollbar){this.setChild(e.AXIS.SCROLLBAR_NAME,new s(t,{name:"plotArea.scrollbar"}),{order:2,priority:0,offset:0})}["height","width"].forEach(function(e){var t={set:function(e,t){if(e===null||parseFloat(e)>=0){return e}else{return t.value}}},i={layout:{}};i.layout[e]=t;a.add(i)});if(!i.isTrellis){var o={},n={};o[this._name]={value:[],readonly:true,serializable:false,get:function(){var e=[],t,i,a,o,n,l,s;var u=0;var h=0;if(r._properties.get("title.visible")&&r._selections&&r._selections["axisTitle"]&&r._selections["axisTitle"].length>0){i=r._selections["axisTitle"].node().getBoundingClientRect();if(i.width>1.5&&i.height>1.5){o=[[]];o[0].push([i.left,i.top]);o[0].push([i.right,i.top]);o[0].push([i.right,i.bottom]);o[0].push([i.left,i.bottom]);e.push({name:r._name+" title",bound:o})}}if(r._parent&&r._parent.select(".v-m-axisBody").node()){var p=r._parent.select(".v-m-axisBody").node();var d=p.getAttribute("clip-path");if(d&&d.length>0){d=d.replace(/\s/g,"");var f=/^url\(/;d=d.replace(f,"");d=d.replace(/\)$/,"");d=d.replace(/^\"/,"");d=d.replace(/\"$/,"");p=r._parent.select(d).node()}l=p.getBoundingClientRect();if(d&&d.length>0){if(l.width===0&&l.height===0){var v=p.querySelector("rect");if(v){l=v.getBoundingClientRect()}}}if(l.width>1.5||l.height>1.5){a={left:l.left,right:l.right,top:l.top,bottom:l.bottom};n=[[]];n[0].push([a.left+u,a.top+h]);n[0].push([a.right+u,a.top+h]);n[0].push([a.right+u,a.bottom+h]);n[0].push([a.left+u,a.bottom+h]);e.push({name:r._name,bound:n})}s=r._parent.node().ownerSVGElement}c.calcOffsetFromChart(s,e);return e}};n[this._name]={value:[],readonly:true,serializable:false,get:function(){var e,t,i;if(r._parent){var a=d3.select(r._parent.node().ownerSVGElement);e=h.buildRes(r._name,i,a,r.isByBound())}return e}};t.zoneManager().add({tempPropertyZone:o,tempFeedingZone:n})}this.setLayoutAlgorithm(new u);this._scale=null;this._bindingFields=[];if(!this._disableTitle){this.setChild("axisTitle",new l(t,i),{order:3,priority:1,offset:e.AXIS.SPACING_TO_ROOT})}this._position=null;this._parent=null;var p=this.runtime().graphicModel();if(p){p.registerExposedModule(i.name)}};t.extend(g,i);g.prototype.zoom=function(e){if(e){this._realSize.width=this._size.width*e.x;this._realSize.height=this._size.height*e.y;this._updateData(this._getSizeInfo())}this._updateSubModules(e)};g.prototype.update=function(){this._updateData(this._getSizeInfo());this._updateSubModules()};g.prototype._updateSubModules=function(){if(this.getChild("axisBody")){this.getChild("axisBody").module.update()}};g.prototype.scroll=function(e){for(var t in this._children){if(this._children.hasOwnProperty(t)){var i=this.getChild(t).module;if(i.scroll){i.scroll(e)}}}};g.prototype.setData=function(e){this._bindingFields=p.getBindingFields(e.metaData)||this._bindingFields};g.prototype.setPosition=function(t){var i=this._properties;var a=i.get("visible");var r=parseFloat(i.get("layout.height"));var n=parseFloat(i.get("layout.width"));this._position=t;for(var l in this._children){if(this._children.hasOwnProperty(l)){var s=this.getChild(l);s.module.setPosition(this._position);if(l==="axisTitle"){var u=s.option;if(a&&o.isHorizontal(u.position)?r>=0:n>=0){u.offsetType=e.AXIS.FIX_LAYOUT_TYPE}}}}return this};g.prototype._isVertical=function(){return o.isVertical(this._position)};g.prototype._isHorizontal=function(){return o.isHorizontal(this._position)};g.prototype._updateData=function(){if(!this._disableTitle){this.getChild("axisTitle").module.setData(this._getTitle())}};g.prototype._getTitle=function(){var e={};e.text="";e.isCustomized=false;e.items=[];var t="";var i=this._properties.get("title.text");if(r.isString(i)){t=i;e.isCustomized=true}else if(this._bindingFields){t=this._constructTitle(this._bindingFields,e.items)}else{t=f;e.isCustomized=true}e.text=t;return e};g.prototype._constructTitle=function(e,t){return""};g.prototype.getParent=function(){if(this._parent){return this._parent.select("g."+e.CSS.CLASS.AXIS.CONTAINER)}else{return null}};g.prototype.addARIATag=function(e){};g.prototype.renderAddition=function(e){this.getChild("axisBody").module.renderValueBasedColorLine(e)};g.prototype.render=function(t){this.addARIATag(t);this._parent=t;g.superclass.render.apply(this,arguments);n.drawBound(t,this._size.width,this._size.height,undefined,true);var i=t.select("g."+e.CSS.CLASS.AXIS.CONTAINER);if(this._size.width>0||this._size.height>0){if(!i.node()){delete this._selections;this._selections=null;i=t.append("g").attr("class",e.CSS.CLASS.AXIS.CONTAINER)}this._initRenderBase(i);this.layout();if(this.getChild("axisBody")){var a=this.getChild("axisBody").module.getAvailableLayersNumber();this._bodyLayersNumber=a;if(!this._disableTitle){this.getChild("axisTitle").module.setTitleHiddenItems(a)}}this._renderSub()}var r=v[this._position];t.classed(r,true)};g.prototype.isVisible=function(){return this._bodyLayersNumber>0};g.prototype.setChild=function(e,t,i){g.superclass.setChild.apply(this,arguments);if(t.setPosition&&i.position){t.setPosition(i.position)}};g.prototype._setupLayout=function(e,t){this._updateData(e);var i=a.getPositiveInt;var r=this._properties.origin;var o=this.calculatePaddingInPX(r,this._roughSize.width,this._roughSize.height);var n=i(o.propertyPaddingInPX,o.constantPaddingInPX);var l=i(o.propertyPaddingTopInPX,n);var s=i(o.propertyPaddingRightInPX,n);var u=i(o.propertyPaddingBottomInPX,n);var c=i(o.propertyPaddingLeftInPX,n);var h=false;var p=this.getChild("axisBody");if(p&&p.module){if(p.module.isFlexibleLayers){h=p.module.isFlexibleLayers()}}var d=this._layoutAlgorithm.config;d.set("position",this._position);d.set("rootWidth",this._roughSize.width-(s+c));d.set("rootHeight",this._roughSize.height-(l+u));d.set("roughWidth",this._roughSize.width);d.set("roughHeight",this._roughSize.height);d.set("isFlexibleLayers",h);if(e.width!==undefined){d.set("totalWidth",e.width)}if(e.height!==undefined){d.set("totalHeight",e.height)}if(["left","right"].indexOf(this._position)>-1&&this._properties.get("layout.width")!==null||["top","bottom"].indexOf(this._position)>-1&&this._properties.get("layout.height")!==null||t&&t.pagination){d.set("layoutAlgorithm","fixed")}};g.prototype._getSizeInfo=function(e){var t={width:this._size.width,height:this._size.height};if(e){if(e.width){t.width=e.width}if(e.height){t.height=e.height}}else if(this._realSize.width>this._size.width||this._realSize.height>this._size.height){if(this._isHorizontal()){t.width=this._realSize.width}else{t.height=this._realSize.height}}return t};g.prototype._configLayout=function(){this._setupLayout(this._getSizeInfo())};g.prototype._postLayout=function(){var e=this._layoutResult;var t=this._selections;for(var i in this._children){if(this._children.hasOwnProperty(i)){var a=this._children[i].module;var r=t?t[i]:null;var o=e[i];if(this._isHorizontal()){a.setSize({width:this._size.width,height:o.height})}else{a.setSize({width:o.width,height:this._size.height})}a.setRealSize({width:o.width,height:o.height});if(a.layout){a.layout()}if(r){r.attr("transform","translate("+o.x+","+o.y+")");if((this._name=="categoryAxis"||this._name=="categoryAxis2")&&i=="axisBody"){this.categoryTitleXoffset=o.x;this.categoryTitleYoffset=o.y}}}}};g.prototype.getPreferredSize=function(e,t){this._setupLayout(this._getSizeInfo(e),t);this._layoutAlgorithm.config.add({isFixedPadding:this._properties.origin.get("general.layout.isFixedPadding")});var i=this._layoutAlgorithm.getPreferredSize(this._children);return a.preciseObject(i)};g.prototype._renderSub=function(){for(var e in this._children){if(this._children.hasOwnProperty(e)){this.getChild(e).module.render(this._selections[e])}}};function m(e,t,i){var a={left:e.left,right:e.right,top:e.top,bottom:e.bottom};if(i==="left"){a.left=t[0][1][0]+1}else if(i==="right"){a.right=t[0][0][0]-1}else if(i==="top"){a.top=t[0][3][1]+1}else if(i==="bottom"){a.bottom=t[0][0][1]-1}return a}g.prototype.appendSynonymClass=function(e,t){var i=v[this._position];e.classed(i,true)};g.prototype.destroy=function(){g.superclass.destroy.call(this);this._bindingFields=null;this._disableTitle=null;this._parent=null;this._position=null;this.categoryTitleXoffset=null;this.categoryTitleYoffset=null};g.prototype.setRoughSize=function(e){if(e.width!=null){this._roughSize.width=e.width}if(e.height!=null){this._roughSize.height=e.height}};g.prototype.isByBound=function(e){return false};return g});define("sap/viz/chart/components/axis/renderer/ValueBodyRenderer",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/SVG","sap/viz/framework/property/PropertyManager","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/migrate/PropertyUtil"],function(e,t,i,a,r,o,n,l,s,u){var c=e.CSS.CLASS.AXIS;var h=1;var p=6;var d=5;var f=6;var v=3;var g={};g.drawLines=function(t,i,a,o,l,h,p,d){var f=c.PERIMETER+" "+c.LINE;var v=h instanceof n;var g=v?h.get("color"):h.color;if(r.isArray(g)&&d){var m=d.length>1?1:0;g=u.getComplexProperty("color",g,m,h)}var y=0;var _=0;var A=0;var b=0;var x=p.register({fillColor:s.convertColor(g)});var S=v?h.get("axisLine.size"):h.axisLine.size;if(!r.isNumber(S)){S=1}var D,w,C;if(l===e.POSITION.TOP||l===e.POSITION.BOTTOM){C=a}else{C=o}if(i[0]<i[1]){D=i[0]-S/2;w=C+S/2}else{D=i[1]-S/2;w=C+S/2}switch(l){case e.POSITION.LEFT:y=a;_=D;A=a;b=w;break;case e.POSITION.RIGHT:y=0;_=D;A=0;b=w;break;case e.POSITION.TOP:y=D;_=o;A=w;b=o;break;case e.POSITION.BOTTOM:y=D;_=0;A=w;b=0;break}var T=t.select("."+c.LINE);if(!T.node()){T=t.append("line").style("pointer-events","none").attr("class",f).attr("shape-rendering","crispEdges")}T.attr("stroke",x).attr("stroke-width",S);T.attr("x1",y).attr("y1",_).attr("x2",A).attr("y2",b);return T};var m="."+c.TICK+", ."+c.LONGTICK;function y(e,t){var i=e.length;if(i<=2){return e}var a=true;var r;for(r=i-1;r>0;--r){if(Math.abs(e[r]-e[r-1])>=t){a=false;break}}if(a){e.splice(1,i-2)}else{for(r=i-1;r>0;--r){if(Math.abs(e[r]-e[r-1])<t){e.splice(r-1||r,1)}}}return e}function _(e,t){var i=[];if(e&&r.isArray(e)){i=e.slice(0);y(i,h);if(!t){y(i,p)}}return i}g.drawTicks=function(i,a,o,l,h,p,f,v,g){var y=p instanceof n;var A=c.PERIMETER+" "+c.TICK;var b=y?p.get("color"):p.color;if(r.isArray(b)&&g){var x=g.length>1?1:0;b=u.getComplexProperty("color",b,x,p)}var S=f.register({fillColor:s.convertColor(b)});var D=y?p.get("axisLine.size"):p.axisLine.size;var w=_(a,v);var C=0,T=w.length;var z=[],L=[],P=[],k=[];switch(h){case e.POSITION.LEFT:for(;C<T;++C){z[C]=o;L[C]=w[C];P[C]=o-d;k[C]=w[C]}break;case e.POSITION.RIGHT:for(;C<T;++C){z[C]=0;L[C]=w[C];P[C]=d;k[C]=w[C]}break;case e.POSITION.TOP:for(;C<T;++C){z[C]=w[C];L[C]=l;P[C]=w[C];k[C]=l-d}break;case e.POSITION.BOTTOM:for(;C<T;++C){z[C]=w[C];L[C]=0;P[C]=w[C];k[C]=d}break}var E=i.selectAll(m).data(w);E.enter().append("line").each(function(){this.setAttribute("class",A);this.setAttribute("stroke",S);this.setAttribute("stroke-width",D);this.setAttribute("shape-rendering","crispEdges")});E.exit().remove();E.each(function(e,i){this.setAttribute("x1",t.preciseSimple(z[i]));this.setAttribute("y1",t.preciseSimple(L[i]));this.setAttribute("x2",t.preciseSimple(P[i]));this.setAttribute("y2",t.preciseSimple(k[i]))})};g.getTrellisBaseValueIndex=function(e){var t=e.length-1;var i=e[0].value,a=e[t].value;var r=l.getTrellisBaseValueIndex(i,a);return r===1?t:r};g.drawLabels=function(t,r,l,s,u,h,p,m,y,_){if(!t){return}var A=c.LABEL+" "+c.MORPHABLE_LABEL+" "+c.LABEL_BACKWORD;var b=p instanceof n?p.get("label.style"):p.label.style;var x=a.getTextBaselineOffset(b);var S=0;var D=l.length;var w;var C=!!m.applyTrellisBehavior;var T=g.getTrellisBaseValueIndex(l);var z=null;var L=this.runtime().envManager();if(L){z=L.textAnchor()}if(i.isVertical(h)){for(;S<D;++S){w=l[S];w.textAnchor=z;w.x=d+f;if(h===e.POSITION.LEFT){w.x=s-w.x-w.width}w.y=r.scale(w.value)-x;w.y+=C&&S===T?-v:w.height/2}}else{for(;S<D;++S){w=l[S];w.textAnchor=z;w.x=r.scale(w.value);if(_&&S===D-1){w.x-=w.width}else if(C&&S===T){w.x+=v}else{w.x-=w.width/2}if(h===e.POSITION.TOP){w.y=u-d-f-x}else{w.y=d+f+w.height-x}}}var P=y.register({fillColor:b.color});var k=b["fontSize"];var E=b["fontWeight"];var I=b["fontFamily"];var O=b["fontStyle"];var R=t.selectAll("."+c.LABEL).data(l);R.enter().append("g").each(function(e,t){this.setAttribute("class",A);this.setAttribute("fill",P);this.setAttribute("font-size",k);this.setAttribute("font-weight",E);this.setAttribute("font-family",I);this.setAttribute("font-style",O);var i=o.create("text");this.appendChild(i)});R.exit().remove();R.each(function(e,t){var i=this.querySelector("text");i.textContent=e.text;i.setAttribute("text-anchor",e.textAnchor);i.setAttribute("x",e.x);i.setAttribute("y",e.y)})};return g});define("sap/viz/chart/components/util/ClippathUtil",["sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/Constants"],function e(t,i){var a=i.CSS.CLASS.CLIPPATH;var r={drawClippath:function(e,i,r,o,n,l){var s=a;if(l){s=s+"-"+l}if(i<0){i=0}if(r<0){r=0}if(e.select("."+s).node()===null){var u="clip-path-"+t.guid();var c=e.insert("clipPath",":first-child").attr("class",s).attr("id",u);c.append("rect").attr("x",o).attr("y",n).attr("width",i).attr("height",r);return u}else{e.select("."+s).select("rect").attr("width",i).attr("height",r).attr("x",o).attr("y",n);return e.select("."+s).attr("id")}}};return r});define("sap/viz/chart/components/axis/sub/ValueAxisBody",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/AxisComponent","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/util/BoundUtil","sap/viz/chart/components/axis/renderer/ValueBodyRenderer","sap/viz/chart/scales/ValueScaleUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/chart/components/util/ClippathUtil","sap/viz/chart/components/util/AxisBodyUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/format/FormatManager"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v){var g=5;var m=6;var y=5;var _=3;var A=i.CSS.CLASS.AXIS;var b=function(e,t){b.superclass.constructor.apply(this,arguments);this._isPercentageMode=false;this._tickGroupNode=null;this._labelGroupNode=null;this._offset={x:0,y:0};this._valueAxes=t.valueAxes};e.extend(b,t);b.prototype.setPercentageMode=function(e){this._isPercentageMode=!!e;return this};b.prototype.update=function(){var e=this._properties;if(e.get("visible")&&this._data){var t=this._size.width;var i=this._size.height;var a=this._position;var r=this._data;if(this._isSpaceEnough()){var o=this._getTicksToRender();var l=n.getTicksPosition(o,r);var s=this._getAllLabels(o,r);var u=this.runtime().effectManager();if(e.get("axisTick.visible")){this.drawTicks(this._tickGroupNode,l,t,i,a,e,u)}if(e.get("label.visible")&&s.length){this.drawLabels(this._labelGroupNode,r,s,t,i,a,e,this._options,u,this._adjustLastLabel)}}}};b.prototype.scroll=function(e){h.setTransform(this,e);this._offset.x=e.x;this._offset.y=e.y};b.prototype.render=function(e){var t=this._properties;var i=this._size.width;var a=this._size.height;r.drawBound(e,i,a,null,true);e.select("g."+A.LINE_GROUP).remove();e.select("g."+A.TICK_GROUP).remove();e.select("g."+A.LABEL_GROUP).remove();if(this._data&&t.get("visible")){var o=this._position;var l=this._data;var s=l.getRange();var u=null;var p=this.runtime().effectManager();if(this._isSpaceEnough()){var f=this._isVertical();if(t.get("axisLine.visible")){u=e.append("g").attr("class",A.LINE_GROUP);var v=this.drawLines(u,s,i,a,o,t,p,this._valueAxes);d.setData(u.node(),{isVertical:f,isPercentage:this._isPercentageMode})}var y=this._getTicksToRender();var _=n.getTicksPosition(y,l);var b=this._getAllLabels(y,l,false);var x;if(t.get("axisTick.visible")){x=c.drawClippath(e,this._size.width+2,this._size.height+2,-1,-1,"ticks");u=e.append("g").attr("clip-path","url(#"+x+")");this._tickGroupNode=u.append("g").attr("class",A.TICK_GROUP);this.drawTicks(this._tickGroupNode,_,i,a,o,t,p)}if(t.get("label.visible")&&b.length){var S=this.getPadding(this._data);var D={x:0,y:0,width:this._size.width,height:this._size.height};var w=this._getWidestLabel(b)+m+g;var C=0;if(f){D.y-=S.start;D.height+=S.start+S.end;C=w-D.width;if(this._noReLayout&&C>0){D.width+=C;D.x-=C}}else{D.x-=S.start;D.width+=S.start+S.end;C=w-D.height;if(this._noReLayout&&C>0){D.height+=C;D.y-=C}}x=c.drawClippath(e,D.width+2,D.height+2,D.x-1,D.y-1,"labels");u=e.append("g").attr("clip-path","url(#"+x+")");this._labelGroupNode=u.append("g").attr("class",A.LABEL_GROUP);this.drawLabels(this._labelGroupNode,l,b,i,a,o,t,this._options,p,this._adjustLastLabel)}}}if(this._offset.x||this._offset.y){h.setTransform(this,this._offset)}};b.prototype._getTicksToRender=function(){return n.getTicks(this._data)};b.prototype.drawLines=o.drawLines;b.prototype.drawTicks=function(e,t,i,a,r,n,l){return o.drawTicks(e,t,i,a,r,n,l,false,this._valueAxes)};b.prototype.drawLabels=o.drawLabels;b.prototype.setData=function(e,t){this._noReLayout=t;if(t){this._fullScale=this._fullScale||this._data}else{this._fullScale=null}b.superclass.setData.apply(this,arguments)};b.prototype.paginationOptions=function(){var e;if(this._runtime&&this._runtime._interaction&&this._runtime._interaction._service&&this._runtime._interaction._service.getDataModel){var t=this._runtime._interaction._service.getDataModel();e=t&&t._rawData&&t._rawData._FlatTableD&&t._rawData._FlatTableD._dataset&&t._rawData._FlatTableD._dataset.metadata&&t._rawData._FlatTableD._dataset.metadata.options}return e};b.prototype.getMaximizedLabelWidth=function(e,t){var i=e;var a=0;var r=t._domain;var o=t.maximizedDomain;var l=this.paginationOptions();if(l&&o&&r&&!t.isFixed()){if(!p.isNumber(o[0])){o[0]=0}if(!p.isNumber(o[1])){o[1]=0}var s=t.getTickHint();var u=new f(o,t.getRange());var c=s*s;u.setTickHint(c);n.perfectTicks(u,c);var h=n.getTicks(u);var d=this._getAllLabels(h,u,true,true);a=this._getWidestLabel(d)}if(i<a){i=a}return i};b.prototype.getPreferredSize=function(){var e={minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,spacings:[{interval:0,type:i.SPACING_TYPE.STEP}]};var t=this._properties;if(this._data&&t.get("visible")){var r=this._noReLayout?this._fullScale:this._data;var o=r.getRange();var l=Math.abs(o[0]-o[1]);var s=m+g;var u=[],c=[];if(t.get("label.visible")){u=n.getTicks(r);c=this._getAllLabels(u,r,true)}if(this._isVertical()){var h=this._getWidestLabel(c);s+=h;e.minWidth=s;e.maxWidth=m+g+this.getMaximizedLabelWidth(h,r);e.minHeight=l;e.maxHeight=l}else{s+=this._getHighestLabel(c);e.minWidth=l;e.maxWidth=l;e.minHeight=s;e.maxHeight=s}e.spacings=[{interval:s,type:i.SPACING_TYPE.STEP}]}var p=a.preciseObject(e);this._updatePfdSize(p);return p};b.prototype.getAvailableLayersNumber=function(){var e=0;if(this._data&&this._properties.get("visible")&&this._isSpaceEnough()){e=1}return e};b.prototype.formatTickValue=function(e,t,i,r){var o=i.get("label.formatString");var n=i.get("label.unitFormatType");var l=e;var s;var c={decimalFormatString:u.getDecimalFormatString(u.SUPPORT_CUSTOM_COMPONENTS.VALUEAXIS)};if(t){if(o&&o.indexOf("u")!==o.length-1){l=u.format(e,o,n,c)}else{l=a.preciseSimple(e*100).toString()}}else{var h=this._runtime.statusManager().get("dynamicScale");var p=h&&h[this._name];if(o||n){l=(p||u).format(e,o,n,c)}else{l=a.preciseSimple(e).toString()}}return l};b.prototype.getPadding=function(e){var t=e.getDomain();var i=this._properties.get("visible");var a=this._properties.get("label.style");var r=this._properties.get("label.visible");if(!i||!r){return{start:y,end:y}}var o={start:_,end:_};o.start+=this._getPadding(this.formatTickValue(t[0],this._isPercentageMode,this._properties,e),a);if(this._isVertical()||!this._adjustLastLabel){o.end+=this._getPadding(this.formatTickValue(t[1],this._isPercentageMode,this._properties,e),a)}return o};b.prototype._getPadding=function(e,t){var i=0;var a=this._measureTextSize(e,t);if(this._isVertical()){i=a.height/2}else{i=a.width/2}return i};b.prototype._getAllLabels=function(e,t,i,a){var r=[];var o=e.length;for(var n=0;n<o;n++){var l={};var s=e[n];l.value=s;l.text=this.formatTickValue(s,this._isPercentageMode,this._properties);r.push(l)}this._setLabelsPosition(r,t);var u=r;if(!a){u=this._filterLabels(r,i)}return u};b.prototype._setLabelsPosition=function(e,t){var i=e.length;var r=this._properties;var n=r.get("label.style");var l=this._options&&this._options.applyTrellisBehavior;var s=l?o.getTrellisBaseValueIndex(e):-1;for(var u=0;u<i;++u){var c=e[u];if(!a.isNoValue(c.value)){var h=this._measureTextSize(c.text,n);var p=h.width,d=h.height;c.width=p;c.height=d;var f=t.scale(c.value);if(this._isVertical()){if(s===u){if(u===0){c.start=f;c.end=f+d}else{c.start=f-d;c.end=f}}else{c.start=f-d/2;c.end=f+d/2}}else{if(s===u){if(u===0){c.start=f;c.end=f+p}else{c.start=f-p;c.end=f}}else{if(u===i-1&&this._isAdjustLastLabel(p)){c.start=f-p;c.end=f+p}else{c.start=f-p/2;c.end=f+p/2}}}}}};b.prototype._getOriginalDomainMinMaxSize=function(e){var t=this._properties.get("label.style");return e.map(function(e){var i=this.formatTickValue(e,this._isPercentageMode,this._properties,this._data);return this._measureTextSize(i,t)}.bind(this))};b.prototype._isAdjustLastLabel=function(e){var t=false;var i=this._runtime.statusManager();var a=i.get("ChartPaddingInfo");if(a){var r=a.paddingRight?a.paddingRight:a.padding;if(!this._isVertical()&&e/2>r&&(this._properties.origin.get("legendGroup.computedVisibility")===false||i.get("legendGroup.isHorizontal")!==false)){t=true}}this._adjustLastLabel=t;return t};b.prototype._getWidestLabel=function(e){var t=0;var i=e.length;var a=[];var r=this._name==="valueAxis2"?this._runtime.statusManager().get("globalDomain2"):this._runtime.statusManager().get("globalDomain");if(r){a=this._getOriginalDomainMinMaxSize(r)}for(var o=0;o<i;++o){if(t<e[o].width){t=e[o].width}}a.forEach(function(e){if(t<e.width){t=e.width}});return t};b.prototype._getHighestLabel=function(e){var t=0;var i=e.length;for(var a=0;a<i;++a){if(t<e[a].height){t=e[a].height}}return t};b.prototype._filterLabels=function(e,t){var i=this._runtime.propertyManager().get("plotArea.adjustScale");var a=[];var r;var o=this._data.getDomain();var n=false;if(i&&!t&&this._data.getDomainChanged()){var l=this.runtime().statusManager();var u=function(e,t){if(e&&t){if(e[0]>=0&&t[0]<0){n=true}}};if(this.getName()==="valueAxis"){r=l.get("valueAxisScaleDomain");u(r,o)}else if(this.getName()==="valueAxis2"){r=l.get("valueAxis2ScaleDomain");u(r,o)}}if(e.length>0){var c=e.length;if((e[0].value<0||e[c-1].value<0)&&(e[0].value>0||e[c-1].value>0)){var h=[];var p=[];for(var d=0;d<e.length;d++){if(e[d].value<=0){h.push(e[d])}if(e[d].value>=0){p.push(e[d])}}var f;var v=h.length;if(h[0].value<=h[v-1].value){f=h[0]}else{f=h[v-1]}var g;var m=p.length;if(p[0].value<=p[m-1].value){g=p[m-1]}else{g=p[0]}h=s.calculateLabelsToDrawHelper(h,false);p=s.calculateLabelsToDrawHelper(p,false);if(h[0].value>h[h.length-1].value){h.reverse()}if(p[0].value>p[p.length-1].value){p.reverse()}if(h[h.length-1].value===0&&p[0].value===0){h.pop()}var y=h.concat(p);if(f.value!==y[0].value){y.splice(0,0,f)}if(g.value!==y[y.length-1].value){y.push(g)}if(y[0].start>y[y.length-1].start){y.reverse()}a=s.calculateLabelsToDrawHelper(y,n)}else{a=s.calculateLabelsToDrawHelper(e,false)}if(a.length<=1||a.length===2&&s.isOverLapped(a[0],a[1])){a=[]}}var _=function(e,t,i,a){if(e&&t){var r=i.length;var o=a?0:r-1;for(;a?o<i.length:o>0;a?o++:o--){if(i[o].value<0){i[o].text=""}else{break}}}};if(n){if(this.getName()==="valueAxis"){_(r,o,a,this._position==="left"?false:true)}else if(this.getName()==="valueAxis2"){_(r,o,a,false)}}return a};b.prototype.destroy=function(){b.superclass.destroy.call(this);this._isPercentageMode=null;this._tickGroupNode=null;this._labelGroupNode=null};return b});define("sap/viz/chart/components/axis/ValueAxis",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/AxisContainer","sap/viz/chart/components/axis/sub/ValueAxisBody","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments);this.setChild("axisBody",new i(e,t),{order:1,priority:2,offset:0});var a=this;var r,n,l,s,u,c;if(this._name==="valueAxis"){u="primaryScale"}if(this._name==="valueAxis2"){u="secondaryScale"}r="plotArea."+u+".autoMinValue";n="plotArea."+u+".autoMaxValue";l="plotArea."+u+".minValue";s="plotArea."+u+".maxValue";c="plotArea."+u+".fixedRange";this._properties.origin.add(r,{defaultValue:[],serializable:false,get:function(){return a._scale?a._scale.getAutoDomain()?a._scale.getAutoDomain()[0]:a._scale.getDomain()[0]:undefined}});this._properties.origin.add(n,{defaultValue:[],serializable:false,get:function(){return a._scale?a._scale.getAutoDomain()?a._scale.getAutoDomain()[1]:a._scale.getDomain()[1]:undefined}});this._properties.origin.add(l,{defaultValue:[],serializable:false,get:function(){if(a._scale&&a._scale.getDomainFixed()[0]){return a._scale.getDomain()[0]}return null}});this._properties.origin.add(s,{defaultValue:[],serializable:false,get:function(){if(a._scale&&a._scale.getDomainFixed()[1]){return a._scale.getDomain()[1]}return null}});this._properties.origin.add(c,{defaultValue:[],serializable:false,get:function(){if(a._scale&&a._scale.getDomainFixed()){var e=a._scale.getDomainFixed();var t=e[0];var i=e[1];if(!t&&!i){return false}return true}return false}})};e.extend(o,t);o.prototype.setPercentageMode=function(e){this.getChild("axisBody").module.setPercentageMode(!!e);return this};o.prototype.getMaxZoomRatio=function(){var e=this._scale.getTickHint();if(e>=1){return e}else{return Number.MAX_VALUE}};o.prototype.setScale=function(e){if(e.scale){this._scale=new a(e.scale.getDomain(),[0,1],e.scale.getDomainFixed(),{maximizedDomain:e.scale.maximizedDomain});this._scale.setDomainChanged(e.scale.getDomainChanged());this._scale.setZeroAdjusted(e.scale.getZeroAdjusted());var t=true;if(this._properties.has("label.allowDecimals")){t=this._properties.get("label.allowDecimals")}this._scale.setAllowDecimals(t)}};o.prototype.setData=function(e,t){this._noReLayout=t;o.superclass.setData.apply(this,arguments);this.setScale(e);if(e.scale){this._scale.setAutoDomain(e.scale.getAutoDomain());this._scale.setTickHint(e.tickHint)}};o.prototype.getPadding=function(e){var t=this.getChild("axisBody");if(!t||!e){return{start:0,end:0}}return t.module.getPadding(e)};o.prototype._updateData=function(e){o.superclass._updateData.apply(this,arguments);if(this._scale){if(this._isVertical()){var t=this._properties.get("layout.direction");if(t==="topDown"){this._scale.setRange([0,e.height])}else{this._scale.setRange([e.height,0])}}else{this._scale.setRange([0,e.width])}}this.getChild("axisBody").module.setData(this._scale,this._noReLayout)};o.prototype._setPercentageTitle=function(e){var t;if(this._runtime&&this._runtime._interaction&&this._runtime._interaction._chartType){t=this._runtime._interaction._chartType}if(t&&t.indexOf("100")>-1){e=e+r.CSS.CLASS.AXIS.LABEL_PERCENTAGE}return e};o.prototype._constructTitle=function(e,t){var i=e.map(function(e){return e.name||e.id}).join(" & ");i=this._setPercentageTitle(i);var a={};a.isHidden=false;a.text=i;t.push(a);return i};o.prototype.destroy=function(){o.superclass.destroy.call(this);this._scale=null};o.prototype.supportFixedLayout=true;return o});define("sap/viz/chart/components/axis/renderer/OrdinalCommonBodyRenderer",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/axis/renderer/ValueBodyRenderer","sap/viz/chart/components/axis/renderer/DefaultCategoryLabelRenderer","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/PositionUtil","sap/viz/framework/common/util/RuleUtil","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d){var f=e.CSS.CLASS.AXIS;var v="categorylabel-id";var g=5;var m=6;var y=90;var _="#B3B3B3";var A=g+m-1;function b(e,t){var i=0;for(var a=0;a<t;++a){i+=e[a].layerBand}return i}var x=function(t){var r=-1;if(t.position===e.POSITION.TOP||t.position===e.POSITION.BOTTOM){if(t.rotated){r=t.size.height;if(t.rotationAngle!==y){var o=t.styles;var n=a.canvasMeasure(t.text,o.fontSize,o.fontWeight,o.fontFamily).height;n=i.preciseSimple(n);var l=n/Math.tan(t.rotationAngle*Math.PI/180);r=r/Math.sin(t.rotationAngle*Math.PI/180);r-=l;var s=t.cellWidth/2+t.cellStart+(t.additionalWidth?t.additionalWidth:0);var u=s/Math.cos(t.rotationAngle*Math.PI/180);if(r>u){r=u}r+=A}}else{r=t.size.width+A}}else{r=t.size.width}if(r>=0){r-=A}return r};var S=function(){this.defaultCategoryLabelRenderer=n;this._noEllipsis=false};S.prototype.drawLines=function(e,t,i,a,r,n,l,s){o.drawLines(e,i,a,r,n,l,s)};function D(e,t,i){var a=e.length;var r=t[a-1].length;var o=e.slice().reverse();var n=new Array(r);for(var l=0;l<r;++l){var s=a-1;var u=t[s][l];while(s>0&&t[s-1].indexOf(u)>-1){s--}s=a-s;var c=s>1;var h=!i||c?b(o,s):g;n[l]={length:h,isLongTick:c}}return n}S.prototype.drawTicks=function(e,t,i,a,r,n,l,s){if(!t.length||!i.length){return}var u=a.width;var c=a.height;var h=n.axisTick.shortTickVisible;var p=n.axisTick.visible;var d=T(i,a,r);var f=t.length;var v=D(t,d,true);var g;if(f===1){g=d[0]}else{g=d[d.length-1]}if(h===false&&p||h===true&&!p){var m;for(m=v.length-1;m>=0;m--){if(p&&!v[m].isLongTick||!p&&v[m].isLongTick){g.splice(m,1);v.splice(m,1)}}}if(f===1){if(h||p){var y=s||this._isForceDrawTicks(d,i);o.drawTicks(e,g,u,c,r,n,l,y)}}else if(f>1){this._drawTicks(e,g,u,c,r,v,n,l,n.axisLine.size)}};S.prototype._isForceDrawTicks=function(e,t){return e[0].length<t[0].length};S.prototype._forceLabelRectRotation=function(){return false};S.prototype._drawTicks=function(t,a,r,o,n,l,s,u,c){var h=f.PERIMETER;var p=h+" "+f.TICK;var d=h+" "+f.LONGTICK;var v=u.register({fillColor:s.color});var g=0,m=a.length;var y=[],_=[],A=[],b=[];switch(n){case e.POSITION.LEFT:for(;g<m;++g){y[g]=r;_[g]=a[g];A[g]=r-l[g].length;b[g]=a[g]}break;case e.POSITION.RIGHT:for(;g<m;++g){y[g]=0;_[g]=a[g];A[g]=l[g].length;b[g]=a[g]}break;case e.POSITION.TOP:for(;g<m;++g){y[g]=a[g];_[g]=o;A[g]=a[g];b[g]=o-l[g].length}break;case e.POSITION.BOTTOM:for(;g<m;++g){y[g]=a[g];_[g]=0;A[g]=a[g];b[g]=l[g].length}break}var x=t.selectAll("."+h).data(a);x.enter().append("line").each(function(e,t){var i=p;if(l[t].isLongTick){i=d}this.setAttribute("class",i);this.setAttribute("stroke",v);this.setAttribute("stroke-width",c);this.setAttribute("shape-rendering","crispEdges")});x.exit().remove();x.each(function(e,t){this.setAttribute("x1",i.preciseSimple(y[t]));this.setAttribute("y1",i.preciseSimple(_[t]));this.setAttribute("x2",i.preciseSimple(A[t]));this.setAttribute("y2",i.preciseSimple(b[t]))})};S.prototype.drawGridTicks=function(e,t,i,a,r,o,n,l){var s=t.length;if(s===0){return}var u=D(t,i);this._drawTicks(e,i[i.length-1],a,r,o,u,n,l,n.size)};S.prototype.drawLabels=function(e,t,i,a,r,o,n,l,s,u){var c=t.slice().reverse();var h=c.length;var p=0;var d=0;for(;d<h;++d){p=b(c,d);this.drawSingleLayerLabels(e,c[d],i,a,r,p,d,c,o,n,l,s,u)}while(e.select(".index_"+d).node()){e.selectAll(".index_"+d).remove();++d}};var w=function(e,t,i,a){var r=2;var o=parseFloat(e.getAttribute("x"));var n=parseFloat(e.getAttribute("y"));var l=parseFloat(e.getAttribute("width"));var s=parseFloat(e.getAttribute("height"));e.setAttribute("width",l+2*r);e.setAttribute("height",s+2*r);var u=i;var c=a;var h=Math.sqrt(2)*r;var p;if(t===y/2){c=a-h}else if(t<y/2){p=2*y-(y-t)-y/2;c=a-h*Math.sin(p*Math.PI/180);u=i+h*Math.cos(p*Math.PI/180)}else{p=y-t+y/2;c=a-h*Math.sin(p*Math.PI/180);u=i-h*Math.cos(p*Math.PI/180)}return"translate("+u+","+c+")"};S.prototype._setLabelRectSize=function(e,t,i){if(e&&t){e.setAttribute("width",t.width);e.setAttribute("height",t.height)}};function C(t,a){var r=t.windowSize||t;var o=0,n=0;if(t.positionInWindow){o=t.positionInWindow.x;n=t.positionInWindow.y}var l=r.width,s=r.height,u=t.offset;var c,h;switch(a){case e.POSITION.LEFT:case e.POSITION.RIGHT:c=-u.y-n;h=s+c;break;default:c=-u.x-o;h=l+c;break}return{min:i.preciseSimple(c)-1e-4,max:i.preciseSimple(h)+1e-4}}function T(e,i,a){var r=C(i,a);var o=[];for(var n=0,l=e.length;n<l;n++){var s=e[n];var u=t.bisearch(s,r.min);var c=t.bisearch(s,r.max);o.push(s.slice(u,c+1))}return o}function z(e,t,i,a,r,o){var n=C(t,i);var l=[];for(var s=0,u=e.length;s<u;s++){var c=e[s];var h=r&&!o&&a&&c.middle<n.min;if(!h&&c.cellStart<=n.max&&c.cellEnd>=n.min){l.push(c)}}return l}var L=f.LABEL+" "+f.MORPHABLE_LABEL+" "+f.LABEL_BACKWORD+" "+f.LABEL_SELECTION;S.prototype._createLabelStyle=function(e,t){this._propStyle=t.style;this._propParentStyle=c.buildParentStyle(t.style,t.parentStyle)};S.prototype._getLabelStyle=function(e,t){var i=d.clone(this._propStyle);if(t){i=d.clone(this._propParentStyle)}return i};var P=3;var k=3;var E=24;S.prototype.drawSingleLayerLabels=function(e,t,o,u,c,p,d,_,A,b,S,D,C){var T=v;var k=o.width;var O=o.realSize&&o.realSize.width;var R=o.height;var N=c.labelRenderer;var M=true;if(!r.isFunction(N)){N=this.defaultCategoryLabelRenderer;M=false}var B=t.onlyKeepFirstAndLast;this._createLabelStyle(A,c.label);var V=this._getLabelStyle(null,t.isParentLayer);var F=A.register({fillColor:V.color});var H=[],U=t.rotated,W=s.isVertical(u);var G,Y,X;for(G=0,Y=t.cells.length;G<Y;++G){var j=t.cells[G];if(j.isVisible){j._cellIndex=G;H.push(j);if(C!==false){j.cellStart=i.round(j.cellStart);j.cellEnd=i.round(j.cellEnd);j.cellWidth=i.round(j.cellWidth);j.end=i.round(j.end);j.middle=i.round(j.middle);j.start=i.round(j.start)}}}X=_.length===1?m:g;this._setLabelParameters(H,u,p,k,R,X,t);var Z=false;if(B){H.forEach(function(e,t){e.textBiggerThanCell=e._preferredSize.textSize&&e._preferredSize.textSize.width>e.cellWidth;if(e.textBiggerThanCell){e.alignMode=e.isFirstLabel?"ALIGIN_LEFT_MOST":"ALIGIN_RIGHT_MOST"}});var q,K;if(H.length===2&&(H[0].textBiggerThanCell||H[1].textBiggerThanCell)){var Q=H[0]._preferredSize.textSize.width;var $=H[1]._preferredSize.textSize.width;var J=H[0].textBiggerThanCell?Q:H[0].middle+Q/2;var ee=H[1].textBiggerThanCell?O-$:H[1].middle-$/2;var te=ee-E;if(J>te){if(H[0].text.length>P){q=H[0].text.slice(0,P)+"...";K=I(q,V);var ie=H[0].textBiggerThanCell?K:H[0].middle+K/2;if(K>te){H=[H[1]]}else{if(H[0].textBiggerThanCell){Z=te}else{Z=Math.max((te-H[0].middle)*2,0)}if(Z<K){H=[H[1]]}}}else{H=[H[1]]}}}if(H.length===1&&H[0].textBiggerThanCell&&H[0]._preferredSize.textSize.width>O){if(H[0].text.length>P){q=H[0].text.slice(0,P)+"...";K=I(q,V);if(K>O){H=[]}}else{H=[]}}}else{H=z(H,o,u,_.length===1,U,W)}var ae=W?"cellHeight":"cellWidth";var re={cellStart:null,cellWidth:null,size:null,text:null,ctx:null,childCells:null,position:u,rotated:U,rotationAngle:t.rotationAngle,styles:null,needRowAxisOffset:b,labelOffset:S,additionalWidth:D,reverseDots:c.reverseDots,wrap:t.wrap,noEllipsis:!!this._noEllipsis};var oe=this;var ne=e.selectAll(".index_"+d).data(H);ne.enter().append("g").each(function(e,i){var a=oe._getLabelStyle(e,t.isParentLayer);this.setAttribute("class",L+" index_"+d);this.setAttribute("fill",F);this.setAttribute("font-size",a.fontSize);this.setAttribute("font-weight",a.fontWeight);this.setAttribute("font-family",a.fontFamily);this.setAttribute("font-style",a.fontStyle)});ne.exit().remove();var le=this._forceLabelRectRotation();ne.each(function(e,o){var s=oe._getLabelStyle(e,t.isParentLayer);var u=s.fontSize;var p=s.fontWeight;var v=s.fontFamily;var m=s.fontStyle;re.styles=s;this.setAttribute(T,e.id);this.setAttribute("transform","translate("+e.x+","+e.y+")");var b=e._preferredSize;var S=Math.max(e[ae],b[ae]);re.size=W?{width:e.cellWidth,height:S}:{width:S,height:e.cellHeight};re.cellStart=e.cellStart;re.cellWidth=e.cellWidth;re.text=e.text;re.ctx=e.ctx;var D=false;if(_[d-1]&&_[d-1].isVisible){D=true}if(_.length>1&&D){re.childCells=_[d].cells[e._cellIndex].children}re.unfilteredFirstChild=e.children&&e.children[0];var C;if(B){if(e.isFirstLabel&&Z!==false){C=Z}else{C=O}}else{C=x(re)}re.sizeLimit=C;re.cell=e;re.labelAlignment="top";if(c.label.alignment==="center"){re.labelAlignment=c.label.alignment}var z=I(e.text,s);var L=0;if(e.text.length>1){L=I(e.text[0]+"...",s)}var P=null;if(C>=Math.min(L,z)){P=this.querySelector("."+f.BACKGROUND_RECT);if(!P){P=l.create("rect");P.setAttribute("class",f.BACKGROUND_RECT);P.setAttribute("fill","transparent");this.appendChild(P)}else if(B){P.setAttribute("fill","transparent")}P.setAttribute("x",e.rectX);P.setAttribute("y",e.rectY)}if(e.alignMode){re.alignMode=e.alignMode}else{delete re.alignMode}var k=this.querySelector(".v-axis-label-wrapper");var E=null;if(k&&r.isFunction(N.update)){if(k.childNodes&&k.childNodes.length>0){E=k.childNodes[0]}N.update(k.firstChild,re,n.expose)}else{E=N(re,n.expose);if(E===undefined){E=oe.defaultCategoryLabelRenderer(re)}if(E){if(k){k.parentNode.removeChild(k)}k=l.create("g");k.setAttribute("class","v-axis-label-wrapper");k.appendChild(E);this.appendChild(k)}}F=A.register({fillColor:re.styles.color});this.setAttribute("fill",F);this.setAttribute("font-size",re.styles.fontSize);this.setAttribute("font-weight",re.styles.fontWeight);this.setAttribute("font-family",re.styles.fontFamily);this.setAttribute("font-style",re.styles.fontStyle);if(!M&&c.textAnchor){E.setAttribute("text-anchor",c.textAnchor)}if(P){var R;if(oe.labelRectSizeNeedTextNodeSize){if(E){var V=h.getBBox(E);if(le&&U){R={width:V.height,height:V.width}}else{R=V}}}var H={width:le&&U?e.rectHeight:e.rectWidth,height:le&&U?e.rectWidth:e.rectHeight};oe._setLabelRectSize(P,H,R);var G,Y,X;if(t.rotated&&t.rotationAngle!==y&&t.rotationAngle!==0){if(e.isEventRectLimited){G=a.canvasMeasure(e.text,u,p,v);Y=i.preciseSimple(G.height);X=i.preciseSimple(G.width);var j=Math.min(C,X);P.setAttribute("width",Y);P.setAttribute("height",j);var q=Y/4*Math.sin(re.rotationAngle*Math.PI/180);var K=w(P,re.rotationAngle,-q,g);var Q="rotate("+(90-re.rotationAngle)+","+e.rectX+","+e.rectY+") ";P.setAttribute("transform",K+" "+Q)}else{P.setAttribute("transform","skewX(-"+(90-t.rotationAngle)+")");var $=e.contentWidth*3;if($<e.cellWidth){P.setAttribute("width",$);P.setAttribute("x",e.rectX+e.cellWidth/2-$/2)}}}else{P.removeAttribute("transform")}}if(k){this._cellIndex=e._cellIndex;var J=e[ae]-b[ae];if(J<0){k.setAttribute("transform","translate("+(W?"0, "+J/2:J/2+",0")+")")}else{k.removeAttribute("transform")}}})};var I=function(e,t){var r=a.canvasMeasure(e,t["fontSize"],t["fontWeight"],t["fontFamily"]).width;r=i.preciseSimple(r);return r};function O(e,t,i){if(!e||t<1||!e.length||!e[0].cells.length){return null}var a=[];var r=e[0].cells[0].layer;var o=e[t].cells[i];if(o.children){var n=o.children.slice();while(n.length){var l=n.shift();if(l.layer<r){n=n.concat(l.children)}else if(l.layer===r){a.push(l)}}}return a}S.prototype._setLabelParameters=function(t,i,a,r,o,n,l){var s=0,u=t.length,c;switch(i){case e.POSITION.LEFT:for(s=0;s<u;++s){c=t[s];c.x=r-a-c.cellWidth;c.y=c.cellStart}break;case e.POSITION.RIGHT:for(s=0;s<u;++s){c=t[s];c.x=a;c.y=c.cellStart}break;case e.POSITION.TOP:for(s=0;s<u;++s){c=t[s];c.x=c.cellStart;c.y=o-a-c.cellHeight}break;case e.POSITION.BOTTOM:for(s=0;s<u;++s){c=t[s];c.x=c.cellStart;c.y=a}break}for(s=0;s<u;++s){var h=false;switch(i){case e.POSITION.LEFT:case e.POSITION.RIGHT:if(t[s].cellHeight-2<t[s].contentHeight){h=true}break;case e.POSITION.TOP:case e.POSITION.BOTTOM:if(!l.rotated||l.rotationAngle===0){h=false}else{if(t[s].cellWidth-2<t[s].contentWidth){h=true}if(l.rotated&&l.rotationAngle!==y&&t[s].cellWidth<t[s].contentWidth*3){h=true}}break}c=t[s];if(h){switch(i){case e.POSITION.LEFT:c.rectX=c.cellWidth-c.contentWidth-n;c.rectY=(c.cellHeight-c.contentHeight)/2;c.rectWidth=c.contentWidth;c.rectHeight=c.contentHeight;break;case e.POSITION.RIGHT:c.rectX=n;c.rectY=(c.cellHeight-c.contentHeight)/2;c.rectWidth=c.contentWidth;c.rectHeight=c.contentHeight;break;case e.POSITION.TOP:c.rectX=(c.cellWidth-c.contentWidth)/2;c.rectWidth=c.contentWidth;c.rectHeight=c.contentHeight;c.rectY=c.cellHeight-c.contentHeight-n;break;case e.POSITION.BOTTOM:c.rectX=(c.cellWidth-c.contentWidth)/2;c.rectY=n;c.rectWidth=c.contentWidth;c.rectHeight=c.contentHeight;break}if(i===e.POSITION.BOTTOM||i===e.POSITION.TOP){if(l.rotated&&l.rotationAngle!==y){t[s].rectY=0;t[s].rectX=c.cellWidth/2}}}else{c.rectX=1;c.rectY=1;c.rectWidth=c.cellWidth-2<0?0:c.cellWidth-2;c.rectHeight=c.cellHeight-2<0?0:c.cellHeight-2}c.isEventRectLimited=h}};return S});define("sap/viz/chart/components/axis/sub/OrdinalCommonAxisBody",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/StatusConstants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/AxisComponent","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/chart/components/util/BoundUtil","sap/viz/chart/components/axis/renderer/OrdinalCommonBodyRenderer","sap/viz/chart/components/util/ClippathUtil","sap/viz/chart/components/util/AxisBodyUtil","sap/viz/chart/components/axis/renderer/DefaultCategoryLabelRenderer","sap/viz/chart/components/util/BuildLayerUtil"],function(e,t,i,a,r,o,n,l,s,u,c,h,p){var d="in";var f=e.CSS.CLASS.AXIS;var v=90;var g=3;var m=function(){m.superclass.constructor.apply(this,arguments);this._layers=null;this._domainChanged=true;this._rawLayers=null;this._bindingFieldIds=null;this._hasNegativeValue=false;this._styleChanged=true;this._localeChanged=true;this._labelOffset=5;var e=function(){this._styleChanged=true};["fontFamily","fontSize","fontWeight","fontStyle"].forEach(function(t){this[t+"PW"]=this._properties.watch("label.style."+t,e.bind(this));this[t+"ParentPW"]=this._properties.watch("label.parentStyle."+t,e.bind(this))},this);this._isInTrellis=false;this._tickGroupNode=null;this._labelGroupNode=null;this._offset={x:0,y:0};this._cellDict={};this._bodyRenderer=new s;this._deltaBound=null;this._otherSize=null;this._buildUtils=p;this._selection=null};i.extend(m,a);m.prototype.setBuildLayerUtil=function(e){this._buildUtils=e};m.prototype.setBodyRenderer=function(e){if(e){this._bodyRenderer=e}};m.prototype.setData=function(e){var t=this._data;if(!t){this._domainChanged=true}else{var i=t.getDomain();var a=e.getDomain();if(i!==a&&JSON.stringify(i())!==JSON.stringify(a())){this._domainChanged=true}}return m.superclass.setData.apply(this,arguments)};m.prototype.setInTrellis=function(e){this._isInTrellis=e};m.prototype.isFlexibleLayers=function(e){var t=false;if(!this._isInTrellis&&this._rawLayers){if(this._rawLayers.length>1){t=true}}return t};m.prototype.isAllowEmptySegement=function(){var e=false;if(this._properties){var t=this._properties.get("labelRenderer");if(t&&t!==h){if(t.isAllowEmptySegement&&o.isFunction(t.isAllowEmptySegement)){e=t.isAllowEmptySegement()}else{e=true}}}return e};m.prototype.setBindingFields=function(e){var t=e.map(function(e){return e.id});if(JSON.stringify(this._bindingFieldIds)!==JSON.stringify(t)){this._domainChanged=true}this._bindingFieldIds=t;this._bindingFields=e;return this};m.prototype.setHasNegativeValue=function(e){this._hasNegativeValue=!!e;return this};m.prototype.getAdditionalWidth=function(){var e=[this._otherSize.valueAxis,this._otherSize.categoryAxis2,this._otherSize.leftCallouts];var t=0;for(var i=0;i<e.length;i++){if(e[i]&&e[i].width>0){t=e[i].width;break}}return t};m.prototype.update=function(){this._update(true);var e=0;if(this._needExtened()&&this._otherSize){e=this.getAdditionalWidth()}var t=this._selection.select(".v-clippath rect");t.attr("width",this._size.width+2+e).attr("x",-1-e)};m.prototype._update=function(e){if(!this._tickGroupNode&&!this._labelGroupNode){return}var t=this._properties.get();if(this._data&&t.visible){var i=this._size.width;var a=this._size.height;var r=this._position;if(e){this._layers=this._buildLayers(this._data);this.layout()}var o=this._getAvailableLayers();var n=o.length>0?o:this._layers;if(this._isSpaceEnough()){var l={width:i,height:a,offset:this._offset,windowSize:this._windowSize,positionInWindow:this._positionInWindow,realSize:this._realSize};if(t.axisTick&&(t.axisTick.visible||t.axisTick.shortTickVisible)){if(e){this._ticks=this._getTicks(n)}var s=this._ticks;this._bodyRenderer.drawTicks(this._tickGroupNode,n,s,l,r,t,this.runtime().effectManager(),this._froce)}if(t.label&&t.label.visible){this._renderLabels(t,o,l,r,e)}}}};m.prototype.setVisibleWindow=function(e,t){this._windowSize=e;this._positionInWindow=t;this._update(false)};m.prototype.scroll=function(e){c.setTransform(this,e);this._offset.x=e.x;this._offset.y=e.y;this._update(false)};m.prototype.render=function(e){this._selection=e;e.select("g."+f.LINE_GROUP).remove();e.select("g."+f.TICK_GROUP).remove();e.select("g."+f.LABEL_GROUP).remove();var t=0;if(this._needExtened()&&this._otherSize){t=this.getAdditionalWidth()}var i=u.drawClippath(d3.select(e.node()),this._size.width+2+t,this._size.height+2,-1-t,-1);e.attr("clip-path","url(#"+i+")");var a=this._properties.get();if(this._data&&a.visible){var r=this._size.width;var o=this._size.height;var n=this._position;var l=this._getAvailableLayers();if(this._isSpaceEnough()){var s=this.runtime().effectManager();var h={width:r,height:o,offset:this._offset,windowSize:this._windowSize,positionInWindow:this._positionInWindow,realSize:this._realSize};this._drawTicks(l,r,o,n,a,e,s,h);var p=this._properties.origin;if(this._hasNegativeValue===true&&p.get("plotArea.gridline.zeroLine.unhighlightAxis")===true){a.color=p.get("plotArea.gridline.color")}this._drawAxisLine(l,r,o,n,a,e,s);if(a.label&&a.label.visible){this._labelGroupNode=e.append("g").attr("class",f.LABEL_GROUP);this._renderLabels(a,l,h,n)}}}if(this._offset.x||this._offset.y){c.setTransform(this,this._offset)}};m.prototype._renderLabels=function(e,t,i,a,r){var o=this.runtime().envManager();if(o){e.textAnchor=o.textAnchor();e.reverseDots=o.reverseDots()}this._bodyRenderer.drawLabels(this._labelGroupNode,t,i,a,e,this.runtime().effectManager(),this._needRowAxisOffset(),this._labelOffset,this._needExtened()?this.getAdditionalWidth():0,r);if(this._bodyRenderer&&this._bodyRenderer.applyLabelStyle){this._bodyRenderer.applyLabelStyle(this._labelGroupNode)}};m.prototype._drawAxisLine=function(e,t,i,a,r,o,n){var l;if(r.axisLine&&r.axisLine.visible){l=o.append("g").attr("class",f.LINE_GROUP);var s=this._isVertical()?i:t;var u=[0,s];var c=this._bodyRenderer.drawLines(l,e,u,t,i,a,r,n)}return l};m.prototype._drawTicks=function(e,t,i,a,r,o,n,l){var s=this._ticks=this._getTicks(e);if(r.axisTick&&(r.axisTick.visible||r.axisTick.shortTickVisible)){this._tickGroupNode=o.append("g").attr("class",f.TICK_GROUP);this._bodyRenderer.drawTicks(this._tickGroupNode,e,s,l,a,r,n,this._froce)}};m.prototype.getPreferredSize=function(t){var i;if(this._data&&this._properties.get("visible")){i=this._layers=this._buildLayers(this._data,t)}var a={minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,spacings:[{interval:0,type:e.SPACING_TYPE.STEP}]};if(this._isVertical()){a.minWidth=a.maxWidth=.1}else{a.minHeight=a.maxHeight=.1}if(i){var o=this._data.getRange();var n=Math.abs(o[0]-o[1]);var l=this._isVertical()?"height":"width";n*=this._realSize[l];var s=t?t[l]:this._size[l]||n;var u,c=i.length;var h,p,d,f;if(c){d=a.spacings=[];for(u=0;u<c;++u){f=i[u];if(this.isFlexibleLayers()){var v={};if(!f.maxLayerBand&&!f.minLayerBand&&!f.niceLayerBand){v.maxLayerBand=0;v.minLayerBand=0;v.niceLayerBand=0}else{v.maxLayerBand=f.maxLayerBand;v.minLayerBand=f.minLayerBand;v.niceLayerBand=f.niceLayerBand}d.push(v)}else{if(u===0&&f.minLayerBand<f.layerBand){d.push({interval:f.minLayerBand,type:e.SPACING_TYPE.STEP});d.push({interval:f.layerBand-f.minLayerBand,type:e.SPACING_TYPE.RANGE})}else{d.push({interval:f.layerBand,type:e.SPACING_TYPE.STEP})}}}h=this._getMinLayersSize(d);var g=t&&t[this._isVertical()?"width":"height"];if(this.isFlexibleLayers()){p=this._buildUtils.flexibleLayoutLayers(d,this._isVertical(),g,this.isAllowEmptySegement())}else{p=this._getMaxLayersSize(d,g)}if(this._isVertical()){a.minWidth=h;a.maxWidth=p;a.minHeight=s;a.maxHeight=s}else{a.minWidth=s;a.maxWidth=s;a.minHeight=h;a.maxHeight=p}}}var m=r.preciseObject(a);this._updatePfdSize(m);return m};m.prototype.destroy=function(){["fontFamily","fontSize","fontWeight","fontStyle"].forEach(function(e){if(this[e+"PW"]==null){return}this[e+"PW"].remove();this[e+"PW"]=null;if(this[e+"ParentPW"]==null){return}this[e+"ParentPW"].remove();this[e+"ParentPW"]=null},this);m.superclass.destroy.apply(this,arguments);this._layers=null;this._rawLayers=null;this._bindingFieldIds=null;this._bindingFields=null;this._domainChanged=null;this._hasNegativeValue=null;this._styleChanged=null;this._tickGroupNode=null;this._labelGroupNode=null;this._cellDict=null;this._otherSize=null;this._deltaBound=null;this._selection=null};m.prototype._getMinLayersSize=function(e){var t=e[0].interval;if(this.isFlexibleLayers()){t=e[0].minLayerBand}return t};m.prototype._getMaxLayersSize=function(t,i){var a=0;for(var r=0,o=t.length;r<o;++r){if(typeof i!=="number"||a+t[r].interval<=i){a+=t[r].interval}else{if(t[r].type===e.SPACING_TYPE.RANGE){a=Math.min(a+t[r].interval,i)}break}}return a};m.prototype._getTicks=function(e){var t=[];var i=this._isVertical()?"cellHeight":"cellWidth";var a=e.length;for(var o=0;o<a;++o){var n=0;var l=e[o].cells;var s=l.length;var u=new Array(s+1);u[0]=0;for(var c=0;c<s;++c){n+=l[c][i];u[c+1]=a===1?n:r.preciseSimple(n)}t.push(u)}return t};m.prototype.getAvailableLayersNumber=function(){var e=this._getAvailableLayers();return e.length};m.prototype._getAvailableLayers=function(){var e;if(this._isVertical()){e=r.preciseSimple(this._realSize.width)}else{e=r.preciseSimple(this._realSize.height)}var t=this._layers;var i;var a=[];if(this.isFlexibleLayers()){this._buildUtils.flexibleLayoutLayers(t,this._isVertical(),e,this.isAllowEmptySegement());for(var o=0;o<t.length;o++){if(t[o].layerBand>0&&t[o].isVisible){a.push(t[o])}}}else{if(t){for(var n=0,l=t.length;n<l;++n){i=t[n];e-=i.layerBand;e=r.preciseSimple(e);if(e<0){if(n===0&&r.preciseSimple(e+i.layerBand-i.minLayerBand)>=0){a.push(i)}break}else{a.push(i)}}}}this._availableLayers=a;return a};m.prototype.getActiveLevels=function(){return this._availableLayers};m.prototype.getCellPosition=function(e){var t=this._cellDict[e];return{x:t.x,y:t.y,width:t.cellWidth,height:t.cellHeight}};m.prototype._getCellsRange=function(e){return e.getRangeInterval()};m.prototype.getLayoutCellsConfig=function(){var e={};if(this._properties){var t=this._properties;var i=t.get("label.style");var a=n.buildParentStyle(i,t.get("label.parentStyle"));e={propStyle:i,propParentStyle:a,isSetParentStyleProp:!!t.get("label.parentStyle"),labelVisible:t.get("label.visible"),truncatedLabelRatioSetting:parseFloat(t.get("label.truncatedLabelRatio")),autoRotateSetting:t.get("label.rotation"),labelRenderer:t.get("labelRenderer"),defaultRotationAngle:parseInt(t.getDefault("label.angle")),rotationAngleSetting:parseInt(t.get("label.angle")),checkLabelVisible:true,labelOverlapBehavior:t.get("label.overlapBehavior")}}return e};m.prototype._getScaleDomain=function(e){return e.getDomain()};m.prototype.mayOnlyFirstAndLastLabel=function(e,t){return e.labelVisible&&e.autoRotateSetting==="auto"&&t===1&&!this._isVertical()&&this._options.name==="categoryAxis"&&!this._isInTrellis&&e.labelOverlapBehavior==="showFirstLastOnly"};m.prototype._buildLayers=function(e,t){var i=this.getLayoutCellsConfig();var a;if(this._domainChanged||this._styleChanged||this._localeChanged||this.mayOnlyFirstAndLastLabel(i,this._rawLayers.length)){this._domainChanged=false;this._styleChanged=false;this._localeChanged=false;a=this._buildUtils.mergeLabels(this,this._getScaleDomain(e),this._bindingFieldIds,i);this._rawLayers=this._buildUtils._filter(a,this._bindingFields);this._formatLayerLabel()}var r=this._isVertical()?"height":"width";var o=this._realSize[r];var n=this.runtime().statusManager().get("plotRealSize");if(n){o=Math.max(n[r]||0,o);this.runtime().statusManager().set("plotRealSize",null)}var l=this._rawLayers;this._buildUtils.assignCellSize(this,l,this._getCellsRange(e),o);var s=e.getRange();if(this._needExtened&&this._otherSize){i.otherSize=this._otherSize}if(this._options.name==="categoryAxis"&&this._isHorizontal()&&!this._isInTrellis&&l.length===1&&i.rotationAngleSetting===0){var u=this._getWrapText();if(u>1){i.wrap=u}}i.isFlexibleLayers=this.isFlexibleLayers();i.isAllowEmptySegement=this.isAllowEmptySegement();i.paginationOptions=this.paginationOptions();i.refSize=t;this._buildUtils.layoutCells(this,l,[0,s[1]*o],i);this._isOnlyShowingFirstAndLastLabel=false;if(this.mayOnlyFirstAndLastLabel(i,l.length)&&this.willHaveTruncationOrRotation(l)){delete i.wrap;a=this._buildUtils.mergeLabels(this,this._getScaleDomain(e),this._bindingFieldIds,i,true);this._rawLayers=this._buildUtils._filter(a,this._bindingFields);this._formatLayerLabel();this._buildUtils.layoutCells(this,l,[0,s[1]*o],i,true);this._isOnlyShowingFirstAndLastLabel=true}if(this.isFlexibleLayers()){this._buildUtils.flexibleLayoutLayers(l,this._isVertical(),Infinity,this.isAllowEmptySegement())}return this._buildUtils.getVisibleLayers(this,l)};m.prototype.isOnlyShowingFirstAndLastLabel=function(){return this._isOnlyShowingFirstAndLastLabel};m.prototype.willHaveTruncationOrRotation=function(e){var t=e[0];if(t.rotated){return true}var i=t.cells;var a,r;for(a=0;a<i.length;a++){r=i[a];if(r._preferredSize.textSize&&r._preferredSize.textSize.width>r.cellWidth){return true}}return false};m.prototype.paginationOptions=function(){var e=this._runtime&&this._runtime._interaction&&this._runtime._interaction._service&&this._runtime._interaction._service.getDataModel();var t;if(e&&e.getPaginationOptions){t=e.getPaginationOptions()}return t};m.prototype._getWrapText=function(){var e=1;if(!this._isRTL()){e=parseInt(this._properties.get("label.linesOfWrap"));if(isNaN(e)||e<1){e=1}else if(e>g){e=g}}return e};m.prototype._formatLayerLabel=function(){};m.prototype.layout=function(){if(!(this._layers&&this._layers.length)){return}var e=this._isVertical()?this._size.width:this._size.height;var t=this._layers[0],i,a,r;if(e<t.layerBand&&e>=t.minLayerBand){i=t.cells;for(r=-1;++r<i.length;){a=i[r];if(this._isVertical()){if(a.cellWidth>0){a.cellWidth=e}}else{if(a.cellHeight>0){a.cellHeight=e}}}}};m.prototype._needRowAxisOffset=function(){return false};m.prototype.statusChanged=function(e){if(e===t.LOCALE_CHANGED){this._localeChanged=true}};m.prototype._needExtened=function(){var e=this._layers,t;var i=this._isVertical()?"height":"width";var a=this._realSize[i];if(e&&e.length>0){t=e[0].rotated&&e[0].rotationAngle!==v}else{t=false}return t};m.prototype.getLabelOffsetByCtx=function(e){if(!this._layers){this._layers=this._buildLayers(this._data)}var t=this._layers[this._layers.length-1];var i;t.cells.forEach(function(t){var a=true;for(var r in t.ctx){if(e[r]!==t.ctx[r]){a=false;break}}if(a){i=t.id}});if(i!==undefined){var a=this._cellDict[i];var r={start:a.cellStart,width:a.cellWidth,height:a.cellHeight};if(this._isHorizontal()){return{x:-(r.start+r.width-this.getSize().width)}}else{return{y:-(r.start+r.height-this.getSize().height)}}}else{return null}};return m});define("sap/viz/chart/components/axis/renderer/CategoryBodyRenderer",["sap/viz/chart/components/axis/renderer/OrdinalCommonBodyRenderer"],function(e){return e});define("sap/viz/chart/components/axis/sub/CategoryAxisBody",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/OrdinalCommonAxisBody","sap/viz/chart/components/axis/renderer/CategoryBodyRenderer","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/SVG"],function(e,t,i,a,r){var o=function(){o.superclass.constructor.apply(this,arguments);this.setBodyRenderer(new i);if(this._properties.has("layout.categoryWidth")){this._properties.set("layout.categoryWidth",function(){if(this._realSize.width>0&&this._data&&this._data._domain&&this._data._domain.length>0){return this._realSize.width/this._data._domain.length}else{return 0}}.bind(this),true,"get")}if(this._properties.has("layout.offsetToChart")){this._properties.set("layout.offsetToChart",function(){if(!this._selection){return 0}var e=this._selection.node();while(!a.hasClass(e,"v-m-root")&&!a.hasClass(e,"v-m-categoryAxis")){e=e.parentNode}if(a.hasClass(e,"v-m-categoryAxis")){var t=r.getTransformToElement(e,e.ownerSVGElement);if(t){return t.e}}else{return 0}}.bind(this),true,"get")}};e.extend(o,t);o.prototype._setOtherSize=function(e){this._otherSize=e;this._deltaBound={width:0,height:0,x:0,y:0};if(this._otherSize){var t=[this._otherSize.valueAxis,this._otherSize.categoryAxis2,this._otherSize.leftCallouts];for(var i=0;i<t.length;i++){if(t[i]&&t[i].width>0){this._deltaBound.width=t[i].width;this._deltaBound.x=-t[i].width}}}return this};return o});define("sap/viz/chart/components/accessibility/CategoryAxisNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/ChartComponentNavigator","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils"],function(e,t,i,a){function r(e){r.superclass.constructor.apply(this,arguments);this._categoryLabels=[];if(a.isFunction(e.cells)){this._cells=e.cells}else{this._cells=this.layers2cells(e.cells)}}e.extend(r,t);var o=r.prototype;var n=function(e){if(!e.visibleSpace){var t=0;if(e.children&&e.children.length){var i;for(i=0;i<e.children.length;i++){if(e.children[i].isVisible===undefined||e.children[i].isVisible===true){t+=n(e.children[i])}}}if(t<=0){t=1}e.visibleSpace=t}return e.visibleSpace};o.layers2cells=function(e){var t=[];for(var i=0;i<e.length;++i){t[i]=[];var a=0,r=0;for(var o=0;o<e[i].cells.length;++o){if(e[i].cells[o].isVisible){var l=e[i].cells[o];var s=n(l);t[i].push(l);l.spaceStart=a;l.spaceEnd=a+s-1;a+=s;l.index={row:i,col:r++};this._categoryLabels[l.id]={};this._categoryLabels[l.id].index=l.index}}}return t};o.init=function(){};o.destroy=function(){r.superclass.destroy.apply(this,arguments);this._cells=null;this._categoryLabels=null};o.up=function(e){if(this.isSingleLayer()||!this._isVerticalRender){return this.getSiblingCell(e,-1)}else{return this.getFirstChildCell(e)}};o.down=function(e){if(this.isSingleLayer()||!this._isVerticalRender){return this.getSiblingCell(e,1)}else{return this.getParentCell(e)}};o.left=function(e){if(this.isSingleLayer()||this._isVerticalRender){return this.getSiblingCell(e,-1)}else{return this.getParentCell(e)}};o.right=function(e){if(this.isSingleLayer()||this._isVerticalRender){return this.getSiblingCell(e,1)}else{return this.getFirstChildCell(e)}};o.getCategoryLabelNode=function(e){return this._categoryLabels[e].cl};o.getCells=function(){if(a.isFunction(this._cells)){return this.layers2cells(this._cells())}else{return this._cells}};o.getCell=function(e){var t=this._categoryLabels[e].index;return this.getCells()[t.row][t.col]||null};o.getSiblingCell=function(e,t){var i=this._categoryLabels[e].index;var a=this.getCells()[i.row][i.col+t];return a?a:null};o.getFirstChildCell=function(e){var t=this._categoryLabels[e].index;var i=this.getCells()[t.row+1];if(!i){return null}var a=this.getCells()[t.row][t.col];var r;for(r=0;r<i.length;++r){if(a.spaceStart==i[r].spaceStart){return i[r]}}};o.getParentCell=function(e){var t=this._categoryLabels[e].index;var i=this.getCells()[t.row-1];if(!i){return null}var a=this.getCells()[t.row][t.col];var r;for(r=0;r<i.length;++r){if(a.spaceStart>=i[r].spaceStart&&a.spaceEnd<=i[r].spaceEnd){return i[r]}}};o.getFirstStartPoint=function(){var e=this.getCells();return e[e.length-1][0]};o.isSingleLayer=function(){return this.getCells().length==1?true:false};o.updateCells=function(e){this._categoryLabels=[];this._cells=this.layers2cells(e)};o.findCell=function(e,t){if(!e){return null}var a=this.getCells();for(var r,o=0,n=a.length;o<n;o++){for(var l=0,s=a[o].length;l<s;l++){r=this._cells[o][l];if(i.deepEqual(r.ctx,e)){return r}}}return null};return r});define("sap/viz/chart/components/axis/CategoryAxis",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/AxisContainer","sap/viz/chart/scales/CategoryScale","sap/viz/chart/components/axis/sub/CategoryAxisBody","sap/viz/chart/components/axis/renderer/DefaultCategoryLabelRenderer","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/CategoryAxisNavigator","sap/viz/chart/components/util/ChartConstants"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d){var f="measureNames";var v=function(e,t){v.superclass.constructor.apply(this,arguments);this._hasNegativeValue=null;this._isAxisBodyOptional=false;this._isInTrellis=false;this._needOtherSize=true;this._otherSize=null;this._setAxisBody(e,t)};t.extend(v,i);v.prototype.addARIATag=function(e){e.attr("role","listbox")};v.prototype._setAxisBody=function(e,t){this.setChild("axisBody",new r(e,t),{order:1,priority:2,offset:0})};v.prototype.setInTrellis=function(e){this._isInTrellis=e;this.getChild("axisBody").module.setInTrellis(e)};v.prototype.setData=function(e,t,i){v.superclass.setData.call(this,e);this._hasNegativeValue=t;if(e.scale){this._scale=e.scale}};v.prototype.isAxisBodyOptional=function(e){this._isAxisBodyOptional=e};v.prototype._getTitle=function(){var e=v.superclass._getTitle.call(this);if(this._isAxisBodyOptional){e.noNeedApplyHiddenTitleColor=true}return e};v.prototype.getMaxZoomRatio=function(){var e=Number.MAX_VALUE;if(this._scale&&this._scale.getRangeInterval().length){var t=this._scale.getRangeInterval();var i=Math.abs(t[0][0]-t[0][1]);e=1/i}return e};v.prototype.setVisibleWindow=function(e,t){var i=this.getChild("axisBody");if(i&&i.module){i.module.setVisibleWindow(e,t)}};v.prototype._updateData=function(e){v.superclass._updateData.apply(this,arguments);if(!this._scale){return}var t=this.getChild("axisBody").module;var i=t.getSize();var a=t.getSize();if(this._isVertical()){i.height=this._size.height;a.height=e.height}else{i.width=this._size.width;a.width=e.width}if(!this._isAxisBodyOptional){t.setSize(i).setRealSize(a).setData(this._scale).setBindingFields(this._bindingFields).setHasNegativeValue(this._hasNegativeValue)}if(this._needOtherSize){t._setOtherSize(this._otherSize)}};v.prototype._constructTitle=function(e,t){if(e.length>0){var i=e.filter(function(e){return!e.invisible}).map(function(e){var t=e.name||e.id;if(t===f){t=l.get("IDS_DEFAULTMND")}return t});t.splice(0,t.length);var a="";var r="";for(var o=0;o<i.length;o++){if(o===0){r=i[o]}else{r=" / "+i[o]}a+=r;var n={};n.isHidden=false;n.text=r;t.push(n)}return a}};v.prototype.getLabelOffset=function(){var e=this._children.axisBody.module._getAvailableLayers();var t=e[e.length-1];var i;if(t){i=t.cells}else{return 0}var a;i.some(function(e){if(e.isVisible===true){a=e.middle;return true}});var r=this._properties.get();var o=r.label.style;var n=this._getTextHeight(o);var l=this._getBaseLineOffset(o);return a-n/2+l};v.prototype._getTextHeight=function(e){var t=u.canvasMeasure("",e["fontSize"],e["fontWeight"],e["fontFamily"],e["letterSpacing"]).height;t=s.preciseSimple(t);return t};v.prototype._getBaseLineOffset=function(e){var t=u.getTextBaselineOffset({fontSize:e["fontSize"],fontWeight:e["fontWeight"],fontFamily:e["fontFamily"],letterSpacing:e["letterSpacing"]});return t};v.prototype.isByBound=function(){return true};v.prototype.destroy=function(){v.superclass.destroy.call(this);this._scale=null;this._hasNegativeValue=null};v.prototype.paginationOptions=function(){var e=this._runtime&&this._runtime._interaction&&this._runtime._interaction._service&&this._runtime._interaction._service.getDataModel();var t;if(e&&e.getPaginationOptions){t=e.getPaginationOptions()}return t};v.prototype._renderSub=function(){for(var t in this._children){if(this._children.hasOwnProperty(t)){var i=this.getChild(t).module;if(!this.paginationOptions()||t!==e.AXIS.SCROLLBAR_NAME){i.render(this._selections[t])}if(c.isFunction(i._needExtened)&&i._needExtened()&&i._deltaBound){var a=this._parent.select(".v-bound");if(a){for(var r in i._deltaBound){if(i._deltaBound.hasOwnProperty(r)){var o=(a.attr(r)?parseFloat(a.attr(r)):0)+(i._deltaBound[r]?parseFloat(i._deltaBound[r]):0);a.attr(r,o)}}}}}}};v.prototype.setSize=function(e,t){v.superclass.setSize.apply(this,arguments);if(this._needOtherSize){this._otherSize=t}return this};v.prototype.supportFixedLayout=true;h.register(d.CATEGORYAXIS_NAVIGATOR,null,p);return v});define("sap/viz/chart/components/plots/XYPlotFactory",[],function(){var e={};return{getPlotClazz:function(t){var i=e[t];return i&&i.plotClazz},registerClazz:function(t,i){e[t]={plotClazz:i}}}});define("sap/viz/chart/components/zoom/ZoomLimit",[],function(){var e=/(bar|column|combination|bullet|waterfall)/;var t=e.test.bind(e);function i(e,t){var i=e.plot,a=i.isHorizontal(),r=i._properties,o=a?"height":"width",n,l;var s=i.getSize()[o];l=e.main._isTruncatedWindowInput?i.getRealSize()[o]:0;n=Math.max(i.getRealSizeByFixedDPSize(r.get("dataPointSize.max")),l)/s;return[1,Math.max(n,1)]}function a(e,t){var i=t.split("").reduce(function(t,i){return t.concat(e.axisByDirection[i])},[]),a=i.map(function(e){return e?e.getMaxZoomRatio():Number.MAX_VALUE});return[1,Math.max(Math.min.apply(null,a),1)]}return{Bar:i,Regular:a,byChart:function(e,r){var o=t(e.main._renderType)?i:a;return o(e,r)}}});define("sap/viz/chart/components/zoom/XYZoomer",["sap/viz/chart/components/zoom/ZoomLimit","sap/viz/framework/interaction/utils/PlotZoomUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r){var o=["plotArea.isFixedDataPointSize","interaction.zoom.direction","interaction.zoom.enablement","plotArea.gap","plotArea.markerRenderer","plotArea.dataLabel.renderer","plotArea.lineRenderer","plotArea.line.lineRenderer","plotArea.window.start","plotArea.window.end","plotArea.dataPointSize","general.groupData","interaction.syncValueAxis","interaction.noninteractiveMode","timeAxis.interval","plotArea.scrollbar.visible","plotArea.series"];function n(e){var t=e.runtime();this._runtime=t;this._props=t.propertyManager().proxy("interaction.zoom");this._status=t.statusManager();this._limit={x:{},y:{}};this._status.add({"plot.zoom.direction":{readonly:true,serializable:false,get:this.direction.bind(this)},"plot.zoom.enabled":{readonly:true,serializable:false,get:this.enabled.bind(this)},"plot.zoom.limit":{readonly:true,serializable:false,get:this.limits.bind(this)},"plot.zoom.currentZoomLevel":{readonly:true,serializable:false,get:this.calcCurrentZoomLevel.bind(this)}});var i=this;function r(e,a){if(e!==a){i._status.set("zooming",false);t.fireInteractionEvent("discardSavedZoom")}}this._watchers=o.map(function(e){return t.propertyManager().watch(e,r)});function n(r,o){var n=["timeseries_column","timeseries_line","timeseries_combination","timeseries_bullet"];if(!a.equals(r,o)&&n.indexOf(e._renderType)>-1){i._status.set("zooming",false);t.fireInteractionEvent("discardSavedZoom")}}this._watchers.push(t.propertyManager().watch("timeAxis.levels",n))}n.prototype.calcCurrentZoomLevel=function(){return t._calcCurrentZoomLevel(this._status)};n.prototype.enabled=function(){switch(this._props.get("enablement")){case"enabled":return true;case"auto":return i.isMobile();default:return false}};n.prototype.direction=function(){if(!this.enabled()){return""}switch(this._props.get("direction")){case"all":return"xy";case"categoryAxis":return this._modules.isHorizontal?"y":"x";default:return""}};n.prototype.limits=function(){return this._limit};n.prototype.init=function(e){this._modules=e};n.prototype.destroy=function(){this._status.remove("plot.zoom.enabled");this._status.remove("plot.zoom.direction");this._status.remove("plot.zoom.limit");this._status.remove("plot.zoom.currentZoomLevel");this._watchers.forEach(function(e){e.remove()});this._watchers=[];this._plotNode=null};n.prototype.reset=function(e){this._plotNode=e.plot.node().querySelector("."+t.ZOOM_CONTAINER_CLASS);if(this.enabled()){this._limit=this._calcZoomLimit(this._modules,this.direction())}};n.prototype.zoom=function(e,i,a,r,o){if(!o){t.applyZoom(e,i,this._plotNode,this._status,this._runtime,a,r)}else{t.applyZoom(e,i,this._plotNode,this._status,null,a,r)}};n.prototype.zoomInOut=function(e,i,a,o){var n=this._status.get("plot.transform.scale"),l=this.limits();if(!a){a=r.ZOOM.DEFAULT_ZOOM_LEVEL_STEPS}if(!o){o=r.ZOOM.DEFAULT_ZOOM_LEVEL_MINOFFSET}var s=t.zoomInOut(e,n,l,a,o);this.zoom(s,i,a,o)};n.prototype._calcZoomLimit=function(t,i){var a={x:{},y:{}},r=e.byChart(t,i);a.x.min=r[0];a.x.max=r[1];a.y.min=r[0];a.y.max=r[1];return a};return n});define("sap/viz/chart/components/datalabels/DataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ColorUtils","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/format/FormatManager","sap/viz/framework/common/format/UnitFormat","sap/viz/chart/components/UIComponent","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/ColorUtil","sap/viz/framework/common/util/RuleUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/GeometryUtils","sap/viz/framework/common/lang/LangManager"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g){function m(e){var t=a.create("text");t.textContent=e.text;o.setCustomizationInfo(t,{defaultRenderer:true});return t}m.expose={renderer:m};var y=n.CSS.CLASS;var _=n.CSS.CLASS.DATALABEL+" "+n.CSS.CLASS.MORPHABLELABEL,A=n.CSS.CLASS.DATALABEL_GROUP,b="g";function x(e,t,i,a){var r=i.analyzeDataPointDataLabel(e,a),o=d.extend(true,{},t);if(r&&r.hasOwnProperty("dataLabel")){if(r.dataLabel instanceof Object&&r.dataLabel.hasOwnProperty("visible")){o.visible=r.dataLabel.visible}else{o.visible=!!r.dataLabel}}return o}var S=function(e,t){S.superclass.constructor.apply(this,arguments);this._options=t;this._labelPosition="up";this._horizontal=t.horizontal;this._ignoreEmptyDataLabel=false;this._isTrellis=false;this._trellisCellSize=null;this._trellisPadding=null};e.extend(S,u);S.prototype.setDataShapesGroupNode=function(e){this._dataShapesGroupNode=e};S.prototype._getDataLabelInfo=function(e){var t=this._data&&this._data.rawData&&this._data.rawData.dataModel;var i=c.getContextByDataModel(e,t);return{key:i.measureNames,value:i[i.measureNames]}};S.prototype._processDataLabelRendererConfig=function(e,t){var i=e.dpBBox||v.getBBox(t);e.dataPointWidth=i.width;e.dataPointHeight=i.height};S.prototype._getMarkFromNode=function(e){return null};S.prototype._getDataLabelSizeFromMark=function(e){if(!e){return null}var t=v.getBBox(e);return{width:t.width,height:t.height}};S.prototype._computeDataLabelPosition=function(e,t,i,a,r,o){var n,l;var s=t.x+e.e;var u=t.y+e.f;if(i==="up"||i==="down"||i==="inside"){n=s+t.width/2-(a.x+a.width/2);if(i!=="inside"){l=u-(a.y+a.height);if(i==="down"){l+=t.height}}}if(i==="left"||i==="right"||i==="inside"){l=u+t.height/2-(a.y+a.height/2);if(i!=="inside"){n=s-(a.x+a.width);if(i==="right"){n+=t.width+a.width}}}return[n,l]};S.prototype.needForceInner=function(e){return true};S.prototype._forceInner=function(e,t,i,a){var r=n.DATALABEL.BOUND_OFFSET;var o=this.getBound();if(e&&e.length>1&&this.needForceInner(i,a)){if(e[0]+t.x+t.width>o.width+o.left){e[0]=o.width+o.left-r-t.width-t.x}if(e[0]+t.x<o.left){e[0]=o.left+r-t.x}if(e[1]+t.y+t.height>o.height+o.top){e[1]=o.height+o.top-r-t.height-t.y}if(e[1]+t.y<o.top){e[1]=o.top+r-t.y}}};S.prototype._computeDataLabelTranslate=function(e,t,i,a,r){var o=this._computeDataLabelPosition(t,this._fixBBoxWhenInvisible(e,r&&r.dpBBox),i,a,r,e);this._forceInner(o,a,i,r);return o};S.prototype._fixBBoxWhenInvisible=function(e,t){var i=t||v.getBBox(e);var a={height:i.height,width:i.width,y:i.y,x:i.x};var r=e.querySelector&&e.querySelector(".v-clippath");if(r){var o=v.getBBox(r);a={height:o.height,width:o.width,y:o.y,x:o.x};if(a.height===0&&a.width===0){a.height=r.getAttribute("height")!=null?+r.getAttribute("height"):0;a.width=r.getAttribute("width")!=null?+r.getAttribute("width"):0;a.x=r.getAttribute("x")!=null?+r.getAttribute("x"):0;a.y=r.getAttribute("y")!=null?+r.getAttribute("y"):0}}if(a.height!==0||a.width!==0){return a}var n=e.childNodes;for(var l=0,s=n.length;l<s;l++){var u=+n[l].getAttribute("height");var c=+n[l].getAttribute("width");if(u>a.height){a.height=u}if(c>a.width){a.width=c}}return a};S.prototype._getStyle=function(e){var t;if(e){t=o.getData(e)}var a=this._properties;var r=i.getColorFromEffectManager(a.get("style.color"),this._runtime.effectManager(),t?t.color:"#000000");var n=this.runtime().effectManager().register({fillColor:r});return{fill:n,"font-family":a.get("style.fontFamily"),"font-size":a.get("style.fontSize"),"font-weight":a.get("style.fontWeight"),"font-style":a.get("style.fontStyle"),cssString:"fill:"+n+";font-family:"+a.get("style.fontFamily")+";font-size:"+a.get("style.fontSize")+";font-weight:"+a.get("style.fontWeight")+";font-style:"+a.get("style.fontStyle")+";"}};S.prototype.respectShapeWidth=function(e){};S.prototype.truncateText=function(e){};S.prototype.sortDataLabelInfos=function(e){e.sort(function(e,t){var i=0;if(e.dataPoint&&t.dataPoint){i=c.getDataId(e.dataPoint)-c.getDataId(t.dataPoint)}return i})};S.prototype.hideLabelsWhenOutOfPlotArea=function(e,t){var i=e.length;for(var a=0;a<i;a++){var r=e[a];if(r.left<t.left||r.right>t.width||r.top<t.top||r.bottom>t.height){r.skip=true}}};S.prototype.getBound=function(){return{left:0,width:this._realSize.width,top:0,height:this._realSize.height}};S.prototype.hideConditional=function(e){var t=this.getBound();this.sortDataLabelInfos(e);this.hideLabelsWhenOutOfPlotArea(e,t);this.detectAndRemoveOverlappedDataLabel(e)};S.prototype.detectAndRemoveOverlappedDataLabel=function(e){var t=parseFloat(this._properties.get("style.fontSize"));var i=t*n.DATALABEL.HORIZONTAL_OVERLAPPING_PADDING;var a=e.length;var o;var l;for(o=a-1;o>=0;--o){var s=e[o];if(s.skip){continue}for(l=o-1;l>=0;--l){var u=e[l];if(!u.skip){u.skip=!(s.left>=u.right+i||s.top>=u.bottom||s.right<=u.left-i||s.bottom<=u.top)}}}for(o=e.length-1;o>=0;o--){if(e[o].skip){r.remove(e[o].node);e.splice(o,1)}}};S.prototype.isDataLabelWidthOutOfDataPoint=function(e,t){var i=true;var a=e.getBoundingClientRect();var r=t.getBoundingClientRect();if(a.left>=r.left&&a.right<=r.right){i=false}return i};S.prototype._isKeepMND=function(){return true};S.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=true,a=e.getBoundingClientRect(),r=t.dataPoint.getBoundingClientRect();if(a.left>=r.left&&a.top>=r.top&&a.right<=r.right&&a.bottom<=r.bottom){i=false}return i};S.prototype.intersectResult=function(e,t,i,a){return null};S.prototype.indexOfDataLabelIntersectDataPoints=function(e,t,i,a){var r=-1;var o;var n=this.intersectResult(e,t,i,a);if(!n||!n.intersected&&!n.hitPoint){for(o=0;o<t.length;o++){if(i[o]!==a){var l=t[o];if(!(e.left>l.right||e.right<l.left||e.top>l.bottom||e.bottom<l.top)){r=o;break}}}}return r};S.prototype._setDataLabelColor=function(e,t,i,a,r){if(!a||t==="outside"){var o=this.isDataLabelOutOfDataPoint(e.node,e);var n=null;if(a&&t==="outside"&&!o){n=r||"#000000"}else if(!a){n=(o?i:r)||"#000000"}if(n){a=h.getDataLabelColor(n);var l=this.runtime().effectManager().register({fillColor:a});e.node.setAttribute("fill",l)}}};S.prototype.updateColor=function(e,t){var i=this._properties.get("style.color");var a=this._properties.get("style.colorRange");for(var r=0;r<e.length;r++){var o=e[r];if(o.node){this._setDataLabelColor(o,a,t,i,o.referColor)}}};S.prototype.drawZero=function(){return true};S.prototype.setTrellisCell=function(e,t){this._isTrellis=true;this._trellisPadding=e;this._trellisCellSize=t};S.prototype.updatePosition=function(e,t){var i=e.node();var n=i.querySelector("."+A);var l={};var s={};if(n){var u=i.querySelector("g."+y.DATAPOINT_GROUP);var h=[];var p=n.querySelectorAll(".v-datalabel");for(var d=0,f=p.length;d<f;d++){var g=p[d];var m=o.getData(g).id;var _=c.find(u,m);if(!_){r.remove(g);continue}var b=c.getDataPointId(_);var x=this._getStyle(_);h.push(m);var S=c.getContext(_),D=this._getDataLabelInfo(_),w=d3.select(g).text();var C={dataLabelInfo:D,val:D.value,text:w,ctx:S,styles:x,horizontal:this._horizontal,plotSize:this.getSize()};if(this.getDataLabelDefaultPosition){this.getDataLabelDefaultPosition(_)}this._processDataLabelRendererConfig(C,_);l[b]=C;var T=v.getBBox(g);var z=this._computeDataLabelTranslate(_,a.getTransformToElement(_,i),this._labelPosition,T,C);if(z){s[b]={trans:z,bbox:T};var L=z[0],P=z[1];g.setAttribute("transform","translate("+L+","+P+")")}else{r.remove(g);continue}}if(t){var k=t.filter(function(e){return h.indexOf(c.getDataId(e))===-1});if(k.length){var E=this._beforeRender(k);this._render(e,E)}}}this._afterRender(e,l,s)};S.prototype._removeExtraNodes=function(e){var t=e.node();var i=t.querySelector("."+A);if(i){var a=t.querySelector("g."+y.DATAPOINT_GROUP);var r=c.findAll(a);var o=i.querySelectorAll("."+n.CSS.CLASS.DATALABEL);var l={};var s,u;for(s=0;s<o.length;++s){l[c.getDataPointId(o[s])]=o[s]}for(s=0;s<r.length;++s){var h=c.getDataPointId(r[s]);if(l[h]){delete l[h]}}for(var p in l){if(l[p]){i.removeChild(l[p])}}}};S.prototype.render=function(e,t){this._removeExtraNodes(e);t=t||c.findAll(this._dataShapesGroupNode)||[];var i=this._beforeRender(t);this._render(e,i);this._afterRender(e)};S.prototype._beforeRender=function(e){var t=this._properties.get();var i=this.runtime().semanticManager();var a;if(i.hasDataPointDataLabelStyle()){var r=this._data.rawData.dataModel;a=Array.prototype.slice.call(e).filter(function(e){var a=c.getDataPointId(e);var o=r.getDataPoint(a);return x(o.context(),t,i,o.additionCtx()).visible})}else{if(t.visible){a=e}}return a};S.prototype._afterRender=function(e,t,i){var r=this._isVisible();if(!r&&!this.runtime().semanticManager().hasDataPointDataLabelStyle()){return}var o=[];var l=e;var s=e.node().querySelectorAll("."+n.CSS.CLASS.DATAPOINT);for(var u=0;u<s.length;u++){var p=s[u];var d=this._getStyle(p);var f=c.getDataPointId(p);var g=e.selectAll("g.v-datalabel[data-datapoint-id='"+f+"']").node();if(g){var m=t&&t[f];var y;if(!m){var _=c.getContext(p),A=d3.select(g).text();y=this._getDataLabelInfo(p);m={val:y.value,text:A,ctx:_,styles:d,horizontal:this._horizontal,plotSize:this.getSize(),zeroLineAdjust:true};if(this.getDataLabelDefaultPosition){this.getDataLabelDefaultPosition(p)}this._processDataLabelRendererConfig(m,p)}else{y=m.dataLabelInfo}var b=i&&i[f]&&i[f].trans;var x=i&&i[f]&&i[f].bbox;if(!b){x=v.getBBox(g);b=this._computeDataLabelTranslate(p,a.getTransformToElement(p,l.node()),this._labelPosition,x,m)}if(b){o.push(z(l.node(),g,p,b,y,x))}}}if(o){this.truncateText(o);var S=this._properties.get("hideWhenOverlap");if(S){this.hideConditional(o,s)}var D=e.node();var w=h.getBackgroundColor(D);this.updateColor(o,w);this.renderDataLabelLine(o)}};S.prototype.renderDataLabelLine=function(e){};S.prototype._render=function(e,i){var r=e.node();var l=this._size;var s=this._properties;var u=s.get("visible");if(!u&&this.runtime().semanticManager().hasDataPointDataLabelStyle()){u=i.length>0}if(u){var h=this._isKeepMND();var p=r.querySelector("."+A);if(!p){p=a.create(b,r);p.setAttribute("class",A)}var d=null;var f=this.runtime().envManager();if(f){d=f.textAnchor()}p.setAttribute("text-anchor",d);var g=s.get("renderer")||m;var y=s.get("hideWhenOverlap");var x;var S=p.querySelectorAll("."+n.CSS.CLASS.DATALABEL);var D=this._runtime.statusManager().get("dynamicScale");var w=this.runtime().statusManager().get("data.unit")||{};for(var C=0,T=i.length;C<T;C++){var z=i[C];var L=this._getStyle(z);var P=this._getDataLabelInfo(z);var k=false;x=s.get("formatString");if(!x&&this._data&&this._data.rawData){x=this._formatStrFromMetadata(this._data,this._data.rawData.dataModel._bindingFeeds,P.key);k=true}var E=c.getContext(z);var I=w[P.key];P.unit=I;P.keepMND=h;P.dynamicScale=D;var O=this._buildDataLabelText(x,P,E,k,z);if(this._ignoreEmptyDataLabel===true&&(O===null||O===undefined)){continue}if(t.isExist(O)&&t.isExist(O.text)){P.formattedValue=O.formattedValue;O=O.text}var R=c.getDataPointId(z);var N=c.findByDataPointIds(S,R);if(N.length){N=N[0];var M=N.firstChild;while(M){N.removeChild(M);M=N.firstChild}}else{N=a.create("g",p);c.setDataPointId(N,R);o.setContext(N,E);o.setData(N,{id:c.getDataId(z)});N.setAttribute("class",_)}if(!E){E=this._data.rawData.dataModel.getDataPoint(R).context()}var B={val:P.value,text:O,ctx:E,info:P,styles:L,horizontal:this._horizontal,dpBBox:v.getBBox(z),plotSize:this.getSize(),zeroLineAdjust:true};this._processDataLabelRendererConfig(B,z);var V=g(B,m.expose)||m(B);if(V){N.appendChild(V);for(var F in B.styles){if(B.styles.hasOwnProperty(F)){N.setAttribute(F,B.styles[F])}}if(this.getDataLabelDefaultPosition){this.getDataLabelDefaultPosition(z)}var H=v.getBBox(N);var U=a.getTransformToElement(z,r);var W=this._computeDataLabelTranslate(z,U,this._labelPosition,H,B);this._renderAfterPositioning(z,N);if(!W){N.removeChild(V);continue}var G=W[0];var Y=W[1];N.setAttribute("transform","translate("+G+","+Y+")");if(this.setExtraDataOfDataPoint){z=this.setExtraDataOfDataPoint(o,z,N)}}}}else{if(this.removeExtraDataOfDataPoint&&i){for(var X=0,j=i.length;X<j;X++){var Z=i[X];this.removeExtraDataOfDataPoint(o,Z)}}}};S.prototype._formatStrFromMetadata=function(e,t,i){var a=null;if(t){t.some(function(t){if(e[t]&&e[t].metaData){for(var r=0;r<e[t].metaData.length;r++){if(e[t].metaData[r].id===i){a=e[t].metaData[r].formatString;return true}}}})}return a};S.prototype._renderAfterPositioning=function(){};S.buildDataLabelText=function(e,t,i,a,r,o,n,l){var s=i.value!==null&&t!==null?D(t,i):[];var u=o?o(e):["value"];s=r?C(s,u):s;var c=w(u,s,a,i,e,l);var h=n?n(e,c,i):c[0];return h};S.prototype._buildDataLabelText=function(e,t,i,a,r){if(t.value===0&&!this.drawZero(r)){return null}return S.buildDataLabelText(this._properties,e,t,i,a)};S.prototype._isVisible=function(){return this._properties.get("visible")||this._properties.get("showTotal")||this._properties.get("showRecap")};function D(e,i){var a=[];if(t.isArray(e)&&t.isArray(e[0])){a=e[0]}else if(t.isPlainObject(e)){a=e[i.key];if(!t.isArray(a)){a=[a]}}else if(!t.isArray(e)){a=[e]}else{a=e}return a}function w(e,t,i,a,r,o){var n,u,c,h,p,d=[];var v=0;for(n=0;n<e.length;n++){p=e[n];if(T(p)){c=a.value;h=a.percentage;u=t[n-v];var m;var y=a.dynamicScale;if(c!==null){if(p==="date"){if(f.hasFiscalLevel(r&&r.origin)){a.formattedValue=c}else{a.formattedValue=l.format(new Date(c),"dd/mm/yyyy hh:mm")}}else{var _={decimalFormatString:s.getDecimalFormatString(s.SUPPORT_CUSTOM_COMPONENTS.DATALABEL)};m=y&&y.getScaleFactor(a.key);var A=r.get("unitFormatType");a.formattedValue=(m||s).format(c,u,A,_);if(m&&y.showSymbolOnDatalabel){a.formattedValue+=m.symbol}}}else{a.formattedValue=g.get("IDS_ISNOVALUE")}if(h!==null){a.formattedPercentage=s.format(h,u||l.getPercentagePattern(1),r.get("unitFormatType"),s.SUPPORT_CUSTOM_COMPONENTS.DATALABEL)}if(a.unit&&(!m||y.showUnitOnDataLabel)){a.formattedValue+=" "+a.unit}if(p==="percentage"){c=a.formattedPercentage}else{c=a.formattedValue}d.push(c)}else{if(o){d.push(o(i,a));v++}}}return d}function C(e,t){var i;if(t.indexOf("percentage")>-1&&t.indexOf("value")===-1){i=[e[1]]}else{i=e}return i}function T(e){if(e==="valueAxis"||e==="valueAxis2"||e==="bubbleWidth"||e==="value"||e==="percentage"||e==="date"){return true}else{return false}}S.getFirstFormatPattern=function(e,t){return D(e,t)[0]};S.prototype.destroy=function(){S.superclass.destroy.call(this);this._labelPosition=null;this._dataShapesGroupNode=null;this._isTrellis=null;this._trellisCellSize=null;this._trellisPadding=null};function z(e,t,i,r,o,n){var l=r[0],s=r[1];var u=a.getTransformToElement(i,e);var c=L(e,i);return{node:t,referColor:c,dataPoint:i,center:{x:u.e,y:u.f},info:o,left:l+n.x,right:l+n.x+n.width,top:s+n.y,bottom:s+n.y+n.height,originalCenterX:r.originalCenterX,originalCenterY:r.originalCenterY}}function L(e,t){var i,a=h.getBackgroundColor(e),r=o.getData(t);if(r){if(r.pattern==="noFill"){i=a}else{var n=1,l=r.color;if(r.fillOpacity!==undefined){n=r.fillOpacity}i=h.getMixedColor(l,a,n)}}return i}return S});define("sap/viz/chart/components/datalabels/BarDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r,o,n,l,s,u){var c=function(e,t){c.superclass.constructor.apply(this,arguments);this._labelPosition="outside"};e.extend(c,r);var h=" / ";var p=" ";var d="...";c.labelOffset=u.DATALABEL.HORIZONTAL_LABEL_OFFSET;c.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=true;var a=e.getBoundingClientRect();var r=t.dataPoint.getBoundingClientRect();if(a.left>=r.left&&a.top>=r.top-r.height&&a.right<=r.right&&a.bottom<=r.bottom+r.height){i=false}return i};c.prototype._buildDataLabelText=function(e,t,i,a){return r.buildDataLabelText(this._properties,e,t,i,a,f,g,v)};function f(e){var t=e.get("type");var i;if(t==="valueAndColor"){i=["value","color"]}else if(t==="color"){i=["color"]}else{i=["value"]}return i}function v(e,t){var i="";if(t.colorLegendData){i=t.colorLegendData.join(h)}return i}function g(e,t){var i=e.get("type");var a;if(i==="valueAndColor"){t=t.filter(function(e){return!(e===undefined||e===null)});a=t.slice().reverse().join(p)}else{a=t[0]}var r={formattedValue:t[0],text:a};return r}function m(e,t,i){for(var a=0;a<e.length;++a){var r=e[a];for(var o=0;r&&o<r.length;++o){if(r[o]&&r[o][i]===t){return r[o]}}}return null}c.getLabelSize=function(e,t,i,a,n){var l={width:0,height:0};var s=m(e,t,n||"valueAxis");if(!s){return l}var u=s.dp.context();var h={key:u.measureNames,value:u[u.measureNames],colorLegendData:s.color};var p=i.proxy("plotArea.dataLabel");var d=r.buildDataLabelText(p,a,h,null,false,f,g,v);var y=p.get("style");l=o.fastMeasure(d.text,y.fontSize,y.fontWeight,y.fontFamily,y.fontStyle);l.width+=c.labelOffset;return l};c.prototype.truncateText=function(e){var t;for(t=e.length-1;t>=0;t--){var i=e[t].dataPoint;var r=e[t].node;var l=a.getData(i).dataLabelLocation;if(l==="inside"){var u=r.getBoundingClientRect();var f=i.getBoundingClientRect();if(u.width+2*c.labelOffset>f.width){var v=this._properties.get();var g=false;var m=r.firstChild;var y=m.textContent;var _="";if(e[t].info.colorLegendData){var A;if(v.type==="valueAndColor"){_=e[t].info.colorLegendData.join(h);A=y.substring(0,1)+d+p+y.substring(_.length+1)}else if(v.type==="color"){A=y.substring(0,1)+d}var b=o.canvasMeasure(A,v.style.fontSize,v.style.fontWeight,v.style.fontFamily).width;if(b+2*c.labelOffset<f.width){g=true}}if(g){var x=this._getStyle(i);var S={};var D=this.runtime().envManager();S.reverseDots=D&&D.reverseDots();if(v.type==="valueAndColor"){var w=y.substring(_.length+1);var C=o.canvasMeasure(p+w,v.style.fontSize,v.style.fontWeight,v.style.fontFamily).width;var T=o.ellipsis(y,m,f.width-2*c.labelOffset-C,x.cssString,S);m.firstChild.textContent=T+p+w}else if(v.type==="color"){o.ellipsis(y,m,f.width-2*c.labelOffset,x.cssString,S)}var z=n.getBBox(r);var L=s.getTransformToElement(i,i.parentNode);var P={val:e[t].info.value};var k=this._computeDataLabelTranslate(i,L,l,z,P);r.setAttribute("transform","translate("+k[0]+","+k[1]+")");e[t].left=k[0];e[t].right=e[t].left+z.width}}}}};c.prototype.allowIntersectionCheck=function(){return false};c.prototype.hideConditional=function(e,i){var r;var o=new Array(i.length);for(r=0;r<i.length;r++){o[r]=i[r].getBoundingClientRect()}for(r=e.length-1;r>=0;r--){var n=e[r].dataPoint;var l=e[r].node;var s=a.getData(n).dataLabelLocation;var u=l.getBoundingClientRect();if(s==="inside"){var h=n.getBoundingClientRect();if(u.width+2*c.labelOffset>h.width||u.height>h.height){t.remove(l);e.splice(r,1)}}else if(!this.allowIntersectionCheck(n)){var p=this.indexOfDataLabelIntersectDataPoints(u,o,i,n);if(p!==-1){t.remove(l);e.splice(r,1)}}}return c.superclass.hideConditional.apply(this,arguments)};c.prototype._computeDataLabelPosition=function(e,t,i,r,o,n){var l,s;var u=t.x+e.e;var h=t.y+e.f;var p=a.getData(n);var d=c.labelOffset;var f=this._properties.get("position");var v=f?f:this._labelPosition;s=h+t.height/2-(r.y+r.height/2);if(o.val>=0){if(o.val===0||v!=="inside"){l=u+t.width+d;p.dataLabelLocation=o.val===0&&v==="inside"?"inside":"outside";if(l+r.width>this._size.width&&v==="outsideFirst"&&o.val>0){l=u+t.width-r.width-d;p.dataLabelLocation="inside";a.setData(n,p)}if(l>this._size.width&&o.val===0){l=u-r.width-d}}else{l=u+t.width-r.width-d}}else{if(v!=="inside"){l=u-(r.x+r.width)-d;p.dataLabelLocation="outside";if(l<0&&v==="outsideFirst"){if(r.width+2*d>t.width){l=l+t.width}else{l=u+d;p.dataLabelLocation="inside"}a.setData(n,p)}}else{l=u+d}}return[l,s]};c.prototype._getDataLabelInfo=function(e){var t;t=c.superclass._getDataLabelInfo.apply(this,arguments);var i=a.getData(e);t.colorLegendData=i.colorLegendData;return t};c.prototype._processDataLabelRendererConfig=function(e,t){c.superclass._processDataLabelRendererConfig.apply(this,arguments);var i=this._getMarkFromNode(t),a;if(i&&e.dataPointWidth===0&&e.dataPointHeight===0){a=this._getDataLabelSizeFromMark(i);if(a){e.dataPointWidth=a.width;e.dataPointHeight=a.height}}e.horizontal=true};c.prototype._getMarkFromNode=function(e){if(!e){return null}var t=d3.select(e).select("rect:first-child");return t.empty()?null:t.node()};return c});define("sap/viz/chart/components/plotareas/UpdateByTrendlineUtil",["sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/trendline/Trendline","sap/viz/chart/scales/ValueScaleUtil"],function(e,t,i){var a={column:true,bar:true,line:true,timeseries_column:true,timeseries_line:true,horizontal_line:true,dual_column:true,dual_bar:true,dual_line:true,dual_horizontal_line:true};return function(r,o){if(a[this._renderType]){var n=t.updateValueScale(this._plot,{valueAxis:o,valueAxis2:o},r);var l=n&&Object.keys(n);if(l&&l.length>0){if(r.valueAxis&&r.valueAxis2){var s=n.valueAxis?n.valueAxis:r.valueAxis;var u=n.valueAxis2?n.valueAxis2:r.valueAxis2;i.syncTicks(s.scale,u.scale);var c=s.autoScale;var h=u.autoScale;i.syncTicks(c,h)}l.forEach(function(t){this["_"+t].setData(n[t]);r[t]=e.extend(true,{},r[t],n[t])},this)}this._updateTrendLineAxis(r)}return r}});define("sap/viz/chart/components/plotareas/XYPlotArea",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/components/callout/CalloutContainer","sap/viz/chart/components/container/XYContainer","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/axis/CategoryAxis","sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/zoom/XYZoomer","sap/viz/chart/components/plots/PlotGeometryKeeper","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/datalabels/BarDataLabels","sap/viz/chart/components/plotareas/UpdateByTrendlineUtil","sap/viz/chart/scales/CategoryScale","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/SVG"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D,w,C){function T(e){var t,i,a=e._plot;if(a.isHorizontal()){t=e._renderType.indexOf("bullet")>-1?"actualValues":e._valueAxisIndex}else{i=e._renderType.indexOf("bullet")>-1?"actualValues":e._valueAxisIndex}function r(){return g.offsetInValue({h:t?e._data[t].scale:null,v:i?e._data[i].scale:null},e.getOffset(),a.getRealSize())}function o(r){var o=e._data[t],n=e._data[i],l=a.getRealSize(),s={};if(!isNaN(r.x)&&o){s.x=-o.scale.scale(r.x)*l.width}if(!isNaN(r.y)&&n){s.y=-(1-n.scale.scale(r.y))*l.height}e.scroll(s)}return{get:r,set:o}}function z(e){function t(){var t=w.clone(e.getPlotPosition(),true);if(t){t.x+=e._offset&&e._offset.x||0;t.y+=e._offset&&e._offset.y||0}return t}return{get:t}}var L=function(e,t){L.superclass.constructor.apply(this,arguments);this._valueAxisIndex=t.valueAxisIndex||"valueAxis";this._init(undefined,t);e.statusManager().add("plot.offsetInValue",{serializable:false,get:T(this).get,set:T(this).set});e.statusManager().add("plot.sizeInfo",{serializable:false,get:z(this).get})};t.extend(L,o);L.prototype._isPercentageChart=function(){return this._renderType.indexOf("100_")>=0};L.prototype._isLineChart=function(){return this._renderType.indexOf("line")>=0};L.prototype._isCombinationChart=function(){return this._renderType.indexOf("combination")>=0};L.prototype._isMekkoChart=function(){return this._renderType.indexOf("mekko")>=0};L.prototype._isColumnChart=function(){return this._renderType==="column"||this._renderType==="combination"||this._renderType==="timeseries_column"};L.prototype._isBarChart=function(){return this._renderType==="bar"||this._renderType==="horizontal_combination"};L.prototype._isStackedChart=function(){return this._renderType==="stacked_column"||this._renderType==="stacked_bar"};L.prototype._isHorizontal=function(){if(this._plot&&this._plot._options){return this._plot._options.isHorizontal}};L.prototype._getPlotOptions=function(){return{valueAxisIndex:this._valueAxisIndex||"valueAxis"}};L.prototype._reRenderComplete=function(){if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};L.prototype._getDataRange=function(e,t){return this._plot._getDataRange&&this._plot._getDataRange(e,t)};L.prototype._initRenderBase=function(e){if(this._selections){return}L.superclass._initRenderBase.apply(this,arguments);if(this._isLineChart()||this._isCombinationChart()){var t=e.node();var i=this._selections[this._categoryAxis.getName()].node();var a=C.createSVGNode("g");a.setAttribute("class",_.CSS.CLASS.DATAPOINTS_MODULE);if(t.lastChild===i){t.appendChild(a)}else{t.insertBefore(a,i.nextSibling)}}};L.prototype._init=function(e){var t=this.runtime();this._plot=s.create(this._renderType,this._getPlotClazz(this._renderType),t,this._getPlotOptions(this._renderType));this.setChild("plot",this._plot,{position:"center"});var i=this._plot.isHorizontal();this._plot.getDispatch().on("reRenderComplete.plotarea",this._reRenderComplete.bind(this));var a=this._getCategoryAxisClass();var o;var l=!this._properties.get("interaction.noninteractiveMode");if(i){this.setLayoutSequence(["bottom","top","left","right"]);this._categoryAxis=new a(t,{name:"categoryAxis"});this._categoryAxis.setPosition("left");this.setChild("categoryAxis",this._categoryAxis,{position:"left"});o=this._valueAxisIndex==="valueAxis"?"bottom":"top";var u=l;if(e){o=e.valueAxisPosition;u=e.valueAxisScrollbar}this._valueAxis=new n(t,{name:this._valueAxisIndex,hasScrollbar:u,valueAxes:this._valueAxes});this.setChild(this._valueAxisIndex,this._valueAxis,{position:o});if(u){this._hScrollbar=this._valueAxis.getChild(_.AXIS.SCROLLBAR_NAME).module}}else{this.setLayoutSequence(["left","right","bottom","top"]);this._categoryAxis=new a(t,{name:"categoryAxis",hasScrollbar:l});this.setChild("categoryAxis",this._categoryAxis,{position:"bottom"});o=this._valueAxisIndex==="valueAxis"?"left":"right";this._valueAxis=new n(t,{name:this._valueAxisIndex,valueAxes:this._valueAxes});this.setChild(this._valueAxisIndex,this._valueAxis,{position:o});if(this._properties.get("plotArea.callout.left")){this._leftCallouts=new r(t,{name:"plotArea.callout",position:"left"});this.setChild("leftCallouts",this._leftCallouts,{position:"left",priority:1,unique:true})}if(this._properties.get("plotArea.callout.top")){this._topCallouts=new r(t,{name:"plotArea.callout",position:"top"});this.setChild("topCallouts",this._topCallouts,{position:"top"})}if(l){this._hScrollbar=this._categoryAxis.getChild(_.AXIS.SCROLLBAR_NAME).module}}if(l){this._vScrollbar=new h(t,{name:"plotArea.scrollbar"});this.setChild("scrollbar",this._vScrollbar,{position:"right"})}if(this._isPercentageChart()){this._valueAxis.setPercentageMode(true)}this.getZoomer().init({main:this,plot:this._plot,axisByDirection:{x:i?[this._valueAxis]:[this._categoryAxis],y:i?[this._categoryAxis]:[this._valueAxis]},isHorizontal:i})};L.prototype._getCategoryAxisClass=function(){return l};L.prototype.layout=function(e,t){if(e&&e._paginationScrollbar){this._paginationScrollbarRef=e._paginationScrollbar}else{this._paginationScrollbarRef=null}this._offset=t;return L.superclass.layout.apply(this,arguments)};L.prototype.destroy=function(){L.superclass.destroy.call(this);this._plot=null;this._hScrollbar=null;this._categoryAxis=null;this._valueAxis=null;this._vScrollbar=null;this._leftCallouts=null;this._topCallouts=null};L.prototype._adjustScale=function(e){var t=this._properties.get("plotArea.adjustScale");if(y.isExist(t)){if(!e.isFixed()&&t&&this._isLineChart()){e.setZeroAdjusted(false)}}};L.prototype._calcValueAxisScale=function(e,t,i){var a=this._data[e].scale;this._adjustScale(a);return c.calcScale(a,t,{isLineChart:this._isLineChart(),isMekkoChart:this._isMekkoChart(),domain:i})};L.prototype._calcPercentageValueAxisScale=function(e){return c.calcPercentageScale(e)};L.prototype.setData=function(e){L.superclass.setData.apply(this,arguments);var t=this.updateValueScale();if(t){this._setAxisData(t);this._setPlotData(t)}if(this._leftCallouts){this._leftCallouts.setData(e)}if(this._topCallouts){this._topCallouts.setData(e)}};L.prototype._postRender=function(){L.superclass._postRender.apply(this,arguments);var e=this._plot,t=e.getSize();var i=e.getRealSize();var a=this._plot._selection.node();var r=this._plot._getDpPlotNode();if(this._leftCallouts){this._leftCallouts.postRender(a,t,i,r)}if(this._topCallouts){this._topCallouts.postRender(a,t,i,r)}};L.prototype.zoom=function(){L.superclass.zoom.apply(this,arguments);var e=this._plot.getRealSize();var t=this._plot._getDpPlotNode();if(this._leftCallouts){this._leftCallouts.setPlotRealSize(e);this._leftCallouts.afterPlotZoom(t)}if(this._topCallouts){this._topCallouts.setPlotRealSize(e);this._topCallouts.afterPlotZoom(t)}};L.prototype._scroll=function(e){L.superclass._scroll.apply(this,arguments);var t=this._plot._getDpPlotNode();if(this._leftCallouts){this._leftCallouts.afterPlotScroll(e,t)}if(this._topCallouts){this._topCallouts.afterPlotScroll(e,t)}};L.prototype._setPlotData=function(e){this._plot.setData(e)};L.prototype._setAxisData=function(e){this._categoryAxis.setData(e.categoryAxis,d.hasNegativeValue(e))};L.prototype._isAdjustValueScaleForTopLabel=function(){var e=this._properties.get("plotArea.dataLabel.position")||this._properties.getDefault("plotArea.dataLabel.position");return this._isStackedChart()||(this._isColumnChart()||this._isBarChart())&&e==="outside"||this._isCombinationChart()};L.prototype._calcValueScaleWithTopLabel=function(e){var t=this._properties.get("plotArea.dataLabel");var i=t.style;var r=this._valueAxisIndex;var o=r==="valueAxis"?this._properties.get("plotArea.primaryScale.fixedRange"):this._properties.get("plotArea.secondaryScale.fixedRange");var n=this._data[r];var l=n.scale;var s=l.getDomain().slice();var u=this._plot.isHorizontal();var c=this._calcValueAxisScale(r,e);var h=this._data.series;var p=a.extendDomainForDataLabel;var d=4;var v=u?20:d;if(!(o||l.getDomainFixed()[1])&&(t.visible||t.showTotal)&&s){var g=[null,null];var y,_,S;var D=t.formatString;if(this._data&&this._data[r]&&this._data[r].metaData){_=this._data[r].metaData[0].id;S=this._data[r].metaData[0].formatString}D=D||S;var w={key:_};if(this._isStackedChart()&&t.showTotal){if(u){y=b.getFirstFormatPattern(D,w)}var C;var T={decimalFormatString:m.getDecimalFormatString(m.SUPPORT_CUSTOM_COMPONENTS.DATALABEL)};if(s[1]>0){C=m.format(A.preciseSimple(s[1]),y,t.unitFormatType,T);g[1]=f.fastMeasure(C,t.style.fontSize,t.style.fontWeight,t.style.fontFamily,t.style.fontStyle)}if(s[0]<0){C=m.format(A.preciseSimple(s[0]),y,t.unitFormatType,T);g[0]=f.fastMeasure(C,t.style.fontSize,t.style.fontWeight,t.style.fontFamily,t.style.fontStyle)}c=this._calcValueAxisScale(r,e,p(s,e,g,u))}else if(!this._isStackedChart()&&t.visible&&s&&(s[1]>0||s[0]<0)){if(this._isBarChart()){if(s[1]>0){g[1]=x.getLabelSize(this._data.series,s[1],this._properties,D)}if(s[0]<0){g[0]=x.getLabelSize(this._data.series,s[0],this._properties,D)}}else{var z=f.fastMeasure("M",t.style.fontSize,t.style.fontWeight,t.style.fontFamily,t.style.fontStyle);if(s[1]>0){g[1]=z}if(s[0]<0){g[0]=z}}g.forEach(function(e){if(e){e.height+=d;e.width+=v}});var L=p(s,e,g,u);c=this._calcValueAxisScale(r,e,L)}}c.scale.setRange([0,1]);c.metaData=n.metaData;return c};L.prototype.updateValueScale=function(){var e=this._data;var t=this._roughSize.width;var i=this._roughSize.height;if(!e||t<=0||i<=0){return e}var a=[0,1];if(this._plot.isHorizontal()){a[1]=t}else{a[1]=i}a[1]*=.8;var r;var o=e;if(this._isPercentageChart()){r=this._calcPercentageValueAxisScale(a);r.metaData=e.valueAxis.metaData;e.valueAxis.tickHint=r.tickHint;this._valueAxis.setData(r)}else if(this._isAdjustValueScaleForTopLabel()){r=this._calcValueScaleWithTopLabel(a);this._valueAxis.setData(r);var n={};n[this._valueAxisIndex]=r;o=this._cloneData(n)}else{r=this._calcValueAxisScale("valueAxis",a);e.valueAxis.scale=r.scale;e.valueAxis.tickHint=r.tickHint;var l=this._properties.origin.get("valueAxis.layout.direction");if(l==="topDown"){e.valueAxis.scale.setRange([1,0])}else{e.valueAxis.scale.setRange([0,1])}this._valueAxis.setData(e.valueAxis)}o=S.call(this,o,a);return o};L.prototype._updateTrendLineAxis=function(e){if(e&&e.categoryAxis&&e.categoryAxis.scale){var t=e.categoryAxis.scale.getDomain(),i=w.extend(true,[],t);if(i){this._plot._expandTrendlineXRange(i);e.categoryAxis.scale=new D(i,[0,1])}}};L.prototype._getPlotClazz=function(e){return u.getPlotClazz(e)};L.prototype._preRender=function(){var e={x:0,y:0};var t=this._plot.getPreferredSize();if(this._hasScrollbar()){e=this._plot.getOffset();this._categoryAxis.setRealSize(t)}L.superclass._preRender.apply(this,arguments);if(e.x||e.y){this.scroll(e)}};L.prototype._configLayout=function(){var e=this.getZoomer();var t=false,i=false;if(e){var a=e.direction();if(a==="xy"){t=true;i=true}else if(a==="x"){i=true}else if(a==="y"){t=true}}if(this._hasScrollbar()){if(this._plot.isHorizontal()){t=true}else{i=true}this.runtime().statusManager().add("plotRealSize",{value:this._plot.getPreferredSize()})}if(this._vScrollbar){this._vScrollbar.isExist(t)}if(this._hScrollbar){this._hScrollbar.isExist(i)}return L.superclass._configLayout.apply(this,arguments)};L.prototype._cloneData=function(e){var t={};var i=this._data;for(var a in i){if(i.hasOwnProperty(a)){t[a]=i[a]}}for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t};L.prototype._getZoomer=function(){return new v(this)};L.prototype.allOrNone=function(e,t,i){if(!this._properties.get("valueAxis.visible")||!this._properties.get("valueAxis2.visible")){return}var a=this._plot.isHorizontal()?"height":"width";var r=e.valueAxis[a],o=e.valueAxis2[a];if(i&&r>0&&o>0){var n=i.preferredSizeTable;var l=n["valueAxis"]&&n["valueAxis"].extra&&n["valueAxis"].extra.visibleComponents.indexOf("axisBody")>-1;var s=n["valueAxis2"]&&n["valueAxis2"].extra&&n["valueAxis2"].extra.visibleComponents.indexOf("axisBody")>-1;if(!l||!s){var u=l?n["valueAxis"].extra.componentsPrfSize["axisBody"]:0;var c=s?n["valueAxis2"].extra.componentsPrfSize["axisBody"]:0;e.valueAxis[a]-=u;e.valueAxis2[a]-=c;t[a]+=u+c;r=e.valueAxis[a];o=e.valueAxis2[a]}}if(r===0||o===0){e.valueAxis[a]=e.valueAxis2[a]=0;t[a]+=r+o}};return L});define("sap/viz/chart/components/legend/LineLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/legend/ColorLegend","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ColorScale","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/scale/ColorShapeScaleMerger","sap/viz/chart/components/util/ColorUtil"],function(e,t,i,a,r,o,n,l,s,u){var c="#aaaaaa";var h="#000000";var p=l.LEGEND.HORIZONTAL_OFFSET;var d=l.LINE_TYPE;var f=function(){f.superclass.constructor.apply(this,arguments)};e.extend(f,t);f.prototype._createShapeItems=function(e,t,a){var r=this.runtime().semanticManager();var n=this.runtime().effectManager();var s=this.runtime().propertyManager();var u=this._isCombination();if(this._isShowWideMarker()){var c=t.markerSize;var h=s.has("plotArea.marker.size")?s.get("plotArea.marker.size"):s.get("plotArea.line.marker.size");if(c<h){h=c}var v=this._getBGColor();var g=this;e.selectAll("line").remove();e.selectAll("path").remove();var m=e.selectAll("g").data(["shapeWithLine"]);m.enter().append("g");m.exit().remove();m.attr("transform","translate("+t.shapeX+","+t.shapeY+")");var y=this._isRTL();m.each(function(e,r,u){var f=i.clone(a[u].shapeOptions);if(f.lineColor||f.lineType){var m=d3.select(this).selectAll("line").data(["shapeWithLine"]);m.enter().append("line");m.exit().remove();m.attr("x1",-c).attr("y1","0").attr("x2",c).attr("y2","0").attr("stroke",f.lineColor).attr("stroke-width",f.lineWidth);if(f.lineType===d.DASHED||f.lineType===d.DOTTED){m.attr("stroke-dasharray",2*c/7+","+c/7)}else if(f.lineType===l.LINE_TYPE.DOT){var _=Math.round(2*c/f.lineWidth);_=_|1;if(_<3){_=3}var A=2*c/_;m.attr("x1",-c+A/2);m.attr("x2",c+A/2);m.attr("stroke-dasharray","0,"+A*2);m.attr("stroke-linecap","round");m.attr("stroke-width",A)}}f.bgColor=v;var b;if(g._isShowMarkerStroke()){b=s.get("plotArea.dataPoint.stroke.color")}if(f.dpPattern==="noFill"){f.borderWidth=1;f.borderColor=b}if(f.fillColor){var x=d3.select(this).selectAll("path").data(["shapeWithLine"]);x.enter().append("path");x.exit().remove();f.node=x.node();if((f.seriesShape==="line"||f.seriesShape==="combination")&&(f.lineColor||f.lineType)){f.rx=f.ry=h/2;if(f.dpPattern==="noFill"){f.rx+=1;f.ry+=1}else{f.borderWidth=2}if(g._isShowMarkerStroke()){f.borderColor=b}}if(typeof f.graphType!=="string"&&f.graphType.type==="line"){f.rx=c;f.ry=c}o.drawGraph(f,n);if(g._isShowMarkerStroke()){x.attr("stroke-width","1")}}if(y){this.setAttribute("transform","translate("+(a[u].eventLayerWidth-p-c)+","+t.shapeY+")")}});m.attr("class","v-legend-marker")}else{f.superclass._createShapeItems.apply(this,arguments)}};f.prototype._getGroupItemInfo=function(e){var t=f.superclass._getGroupItemInfo.apply(this,arguments);var i=this.runtime().semanticManager();var r=this.runtime().propertyManager();var o=this.runtime().effectManager();var l=this;var s=r.has("plotArea.line.width")?r.get("plotArea.line.width"):r.get("plotArea.width");t.map(function(t,r){var o=e[r];if(o.isSemantic){if(i.hasDataPointLineStyle()){if(o.lineColor){t.shapeOptions.lineColor=o.lineColor}if(o.lineType){t.shapeOptions.lineType=o.lineType;if(!o.lineColor){t.shapeOptions.lineColor=c}}t.shapeOptions.lineWidth=s}if(o.seriesShape){t.shapeOptions.seriesShape=o.seriesShape}}else if(l._isShowLine()){if(o.seriesShape==="line"||o.seriesShape==="combination"){var u=l._getSereisStyle(o.ctx,l._data,i,"line");if(!a.isEmptyObject(u)){t.shapeOptions.lineColor=u.line&&u.line.color||o.color;t.shapeOptions.lineWidth=u.line&&u.line.width||s;t.shapeOptions.lineType=u.line&&u.line.type||"line"}else{t.shapeOptions.lineColor=o.color&&(o.color!=="null"&&o.color!=="undefined")?o.color:h;t.shapeOptions.lineWidth=s}t.shapeOptions.lineColor=n.convertColor(t.shapeOptions.lineColor)}if(!t.shapeOptions.fillColor){t.shapeOptions.fillColor=h}if(o.seriesShape){t.shapeOptions.seriesShape=o.seriesShape}}return t});return t};f.prototype._isShowMarkerStroke=function(){return this.runtime().propertyManager().get("plotArea.dataPoint.stroke.visible")};f.prototype._isShowLine=function(){var e=this.runtime().propertyManager();return this._properties.get("marker.showLine")&&(e.has("plotArea.lineVisible")?e.get("plotArea.lineVisible"):e.get("plotArea.line.visible"))&&(e.has("plotArea.line.width")?e.get("plotArea.line.width"):e.get("plotArea.width"))>0};f.prototype._isCombination=function(){var e=this.runtime().markManager();return e.getMode()==="combination"};f.prototype._getMarkerWidth=function(){var e=f.superclass._getMarkerWidth.apply(this,arguments);if(this._isShowWideMarker()){e=e*2}return e};f.prototype._isShowWideMarker=function(){var e=this.runtime().semanticManager();return e.hasDataPointColorStyle()||e.hasDataPointLineStyle()||this._isShowLine()};f.prototype._calcMetaInfo=function(e){f.superclass._calcMetaInfo.apply(this,arguments);if(this._isShowWideMarker()){var t=e.markerSize;var i=2*t;var a=this._markerMargin;var r=parseInt(this._labelFont.fontSize,10);var o=(this.isHorizontal()?a.left+a.right:a.right)*r;var n=l.LEGEND.HORIZONTAL_OFFSET;e.shapeX=i/2+n;e.textX=e.textX+t;e.postRenderX=i/2+n;e.miscWidth=e.miscWidth+t;e.eachItemWidth=e.eachItemWidth+t;this._markerSize=t*2}};f.prototype._calcDomain=function(e,t){var i=this.runtime().semanticManager();var r=this.runtime().propertyManager().get("plotArea.line.marker.shape");var o=this._properties.get("marker.shape");var l=this._isCombination();return e.map(function(e,s){e.id=s;var u=this._toValueString(e.data,t);var c=e.color;if(a.isString(c)&&c&&c.indexOf("url")===-1){c=n.convertColor(c)}var h={id:s,val:e.data,text:u,ctx:e.context,shape:e.shape,cls:e.cls,pattern:e.pattern,isSemantic:e.isSemanticItem};if(e.isSemanticItem){if(i.hasDataPointLineStyle()){if(a.isString(e.lineColor)&&e.lineColor&&e.lineColor.indexOf("url")===-1){h.lineColor=n.convertColor(e.lineColor)}if(e.lineType){h.lineType=e.lineType}if(l){if(e.lineColor||e.lineType){h.shape=r}else{h.shape=o}}}if(i.hasDataPointColorStyle()){if(e.color){h.color=c}}}else{h.color=c}if(e.seriesShape){h.seriesShape=e.seriesShape}return h},this)};return f});define("sap/viz/chart/components/legend/CombinationLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/legend/LineLegend","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ColorScale","sap/viz/framework/scale/ColorShapeScaleMerger"],function(e,t,i,a,r,o){var n=function(){n.superclass.constructor.apply(this,arguments)};e.extend(n,t);function l(e){if(a.isArray(e)){return e.map(function(e){return l(e)}).join("-")}else{return""+e}}n.prototype._buildColorShapeScale=function(e){var t=this._properties.get("groupByShape"),i={};var a=n.superclass._buildColorShapeScale.apply(this,arguments);if(t&&!this._properties.get("order")){e.forEach(function(e){if(!e.rowArray){return}e.rowArray.forEach(function(e){i[l(e)]=e.mndIndex})});var r={};var o=[];if(this._data.valueAxis2){o=o.concat(this._data.valueAxis2.metaData)}if(this._data.valueAxis){o=o.concat(this._data.valueAxis.metaData)}o.forEach(function(e){r[e.id]=e.name||e.id});var c=a.items();var h=[],p=[];c.forEach(function(e){if(e.isSemanticItem){p.push(e)}else{h.push(e)}});var d=s(u(h,i,r));c.splice(0,c.length);c.push.apply(c,p);c.push.apply(c,d)}return a};function s(e){return Object.keys(e).reduce(function(t,i){var r=e[i];return t.concat(a.isArray(r)?r:s(r))},[])}function u(e,t,i){var a=c(e,function(e){return e.seriesShape});Object.keys(a).forEach(function(e){a[e]=c(a[e],function(e){var a=l(e.data);var r=e.context.measureNames;if(r){var o=e.data.slice();var n=o.indexOf(i[r]);if(n>-1){o[n]=r;a=l(o)}}return t[a]})});return a}function c(e,t){return e.reduce(function(e,i){var a=t(i);if(!e.hasOwnProperty(a)){e[a]=[]}e[a].push(i);return e},{})}return n});define("sap/viz/chart/chains/RawDataParserFactory",["sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/FunctionUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/oo"],function(e,t,i,a,r){var o=function(e){this._option=e||{}};o.prototype.parse=function(e){return e===undefined?null:e};var n=function(e){n.superclass.constructor.apply(this,arguments);this._skipDateChecking=e&&e.skipDateChecking;this._cache={}};r.extend(n,o);n.prototype.parse=function(r){var o;var n=null;if(this._option&&this._option.fiscalObj){r=parseInt(r)}if(typeof r!=="number"){if(r!=null&&typeof r==="object"){if(r.v!=null){o=new Date(r.v).getTime()}else if(r.v==null){return null}}else{o=new Date(r).getTime()}if(!isNaN(o)){n={parsedValue:o,v:r};if(r.d!=null){n.d=r.d}if(r.v!=null){n.v=r.v}}else if(!this._skipDateChecking){i.error(a.getLogMessage("IDS_ERROR_DATE_HAVE_INVALID_FORMAT"))}}else{n={v:r};if(this._option&&this._option.fiscalObj){n.parsedValue=t.fiscalToQuantity(r,this._option.fiscalObj)}else{n.parsedValue=r}}var l=this._option&&this._option.dataTimeLevel;if(n!=null&&l!=null){var s=n.parsedValue;if(this._cache[s]){n.parsedValue=this._cache[s]}else{o=e.truncate(n.parsedValue,l,this._option.showAsUTC,this._option.fiscalObj,this._option.weekConfig);this._cache[s]=o;n.parsedValue=o}}return n};var l={get:function(e,t,i){var a;e=e||"";e=e.toLowerCase();if(e==="date"&&i==="timeAxis"){a=new n(t)}else{a=new o(t)}return a}};return l});define("sap/viz/chart/chains/ChainUtils",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/Constants","sap/viz/chart/chains/RawDataParserFactory","sap/viz/framework/common/util/ArrayUtils"],function e(t,i,a,r,o,n,l){var s="Dimension";var u="Measure";var c="measureNames";var h="trellisColumn";var p="trellisRow";var d="trellis.columnCategory";var f="trellis.rowCategory";var v="frame.data";var g="_context_row_number";var m={};var y=i.getDimensionValue;m._BULLET_MEASURES=["actualValues","additionalValues","targetValues","forecastValues"];var _=function(e){var t={};e.forEach(function(e){t[e.role]=e.id});return t};var A=function(e,i,a,r,o,n,l){var s={};var u;var c;for(u in e){if(e.hasOwnProperty(u)){s[u]=e[u]}}var h=n?r:o;var p=n?o:r;for(u in i){if(i.hasOwnProperty(u)){if(!t.isArray(i[u].values[r])){c=[]}else{c=i[u].values[r][o]}s[u]={range:i[u].range,values:c,metaData:i[u].metaData};if(i[u].categorySum){if(!t.isArray(i[u].categorySum[h])){i[u].categorySum[h]=[]}if(t.isArray(c)){i[u].categorySum[h][p]=m.sumByCategory(c)}else{i[u].categorySum[h][p]=c}}}}function d(e,t){var i=[],a=[];var n=e&&e.metaData;var l=e&&e.values;for(u=0;n&&u<n.length;++u){var c=n[u];var h=l[u];if(h[r]){i.push(h[r][o]);a.push(c)}}s[t]={values:i,metaData:a}}d(a,"context");d(l,"additionInfo");return s};var b=function(e){var t=e.length;for(var i=0;i<t;i++){if(e[i].feed===p){return true}else if(e[i].feed===h){return false}}throw"Binding not match"};var x=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){var a=t[i];if(a){a.values=[a.values]}}}};var S=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){var a=t[i];a.values.forEach(function(e,t){a.values[t]=[a.values[t]]})}}};var D=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){var a=t[i];for(var r=0;r<a.values.length;++r){var o=a.values[r];for(var n=0;n<o.length;++n){o[n]=[o[n]]}}}}};var w=S;var C=function(e,t){var i={};t.forEach(function(t){if(t.type===u){var a=t.id;var r=e[a];if(r){i[a]=r}}});return i};var T=function(e,t){var i={};t.forEach(function(t){if(t.role!==p&&t.role!==h){var a=t.id;var r=e[a];if(r){i[a]=r}}});return i};var z=function(e,t,i,a,r,o,n,l,s,u){var c=T(r,n);var h=C(r,n);var p=r.context;var d=r.additionInfo;x(h,r);if(p){w({context:p},r)}if(d){w({additionInfo:d},r)}var f=[];var v=[];for(var g=0;g<s;g++){var m;m=A(c,h,p,0,g,true,d);var y=i.filter(function(e){return e!=="dataFrame"});m.seriesType=r.seriesType;e(t,y,a,m,undefined,u,n);f[g]=m.series;for(var _=0;_<m.seriesContext.length;_++){v.push(m.seriesContext[_])}}r.allSeries=f;r.series=f[0];r.seriesContext=v;["","2"].forEach(function(e){var t="valueAxis"+e;var i="allCategorySum"+e;if(r[t]&&r[t].categorySum&&r[t].categorySum[0]&&Array.isArray(r[t].categorySum[0])){r[i]=r[t].categorySum[0];r[t].categorySum=r[i][0]}})};var L=function(e,t,i,a,r,o,n,l,s,u,c){var h=b(o);var p=T(r,n);var d=2;var f=C(r,n);var v=r.context;var g=r.additionInfo;if(u===0){x(f,r);if(v){w({context:v},r)}if(g){w({additionInfo:g},r)}u=1;d=1;h=true}if(c===0){S(f,r);if(v){D({context:v},r)}if(g){D({additionInfo:g},r)}c=1;d=1}var m=[];for(var y=0;y<u;y++){for(var _=0;_<c;_++){var z;if(h){z=A(p,f,v,y,_,h,g)}else{z=A(p,f,v,_,y,h,g)}var L=i.slice(d);z.seriesType=r.seriesType;var P;if(!m[y]){m[y]=[]}P={trellisRow:l?l.rowArray[y]:undefined,trellisColumn:s?s.rowArray[_]:undefined};e(t,L,a,z,P,{},n);m[y][_]=z.series}}r.series=m};var P=function(e,t,i){var a=t.items;var r=a.length;var o=t.position;var n=e.length;var l=n/i;var s=[];var u;var c,h,p,d;s.length=n*r;if(o===i-1&&t.respectOrder){for(c=0;c<l;c++){u=c*r;for(h=0;h<r;h++){d=(u+h)*i;for(p=0;p<i-1;++p){s[d+p]=e[c*i+p]}s[d+p]=a[h]}}}else{s=e;var f;for(c=0;c<r-1;++c){f=f||JSON.parse(JSON.stringify(e));s=s.concat(f)}for(c=r;c--;){u=c*n;for(h=l;h--;){d=u+h*i+o;s[d]=a[c]}}}return s};var k=function(e){var t=e.length;var i=1;var a=[];for(var r=t-1;r>=0;r--){var o=e[r];var n=o.length;var l={};for(var s=0;s<n;s++){l[o[s]]=s}a[r]={multiplier:i,value:l};i=i*n}return a};var E=function(e){var t=[],i;var a={};for(var r=0,o=e.length;r<o;r++){i=y(e[r]);var n=","+i;if(!a[n]){t.push(i);a[n]=true}}return t};var I=function(e,i,a,r,o,n){var s,u;var h=[];for(s=0,u=a.length;s<u;++s){var p=a[s];if(p[c]){h.push(r)}else{var d=i.metadata(p)[0];var f=m.parseData(i,p,o);if(d.domain){h.push(E(d.domain))}else{h.push(E(f))}}}var v=k(h);if(!t.isArray(v)){return[]}if(n&&n.isTimeStacked){var g=v[0].value;var _=[];if(g){for(var A in g){if(g.hasOwnProperty(A)){_.push(A)}}if(_.length>0){l.stableSort(_,function(e,t){return parseInt(e)-parseInt(t)})}for(s=0;s<_.length;s++){g[_[s]]=s}}}var b=[];for(s=0,u=e.length;s<u;s++){var x=0;var S=e[s],D;for(var w=0,C=v.length;w<C;w++){D=y(S[w]);x+=v[w].multiplier*v[w].value[D]}if(x>-1){b.push({idx:x,val:S})}}b.sort(function(e,t){return e.idx-t.idx});var T=b.map(function(e){return e.val});return T};var O=function(e,t,i,a){var r,o;var n=F(t),s=false;for(r=0;r<i.length;r++){if(n[i[r]]){s=true}}if(!s){return e}var u={};if(a&&a.length>0){for(r=0;r<a.length;r++){u[a[r]]=r}}return l.stableSort(e,function(e,t){var a=0;for(r=0,o=i.length;r<o;++r){var l=i[r];if(l[c]){a=u[e[r]]-u[t[r]]}else{var s=n[l];if(s){var h=s.fnComparator||V;var p=s.bDescending;a=h(e[r],t[r]);a=p?-1*a:a}}if(a!==0){return a}}return a})};function R(e,t){return Math.floor(e/t)}function N(e,t,i){e.order=e.order||[];if(i===t.length){e.order.push(t);e.isLeaf=true;return}var a=y(t[i]);e.map=e.map||{};var r;if(a==null){if(e.noValueMap==null){e.noValueMap=e.order.length;e.order.push({})}r=e.noValueMap}else{if(e.map[a]==null){e.map[a]=e.order.length;e.order.push({})}r=e.map[a]}N(e.order[r],t,++i)}function M(e,t){for(var i=0;i<e.order.length;++i){if(e.isLeaf){Array.prototype.push.apply(t,e.order);return}M(e.order[i],t)}}function B(e){var t={};e.forEach(function(e){N(t,e,0)});var i=[];M(t,i);return i}function V(e,t){var a=e&&e[i.DIMENSION_VALUE]||e,r=t&&t[i.DIMENSION_VALUE]||t;if(a==r){return 0}if(r==null){return-1}if(a==null){return 1}if(typeof a=="string"&&typeof r=="string"){return a.localeCompare(r)}if(a<r){return-1}if(a>r){return 1}return 0}function F(e){var i,a,r={};var o=e._FlatTableD._dataset.metadata.fields;if(t.isExist(o)){o.forEach(function(e){if(e.id&&e.sorter){var i={};var a=e.sorter.bDescending;var o=e.sorter.fnComparator;if(a&&typeof a==="boolean"){i.bDescending=a}else{i.bDescending=false}if(o&&t.isFunction(o)){i.fnComparator=o}r[e.id]=i}})}return r}var H=function(e,t,i,a,r,o,n){if(!e||!e.length){return[]}var l=t.items;var s=l.length;var u=s>0;var c=t.position;var h=a.length;var p=e.length/h;var d=u?p/s:p;var f={};var v=[];var g,m;var _=t.respectOrder;var A=t.groupOption;var b=_&&c>-1&&c===h-1&&h!==1;for(g=0;g<p;++g){var x=g*h;var S="";for(m=0;m<h;++m){S+=","+String(y(e[x+m]))}var D=f[S];if(D==null){D=f[S]=v.length;var w=e.slice(x,x+h);v.push(w);w.reference=[];w.mndIndex=b?l[g%s]:u?l[R(g,d)]:null}var C=b?R(g,s):g%d;v[D].reference.push(C)}if(v[0]&&v[0].length>0){if(!_){v=I(v,i,a,t.globalMND,r,n)}else if(A.groupData&&A.respectOrderInGroup){v=B(v)}if(A.bindingName!=="color"&&A.bindingName!=="shape"||!A.legendOrder){v=O(v,i,a,l)}}if(o){var T=[];var z=v.length;for(g=0;g<z;++g){var L=v[g].reference;var P=L.length;for(m=0;m<P;++m){var k=L[m];T[k]=T[k]||[];T[k].push(g)}}var E=T.length;for(g=0;g<E;++g){var N=T[g];if(!N){continue}o[g]=o[g]||[];o[g].push(N)}o.levels=o.levels||0;o.levels++}return v};function U(e,i,a,r,o){var n=o.enableDuplicated;var l=o.isBullet;var s=[];var u=r&&r.levels;var c=e.length;var h;var p=function(e,t,i){var a=e[t];return a[i]?a[i]:a[0]};var d=function(e,i,a,r){for(var o=0;o<i;++o){if(e.length>=u){var l=s;for(var c=0;c<u-1;c++){var h=p(e,c,o);l=l[h]=l[h]||[]}var d=p(e,c,o);if(t.isExist(d)){var f=r===null&&a[o]!=null?a[o]:r;if(n){l[d]=l[d]||[];l[d].push(f)}else{if(l[d]==null){l[d]=f}}}}}};if(u){for(h=0;h<c;h++){var f=r[h];if(t.isExist(f)){var v=e[h];var g=v.length;var m=null;if(g!==a.length||o.buildContextId){if(l){m=v.slice()}else{m=v[g-1]}g=a.length?a.length:1}d(f,g,v,m)}}}else{for(h=0;h<c;h++){s[h]=e[h].slice()}}return s}m.buildMetaData=function(e,t,i){return t.map(function(t){if(i&&t[c]){return{id:c,type:s,values:i.map(function(t){var i=e.metadata(t)[0];return{id:i.id,name:i.name}})}}else{var a=false;if(t.id){a=!!t.showInTooltip;t=t.id}var r=e.metadata(t)[0];if(t===g){return{id:r.id,name:r.name}}else{var n={id:r.id,name:r.name,type:r.semanticType,dataType:r.dataType};if(a){n.showInTooltip=true}if(r.formatString){n.formatString=r.formatString}if(r.hasOwnProperty("max")){n.max=r.max}if(r.hasOwnProperty("min")){n.min=r.min}if(r[o.FIELD.INRESULT]){n.hidden=true}if(r[o.FIELD.UNIT]){n.unit=r[o.FIELD.UNIT]}return n}}})};m.getArrayLength=function(e){var t=[];for(var i=0;i<e.length;i++){t.push(e[i].rowArray.length)}return t};m.generateNum=function(e,t){var i=0;for(var a=0,r=t.length;a<r;a++){var o=1;for(var n=a+1,l=e.length;n<l;n++){o*=e[n]}i+=t[a]*o}return i};m.dpInitializer=function(e){return function(){return e?{trellisRow:e.trellisRow,trellisColumn:e.trellisColumn}:{}}};m.sumByCategory=function(e){var i=[],a,r,o,n,l;var s=0;for(r=0,n=e.length;r<n;r++){var u=0;a=e[r];if(t.isArray(a)){for(o=0,l=a.length;o<l;o++){if(t.isArray(a[o])||!t.isNumber(a[o])){continue}var c=+a[o];if(u===0){u=c}else if(u<0&&c>0){u=c}else if(u*c>0){u+=c}}}else{u=+a}i[r]=u}return i};m.generateSeriesGetter=function(e){return function(t,i,a,r,o,n,l){var s=_(n);var u=r[s[f]];var c=r[s[d]];var h=u?u.rowArray.length:0;var p=c?c.rowArray.length:0;if(h===0&&p===0){var g=r[s[v]];var m=g?g.rowArray.length:0;if(m===0){e(t,i,a,r,undefined,l,n)}else{z(e,t,i,a,r,o,n,g,m,l)}}else{L(e,t,i,a,r,o,n,u,c,h,p)}}};m.parseData=function(e,i,a){var r;if(t.isExist(a)){r=a[i]}if(!t.isExist(r)){r=e.dataInFields([i]);for(var o in r){if(r.hasOwnProperty(o)){r[o]=r[o].data[0];if(r[o]===undefined){r[o]=null}}}}return r};m.getMetadata=function(e){return e._FlatTableD._dataset.metadata};m.getData=function(e,i,a,l,s){var u,c,h,p;if(!a&&t.isExist(i)){var d=[];for(u=0;u<i.length;u++){for(c=0;c<i[u].source.length;c++){if(t.isString(i[u].source[c])){d.push(i[u].source[c])}}}a=e._FlatTableD.columnDataInFields(d).data;if(r.isFiscal(e)){var f=[];for(u in a){if(a.hasOwnProperty(u)){var v=e._FlatTableD.getMetadata(u)[0].timeUnitType;if(v&&v.indexOf(o.FISCAL.UNITTYPE_PREFIX)===0){for(c=a[u].length-1;c>=0;c--){var g=r.fiscalToQuantity(a[u][c],l.fiscalObj);if(g==null||isNaN(g)){f.push(c)}}break}}}for(u=0;u<f.length;u++){for(var m in a){if(a.hasOwnProperty(m)){a[m].splice(f[u],1)}}}}for(u in a){if(a.hasOwnProperty(u)){var y=e._FlatTableD.getMetadata(u)[0].dataType;var _=n.get(y,l,s);var A=a[u];h=A.length;for(c=0;c<h;c++){p=A[c];if(p!==null){A[c]=_.parse(p)}}}}}return a};m.handleDimension=function(e,t,i,a,r,o,n){if(!t){throw"flat table need fieldsName as it's bindingInfo"}var l=t.length;var u=[];var h=false;var p=-1;var d=[];var f,v;var g=!a.groupData||a.respectOrderInGroup;for(f=0;f<l;f++){var y=t[f];if(y[c]){h=true;p=f;d=i}else{var _=e.metadata(y)[0];if(_.semanticType!==s){throw"semantic type not match"}var A=m.parseData(e,y,r);var b=A.length;if(!u.length){u.length=l*A.length}for(v=0;v<b;v++){u[v*l+f]=A[v]}if(_.domain){g=false}}}var x={globalMND:i,items:d,position:p,respectOrder:g,groupOption:a};if(h){if(u.length>0){u=P(u,x,l)}else{var S=e._FlatTableD._data.length;for(f=0;f<S;f++){d.forEach(function(e,t){u[t*S+f]=e})}}}var D=H(u,x,e,t,r,o,n);return D};m.handleContinuousDimension=function(e,t,i,a){if(!t){throw"flat table need fieldsName as it's bindingInfo"}var r=t.length;for(var o=0;o<r;o++){var n=t[o];var l=e.metadata(n)[0];if(l.semanticType!==s){throw"semantic type not match"}var u=m.parseData(e,n,a);return u.map(function(e){return[e]})}};m.handleMeasure=function(e,t,i,a,r,o){if(t){var n=t.length;var l=[];for(var s=0;s<n;s++){var u=m.parseData(e,t[s],a);if(!l.length){l.length=u.length}for(var c=u.length;c--;){l[c]=l[c]||[];l[c][s]=u[c]}}var h=U(l,t,i,r,o);var p={measureArray:l,multiArray:h};if(r&&r.length&&r.levels&&!o.enableDuplicated){p.measureArray=G(l,r)}if(o&&o.funMeasuresCalculator){o.funMeasuresCalculator(o,p)}return p}else{throw"flat table need fieldsName as it's bindingInfo"}};function W(e,i){return e.map(function(e,a){return t.isExist(e)?e:i[a]})}function G(e,t){var i=[],a={};for(var r=t.length,o=0,n;o<r;o++){if(!t[o]){continue}n=t[o].map(function(e){return e.join(",")}).join(":");if(!a.hasOwnProperty(n)){i.push(e[o]);a[n]=i.length-1}else{var l=a[n];i[l]=W(i[l],e[o])}}return i}m.generateIndexArray=function(e){var i=e.length;if(i===0){return[0]}var a=[];var r,o;for(r=0;r<i;r++){for(o=0;o<e[r];o++){a[r]=a[r]||[];a[r].push(o)}}var n=0;var l=[];if(a.length===1){for(r=0;r<a[0].length;r++){l[n]=l[n]||[];l[n].push(r);n++}return l}if(a.length&&t.isExist(a[0])){for(r=0;r<a[0].length;r++){for(o=0;o<a[1].length;o++){l[n]=l[n]||[];l[n].push(r);l[n].push(o);n++}}}return l};m.processSeriesContext=function(e,i,a){var r;if(e&&e.values){var o=e.metaData;r=[];var n=e.values;for(var l=0;l<o.length;++l){var s=o[l];var u=n[l];if(u){if(i>=0){u=u[i]}for(var c=0;u&&c<a.length;c++){if(t.isExist(u[a[c]])){u=u[a[c]]}}}r.push(u)}}return r};m.processYYSeriesContext=function(e,i){if(t.isArray(i)){return m.processSeriesContext(e,-1,i)}else if(!e||!e.values){return undefined}else{return e.metaData.map(function(i,a){var r=e.values[a];return t.isArray(r)?r.map(function(e){return e[0]}):r})}};m.getAvailableCategories=function(e,i){var a=[];var r=this.getArrayLength(i);var o=this.generateIndexArray(r);if(e[0]&&e[0].values){e[0].values.forEach(function(e,i){if(t.isArray(e)){for(var r in e){if(e.hasOwnProperty(r)){r=parseInt(r);a[r]=a[r]||[];a[r].push(i)}}}else{o.forEach(function(e,t){a[t]=a[t]||[];a[t].push(i)})}})}return a};return m});define("sap/viz/chart/chains/SeriesContext",["sap/viz/framework/common/util/DataUtils"],function(e){return function(t,i,a,r){if(i.length===0){var o=[];if(r&&r.length===1&&r[0]&&r[0].metaData){o=[{measureNames:r[0].metaData[0].id}]}return o}else{return t.map(function(t){var r,o=0;while(o<t.length&&!t[o]){o++}if(o>=t.length){return null}r=t[o];return i.reduce(function(t,i,o){var n=a[o].metaData,l=r[i];n.forEach(function(i,a){t[i.id]=l[a]&&l[a][e.DIMENSION_VALUE]||l[a]});return t},{})})}}});define("sap/viz/chart/chains/BaseChains",["sap/viz/framework/common/util/TypeUtils","sap/viz/chart/chains/ChainUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/binding/BindingManager","sap/viz/chart/chains/SeriesContext"],function e(t,i,a,r,o,n,l){var s={};var u;var c;var h=function(){c=[];u=null};s.defineSpec=function(e,t,i){e.forEach(function(e){var a,r,o;for(o=0;o<t.length;o++){if(e.measureMeta&&e.measureMeta.indexOf(t[o])>-1){a=t[o];break}}for(o=0;o<i.length;o++){if(e.seriesMeta&&e.seriesMeta[i[o]]&&e.seriesMeta[i[o]].hasOwnProperty("mndIndex")){r=e.seriesMeta[i[o]].mndIndex;break}}Object.defineProperty(e,"spec",{enumerable:false,value:{mndKey:a,mndIdx:r}})})};var p=function(e,a,r,o,n,u){var c=[];var h="categoryAxis";var p=o[h];var d=[],f=[],v=[],g=[];if(p){var m="context";var y=u&&u.allowEmptyMeasure;a.filter(function(e){return e!==h}).forEach(function(e){if(o[e]){d.push(o[e]);f.push(e)}});r.forEach(function(e){if(o[e]){v.push(o[e]);g.push(e)}});var _=i.dpInitializer(n);var A=i.getArrayLength(d);var b=i.generateIndexArray(A);var x,S,D,w,C;var T=i.getAvailableCategories(v,d);var z;for(S=0;S<b.length;S++){c[S]=new Array(p.rowArray.length);Object.defineProperty(c[S],"measureMeta",{enumerable:false,value:g});if(!T[S]){continue}for(var L=0;L<T[S].length;L++){var P=T[S][L];x=_();var k=true;var E={};for(D=0;D<b[S].length;D++){var I=d[D].rowArray[b[S][D]];if(I.mndIndex){var O=I.mndIndex;z=o[f[D]].metaData;var R=z[I.indexOf(O)];if(R&&R.values){var N=R.values;for(w=0;w<N.length;w++){if(N[w].id==O){I.mndIndex=w;break}}}}var M=f[D];x[M]=I;E[M]=I}if(!c[S].seriesMeta){Object.defineProperty(c[S],"seriesMeta",{enumerable:false,value:E})}for(w=0;w<v.length;w++){if(t.isExist(v[w].values)&&(t.isExist(v[w].values[P])||v[w].metaData[0].type==="Dimension")){C=v[w].values[P];for(D=0;D<b[S].length;D++){if(t.isExist(C[b[S][D]])||y){C=C[b[S][D]]}}if(t.isArray(C)){k=false}else{x[g[w]]=C}}else{k=false}}var B=i.processSeriesContext(o.context,P,b[S]);if(B){x.context=B}var V=i.processSeriesContext(o.additionInfo,P,b[S]);if(V){x.addition=V}if(!k){continue}var F=i.generateNum(A,b[S]);c[F]=c[F]||[];c[F][P]=x}}}o.series=c.filter(function(e){return e});o.seriesContext=l(c,f,d,v);if(u&&u.isFlexibleStack){s.defineSpec(c,r,a)}};s.GetBindingSeries=i.generateSeriesGetter(p);s.GetContext=function(e,t,a,r){if(t.length===0){return{values:[],metaData:[]}}var o=[];for(var n=0;n<t.length;++n){var l=t[n].id||t[n];var s=i.handleMeasure(e,[l],r,u,c,{enableDuplicated:a,buildContextId:true});o.push(s.multiArray)}return{values:o,metaData:i.buildMetaData(e,t)}};function d(e,t){var i=null;if(e){e.some(function(e){if(e.id===t){i=e;return true}return false})}return i}s.GetDimensionsFromFlattable=function(e,t,a,r,n,l,s,h){var p=i.getMetadata(e).fields;u=i.getData(e,r,u,h,l);for(var f=0,v=t.length;f<v;f++){var g=t[f];for(var m=0,y=p.length;m<y;m++){if(g.measureNames||g===p[m].id){var _;var A=d(n,l);if(A&&A.continuous&&(!h||h&&!h.isTimeStacked)){_=i.handleContinuousDimension(e,t,a,u)}else{var b={isTimeStacked:l==="timeAxis"&&h&&h.isTimeStacked};s.bindingName=l;_=i.handleDimension(e,t,a,s,u,c,b)}return{values:o.transpose(_),metaData:i.buildMetaData(e,t,a),rowArray:_}}}}};s.GetMeasuresFromFlattable=function(e,a,r,n,l,s,h,p){var d=i.getMetadata(e).fields;u=i.getData(e,n,u,p);var f;if(p&&p.isTimeWaterFall){var v=a[0];if(v){var g,m="Date";for(g=0;g<n.length;g++){var y=n[g];if(y.feed==="timeAxis"){m=y.source[0]||m;break}}f=u[m].map(function(e,t){return{Date:e,Value:u[v][t]}});o.stableSort(f,function(e,t){if(e.Date&&t.Date){return e.Date.parsedValue-t.Date.parsedValue}else if(!e.Date){return-1}else if(!t.Date){return 1}});for(g=0;g<f.length;g++){u[m][g]=f[g].Date;if(f[g].Date){u[v][g]=f[g].Value}else{u[v][g]=null}}}}var _,A;var b=p&&p.isTimeStacked;if(b){_=p.timeAxis.values[0];A=function(e,t){if(e.timeValue&&t.timeValue){return e.timeValue-t.timeValue}else if(!e.timeValue){return-1}else if(!t.timeValue){return 1}}}for(var x=0,S=a.length;x<S;x++){for(var D=0,w=d.length;D<w;D++){if(a[x]===d[D].id){if(!p){p={}}p.bindingName=s;p.enableDuplicated=l;var C=i.handleMeasure(e,a,r,u,c,p);var T=o.transpose(C.measureArray);var z=0,L=T.length;var P=Array(L);for(;z<L;++z){var k=T[z];var E=Infinity,I=-Infinity;for(var O=0,R=k.length;O<R;++O){var N=k[O];if(N==null){continue}N=+N;E=Math.min(E,N);I=Math.max(I,N)}P[z]=[E,I]}var M=i.buildMetaData(e,a);if(!(r&&r.length)){M=[M[M.length-1]];P=[P[P.length-1]]}var B=C.multiArray;if(b){var V=B.map(function(e,t){return{array:e,timeValue:_[t]&&_[t].parsedValue}});o.stableSort(V,A);B=V.map(function(e){return e.array})}if(P.length){M.forEach(function(e,i){if(e.hasOwnProperty("min")&&t.isNumeric(e.min)){P[i][0]=e.min}if(e.hasOwnProperty("max")&&t.isNumeric(e.max)){P[i][1]=e.max}})}var F={values:B,range:P,metaData:M};if(h){if(h==="NEED_ONLY_TOTAL_SUM"){var H=F.values.some(function(e){return e>0});F.totalSum=o.sum(F.values.filter(function(e){return e>0||!H}))}else{F.categorySum=i.sumByCategory(B)}}return F}}}};s.OnBindingFinished=function(){h()};s.OnBindingStart=function(){h()};s.extend=function(e,t){var i={};t.forEach(function(t){i[e+t]=s[t]});Object.defineProperty(i,"parsedData",{get:function(){return u},set:function(e){u=e}});Object.defineProperty(i,"multiDimensionIndex",{get:function(){return c},set:function(e){c=e}});return i};n.registerChain("GetBindingSeries",s.GetBindingSeries);return s});define("sap/viz/chart/chains/XYChains",["sap/viz/chart/chains/BaseChains","sap/viz/framework/binding/BindingManager"],function e(t,i){var a={};var r=["GetDimensionsFromFlattable","GetMeasuresFromFlattable","GetBindingSeries","GetContext","OnBindingFinished","OnBindingStart"];a=t.extend("xy",r);Object.keys(a).forEach(function(e){i.registerChain(e,a[e])});return a});define("sap/viz/chart/scales/FrameScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i){var a=function(e,t){a.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.FrameScale";this._name=null;this._type="frame";this._initScale()};e.extend(a,t);a.prototype._initScale=function(){this._scale=d3.scale.ordinal();var e=[];for(var t=0,i=this._domain.length;t<i;t++){if(this._domain[t]){e.push(this._domain[t].v||this._domain[t])}else{e.push(this._domain[t])}}this._scale.domain(e).range(this._range);this._isReset=false};a.prototype.getDomain=function(){this._ensureScaled();return this._domain};a.prototype.getRange=function(){this._ensureScaled();return this._range};a.prototype.scale=function(e){var t=this.getDomain();for(var a in t){if(i.deepEqual(t[a],e)){return this._scale(e?e.v||e:e)}}return 0};a.prototype._ensureScaled=function(){if(this._scale===undefined||this._isReset===true){this._initScale()}};return a});define("sap/viz/chart/scales/FrameScaleProcessor",["sap/viz/chart/scales/FrameScale","sap/viz/framework/scale/ScaleRepository"],function(e,t){var i=function(t,i,a,r,o){o=o||{};var n=o.seriesType,l=o.role;var s=[];var u=[];if(t.values&&t.values[0]){for(var c=0;c<t.values[0].length;c++){s.push(t.values[0][c]);u.push(c)}}a.add(i,{serializable:true,defaultValue:{feed:i,type:"frame",currentValue:null}});a.add(i+".domain",{serializable:true,readonly:true,defaultValue:s});var h=new e(s,u);return h};t["frameScale"]=i;return i});define("sap/viz/chart/dynamicScales/StackedDyScaleProcessor",["sap/viz/framework/common/util/oo","sap/viz/framework/scale/DynamicScaleRepository","sap/viz/chart/dynamicScales/BaseDyScaleProcessor"],function(e,t,i){function a(e,t,i,r){a.superclass.constructor.apply(this,arguments)}["stacked_bar","stacked_column","dual_stacked_bar","dual_stacked_column","timeseries_stacked_column","waterfall","horizontal_waterfall","timeseries_waterfall","stacked_waterfall","horizontal_stacked_waterfall","stacked_combination","horizontal_stacked_combination","dual_stacked_combination","dual_horizontal_stacked_combination","timeseries_stacked_combination"].forEach(function(e){t[e]=a});e.extend(a,i);a.prototype.getMinMax=function(){var e=this.cleanValue;var t=false,i=false;var a=!!this._scales.valueAxis2;this._dataModel._series.forEach(function(r){var o=a&&r.measureMeta&&r.measureMeta.indexOf("valueAxis2")>-1;r.forEach(function(a){if(!a){return}var r=e(this.getValue(a));if(o){i=i===false?r:i;i=Math.min(i,r)}else{t=t===false?r:t;t=Math.min(t,r)}},this)},this);var r=this._scales[this._mainValue].getAutoDomain().map(e);var o={minTable:[Math.max(t,0)],maxTable:[Math.max.apply(null,r)]};if(a){r=this._scales.valueAxis2.getAutoDomain().map(e);o.minTable2=[Math.max(i,0)];o.maxTable2=[Math.max.apply(null,r)]}return o};return a});define("sap/viz/chart/views/XYChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/plotareas/XYPlotArea","sap/viz/chart/components/legend/CombinationLegend","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/legend/LineLegend","sap/viz/framework/binding/bindingValidationUtil","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/chains/XYChains","sap/viz/chart/scales/FrameScaleProcessor","sap/viz/chart/dynamicScales/StackedDyScaleProcessor"],function e(t,i,a,r,o,n,l,s,u){var c=function(e,t){c.superclass.constructor.apply(this,arguments);this._supportLazyRender=true;this.setValueAxisIndex(t.bindings);e.statusManager().add("plotArea.series",{get:this._getSeriesSettings.bind(this)})};t.extend(c,i);c.prototype._getSeriesSettings=function(){if(!this._data){return null}return this._data.series.map(function(e){return this._getSingleSeriesSetting(e)}.bind(this))};c.prototype._getSingleSeriesSetting=function(e){if(!e.seriesMeta){return null}var t={dataContext:u.buildBasic(this._data,e.seriesMeta,null,null,{})};if(this.isLine()){t.type="line"}else if(this.isBar()){t.type="bar"}else if(this._renderType.match(/area/)){t.type="area"}if(this._renderType.match(/area|stacked/)){t.stack="stacked"}return t};c.prototype.setSize=function(){if(this._plotArea&&this._plotArea.setRoughSize){this._plotArea.setRoughSize.apply(this._plotArea,arguments)}c.superclass.setSize.apply(this,arguments)};c.prototype._getDataItems=function(){var e=["valueAxis","categoryAxis","color","dataFrame","series","trellisRow","trellisColumn","seriesContext"];if(this._valueAxisIndex==="valueAxis2"){e[0]="valueAxis2";e[2]="color2"}return e};c.prototype._createPlotContainer=function(e){this._plotArea=new a(this.runtime(),{renderType:this._renderType,valueAxisIndex:this._valueAxisIndex});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};c.prototype.isCombination=function(){return this._renderType.indexOf("combination")!==-1};c.prototype.isLine=function(){return this._renderType.indexOf("line")!==-1};c.prototype._getLegendDefinition=function(){if(this.isCombination()){return[r]}else if(this.isLine()){return[l]}else{return c.superclass._getLegendDefinition.apply(this,arguments)}};c.prototype.isBar=function(){return this._renderType.search(/bar|column/)!==-1};c.prototype._getLegendInitOptions=function(){var e=this._renderType.search(/area/)===-1;if(this.isBar()){return[{defaultMarkerShape:"squareWithRadius",noFillSupport:e}]}else{return[{noFillSupport:e}]}};c.prototype.calculatePaddingInPX=function(e){var t=c.superclass.calculatePaddingInPX.apply(this,arguments);var i=false;var a=this._plotArea;if(a){var r=a._isHorizontal;if(n.isFunction(r)){i=a._isHorizontal()}else if(r===true){i=true}}if(e.get("title.visible")===false&&!i&&e.get("valueAxis.visible")===true){this.changePaddingTop(e,t)}return t};c.prototype.setData=function(e,t){this.setValueAxisIndex(t);c.superclass.setData.apply(this,arguments)};c.prototype.setValueAxisIndex=function(e){this._valueAxisIndex=s.getValueAxisBindings(e)[0];var t=this._valueAxisIndex==="valueAxis"?"valueAxis2":"valueAxis";this.runtime().zoneManager().remove("tempFeedingZone."+t);this.runtime().zoneManager().remove("tempPropertyZone."+t)};return c});define("sap/viz/chart/metadata/bindings/XYBindings",[],function e(){var t=[{id:"dataFrame",name:"IDS_DATA_FRAME",type:"Dimension",min:0,max:1,acceptMND:false,role:"frame.data"},{id:"trellisColumn",name:"IDS_TRELLIS_COLUMN",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"trellis.columnCategory"},{id:"trellisRow",name:"IDS_TRELLIS_ROW",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"trellis.rowCategory"},{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"layout.category"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"}];return t});define("sap/viz/chart/components/plots/DataHandler",[],function e(){var t=function(){};t.prototype.reset=function(){};t.prototype.getBase=function(e,t){return 0};t.prototype.add=function(e,t){return t};t.prototype.destroy=function(){};var i=function(){};i.prototype.reset=function(e){this._sum=[]};i.prototype.getBase=function(e,t){if(this._sum[e]==null){this._sum[e]=0}return this._sum[e]};i.prototype.add=function(e,t){if(this._sum[e]===0){this._sum[e]=t}else if(this._sum[e]<0&&t>0){this._sum[e]=t}else if(this._sum[e]*t>0){this._sum[e]+=t}return this._sum[e]};i.prototype.destroy=function(){this._sum=null};var a=function(){this._stackedBase=[]};a.prototype.destroy=function(){this._sum=null;this._stackedBase=null};a.prototype.reset=function(){this._sum=[];this._stackedBase=[]};a.prototype.getBase=function(e,t,i){if(this._sum[e]==null){this._sum[e]=0}if(this._stackedBase[e]&&this._stackedBase[e][i]!=null){return this._stackedBase[e][i]}else{return this._sum[e]}};a.prototype.add=function(e,t,i){if(this._stackedBase[e]==null){this._stackedBase[e]=[]}if(this._stackedBase[e][i]==null){this._stackedBase[e][i]=this._sum[e];return this._sum[e]+=t}else{return this._stackedBase[e][i]+t}};var r=function(){this._stackedBase=[]};r.prototype.reset=function(e){this._positiveSum=[];this._negativeSum=[];this._stackedBase=[]};r.prototype.destroy=function(){this._positiveSum=null;this._negativeSum=null;this._stackedBase=null};r.prototype.getBase=function(e,t,i){if(this._positiveSum[e]==null){this._positiveSum[e]=0}if(this._negativeSum[e]==null){this._negativeSum[e]=0}if(this._stackedBase[e]&&this._stackedBase[e][i]!=null){return this._stackedBase[e][i]}else{if(t>=0){return this._positiveSum[e]}else{return this._negativeSum[e]}}};r.prototype.add=function(e,t,i){if(this._stackedBase[e]==null){this._stackedBase[e]=[]}if(this._stackedBase[e][i]==null){if(t>=0){this._stackedBase[e][i]=this._positiveSum[e];return this._positiveSum[e]+=t}else{this._stackedBase[e][i]=this._negativeSum[e];return this._negativeSum[e]+=t}}else{return this._stackedBase[e][i]+t}};var o=function(){this._stackedBase=[]};o.prototype.reset=function(e){this._sum=[];this._stackedBase=[]};o.prototype.getBase=function(e,t,i){if(this._sum[e]==null){this._sum[e]=0}if(this._stackedBase[e]&&this._stackedBase[e][i]!=null){return this._stackedBase[e][i]}else{return this._sum[e]}};o.prototype.add=function(e,t,i){if(this._stackedBase[e]==null){this._stackedBase[e]=[]}if(this._stackedBase[e][i]==null){this._stackedBase[e][i]=this._sum[e];if(this._sum[e]===0){this._sum[e]=t}else if(this._sum[e]<0&&t>0){this._sum[e]=t}else if(this._sum[e]*t>0){this._sum[e]+=t}return this._sum[e]}else{return this._stackedBase[e][i]+t}};o.prototype.destroy=function(){this._sum=null;this._stackedBase=null};var n=function(){this._sum=[];this._base=[];this._addHistory={}};n.prototype.destroy=function(){this._sum=null;this._base=null;this._addHistory=null};n.prototype.reset=function(e){this._sum=[];this._base=[];this._addHistory={}};n.prototype.getBase=function(e,t){if(this._base[e]==null){this._base[e]=t;this._sum[e]=t}return this._base[e]};n.prototype.add=function(e,t){var i=e+"-"+t;if(!this._addHistory[i]){this._sum[e]+=t;this._addHistory[i]=true}return this._sum[e]};var l=function(){};l.prototype.destroy=function(){this._sum=null};l.prototype.reset=function(e){this._sum=[]};l.prototype.getBase=function(e,t){if(this._sum[e]==null){this._sum[e]=t}return this._sum[e]};l.prototype.add=function(e,t){return this._sum[e]+=t};return{getHandler:function(){return new t},getStackHandler:function(e,t){if(e){return new r}else if(t){return new i}else{return new a}},getPercentageStackHandler:function(){return new o},getWTFHandler:function(){return new n},getSTKWTFHandler:function(){return new l}}});define("sap/viz/chart/components/plots/SeriesIterator",[],function(){function e(e,t){var i;switch(t){case"reverse":i={current:e,hasNext:function(){return this.current>0},next:function(){return--this.current},index:function(){return this.current}};break;case"reverse_with_series":i={current:e,hasNext:function(){return this.current>0},next:function(){return--this.current},index:function(){return e-this.current-1}};break;default:i={limit:e,current:-1,hasNext:function(){return this.current<this.limit-1},next:function(){return++this.current},index:function(){return this.current}};break}return i}return{create:e}});define("sap/viz/chart/components/plots/model/DataPointInfo",[],function(){var e=function(e,t,i,a){this._seriesIndex=e;this._itemIndex=t;this._rawData=i;this._id=a;this._node=null;this._position=null;this._isVisible=true;this._refNode=null};e.prototype.getSeriesIndex=function(){return this._seriesIndex};e.prototype.getItemIndex=function(){return this._itemIndex};e.prototype.getRawData=function(){return this._rawData};e.prototype.setRawData=function(e){this._rawData=e;return this};e.prototype.getId=function(){return this._id};e.prototype.init=function(e,t,i,a,r){this._config=e;this._dataId=t;this._data=i;this._dataPointId=a;this._onlyOneMndIndex=r};e.prototype.reset=function(){this._position=null;this._config=null;this._dataId=null;this._data=null;this._dataPointId=null};e.prototype.getOnlyOneMndIndex=function(){return this._onlyOneMndIndex};e.prototype.getConfig=function(){return this._config};e.prototype.setConfig=function(e){this._config=e};e.prototype.getDataId=function(){return this._dataId};e.prototype.getData=function(){return this._data};e.prototype.setData=function(e){this._data=e};e.prototype.getDataPointId=function(){return this._dataPointId};e.prototype.getContext=function(){return this._config.ctx};e.prototype.getAdditionCtx=function(){return this._config.additionCtx};e.prototype.getPosition=function(){return this._position};e.prototype.getNode=function(){return this._node};e.prototype.setNode=function(e){this._node=e;return this};e.prototype.getRefNode=function(){return this._refNode};e.prototype.setRefNode=function(e){this._refNode=e;return this};e.prototype.setPosition=function(e){this._position=e;return this};e.prototype.setVisible=function(e){this._isVisible=e;return this};e.prototype.isVisible=function(){return this._isVisible};return e});define("sap/viz/chart/components/plots/model/Series",[],function(){var e=function(){this._datapoints=[];this._context=null};var t=e.prototype;t.setDataPoint=function(e,t){this._datapoints[e]=t;return this};t.getDataPoint=function(e){return this._datapoints[e]};t.setLength=function(e){this._datapoints.length=e;return this};t.getDataPoints=function(){return this._datapoints};t.setContext=function(e){this._context=e;return this};t.getContext=function(){return this._context};return e});define("sap/viz/chart/components/renderers/ReferenceLineRenderer",["sap/viz/framework/common/util/SVG","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r,o,n,l){var s={};var u=i.REFERENCE_LINE.LABEL_PADDING;var c=30;var h=i.REF_LINE_DASH_TYPE_ARRAY;var p=.8;var d=180;var f=1;var v="v-referenceline-group";var g="v-referenceline-labels-group";s.TEXT_PADDING=u;s._combineConfig=function(e,i){var a=i.defaultStyle;var o={};o.strokeColor=e.color?e.color:a.color;o.lineType=e.type?e.type:a.type;o.strokeWidth=e.size?e.size:a.size;if(o.strokeWidth<1||o.strokeWidth>7){o.strokeWidth=1}o.label={};o.label.background=a.label.background;o=this._checkLabelVisible(e,o);if(o.label.visible===false){return o}var l=a.label;o=this._getLabelStyle(o,e,l);if(e.label&&e.label.background){o.label.background=e.label.background}o.label.visible=true;o.label.text=e.label.text;o.lineOpacity=p;o.label.fontSize=t.validateFontStyle(o.label.fontSize);o.label.textSize=t.fastMeasure(o.label.text,o.label.fontSize,o.label.fontWeight,o.label.fontFamily);o.strokeColor=n.convertColor(o.strokeColor);o.label.background=n.convertColor(o.label.background);o.label.color=n.convertColor(o.label.color);if(!r.isExist(o.strokeColor)||!o.strokeColor.length){o.strokeColor=a.color}if(!r.isExist(o.label.background)||!o.label.background.length){o.label.background=a.label.background}if(!r.isExist(o.label.color)||!o.label.color.length){o.label.color=a.label.color}if(i.props&&i.props.realSize){o.realWidth=i.props.realSize.width;o.realHeight=i.props.realSize.height}return o};s._checkLabelVisible=function(e,t){if(e.label==null||e.label.visible===false||e.label.text==null){t.label.visible=false}return t};s._getLabelStyle=function(e,t,i){for(var a in i){if(i.hasOwnProperty(a)){if(t.label.style&&t.label.style.hasOwnProperty(a)){e.label[a]=t.label.style[a];continue}e.label[a]=i[a]}}return e};s._drawReferenceLine=function(t,a,r,o,n,l,s){var u=e.create("g",r);u.setAttribute("class","v-referenceline v-referenceline-"+a);var c=e.create("line",u);var p=e.create("rect",u);c.setAttribute("stroke",t.strokeColor);c.setAttribute("stroke-width",t.strokeWidth);c.setAttribute("shape-rendering","crispEdges");if(i.GRIDLINE_TYPE.DASHED===t.lineType||i.GRIDLINE_TYPE.DOTTED===t.lineType){c.setAttribute("stroke-dasharray",h)}else if(i.GRIDLINE_TYPE.INCISED===t.lineType){c.setAttribute("stroke","#ffffff")}var d;if(isNaN(t.strokeWidth)){d="-"+parseFloat(t.strokeWidth.slice(0,-2))/2+"px"}else{d="-"+t.strokeWidth/2}c.setAttribute("opacity",t.lineOpacity);p.setAttribute("fill","transparent");c.setAttribute("x1",0);c.setAttribute("y2",0);if(n){c.setAttribute("y1",0);c.setAttribute("x2",l);p.setAttribute("y",d);p.setAttribute("height",t.strokeWidth);p.setAttribute("width",l)}else{c.setAttribute("y1",s);c.setAttribute("x2",0);p.setAttribute("x",d);p.setAttribute("width",t.strokeWidth);p.setAttribute("height",s)}};s._buildLabelObj=function(i){var o=i.combinedConfig;var n=e.create("g",i.labelsGroupDOM);n.setAttribute("class","v-referenceline-label v-referenceline-label-"+i.key);n.setAttribute("fill",o.label.color?o.label.color:o.axisColor);n.setAttribute("font-size",o.label.fontSize);n.setAttribute("font-weight",o.label.fontWeight);n.setAttribute("font-family",o.label.fontFamily);n.setAttribute("font-style",o.label.fontStyle);var l=o.label.textSize;var s=l.width;var h;if(s>d){s=d;h=d}var p=false;var v=e.create("rect",n);v.setAttribute("rx",f);v.setAttribute("ry",f);v.setAttribute("fill",o.label.background);var g={};g.width=s+2*u;g.height=l.height+u;g.x=0;g.y=0;var m;var y=e.create("text",n);y.textContent=o.label.text;y.setAttribute("text-anchor",o.textAnchor);if(!i.isHorizontal){var _=i.pos*i.width;if(i.axisLayout[i.key]==="bottom"){g.y=i.height-g.height-1}else{g.y=1}if(_+s+u*2+1<=i.width){g.x=1}else if(_-s-1>=u*2){p=true;g.x=-s-u*2-1}else{h=i.width-_-u*2-1;if(h>=c){g.x=1}else{h=_-u*2-1;if(h>=c){p=true;g.x=-h-u*2-1}else{p=true;h=i.width-_-u*2-1;g.x=1}}h=Math.max(h,2*u);h=Math.min(h,d)}}else{m={};if(i.axisLayout[i.key]==="right"){p=true;g.x=Math.max(i.width-g.width,0)}else{g.x=0}var A=i.height;if(i.combinedConfig.realHeight){A=i.combinedConfig.realHeight}var b=(1-i.pos)*A;if(b>=A-g.height/2+1){g.y=-g.height+1}else if(b>=g.height/2){g.y=-(g.height/2)}else{g.y=-1}if(l.width+u*2>i.width){h=Math.min(i.width-u*2,d)}}if(h!=null){var x=a.convertToCss(o.label);var S=t.ellipsis(o.label.text,y,h,x,o.ellipsisOptions);var D=S.realLength;if(p){g.x+=h-D}g.width=D+u*2;if(!r.isNonEmptyString(S.text)){d3.select(n).remove();n=null}}if(!i.isHorizontal){g.x+=i.initPos;g.initPosX=i.initPos}else{g.y+=i.initPos;g.initPosY=i.initPos}var w;if(n){w={};w.DOM=n;w.rect=g;if(m){if(g.x===0){m.x=i.width-g.width}else{m.x=0}m.y=g.y;m.width=g.width;m.height=g.height;w.candidateRect=m}}return w};s._layoutAndUpdateLabelDOM=function(e,t){if(t){if(e&&e.plotInstance){var i={};i.isHorizontal=e.isHorizontal;i.width=e.width;i.height=e.height;i.candidateRect=t.candidateRect;e.plotInstance.getReferenceLines().smartLayoutReferenceLineLabel(t.rect,i)}var a=e.combinedConfig.label.textSize;var o=t.DOM.querySelector("rect");var n=t.DOM.querySelector("text");o.setAttribute("width",t.rect.width);o.setAttribute("height",t.rect.height);var s=t.rect.initPosX;var c=t.rect.initPosY;if(!r.isExist(s)){s=0}if(!r.isExist(c)){c=0}o.setAttribute("x",t.rect.x-s);n.setAttribute("x",t.rect.x-s+u);o.setAttribute("y",t.rect.y-c);n.setAttribute("y",t.rect.y-c+u/2-a.y);t.DOM.setAttribute("transform","translate("+s+", "+c+")");l.setData(t.DOM,{initPosX:t.rect.initPosX,initPosY:t.rect.initPosY})}};s._drawLabel=function(e){var t=this._buildLabelObj(e);this._layoutAndUpdateLabelDOM(e,t);return t};s._searchXYAxisHandler=function(e,t,i){var a=this._searchAxisHandler(e,i);if(a){return{handler:a,isHorizontal:false}}a=this._searchAxisHandler(t,i);if(a){return{handler:a,isHorizontal:true}}return null};s._searchAxisHandler=function(e,t){for(var i=0;i<e.length;i++){if(e[i].id===t&&e[i].continuous){return e[i]._scale}}return null};s._calculatePosition=function(e,t,i){var a=t.handler.normalizeValue(i);var r=e?a:t.handler.scale(a);return r};function m(e,t){var i={};var a=e.filter(function(e){return e.type==="value"}).map(function(e){return e.id}).sort();var r=t.filter(function(e){return e.type==="value"}).map(function(e){return e.id}).sort();if(a.length===2&&r.length===0){i[a[0]]="top";i[a[1]]="bottom"}else if(a.length===0&&r.length===2){i[r[0]]="left";i[r[1]]="right"}else{if(a[0]){i[a[0]]="top"}if(r[0]){i[r[0]]="right"}}return i}s._isInvisiblePosition=function(e){return e<0||e>1};s._renderSub=function(t){var i;var a=m(t.xHandlers,t.yHandlers);for(var r=0;r<t.lineStyles[t.key].length;r++){i={};var o=t.lineStyles[t.key][r];if(o.visible===false){continue}if(o.value==null||isNaN(o.value)||o.value===""){continue}var n=this._searchXYAxisHandler(t.xHandlers,t.yHandlers,t.key);if(n==null){continue}var s=this._calculatePosition(t.isPercentage,n,o.value);if(this._isInvisiblePosition(s,o)){continue}var u=this._combineConfig(o,t,n);u.axisColor=t.props[t.key+"Color"];u.textAnchor=t.props.textAnchor;u.ellipsisOptions=t.props.ellipsisOptions;u.xOffset=t.props.offset&&t.props.offset.x||0;var c=e.create("g",t.labelsGroupDOM,true);c.setAttribute("class",n.isHorizontal?"v-referenceline-horizontal":"v-referenceline-vertical");var h=n.isHorizontal?(1-s)*t.height:s*t.width;c.setAttribute("transform",n.isHorizontal?"translate("+0+", "+h+")":"translate("+h+", "+0+")");var p={value:Number(o.value),id:r};if(n.isHorizontal){p.initPosY=h}else{p.initPosX=h}l.setData(c,p);this._drawReferenceLine(u,t.key,c,s,n.isHorizontal,t.width,t.height);if(u.label.visible){var d={};d.combinedConfig=u;d.key=t.key;d.referenceLineG=c;d.pos=s;d.initPos=h;d.labelsGroupDOM=t.labelsGroupDOM;d.isHorizontal=n.isHorizontal;d.width=t.width;d.height=t.height;d.axisLayout=a;d.plotInstance=t.plotInstance;var f=this._drawLabel(d);if(f){i.labelRect=f.rect;if(t&&t.plotInstance&&i.labelRect){t.plotInstance.getReferenceLines().addReferenceLineItem(i)}}}}};s.render=function(t){if(t.props.referenceLine==null){return}if(t&&t.plotInstance){t.plotInstance.getReferenceLines().cleanReferenceLineItems()}var i=t.props.referenceLine;var a=i.defaultStyle;var r=i.line;var n=false;if(r&&r.timeAxis){if(t.dataModel&&t.dataModel._rawData){n=o.isFiscal(t.dataModel._rawData)}r.timeAxis.forEach(function(e){if(n){e.value=o.fiscalToQuantity(e.value,t.originalProps)}else{e.value=new Date(e.value)}})}var l=t.selection.querySelector("."+v);if(!l){l=e.create("g",t.selection);l.setAttribute("class",v);if(t.clipPath){l.setAttribute("clip-path","url(#"+t.clipPath.getAttribute("id")+")")}}else{var s=null;while((s=l.firstChild)!=null){l.removeChild(s)}}var u=e.create("g",l);u.setAttribute("class",g);t.lineStyles=r;t.defaultStyle=a;t.referenceLineGroup=l;t.labelsGroupDOM=u;for(var c in r){if(r.hasOwnProperty(c)){t.key=c;this._renderSub(t)}}};return s});define("sap/viz/chart/components/referencelines/BaseReferenceLines",["sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/oo","sap/viz/chart/components/UIComponent","sap/viz/framework/common/util/Constants"],function(e,t,i,a){var r=a.REFERENCE_LINE.LABEL_PADDING;var o=function(e){o.superclass.constructor.apply(this,arguments);this._referenceLineItems=[]};t.extend(o,i);o.prototype.destroy=function(){this._referenceLineItems=null};o.prototype.addReferenceLineItem=function(t){var i=e.clone(t);this._referenceLineItems.push(i);return i};o.prototype.cleanReferenceLineItems=function(){this._referenceLineItems=[]};o.prototype._labelOverlapFactor=function(e){var t;var i=0;var a=0;var o=e.x-r;var n=e.x+e.width+r;var l=e.y-r;var s=e.y+e.height+r;var u;var c;var h;var p;var d;var f;var v;var g;var m;for(t=0;this._referenceLineItems&&t<this._referenceLineItems.length;t++){u=this._referenceLineItems[t].labelRect;c=u.x-r;h=u.x+u.width+r;p=u.y-r;d=u.y+u.height+r;a+=(h-c)*(d-p);f=Math.max(o,c);v=Math.min(n,h);g=Math.max(l,p);m=Math.min(s,d);if(v>f&&m>g){i+=(v-f)*(m-g)}}var y=0;if(a>0){y=i/a}return y};o.prototype.smartLayoutReferenceLineLabel=function(e,t){var i;if(!t.isHorizontal){var a;var r=Number.MAX_VALUE;var o=e.y;i=Number.MAX_VALUE;for(a=e.y;i&&a<=t.height-e.height;a++){e.y=a;i=this._labelOverlapFactor(e);if(i<r){r=i;o=a}}e.y=o}else if(t.candidateRect){i=this._labelOverlapFactor(e);var n=this._labelOverlapFactor(t.candidateRect);if(i&&n<i){e.x=t.candidateRect.x;e.y=t.candidateRect.y}}};return o});define("sap/viz/chart/components/referencelines/DualReferenceLines",["sap/viz/framework/common/util/oo","sap/viz/chart/components/referencelines/BaseReferenceLines"],function(e,t){var i=function(e){i.superclass.constructor.apply(this,arguments)};e.extend(i,t);i.prototype.smartLayoutReferenceLineLabel=function(e,t){};return i});define("sap/viz/chart/components/util/ZoomUtil",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/Constants"],function e(t,i,a){return{isZoomRangeValid:function(e,i,a){if(t.isExist(e)){e=new Date(e).getTime()}e=parseInt(e);if(t.isExist(i)){i=new Date(i).getTime()}i=parseInt(i);if(!isNaN(e)||!isNaN(i)){if(isNaN(e)){e=a[0]}if(isNaN(i)){i=a[1]}return!(e>a[1]||i<a[0]||e>=i)}return false},getZoomRange:function(e,t,r){function o(e){if(e===a.PLOTAREA.FIRST_DATAPOINT){return t[0]}else if(e===a.PLOTAREA.LAST_DATAPOINT){return t[1]}else if(!!e&&r){return e.categoryAxis}else{return e}}var n,l,s=!e.get("interaction.noninteractiveMode");if(s){n=e.get("plotArea.window.start");l=e.get("plotArea.window.end");var u=i.startEndConvertor(n,l,e);n=o(u.start);l=o(u.end)}return[n,l]},isRangeIncomplete:function(e){if(!t.isExist(e)){return false}var i=t.isExist(e[0]);var a=t.isExist(e[1]);return i&&!a||!i&&a}}});define("sap/viz/chart/components/plots/BasePlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/UIComponent","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/SeriesIterator","sap/viz/chart/components/plots/model/DataPointInfo","sap/viz/chart/components/plots/model/Series","sap/viz/chart/components/datalabels/DataLabels","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/Background","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/SVG","sap/viz/chart/components/renderers/ReferenceLineRenderer","sap/viz/chart/components/referencelines/BaseReferenceLines","sap/viz/chart/components/referencelines/DualReferenceLines","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/container/utils/xyTransformUtils","sap/viz/framework/interaction/utils/PlotZoomUtils","sap/viz/chart/components/util/ZoomUtil","sap/viz/chart/components/util/ColorUtil"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S){var D=u.CSS.CLASS;var w=function(e,t){w.superclass.constructor.apply(this,arguments);this._options=t||{};this._isInTrellis=this._options.inTrellis;this._needApplyChanges=false;this._dataHandler=this._getDataHandler();this._dataPointRenderer=undefined;this._seriesRenderer=this._getSeriesRenderer();this._randomSuffix=i.guid();this._xHandlers=this._getXHandlers();this._yHandlers=this._getYHandlers();this._dataLabels=this._getDataLabels(this._name+".dataLabel",e);this._referenceLines=this._getReferenceLines(e);this._semanticMgr=this.runtime().semanticManager();this._semanticMgr.bindDataPointProperty(this._name+".dataPointStyle",this._name+".dataPointStyleMode");this._semanticMgr.bindSeriesStyleProperty(this._name+".seriesStyle");this._effectManager=this.runtime().effectManager();this._background=new p(e,{name:"background",properties:this._properties});this._selection=null;this._parent_trellis=null;this._exposeMoreEvents("reRenderComplete");this._offset={x:0,y:0};this._strokeProp=this._properties.origin.get("plotArea.dataPoint.stroke");this._graphicModel=this.runtime().graphicModel();if(this._graphicModel){this._graphicModel.registerExposedModule("plot")}this._dataPointClasses=[D.DATAPOINT,D.MORPHABLEDATAPOINT,D.DATAPOINTDEFAULT];this.runtime().statusManager().add("plotArea.window")};t.extend(w,a);w.prototype._getXHandlers=function(){return[]};w.prototype._getYHandlers=function(){return[]};w.prototype._getDataHandler=function(){return{valueAxis:r.getHandler()}};w.prototype._getSeriesRenderer=function(){};w.prototype._getDataLabels=function(e,t){return new s(t,{name:e})};w.prototype._getReferenceLines=function(e){var t;if(this._options&&this._options.isDualValueAxis){t=new y(e)}else{t=new m(e)}return t};w.prototype.getReferenceLines=function(){return this._referenceLines};w.prototype.setData=function(e){w.superclass.setData.apply(this,arguments);if(this._dataLabels){this._dataLabels.setData(e)}this._needApplyChanges=true;this._recordPlotWindow()};w.prototype.setSize=function(e){w.superclass.setSize.apply(this,arguments);this._background.setSize(e);if(this._dataLabels){this._dataLabels.setSize(e)}this._needApplyChanges=true};w.prototype.getRealSize=function(){return{width:this._realSize.width,height:this._realSize.height}};function C(e,t){if(!t){return[]}var i=e.categoryAxis;var a=i.scale.getDomain();var r=i.metaData;var o=[];for(var n=0;n<r.length;++n){if(t.hasOwnProperty(r[n].id)){o.push(t[r[n].id])}else{break}}var l=[];var s=0,u=0;var c=-1;var h=0;var p=0;if(o.length){for(;s<a.length;++s){for(u=0;u<o.length;++u){if(a[s][u]!=o[u]){break}}if(u>0){if(u>c+1){c=u-1;h=s}if(u===c+1){p=s}}}}if(c>=0){l.push(h);l.push(p)}return l}w.prototype._getCategoryRange=function(e){if(!this._data.categoryAxis){return null}var t=this._data.categoryAxis.scale.getDomain().length-1;var i=[0,t];var a=x.getZoomRange(this._properties.origin,i,true);var r=a[0];var o=a[1];if(!_.isExist(r)&&!_.isExist(o)){return null}var n=[0,t];var l=_.isNumber(r)?[r,r]:C(this._data,r);var s=_.isNumber(o)?[o,o]:C(this._data,o);if(l.length>0&&s.length>0){n[0]=Math.min(l[0],s[0]);n[1]=Math.max(l[1],s[1])}else if(l.length>0){n[0]=l[0];n[1]=null}else if(s.length>0){n[0]=null;n[1]=s[1]}return n};w.prototype._getTimeRange=function(){function e(e){var t=e;if(_.isExist(t)){t=new Date(t).getTime();t=parseInt(t)}return t}if(!this._data.timeAxis){return null}var t=this._data.timeAxis.scale.getDomain();var i=this._properties.origin;var a=x.getZoomRange(i,t);var r=e(a[0]);var o=e(a[1]);return[r,o]};w.prototype._isRangeIncomplete=function(e){return x.isRangeIncomplete(e)};w.prototype._fillRange=function(e){if(!_.isExist(e[0])){e[0]=0}if(!_.isExist(e[1])){var t=this._data.categoryAxis.scale.getDomain().length-1;e[1]=t}return e};w.prototype._shiftOffsetForIncompleteRange=function(e,t){var i=this.isHorizontal()?this._realSize.height:this._realSize.width;var a=this.isHorizontal()?this._size.height:this._size.width;var r=i/t;var o;if(!_.isNumber(e[0])){o=-(e[1]+1)*r+a}else{o=-e[0]*r}if(o>0||-o+a>i){this._fillRange(e);return false}else{if(this.isHorizontal()){this._offset.y=o}else{this._offset.x=o}return true}};w.prototype.destroy=function(){w.superclass.destroy.call(this);this._properties=null;this._options=null;this._needApplyChanges=null;if(this._dataHandler){for(var e in this._dataHandler){if(this._dataHandler.hasOwnProperty(e)){if(this._dataHandler[e]){this._dataHandler[e].destroy()}delete this._dataHandler[e]}}}this._dataHandler=null;this._dataPointRenderer=null;this._seriesRenderer=null;this._randomSuffix=null;if(this._xHandlers){this._xHandlers.forEach(function(e){e.destroy()})}this._xHandlers=null;if(this._yHandlers){this._yHandlers.forEach(function(e){e.destroy()})}this._yHandlers=null;if(this._dataLabels&&this._dataLabels.destroy){this._dataLabels.destroy()}this._dataLabels=null;if(this._referenceLines&&this._referenceLines.destroy){this._referenceLines.destroy()}this._referenceLines=null;this._background=null;if(this._selection){this._selection.remove()}this._selection=null;if(this._parent_trellis){this._parent_trellis.remove()}this._parent_trellis=null;this._series=[];this._customMarkerRenderer=null;this._semanticMgr=null;this._strokeProp=null;this._effectManager=null;this._plotDpParentNode=null};w.prototype._updateBackgroundColor=function(){if(this._isInTrellis){this._background.setData({color:"transparent",hasBorder:false})}else{this._background.setData(null)}};w.prototype.render=function(e,t,i){this._selection=e;if(this._needApplyChanges){this._applyChanges();this._needApplyChanges=false}this._drawingEffect=this._properties.get("drawingEffect");this._preRender();var a=e.node();this._EmptyDOM(a);this._updateBackgroundColor();this._background.render(e);var r=this._createMainNode(a);if(!this._isInTrellis){var o="translate("+this._offset.x+", "+this._offset.y+")";for(var n in r){if(r.hasOwnProperty(n)){r[n].setAttribute("transform",o)}}}this._plotDpParentNode=d3.select(r.plotMainNode);this._drawGridlines(this._plotDpParentNode);this._semanticMgr.beginSession();this._drawDatapoints(this._getDpParentNode(),t,i);this._semanticMgr.endSession()};w.prototype._EmptyDOM=function(e){f.empty(e)};w.prototype._preRender=function(){this._customMarkerRenderer=this._properties.get("markerRenderer");this._series=[]};w.prototype._postRender=function(e){this._drawReferenceLine()};w.prototype._recordPlotWindow=function(){var e=this._properties.get("window");e=e&&(e.start||e.end)?e:null;this.runtime().statusManager().set("plotArea.window",e)};w.prototype.getReferenceLineRenderer=function(){return g};w.prototype._drawReferenceLine=function(e){var t=i.extend(true,{},this._properties.get("referenceLine"));var a=this._properties.getDefault("referenceLine");if(t&&t.defaultStyle){if(!_.isExist(t.defaultStyle.color)||!t.defaultStyle.color.length){t.defaultStyle.color=a.defaultStyle.color}if(!_.isExist(t.defaultStyle.label.background)||!t.defaultStyle.label.background.length){t.defaultStyle.label.background=a.defaultStyle.label.background}if(!_.isExist(t.defaultStyle.label.color)||!t.defaultStyle.label.color.length){t.defaultStyle.label.color=a.defaultStyle.label.color}}var r=this.getReferenceLineRenderer();if(null==t||!r){return}var o=i.extend(true,{},this._offset,e);var n={referenceLine:t,offset:o,realSize:this._realSize};var l=this._properties.origin;var s=t.line;for(var u in s){if(s.hasOwnProperty(u)){n[u+"Color"]=l.get(u+".color")}}n.textAnchor=null;if(this.runtime){var c=this.runtime().envManager();if(c){n.textAnchor=c.textAnchor()}n.ellipsisOptions={};n.ellipsisOptions.reverseDots=c&&c.reverseDots();n.ellipsisOptions.needRealLength=true}var h={};h.dataModel=this._runtime&&this._runtime._interaction&&this._runtime._interaction._service&&this._runtime._interaction._service.getDataModel();h.xHandlers=this._xHandlers;h.yHandlers=this._yHandlers;h.props=n;h.width=this._size.width;h.height=this._size.height;h.selection=this._getDpPlotNode();h.isPercentage=this._data._seriesType==="percentage";h.originalProps=l;h.plotInstance=this;h.clipPath=this.clipPath;r.render(h)};w.prototype._getDpPlotNode=function(){if(this._selection){return this._selection.node()}};w.prototype._getDpParentNode=function(){return this._plotDpParentNode};w.prototype._repositionReferenceLine=function(){if(!this._selection){return}var e=this._getDpPlotNode(),t=e.querySelectorAll(".v-referenceline-horizontal,.v-referenceline-vertical,.v-referenceline-label"),i;var a=this.runtime().statusManager().get("plot.transform.scale"),r=this.runtime().statusManager().get("plot.transform.translate");for(i=0;i<t.length;i++){A.adjustXYTranslate(t[i],a,r)}};w.prototype._drawDataLabels=function(e,t){this._dataLabels.setDataShapesGroupNode(t);this._dataLabels.setRealSize(this._realSize);this._parent_trellis=e;var i=this._dataLabels;if(!this._isInTrellis){var a=e.selectAll("."+u.CSS.CLASS.DATAPOINT)[0];i.render(e,a)}};w.prototype.drawTrellisDataLabels=function(e,t){if(!this._parent_trellis||!this._dataLabels){return}var i=this._dataLabels;i.setTrellisCell(e,t);var a=this._parent_trellis.selectAll("."+u.CSS.CLASS.DATAPOINT)[0];i.render(this._parent_trellis,a)};w.prototype._createMainNode=function(e){var t=this._size.width,i=this._size.height;var a,r;var o=!this._options.disableClipPath;if(o){a=v.create("clipPath",e);r="plot_main_clipPath_"+this._randomSuffix;a.setAttribute("id",r);var n=v.create("rect",a);var l=this._runtime._statusMgr.get("plot.transform.scale");this._setClipPathAttribute(n,t,i,l,this._data);this.clipPath=a}var s=v.create("rect",e);s.setAttribute("class","v-plot-bound v-bound "+b.ZOOM_CONTAINER_CLASS);s.setAttribute("width",t);s.setAttribute("height",i);s.setAttribute("fill","transparent");var u=v.create("g",e);var c=v.create("g",u);c.setAttribute("class","v-plot-main");c.setAttribute("role","list");if(o&&!this._notNeedClippath){u.setAttribute("clip-path","url(#"+r+")")}return{plotMainNode:c}};w.prototype._setClipPathAttribute=function(e,t,i,a,r){var o=this._getClipPathAttribute(t,i,a,r);for(var n in o){if(o.hasOwnProperty(n)){e.setAttribute(n,o[n])}}};w.prototype._getClipPathAttribute=function(e,t){var i=.5;return{y:-1,width:e+1,height:t+1+i}};w.prototype._applyChanges=function(){var e=this._realSize;var t=this._data.trellisSeriesLength?this._data.trellisSeriesLength:this._data.series.length;this._initXHandler(this._xHandlers,this._data,e.width,t);this._initYHandler(this._yHandlers,this._data,e.height,t)};w.prototype._initXHandler=function(e,t,i,a){T(e,t,i,a)};w.prototype._initYHandler=function(e,t,i,a){T(e,t,i,a)};function T(e,t,i,a){var r=null;for(var o=0,n=e.length;o<n;o++){var l=e[o].id;var s=t[l];if(s==null||s.scale==null){continue}r=s.scale;e[o].init(r,a,i)}}w.prototype._drawGridlines=function(e){};w.prototype._getSeries=function(){return this._data.series};w.prototype._buildLegendTextData=function(e){return[]};w.prototype._getOnlyOneMndIndex=function(e,t){return-1};w.prototype.createSeriesIterator=function(e){return o.create(e)};w.prototype._drawDatapoints=function(e){var t=this._getSeries();var i=t.length;if(this._seriesRenderer){this._seriesRenderer.init(i)}for(var a in this._dataHandler){if(this._dataHandler[a].reset){this._dataHandler[a].reset()}}var r;var o=0;var n=-1;if(this._properties.get("dataLabel.visible")){var s=this._buildLegendTextData(t);if(i>0){n=this._getOnlyOneMndIndex(t[0],s)}}var u;var c;var h;var p;var d;var f;var g;var m;var y=this.createSeriesIterator(i);while(y.hasNext()){u=y.next();h=t[u];if(!h){continue}this._series[u]=new l;for(c=0;c<h.length;c++){p=h[c];if(!p){continue}d=this._getPosition(u,c,p);if(!d){continue}r=o++;f=this._buildWrapperConfig(p,d,p.dp.context());g=this._buildData(f);m=this._createDataPoint(u,c,f,g,d,r,p,n);this._series[u].setDataPoint(c,m)}}var _=v.create("g");_.setAttribute("class",D.DATAPOINT_GROUP);this._showDataPoints(_);if(this._seriesRenderer){this._seriesRenderer.render(_)}this._postRender(_);e.node().appendChild(_);if(this._dataLabels){this._drawDataLabels(e,_)}};w.prototype._preShowDataPoints=function(){};w.prototype._showDataPoints=function(e){this._preShowDataPoints();var t=[];var i=false;var a;var r;var o;var n;var l;var s;var u;var c;var h=this._series.length;var p;for(a=0;a<h;a++){o=this._series[a];if(!o){continue}n=this._getDataPointRenderer(a);if(!n){continue}l=o.getDataPoints();s=false;p=l.length;for(r=0;r<p;r++){u=l[r];if(!u){continue}s=true;c=this._drawDataPoint(n,u);u.setNode(c);if(c){t.push(c)}if(this._seriesRenderer){this._seriesRenderer.addDataPoint(a,r,u.getConfig(),u.getPosition(),c)}else{if(c){e.appendChild(c)}}if(c){o.setDataPoint(r,null)}}if(!s){this._series[a]=null}else{i=true}}if(!i){this._series=[]}return t};w.prototype._setOffset=function(e){if(!e){return}if(e.hasOwnProperty("x")&&e.x!=null){this._offset.x=e.x}if(e.hasOwnProperty("y")&&e.y!=null){this._offset.y=e.y}};w.prototype.getOffset=function(e){return{x:this._offset.x,y:this._offset.y}};w.prototype.scroll=function(e){this._setOffset(e);if(!this._selection){return}this._applyScroll();this._repositionReferenceLine()};w.prototype._applyScroll=function(){if(!this._selection){return}var e=this._getDpPlotNode().querySelector("."+D.DATAPOINT_GROUP);var t=this._showDataPoints(e);if(this._seriesRenderer){this._seriesRenderer.update()}if(this._dataLabels){this._dataLabels.render(this._getDpParentNode(),t)}if(!this._isInTrellis){var i="translate("+this._offset.x+", "+this._offset.y+")";this._selection.select("g.v-plot-main").node().setAttribute("transform",i)}if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};w.prototype.getSeries=function(){return this._series};w.prototype._isEmptySeries=function(e){for(var t=0;t<e.length;t++){if(!!e[t]){return false}}return true};w.prototype._getAxisPosition=function(e,t,i,a,r){var o=this._dataHandler;var n={index:i,seriesIndex:t,shape:r};for(var l=0,s=e.length;l<s;l++){var u=e[l];if(a.hasOwnProperty(u.id)){n.dataHandler=o[u.id];return u.scale(a[u.id],n)}}n.rawData=a;n.dataHandler=null;return e[0].scale(null,n)};w.prototype._getXPosition=function(e,t,i){return this._getAxisPosition(this._xHandlers,e,t,i)};w.prototype._getYPosition=function(e,t,i){return this._getAxisPosition(this._yHandlers,e,t,i)};w.prototype.getDataPointPosition=function(e,t){var i=this._data.series[e][t];return this._getPosition(e,t,i)};w.prototype._getPosition=function(e,t,i){var a=this._getXPosition(e,t,i);var r=this._getYPosition(e,t,i);if(isNaN(a[0])||isNaN(a[1])||isNaN(r[0])||isNaN(r[1])){return null}return{x:a[0],width:a[1],y:r[0],height:r[1]}};var z=["plotArea.grid.background.color","plotArea.background.color","general.background.color"];w.prototype._getBackgroundColor=function(){var e=this.runtime().propertyManager();var t="plotArea.dataPoint.stroke.color";var i="plotArea.dataPoint.stroke.visible";var a=S.getBgColor(e,e.get(i)?z.concat(t):z);return h.convertColor(a)};w.prototype._buildWrapperConfig=function(e,t,i,a){a=a||{};var r=this._buildConfig(e,t,i);var o=e.dp&&e.dp.additionCtx();r.additionCtx=o;if(this._strokeProp&&this._strokeProp.visible&&r.graphic){r.graphic.stroke=r.graphic.stroke||this._strokeProp.color;r.graphic.strokeWidth=r.graphic.strokeWidth||1}if(a.seriesStyle){if(a.seriesStyle.dpPattern){r.graphic.pattern=a.seriesStyle.dpPattern}if(a.seriesStyle.color){r.graphic.fill=a.seriesStyle.color}}r.graphic.bgColor=this._getBackgroundColor();if(!e.isNullValue){i=i||e.dp.context()}if(r.isMatchedHighlightContext===false){a.disableSemantic=true}r=this._getFillColorConfig(r,i,a,e);if(e.dp){r.dataId=e.dp.id;e.dp._isSemantic=r.matchSemantic}r.rawData=e;if(e.trellisRow||e.trellisColumn){r.trellisInfo={trellisRow:e.trellisRow,trellisColumn:e.trellisColumn}}return r};w.prototype._doColorMapOnConfig=function(e){if(e.graphic){if(e.graphic.fill){e.graphic.fill=h.convertColor(e.graphic.fill)}if(e.graphic.color){e.graphic.color=h.convertColor(e.graphic.color)}if(e.graphic.borderColor){e.graphic.borderColor=h.convertColor(e.graphic.borderColor)}}if(e.data&&e.data.color){e.data.color=h.convertColor(e.data.color)}};w.prototype._getFillColorConfig=function(e,t,i,a){var r=a&&!a.isNullValue?a.dp.additionCtx():{};var o=i.disableSemantic?null:this._semanticMgr.analyzeDataPoint("color",t,true,r);var n=true;if(o==null||o.properties==null||!(this._semanticMgr.hasDataPointColorStyle()||this._semanticMgr.hasDataPointLineStyle())){this._doColorMapOnConfig(e);n=false}if(n){if(o.properties.hasOwnProperty("color")){var l=h.convertColor(o.properties.color||this._semanticMgr._propMgr.get("plotArea.defaultOthersStyle.color"));if(e.graphic){if(e.graphic.hasOwnProperty("fill")){e.graphic.fill=l}if(e.graphic.hasOwnProperty("color")){e.graphic.color=l}}if(e.data&&e.data.color){e.data.color=l}e.isOthers=o.isOthers;e.useDefaultOtherName=o.useDefaultOtherName;e.displayName=o.displayName;e.matchSemantic=true}if(o.properties.stroke){e.graphic.stroke=o.properties.stroke}if(o.properties.strokeWidth){e.graphic.strokeWidth=o.properties.strokeWidth}}e=this._getPatternConfig(e,t,i,r);return e};w.prototype._getColor=function(e){var t=null;if(this._data.color2&&e.color2){t=this._data.color2.scale.scale(e.color2)}else if(this._data.color){t=this._data.color.scale.scale(e.color)}else if(this._data.color2){t=this._data.color2.scale.scale()}return t};w.prototype._buildConfig=function(e,t,i){var a=this._getColor(e);var r={width:t.width,height:t.height,drawingEffect:this._drawingEffect,fill:a,opacity:1};return{graphic:r,data:{color:a,width:t.width,height:t.height,translate:[t.x,t.y]},ctx:i,effectManager:this._effectManager}};w.prototype._createDataPoint=function(e,t,i,a,r,o,l,s){var c=new n(-1,-1,null,-1);c.init(i,o,a,l&&l.dp&&l.dp.id?l.dp.id:u.NULL_VALUE,s);c.setPosition(r);c.setRawData(l);return c};w.prototype._applyDataPointRenderer=function(e,t){return e(t,this._dataPointRenderer.expose)};var L=u.CSS.CLASS.DATAPOINT+" "+u.CSS.CLASS.MORPHABLEDATAPOINT+" "+u.CSS.CLASS.DATAPOINTDEFAULT;w.prototype._additionalExtraData=function(e){};w.prototype._drawDataPoint=function(e,t){var i=v.create("g");c.setDataId(i,t.getDataId());c.setDataPointId(i,t.getDataPointId());d.setContext(i,t.getContext());var a=t.getData();a.seriesIndex=t.getSeriesIndex();a.itemIndex=t.getItemIndex();this._additionalExtraData(a);d.setData(i,a);var r=t.getAdditionCtx();d.setAdditionCtx(i,r);i.setAttribute("class",this._dataPointClasses.join(" "));var o=t.getPosition();if(_.isExist(o.x)&&_.isExist(o.y)){i.setAttribute("transform","translate("+o.x+", "+o.y+")")}var n=t.getConfig();var l=this._renderNode(e,n,i,a);var s=this._drawShadowNode(n.graphic,i,l,a,e);return i};w.prototype._isSupportNoFill=function(){return false};w.prototype._drawShadowNode=function(e,t,a,r,o){var n;o=o||this._dataPointRenderer;if(this._isSupportNoFill()&&e.pattern==="noFill"){var l=i.clone(e);delete l.bgColor;delete l.drawingEffect;delete l.pattern;l.fill="transparent";n=o({graphic:l});if(n){t.appendChild(n)}}a=n||a;if(a){var s=a.getAttribute("stroke-width");if(s){r.strokeWidth=parseInt(s)}}return n};w.prototype._renderNode=function(e,t,i,a){var r=this._applyDataPointRenderer(e,t);if(!r&&this._dataPointRenderer){r=this._dataPointRenderer(t)}i.appendChild(r);if(t.graphic&&t.graphic.pattern){if(t.graphic.pattern==="noFill"){a.pattern="noFill"}else{a.patternFill=r.getAttribute("fill")}}return r};w.prototype._appendDataPointClass=function(e){this._dataPointClasses.push(e)};w.prototype._buildData=function(e){var t={color:e.graphic.fill,trellisInfo:e.trellisInfo};if(this._semanticMgr.isUseSemanticPattern()){t.pattern=e.graphic.pattern;if(e.ctx){t.isNegative=e.ctx[e.ctx.measureNames]<0?true:false}}return t};w.prototype._getDataPointRenderer=function(e){return this._customMarkerRenderer||this._dataPointRenderer};w.prototype.isBigDataMode=function(){return false};w.prototype.getAxisBinding=function(){var e={};if(this._xHandlers){e.horizontal=this._xHandlers.map(function(e){return e.id})}if(this._yHandlers){e.vertical=this._yHandlers.map(function(e){return e.id})}return e};w.prototype.mappingDataPointInfo=function(e){return{}};w.prototype.getRemainingPlotOffset=function(e,t){var i=this.getRealSize();var a=this.getSize();var r={};var o=e?e.x||e.y||0:0;if(this.isHorizontal()){r.y=(i.height-a.height+o)*-t;return{y:r.y+o}}else{r.x=(i.width-a.width+o)*-t;return{x:r.x+o}}};w.prototype._getPatternConfig=function(e,t,i,a){if(!i.disableSemantic&&this._useSemanticPattern()){var r=this._semanticMgr.analyzeDataPoint("pattern",t,true,a);if(r&&r.properties&&r.properties.pattern){if(this._isSupportNoFill()||r.properties.pattern!=="noFill"){e.graphic.pattern=r.properties.pattern}if(e.ctx[e.ctx.measureNames]<0){e.graphic.isNegative=true}else{e.graphic.isNegative=false}}}return e};w.prototype._useSemanticPattern=function(){return this._semanticMgr.isUseSemanticPattern()&&this._semanticMgr.hasDataPointStyle()};w.prototype.getSeriesIndex=function(e){return e._addr[1]};return w});define("sap/viz/chart/components/plots/BarWidthUtils",["sap/viz/framework/common/util/NumberUtils"],function(e){var t={};var i=.125;var a=1;t.getBarInfo=function(e,t){var i=1;var a={};if(t.hasOwnProperty("barWidth")){a.barWidth=t.barWidth;if(e===1){a.itemWidth=a.barWidth;a.gap=(i-a.barWidth)/2}else{a.itemWidth=a.barWidth*(1+t.innerGroupSpacing);a.gap=(i-a.itemWidth*(e-1)-a.barWidth)/2}}else if(e===1){a.barWidth=i/(e+t.barSpacing);a.gap=a.barWidth*t.barSpacing/2;a.itemWidth=a.barWidth}else{a.barWidth=i/(e+t.innerGroupSpacing*(e-1)+t.groupSpacing);a.gap=a.barWidth*t.groupSpacing/2;a.itemWidth=a.barWidth*(1+t.innerGroupSpacing)}return a};t.getBarProperties=function(t,r){var o=i;var n=a;if(!r){o=parseFloat(t.get("plotArea.gap.innerGroupSpacing"));if(e.isNoValue(o)||o<0){o=t.getDefault("plotArea.gap.innerGroupSpacing")||0}n=parseFloat(t.get("plotArea.gap.groupSpacing"));if(e.isNoValue(n)||n<0){n=t.getDefault("plotArea.gap.groupSpacing")||0}}var l=parseFloat(t.get("plotArea.gap.barSpacing"));if(e.isNoValue(l)||l<0){l=t.getDefault("plotArea.gap.barSpacing")||0}return{innerGroupSpacing:o,groupSpacing:n,barSpacing:l,forBar:true}};return t});define("sap/viz/chart/components/plots/ItemScaleHandler",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/plots/BarWidthUtils"],function e(t,i,a){function r(e,t){var i=[];var r=a.getBarInfo(e,t);for(var o=0;o<e;o++){i[o]=[r.gap+o*r.itemWidth,r.gap+o*r.itemWidth+r.barWidth]}return i}var o=function(e){this._result=[];this._options=e||{}};o.prototype.updateOptions=function(e){i.extend(true,this._options,e)};o.prototype.init=function(e){var t=this._result=[];var i=1;var a;if(!this._options.hasOwnProperty("barSpacing")){a=[i*.25,i*.75];if(this._options&&this._options.hasOwnProperty("barWidth")){var o=this._options.barWidth/2;a=[i*(.5-o),i*(.5+o)]}}else{a=r(1,this._options)[0]}for(var n=0;n<e;n++){t[n]=a}};o.prototype.get=function(e){return this._result[e]};o.prototype.updateOptions=function(e){i.extend(true,this._options,e)};var n=function(e){n.superclass.constructor.apply(this,arguments);this._options=e||{forBar:true}};t.extend(n,o);n.prototype.init=function(e){if(this._options.isMekkoCategoryAxis){this._result=[];for(var t=0;t<e;t++){this._result[t]=[0,1]}}else if(!this._options.forBar){this._result=[];for(var i=0;i<e;i++){this._result[i]=[i/e,(i+1)/e]}}else{this._result=r(e,this._options)}};n.prototype.get=function(e){return this._result[e]};var l=function(e){l.superclass.constructor.apply(this,arguments);this._items=e.valueAxis};t.extend(l,o);l.prototype.init=function(e){this._result=r(this._items.length,this._options)};l.prototype.get=function(e,t){for(var i=0;i<this._items.length;i++){if(t&&t.hasOwnProperty(this._items[i])){return this._result[i]}}};l.prototype.updateItems=function(e){this._items=e};return{get:function(e,t){if(t&&t.isMekkoCategoryAxis){return new n(t)}else if(e){return new n(t)}else if(t&&t.valueAxis){return new l(t)}else{return new o(t)}},extend:function(e){var i=o;t.extend(e,i);return e}}});define("sap/viz/chart/components/plots/ScaleHandler",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataUtils"],function e(t,i,a,r){var o=function(e,t){this.id=e;this._options=t||{isHorizontal:true}};var n="line";o.prototype.init=function(e,t,i){this._scale=e;this._range=i};o.prototype.scale=function(e,t){return this._scale(e)};o.prototype.destroy=function(){this.id=null;this._options=null;this._range=null;this._scale=null;this.type=null};var l=function(e,t){l.superclass.constructor.apply(this,arguments);this.type="category"};t.extend(l,o);l.prototype.init=function(e,t){l.superclass.init.apply(this,arguments);if(!e){this._scaleByIndex=null;return}var i=e.getDomain();var a=e.scale.bind(e);this._scaleByIndex=[];for(var r=0;r<i.length;r++){this._scaleByIndex[r]=a(i[r])}this._options.itemScaleHandler.init(t)};l.prototype.destroy=function(){l.superclass.destroy.call(this);this._scaleByIndex=null};l.prototype.scale=function(e,t){var i=t.index,a=t.seriesIndex;var r=this._scaleByIndex&&this._scaleByIndex[i]?this._scaleByIndex[i]:[0,1];var o=this._options.itemScaleHandler.get(a,t.rawData)||[0,1];var n=r[1]-r[0];var l=n*(o[1]-o[0])*this._range;var s=(r[0]+n*o[0])*this._range;if(this._options.alignment==="center"){return[s+l/2,0]}else{return[s,l]}};var s=function(e,t){s.superclass.constructor.apply(this,arguments);this.type="polar"};t.extend(s,l);s.prototype.scale=function(e,t){var i=t.index,a=t.seriesIndex;var r=this._scaleByIndex?this._scaleByIndex[i]:[0,1];return[Math.PI*2*r[0],0]};s.prototype.categorySum=function(e,t){return this._scaleByIndex.length};var u=function(e,t){u.superclass.constructor.apply(this,arguments);this.type="value";this.continuous=true};t.extend(u,o);u.prototype.scale=function(e,t){e=+e;var i=t.index,a=t.seriesIndex,r=t.dataHandler;var o=this._scale.scale(r?r.getBase(i,e,a):0);var n=r?r.add(i,e,a):e;var l=this._scale.scale(n);var s=(l-o)*this._range;if(this._options.isHorizontal){if(this._options.alignment==="right"){return[l*this._range,s]}else{return[o*this._range,s]}}else{return[(1-l)*this._range,s]}};var c=function(e,t){c.superclass.constructor.apply(this,arguments);this.type="value";this.continuous=true};t.extend(c,o);c.prototype.scale=function(e,t){var i=t.index,a=t.seriesIndex,r=t.dataHandler;var o,n,l,s;var u,c,h,p,d,f;e=+e;h=this._scale.getAutoDomain();p=this._scale.getDomain();d=this._scale.getDomainFixed();f=this._scale.getRange();u=d[0]?p[0]:h[0];c=d[1]?p[1]:h[1];if(u>=c){u=h[0];c=h[1]}if(e<u){o=f[0]}else if(e>c){o=f[1]}else{o=this._scale.scale(r?r.getBase(i,e,a):0)}n=r?r.add(i,e,a):e;if(n>c){l=f[1]}else if(n<u){l=f[0]}else{l=this._scale.scale(n)}s=(l-o)*this._range;if(this._options.isHorizontal){if(this._options.alignment==="right"){return[l*this._range,s]}else{return[o*this._range,s]}}else{return[(1-l)*this._range,s]}};var h=function(e,t){h.superclass.constructor.apply(this,arguments);this.type="time"};t.extend(h,u);h.prototype.scale=function(e,t){var i=t.index,a=t.dataHandler;var r=a?a.add(i,e):e;var o=this._scale.scale(r);return[o*this._range,0]};var p=function(e,t){p.superclass.constructor.apply(this,arguments);this.type="time";this._barWidth=null;this._innerSpace=null;this._columnCount=null;this._isSingleBar=t.forSingleBar};t.extend(p,u);p.prototype.scale=function(e,t){var i=t.index,a=t.dataHandler;var r=this._options;var o=r.minTimeLevel;var l=r.showAsUTC;var s=a?a.add(i,e):e;var u=this._scale.scale(s);var c;if(this._isSingleBar){c=this._barWidth/2}else{c=(this._columnCount*this._barWidth+(this._columnCount-1)*this._innerSpace)/2-t.seriesIndex*(this._barWidth+this._innerSpace)}return[(u-(t.shape===n?0:c))*this._range,this._barWidth*this._range]};p.prototype.updateBarWidth=function(e,t,i){this._barWidth=e;this._innerSpace=t;this._columnCount=i};var d=function(e,t){u.superclass.constructor.apply(this,arguments);this.type="value";this.continuous=true};t.extend(d,o);d.prototype.scale=function(e,t){var i=t.index,a=t.seriesIndex,r=t.dataHandler;var o=+e.value;var n=e.total;var l=e.base;var s=this._scale.scale(r?r.getBase(i,l,a):l);var u=r?r.add(i,o,a):o;var c=this._scale.scale(r?u:n);var h=(c-s)*this._range;if(this._options.isHorizontal){if(this._options.alignment==="right"){return[c*this._range,h]}else{return[s*this._range,h]}}else{return[(1-c)*this._range,h]}};return{getCategoryScaleHandler:function(e,t){return new l(e,t)},getValueScaleHandler:function(e,t){return new u(e,t)},getTimeScaleHandler:function(e,t){if(t.forBar){return new p(e,t)}else{return new h(e,t)}},getPolarScaleHandler:function(e,t){return new s(e,t)},getPerfectValueScaleHandler:function(e,t){return new c(e,t)},getWTFScaleHandler:function(e,t){return new d(e,t)},extend:function(e){var i=o;t.extend(e,i);return e}}});define("sap/viz/chart/components/renderers/BarRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/Constants"],function(e,t,i,a){var r=2;var o=function(i){var a;var o=i.graphic;var n=o.width<1&&o.width!==0?1:o.width;var l=o.height<1&&o.height!==0?1:o.height;var s=o.fill;if(o.pattern==="noFill"&&i.path){a=e.create("path");a.setAttribute("d",i.path);a.setAttribute("stroke-width",isNaN(o.pathStrokeWidth)?3:o.pathStrokeWidth);a.setAttribute("fill",o.bgColor);a.setAttribute("stroke",o.fill)}else{a=e.create("rect");if(i.effectManager){s=i.effectManager.register({drawingEffect:o.drawingEffect,fillColor:o.fill,patternEffect:o.pattern,isNegative:o.isNegative,direction:i.horizontal?"vertical":"horizontal"})}a.setAttribute("width",n);a.setAttribute("height",l);a.setAttribute("fill",s);if(o.shapeRendering){a.setAttribute("shape-rendering",o.shapeRendering)}if(o.stroke){var u=i.twoDirection?Math.min(l,n):i.horizontal?l:n;var c=u>o.strokeWidth+r?o.strokeWidth:u-r;if(c>=1){a.setAttribute("stroke",o.stroke);a.setAttribute("stroke-width",o.strokeWidth)}}}t.setCustomizationInfo(a,{defaultRenderer:true});return a};o.update=function(e,t){var a=t.graphic;var r=a.width<1&&a.width!==0?1:a.width;var o=a.height<1&&a.height!==0?1:a.height;var n={width:r,height:o,minSize:t.twoDirection?Math.min(o,r):t.horizontal?o:r};i.barUpdate(e,t,n)};o.expose={renderer:o,update:o.update};return o});define("sap/viz/chart/components/renderers/GridlineRenderer",["sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/scales/ValueScaleUtil","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r){var o=t.CSS.CLASS.GRIDLINE_GROUP;var n=t.CSS.CLASS.GRIDLINE;var l=t.CSS.CLASS.GRIDLINE_INCISED;var s="#ffffff";var u=t.CSS.CLASS.ZERO_LINE_GROUP;var c="v-zeroline";var h="v-gridline-mainline";var p="v-gridline-incisedline";var d={};d.drawZeroLine=function(a,o,n,l,s,h,p,d){var f;var v=s.get("gridline.zeroLine.highlight");if(!v){return}var g=i.getTicks(l);var m=g.indexOf(0);if(m<1){f=a.select("."+u);if(!f.empty()){f.remove()}return}var y=s.get("gridline.zeroLine.color")||p;y=y||s.origin.get("categoryAxis.color");f=a.select("."+u);var _,A;if(!f.node()){f=a.append("g").attr("class",u).style("pointer-events","none")}_=f.select("."+c);if(!_.node()){_=f.append("g").attr("class",c);A=_.append("line")}else{A=_.select("line")}f.attr("stroke",y).attr("stroke-width",s.get("gridline.size")||1).attr("shape-rendering","crispEdges");if(s.get("gridline.type")===t.GRIDLINE_TYPE.DASHED||s.get("gridline.type")===t.GRIDLINE_TYPE.DOTTED){f.attr("stroke-dasharray",t.DASH_TYPE_ARRAY)}else{f.node().removeAttribute("stroke-dasharray")}var b=a.node().getElementsByTagName("clipPath");if(b&&b.length>0){var x=b[0].getAttribute("id");f.attr("clip-path","url(#"+x+")")}var S,D,w,C;var T=e.preciseSimple(l.scale(0));var z={};if(h===t.DIRECTION.HORIZONTAL){S=0;D=e.preciseSimple(o);w=C=!d?T:0;if(d){_.attr("transform","translate("+0+", "+T+")")}z.initPosY=T}else{w=0;C=e.preciseSimple(n);S=D=!d?T:0;if(d){_.attr("transform","translate("+T+", "+0+")")}z.initPosX=T}A.attr("x1",S).attr("x2",D).attr("y1",w).attr("y2",C);if(d){r.setData(_.node(),z)}};d.drawValueGridline=function(r,l,u,c,d,f){var v=r.select("."+o);if(d.get("visible")){var g=d.get("color");var m=d.get("size");var y=i.getTicks(c);var _=i.getTicksPosition(y,c);var A=0;var b=_.length;var x=[];var S=[];var D=[];var w=[];switch(f){case t.DIRECTION.HORIZONTAL:for(;A<b;++A){x[A]=0;S[A]=_[A];D[A]=e.preciseSimple(l);w[A]=_[A]}break;case t.DIRECTION.VERTICAL:for(;A<b;++A){x[A]=_[A];S[A]=0;D[A]=_[A];w[A]=e.preciseSimple(u)}break}if(!v.node()){v=r.append("g").attr("class",o)}var C=v.selectAll("."+n).data(y);C.enter().append("g");C.exit().remove();var T=d.get("zeroLine.unhighlightAxis");var z=d.origin.get("valueAxis.layout.direction")==="topDown";C.each(function(e,t){this.setAttribute("class",n);this.setAttribute("stroke",g);this.setAttribute("stroke-width",m);this.setAttribute("shape-rendering","crispEdges");var i=this.querySelector("line."+h);if(!i){i=a.create("line");i.setAttribute("class",h);this.appendChild(i)}i.setAttribute("x1",x[t]);i.setAttribute("y1",S[t]);i.setAttribute("x2",D[t]);i.setAttribute("y2",w[t]);if((!z&&t===0||z&&t===b-1)&&e!==0&&T===false){i.setAttribute("stroke-opacity",0)}});var L=d.get("type");if(L===t.GRIDLINE_TYPE.DASHED||L===t.GRIDLINE_TYPE.DOTTED){C.attr("stroke-dasharray",t.DASH_TYPE_ARRAY)}if(L===t.GRIDLINE_TYPE.INCISED){switch(f){case t.DIRECTION.HORIZONTAL:C.each(function(e,t){var i=this.querySelector("line."+p);if(!i){i=a.create("line");i.setAttribute("class",p);this.appendChild(i)}i.setAttribute("stroke",s);i.setAttribute("x1",x[t]);i.setAttribute("y1",S[t]+1);i.setAttribute("x2",D[t]);i.setAttribute("y2",w[t]+1)});break;case t.DIRECTION.VERTICAL:C.each(function(e,t){var i=this.querySelector("line."+p);if(!i){i=a.create("line");i.setAttribute("class",p);this.appendChild(i)}i.setAttribute("stroke",s);i.setAttribute("x1",x[t]-1);i.setAttribute("y1",S[t]);i.setAttribute("x2",D[t]-1);i.setAttribute("y2",w[t])});break}}}else{v.remove()}};d.drawRadarGridLine=function(e,t,i,r,n){if(!n.visible){return}var l=e.select("."+o);if(!l.node()){l=e.append("g").attr("class",o)}var s=n.color;var u=n.size;var c=f(r);function h(e,t,i){if(i===0){return}var a=i*Math.sin(t);var r=i*Math.cos(t);return{x:e.x-a,y:e.y-r}}for(var d=0;d<c.length;d++){if(c[d]===0){continue}var v=a.create("g");var g=[];for(var m=0;m<i.length;m++){var y=a.create("line");y.setAttribute("class",p);y.setAttribute("stroke",s);y.setAttribute("stroke-width",u);var _=m===0?h(t,i[i.length-1],c[d]):g[m-1];var A=h(t,i[m],c[d]);g.push(A);y.setAttribute("x1",_.x);y.setAttribute("y1",_.y);y.setAttribute("x2",A.x);y.setAttribute("y2",A.y);v.appendChild(y)}l.node().appendChild(v)}};function f(e){var t=i.getTicks(e);return i.getTicksPosition(t,e)}return d});define("sap/viz/chart/components/plots/BaseColumnPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/Constants","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/model/DataPointInfo","sap/viz/chart/components/plots/model/Series","sap/viz/chart/components/renderers/BarRenderer","sap/viz/chart/components/renderers/GridlineRenderer","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/plots/BarWidthUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/container/utils/xyTransformUtils","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/util/DrawUtil"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D){var w="negative-datapoint";var C={desktop:{minWidth:8,maxWidth:100},mobile:{minWidth:8,maxWidth:100}};var T=o.MIN_FILL_SIZE;var z=function(e,t){t=t||{isHorizontal:false};this._valueAxisIndex=t.valueAxisIndex||"valueAxis";z.superclass.constructor.apply(this,arguments);this._dataPointRenderer=p;this._flipNegativeShape=true;this._drawZeroLineBeforeDatapoints=true;this._isBigData=false};t.extend(z,n);z.prototype._getBarProperties=function(){if(!this._barInfoProperties){this._barInfoProperties=A.getBarProperties(this._properties.origin)}return this._barInfoProperties};z.prototype.destroy=function(){z.superclass.destroy.call(this);if(this._categoryScaleHandler){this._categoryScaleHandler.destroy()}this._categoryScaleHandler=null;if(this._gridlineScale){this._gridlineScale.destroy()}this._gridlineScale=null;this._dataPointRenderer=null;this._flipNegativeShape=null;this._drawZeroLineBeforeDatapoints=null;this._options=null;this._isBigData=null};z.prototype.isBigDataMode=function(){return this._isBigData};z.prototype.setVisibleWindow=function(e,t){this._windowSize=e;this._positionInWindow=t;this._applyScroll()};z.prototype._getDataPointRange=function(e,t){var i=t.min;var a=t.max;var r=this.isHorizontal()?"y":"x";var o;if(e[i]&&i>0){o=this._getDataPointPosition(e[i]);if(o[r]>=-this._offset[r]){--i}}while(i>0&&!e[i]){--i}if(a<e.length-1&&e[a]){o=this._getDataPointPosition(e[a]);if(o[r]<this._visibleBound[r]){++a}}while(a<e.length-1&&!e[a]){++a}return{min:i,max:a}};z.prototype._getColorData=function(){return this._data.color};z.prototype._getColor2Data=function(){return this._data.color2};z.prototype._buildLegendTextData=function(e){var t=e.length;var i=[];var a;var r;for(a=0;a<t;a++){r=e[a];var o;for(o=0;o<r.length;o++){if(r[o]){if(r[o].color){i.push(r[o].color)}else{i.push(r[o].color2)}break}}}return i};z.prototype._getOnlyOneMndIndex=function(e,t){var i=-1;if(!this._options.inTrellis){var a;if(e.length>0&&e[0].color){a=this._getColorData()}else if(e.length>0){a=this._getColor2Data()}if(a){i=y.checkMndStatus(a.metaData,t).mndIndex}}return i};z.prototype._getMaxVisibleSize=function(){var e=this._windowSize||this._size;return{width:e.width,height:e.height}};z.prototype._preShowDataPoints=function(){z.superclass._preShowDataPoints.apply(this,arguments);var e=this._offset;var t=e.hasOwnProperty("x")?e.x:0;var i=e.hasOwnProperty("y")?e.y:0;if(this._positionInWindow){t+=this._positionInWindow.hasOwnProperty("x")?this._positionInWindow.x:0;i+=this._positionInWindow.hasOwnProperty("y")?this._positionInWindow.y:0}var a=this._getMaxVisibleSize();this._visibleBound={x:a.width-t,y:a.height-i}};z.prototype._drawDataPoint=function(e,t){var i=t.getConfig();var a=z.superclass._drawDataPoint.apply(this,arguments);this._updateStrokeWidth(a);if(this._flipNegativeShape){var r=t.getConfig();if(r.ctx){var o=r.ctx[r.ctx.measureNames]<0;if(o){this._addNegativeClass(a,r)}}}return a};z.prototype._addNegativeClass=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","g");for(var a=0,r=e.childNodes.length;a<r;++a){i.appendChild(e.childNodes[0])}i.setAttribute("class",w);this._updateNegativeDatapoint(t,i);e.appendChild(i)};z.prototype._generateMarkerPath=function(){var e=this._markerPropName&&this._properties.get(this._markerPropName);if(e){var t=e.size/2;this._markerD=D.createMarkerData({type:this._getMarkerShape(),rx:t,ry:t,borderWidth:2});this._markerShadow=D.createMarkerData({type:this._getMarkerShape(),rx:t+.8,ry:t+.8,borderWidth:1,innerBorder:true})}};z.prototype._updateNegativeDatapoint=function(e,t){var i;if(this.isHorizontal()){i="translate("+(e.graphic.width>1?e.graphic.width:1)+",0)scale(-1, 1)"}else{i="translate(0,"+(e.graphic.height>1?e.graphic.height:1)+")scale(1, -1)"}t.setAttribute("transform",i)};z.prototype.isHorizontal=function(){return this._options.isHorizontal===true};z.prototype._getPreferredSizeProperties=function(e){var t=this._properties;return t.get(e)};z.prototype._getValueScaleHandlers=function(e){if(this._options.isDualValueAxis){return[u.getValueScaleHandler("valueAxis",{isHorizontal:e}),u.getValueScaleHandler("valueAxis2",{isHorizontal:e})]}else{return[u.getValueScaleHandler(this._valueAxisIndex,{isHorizontal:e})]}};z.prototype._getCategoryScaleHandlers=function(e){this._categoryScaleHandler=u.getCategoryScaleHandler("categoryAxis",{isHorizontal:e,itemScaleHandler:s.get(true,this._getBarProperties())});return[this._categoryScaleHandler]};z.prototype._getXHandlers=function(){if(this.isHorizontal()){return this._getValueScaleHandlers(true)}else{return this._getCategoryScaleHandlers(true)}};z.prototype._getYHandlers=function(){if(this.isHorizontal()){return this._getCategoryScaleHandlers(false)}else{return this._getValueScaleHandlers(false)}};z.prototype._getDataHandler=function(){if(this._options.isDualValueAxis){return{valueAxis:l.getHandler(),valueAxis2:l.getHandler()}}else{var e={};e[this._valueAxisIndex]=l.getHandler();return e}};z.prototype._getDefaultZeroLineColor=function(){return this._properties.origin.get("categoryAxis.color")};z.prototype._postRender=function(e){if(!this._drawZeroLineBeforeDatapoints&&this._gridlineScale){var t=this.isHorizontal();var i=t?o.DIRECTION.VERTICAL:o.DIRECTION.HORIZONTAL;d.drawZeroLine(this._selection,this._size.width,this._size.height,this._gridlineScale,this._properties,i,this._getDefaultZeroLineColor(),true)}z.superclass._postRender.apply(this,arguments)};function L(e){var t=-1;for(var i=0;i<e.length;i++){if(e[i]){t=i;break}}return t}function P(e){var t=-1;for(var i=e.length-1;i>=0;i--){if(e[i]){t=i;break}}return t}z.prototype._resetDataPoints=function(){for(var e in this._dataHandler){if(this._dataHandler[e].reset){this._dataHandler[e].reset()}}if(!this._series||this._series.length===0){return}for(var t=0;t<this._series.length;t++){var i=this._series[t];if(!i){continue}var a=i.getDataPoints();this._hideDataPoints(a,{min:0,max:a.length-1});for(var r=0;r<a.length;r++){var o=a[r];if(o){o.reset()}}}};z.prototype._getDataPointPosition=function(e){var t=e.getPosition();if(!t){t=this._getPosition(e.getSeriesIndex(),e.getItemIndex(),e.getRawData());e.setPosition(t)}return t};z.prototype._needLazyRender=function(){if(!!this._options.inTrellis){return true}var e=this._size;var t=this._realSize;return this.isHorizontal()?e.height<t.height:e.width<t.width};z.prototype._getVisibleRange=function(e){var t=this._getCategoryCount();if(!this._needLazyRender()){return{min:0,max:t}}var i=this.isHorizontal();var a=i?"y":"x";var r=this._offset[a];var o=this._visibleBound;var n=i?"height":"width";var l=this._realSize[n]/t;var s=Math.floor(Math.abs(r/l));var u=Math.floor(Math.abs(o[a])/l);return{min:s,max:u}};z.prototype._initSeries=function(){var e=this._getSeries();var t=e.length;var i;var a=0;if(this._seriesRenderer){this._seriesRenderer.init(t)}for(var r=0;r<t;r++){var o=e[r];if(!o){continue}var n=o.length,l=null;for(var s=0;s<n;++s){var u=o[s];if(!u){continue}i=a++;this._series[r]=this._series[r]||new h;var p=this._series[r].getDataPoint(s);if(p){p.reset();p.setRawData(u)}else{p=new c(r,s,u,i);this._series[r].setDataPoint(s,p)}}if(this._series[r]){this._series[r].setLength(n)}}this._series.length=t};z.prototype._drawDatapoints=function(e){this._initSeries();for(var t in this._dataHandler){if(this._dataHandler[t].reset){this._dataHandler[t].reset()}}this._drawingEffect=this._properties.get("drawingEffect");var a=e.node().querySelector("."+o.CSS.CLASS.DATAPOINT_GROUP);if(!a){a=i.create("g");a.setAttribute("class",o.CSS.CLASS.DATAPOINT_GROUP);e.node().appendChild(a)}else{d3.select(a).selectAll("*").remove()}this._showDataPoints(a);if(this._seriesRenderer){this._seriesRenderer.render(a)}this._postRender(a);this._drawDataLabels(e,a)};z.prototype._isSupportNoFill=function(){return true};var k=["noFill","solid"];z.prototype.getSeriesDPStyle=function(e,t,i){var a=this._semanticMgr;t=t||S.buildSeriesLineContext(this._data,e);var r=a.analyzeSeriesStyle(t,"dataPoint");var o=r&&r.dataPoint&&r.dataPoint.pattern;if(i&&k.indexOf(o)===-1){o=null}if(!this._isSupportNoFill()&&o==="noFill"){o=null}return{dpPattern:o,color:r&&r.dataPoint&&r.dataPoint.color}};z.prototype._hideNode=function(e,t){var i=e[t];var r=i&&i.getNode();if(r){a.remove(r);i.setNode(null)}};z.prototype._columnOutOfRange=function(e,t){var i;for(i=0;i<t.min;i++){this._hideNode(e,i)}for(i=t.max+1;i<e.length;i++){this._hideNode(e,i)}};z.prototype._hideDataPoints=function(e,t){if(!t){var i=e.length;t={min:i,max:i}}this._columnOutOfRange(e,t)};z.prototype._generatePath=function(e){var t=[];var a=1.5;if(this.isHorizontal()){if(e.width===0){a=0}t.push([0,a]);t.push([e.width-a,a]);t.push([e.width-a,e.height-a]);t.push([0,e.height-a])}else{if(e.height===0){a=0}t.push([a,e.height]);t.push([a,a]);t.push([e.width-a,a]);t.push([e.width-a,e.height])}return i.generatePath({points:t})};z.prototype._pathStrokeWidth=function(e){if(e&&e[e.measureNames]===0){return 0}return 3};z.prototype._isSupportBarPathGenerator=function(){return false};z.prototype._showDataPoints=function(e){this._preShowDataPoints();var t=[];this._dataPointContext=[];if(this._seriesRenderer){this._seriesRenderer.resetDataPoints()}var i;if(this._data.color&&this._data.color.metaData&&!this._data.color2){var a=y.checkMndStatus(this._data.color.metaData,this._data.color.rowArray);if(a.isOnlyOneMndValue){i=a.mndIndex}}var r=this.createSeriesIterator(this._series.length);var n=this._getVisibleRange();while(r.hasNext()){var l=r.next();var s=this._series[l];if(!s){continue}var u=this._getDataPointRenderer(l);if(!u){continue}var c=s.getDataPoints();var h=this._getDataPointRange(c,n);this._hideDataPoints(c,h);var p=this.getSeriesDPStyle(l);for(var d=h.min;d<=h.max;d++){var f=c[d];if(!f){continue}var v=this._getDataPointPosition(f);if(!v){continue}var g=f.getRawData();var m=g.dp;var _=false;var A=f.getConfig();if(!A){_=true;var b=m&&m.context()?m.context():o.NULL_VALUE;var x=this._seriesType&&this._seriesType[l];var S={itemIndex:d,seriesType:x,seriesStyle:p};A=this._buildWrapperConfig(g,v,b,S);if(A.graphic.pattern==="noFill"){if(this._isSupportBarPathGenerator()&&x==="bar"){A.path=this._generatePath(A.graphic)}}}this._dataPointContext.push(A);var D=f.getData();if(!D){_=true;var w=f.getId();D=this._buildData(A);f.init(A,w,D,m&&m.id?m.id:o.NULL_VALUE,i)}var C=f.getNode();if(C){if(_){this._updateDatapoint(C,u,A,v);t.push(C)}}else{C=this._drawDataPoint(u,f);f.setNode(C);if(C){t.push(C)}}this._updateStrokeWidth(C);if(this._seriesRenderer){this._seriesRenderer.addDataPoint(r.index(),d,A,v,C)}else if(!C.parentNode){e.appendChild(C)}}}return t};z.prototype.zoom=function(){this.update()};z.prototype.update=function(e){this._applyChanges();this._dataLabels.setSize(this._realSize);if(this._selection){var t=this._selection.select(".v-plot-main");this._drawGridlines(t);this._updateDatapoints(this._getDpParentNode());this._drawReferenceLine(e);this._repositionReferenceLine();this._repositionZeroline()}};z.prototype._updateStrokeWidth=function(e){if(!e){return}var t=f.getData(e);var i=e.querySelector("rect");if(i){t["strokeWidth"]=i.getAttribute("stroke-width")||0;f.setData(e,t)}};z.prototype._updateDatapoints=function(e){this._resetDataPoints();var t=e.select("."+o.CSS.CLASS.DATAPOINT_GROUP).node();var i=this._showDataPoints(t);if(this._seriesRenderer){this._seriesRenderer.update(t)}this._dataLabels.updatePosition(e,i)};z.prototype._updateDatapoint=function(e,t,i,a){if(e&&t.update&&_.isFunction(t.update)){t.update(e,i,this._dataPointRenderer.expose)}if(e&&a.hasOwnProperty("x")&&a.hasOwnProperty("y")){e.setAttribute("transform","translate("+a.x+", "+a.y+")")}var r=null;if(i.ctx){r=i.ctx[i.ctx.measureNames]<0}else{var o=this._data.rawData.dataModel;var n=o.getDataPoint(i.dataId);var l=n.context();r=l[l.measureNames]<0}if(r){var s=e.querySelector("."+w);if(s){this._updateNegativeDatapoint(i,s)}}};z.prototype._drawGridlines=function(e){var t=this._realSize;var i=this.isHorizontal();var a=i?o.DIRECTION.VERTICAL:o.DIRECTION.HORIZONTAL;var r=this._properties.proxy("gridline");var n=i?[0,t.width]:[t.height,0];var l=this._gridlineScale=this._getGridLineScale(n);d.drawValueGridline(e,t.width,t.height,l,r,a);var s=this._properties.origin.get("interaction.syncValueAxis");if(this._drawZeroLineBeforeDatapoints||s){d.drawZeroLine(this._drawZeroLineBeforeDatapoints?e:this._selection,t.width,t.height,this._gridlineScale,this._properties,a,this._getDefaultZeroLineColor(),!this._drawZeroLineBeforeDatapoints)}};z.prototype._getGridLineScale=function(e){var t=this._valueAxisIndex;if(this._options.isDualValueAxis&&this._data.valueAxis.tickHint<this._data.valueAxis2.tickHint){t="valueAxis2"}var i=this._data[t];var a=new r(i.scale.getDomain(),e);a.setTickHint(i.tickHint);a.setAllowDecimals(i.scale.getAllowDecimals());return a};z.prototype._getPosition=function(e,t,i){var a=z.superclass._getPosition.apply(this,arguments);this._adjustPosition(a,e);return a};z.prototype._adjustPosition=function(e,t){var i=this.isHorizontal(),a=0;if(i){if(e.width<0){if(e.width>-T){e.width=T}else{e.width=Math.abs(e.width)}e.x-=e.width}else if(e.width>0&&e.width<T){e.width=T}}else{if(e.height<0){if(e.height>-T){a=T-Math.abs(e.height);e.height=T}else{e.height=Math.abs(e.height)}e.y-=e.height-a}else if(e.height>0&&e.height<T){a=T-e.height;e.height=T;e.y-=a}}};z.prototype._buildConfig=function(e,t,i){var a=z.superclass._buildConfig.apply(this,arguments);a.horizontal=this.isHorizontal();return a};z.prototype._getColumnCount=function(){return this._data.series.length};z.prototype._getColumnWidth=function(e,t,i){var a=1;var r=i?this._size.height/t:this._size.width/t;var o=A.getBarInfo(e,this._getBarProperties());return r*o.barWidth};z.prototype._updateRealSize=function(e,t,i,a){var r=this.getRealSizeByFixedDPSize(i,e,t);this._realSize[a?"height":"width"]=r};z.prototype._getCategoryCount=function(){var e=this._data.categoryAxis;return e?e.scale.getDomain().length:1};z.prototype.getPreferredSize=function(){var e=this._properties;var t=!!this._options.inTrellis;var i=this.isHorizontal();var a=this._getCategoryCount();var r=this._getCategoryRange()||this._getTimeRange();var o=this._getColumnCount();this._showSrollbar=false;var n=this._getPreferredSizeProperties("dataPointSize.max")||e.getDefault("dataPointSize.max");var l,s;var u=!!this._data.timeAxis;var c=!e.origin.get("interaction.noninteractiveMode");var h=this._isRangeIncomplete;function p(){return!u&&r&&!h(r)&&c}if(!p()){var d=this._getColumnWidth(o,a,i);var f=g.isMobile()?C.mobile:C.desktop;var v=t?f.minWidth:this._getPreferredSizeProperties("dataPointSize.min")||e.getDefault("dataPointSize.min");n=t?f.maxWidth:n;if(!t&&v>n){n=e.getDefault("dataPointSize.max");v=e.getDefault("dataPointSize.min")}var m=false;if(d<v&&c){m=true;d=v}else if(d>n){d=n;this._updateBarWidth(n)}if(m&&(t||h(r)||this._getPreferredSizeProperties("isFixedDataPointSize"))){this._updateRealSize(o,a,d,i)}if(h(r)&&this._shiftOffsetForIncompleteRange(r,a)){return this.getRealSize()}}if(p()){var y=r[1]-r[0]+1;var _=this._getColumnWidth(o,y,i);var A=this._getColumnWidth(o,a,i);if(_>n){_=n;if(A<n){this._updateRealSize(o,a,_,i);var b;if(i){b=this._size.height/this._realSize["height"]*a}else{b=this._size.width/this._realSize["width"]*a}if(b>a-r[0]){r[0]=a-b}}else{l=i?this._size.height/a:this._size.width/a;s=_/l;this._categoryScaleHandler._options.itemScaleHandler.updateOptions({barWidth:s});r[0]=0}}else{if(i){this._realSize["height"]=this._size.height*a/y}else{this._realSize["width"]=this._size.width*a/y}}if(i){this._offset["y"]=-r[0]/a*this._realSize["height"]}else{this._offset["x"]=-r[0]/a*this._realSize["width"]}}return this.getRealSize()};z.prototype._updateBarWidth=function(e){var t=this._getCategoryCount();var i=this.isHorizontal();var a=i?this._size.height/t:this._size.width/t;var r=e/a;this._categoryScaleHandler._options.itemScaleHandler.updateOptions({barWidth:r})};z.prototype._buildWrapperConfig=function(e,t,i,a){var r=z.superclass._buildWrapperConfig.apply(this,arguments);var o=r.graphic;if((o.width<1||o.height<1)&&o.width!==0&&o.height!==0){o.shapeRendering="crispEdges"}return r};z.prototype._getDataRange=function(e,t){var i=this._data.categoryAxis;var a={displayValues:{start:e,end:t}};if(i){var r=i.scale.getDomain();var o=i.metaData;var n=Math.floor(e*r.length/100);var l=Math.ceil(t*r.length/100);var s=[];for(var u=n;u<l;++u){var c={};for(var h=0;h<o.length;++h){c[o[h].id]=r[u][h]}s[u-n]=c}var p=y.getDisplayTextsConverter(o);var d=p(r[n])[0];var f=p(r[l-1])[0];a={displayValues:{start:d,end:f},data:s}}return a};z.prototype.getRealSizeByFixedDPSize=function(e,t,i){t=t||this._getColumnCount();i=i||this._getCategoryCount();var a=A.getBarInfo(t,this._getBarProperties());return e*i/a.barWidth};z.prototype._repositionZeroline=function(){if(!this._selection){return}var e=this._selection.node().querySelectorAll(".v-zeroline"),t=this.runtime().statusManager().get("plot.transform.scale"),i=this.runtime().statusManager().get("plot.transform.translate");for(var a=0;a<e.length;a++){x.adjustXYTranslate(e[a],t,i)}};z.prototype.scroll=function(){this._semanticMgr.beginSession();z.superclass.scroll.apply(this,arguments);this._repositionZeroline();this._semanticMgr.endSession()};z.prototype._getDpPlotNode=function(){if(this._selection){return this._dpPlotNode||this._selection.node()}};z.prototype._getDpParentNode=function(){return this._dpParentNode||this._plotDpParentNode};z.prototype._getMarkerShape=function(){var e=this._properties.get("marker.shape")||this._properties.get("line.marker.shape");if(o.LINE_MARKER_SHAPE.indexOf(e)===-1){e=this._properties.getDefault("marker.shape")||this._properties.getDefault("line.marker.shape")}return e};z.prototype._getLegendMarkerShape=function(){var e=this._properties.origin.get("legend.marker.shape");if(o.LEGEND_MARKER_SHAPE.indexOf(e)===-1){e=this._properties.origin.getDefault("legend.marker.shape")}return e};return z});define("sap/viz/chart/components/datalabels/ColumnDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/datalabels/DataLabels","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments);this._labelPosition="outside"};e.extend(o,a);o.prototype.labelOffset=r.DATALABEL.VERTICAL_LABEL_OFFSET;o.prototype.allowIntersectionCheck=function(){return false};o.prototype.hideConditional=function(e,a){var r;var n=new Array(a.length);for(r=0;r<a.length;r++){n[r]=a[r].getBoundingClientRect()}for(r=e.length-1;r>=0;r--){var l=e[r];var s=l.node;var u=s.getBoundingClientRect();var c=l.dataPoint;var h=i.getData(c).dataLabelLocation;if(h==="inside"){if(u.width-2*this.labelOffset>n[r].width||u.height>n[r].height){t.remove(s);e.splice(r,1);continue}}if(!this.allowIntersectionCheck(c)){var p=this.indexOfDataLabelIntersectDataPoints(u,n,a,c);if(p!==-1){t.remove(s);e.splice(r,1)}}}return o.superclass.hideConditional.apply(this,arguments)};o.prototype._computeDataLabelPosition=function(e,t,a,r,o,n){this._labelPosition=this._properties.get("position")||this._properties.getDefault("position");var l=1;var s;var u,c;var h=t.x+e.e;var p=t.y+e.f;u=h+t.width/2-(r.x+r.width/2);if(o.val===0){c=p-(r.y+r.height)+this.labelOffset;if(c+r.y<0){c=p-r.y-this.labelOffset}}else if(this._labelPosition==="inside"){if(o.val>=0){c=p+r.height+(r.y+r.height/2)-this.labelOffset}else{c=p+t.height+this.labelOffset-(r.y+r.height)}}else{if(o.val>=0){if(this._labelPosition==="outsideFirst"){c=p-(r.y+r.height)-l;if(c<r.height){c=p+r.height+(r.y+r.height/2)-this.labelOffset;s=i.getData(n);s.dataLabelLocation="inside";i.setData(n,s)}}else{c=p-(r.y+r.height);if(c+r.y+this.labelOffset>=0){c=c+this.labelOffset}else if(c+r.y>=0){c=-r.y}}}else{if(this._labelPosition==="outsideFirst"){c=p+t.height-r.y+l;if(c>o.plotSize.height){c=p+t.height-r.height-r.y+this.labelOffset;s=i.getData(n);s.dataLabelLocation="inside";i.setData(n,s)}}else{c=p+t.height-r.y;if(c+r.height+r.y-this.labelOffset<=o.plotSize.height){c=c-this.labelOffset}else if(c+r.height+r.y<=o.plotSize.height){c=o.plotSize.height}}}}return[u,c]};o.prototype._processDataLabelRendererConfig=function(e,t){o.superclass._processDataLabelRendererConfig.apply(this,arguments);var i=this._getMarkFromNode(t),a;if(i&&e.dataPointWidth===0&&e.dataPointHeight===0){a=this._getDataLabelSizeFromMark(i);if(a){e.dataPointWidth=a.width;e.dataPointHeight=a.height}}};o.prototype._getMarkFromNode=function(e){if(!e){return null}var t=d3.select(e).select("rect:first-child");return t.empty()?null:t.node()};return o});define("sap/viz/chart/components/renderers/SeriesRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/TypeUtils"],function e(t,i){var a=function(e,t){this._renderFn=e;this._updateFn=t};a.prototype.init=function(e){this._series=[];this._seriesGroup=[];for(var i=0;i<e;i++){this._seriesGroup[i]=t.create("g")}};a.prototype.resetDataPoints=function(){this._series=[]};a.prototype.addDataPoint=function(e,t,i,a,r){if(r){this._seriesGroup[e].appendChild(r)}this._series[e]=this._series[e]||[];this._series[e][t]={position:a,dpConfig:i,dataPoint:r}};a.prototype.updateDataPoint=function(e,t,i,a,r){if(!this._series[e]){this._series[e]=[]}var o=this._series[e][t];if(!o){o=this._series[e][t]={}}o.position=a;o.dpConfig=i;o.dataPoint=r};a.prototype.render=function(e,t){var a=[],r,o;for(var n=0;n<this._seriesGroup.length;n++){o=this._seriesGroup[n];if(o&&!(t&&t.indexOf(n)<0)){r=this._series[n]||[];var l=this._renderSeries(o,r,n);if(i.isNaN(l)){l=0}a[l]=a[l]||[];a[l].push(o)}}for(var s=0;s<a.length;s++){var u=a[s];if(!u||!u.length){continue}for(var c=0;c<u.length;c++){e.appendChild(u[c])}}};a.prototype.update=function(e){for(var t=0;t<this._seriesGroup.length;t++){if(this._series[t]){this._updateSeries(this._seriesGroup[t],this._series[t],t)}}};a.prototype._updateSeries=function(e,t,i){if(this._updateFn&&t&&t.length){this._updateFn(e,t,i)}};a.prototype._renderSeries=function(e,t,i){if(this._renderFn&&t&&t.length){return this._renderFn(e,t,i)}return 0};return a});define("sap/viz/chart/components/renderers/LineRenderer",["sap/viz/framework/common/util/SVG"],function(e){var t=function(){var t=function(t){var i=t.graphic;var a=e.create("path");a.setAttribute("d",e.generatePath(t));a.setAttribute("fill","none");a.setAttribute("stroke-linejoin","round");a.setAttribute("stroke",i.color);a.setAttribute("stroke-width",i.width);if(i.dash){a.setAttribute("stroke-dasharray",i.dash)}if(i.linecap){a.setAttribute("stroke-linecap",i.linecap)}return a};t.update=function(t,i){t.setAttribute("d",e.generatePath(i));if(i.graphic){var a=i.graphic;if(a.color){t.setAttribute("stroke",a.color)}if(a.width){t.setAttribute("stroke-width",a.width)}if(a.dash){t.setAttribute("stroke-dasharray",a.dash)}else{t.removeAttribute("stroke-dasharray")}if(a.linecap){t.setAttribute("stroke-linecap",a.linecap)}else{t.removeAttribute("stroke-linecap")}}};t.prepare=function(e){return e};t.expose={renderer:t,prepare:t.prepare,update:t.update};return t};return t});define("sap/viz/chart/components/util/BarSeriesUtil",["sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/renderers/LineRenderer","sap/viz/chart/components/util/SeriesUtil"],function(e,t,i,a,r,o,n){var l=o();var s=r.convertColor;var u=a.CSS.CLASS;var c=a.LINE_TYPE;function h(e,t){e.graphic={color:e.color,width:1,opacity:1};delete e.color;e.isHorizontal=t}function p(t,i,a,r){var o=t(i);o.setAttribute("class",u.BAR_SERIES_PATH);e.setData(o,i.graphic);if(a){o.setAttribute("display","none")}else{o.removeAttribute("display")}r.insertBefore(o,r.firstChild)}function d(e,t,i,a){var r=[];var o={points:[]};var l,s,u,c;var h=e.length;for(var p=0;p<h;p++){l=e[p];if(!l||!l.position){continue}s=l.dpConfig;c=a.register({fillColor:n.parseSemanticColor(s,i)});if(o.points.length!==0&&u!==c){o.color=u;r.push(o);o={points:[]}}n.addRectSeriesPathPoints(o.points,l,!!s.negative,t);u=c}if(o.points.length>0){o.color=u;r.push(o)}return r}var f={drawBarSeries:function(e,t,i,a,r,o){if(i.hasDataPointColorStyle()){var s=d(t,r,i,a);s.forEach(function(t){h(t,r);p(l,t,o,e)})}else{var u=[];var c,f,v,g,m,y;var _=t.length;for(c=0;c<_;c++){g=t[c];if(!g||!g.position){continue}m=g.dpConfig;y=m.graphic;n.addRectSeriesPathPoints(u,g,!!m.negative,r);if(!v){v=a.register({fillColor:y.fill});f=y.opacity}}var A={graphic:{color:v,width:1,opacity:f},points:u,isHorizontal:r};p(l,A,o,e)}},updateBarSeries:function(i,a,r,o,s,c){var f=i.querySelectorAll("path."+u.BAR_SERIES_PATH);if(c){[].forEach.call(f,function(e){e.setAttribute("display","none")});return}var v;var g=a.length;if(r.hasDataPointColorStyle()){var m=d(a,s,r,o);var y;m.forEach(function(t,a){h(t,s);y=f[a];if(y){l.update(y,t);e.setData(y,t.graphic);y.removeAttribute("display")}else{p(l,t,c,i)}});for(v=m.length;v<f.length;++v){t.remove(f[v])}}else{var _;var A=[];for(v=0;v<g;v++){_=a[v];if(!_||!_.position){continue}n.addRectSeriesPathPoints(A,_,!!_.dpConfig.negative,s)}var b={points:A,isHorizontal:s};l.update(f[0],b);f[0].removeAttribute("display")}}};return f});define("sap/viz/chart/components/decorator/Decorator",[],function(){var e=function(){this._decos={}};e.prototype.decorate=function(e){var t=this._decos;for(var i in t){if(t.hasOwnProperty(i)){e.prototype[i]=t[i]}}};return e});define("sap/viz/chart/components/util/HitTestUtils",[],function(){var e={};e.inRange=function(e,t,i){return e>=t&&e<=i};var t=e.inRange;e.isInCircle=function(e,t,i){var a=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2));return i>=a};function i(e,i,a,r){return t(e[0],i[0],i[0]+a)&&t(e[1],i[1],i[1]+r)}e.isInRect=i;e.isInRectWithRatio=function(e,t,a){var r=t.x;var o=t.y;var n=Math.ceil(t.width);var l=Math.ceil(t.height);if(a!=1){r*=a;o*=a;n*=a;l*=a}return i([e.left,e.top],[r,o],n,l)};return e});define("sap/viz/chart/components/decorator/BaseHitTestDecorator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/decorator/Decorator","sap/viz/chart/components/util/HitTestUtils"],function(e,t,i){var a=i.inRange;var r=function(){r.superclass.constructor.apply(this,arguments);this._decos.hitTest=function(e){};this._decos.hitTestForRangeSelection=function(e){if(!e.hasOwnProperty("start")&&!e.hasOwnProperty("end")){return null}var t=this._data.valueAxis.scale._domain;var i=this._data.valueAxis2&&this._data.valueAxis2.scale._domain;var r;var o=this._dataPointContext;r=o.filter(function(r){var o=r.rawData.timeAxis[0].parsedValue||r.rawData.timeAxis[0].value;if(!a(o,e["start"],e["end"])){return false}var n;if(r.rawData.hasOwnProperty("valueAxis2")){n=r.rawData.valueAxis2;return a(n,i[0],i[1])}else{n=r.rawData.valueAxis;return a(n,t[0],t[1])}});return r.map(function(e){return e.dataId.toString()})}};e.extend(r,t);return r});define("sap/viz/chart/components/decorator/HitTestRectDecorator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/util/BoundingBoxUtils","sap/viz/chart/components/decorator/BaseHitTestDecorator","sap/viz/chart/components/util/HitTestUtils"],function(e,t,i,a){var r=a.isInRectWithRatio;var o=function(){o.superclass.constructor.apply(this,arguments);this._decos.hitTest=function(e){var i=this._dataPointContext;var a;var o=this._selection.select(".v-plot-bound").node();var n=o.getBoundingClientRect().width/o.getBBox().width;if(e.hasOwnProperty("width")&&e.hasOwnProperty("height")){var l=this.getSize();var s=this._offset;var u=-s.x;var c=-s.y;e.left=e.left+u;e.top=e.top+c;var h=l.width;var p=l.height;if(n!=1){h*=n;p*=n;u*=n;c*=n}var d={left:u,top:c,width:h,height:p};if(!t.intersects(d,e)){return[]}e=t.intersection(d,e);a=i.filter(function(i){var a=i.position;var r={left:a.x,top:a.y,width:a.width,height:a.height};if(n!=1){r.left*=n;r.top*=n;r.width*=n;r.height*=n}return t.intersects(r,d)&&t.intersects(r,e)})}else{a=i.filter(function(t){return r(e,t.position,n)})}return a}};e.extend(o,i);return o});define("sap/viz/chart/components/accessibility/BaseDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/SeriesUtil","sap/viz/chart/components/accessibility/ChartComponentNavigator"],function(e,t,i,a){function r(e){r.superclass.constructor.apply(this,arguments);this._dataModel=e.dataModel;this._sortedDataPointsByDirection=[];this._series=e.series?e.series:e.dataModel?e.dataModel.series():null;this._propMgr=e.propertyManager;this._isDual=e.isDual;this._isPercentage=e.isPercentage;this._seriesTypeLookup=[];this._isTimeColumn=e.isTimeColumn;this._isTimeWaterfall=e.isTimeWaterfall;this._isTimeBullet=e.isTimeBullet}e.extend(r,a);var o=r.prototype;o.destroy=function(){r.superclass.destroy.apply(this,arguments);this._dataModel=null;this._sortedDataPointsByDirection=[];this._series=null;this._propMgr=null;this._renderType=null;this._isDual=null;this._isPercentage=null;this._seriesTypeLookup=null};o.locate=function(e){var t=this._series;for(var i=e.length-1;t&&i>=0;--i){t=t[e[i]]}return t||null};o.address=function(e){return this._dataModel.getDataPoint(e).address()};o.getDataPoint=function(e){return this._dataModel?this._dataModel.getDataPoint(e):null};o.getColumn=function(e){return this._dataModel.getDataPoints(e)};o.getRow=function(e){return this._dataModel.getDataPoints(null,e)};o.getPrevDataPointInSeries=function(e){return this.getDataPoint(e).prev()};o.getNextDataPointInSeries=function(e){return this.getDataPoint(e).next()};o.getFirstStartPoint=function(){if(this._series&&this._series.length){var e=this._series[0].length;for(var t=0;t<this._series.length;t++){if(this._series[t].length>e){e=this._series[t].length}}for(var i=0;i<e;i++){for(var a=0;a<this._series.length;a++){if(this._series[a][i]){return this._series[a][i].dp}}}}else{return null}};o.dataPointValueSortInCategory=function(e){this._sortedDataPointsByDirection[e]=this.getColumn(e);var t=this;this._sortedDataPointsByDirection[e].sort(function(e,i){var a=t.locate(e.address());var r=t.locate(i.address());return a.valueAxis-r.valueAxis})};o._getSeriesType=function(e){var t=this.locate(e.address());if(!this._dataShapes){var a="dataShape.primaryAxis";var r=t&&!t.hasOwnProperty("valueAxis");if(r){a="dataShape.secondaryAxis"}this._dataShapes=this._propMgr.get("plotArea."+a);if(!this._dataShapes){this._dataShapes=r?["line","line","line"]:["bar","line","line"]}}return i.getSeriesType(t,this._dataShapes,this._renderType)};o._setupSeriesTypeTable=function(){if(this._series){for(var e=0;e<this._series.length;e++){var t=0;while(!this._series[e][t]&&t<this._series[e].length){t++}if(this._series[e][t]){this._seriesTypeLookup[e]=this._getSeriesType(this._series[e][t].dp)}else{this._seriesTypeLookup[e]=undefined}}}};o._getMaxCategoryNum=function(){var e=0;for(var t=0;t<this._series.length;t++){if(this._series[t]&&this._series[t].length>e){e=this._series[t].length}}return e};o._getFirstPointBySeries=function(e){if(this._series&&e>-1&&e<this._series.length){if(this._series[e]){for(var t=0;t<this._series[e].length;t++){if(this._series[e][t]){return this._series[e][t].dp}}}}return null};o._prevSeriesFirstPoint=function(e){var t=this.getDataPoint(e);if(t){var i=t.address()[1];while(--i>-1&&!(t=this._getFirstPointBySeries(i))){}}return t};o._nextSeriesFirstPoint=function(e){var t=this.getDataPoint(e);if(t){var i=t.address()[1];var a=this._series.length;while(++i<a&&!(t=this._getFirstPointBySeries(i))){}}return t};o.leftSeries=function(e){return this._prevSeriesFirstPoint(e)};o.rightSeries=function(e){return this._nextSeriesFirstPoint(e)};o.upSeries=function(e){return this._prevSeriesFirstPoint(e)};o.downSeries=function(e){return this._nextSeriesFirstPoint(e)};return r});define("sap/viz/chart/components/accessibility/ColumnDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/components/accessibility/BaseDataPointNavigator"],function(e,t,i,a){function r(){r.superclass.constructor.apply(this,arguments);this._allDataPoints=[];this._allDataPointsReverse=[];this._setupDataPointsMap()}e.extend(r,a);var o=r.prototype;o._setupDataPointsMap=function(){if(this._series&&this._propMgr.get("interaction.enableKeyboard")){this._allDataPoints=[];this._allDataPointsReverse=[];if(!this._isTimeColumn&&!this._isTimeWaterfall){var e=this._getMaxCategoryNum();for(var a=0;a<e;a++){for(var r=0;r<this._series.length;r++){var o=this._series[r][a];if(o&&(o.valueAxis!=null||o.valueAxis2!=null)){this._allDataPoints.push(o.dp)}}}}else{var n;var l=this._dataModel.getDataPoints();var s=this._dataModel.timeAxis();if(l.length>0&&s){n=s.rowArray.map(function(e){return e[0]?e[0].parsedValue:null});n=n.filter(function(e){return e});n=i.unique(n).sort(function(e,t){return e-t});var u=this._dataModel._rangeIndex;var c=this._propMgr.get("interaction.selectByTimeAxisGroup");var h=u&&u.length>0?u.length+1:n.length;var p={};l.forEach(function(e){var i=e.context();if(e._model&&e._model.timeAxis&&e._model.timeAxis.metaData){var a=e._model.timeAxis.metaData[0].id+".parsedValue";var r=i[a];if(t.isExist(r)){p[r]=p[r]||[];p[r].push(e)}}});for(var d=u[0]||0;d<h;d++){var f=p[n[d]];if(f&&f.length>0){this._allDataPoints=this._allDataPoints.concat(c?f[f.length-1]:f);this._allDataPointsReverse=this._allDataPointsReverse.concat(c?f[0]:f)}}}}}};o.getFirstStartPoint=function(){return this._allDataPoints[0]};o.destroy=function(){r.superclass.destroy.apply(this,arguments);this._allDataPoints=null};o.left=function(e){return this.getPrevDataPoint(e)};o.right=function(e){return this.getNextDataPoint(e)};o.up=function(e){return this.getPrevDataPoint(e)};o.down=function(e){return this.getNextDataPoint(e)};o.getNextDataPoint=function(e){var t=this._propMgr.get("interaction.selectByTimeAxisGroup");var i=this.getDataPoint(e);var a=null,r;if(t){r=this._allDataPoints.indexOf(i);if(r===-1){r=this._allDataPointsReverse.indexOf(i)}r++}else{r=this._allDataPoints.indexOf(i)+1}if(r<this._allDataPoints.length){a=this._allDataPoints[r]}return a};o.getPrevDataPoint=function(e){var t=this._propMgr.get("interaction.selectByTimeAxisGroup");var i=this.getDataPoint(e);var a=null,r;if(t){r=this._allDataPointsReverse.indexOf(i);if(r===-1){r=this._allDataPoints.indexOf(i)}r--}else{r=this._allDataPoints.indexOf(i)-1}if(r>-1){if(t){a=this._allDataPointsReverse[r]}else{a=this._allDataPoints[r]}}return a};return r});define("sap/viz/chart/components/trendline/mixin/columnPlot",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/trendline/Trendline"],function(e,t,i){function a(e){var t="M"+e.pop().join(",");t+="L"+e.shift().join(",");return t}function r(){this._trendlines=null}var o=r.prototype;o._getTrendLineContainer=function(e,t){t.appendChild(e)};o.renderTrendlines=function(t){if(!t){return}var i=this._properties.get("dataPointStyleMode"),a=this._properties.get("dataPointStyle");if(a&&i&&i==="override"){return}var r=0,o=this._trendlineCfg(),n=t.select(".v-plot-main").node(),l=n.querySelector(".v-trendline-group"),s,u;this._getTrendLines(this._data);if(!o||!this._trendlines||o.length===0){return null}if(l){l.parentNode.removeChild(l)}l=e.create("g");l.setAttribute("class","v-trendline-group");this._getTrendLineContainer(l,n);for(var c=0,h=o.length;c<h;c++){u=o[c];var p=this._trendlines[c];if(!u||!p||!p.raw||!p.fx){continue}var d=this._drawTrendlineForSeries(p,this._swapXY(p));if(d){s=e.create("path");s.setAttribute("fill","none");s.setAttribute("d",d);Object.keys(u.style).forEach(function(e){s.setAttribute(e,u.style[e])});l.appendChild(s)}}return l};o._drawTrendlineForSeries=function(e,t){var r=e.series,o=e.seriesId,n=this._val2PosFns(o,r,t),l=this._rasterizeTrendData(e,t),s=i.calculate(l.slice(0,e.raw.length-e.forecast));e.rasterizedData=l;var u=this._getTrendlineRange(e,t),c=[],h;if(this._visibleBound){h=t?[-1*this._offset.y,this._visibleBound.y]:[-1*this._offset.x,this._visibleBound.x]}else{h=t?[-1*this._offset.y,this._realSize.height]:[-1*this._offset.x,this._realSize.width]}for(var p=u.start;u.start!==u.end&&p<=u.end;p+=u.step){var d=n.x(p);var f=n.y(s(p));if(d<=h[1]&&d>=h[0]){c.push([d,f])}}if(!c||c.length<2){return null}return a(!t?c:c.map(function(e){return e.reverse()}))};o._getTrendlineRange=function(e,t){var i=e.rasterizedData;return{start:i[0].x,end:i[i.length-1].x,step:1}};o._swapXY=function(){return this.isHorizontal()};o._val2PosFns=function(e,t,a){var r=i.Utils.seriesAxisId(t),o=this._xHandlers.concat(this._yHandlers).filter(function(e){return e.id===r})[0],n=this._realSize.width,l=this._realSize.height;return{x:function(e){return e},y:a?function(e){var t=o._scale.scale(e);return t*n}:function(e){var t=o._scale.scale(e);return(1-t)*l}}};o._rasterizeTrendData=function(e,t){var i=t?this._realSize.height:this._realSize.width,a=(t?this._yHandlers[0]:this._xHandlers[0])._scaleByIndex;var r=e.raw.length-e.forecast;var o;return e.raw.map(function(t,n){if(n<r){var l=a[t.x-1];return{x:i*(l[0]+(l[1]-l[0])/2),y:t.y}}else{var s=a[a.length-e.forecast]||s;o=o?o:s[1]-s[0];return{x:i*((e.forecast-1+1/2)*o+s[0]),y:t.y}}},this)};o._getTrendLines=function(e){var t=this._properties.get("dataPointStyleMode"),a=this._properties.get("dataPointStyle");if(a&&t&&t==="override"){return}if(!this._trendlines){var r=this._properties.get("trendLine"),o=this._properties.get("dataPoint"),n=this.runtime().statusManager().get("timeLevels");this._trendlines=i.Parser.basic(r,e,o,n)}};o._trendlineValueDomain=function(e){var t={valueAxis:[],valueAxis2:[]};this._getTrendLines(e);if(!this._trendlines){return[]}t=this._trendlines.reduce(function(e,t){if(!t||!t.raw||!t.fx){return e}var a=t.series,r=i.Utils.seriesAxisId(a),o=i.domainPerTrendline(t.fx,t.raw),n=e[r].concat(o);e[r]=[Math.min.apply(null,n),Math.max.apply(null,n)];return e},t);if(t.valueAxis.length===0){delete t.valueAxis}if(t.valueAxis2.length===0){delete t.valueAxis2}return t};o._trendlineCfg=function(){var e=this._data,t=this._properties.get("trendLine"),a=this._properties.get("seriesStyle");return i.Parser.color(t,e,a,this._effectManager)};o._expandTrendlineXRange=function(e){i.expandCategoryDomain(e,this._trendlines,this.runtime().statusManager())};o.zoom=function(e){this.renderTrendlines(this._selection)};o.render=function(e){this.renderTrendlines(e)};function n(e,t){return function(){var i=e.apply(this,arguments);t.apply(this,arguments);return i}}o.inject=function(e,t){t=t||this.defaultResolveStrategy;for(var i in this){if(e[i]&&this.defaultResolveStrategy[i]){var a=t[i];if(!a){throw new Error("Mixin conflict: no resolve strategy")}var r=a(e[i],this[i]);if(!r){throw new Error("Mixin conflict: strategy not able to resolve it")}e[i]=r}else{e[i]=this[i]}}};o.defaultResolveStrategy={zoom:n,render:n};return r});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForBar",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n,l,s,u){var c=["info/bar","info/column","info/dual_bar","info/dual_column","info/timeseries_column","info/timeseries_stacked_column","info/timeseries_100_stacked_column","info/timeseries_waterfall"];var h=["info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_combination"];var p=c.concat(h);var d=["info/stacked_bar","info/stacked_column","info/dual_stacked_bar","info/dual_stacked_column","info/100_stacked_bar","info/100_stacked_column","info/100_dual_stacked_bar","info/100_dual_stacked_column","info/mekko","info/horizontal_mekko","info/100_mekko","info/100_horizontal_mekko","info/waterfall","info/horizontal_waterfall","info/stacked_waterfall","info/horizontal_stacked_waterfall","info/heatmap"].concat(c);d=r.addTrellisType(d);var f=d.concat(h);f=r.addTrellisType(f);c=r.addTrellisType(c);var v=e.CSS.CLASS;var g="datapoint";var m="dataline";var y=["info/timeseries_column","info/timeseries_stacked_column","info/timeseries_100_stacked_column","info/timeseries_waterfall"];var _=[{id:"selectDataPoint_bar",triggerEvent:{name:"selectDataPoint",supportedChartTypes:d},handler:function(e,t){if(t.isBigDataMode()){o.selectOnBarDuringBigData(e,t)}else{o.selectOnBarOnNormalMode(e,t)}}},{id:"deselectDataPoint_bar",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:d},handler:function(e,r){if(r.isBigDataMode()){return}r.fireEvent(e,true);var o=r.getProperties();var n=i.turnToArray(e.data.targets);var l;var s=t.isExist(o.get("plotArea.markerRenderer"));n.forEach(function(t){var n=1;if(e.data.isAnyOtherSelected){l=o.get("interaction.deselected")}else{l=o.get("plotArea.dataPoint");n=a.getData(t).strokeWidth}i.drawStroke(r,t,"rect",l.stroke,n);i.drawFill(r,t,"rect, path",l,s)})}},{id:"hoverOnDataPoint_bar",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:d},handler:function(e,t){if(t.isBigDataMode()&&!t.isTrellis()){o.highlightOnBarDuringBigData(e,t)}else{o.hoverEffectDuringNormalMode(e,t)}}},{id:"unhoverOnDataPoint_bar",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:d},handler:function(e,t){if(t.isBigDataMode()&&!t.isTrellis()){o.unhighlightOnBarDuringBigData(e,t)}else{o.unhoverEffectDuringNormalMode(e,t)}}},{id:"clearPlot_bar",triggerEvent:{name:"clearPlot",supportedChartTypes:d},handler:function(e,r){r.fireEvent(e,true);r._getDecorationLayer().clear();var l=e.data.isGray;var s=e.data.rangeSelection;var u=s&&s!=="clear";var c=r.getProperties();var h=r.getNodes(r.NodeType.DATA_POINT,false);if(h==null||h.length===0){o.cleanBar(e,r);return}var p;var d=t.isExist(c.get("plotArea.markerRenderer"));h.forEach(function(e){var o=1;if(l||u){p=c.get("interaction.deselected");if(u){p=n.extend(true,{},p);p.opacity=1}}else{p=c.get("plotArea.dataPoint");o=a.getData(e).strokeWidth}var s=a.getData(e);i.drawStroke(r,e,"rect",p.stroke,t.isExist(o)?o:1,undefined,s);i.drawFill(r,e,"rect, path",p,d)})}},{id:"clearPlot_timeseries_column",triggerEvent:{name:"clearPlot",supportedChartTypes:y},handler:function(e,t){t.fireEvent(e,true);if(!e.data.rangeSelection){t._getDecorationLayer().clear();t._getActionLayer().clear()}}},{id:"hover_on_plot_bar",triggerEvent:{name:"hover",supportedChartTypes:c,targets:"v-m-plot"},handler:function(e,t){o.hoverOnBarDuringBigData(e,t)}},{id:"hover_on_non_plot_bar",triggerEvent:{name:"hover",supportedChartTypes:p,excludeTargets:"v-m-plot"},handler:function(e,t){if(!t.isBigDataMode()){return}t.setStatus("hoveringOnPlotEvent",null);var i=t._getActionLayer();i.clear(g);t._getDecorationLayer().clear(g);t.fireEvent("hideTooltipHoverOnPlot",{mode:"infoMode"})}},{id:"hover_range_selection_bar",triggerEvent:{name:"hover",supportedChartTypes:y,targets:"v-m-action-layerrange"},handler:function(e,t){o.showDetailForRangeSelectionWhenHover(e,t)}},{id:"click_on_time_comb_during_big_data",triggerEvent:{name:"click",supportedChartTypes:h,excludeTargets:i.getDeselAllExTargets()},handler:function(e,t){o.clickOnCombDuringBigData(e,t)}},{id:"hover_on_plot_time_during_big_data",triggerEvent:{name:"hover",supportedChartTypes:h,targets:"v-m-plot"},handler:function(e,t){if(t.getStatus("rangeSelection")){return}o.hoverOnCombDuringBigData(e,t)}},{id:"click_on_non_selection_bar",triggerEvent:{name:"click",supportedChartTypes:f,excludeTargets:i.getDeselAllExTargets()},handler:function(e,t){if(t.isBigDataMode()&&h.indexOf(t._getChartType())>-1){return}if(!t.getProperties().get("interaction.enableDeselectAll")){return}if(p.indexOf(t._getChartType())>-1){o.clickOnBarDuringBigData(e,t)}else{t.fireEvent(e,true)}}},{id:"update_range_selection_effect_bar",triggerEvent:{targets:"v-m-action-layerrange",name:"down",supportedChartTypes:y},handler:function(e,t){o.updateRangeEffect(e,t)}},{id:"recover_range_selection_effect_bar",triggerEvent:{targets:"v-m-action-layerrange",name:"up",supportedChartTypes:y},handler:function(e,t){o.recoverRangeEffect(e,t)}}];u.registerAll(_);return _});define("sap/viz/chart/components/plots/ColumnPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/plots/BaseColumnPlot","sap/viz/chart/components/datalabels/ColumnDataLabels","sap/viz/chart/components/datalabels/BarDataLabels","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/util/BarSeriesUtil","sap/viz/chart/components/decorator/HitTestRectDecorator","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/ColumnDataPointNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/trendline/mixin/columnPlot","sap/viz/chart/behavior/config/DataPointBehaviorConfigForBar"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y){var _=t.CSS.CLASS;var A=function(e,t){A.superclass.constructor.apply(this,arguments);this._drawZeroLineBeforeDatapoints=false;this._dataPointContext=[];this._idMap={};this._semanticMgr.setUseSemanticPattern(true)};e.extend(A,n);A.prototype._getDataLabels=function(e,t){if(this.isHorizontal()){return new s(t,{name:e})}else{return new l(t,{name:e})}};A.prototype.destroy=function(){A.superclass.destroy.call(this);this._drawZeroLineBeforeDatapoints=null};A.prototype.mappingDataPointInfo=function(e){var t=this._dataPointContext[e];return t};A.prototype._attachColorData=function(e,t,n,l){if(this.isHorizontal()&&this._properties.get("dataLabel.visible")){var s=a.getData(e);if(!s){s={}}if(l&&l.displayName!==undefined){s.colorLegendData=[];s.colorLegendData.push(l.displayName)}else{if(t.color||t.color2){s.colorLegendData=i.clone(t.color||t.color2);var u=function(e,t){return r.isFunction(e[t])?e[t]():e[t]};var c="color";if(t.color2){c="color2"}var h=u(this._data,c).metaData;var p=[];p.push(i.clone(s.colorLegendData));var d=o.getDomainArray(p,h);if(d.length>0&&d&&d[0]){s.colorLegendData=d[0]}if(n>=0){if(s.colorLegendData.length>1){s.colorLegendData.splice(n,1)}}if(s.colorLegendData){var f=o.getDisplayTextsConverter(h);s.colorLegendData=f(s.colorLegendData)}}}a.setData(e,s)}};A.prototype.isBigDataMode=function(){var e=this._getDpCount();var t=this._properties.get("dataPoint.savingMode");var i=this.isHorizontal()?this._realSize.height:this._realSize.width;return t&&e>0&&i/e<1};A.prototype._preShowDataPoints=function(e){var t=this.runtime().semanticManager();this._isBigData=this.isBigDataMode();if(this._isBigData){var i=this.createSeriesIterator(this._series.length);while(i.hasNext()){var a=i.next();var r=this._series[a];if(!r){continue}var o=r.getDataPoints();this._hideDataPoints(o)}}return A.superclass._preShowDataPoints.apply(this,arguments)};A.prototype._getDpCount=function(){var e=this._getSeries();var t=0;e.forEach(function(e){t+=e.length});return t};A.prototype._applyScroll=function(){A.superclass._applyScroll.apply(this,arguments);this.renderTrendlines(this._selection)};A.prototype._updateDatapoints=function(e){this._resetDataPoints();var i=e.select("."+t.CSS.CLASS.DATAPOINT_GROUP).node();var a=this._showDataPoints(i);this._dataLabels.updatePosition(e,a)};A.prototype._showDataPoints=function(e){this._preShowDataPoints();var i=[];this._dataPointContext=[];var a=this.runtime().effectManager();if(this._seriesRenderer){this._seriesRenderer.resetDataPoints()}var o=this._needLazyRender();var n=this.createSeriesIterator(this._series.length);var l={color:null,drawingEffect:this._properties.get("drawingEffect")};var s=t.DATAPOINT_INVALIDITY_SUPPORTED.indexOf(this._properties.get("dataPoint.invalidity"))<=0;var u=this._getVisibleRange();while(n.hasNext()){var c=n.next();var h=this._series[c];if(!h){continue}var p=this._getDataPointRenderer(c);if(!p){continue}var d=h.getDataPoints();var f=this._getDataPointRange(d,u);if(o){this._hideDataPoints(d,f)}var v=null;var g=this._getDataShape&&this._getDataShape(c)==="line";var m=this._getDataShape&&this._getDataShape(c)==="bar";var y=this.getSeriesDPStyle(c);for(var _=f.min;_<=f.max;_++){var A=d[_];if(!A){continue}var b=this._getDataPointPosition(A);if(!b){continue}var x=A.getRawData();if(m&&x&&(!x.hasOwnProperty("valueAxis")||!r.isExist(x.valueAxis))){continue}var S=false;var D=A.getId();var w=null;var C=A.getConfig();if(s&&x.dp.ignore&&g){b=null;if(!C){C={graphic:{fill:v}}}}else{if(!C){if(!v){v=this._getColor(x)}l.color=v;l.seriesStyle=y;S=true;C=this._buildWrapperConfig(x,b,null,l);C.seriesIndex=c;C.seqId=D;C.position=b;if(C.graphic.pattern==="noFill"){C.path=this._generatePath(C.graphic);C.graphic.pathStrokeWidth=this._pathStrokeWidth(C.ctx)}}this._dataPointContext[x.dp.id]=C;this._idMap[x.dp.id]=D;if(!this._isBigData){var T=A.getData();if(!T){S=true;T=this._buildData(C);A.init(C,D,T,x.dp&&x.dp.id?x.dp.id:t.NULL_VALUE)}w=A.getNode();if(w){if(S){if(C.graphic.pattern==="noFill"){C.path=this._generatePath(C.graphic);C.graphic.pathStrokeWidth=this._pathStrokeWidth(C.ctx)}this._updateDatapoint(w,p,C,b);i.push(w)}}else{w=this._drawDataPoint(p,A);A.setNode(w);if(w){i.push(w)}}}this._updateStrokeWidth(w);if(this._seriesRenderer){this._seriesRenderer.addDataPoint(c,_,C,b,w)}else if(!w.parentNode){e.appendChild(w)}}}}return i};function b(e){if(e.valueAxis!=null){return e.valueAxis}else if(e.valueAxis2){return e.valueAxis2}else{return 0}}A.prototype._buildWrapperConfig=function(e,i,a,r){var o;if(this._isBigData&&a==null){var n=e.transparent||0;var l=i.width;var s=i.height;var u=h.convertColor(r.color);var c={graphic:{width:l,height:s,drawingEffect:this._drawingEffect||r.drawingEffect||this._properties.get("drawingEffect"),fill:r&&r.seriesStyle&&r.seriesStyle.color?h.convertColor(r.seriesStyle.color):u,opacity:1-n},data:{color:u,width:l,height:s,translate:[i.x,i.y]},effectManager:this._effectManager,rawData:e,negative:b(e)<0,horizontal:this.isHorizontal(),dataId:e.dp.id};if(this._isCombination){o=e.dp&&e.dp.context()?e.dp.context():t.NULL_VALUE;c.ctx=o}return c}else{o=e.dp&&e.dp.context()?e.dp.context():t.NULL_VALUE;var p=A.superclass._buildWrapperConfig.call(this,e,i,o,r);return p}};A.prototype._drawDataPoint=function(e,t){var i=A.superclass._drawDataPoint.apply(this,arguments);this._attachColorData(i,t.getRawData(),t.getOnlyOneMndIndex(),t.getConfig());return i};A.prototype._getSeriesRenderer=function(){return new u(this._drawBarSeries.bind(this),this._updateBarSeries.bind(this))};A.prototype._drawBarSeries=function(e,t,i){p.drawBarSeries(e,t,this._semanticMgr,this._effectManager,this.isHorizontal(),!this._isBigData)};A.prototype._updateBarSeries=function(e,t,i){p.updateBarSeries(e,t,this._semanticMgr,this._effectManager,this.isHorizontal(),!this._isBigData)};(new d).decorate(A);f.registerClazz("column",A);f.registerClazz("bar",A);v.register(m.DATAPOINT_NAVIGATOR,m.COLUMN,g);v.register(m.DATAPOINT_NAVIGATOR,m.WATERFALL,g);(new y).inject(A.prototype);return A});define("sap/viz/chart/components/datalabels/StackedDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/datalabels/DataLabels","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/SVG","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/chart/components/util/ColorUtil","sap/viz/framework/common/util/NumberUtils"],function(e,t,i,a,r,o,n,l,s,u,c){var h=function(e,t){this._isFlexibleStack=t.isFlexibleStack;h.superclass.constructor.apply(this,arguments);this._labelPosition="inside";this._totalLabels=[];this._stackIndexs=[];this._plotSelection=null;this._gridlineScale=null};var p=r.CSS.CLASS.DATALABEL+" "+r.CSS.CLASS.MORPHABLELABEL,d=r.CSS.CLASS.DATALABEL_GROUP_TOTAL,f="g";e.extend(h,a);function v(e){var t=e.gNode.querySelector("text");if(!t){t=n.create("text");e.gNode.appendChild(t)}t.textContent=e.text;return t}v.expose={renderer:v};h.prototype.setTrellisCell=function(e,t){h.superclass.setTrellisCell.apply(this,arguments);this._isFlexibleStack=false};h.prototype.setSeriesSettings=function(e,t){if(this._isFlexibleStack){this._seriesGroups=e.reduce(function(e,t){t.series.forEach(function(i){e[i]=t});return e},[]);this._seriesType=t}};h.prototype._computeDataLabelPosition=function(e,t,i,a,n,l){var s=t.x+e.e;var u=t.y+e.f;var c=[];if(i==="up"||i==="down"||i==="inside"){c[0]=s+t.width/2-(a.x+a.width/2);if(i!=="inside"){c[1]=u-(a.y+a.height)-r.DATALABEL.VERTICAL_TOTAL_LABEL_PADDING;if(n.val===0&&c[1]+a.y<0||i==="down"){c[1]=u-a.y+t.height+r.DATALABEL.VERTICAL_TOTAL_LABEL_PADDING}}}if(i==="left"||i==="right"||i==="inside"){c[1]=u+t.height/2-(a.y+a.height/2);if(i!=="inside"){c[0]=s-a.x+t.width+r.DATALABEL.HORIZONTAL_TOTAL_LABEL_PADDING;if(c[0]>this._size.width&&n.val===0||i==="left"){c[0]=s-(a.x+a.width)-r.DATALABEL.HORIZONTAL_TOTAL_LABEL_PADDING}}}if(this._options.allowMicroAdjust&&n.zeroLineAdjust){var h=this._gridlineScale.scale(0);var p=c[1];var d=a.height;var f=p-d;var v=n.val;if(o.isNumber(h)&&f<h&&p>h){if(v>=0){c[1]=h}else{c[1]=h+d}}}return c};h.prototype._getCategorySum=function(e){var t;if(this._isFlexibleStack){t=[0,0];for(var a=0;a<e.length;a++){var r=i.getContext(e[a]);var o=+r[r.measureNames];if(o>=0){t[1]+=o}else{t[0]+=o}}}else{t=i.getData(e).range}return t};h.prototype.updatePosition=function(e,t){var i=e.node();this._allStacksNodes=i.querySelectorAll("."+r.CSS.CLASS.STACK);this._renderStackTotal(e,this._allStacksNodes);h.superclass.updatePosition.apply(this,arguments)};h.prototype.render=function(e,t){this._removeExtraNodes(e);this._plotSelection=e;t=t||l.findAll(this._dataShapesGroupNode)||[];var i=this._beforeRender(t);this._render(e,i);if(this._isFlexibleStack){this._allStacksNodes=this.getAllFlexibleStacks(t)}else{this._allStacksNodes=e.node().querySelectorAll("."+r.CSS.CLASS.STACK)}this._renderStackTotal(e,this._allStacksNodes);this._afterRender(e)};var g=function(e,t){var a=e[0];var r=Infinity;for(var o=0;o<e.length;o++){var n=i.getContext(e[o]);var l=n[n.measureNames];var s=i.getData(e[o]);if((t>0&&l<0||t<=0&&l>=0)&&s.seriesIndex<r){r=s.seriesIndex;a=e[o]}}return a};h.prototype.getAllFlexibleStacks=function(e){if(!(e&&e.length)){e=l.findAll(this._dataShapesGroupNode)||[]}var t=[];var a=[];for(var r=0;r<e.length;r++){var o=i.getData(e[r]).flexibleStackId;if(o){if(!t[o]){t[o]=[];a.push(t[o])}t[o].push(e[r])}}return a};h.prototype._renderStackTotal=function(e,t){var a=e.node();var u=this._properties;var h=u.get("showTotal");this._totalLabels=[];this._stackIndexs=[];var m=this._runtime.statusManager().get("dynamicScale");if(h){var y,_;var A=a.querySelector("."+d);if(!A){A=n.create(f,a);A.setAttribute("class",d);var b=null;var x=this.runtime().envManager();if(x){b=x.textAnchor()}A.setAttribute("text-anchor",b);var S=this._getStyle();for(var D in S){if(S.hasOwnProperty(D)){A.setAttribute(D,S[D])}}}else{var w=A.querySelectorAll("."+r.CSS.CLASS.DATALABEL);y=w.length;while(y){A.removeChild(w[y-1]);--y}}var C=u.get("renderer")||v;var T=u.get("formatString");for(_=0,y=t.length;_<y;_++){var z=t[_];var L;if(this._isFlexibleStack){L=z}else{L=z.querySelectorAll("."+r.CSS.CLASS.DATAPOINT)}var P=L[L.length-1];var k=l.getDataPointId(P);var E,I=T,O;var R,N;if(this._data&&this._data.valueAxis&&this._data.valueAxis.metaData){R=this._data.valueAxis.metaData[0].id;N=this._data.valueAxis.metaData[0].formatString}I=I?I:N;var M=function(e,t){var r=z;if(this._isFlexibleStack){r=g(z,t)}E=this._buildDataLabelText(I,e,null,false);if(E===null||E===undefined){return}if(o.isExist(E)&&E&&E.text){e.formattedValue=E.formattedValue;E=E.text}var u=_+"-"+t;var c=n.create("g",A);l.setDataStackId(c,u);l.setDataId(c,u);i.setData(c,{id:u});i.setContext(c,{val:e.value});c.setAttribute("class",p);O=this._getConfigForRender(e,E,S,r,P);O.gNode=c;this._processDataLabelRendererConfig(O,e.value!==0?r:P);var h=C(O,v.expose)||v(O);if(h){if(this.getDataLabelDefaultPosition){this.getDataLabelDefaultPosition(e.value!==0?r:P)}var d=s.getBBox(c);var f=e.value!==0?n.getTransformToElement(r,a):n.getTransformToElement(P,a);var m=null;if(e.value>=0){m=this._horizontal?"right":"up"}else{m=this._horizontal?"left":"down"}var y=this._computeDataLabelTranslate(e.value!==0?r:P,f,m,d,O);if(!y){c.removeChild(h);return}var b=y[0];var x=y[1];c.setAttribute("transform","translate("+b+","+x+")");this._totalLabels.push(c);this._stackIndexs.push({id:u,value:e.value,labelTranslate:y,labelBBox:d})}};var B=this._getCategorySum(z);if(B[1]>0||B[1]===0&&B[0]===0){M.call(this,{key:R,value:c.preciseSimple(B[1]),dynamicScale:m},0)}if(B[0]<0){M.call(this,{key:R,value:c.preciseSimple(B[0]),dynamicScale:m},1)}}}};h.prototype._getConfigForRender=function(e,t,i,a,r){var o={val:e.value,text:t,info:e,styles:i,horizontal:this._horizontal,dpBBox:s.getBBox(e.value!==0?a:r),isTotalDataLabel:true};return o};h.prototype.hideConditional=function(e,a){var r,o,n,u;var c=this._properties.get("overlapBehavior");if(c!=="hideOverlappedLabels"){for(r=e.length-1;r>=0;r--){u=e[r];o=u.node;n=u.dataPoint;if(this.isDataLabelOutOfDataPoint(o,u)&&(!n||i.getData(n).type!="line")){t.remove(o);e.splice(r,1)}}}var p;if(this._totalLabels.length){p=[];var d=new Array(this._allStacksNodes.length);for(r=0;r<this._allStacksNodes.length;r++){d[r]=s.getBoundingClientRect(this._allStacksNodes[r])}for(r=this._totalLabels.length-1;r>=0;r--){var f=this._stackIndexs[r].id;var v=this._allStacksNodes[f.split("-")[0]];o=l.findByDataStackIds(this._totalLabels,f)[0];if(o){var g=o.getBoundingClientRect();var m=this.indexOfDataLabelIntersectDataPoints(g,d,this._allStacksNodes,v);if(m!==-1){t.remove(o);this._totalLabels.splice(r,1);this._stackIndexs.splice(r,1)}else{var y=this._stackIndexs[r].value;var _=this._stackIndexs[r].labelTranslate;var A=this._stackIndexs[r].labelBBox;var b={val:y};if(_){var x={info:{value:y},node:o,left:_[0]+A.x,right:_[0]+A.x+A.width,top:_[1]+A.y,bottom:_[1]+A.y+A.height};p.push(x)}}}}if(p){h.superclass.hideConditional.call(this,p)}}h.superclass.hideConditional.apply(this,arguments);if(p){this.detectAndRemoveOverlappedDataLabel(e.concat(p))}};h.prototype.updateColor=function(e,t){h.superclass.updateColor.apply(this,arguments);var i=this._properties.get("style.color");for(var a=0;a<this._totalLabels.length;a++){var r=this._stackIndexs[a].id;var o=l.findByDataStackIds(this._totalLabels,r)[0];if(o){var n=i;if(!n){n=u.getDataLabelColor(t)}var s=this.runtime().effectManager().register({fillColor:n});o.setAttribute("fill",s)}}};h.prototype.drawZero=function(e){return!e||null===l.getDataPointId(e)};h.prototype.destroy=function(){h.superclass.destroy.call(this);this._labelPosition=null;this._totalLabels=null;this._stackIndexs=null;this._plotSelection=null;this._gridlineScale=null};return h});define("sap/viz/chart/components/renderers/StackedBarRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DrawUtil"],function(e,t,i){var a=2;var r=function(i){var r,o;var n=i.graphic;var l=(n.width<1||n.height<1)&&(n.width!==0&&n.height!==0);var s=n.width<1&&n.width!==0?1:n.width;var u=n.height<1&&n.height!==0?1:n.height;if(n.pattern==="noFill"&&i.path){r=e.create("path");r.setAttribute("d",i.path);r.setAttribute("stroke-width",isNaN(n.pathStrokeWidth)?3:n.pathStrokeWidth);r.setAttribute("fill",n.bgColor);r.setAttribute("stroke",n.fill)}else{r=e.create("rect");r.setAttribute("width",s);r.setAttribute("height",u);o=n.fill;if(i.effectManager){o=i.effectManager.register({drawingEffect:n.drawingEffect,fillColor:n.fill,patternEffect:n.pattern,direction:i.horizontal?"vertical":"horizontal"})}r.setAttribute("fill",o);r.setAttribute("shape-rendering","crispEdges");if(n.stroke){var c=i.horizontal?u:s;var h=c>n.strokeWidth+a?n.strokeWidth:c-a;if(h>=1){r.setAttribute("stroke",n.stroke);r.setAttribute("stroke-width",n.strokeWidth)}}}var p=t.getData(r)||{};p.bTinyValue=l;t.setData(r,p);t.setCustomizationInfo(r,{defaultRenderer:true});return r};r.update=function(e,t){var a=t.graphic;var r=a.width<1&&a.width!==0?1:a.width;var o=a.height<1&&a.height!==0?1:a.height;var n={width:r,height:o,minSize:t.horizontal?o:r};i.barUpdate(e,t,n)};r.expose={renderer:r,update:r.update};return r});define("sap/viz/chart/components/accessibility/StackedColumnDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/accessibility/BaseDataPointNavigator"],function(e,t,i){function a(e){a.superclass.constructor.apply(this,arguments);this._allNegativeValueInCategory=[];this._negativeValueAxis1=[];this._negativeValueAxis2=[];this._stackItemsUpDownOrder=[];this._isSupportNaturalUpDown=!this._isPercentage&&!this._isDual&&this._isVerticalRender&&e&&!e.isTimeseries&&!e.isCombination}e.extend(a,i);var r=a.prototype;r.buildUpDownOrder=function(){if(this._series&&this._isSupportNaturalUpDown){var e=0;var t;var i;for(t=0;t<this._series.length;t++){e=Math.max(e,this._series[t].length)}var a={};for(i=0;i<e;++i){a[i]=true;for(t=0;t<this._series.length;++t){if(this._series[t][i]){var r=this._series[t][i].valueAxis;if(r>0){a[i]=false;break}}}}for(i=0;i<e;i++){this._stackItemsUpDownOrder[i]=[];var o=[];var n=[];var l;for(t=0;t<this._series.length;t++){l=0;if(this._series[t].settings){var s=this._series[t].settings.group;l=n.indexOf(s);if(l<0){n.push(s);l=n.length-1}}if(this._series[t][i]){var u={};u.i=t;var c=this._series[t][i].dp;if(c){var h=c.context();if(a[i]){u.isNegative=h[h.measureNames]>0?0:1}else{u.isNegative=h[h.measureNames]>=0?0:1}u.seriesLocation=c.address()[1];if(u.isNegative>0){u.seriesLocation=-u.seriesLocation}u.flexibleGroupIndex=l;o.push(u)}}}o.sort(function(e,t){var i=e.flexibleGroupIndex-t.flexibleGroupIndex;var a=e.isNegative-t.isNegative;var r=e.seriesLocation-t.seriesLocation;return i||a||r});for(t=0;t<o.length;t++){this._stackItemsUpDownOrder[i].push(o[t].i)}}}};r.init=function(){this.buildUpDownOrder();if(this._series&&this._isPercentage){var e=this._getMaxCategoryNum();for(var t=0;t<e;t++){var i=0;var a=0;var r=0;var o=0;for(var n=0;n<this._series.length;n++){if(this._series[n][t]){if(this._series[n][t].valueAxis){r++;if(this._series[n][t].valueAxis<0){i++}}if(this._isDual&&this._series[n][t].valueAxis2){o++;if(this._series[n][t].valueAxis2<0){a++}}}}if(i===r){this._negativeValueAxis1[t]=true}else{this._negativeValueAxis1[t]=false}if(this._isDual){if(a===o){this._negativeValueAxis2[t]=true}else{this._negativeValueAxis2[t]=false}}}}};r.destroy=function(){a.superclass.destroy.apply(this,arguments);this._allNegativeValueInCategory=null;this._negativeValueAxis1=null;this._negativeValueAxis2=null;this._stackItemsUpDownOrder=null};r.left=function(e){return this._isVerticalRender?this._getPrevDataPointInSeries(e):this._getNextDataPointInStack(e)};r.right=function(e){return this._isVerticalRender?this._getNextDataPointInSeries(e):this._getPrevDataPointInStack(e)};r.up=function(e){return this._isVerticalRender?this._getPrevDataPointInStack(e):this._getPrevDataPointInSeries(e)};r.down=function(e){return this._isVerticalRender?this._getNextDataPointInStack(e):this._getNextDataPointInSeries(e)};r._getPrevDataPointInSeries=function(e){var t=this._prevNonNullDPInSeries(e);if(this._isPercentage){while(t&&(!this._negativeValueAxis1[t.address()[0]]&&this.locate(t.address()).valueAxis<0||this._isDual&&!this._negativeValueAxis2[t.address()[0]]&&this.locate(t.address()).valueAxis2<0)){t=this._prevNonNullDPInSeries(t.id);if(!t){break}}}return t};r._getNextDataPointInSeries=function(e){var t=this._nextNonNullDPInSeries(e);if(this._isPercentage){while(t&&(!this._negativeValueAxis1[t.address()[0]]&&this.locate(t.address()).valueAxis<0||this._isDual&&!this._negativeValueAxis2[t.address()[0]]&&this.locate(t.address()).valueAxis2<0)){t=this._nextNonNullDPInSeries(t.id);if(!t){break}}}return t};r.getUpDownIndexInStack=function(e,t,i){var a;if(this._isSupportNaturalUpDown){var r=this._stackItemsUpDownOrder[t];a=r[Math.min(Math.max(r.indexOf(e)+i,0),r.length-1)]}else{a=e+i}return a};r._getNextDataPointInStack=function(e){var t=this.getDataPoint(e);var i=null;var a=null;var r=this._series.length;if(t){var o=t.address();if(o[1]!==r-1||this._isSupportNaturalUpDown){i=this._downNonNullDPInSeries(t.id);if(i&&this._isPercentage){a=this.locate(i.address());if(a.valueAxis&&!this._negativeValueAxis1[o[0]]||a.valueAxis2&&!this._negativeValueAxis2[o[0]]){var n=null;while(i&&i.address()[1]<r){a=this.locate(i.address());n=a.valueAxis||a.valueAxis2;if(n<0){i=this._downNonNullDPInSeries(i.id)}else{break}}}}}}return i};r._getPrevDataPointInStack=function(e){var t=this.getDataPoint(e);var i=null;var a=null;if(t){var r=t.address();if(r[1]!==0||this._isSupportNaturalUpDown){i=this._upNonNullDPInSeries(t.id);if(i&&this._isPercentage){a=this.locate(i.address());if(a.valueAxis&&!this._negativeValueAxis1[r[0]]||a.valueAxis2&&!this._negativeValueAxis2[r[0]]){var o=null;while(i&&i.address()[1]>-1){a=this.locate(i.address());o=a.valueAxis||a.valueAxis2;if(o<0){i=this._upNonNullDPInSeries(i.id)}else{break}}}}}}return i};r.getFirstStartPoint=function(){if(!this._isPercentage){return a.superclass.getFirstStartPoint.apply(this,arguments)}if(this._series){for(var e=0;e<this._series[e].length;e++){for(var t=0;e<this._series.length;t++){if(this._series[t][e]){if(this._isDual){if(!this._negativeValueAxis1[e]&&this._series[t][e].valueAxis<0){continue}if(this._isDual&&!this._negativeValueAxis2[e]&&this._series[t][e].valueAxis2<0){continue}return this._series[t][e].dp}else{if(!this._negativeValueAxis1[e]&&this._series[t][e].valueAxis<0){continue}else{return this._series[t][e].dp}}}}}}else{return null}};r._isMeaningful=function(e){return e&&(t.isExist(e.valueAxis)||t.isExist(e.valueAxis2))};r._downNonNullDPInSeries=function(e){var t=this.getDataPoint(e);var i=t.address();var a=i[0];var r=this._series.length;var o=this.getUpDownIndexInStack(i[1],a,1);var n=null;if(o>r){return n}while(o<r){if(this._series[o]){n=this._series[o][a];if(this._isMeaningful(n)){return n.dp}}o=this.getUpDownIndexInStack(o,a,1)}return n};r._upNonNullDPInSeries=function(e){var t=this.getDataPoint(e);var i=t.address();var a=i[0];var r=this.getUpDownIndexInStack(i[1],a,-1);var o=null;if(r<0){return o}while(r>-1){if(this._series[r]){o=this._series[r][a];if(this._isMeaningful(o)){return o.dp}}r=this.getUpDownIndexInStack(r,a,-1)}return o};r._nextNonNullDPInSeries=function(e){var t=this.getDataPoint(e);var i=t.address();var a=this._series[i[1]].length;var r=i[0]+1;if(r>a){return null}var o=this._series[i[1]][r];while(!this._isMeaningful(o)&&r<a){o=this._series[i[1]][r];r++}return this._isMeaningful(o)?o.dp:null};r._prevNonNullDPInSeries=function(e){var t=this.getDataPoint(e);var i=t.address();var a=i[0]-1;if(a<0){return null}var r=this._series[i[1]][a];while(!this._isMeaningful(r)&&a>-1){r=this._series[i[1]][a];a--}return this._isMeaningful(r)?r.dp:null};r._getFirstPointBySeries=function(e){if(this._series&&e>-1&&e<this._series.length){if(this._series[e]){for(var t=0;t<this._series[e].length;t++){if(this._series[e][t]){if(this._isPercentage){if(!this._negativeValueAxis1[t]&&this._series[e][t].valueAxis<0){continue}if(this._isDual&&!this._negativeValueAxis2[t]&&this._series[e][t].valueAxis2<0){continue}}return this._series[e][t].dp}}}}return null};return a});define("sap/viz/chart/components/plots/StackedPlotHelper",[],function(){var e={};e.getVisibleRange=function(e,t){var i=t.prototype._getVisibleRange.apply(e,arguments);if(i){var a=e._series;var r=a.length;var o;for(var n=0;n<r;n++){var l=a[n];if(!l){continue}var s=l.getDataPoints();var u=e._getDataPointRange(s,i);o=o||u;o.min=Math.min(o.min,u.min);o.max=Math.max(o.max,u.max)}i=o}return i};return e});define("sap/viz/chart/components/plots/ComboExDataHandler",["sap/viz/chart/components/plots/DataHandler"],function(e){function t(t){this._handlers=t.reduce(function(t,i){var a=i.type==="area"?false:true;var r=e.getStackHandler(a);i.series.forEach(function(e){t[e]=r});return t},[])}t.prototype.add=function(e,t,i){return this._handlers[i].add(e,t,i)};t.prototype.getBase=function(e,t,i){return this._handlers[i].getBase(e,t,i)};t.prototype.reset=function(){this._handlers.forEach(function(e){e.reset()})};t.prototype.destroy=function(){this._handlers.forEach(function(e){e.destroy()})};return t});define("sap/viz/chart/components/renderers/AreaSeriesRenderer",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/chart/components/renderers/SeriesRenderer"],function e(t,i,a,r,o,n){var l=o.CSS.CLASS;var s=function(e,t){s.superclass.constructor.apply(this,arguments)};t.extend(s,n);s.prototype.init=function(e){this._series=[];this._seriesGroup=[];var t;for(var a=0;a<e;a++){t=this._seriesGroup[a]=i.create("g");t.setAttribute("class",l.AREA_POINT)}t=this._areaGroup=i.create("g");t.setAttribute("class",l.AREA_GROUP);t=this._refLineGroup=i.create("g");t.setAttribute("class",l.AREA_REF_LINE_GROUP)};s.prototype.addDataPoint=function(e,t,i,a,r,o){if(r){this._seriesGroup[e].appendChild(r)}if(o){this._refLineGroup.appendChild(o)}this._series[e]=this._series[e]||[];this._series[e][t]={position:a,dpConfig:i,dataPoint:r,dataPointRefLine:o}};s.prototype.addDataPointRefLine=function(e,t,i){if(!i||!this._series[e]){return}var a=this._series[e][t];if(!a){return}this._refLineGroup.appendChild(i);a.dataPointRefLine=i};s.prototype.render=function(e){var t=this._areaGroup;var a=this._refLineGroup;var r=i.create("g");for(var o=0;o<this._seriesGroup.length;o++){if(this._series[o]){this._renderSeries(t,this._series[o],o);r.appendChild(this._seriesGroup[o])}}r.setAttribute("class",l.AREA_POINT_GROUP);e.appendChild(t);e.appendChild(a);e.appendChild(r)};s.prototype.update=function(e){for(var t=0;t<this._seriesGroup.length;t++){if(this._series[t]){this._updateSeries(this._areaGroup,this._series[t],t)}}};return s});define("sap/viz/chart/components/renderers/ComboExSeriesRenderer",["sap/viz/framework/common/util/oo","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/AreaSeriesRenderer"],function(e,t,i){var a=["line","bar","area"];function r(e,r){this.seriesRenderers={bar:new t(e,r),line:new t(e,r),area:new i(e,r)};this._renderers=a.slice().reverse().map(function(e){return this.seriesRenderers[e]},this);this._seriesType=[]}r.prototype.setSeriesSettings=function(e,t){this._seriesGroupInfo=e;this._seriesType=t;this._typeIndexes=[[],[],[]];var i=a.length-1;for(var r=0;r<t.length;++r){this._typeIndexes[i-a.indexOf(t[r])].push(r)}};r.prototype._seriesGroupOrder=function(){var e=this._seriesGroupInfo.reduce(function(e,t){if(!e[t.type]){e[t.type]=[]}e[t.type].push(t.series);return e},{});return a.reduce(function(t,i){if(e[i]){e[i].forEach(function(e){t=t.concat(e.slice().reverse())})}return t},[])};r.prototype._sortStackedSeries=function(e){var t=this._seriesGroupOrder();var i=this.seriesRenderers[e];var a=i._series,r=i._seriesGroup,o=a.reduce(function(e,t,i){return t?e.concat(i):e},[]);var n=o.slice().sort(function(e,i){return t.indexOf(e)-t.indexOf(i)}).reduce(function(e,t,i){var n=o[i];e.series[n]=a[t];e.seriesGroup[n]=r[t];return e},{series:[],seriesGroup:[]});i._series=n.series;i._seriesGroup=n.seriesGroup};r.prototype.getSeriesRenderer=function(e){return this.seriesRenderers[this._seriesType[e]]};r.prototype._doAll=function(e,t){var i=this._typeIndexes;this._renderers.forEach(function(a,r){a[e].apply(a,[].slice.call(t).concat([i[r]]))})};r.prototype.addDataPointRefLine=function(e,t,i){this.seriesRenderers.area.addDataPointRefLine(e,t,i)};r.prototype.init=function(e){this._doAll("init",arguments)};r.prototype.resetDataPoints=function(){this._doAll("resetDataPoints",arguments)};r.prototype.render=function(e){this._sortStackedSeries("bar");this._doAll("render",arguments)};r.prototype.update=function(e){this._doAll("update",arguments)};r.prototype.addDataPoint=function(e,t,i,a,r){this.getSeriesRenderer(e).addDataPoint(e,t,i,a,r)};r.prototype.updateDataPoint=function(e,t,i,a){this.getSeriesRenderer(e).updateDataPoint(e,t,i,a)};e.extend(r,t);return r});define("sap/viz/chart/components/plots/StackedColumnPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/ColumnPlot","sap/viz/chart/components/plots/BaseColumnPlot","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/SeriesIterator","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/BarWidthUtils","sap/viz/chart/components/datalabels/StackedDataLabels","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/SVG","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/renderers/StackedBarRenderer","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DOM","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/StackedColumnDataPointNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/plots/StackedPlotHelper","sap/viz/chart/components/plots/ComboExDataHandler","sap/viz/chart/components/renderers/ComboExSeriesRenderer"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S){var D=function(e,t){this._isFlexibleStack=e.propertyManager().origin.get("plotArea.series")&&t&&!t.inTrellis&&!t.isDualValueAxis&&!t.isHorizontal&&t.isSupportFlexibleStack;D.superclass.constructor.apply(this,arguments);this._dataPointRenderer=f;this._initCategoryAxis(l,n)};t.extend(D,i);var w=1;D.prototype._initCategoryAxis=function(e,t){if(this._isFlexibleStack){this._seriesType=[];this._barCategoryAxis=e.getCategoryScaleHandler("categoryAxis",{isHorizontal:false,itemScaleHandler:t.get(true,this._getBarProperties())});this._categoryScaleHandler=this._barCategoryAxis}};D.prototype._getXPosition=function(e,t,i){if(this._isFlexibleStack){return this._getAxisPosition([this._barCategoryAxis],this._barGroupIndices[e],t,i)}else{return D.superclass._getXPosition.apply(this,arguments)}};D.prototype._renderSeries=function(e,t,i,a){if(this._isFlexibleStack){return w}};D.prototype._updateSeries=function(e,t,i,a){if(this._isFlexibleStack){return w}};D.prototype._buildDataHandler=function(e){if(this._isFlexibleStack){return new x(this._seriesGroups.filter(function(t){return t.mndKey===e}))}};D.prototype._applyScroll=function(){return i.superclass._applyScroll.apply(this,arguments)};D.prototype.getDataPointPosition=function(e,t,i){if(this._isFlexibleStack){var a=D.superclass.getDataPointPosition.apply(this,arguments);if(i){this._resetDataPoints()}return a}else{var r=this._getSeries();var o;if(r.length){e=r.length-e-1;o=r[e][t]}return this._getPosition(e,t,o)}};D.prototype.getSeriesIndex=function(e){return this._series.length-e._addr[1]-1};D.prototype._getDataHandler=function(){if(this._options.isDualValueAxis){return{valueAxis:r.getStackHandler(true),valueAxis2:r.getStackHandler(true)}}else{return{valueAxis:r.getStackHandler(true)}}};D.prototype._getCategoryScaleHandlers=function(e){this._categoryScaleHandler=l.getCategoryScaleHandler("categoryAxis",{isHorizontal:e,itemScaleHandler:this._getItemScaleHandler()});return[this._categoryScaleHandler]};D.prototype._getBarProperties=function(){if(!this._barInfoProperties){this._barInfoProperties=s.getBarProperties(this._properties.origin,this._isFlexibleStack)}return this._barInfoProperties};D.prototype._getItemScaleHandler=function(){var e;var t=this._getBarProperties();if(this._options.isDualValueAxis){t.valueAxis=["valueAxis","valueAxis2"];e=n.get(false,t);delete t.valueAxis}else{e=n.get(false,t)}this._itemScaleHandler=e;return e};D.prototype._applyChanges=function(){if(this._options.isDualValueAxis&&!(this._data.color.scale.getDomain().length&&this._data.color2.scale.getDomain().length)){this._getBarProperties().barSpacing=1;this._itemScaleHandler.updateItems(this._data.color2.scale.getDomain().length?["valueAxis2"]:["valueAxis"])}D.superclass._applyChanges.apply(this,arguments);this._initBarCategoryAxis()};D.prototype._initBarCategoryAxis=function(){if(this._isFlexibleStack){var e=this._getColumnCount();var t=this._data["categoryAxis"].scale;if(e){var i=this.isHorizontal()?this._realSize.height:this._realSize.width;this._barCategoryAxis.init(t,e,i)}}};D.prototype._getDataLabels=function(e,t){return new u(t,{name:e,horizontal:this.isHorizontal(),allowMicroAdjust:!this.isHorizontal(),isFlexibleStack:this._isFlexibleStack})};D.prototype._getSeries=function(){if(this._isFlexibleStack){return D.superclass._getSeries.apply(this,arguments)}else{if(this._data.series){return this._data.series.slice().reverse()}else{return[]}}};D.prototype._attachMarkManager=function(){if(this._isFlexibleStack){if(!this._data){return}var e=this.runtime().markManager();var t=this._isInTrellis?e._shapes||[]:[];e.lock();e.setMode("series");var i={line:this._getMarkerShape(),bar:this._getLegendMarkerShape(),area:"circle"};var a=0,r=0;this._getSeries().forEach(function(e){var o=e.spec.mndKey==="valueAxis";var n=o?0:1;var l=o?a:r;if(o){a++}else{r++}t[n]=t[n]||[];if(!!t[n][l]||this._isInTrellis&&this._isEmptySeries(e)){return}t[n][l]={marker:i[e.settings.type],type:e.settings.type}},this);e.setMarkers(t)}};D.prototype._getColumnCount=function(){if(this._isFlexibleStack){return this._seriesGroups.length}else{return this._options.isDualValueAxis&&this._data.color.scale.getDomain().length&&this._data.color2.scale.getDomain().length?2:1}};function C(e){if(!e.length){return[]}var t=[],i,a;for(var r=0,o=e.length;r<o;r++){a=e[r];for(var n=0;n<a.length;n++){i=t[n]=t[n]||[];i.push(a[n])}}return i}D.prototype._needValidEmptyAxisData=function(){return false};D.prototype._buildData=function(e){var t=D.superclass._buildData.apply(this,arguments);t.isNegative=undefined;return t};D.prototype._generatePath=function(e,t){if(this._isFlexibleStack){return D.superclass._generatePath.apply(this,arguments)}else{var i=[];var a=t.isClose;var r=t.isNegative;var o=this._isPercent;var n=1.5;var l=e.width-n,s=e.height-n;if(l<=0){l=1}if(s<=0){s=1}if(t.isZero){n=0}if(this.isHorizontal()){if(t.isZero){l=0}if(a){i.push([n,n]);i.push([l,n]);i.push([l,s]);i.push([n,s]);i.push([n,0])}else{if(r&&!o){i.push([e.width,n]);i.push([n,n]);i.push([n,s]);i.push([e.width,s])}else{i.push([0,n]);i.push([l,n]);i.push([l,s]);i.push([0,s])}}}else{if(t.isZero){s=0}if(a){i.push([n,s]);i.push([n,n]);i.push([l,n]);i.push([l,s]);i.push([0,s])}else{if(r&&!o){i.push([n,1]);i.push([n,s]);i.push([l,s]);i.push([l,1])}else{i.push([n,e.height]);i.push([n,n]);i.push([l,n]);i.push([l,e.height])}}}return h.generatePath({points:i})}};D.prototype._pushDataPointContext=function(){};D.prototype._getVisibleRange=function(){if(this._isFlexibleStack){return D.superclass._getVisibleRange.apply(this,arguments)}else{return b.getVisibleRange(this,i)}};D.prototype._isSupportBarPathGenerator=function(){return this._isFlexibleStack};D.prototype.setData=function(e){D.superclass.setData.call(this,e);if(this._isFlexibleStack){if(this._fixSeriesForMulti){this._fixSeriesForMulti.call(this,e.series.filter(function(e){return e.settings.type==="area"}))}this._configSeries();this._dataHandler={valueAxis:this._buildDataHandler("valueAxis"),valueAxis2:this._buildDataHandler("valueAxis2")};this._seriesRenderer.setSeriesSettings(this._seriesGroups,this._seriesType);this._dataLabels.setSeriesSettings(this._seriesGroups,this._seriesType);this._attachMarkManager()}};D.prototype._configSeries=function(){if(this._isFlexibleStack){var e=this._getSeries();var t=this;this._seriesGroups=e.reduce(function(e,i,a){var r=i.settings.group;if(!e[r]){e[r]={type:i.settings.type,mndKey:i.spec.mndKey,series:[]}}e[r].series.push(a);t._seriesType[a]=i.settings.type;return e},{});this._seriesGroups=Object.keys(this._seriesGroups).map(function(e){return this._seriesGroups[e]},this);this._barGroupIndices=this._seriesGroups.filter(function(e){return e.type==="bar"}).reduce(function(e,t,i){t.series.forEach(function(t){e[t]=i});return e},[])}};D.prototype.createSeriesIterator=function(e){if(this._isFlexibleStack){return o.create(e,"reverse")}else{return D.superclass.createSeriesIterator.apply(this,arguments)}};D.prototype._showDataPoints=function(e,t){var i;if(this._isFlexibleStack){i=a.prototype._showDataPoints.apply(this,arguments)}else{this._preShowDataPoints();var r=this._needValidEmptyAxisData();i=[];var o=this._series;var n=o.length;var l=[],s;var u=this._needLazyRender();var h=this._getVisibleRange();var d,f;for(d=0;d<n;d++){f=o[d];var v=this.getSeriesDPStyle(n-d-1);if(!f){continue}var m=f.getDataPoints();if(u){this._hideDataPoints(m,h)}var y=null;var _=h&&h.min||0;var A=h&&h.max||m.length;for(var b=_;b<=A;b++){var x=m[b];if(!x){continue}var S=x.getRawData();if(r===true){var D=S.valueAxis===undefined||S.valueAxis===null;var w=S.valueAxis2===undefined||S.valueAxis2===null;if(D&&w){continue}}var C=this._getPosition(d,b,S);if(!C){continue}var T=x.getId();var z=x.getConfig();if(!z){z=this._buildWrapperConfig(S,C,S.dp.context(),{seriesStyle:v});x.setConfig(z)}this._pushDataPointContext(z);if(!y){y=S.hasOwnProperty("valueAxis2")?"valueAxis2":"valueAxis"}l[b]=l[b]||{};s=l[b][y]=l[b][y]||{configs:[],positions:[],currentIds:[],dataPoints:[],dataModels:[],data:[]};var L=p.find(e,T);if(!s.node&&L){var P=L;while((P=P.parentNode)&&!g.hasClass(P,c.CSS.CLASS.STACK)){}s.node=P}var k=x.getData();if(!k){k=this._buildData(z)}s.data.push(k);s.configs.push(z);s.dataPoints.push(S.dp);s.positions.push(C);s.currentIds.push(T);s.dataModels.push(x)}}this._removeEmptyStacks(e);var E=this._getDataPointRenderer(d);for(var I=0;I<l.length;I++){var O=l[I];for(var R in O){if(O.hasOwnProperty(R)){s=O[R];if(!s){continue}var N=this._drawCategory(s,E,i);if(N){e.appendChild(N)}}}}}this._dataLabels._gridlineScale=this._gridlineScale;return i};D.prototype._removeEmptyStacks=function(e){var t=[].slice.call(e.querySelectorAll("."+c.CSS.CLASS.STACK));t.forEach(function(t){if(!t.childNodes.length){e.removeChild(t)}})};function T(e){var t=-1,i=-1;for(var a=0;a<e.length;a++){var r=e[a];r.isClose=true;r.isZero=false;if(r.ctx[r.ctx.measureNames]>0){if(t===-1){t=a;r.isClose=false}}else if(r.ctx[r.ctx.measureNames]<0){if(i===-1){i=a;r.isClose=false}}else{r.isZero=true}if(a+1<e.length&&(r.rawData.hasOwnProperty("valueAxis")&&e[a+1].rawData.hasOwnProperty("valueAxis2")||r.rawData.hasOwnProperty("valueAxis2")&&e[a+1].rawData.hasOwnProperty("valueAxis"))){t=-1;i=-1}}}D.prototype._drawCategory=function(e,t,i){var a=e.node;var r=e.configs;var o=e.data;var n=e.positions;var l=e.currentIds;var s=e.dataPoints;var u=e.dataModels;var g=!!a;var m;var y,_,A,b,x,S,D,w,C;var z;var L=t!==this._dataPointRenderer&&t;var P=[],k,E;var I,O;P.range=[0,0];if(!g){a=h.create("g");a.setAttribute("class",c.CSS.CLASS.STACK)}if(L){for(z=0;z<r.length;z++){y=r[z];_=n[z];if(z===0){S=_.x;D=_.y;w=S+y.graphic.width;C=D+y.graphic.height}else{if(y.horizontal){S=Math.min(S,_.x);w=Math.max(w,_.x+y.graphic.width)}else{D=Math.min(D,_.y);C=Math.max(C,_.y+y.graphic.height)}}}b=w-S;x=C-D;for(z=0;z<r.length;z++){y=r[z];_=n[z];k=v.extend({},y.graphic);y.graphic.stackWidth=b;y.graphic.stackHeight=x;y.graphic.x=y.horizontal?_.x-S:0;y.graphic.y=y.horizontal?0:_.y-D;var R=false;if(g){E=p.find(a,l[z]);if(t.update){t.update(E,y,f.expose)}}else{m=t(y,f.expose);if(!m){m=this._dataPointRenderer(y,_);R=true}E=h.create("g");p.setDataId(E,l[z]);p.setDataPointId(E,s[z].id);if(u){u[z].setNode(E)}A=y.ctx;P.push(A);d.setContext(E,A);O=A[A.measureNames];if(O>=0){P.range[1]+=O}else{P.range[0]+=O}I=o[z];I.seriesIndex=s[z]._addr[1];I.itemIndex=s[z]._addr[0];d.setData(E,I);E.setAttribute("class",c.CSS.CLASS.DATAPOINT+" "+c.CSS.CLASS.MORPHABLEDATAPOINT+" "+c.CSS.CLASS.DATAPOINTDEFAULT);E.appendChild(m);a.appendChild(E);i.push(E)}E.setAttribute("transform","translate("+_.x+", "+_.y+")");y.graphic=k;if(u&&u[z]&&!u[z].getData()){u[z].init(y,l[z],o[z],s[z].id||c.NULL_VALUE,null)}}}else{t=this._dataPointRenderer;var N,M,B;T.call(this,r);for(z=0;z<r.length;z++){N=undefined;M=undefined;y=r[z];_=n[z];B={isClose:y.isClose,isNegative:y.ctx[y.ctx.measureNames]<0,isZero:y.isZero};if(g){E=p.find(a,l[z]);if(t.update){if(y.graphic.pattern==="noFill"){y.path=this._generatePath(y.graphic,B);if(y.isZero){y.graphic.pathStrokeWidth=0}else{y.graphic.pathStrokeWidth=3}}t.update(E,y)}if(u&&u[z]&&!u[z].getData()){i.push(E)}this._updateStrokeWidth(E)}else{if(y.graphic.pattern==="noFill"){y.path=this._generatePath(y.graphic,B);if(y.isZero){y.graphic.pathStrokeWidth=0}else{y.graphic.pathStrokeWidth=3}N=v.clone(y.graphic);delete N.bgColor;delete N.drawingEffect;delete N.pattern;N.fill="transparent"}m=t(y);if(N){M=t({graphic:N})}E=h.create("g");p.setDataId(E,l[z]);p.setDataPointId(E,s[z].id);if(u){u[z].setNode(E)}A=y.ctx;P.push(A);d.setContext(E,A);d.setAdditionCtx(E,y.additionCtx);O=+A[A.measureNames];if(O>=0){P.range[1]+=O}else{P.range[0]+=O}I=o[z];I.seriesIndex=s[z]._addr[1];I.itemIndex=s[z]._addr[0];I.strokeWidth=M?M.getAttribute("stroke-width"):m.getAttribute("stroke-width");if(y.graphic&&y.graphic.pattern){if(y.graphic.pattern==="noFill"){I.pattern="noFill"}else{I.patternFill=m.getAttribute("fill")}}d.setData(E,I);E.setAttribute("class",c.CSS.CLASS.DATAPOINT+" "+c.CSS.CLASS.MORPHABLEDATAPOINT+" "+c.CSS.CLASS.DATAPOINTDEFAULT);E.appendChild(m);if(M){E.appendChild(M)}a.appendChild(E);i.push(E)}E.setAttribute("transform","translate("+_.x+", "+_.y+")");if(u&&u[z]&&!u[z].getData()){u[z].init(y,l[z],o[z],s[z].id||c.NULL_VALUE,null)}}}if(!g){d.setData(a,P)}return a};D.prototype._adjustPosition=function(e,t){var i=this.isHorizontal();if(i&&e.width<0){e.width=e.width>-1?1:Math.abs(e.width);e.x-=e.width+.5}if(!i&&e.height<0){e.height=e.height>-1?1:Math.abs(e.height);e.y-=e.height+.5}};D.prototype._additionalExtraData=function(e){if(this._isFlexibleStack){e.flexibleStackId=e.itemIndex.toString()+c.FLEXIBLE_STACK.ID_SEPARATOR+this._barGroupIndices[e.seriesIndex]}};D.prototype._getSeriesRenderer=function(){if(this._isFlexibleStack){return new S(this._renderSeries.bind(this),this._updateSeries.bind(this))}};m.registerClazz("stacked_column",D);m.registerClazz("stacked_bar",D);y.register(A.DATAPOINT_NAVIGATOR,A.STACKED_COLUMN,_);return D});define("sap/viz/chart/components/util/PercentageDataLabelUtil",["sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils"],function e(t,i,a,r){var o={getTypes:function(e){var t=e.get("type");var i;if(t==="valueAndPercentage"||t==="valueAxisAndPercentage"){i=["value","percentage"]}else if(t==="percentage"){i=["percentage"]}else{i=["value"]}return i},mergeDataLabels:function(e,t){var i=e.get("type");var a;if(i==="valueAndPercentage"||i==="valueAxisAndPercentage"){a=t[1]?t[0]+" ("+t[1]+")":t[0]}else{a=t[0]}return a},getDataLabelInfo:function(e,i){var a=t.getContextByDataModel(e,i);return{key:a.measureNames,value:a[a.measureNames],percentage:a.percentage}}};return o});define("sap/viz/chart/components/datalabels/PercentageDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/datalabels/StackedDataLabels","sap/viz/chart/components/util/PercentageDataLabelUtil"],function(e,t,i,a){var r=function(e,t){r.superclass.constructor.apply(this,arguments)};e.extend(r,i);r.prototype._getDataLabelInfo=function(e){var t=this._data&&this._data.rawData&&this._data.rawData.dataModel;return a.getDataLabelInfo(e,t)};r.prototype._buildDataLabelText=function(e,i,r,o,n){var l=i.value;if(l===0&&!this.drawZero(n)){return null}return t.buildDataLabelText(this._properties,e,i,r,o,a.getTypes,a.mergeDataLabels,null)};return r});define("sap/viz/chart/components/plots/PercentagePlot",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/Constants","sap/viz/chart/components/plots/StackedColumnPlot","sap/viz/chart/components/renderers/GridlineRenderer","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/datalabels/PercentageDataLabels","sap/viz/chart/components/plots/XYPlotFactory"],function e(t,i,a,r,o,n,l,s){var u=function(e,t){u.superclass.constructor.apply(this,arguments);this._isPercent=true};t.extend(u,r);u.prototype._getDataHandler=function(){if(this._options.isDualValueAxis){return{valueAxis:new n.getPercentageStackHandler,valueAxis2:new n.getPercentageStackHandler}}else{return{valueAxis:new n.getPercentageStackHandler}}};u.prototype._total=function(e,t){var i=t.hasOwnProperty("valueAxis2")?this._data.valueAxis2:this._data.valueAxis;var a=t.hasOwnProperty("valueAxis2")?t.valueAxis2:t.valueAxis;if(a<0&&i.categorySum[e]>0){return false}i.scale.total(i.categorySum[e]);return true};u.prototype._getPosition=function(e,t,i){var a=this._total(t,i);if(!a){return null}return u.superclass._getPosition.apply(this,arguments)};u.prototype._buildWrapperContext=function(e,t){var i=e.hasOwnProperty("valueAxis")?"valueAxis":e.hasOwnProperty("valueAxis2")?"valueAxis2":null;if(i){t.percentage=Math.abs(this._data[i].scale.scale(e[i]))}return t};u.prototype._buildWrapperConfig=function(e,t,i,a){i=this._buildWrapperContext(e,i);return u.superclass._buildWrapperConfig.apply(this,[e,t,i,a])};u.prototype._buildData=function(e){var t=u.superclass._buildData.apply(this,arguments);t.percentageValue=e.ctx.percentage;return t};u.prototype._drawGridlines=function(e){var t=this._realSize;var r=this.isHorizontal();var n=r?a.DIRECTION.VERTICAL:a.DIRECTION.HORIZONTAL;var l=this._properties.proxy("gridline");var s=r?[0,t.width]:[t.height,0];var u=new i([0,1],s);u.setTickHint(this._data.valueAxis.tickHint);o.drawValueGridline(e,t.width,t.height,u,l,n,this._effectManager)};u.prototype._getDataLabels=function(e,t){return new l(t,{name:e,horizontal:this.isHorizontal()})};s.registerClazz("100_stacked_column",u);s.registerClazz("100_stacked_bar",u);return u});define("sap/viz/chart/components/util/LineSeriesUtil",["sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/renderers/LineRenderer","sap/viz/chart/components/util/SeriesUtil"],function(e,t,i,a,r,o,n,l,s){var u=o.convertColor;var c="combination-line";var h=r.CSS.CLASS;var p=h.LINES+" "+h.MORPHABLELINE;var d=r.LINE_TYPE;function f(e,t,i){e.graphic={color:e.color,width:t};delete e.color;if(e.type===d.DASHED||e.type===d.DOTTED){e.graphic.dash=r.LINE_DASH_TYPE_ARRAY}else if(e.type===r.LINE_TYPE.DOT){e.graphic.dash="0,"+t*2;e.graphic.linecap="round"}delete e.type;e.isHorizontal=i}function v(t,i,a,r,o,n){var l=i(a,n)||n.renderer(a);l.setAttribute("class",p);if(o){l.setAttribute(c,"true")}e.setData(l,a.graphic);e.setContext(l,r);t.appendChild(l)}function g(e,t,i,a,r,o){var n=[];var l={points:[]};var u,c,h,p,f,v;var g,m,y,_,A,b;var x=e.length;for(var S=0;S<x;S++){u=e[S];if(!u||!u.position){if(l.points.length>=2){l.color=y;l.type=A;n.push(l)}m=null;l={points:[]};continue}c=u.dpConfig;f=u.position;g=[f.x,f.y];g.id=c.dataId;if(m==null){l.points.push(g)}p=[c.rawData.dp.context()];v=[c.rawData.dp.additionCtx()];h=e[S+1];m=null;if(h&&h.position){p.push(h.dpConfig.rawData.dp.context());v.push(h.dpConfig.rawData.dp.additionCtx());f=h.position;m=[f.x,f.y];m.id=h.dpConfig.dataId}_=i.register({fillColor:s.parseSemanticLineColor(p,t,a,v)});b=s.parseSemanticLineType(p,t,o,v);if(l.points.length>=2&&(!r&&(A===d.DASHED||A===d.DOTTED||A===d.DOT)||y!==_||A!==b)){l.color=y;l.type=A;n.push(l);m=null;l={points:[g]}}else if(m){l.points.push(m)}y=_;A=b}if(l.points.length>=2){l.color=y;l.type=A;n.push(l)}return n}function m(e){var t;var i=[],a;for(var r=0;r<e.length;r++){if(!e[r]||!e[r].position){i.push("");continue}t=e[r].position;a=[t.x,t.y];a.id=e[r].dpConfig.dataId;i.push(a)}return i}var y={drawLine:function(i,a,o,n,l,s,u,c,p,y){var _=m(a);var A={points:_,isHorizontal:c,ctx:s};if(u.prepare){A=u.prepare(A,y)||A}var b=l.color;var x=l.lineWidth;var S=l.isCombination;var D=t.create("g");D.setAttribute("class",h.LINES_GROUP);var w={color:b,width:x};if(l.lineType===d.DASHED||l.lineType===d.DOTTED){w.dash=r.LINE_DASH_TYPE_ARRAY}else if(l.lineType===d.DOT){w.dash="0,"+x*2;w.linecap="round"}e.setData(D,w);e.setContext(D,s);var C;if(o.hasDataPointLineStyle()||l.lineType===d.DASHED||l.lineType===d.DOTTED||l.lineType===d.DOT){var T=g(a,o,n,b,p,l.lineType);T.forEach(function(e){f(e,x,c);v(D,u,e,s,S,y)})}else{A.graphic=w;v(D,u,A,s,S,y)}i.insertBefore(D,i.firstChild)},updateLine:function(t,r,o,n,l,s,u,c,p,y){if(!a.isFunction(u.update)){return false}var _=m(r);var A={points:_,isHorizontal:c,ctx:s};if(u.prepare){A=u.prepare(A,y)||A}var b=l.color;var x=l.lineWidth;var S=l.isCombination;var D;if(o.hasDataPointLineStyle()||l.lineType===d.DASHED||l.lineType===d.DOTTED||l.lineType===d.DOT){var w=t.querySelector("."+h.LINES_GROUP);var C=t.querySelectorAll("."+h.LINES);var T=g(r,o,n,b,p,l.lineType);T.forEach(function(t,i){f(t,x,c);D=C[i];if(D){u.update(D,t,y);e.setData(D,t.graphic)}else{v(w,u,t,s,S,y)}});for(var z=T.length;z<C.length;++z){i.remove(C[z])}}else{D=t.querySelector("."+h.LINES);u.update(D,A,y)}return true},linkLine:function(t){var i=null;var a;for(var r=0;r<t.length;r++){var o=t[r];if(!o||!o.dataPoint){i=o;continue}var l=e.getData(o.dataPoint);l.type="line";l.translate=o.dpConfig.data.translate;if(i&&i.dataPoint){a=i.dataPoint;l.prev=n.getDataPointId(a);e.getData(a).next=n.getDataPointId(o.dataPoint)}i=o}}};return y});define("sap/viz/chart/components/renderers/SmoothLineRenderer",["sap/viz/framework/common/util/SVG"],function(e){var t=function(){var t={};var i=function(e,t,i,a){var r=a.leftControlY;if(r>e&&r>t){r=a.leftControlY=Math.max(e,t);a.rightControlY=t*2-r}else if(r<e&&r<t){r=a.leftControlY=Math.min(e,t);a.rightControlY=t*2-r}var o=a.rightControlY;if(o>i&&o>t){o=a.rightControlY=Math.max(i,t);a.leftControlY=t*2-o}else if(o<i&&o<t){o=a.rightControlY=Math.min(i,t);a.leftControlY=t*2-o}};var a=function(e,a,r,o){var n=2.4;var l=0;var s=1;if(o){l=1;s=0}var u=e[l];var c=e[s];var h=r[l];var p=r[s];var d=a[l];var f=a[s];var v=((n-1)*d+u)/n;var g=((n-1)*f+c)/n;var m=((n-1)*d+h)/n;var y=((n-1)*f+p)/n;var _=(y-g)*(m-d)/(m-v)+f-y;var A={};A.leftControlY=g+_;A.rightControlY=y+_;i(c,f,p,A);var b=t[a.id];b.leftControl[l]=v;b.leftControl[s]=A.leftControlY;b.rightControl[l]=m;b.rightControl[s]=A.rightControlY};var r=function(e){var i=e.id;var a=t[i];if(!a){a=t[i]={}}["leftControl","rightControl"].forEach(function(t){a[t]=e.slice()})};var o=function(e,t){var i,o,n,l,s;for(var u=0,c=e.length;u<c;++u){i=e[u];if(!i){continue}r(i);o=e[u-1];n=e[u+1];if(u>0&&o&&n){a(o,i,n,t)}}return e};var n=function(e){var i,a,r,o,n;var l="";var s=true;for(var u=0,c=e.length;u<c;u++){i=e[u];if(!i){s=true;continue}a=e[u-1];if(s){l+="M";l+=i[0]+","+i[1]}else{o=t[a.id].rightControl;n=t[i.id].leftControl;l+="C";l+=o[0]+","+o[1]+" ";l+=n[0]+","+n[1]+" ";l+=i[0]+","+i[1]}s=false}return l};var l=function(t){var i=t.points;var a;var r=t==null||t.isHorizontal==null?i:e.simplifyPoints(i,t);if(r===i){a=n(r)}else{a=e.outputPath(r)}return a};var s=function(t){var i=t.graphic;var a=e.create("path");a.setAttribute("d",l(t));a.setAttribute("fill","none");a.setAttribute("stroke-linejoin","round");a.setAttribute("stroke",i.color);a.setAttribute("stroke-width",i.width);if(i.dash){a.setAttribute("stroke-dasharray",i.dash)}if(i.linecap){a.setAttribute("stroke-linecap",i.linecap)}return a};s.prepare=function(e){o(e.points,e.isHorizontal);return e};s.update=function(e,t){e.setAttribute("d",l(t));if(t.graphic){var i=t.graphic;if(i.color){e.setAttribute("stroke",i.color)}if(i.width){e.setAttribute("stroke-width",i.width)}if(i.dash){e.setAttribute("stroke-dasharray",i.dash)}else{e.removeAttribute("stroke-dasharray")}if(i.linecap){e.setAttribute("stroke-linecap",i.linecap)}else{e.removeAttribute("stroke-linecap")}}};s.expose={renderer:s,prepare:s.prepare,update:s.update};return s};return t});define("sap/viz/chart/components/util/LineRendererUtil",["sap/viz/chart/components/renderers/LineRenderer","sap/viz/chart/components/renderers/SmoothLineRenderer"],function(e,t){var i=function(i,a){var r=i;if(r){return r}else{if(a){r=t()}else{r=e()}}return r};var a=function(i){return i?t():e()};return{getRenderer:i,getDefaultRenderer:a}});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForLine",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/interaction/Constants","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n,l,s,u){var c=["info/timeseries_line"];var h=["info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_combination"];var p=c.concat(h);var d=["info/line","info/horizontal_line","info/dual_line","info/dual_horizontal_line","info/combination","info/horizontal_combination","info/dual_combination","info/dual_horizontal_combination","info/stacked_combination","info/horizontal_stacked_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination"].concat(c);d=r.addTrellisType(d);var f=d.concat(h);f=r.addTrellisType(f);var v=e.CSS.CLASS;var g="datapoint";var m=s.setMakerOpacity;var y=[{id:"selectDataPoint_line",triggerEvent:{name:"selectDataPoint",supportedChartTypes:d},handler:function(e,t){if(t.isBigDataMode()){s.selectOnLineDuringBigData(e,t)}else{s.selectOnLineOnNormalMode(e,t)}}},{id:"deselectDataPoint_line",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:d},handler:function(e,r){if(r.isBigDataMode()){return}r.fireEvent(e,true);var o=i.turnToArray(e.data.targets);var l;var u=r.getProperties();var c;var h=t.isExist(u.get("plotArea.markerRenderer"));o.forEach(function(t){n.unhighlight(t);c=s.getLineRenderer(r,t);s.renderLightLine(r,t,false,c);var o=1;var p=a.getData(t)||{};if(e.data.isAnyOtherSelected){l=u.get("interaction.deselected")}else{l=u.get("plotArea.dataPoint");if(p){o=p.strokeWidth}}var d=!p.isZeroValue;i.drawStroke(r,t,"path, rect",l.stroke,o,undefined,p);i.drawFill(r,t,"path, rect",l,h,d);m(r,t)})}},{id:"hoverOnDataPoint_line",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:d},handler:function(e,r){if(r.isBigDataMode()&&!r.isTrellis()){s.highlightOnLineDuringBigData(e,r)}else{r.fireEvent(e,true);var o=i.turnToArray(e.data.targets);var n=r.getProperties();var l=n.get("interaction.hover");var u=t.isExist(n.get("plotArea.markerRenderer"));o.forEach(function(t){var o=a.getData(t)||{};var n=!o.isZeroValue;i.drawStroke(r,t,e.data.byKeyboard?"path":"path, rect",l.stroke,2,undefined,o);i.drawFill(r,t,"path, rect",l,u,n)})}}},{id:"unhoverOnDataPoint_line",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:d},handler:function(e,r){if(r.isBigDataMode()&&!r.isTrellis()){s.unhighlightOnLineDuringBigData(e,r)}else{r.fireEvent(e,true);var o=i.turnToArray(e.data.targets);var n=r.getProperties();var l;var u=t.isExist(n.get("plotArea.markerRenderer"));o.forEach(function(e){var t;var o=1;var s=a.getData(e)||{};if(d3.select(e).classed(v.DATAPOINTSELECTED)){l=n.get("interaction.selected");t=true}else{if(r.shouldUseDeselectedColor()){l=n.get("interaction.deselected")}else{l=n.get("plotArea.dataPoint");if(s){o=s.strokeWidth}}t=false}var c=!s.isZeroValue;i.drawStroke(r,e,"path, rect",l.stroke,o);i.drawFill(r,e,"path, rect",l,u,c);if(!t){m(r,e)}})}}},{id:"clearPlot_line",triggerEvent:{name:"clearPlot",supportedChartTypes:d},handler:function(e,r){r.fireEvent(e,true);r._getDecorationLayer().clear();var n=e.data.isGray;var l=e.data.rangeSelection;var u=l&&l!=="clear";var c=r.getProperties();var h=c.get("interaction.deselected");s.cleanLine(e,r);var p=r.getNodes(r.NodeType.DATA_POINT,false);if(!p||!p.length){return}var d=t.isExist(c.get("plotArea.markerRenderer"));p.forEach(function(e){var t=1;var l=a.getData(e)||{};if(n||u){h=c.get("interaction.deselected");if(u){h=o.extend(true,{},h);h.opacity=1}}else{h=c.get("plotArea.dataPoint");if(l){t=l.strokeWidth}}var s=!l.isZeroValue;i.drawStroke(r,e,"path, rect",h.stroke,t,undefined,l);i.drawFill(r,e,"path, rect",h,d,s);m(r,e)})}},{id:"hover_range_selection_line",triggerEvent:{name:"hover",supportedChartTypes:p,targets:"v-m-action-layerrange"},handler:function(e,t){s.showDetailForRangeSelectionWhenHover(e,t)}},{id:"hover_on_plot_time_line",triggerEvent:{name:"hover",supportedChartTypes:c,targets:"v-m-plot"},handler:function(e,t){s.hoverOnLineDuringBigData(e,t)}},{id:"hover_on_non_plot_time_line",triggerEvent:{name:"hover",supportedChartTypes:c,excludeTargets:["v-m-plot",e.CSS.CLASS.DATAPOINTS_MODULE]},handler:function(e,t){if(t.getStatus("rangeSelection")){return}t._getActionLayer().clear(g);t._getDecorationLayer().clear(g);t.fireEvent("hideTooltipHoverOnPlot",{mode:"infoMode"})}},{id:"hover_on_non_datapoint_time_line",triggerEvent:{name:"hover",supportedChartTypes:c,excludeTargets:[v.DATAPOINT,v.DATALABEL]},handler:function(e,t){if(t.isBigDataMode()||t.getStatus("rangeSelection")){return}t.fireEvent(e,true)}},{id:"click_on_non_selection_line",triggerEvent:{name:"click",supportedChartTypes:f,excludeTargets:i.getDeselAllExTargets()},handler:function(e,t){if(!t.getProperties().get("interaction.enableDeselectAll")){return}if(t.isBigDataMode()&&h.indexOf(t._getChartType())>-1){return}if(p.indexOf(t._getChartType())>-1){s.clickOnLineDuringBigData(e,t)}else{t.fireEvent(e,true)}}},{id:"clearPlot_timeseries_line",triggerEvent:{name:"clearPlot",supportedChartTypes:p},handler:function(e,t){t.fireEvent(e,true);if(!e.data.rangeSelection){t._getDecorationLayer().clear();t._getActionLayer().clear()}}},{id:"update_range_selection_effect_line",triggerEvent:{targets:"v-m-action-layerrange",name:"down",supportedChartTypes:p},handler:function(e,t){s.updateRangeEffect(e,t)}},{id:"recover_range_selection_effect_line",triggerEvent:{targets:"v-m-action-layerrange",name:"up",supportedChartTypes:p},handler:function(e,t){s.recoverRangeEffect(e,t)}}];u.registerAll(y);return y});define("sap/viz/chart/components/plots/BaseLinePlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/chart/components/plots/BaseColumnPlot","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/LineSeriesUtil","sap/viz/chart/components/renderers/LineRenderer","sap/viz/chart/components/util/LineRendererUtil","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/DataPointBehaviorConfigForLine"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d){var f=i.CSS.CLASS;var v=function(e,t){v.superclass.constructor.apply(this,arguments);this._lineRenderer=null;this._defaultLineRenderer=h.getDefaultRenderer(this._properties.get("isSmoothed"))};t.extend(v,a);v.prototype.destroy=function(){v.superclass.destroy.apply(this,arguments);this._lineRenderer=null;this._dpPlotNode=null;this._dpParentNode=null;this._extendSize=null};v.prototype.getLineRenderer=function(){if(!this._lineRenderer){this._lineRenderer=c()}return this._lineRenderer};v.prototype.getDefaultLineRenderer=function(){return this._defaultLineRenderer};v.prototype._preRender=function(){v.superclass._preRender.apply(this,arguments);this._generateMarkerPath();this._lineRenderer=null};v.prototype._createMainNode=function(e){var t=v.superclass._createMainNode.apply(this,arguments);if(this._extendSize){this._dpPlotNode=e.parentNode.querySelector("."+i.CSS.CLASS.DATAPOINTS_MODULE);var a=this._dpPlotNode;a.setAttribute("transform",e.getAttribute("transform"));var r=e.parentNode.querySelector("."+i.CSS.CLASS.DATAPOINTS_PLOT);if(!r){r=p.create("g",a);r.setAttribute("class",i.CSS.CLASS.DATAPOINTS_PLOT)}this._dpParentNode=d3.select(r);t.dpPlotNodes=r;if(!this._options.disableClipPath&&!this._notNeedClippath){a.setAttribute("clip-path","url(#"+this.clipPath.getAttribute("id")+")")}}return t};var g=function(e,t,i){var a={valueAxis:[Infinity,-Infinity],valueAxis2:[Infinity,-Infinity]};var r={};r.valueAxis=t._valueAxis&&t._valueAxis.lineRawRange;r.valueAxis2=t._valueAxis2&&t._valueAxis2.lineRawRange;for(var o=0;o<e.length;o++){if((!i||i(o)==="line")&&e[o][0]){var n=e[o][0].hasOwnProperty("valueAxis")?"valueAxis":"valueAxis2";var l=e[o][0].hasOwnProperty("valueAxis")?"color":"color2";var s=e[o][0][l]?d.isExist(e[o][0][l].mndIndex)?e[o][0][l].mndIndex:0:0;a[n][1]=a[n][1]<r[n][s][1]?r[n][s][1]:a[n][1];a[n][0]=a[n][0]>r[n][s][0]?r[n][s][0]:a[n][0]}}return a};v.prototype._getClipPathAttribute=function(e,t,i,a){var r,o;var n=e+1,l=t+1,s=0,u=0;var c=this.isHorizontal(),h=c?e:t;if(!this.isBigDataMode()&&this._data.rawData&&this._data.rawData.dataModel&&!this._isInTrellis&&this.runtime().propertyManager().get("valueAxis.layout.direction")!=="topDown"){var p=[],d,f,v,m,y;var _=this._options&&this._options.isDualValueAxis?2:1;var A=this._options&&this._options.valueAxisIndex==="valueAxis2";for(var b=0;b<_;b++){var x=-1;d="valueAxis"+(b||A?"2":"");f=a[d].scale;v=f.getDomain();m=f.getDomainFixed();y=f.isFixed();if(v[0]>=0&&!(y&&m[0])){x=0}else if(v[1]<=0&&!(y&&m[1])){x=1}if(x!==-1&&v[x]!==0&&!f.getZeroAdjusted()){x=-1}p.push(x)}if(p.indexOf(-1)===-1&&(_===1||p[0]===p[1])){var S=0,D,w;var C=this._properties.get(this._markerPropName+".size");var T=C/2+2;if(T>8){T=8}var z=g(this._getSeries(),this._data.rawData.dataModel,this._getDataShape?this._getDataShape.bind(this):null);for(var L=0;L<_;L++){d="valueAxis"+(L||A?"2":"");D=a[d].scale.getDomain();w=a[d].scale.getRange();var P=(Math.abs((D[1]-D[0])*T/(h*(w[1]-w[0])))-Math.abs(z[d][p[L]]))/((D[1]-D[0])*(w[1]-w[0]));if(P>0){S=Math.max(S,P)}}this._extendSize=r=S*h;if(r&&i&&(!c&&(i.y===1||!i.y)||c&&(i.x===1||!i.x))){o=h+1+r;if(this.isHorizontal()){n=o}else{l=o}if(p[0]===0&&c){s=-r}else if(p[0]===1&&!c){u=-r}}}}return{y:-1,width:n,height:l,transform:"translate("+s+", "+u+")"}};v.prototype.zoom=function(e){if(this.clipPath&&e){this._setClipPathAttribute(this.clipPath.querySelector("rect"),this._size.width,this._size.height,e,this._data)}v.superclass.zoom.apply(this,arguments)};v.prototype.scroll=function(){v.superclass.scroll.apply(this,arguments);if(!this._isInTrellis&&this._dpParentNode&&this._plotDpParentNode){this._dpParentNode.attr("transform",this._plotDpParentNode.attr("transform"))}};v.prototype._hideDataPoints=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){this._hideNode(e,i)}}this._lightLineOutOfRange(e,t)};v.prototype._lightLineOutOfRange=function(e,t){var i=function(i){var a,r;for(a=0;a<t.min;a++){r=e[a];if(r&&r.getDataId()===i){return true}}for(a=t.max+1;a<e.length;a++){r=e[a];if(r&&r.getDataId()===i){return true}}return false};var a=this._selection.selectAll("."+f.LIGHT_LINE)[0];for(var o=0;o<a.length;o++){var n=a[o];var l=parseInt(n.getAttribute("data-from"));var s=parseInt(n.getAttribute("data-to"));if(i(l)&&i(s)){r.remove(n)}}};v.prototype._drawDataPoint=function(e,t){var i=v.superclass._drawDataPoint.apply(this,arguments);var a=t.getData();a.shape=this._getMarkerShape();o.setData(i,a);return i};v.prototype._buildWrapperConfig=function(e,t,i,a){var r=v.superclass._buildWrapperConfig.apply(this,arguments);r.graphic.shape=this._getMarkerShape();return r};v.prototype._renderNode=function(e,t,i,a){var r=t.graphic.d;if(t.graphic.pattern==="noFill"&&this._markerShadow){t.graphic.d=this._markerShadow}var o=v.superclass._renderNode.apply(this,arguments);t.graphic.d=r;return o};v.prototype.update=function(){v.superclass.update.apply(this,arguments);this._updateLightLine()};v.prototype._updateLightLine=function(){if(!this._selection){return}var e=this._getDpPlotNode(),t=e.querySelectorAll("."+f.LIGHT_LINE);var i=this.getLineRenderer();var a=this.isHorizontal();[].forEach.call(t,function(t){var n=t.getAttribute("data-from");var l=s.findByDataPointId(e,t.getAttribute("data-from"));var u=t.getAttribute("data-to");var c=s.findByDataPointId(e,t.getAttribute("data-to"));if(!l||!c){r.remove(t)}else{var h=[o.getData(l).translate.slice(),o.getData(c).translate.slice()];h[0].id=n;h[1].id=u;var p={points:h,isHorizontal:a};if(i&&i.update){i.update(t.firstChild,p)}}})};function m(e){e=parseInt(e,10);return e>=0&&e<=7?e:2}v.prototype.getSeriesDPStyle=function(e,t){var i=!(this._options.renderType&&this._options.renderType.indexOf("combination")>-1&&this._seriesType&&this._seriesType[e]==="bar");var a=v.superclass.getSeriesDPStyle.call(this,e,t,i);return a};var y=["diagonalLightStripe","diagonalStripe","reverseDiagonalStripe"];v.prototype._getPatternConfig=function(e,t,i){var a=!(this._options.renderType&&this._options.renderType.indexOf("combination")>-1&&i.seriesType==="bar");e=v.superclass._getPatternConfig.apply(this,arguments);if(a&&e.graphic.pattern&&y.indexOf(e.graphic.pattern)>-1){e.graphic.pattern=null}return e};v.prototype.getSeriesStyle=function(e,t){var i=this._semanticMgr;var a=this._properties;var r=this._effectManager;t=t||l.buildSeriesLineContext(this._data,e);var o=i.analyzeSeriesStyle(t,"line");var s;if(o&&o.line&&o.line.width!=null){s=o.line.width}else{s=a.has("line.width")?a.get("line.width"):a.get("width")}s=m(s);var u;if(o&&o.line&&o.line.color!=null){u=o.line.color}else if((i.hasDataPointColorStyle()||i.hasDataPointLineStyle())&&i.isOverrideMode()&&i.shouldChangeColor()){u=i.getOthersStyle("color").properties.color}else{var c=l.getSeriesScaleInfo(this._data,e,["color","color2"]);if(c){u=this._data[c.field].scale.scale(c.domain)}else{u=this._getDefaultColor()}}u=r.register({fillColor:n.convertColor(u)});var h;if(o&&o.line&&o.line.type){h=o.line.type}return{color:u,lineWidth:s,lineType:h}};v.prototype._getDefaultColor=function(){return(this._data.color||this._data.color2).scale.getRange()[0]};v.prototype._isNeedSimplifyLine=function(){return this._isBigData};v.prototype._drawLine=function(e,t,i,a){if(!this._isLineVisible()){return}var r=l.buildSeriesLineContext(this._data,i);var o=this.getSeriesStyle(i,r);var n=this.getLineRenderer();var s=this._semanticMgr;var c=this._effectManager;var h=this.isHorizontal();var p=this._isNeedSimplifyLine();var d=false;if(a){d=u.updateLine(e,t,s,c,o,r,n,h,p,this._defaultLineRenderer.expose)}if(!d){d3.select(e).select("."+f.LINES_GROUP).remove();u.drawLine(e,t,s,c,o,r,n,h,p,this._defaultLineRenderer.expose)}if(!p){u.linkLine(t)}};v.prototype._updateLine=function(e,t,i){this._drawLine(e,t,i,true)};v.prototype._isLineVisible=function(){return this._properties.get("lineVisible")};return v});define("sap/viz/chart/components/renderers/PathRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics"],function(e,t){var i=function(i){var a=e.create("path");var r=i.graphic;if(r.d){a.setAttribute("d",r.d)}var o=r.fill;var n=r.stroke;var l=r.drawingEffect;var s=r.strokeWidth;if(r.pattern==="noFill"){l=null;o=r.bgColor;n=r.fill;s=2}if(i.effectManager){o=i.effectManager.register({drawingEffect:l,fillColor:o,patternEffect:r.pattern!=="noFill"?r.pattern:null,graphType:r.shape})}a.setAttribute("fill",o);var u=r.opacity>=0&&r.opacity<=1?r.opacity:1;if(u!==1){a.setAttribute("fill-opacity",u);a.setAttribute("stroke-opacity",u)}if(n){a.setAttribute("stroke",n);a.setAttribute("stroke-width",s)}t.setCustomizationInfo(a,{defaultRenderer:true});return a};i.expose={renderer:i};return i});define("sap/viz/chart/components/datalabels/LineDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a){var r=3;function o(e){var t=e.parentNode,r=a.getData(e);return{prev:r.prev?i.findByDataPointId(t,r.prev):undefined,next:r.next?i.findByDataPointId(t,r.next):undefined}}function n(e){if(e&&e.hasAttribute("transform")){var t=e.getAttribute("transform").replace(/translate|\(|\)/g,"").split(/[,| ]+/);return{x:parseFloat(t[0]),y:parseFloat(t[1])}}else{return null}}function l(e,t){var i=this._getDataLabelInfo(e).value,a=o.call(this,e),r=a.prev?this._getDataLabelInfo(a.prev).value:undefined,n=a.next?this._getDataLabelInfo(a.next).value:undefined;if(isNaN(r)&&isNaN(n)){return"up"}else if(isNaN(r)){r=n}else if(isNaN(n)){n=r}if(r>i&&i<n){return t?"up":"down"}else if(r<=i&&i>=n){return t?"down":"up"}else{return"adjust"}}function s(e,t,i,a){var l=o(i),s=n(i),u=n(l.prev),c=n(l.next),h=a?u.y<=s.y&&s.y<=c.y:u.y>=s.y&&s.y>=c.y,p=h?c:u,d=e[0]+(h?t.width:0),f=e[1],v,g,m;g=(s.x-p.x)/(s.y-p.y);m=s.x-g*s.y;v=g*f+m;if(h&&d>=v-r){e[0]-=d-v+r}if(!h&&d<=v+r){e[0]+=v+r-d}return e}var u=function(e,t){u.superclass.constructor.apply(this,arguments);this.isHorizontal=t.isHorizontal;this._labelPosition=this.isHorizontal?"outside":"up"};e.extend(u,t);u.prototype._computeDataLabelTranslate=function(e,t,i,a){if(this.isHorizontal){return u.superclass._computeDataLabelTranslate.apply(this,[e,t,"right",a])}var r=this._properties.parentLevel.get("valueAxis.layout.direction")==="topDown";i=l.call(this,e,r);var o=i;if(i==="adjust"){o=r?"down":"up"}var n=this._computeDataLabelPosition(t,this._fixBBoxWhenInvisible(e),o,a,{},e);if(i==="adjust"){n=s(n,a,e,r)}if(o==="down"){n[1]+=a.height}this._forceInner(n,a);return n};return u});define("sap/viz/chart/components/accessibility/LineDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/BaseDataPointNavigator"],function(e,t){function i(){i.superclass.constructor.apply(this,arguments);this._isRadarChart=this._renderType?this._renderType.indexOf("radar")>-1:undefined;this._firstValueIsNull=[];this._sortedDPByFirstValueAxis=[];this._sortedDPBySecondaryValueAxis=[];this._allDataPoints=[];this._setupDataPointsMap()}e.extend(i,t);var a=i.prototype;a._setupDataPointsMap=function(){if(this._series){var e=this._series.length;for(var t=0;t<this._series.length;t++){var i=[];if(this._series[t]){for(var a=0;a<this._series[t].length;a++){if(this._series[t][a]){i.push(this._series[t][a])}else{if(a===0){this._firstValueIsNull.push(t)}}}this._allDataPoints.push(i)}else{this._allDataPoints.push(undefined)}}}};a.destroy=function(){i.superclass.destroy.apply(this,arguments);this._sortedDPByFirstValueAxis=null;this._sortedDPBySecondaryValueAxis=null;this._allDataPoints=null;this._firstValueIsNull=null};a.left=function(e){return this._isRadarChart?this.getCounterClockwiseDataPointInSeries(e):this._isVerticalRender?this.getPrevDataPointInSeries(e):this._getShortestDPInCategory(e,this._constants.LEFT)};a.right=function(e){return this._isRadarChart?this.getClockwiseDataPointInSeries(e):this._isVerticalRender?this.getNextDataPointInSeries(e):this._getShortestDPInCategory(e,this._constants.RIGHT)};a.up=function(e){return this._isVerticalRender?this._getShortestDPInCategory(e,this._constants.UP):this.getPrevDataPointInSeries(e)};a.down=function(e){return this._isVerticalRender?this._getShortestDPInCategory(e,this._constants.DOWN):this.getNextDataPointInSeries(e)};a.getNextDataPointInSeries=function(e){var t=this.getDataPoint(e);var i=this.locate(t.address());var a=t.address();var r=a[1];var o=null;if(this._allDataPoints[r]){var n=this._allDataPoints[r].indexOf(i)+1;if(n<this._allDataPoints[r].length){o=this._allDataPoints[r][n].dp}}return o};a.getPrevDataPointInSeries=function(e){var t=this.getDataPoint(e);var i=this.locate(t.address());var a=t.address();var r=a[1];var o=null;if(this._allDataPoints[r]){var n=this._allDataPoints[r].indexOf(i)-1;if(n>-1){o=this._allDataPoints[r][n].dp}}return o};a.getClockwiseDataPointInSeries=function(e){var t=this.getDataPoint(e);var i=this.locate(t.address());var a=t.address();var r=a[1];var o=null;if(this._allDataPoints[r]){var n=this._firstValueIsNull.indexOf(r)>-1?this._allDataPoints[r].length-1:0;var l=this._allDataPoints[r].indexOf(i);var s=l===0?this._allDataPoints[r].length-1:l-1;if(s<this._allDataPoints[r].length&&s!==n){o=this._allDataPoints[r][s].dp}}return o};a.getCounterClockwiseDataPointInSeries=function(e){var t=this.getDataPoint(e);var i=this.locate(t.address());var a=t.address();var r=a[1];var o=null;if(this._allDataPoints[r]){var n=this._firstValueIsNull.indexOf(r)>-1?this._allDataPoints[r].length-1:0;var l=this._allDataPoints[r].indexOf(i);if(l===n){return o}var s=l===this._allDataPoints[r].length-1?0:l+1;if(s>-1&&s<this._allDataPoints[r].length){o=this._allDataPoints[r][s].dp}}return o};function r(e){if(this._isDual){if(!this._sortedDPByFirstValueAxis[e]){this._sortedDPByFirstValueAxis[e]=[];this._sortedDPBySecondaryValueAxis[e]=[];var t=this.getColumn(e);for(var i=0;i<t.length;i++){if(this.locate(t[i].address()).valueAxis){this._sortedDPByFirstValueAxis[e].push(t[i])}else if(this.locate(t[i].address()).valueAxis2){this._sortedDPBySecondaryValueAxis[e].push(t[i])}}this._sortedDPByFirstValueAxis[e].sort(function(e,t){return this.locate(e.address()).valueAxis-this.locate(t.address()).valueAxis}.bind(this));this._sortedDPBySecondaryValueAxis[e].sort(function(e,t){return this.locate(e.address()).valueAxis2-this.locate(t.address()).valueAxis2}.bind(this))}}else{if(!this._sortedDataPointsByDirection[e]){this.dataPointValueSortInCategory(e)}}}a.dataPointValueSortInCategory=function(e){this._sortedDataPointsByDirection[e]=this.getColumn(e);var t=this;var i=this._propMgr.get("valueAxis.layout.direction")==="topDown";this._sortedDataPointsByDirection[e].sort(function(e,a){var r=t.locate(e.address());var o=t.locate(a.address());return i?o.valueAxis-r.valueAxis:r.valueAxis-o.valueAxis})};a._getShortestDPInCategory=function(e,t){var i=this.getDataPoint(e);var a=null;var o=-1;var n=i.address();var l=n[0];var s=-1;var u=false;r.call(this,l);if(this._isDual){var c=this.locate(i.address());if(c.valueAxis){s=this._sortedDPByFirstValueAxis[l].indexOf(i)}else if(c.valueAxis2){u=true;s=this._sortedDPBySecondaryValueAxis[l].indexOf(i)}}else{s=this._sortedDataPointsByDirection[l].indexOf(i)}if(t===this._constants.UP||t===this._constants.RIGHT){o=s+1}else if(t===this._constants.DOWN||t===this._constants.LEFT){o=s-1}if(this._isDual){if(!u){if(o>this._sortedDPByFirstValueAxis[l].length-1){a=null}else if(o===-1){o=this._sortedDPBySecondaryValueAxis[l].length-1;a=this._sortedDPBySecondaryValueAxis[l][o]}else{a=this._sortedDPByFirstValueAxis[l][o]}}else{if(o>this._sortedDPBySecondaryValueAxis[l].length-1){a=this._sortedDPByFirstValueAxis[l][0]}else if(o===-1){a=null}else{a=this._sortedDPBySecondaryValueAxis[l][o]}}}else{a=this._sortedDataPointsByDirection[l][o]}return a};a.getColumn=function(e){var t=[];if(this._series){for(var i=0;i<this._series.length;i++){if(this._series[i]&&this._series[i][e]){t.push(this._series[i][e].dp)}}}return t};return i});define("sap/viz/chart/components/trendline/mixin/linePlot",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/trendline/mixin/columnPlot"],function(e,t,i){function a(){}t.extend(a,i);a.prototype._getTrendLineContainer=function(t,i){var a=i.querySelector("."+e.CSS.CLASS.DATAPOINT_GROUP);if(a){i.insertBefore(t,a)}else{i.appendChild(t)}};return a});define("sap/viz/chart/components/plots/LinePlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/plots/BaseLinePlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/chart/components/util/DrawUtil","sap/viz/chart/components/util/LineRendererUtil","sap/viz/chart/components/datalabels/LineDataLabels","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/LineDataPointNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/trendline/mixin/linePlot","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DOM"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b){var x={desktop:{minWidth:24},mobile:{minWidth:48}};var S={desktop:{minWidth:16},mobile:{minWidth:16}};var D=function(e,t){D.superclass.constructor.apply(this,arguments);this._markerPropName="marker";this._dataPointRenderer=h;this._flipNegativeShape=false;var i=this.runtime().semanticManager();i.setUseSemanticDPLineStyle(true);i.setUseSemanticPattern(true);var a=this.runtime().markManager();a.setMode("line");a.lock();a.setSeriesShape("line");this._attachMarkRestrict();this.markerShapePW=this._properties.watch("marker.shape",this._onShapeChange.bind(this));this._isMarkerVisible=this._properties.get("marker.visible")};t.extend(D,l);D.prototype.destroy=function(){this.markerShapePW.remove();this.markerShapePW=null;D.superclass.destroy.call(this);this._dataPointRenderer=null;this._flipNegativeShape=null;this._markerD=null;this._realSize=null};D.prototype._onShapeChange=function(){this._attachMarkRestrict()};D.prototype._EmptyDOM=function(e){D.superclass._EmptyDOM.apply(this,arguments);b.empty(this._getDpPlotNode())};D.prototype._attachMarkRestrict=function(){var e=[],t=this._getMarkerShape(),i=this.runtime().markManager();e.push(t);if(this._options.isDualValueAxis){e.push(t)}i.setShape(e,"circle")};D.prototype._adjustPosition=function(e,t){};D.prototype._preRender=function(){D.superclass._preRender.apply(this,arguments);this._isMarkerVisible=this._properties.get("marker.visible")};D.prototype._applyScroll=function(){D.superclass._applyScroll.apply(this);this.renderTrendlines(this._selection)};D.prototype._getValueScaleHandlers=function(e){var t={isHorizontal:e,alignment:e?"right":"top"};if(this._options.isDualValueAxis){return[s.getValueScaleHandler("valueAxis",t),s.getValueScaleHandler("valueAxis2",t)]}else{return[s.getValueScaleHandler("valueAxis",t)]}};D.prototype._getCategoryScaleHandlers=function(){return[s.getCategoryScaleHandler("categoryAxis",{isHorizontal:false,itemScaleHandler:u.get(false),alignment:"center"})]};D.prototype._getGridLineScale=function(e){var t=this._properties.origin.get("valueAxis.layout.direction");e=t==="topDown"?[e[1],e[0]]:e;return D.superclass._getGridLineScale.call(this,e)};D.prototype._getSeriesRenderer=function(){return new c(this._drawLine.bind(this),this._updateLine.bind(this))};D.prototype._adjustPosition=function(e){};D.prototype._updateDatapoint=function(e,t,i,r){D.superclass._updateDatapoint.apply(this,arguments);if(e&&r.hasOwnProperty("x")&&r.hasOwnProperty("y")){var o=a.getData(e).translate;if(o){o[0]=r.x;o[1]=r.y}}};D.prototype.getLineRenderer=function(){if(!this._lineRenderer){var e=this._properties;this._lineRenderer=d.getRenderer(e.get("lineRenderer"),e.get("isSmoothed"))}return this._lineRenderer};D.prototype._buildConfig=function(e,t,i){var a=D.superclass._buildConfig.apply(this,arguments);a.graphic.d=this._markerD;if(!this._isMarkerVisible){a.graphic.opacity=0}return a};D.prototype._getDataLabels=function(e,t){var i=r.extend({},this._options);i.name=e;return new f(t,i)};D.prototype._getMinCategoryWidth=function(e){var t=!!this._options.inTrellis;var i=this._properties;var a="categoryAxis.label.style.fontSize";var r=parseInt(i.origin.get(a))/parseInt(i.origin.getDefault(a));if(e||t||i.get("isFixedDataPointSize")&&!i.origin.get("interaction.noninteractiveMode")){var o=t?S:x;var l=n.isMobile()?o.mobile.minWidth:o.desktop.minWidth*r;return l}else{return 0}};D.prototype.getPreferredSize=function(){var e=!!this._options.inTrellis;var t=this._getCategoryRange();var i=this.isHorizontal();var a=this._getCategoryCount();var r=i?this._size.height/a:this._size.width/a;var o=!this._properties.origin.get("interaction.noninteractiveMode");var n=this._isRangeIncomplete;function l(){return t&&!n(t)&&o}if(o&&!l()&&(e||n(t)||this._properties.get("isFixedDataPointSize"))){var s=this._getMinCategoryWidth(n(t));var u=false;if(r<s){u=true;r=s}if(u){if(i){this._realSize.height=r*a}else{this._realSize.width=r*a}}if(n(t)&&this._shiftOffsetForIncompleteRange(t,a)){return this._realSize}}if(l()){var c=t[1]-t[0]+1;if(i){this._realSize.height=this._size.height*a/c;this._offset.y=-t[0]*this._realSize.height/a}else{this._realSize.width=this._size.width*a/c;this._offset.x=-t[0]*this._realSize.width/a}}return this._realSize};D.prototype.isMarkerVisible=function(){return this._isMarkerVisible};D.prototype._calMarkProps=function(){var e=this._getSeries();var t=0;e.forEach(function(e){t=Math.max(t,e.length)});var i=this.isHorizontal()?this._realSize.height:this._realSize.width;var a=i/t<10;var r=this._properties.get("marker.displayMode");this._isMarkerVisible=this._properties.get("marker.visible");if(r==="auto"&&a){this._isMarkerVisible=false}};D.prototype._preShowDataPoints=function(){this._calMarkProps();return D.superclass._preShowDataPoints.apply(this,arguments)};v.registerClazz("line",D);v.registerClazz("horizontal_line",D);g.register(y.DATAPOINT_NAVIGATOR,y.LINE,m);(new _).inject(D.prototype);return D});define("sap/viz/chart/components/renderers/AreaRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/util/ColorUtil"],function(e,t,i,a,r){var o="DIRECTION_LEFT";var n="DIRECTION_RIGHT";var l="DIRECTION_BOTH";var s=i.CSS.CLASS;var u=function(e,t,i){if(t.length>1){e.areaPath=g(e.areaPath,t,i);e.detectionPath=f(e.detectionPath,t,i)}else if(t[0]&&t[0].dataPoint){e.linePath=g(e.linePath,t,i);e.detectionPath=f(e.detectionPath,t,i)}};var c=function(e,t){if(!e){return null}var i={areaPath:"",linePath:"",detectionPath:""};var a=e.length;var r=false;var o=false;var n=[];var l;for(var s=0;s<a;s++){l=e[s];if(l){if(l.dataPoint){n.push(l);o=false;r=false;continue}if(!r){n.push(l);o=false}else{if(!o){o=true;u(i,n,t)}n=[l]}r=true}else{if(!o){o=true;u(i,n,t)}n=[]}}u(i,n,t);if(i.areaPath){i.areaPath+="Z"}return i};var h=function(e,t,i,a){var r=c(a.points,a.isHorizontal);if(!r){return}var o,n;[{node:e,pathKey:"areaPath"},{node:t,pathKey:"linePath"},{node:i,pathKey:"detectionPath"}].forEach(function(e){n=e.node;o=r[e.pathKey];if(o){n.setAttribute("d",o)}else{n.removeAttribute("d")}})};var p=function(i){var o=i.ctx;var n=i.graphic;var l=n.opacity;var u=e.create("path");u.setAttribute("class",s.AREA_PATH+" "+s.MORPHABLEAREABG);u.setAttribute("fill",m(i));u.setAttribute("opacity",l);if(i.propManager.get("plotArea.area.stroke.visible")){var c=r.getBgColor(i.propManager,["plotArea.grid.background.color","plotArea.background.color","general.background.color","plotArea.area.stroke.color"]);var p=a.convertColor(c);u.setAttribute("stroke",p);u.setAttribute("stroke-width","1");u.setAttribute("stroke-opacity","1")}var d=e.create("path");d.setAttribute("stroke",n.color);d.setAttribute("stroke-width","1px");d.setAttribute("opacity",l);d.setAttribute("class",s.AREA_LINE_PATH+" "+s.MORPHABLEAREABG);var f=e.create("path");f.setAttribute("class",s.AREA_DETECTION_PATH);f.setAttribute("opacity","0");var v=e.create("g");[u,d,f].forEach(function(e){t.setContext(e,o);v.appendChild(e)});h(u,d,f,i);return v};p._getAreaPathByDataPoints=c;var d=function(e,t,i){if(!e){return}var a=+e.x;var r=+e.y;var s=+e.width;var u=+e.height;var c=e;var h=e;if(t===o||t===l){c={};c.x=i?a:a-10;c.y=i?r-10:r;c.width=s;c.height=u}if(t===n||t===l){h={};h.x=i?a:a+10;h.y=i?r+10:r;h.width=s;h.height=u}return[{position:c},{position:h}]};var f=function(e,t,i){var a=t[0].position;var r=t[t.length-1].position;if(a===r){e=g(e,d(a,l,i),i)}else{e=g(e,d(a,o,i),i);e=g(e,d(r,n,i),i)}return e};var v=function(e,t,i){return e+t+","+i};var g=function(e,t,i){var a=1,r=t.length;var o=t[0].position;e+=v("M",o.x,o.y);var n;if(i){n=v("L",o.x-o.width,o.y);for(;a<r;a++){o=t[a].position;e+=v("L",o.x,o.y);n=v("L",o.x-o.width,o.y)+n}}else{n=v("L",o.x,o.y+o.height);for(;a<r;a++){o=t[a].position;e+=v("L",o.x,o.y);n=v("L",o.x,o.y+o.height)+n}}e+=n;return e};p.update=function(e,t){var i=e.querySelector("."+s.AREA_PATH);var a=e.querySelector("."+s.AREA_LINE_PATH);var r=e.querySelector("."+s.AREA_DETECTION_PATH);h(i,a,r,t)};var m=function(e){var t=e.effectManager.register({drawingEffect:e.graphic.drawingEffect,fillColor:e.graphic.color,direction:e.isHorizontal?"horizontal":"vertical"});return t};p.expose={renderer:p,update:p.update};return p});define("sap/viz/chart/components/util/AreaSeriesUtil",["sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/renderers/AreaRenderer"],function(e,t,i,a,r,o){var n=o;var l=a.convertColor;var s=.8;var u=i.CSS.CLASS;function c(t,a,r){var o=t.length;var n=[];var l,s,u,c;var h=-1;var p=r.seriesFirstAndLastDpIdx;if(p){u=p.firstIdx;c=p.lastIdx}else{u=0;c=o-1}for(var d=0;d<o;d++){if(t[d]){s=t[d].dataPoint;if(!s){continue}l=e.getData(s);l.seriesIndex=a;l.itemIndex=d;var f=p&&t[d].dpConfig.dataId||d;if(o===1){l.labelPosition=i.LABEL_POSITION.MIDDLE;l.isIsolate=true}else if(f===u){l.labelPosition=i.LABEL_POSITION.RIGHT}else if(f===c){l.labelPosition=i.LABEL_POSITION.LEFT;if(h===d-1){l.isIsolate=true}}else{if(d-h===1){l.labelPosition=i.LABEL_POSITION.RIGHT}else{l.labelPosition=i.LABEL_POSITION.MIDDLE}}n.push(s);e.setData(s,l)}else{h=d;if(d<=0||!t[d-1]||!t[d-1].dataPoint){continue}s=t[d-1].dataPoint;l=e.getData(s);if(d===1){l.isIsolate=true}else{if(l.labelPosition===i.LABEL_POSITION.RIGHT){l.labelPosition=i.LABEL_POSITION.MIDDLE;l.isIsolate=true}else{l.labelPosition=i.LABEL_POSITION.LEFT}}}}return n}function h(t){var i=t.length;var a;var r,o,n;for(var l=0;l<i;l++){r=t[l];if(!r||!r.dataPoint){continue}o=null;n=null;if(l>0&&t[l-1]){o=t[l-1]}if(l<i-1&&t[l+1]){n=t[l+1]}a={areaPath:p(r,o,n)};e.setGraphicInfo(r.dataPoint,a)}}function p(e,t,i){var a=e.position;var r=a.x;var o=a.y;var n=a.width;var l=a.height;var s,u;var c,h,p=[];if(t){s=t.position;if(!t.dataPoint){p.push({x:s.x,y:s.y})}else{c=r-n-(r-n-(s.x-s.width))/2;h=o+l-(o+l-(s.y+s.height))/2;p.push({x:c,y:h});c=r-(r-s.x)/2;h=o-(o-s.y)/2;p.push({x:c,y:h})}}p.push({x:r,y:o});if(i){u=i.position;if(!i.dataPoint){p.push({x:u.x,y:u.y})}else{c=r+(u.x-r)/2;h=o+(u.y-o)/2;p.push({x:c,y:h});c=r-n+(u.x-u.width-(r-n))/2;h=o+l+(u.y+u.height-(o+l))/2;p.push({x:c,y:h})}}p.push({x:r-n,y:o+l});p.push(p[0]);return p}var d={drawArea:function(t,i,a,l,p,d,f,v,g,m,y){h(i);var _=v.color;var A={graphic:{color:_,opacity:s,drawingEffect:l},points:i,effectManager:p,ctx:d,isHorizontal:g,propManager:m,seriesFirstAndLastNullVDpIdx:y};var b;if(f){b=f(A,o.expose)}var x=b||n(A);x.setAttribute("class",u.AREA);var S=c(i,a,A);if(f){var D=x.querySelector("."+u.AREA_PATH);if(D){var w=D.getAttribute("fill");if(w){_=w}}}r.setAreaId(x,a);e.setData(x,{color:_,dataPoints:S});e.setContext(x,d);t.appendChild(x)},updateArea:function(i,a,l,s,u,p){if(!i){return false}s=s||n;if(!s.update||!t.isFunction(s.update)){return false}var d=r.findArea(i,l);if(!d){return false}h(a);var f={points:a,isHorizontal:p.isHorizontal,ctx:u,graphic:{color:p.fillColor,opacity:p.opacity,drawingEffect:p.drawingEffect},effectManager:p.effectManager,isMultiSeries:p.isMultiSeries,seriesFirstAndLastDpIdx:p.seriesFirstAndLastDpIdx};s.update(d,f,o.expose);var v=c(a,l,f);e.getData(d).dataPoints=v;return true}};return d});define("sap/viz/chart/components/renderers/AreaRefLineRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics"],function(e,t){var i=function(t){var i=e.create("line");var a=t.graphic;var r=t.effectManager.register({fillColor:a.fill});i.setAttribute("stroke",r);var o=a.opacity>=0&&a.opacity<=1?a.opacity:1;if(o!==1){i.setAttribute("fill-opacity",o);i.setAttribute("stroke-opacity",o)}var n=t.position;i.setAttribute("x1",0);i.setAttribute("y1",0);i.setAttribute("x2",-n.width);i.setAttribute("y2",n.height);i.setAttribute("pointer-events","none");return i};i.update=function(e,t){var i=t.position;e.setAttribute("x2",-i.width);e.setAttribute("y2",i.height)};return i});define("sap/viz/chart/components/datalabels/AreaDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/ColorUtil"],function(e,t,i,a,r,o){var n=function(e,t,i){n.superclass.constructor.apply(this,arguments);this.isHorizontal=t.isHorizontal;this._seriesColorStyleMap=i;this._labelPosition=this.isHorizontal?"left":"down"};var l=0;var s=2;e.extend(n,t);n.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=a.getData(t.dataPoint);return i.isIsolate};n.prototype._render=function(e,t){var i=this._properties.get("hideWhenOverlap");if(i){this._ignoreEmptyDataLabel=true}n.superclass._render.apply(this,arguments)};n.prototype.drawZero=function(){var e=this._properties.get("hideWhenOverlap");if(e){return false}else{return true}};n.prototype._computeDataLabelPosition=function(e,t,i,o,u,c){var h=n.superclass._computeDataLabelPosition.apply(this,[e,t,i,o,u,c]);var p=a.getData(c);var d=h[0];var f=h[1];var v=this._size;var g=p.position&&p.position.width||0;var m=p.position&&p.position.height||0;var y=this._properties.get("hideWhenOverlap");if(this.isHorizontal){if(y&&o.width>Math.abs(g)){return null}if(p.labelPosition===r.LABEL_POSITION.RIGHT){f=f+o.height/2+l}else if(p.labelPosition===r.LABEL_POSITION.LEFT){f=f-o.height/2-l}d=d-g/2+t.width/2+o.width/2;if(d<0){d=s}}else{if(y&&o.height>Math.abs(m)){return null}if(p.labelPosition===r.LABEL_POSITION.RIGHT){d=d+o.width/2+l}else if(p.labelPosition===r.LABEL_POSITION.LEFT){d=d-o.width/2-l}f=f+m/2+t.height/2;if(f>v.height){f=v.height-s}}return[d,f]};n.prototype._setDataLabelColor=function(e,i,r,o){var n=a.getData(e.dataPoint);var l=this._seriesColorStyleMap&&this._seriesColorStyleMap[n.seriesIndex]&&this._seriesColorStyleMap[n.seriesIndex].color;t.prototype._setDataLabelColor.call(this,e,i,r,o,l)};return n});define("sap/viz/chart/behavior/config/tooltip/AreaChartTooltip",["sap/viz/framework/common/util/oo","sap/viz/chart/behavior/config/tooltip/Tooltip"],function e(t,i){var a=function(e){a.superclass.constructor.apply(this,arguments)};t.extend(a,i);var r=8;var o=10;a.prototype._addPadding=function(){if(this.isActionMode()){var e=this._data.position;var t=e.x;var i=e.y;var a=this._getLimit();var n=this._div.node();var l=n.offsetWidth;var s=n.offsetHeight;if(e.direction==="left"||e.direction==="right"){l=l+r;s=s+o}else if(e.direction==="top"||e.direction==="bottom"){l=l+o;s=s+r}else{s=s+o}if(e.direction==="left"){if(t-l<a.left){this._div.style("padding-left",r+"px")}else{this._div.style("padding-right",r+"px")}}else if(e.direction==="right"||!e.direction){if(t+l>a.right){this._div.style("padding-right",r+"px")}else{this._div.style("padding-left",r+"px")}}else if(e.direction==="top"||e.direction==="bottom"){if(t+l<a.right){this._div.style("padding-left",o+"px")}else{this._div.style("padding-right",o+"px")}}else{this._div.style("padding-left",0+"px");this._div.style("padding-right",0+"px")}if(e.direction==="top"||!e.direction){if(i-s<a.top){this._div.style("padding-top",r+"px")}else{this._div.style("padding-bottom",r+"px")}}else if(e.direction==="bottom"){if(i+s>a.bottom){this._div.style("padding-bottom",r+"px")}else{this._div.style("padding-top",r+"px")}}else if(e.direction==="left"||e.direction==="right"){if(i-s>a.top){this._div.style("padding-bottom",o+"px")}else{this._div.style("padding-top",o+"px")}}else{if(i-s<a.top){this._div.style("padding-top",o+"px")}else{this._div.style("padding-bottom",o+"px")}}}else{this._div.style("padding-top",0+"px");this._div.style("padding-bottom",0+"px");this._div.style("padding-left",0+"px");this._div.style("padding-right",0+"px")}};a.prototype._calculateMobilePos=function(e,t){var i=t.x;var a=t.y;var r=this._display.closeButton.size;var o=this._display.mouseMarginTop;var n=this._div.node();var l=n.offsetWidth;var s=n.offsetHeight;if(t.direction==="left"){i=i-l<e.left?i:i-l}else if(t.direction==="right"){i=i+l+r>e.right?i-l:i}else if(t.direction==="top"||t.direction==="bottom"){if(i+l+r<e.right){i=i}else{i=i-l}}else{if(i+l/2+r/2>e.right){i=e.right-l-r/2}else if(i-l/2<e.left){i=e.left}else{i=i-l/2-r/2}}if(t.direction==="top"){a=a-s-o-r/2<e.top?a:a-s-o}else if(t.direction==="bottom"){a=a+s+r/2>e.bottom?a-s:a}else if(t.direction==="left"||t.direction==="right"||!t.direction){if(a-s-o-r/2>e.top){a=a-s-o-r/2}else{a=a}}return{x:i,y:a}};a.prototype._calculateDesktopPos=function(e,t){var i=t.x;var a=t.y;var n=this._div.node();var l=n.offsetWidth;var s=n.offsetHeight;if(this._mode===this._tooltipMode.INFO_MODE){if(t.direction==="left"){i=i-l-r<e.left?i+r:i-l-r}else if(t.direction==="right"){i=i+l+r>e.right?i-l-r:i+r}else if(t.direction==="top"||t.direction==="bottom"){if(i+l+o<e.right){i=i+o}else{i=i-l-o}}else{if(i+l/2>e.right){i=e.right-l}else if(i-l/2<e.left){i=e.left}else{i=i-l/2}}if(t.direction==="top"){a=a-s-r<e.top?a+r:a-s-r}else if(t.direction==="bottom"){a=a+s+r>e.bottom?a-s-r:a+r}else if(t.direction==="left"||t.direction==="right"||!t.direction){if(a-s-o>e.top){a=a-s-o}else{a=a+o}}}else{if(t.direction==="left"){i=i-l<e.left?i:i-l}else if(t.direction==="right"){i=i+l>e.right?i-l:i}else if(t.direction==="top"||t.direction==="bottom"){if(i+l<e.right){i=i}else{i=i-l}}else{if(i+l/2>e.right){i=e.right-l}else if(i-l/2<e.left){i=e.left}else{i=i-l/2}}if(t.direction==="top"){a=a-s<e.top?a:a-s}else if(t.direction==="bottom"){a=a+s>e.bottom?a-s:a}else if(t.direction==="left"||t.direction==="right"||!t.direction){if(a-s>e.top){a=a-s}else{a=a}}}return{x:i,y:a}};return a});define("sap/viz/chart/components/accessibility/AreaDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/accessibility/StackedColumnDataPointNavigator"],function(e,t,i){function a(e){a.superclass.constructor.apply(this,arguments)}e.extend(a,i);var r=a.prototype;r._isMeaningful=function(e){return e&&t.isExist(e.valueAxis)&&!e.isNullValue};return a});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForArea",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/SVG","sap/viz/framework/interaction/InteractionUtils","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n,l,s,u,c){var h=["info/area","info/horizontal_area","info/100_area","info/100_horizontal_area"];h=o.addTrellisType(h);var p=e.CSS.CLASS;var d=p.AREA_REF_LINE;var f=2;var v=1;var g=.8;var m="1";var y=["path","circle","rect","ellipse"];function _(e){var t;if(e.trellisColumn){t=t||"";e.trellisColumn.forEach(function(e){t+=n.getDimensionValue(e)+"."})}if(e.trellisRow){t=t||"";e.trellisRow.forEach(function(e){t+=n.getDimensionValue(e)+"."})}return t}function A(e){var t={};for(var i=0;i<e.length;i++){var r=a.getData(e[i]).trellisInfo;var o=_(r);if(!t[o]){t[o]=[];t[o].info=r}t[o].push(e[i])}return t}function b(e,t,i,r){if(!i&&a.getData(e[0]).trellisInfo){var o=A(e);for(var n in o){if(o.hasOwnProperty(n)){var l=o[n];b(l,t,true,l.info)}}return}var u=t.isHorizontal();var c=e[0].parentNode.parentNode;var h=s.create("g");h.setAttribute("class",p.AREA_GROUP_SELECTED);c.parentNode.insertBefore(h,c);var d=S(e);for(var f=0;f<d.length;f++){if(d[f]){D(t,d[f],h,u,f,r)}}}function x(e){var t=e.getNodes(e.NodeType.AREA_GROUP_SELECTED,false);for(var i=0,a=t.length;i<a;i++){l.remove(t[i])}}function S(e){var t=[];for(var i=0;i<e.length;i++){var r=a.getData(e[i]);t[r.seriesIndex]=t[r.seriesIndex]||[];t[r.seriesIndex][r.itemIndex]=e[i]}return t}function D(e,t,i,o,n,l){if(!t||t.length<2){return}var s=e.getProperties().get("plotArea.drawingEffect");var u,c,h,p;var d=w(n,e,s,l);if(d){p=d.customizedColor||d.defaultColor}var f=e.getProperties();var v=f.get("plotArea.areaRenderer");if(e._getChartType()==="info/combinationEx"){v=f.get("plotArea.area.renderer")}if(v){var g=r.findArea(i.parentNode,n);var m=a.getData(g);if(m.color){p=m.color}}var y=t.length;var _=[],A=[];for(var b=0;b<y;b++){h=t[b];if(t[b]){_.push(a.getData(h));A.push(h)}else{u=z(_,o);if(u){c=C(u,A,p);i.appendChild(c)}_=[];A=[]}}u=z(_,o);if(u){c=C(u,A,p);i.appendChild(c)}}function w(e,t,a,r){var o;if(r){o=t.getModule("main").getChildPlot(r)}else{o=t.getModule("main.plot")}if(!o||!o.getSeriesStyle){return null}var n=o.getSeriesStyle(e);var l={isReverse:true};var s=i.getColors(t,null,null,null,a,l,n);if(s){return s}return null}function C(e,t,i){var r=s.create("path");r.setAttribute("d",e);r.setAttribute("fill",i);r.setAttribute("fill-opacity",g);a.setData(r,{dataPoints:t});r.setAttribute("class",p.AREA_SELECTED);return r}var T=function(e,t,i){return e+t+","+i};var z=function(e,t){var i=1,a=e.length;if(a<=1){return null}var r=e[0].position;var o=T("M",r.x,r.y);var n;if(t){n=T("L",r.x-r.width,r.y);for(;i<a;i++){r=e[i].position;o+=T("L",r.x,r.y);n=T("L",r.x-r.width,r.y)+n}}else{n=T("L",r.x,r.y+r.height);for(;i<a;i++){r=e[i].position;o+=T("L",r.x,r.y);n=T("L",r.x,r.y+r.height)+n}}o+=n;return o};function L(e,t){var i=a.getData(t);var r=i.trellisInfo;var o;if(r){o=e.getModule("main").getChildPlot(r)}else{o=e.getModule("main.plot")}if(!o||!o.drawAreaRefLine){return null}return o.drawAreaRefLine(i.seriesIndex,i.itemIndex)}function P(e,t,o,n,l){var s=r.getDataPointId(t);var u=e.getNodes(e.NodeType.AREA_REF_LINE,false);var c=r.findByDataPointIds(u,s)[0];if(!c){c=L(e,t);if(!c){return}}c.setAttribute("stroke-width",l);var h=e.getProperties().get("plotArea.drawingEffect");var p=i.getColors(e,t,n,null,h);p=p.customizedColor||p.defaultColor;c.setAttribute("stroke",p);if(o){c.setAttribute("opacity",m);c.setAttribute("fill-opacity",m);c.setAttribute("stroke-opacity",m)}else{var d=a.getData(t).opacity;if(d===0){c.setAttribute("opacity",d);c.setAttribute("fill-opacity",d);c.setAttribute("stroke-opacity",d)}else{c.removeAttribute("opacity");c.removeAttribute("fill-opacity");c.removeAttribute("stroke-opacity")}}}function k(e,t){var i=e.firstChild;if(t){e.setAttribute("opacity",m);if(i){i.setAttribute("stroke-opacity",m);i.setAttribute("fill-opacity",m)}}else{var r=a.getData(e).opacity;e.removeAttribute("stroke");e.removeAttribute("opacity");e.removeAttribute("fill-opacity");e.removeAttribute("stroke-opacity");if(i){if(r===0){e.setAttribute("opacity",r);i.setAttribute("stroke-opacity",r);i.setAttribute("fill-opacity",r)}else{i.removeAttribute("stroke-opacity");i.removeAttribute("fill-opacity")}}}}var E=[{id:"selectDataPoint_area",triggerEvent:{name:"selectDataPoint",supportedChartTypes:h},handler:function(e,a){a.fireEvent(e,true);var o=i.turnToArray(e.data.targets);if(!o||!o.length){return}x(a);b(o,a);var n=a.getDataModel();var l=a.getProperties();var s=l.get("interaction.selected");var u=t.isExist(l.get("plotArea.markerRenderer"));o.forEach(function(e){var t=r.getDataPointId(e);var o=n.getDataPoint(t);if(o){P(a,e,true,s.color,1);y.forEach(function(t){i.drawStroke(a,e,t,s.stroke,1);i.drawFill(a,e,t,s,u,true)});k(e,true)}})}},{id:"deselectDataPoint_area",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:h},handler:function(e,a){a.fireEvent(e,true);x(a);var o=a.getDataModel();var n=i.turnToArray(e.data.targets);var l=a.getProperties();var s=e.data.isAnyOtherSelected?l.get("interaction.deselected"):l.get("plotArea.dataPoint");var u=t.isExist(l.get("plotArea.markerRenderer"));n.forEach(function(e){var t=r.getDataPointId(e);var n=o.getDataPoint(t);if(n){P(a,e,false,s.color,1);y.forEach(function(t){i.drawStroke(a,e,t,s.stroke,1);i.drawFill(a,e,t,s,u,true)});k(e,false)}})}},{id:"hoverOnDataPoint_area",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:h},handler:function(e,a){a.fireEvent(e,true);var o=a.getDataModel();var n=i.turnToArray(e.data.targets);var l=a.getProperties();var s=l.get("interaction.hover");var u=t.isExist(l.get("plotArea.markerRenderer"));n.forEach(function(e){var t=r.getDataPointId(e);var n=o.getDataPoint(t);if(n){P(a,e,true,s.color,2);y.forEach(function(t){i.drawStroke(a,e,t,s.stroke,2);i.drawFill(a,e,t,s,u,true)});k(e,true)}})}},{id:"unhoverOnDataPoint_area",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:h},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o=a.getProperties();var n;var l=t.isExist(o.get("plotArea.markerRenderer"));var s=a.getStatus("selectedDataPoints");r.forEach(function(e){var t;if(d3.select(e).classed(p.DATAPOINTSELECTED)){n=o.get("interaction.selected");t=true}else{if(s.length){n=o.get("interaction.deselected")}else{n=o.get("plotArea.dataPoint")}t=false}P(a,e,t,n.color,1);y.forEach(function(t){i.drawStroke(a,e,t,n.stroke,1);i.drawFill(a,e,t,n,l,true)});k(e,t)})}},{id:"clearPlot_area",triggerEvent:{name:"clearPlot",supportedChartTypes:h},handler:function(e,a){a.fireEvent(e,true);var r=a.getStatus("areaDataPoints")||a.getNodes(a.NodeType.DATA_POINT,false);if(!r||!r.length){return}var o=e.data.isGray;var n=a.getProperties();var l=o?n.get("interaction.deselected"):n.get("plotArea.dataPoint");var s=t.isExist(n.get("plotArea.markerRenderer"));r.forEach(function(e){P(a,e,false,l.color,1);y.forEach(function(t){i.drawStroke(a,e,t,l.stroke,1);i.drawFill(a,e,t,l,s,true)});k(e,false)});var u=n.get("interaction.deselected.color");var c=n.get("plotArea.drawingEffect");var h=a.getNodes(a.NodeType.AREA,false);h.forEach(function(e){var t={isReverse:true};var r=i.getColors(a,e,u,null,c,t);var n=e.querySelector("."+p.AREA_PATH);var l=e.querySelector("."+p.AREA_LINE_PATH);if(o&&r.customizedColor){e.setAttribute("fill",r.customizedColor);n.setAttribute("fill",r.customizedColor);l.setAttribute("fill",r.customizedColor)}else{e.setAttribute("fill",r.defaultColor);n.setAttribute("fill",r.defaultColor);l.setAttribute("fill",r.defaultColor)}})}},u.getDeselectEvent("click_on_non_selection_area",h,i.getDeselAllExTargets())];c.registerAll(E);return E});define("sap/viz/chart/behavior/config/AreaBehaviorConfig",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n,l,s,u,c){var h=["info/area","info/horizontal_area","info/100_area","info/100_horizontal_area"];var p=h.concat(["info/combinationEx"]);p=s.addTrellisType(p);var d=t.BEHAVIOR;var f=e.CSS.CLASS;var v=f.DATAPOINT;var g=f.DATALABEL;var m=f.AREA;var y=f.AREA_SELECTED;function _(e){if(D()){return e.data.point}var t=e.data.originalEvent||window.event;return{x:t.clientX,y:t.clientY}}function A(e){var t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function b(e,t,i){var a=i.isHorizontal();var r=a?"y":"x";var o,n,l;t.forEach(function(t){l=A(t);var i=Math.abs(l[r]-e[r]);if(!n||!o){n=t;o=i;return}if(i<o){o=i;n=t}});return n}function x(e){if(e){var t=u.getData(e).dataPoints;return t}}function S(e,t){var i=_(e);var a=x(e.data.currentTarget);return b(i,a,t)}function D(){return i.isMobile()}function w(e,t,i){var a=t.data.point;var r={};r.isHorizontal=i.isHorizontal();var o=_(t);var n=o.x||0;var l=o.y||0;var s=A(e);if(r.isHorizontal){r.direction=s.y-l>0?"top":"bottom";r.x=a.x;if(D()){r.y=s.y}else{r.y=a.y+(o.y&&s.y-o.y||0)}}else{r.direction=s.x-n>0?"left":"right";if(D()){r.x=s.x}else{r.x=a.x+(o.x&&s.x-o.x||0)}r.y=a.y}return r}function C(e,t){var i=a.getDataPointId(e.data.currentTarget);var r=t.getNodes(t.NodeType.DATA_POINT,false);return a.findByDataPointIds(r,i)[0]}var T=[{id:"click_on_datalabel",triggerEvent:{name:"click",targets:[g],excludeTargets:["v-m-action-layerrange"],supportedChartTypes:p},handler:function(e,t){e.data.point=w(C(e,t),e,t);t.fireEvent(e,true)}},{id:"hover_on_datalabel",triggerEvent:{name:"hover",targets:[g],supportedChartTypes:p},handler:function(e,t){e.data.point=w(C(e,t),e,t);t.fireEvent(e,true)}},{id:"click_on_datapoint",triggerEvent:{name:"click",targets:[v],excludeTargets:["v-m-action-layerrange"],supportedChartTypes:p},handler:function(e,t){e.data.point=w(e.data.currentTarget,e,t);t.fireEvent(e,true)}},{id:"hover_on_datapoint",triggerEvent:{name:"hover",targets:[v],supportedChartTypes:h},handler:function(e,t){e.data.point=w(e.data.currentTarget,e,t);t.fireEvent(e,true)}},{id:"click_on_area",triggerEvent:{name:"click",targets:[m,y],supportedChartTypes:p},handler:function(e,t){var i=S(e,t);e.data.currentTarget=e.data.target=i;e.data.point=w(i,e,t);t.fireEvent(e,true)}},{id:"hover_on_area",triggerEvent:{name:"hover",targets:[m,y],supportedChartTypes:p},handler:function(e,t){var i=S(e,t);e.data.currentTarget=e.data.target=i;e.data.point=w(i,e,t);t.fireEvent(e,true)}}];c.registerAll(T);return T});define("sap/viz/chart/components/plots/AreaPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/BaseColumnPlot","sap/viz/chart/components/plots/LinePlot","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/DrawUtil","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/AreaSeriesUtil","sap/viz/chart/components/renderers/AreaSeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/chart/components/renderers/AreaRefLineRenderer","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/datalabels/AreaDataLabels","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/behavior/config/TooltipClassMap","sap/viz/chart/behavior/config/tooltip/AreaChartTooltip","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/AreaDataPointNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/behavior/config/DataPointBehaviorConfigForArea","sap/viz/chart/behavior/config/AreaBehaviorConfig"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D,w,C,T,z){var L=3;var P=2;var k=.8;var E={desktop:{minWidth:24},mobile:{minWidth:48}};var I={desktop:{minWidth:16},mobile:{minWidth:16}};var O=s.CSS.CLASS;var R=[O.DATAPOINT,O.MORPHABLEDATAPOINT,O.DATAPOINTDEFAULT].join(" ");var N=function(e,t){this._seriesColorStyleMap={};N.superclass.constructor.apply(this,arguments);this._dataPointRenderer=m;this._flipNegativeShape=false;var i=this.runtime().markManager();i.setMode("single");i.lock();i.setShape("circle");var a=this.runtime().semanticManager();a.bindSeriesStyleProperty(this._name+".seriesStyle")};t.extend(N,i);N.prototype._getDataLabels=function(e,t){var i=u.extend({},this._options);i.name=e;return new x(t,i,this._seriesColorStyleMap)};N.prototype._getDataHandler=function(){return{valueAxis:A.getStackHandler(false)}};N.prototype._buildConfig=function(e,t,i){var a=N.superclass._buildConfig.apply(this,arguments);a.graphic.d=this._markerD;return a};N.prototype._getFillColorConfig=function(e,t,i,a){var r=a&&!a.isNullValue?a.dp.additionCtx():{};var o=i.disableSemantic?null:this._semanticMgr.analyzeDataPoint("color",t,true,r);if(o==null||o.properties==null){if(e.graphic){if(e.graphic.fill){e.graphic.fill=h.convertColor(e.graphic.fill)}if(e.graphic.color){e.graphic.color=h.convertColor(e.graphic.color)}if(e.graphic.borderColor){e.graphic.borderColor=h.convertColor(e.graphic.borderColor)}e.graphic.opacity=0}if(e.data&&e.data.color){e.data.color=h.convertColor(e.data.color)}return e}if(o.properties.color){var n=h.convertColor(o.properties.color);if(e.graphic){if(e.graphic.hasOwnProperty("fill")){e.graphic.fill=n}if(e.graphic.hasOwnProperty("color")){e.graphic.color=n}e.graphic.opacity=o.isOthers?0:1}if(e.data&&e.data.color){e.data.color=n}e.displayName=o.displayName}else{e.graphic.opacity=0}if(o.properties.stroke){e.graphic.stroke=o.properties.stroke}if(o.properties.strokeWidth){e.graphic.strokeWidth=o.properties.strokeWidth}return e};N.prototype._preRender=function(){N.superclass._preRender.apply(this,arguments);this._markerD=d.createMarkerData({type:"circle",rx:L,ry:L,borderWidth:P})};N.prototype._getSeriesRenderer=function(){return new g(this._renderArea.bind(this),this._updateArea.bind(this))};N.prototype._updateArea=function(e,t,i,a){var o=function(e){for(var t=0;t<e.length;t++){if(e[t]&&e[t].dpConfig&&e[t].dataPoint&&e[t].dpConfig.graphic&&e[t].dpConfig.graphic.fill){return e[t].dpConfig.graphic.fill}}return undefined};var n=this._properties.get();var l=a||this._properties.get("areaRenderer");var s=r.buildSeriesLineContext(this._data,i);var u=this._series[i].getDataPoints();var c={drawingEffect:n.drawingEffect,effectManager:this._effectManager,fillColor:o(t),opacity:k,isHorizontal:this.isHorizontal(),seriesFirstAndLastDpIdx:{firstIdx:u[0]&&u[0].getDataPointId(),lastIdx:u[u.length-1]&&u[u.length-1].getDataPointId()}};var h=v.updateArea(e,t,i,l,s,c);if(!h){var p=f.findArea(e,i);if(p){e.removeChild(p)}this._renderArea(e,t,i)}};N.prototype._renderArea=function(e,t,i,a,o){var n=this._properties;var l=o||n.get("areaRenderer");var s=n.get("drawingEffect");var u=this._data.series.length-1-i;var c=this._effectManager;var h=a||r.buildSeriesLineContext(this._data,u,["color","color2","trellisColumn","trellisRow"]);var p=this.getSeriesStyle(i,h);if(this._seriesColorStyleMap){this._seriesColorStyleMap[i]=p}var d=this.runtime().propertyManager();var f=this._series[i].getDataPoints();var g={firstIdx:f[0]&&f[0].getDataPointId(),lastIdx:f[f.length-1]&&f[f.length-1].getDataPointId()};v.drawArea(e,t,i,s,c,h,l,p,this.isHorizontal(),d,g)};N.prototype.getSeriesStyle=function(e,t){var i=this._data.series.length-1-e;var a=this._semanticMgr;t=t||r.buildSeriesLineContext(this._data,i,["color","color2","trellisColumn","trellisRow"]);var o=a.analyzeSeriesStyle(t,"area");var n;if(o&&o.area&&o.area.color){n=o.area.color}else if(a.hasDataPointColorStyle()&&a.isOverrideMode()){n=a.getOthersStyle("color").properties.color}else{var l=r.getSeriesScaleInfo(this._data,i,["color"]);if(l){n=this._data[l.field].scale.scale(l.domain)}else{n=this._data.color.scale.getRange()[0]}}return{color:h.convertColor(n)}};N.prototype._hideNode=function(e,t){var i=e[t];if(i){o.remove(i.getNode());o.remove(i.getRefNode());i.setNode(null).setRefNode(null)}};N.prototype._showDataPoints=function(e){this._preShowDataPoints();var t=[];this._dataPointContext=[];this._seriesRenderer.resetDataPoints();var i;var a=this._data.color;if(a&&a.metaData){var r=c.checkMndStatus(a.metaData,a.rowArray);if(r.isOnlyOneMndValue){i=r.mndIndex}}var o=this.createSeriesIterator(this._series.length);var n=this._getVisibleRange();var l;while(o.hasNext()){var u=o.next();var h=this._series[u];if(!h){continue}var p=this._getDataPointRenderer(u);if(!p){continue}var d=h.getDataPoints();var f=this._getDataPointRange(d,n);this._hideDataPoints(d,f);for(var v=f.min;v<=f.max;v++){var g=d[v];if(!g){continue}var m=g.getRawData();var y=m.dp;var _=this._getDataPointPosition(g);if(!_){continue}var A=false;var b=g.getConfig();if(!b){A=true;var x=y&&y.context()?y.context():s.NULL_VALUE;b=this._buildWrapperConfig(m,_,x,{itemIndex:v})}this._dataPointContext.push(b);var S=g.getData();if(!S){A=true;var D=g.getId();S=this._buildData(b);g.init(b,D,S,y&&y.id?y.id:s.NULL_VALUE,i)}var w=g.getNode();var C=g.getRefNode();if(w){if(A){this._updateDatapoint(w,p,b,_);this._updateDatapointRefLine(C,b,_);t.push(w)}}else{l=this._drawDataPointWithRefLine(p,g);if(l){w=l.node;C=l.refNode;g.setNode(w).setRefNode(C);if(w){t.push(w)}}else{g.setNode(null).setRefNode(null)}}this._seriesRenderer.addDataPoint(o.index(),v,b,_,w,C)}}return t};N.prototype._getValueScaleHandlers=function(e){return[_.getValueScaleHandler("valueAxis",{isHorizontal:e})]};N.prototype._getCategoryScaleHandlers=function(){return[_.getCategoryScaleHandler("categoryAxis",{isHorizontal:false,itemScaleHandler:b.get(false),alignment:"center"})]};N.prototype._adjustPosition=function(e){if(this.isHorizontal()){e.x+=e.width}};N.prototype.drawAreaRefLine=function(e,t){var i=this._series[e];if(!i){return null}var a=i.getDataPoints()[t];if(!a){return null}var r=a.getConfig();if(r.ctx===s.NULL_VALUE){return null}var o=this._adjustDataPointPosition(a.getPosition());if(!o){return null}var n=y(r);n.setAttribute("class",O.AREA_REF_LINE);f.setDataId(n,a.getDataId());f.setDataPointId(n,a.getDataPointId());if(o.hasOwnProperty("x")&&o.hasOwnProperty("y")){var l="translate("+o.x+", "+o.y+")";n.setAttribute("transform",l)}a.setRefNode(n);this._seriesRenderer.addDataPointRefLine(e,t,n);return n};N.prototype._drawDataPointWithRefLine=function(e,t){var i=t.getConfig();if(i.ctx===s.NULL_VALUE){return null}var a=this._adjustDataPointPosition(t.getPosition());if(!a){return null}var r=n.create("g");f.setDataId(r,t.getDataId());f.setDataPointId(r,t.getDataPointId());l.setContext(r,t.getContext());l.setAdditionCtx(r,t.getAdditionCtx());l.setData(r,t.getData());r.setAttribute("class",R);var o=i.graphic.opacity;var u=null;if(o!==0){u=y(i);u.setAttribute("class",O.AREA_REF_LINE);f.setDataId(u,t.getDataId());f.setDataPointId(u,t.getDataPointId())}else{r.setAttribute("opacity",o)}if(a.hasOwnProperty("x")&&a.hasOwnProperty("y")){var c="translate("+a.x+", "+a.y+")";r.setAttribute("transform",c);if(u){u.setAttribute("transform",c)}}var h=this._applyDataPointRenderer(e,i);if(!h&&this._dataPointRenderer){h=this._dataPointRenderer(i)}r.appendChild(h);if(this._flipNegativeShape){var p=i.ctx[i.ctx.measureNames]<0;if(p){this._addNegativeClass(r,i)}}return{node:r,refNode:u}};N.prototype._adjustDataPointPosition=function(e){if(!e){return null}var t=this._realSize;var i=L+P/2;var a=e.x;var r=e.y;if(a<-1||r<-1||a>t.width+1||r>t.height+1){return{x:a,y:r}}if(a-i<0){a=i}else if(a+i>t.width){a=t.width-i}if(r-i<0){r=i}else if(r+i>t.height){r=t.height-i}return{x:a,y:r}};N.prototype._buildData=function(e){return{color:e.graphic.fill,position:e.position,trellisInfo:e.trellisInfo,opacity:e.graphic.opacity}};N.prototype._getSeries=function(){if(this._data.series){return this._data.series.slice().reverse()}else{return[]}};N.prototype._isEmptySeries=function(e){if(!e||e.length<=0){return true}for(var t=0;t<e.length;t++){if(e[t]){return false}}return true};N.prototype._fixSeriesForMulti=function(e){var t=e||this._data.series;var i,a,r,o;var n=t.length;var l;var s=[],u=[];for(a=0;a<n;a++){i=t[a];l=i.length;for(r=0;r<l;r++){s[r]=s[r]||[];if(i[r]){s[r][a]=i[r]}}}for(a=0;a<s.length;a++){o=s[a];if(o.length===0){u.push(a)}}for(a=0;a<n;a++){i=t[a];l=i.length;if(this._isEmptySeries(i)){continue}for(r=0;r<l;r++){var c=i.measureMeta[0];if(u.indexOf(r)>=0){continue}if(i[r]===undefined){i[r]={isNullValue:true};i[r][c]=0}}}};N.prototype.setData=function(e){N.superclass.setData.apply(this,arguments);this._fixSeriesForMulti()};N.prototype._updateDatapoint=function(e,t,i,a){N.superclass._updateDatapoint.apply(this,arguments);if(e&&a.hasOwnProperty("x")&&a.hasOwnProperty("y")&&a.hasOwnProperty("height")&&a.hasOwnProperty("width")){var r=l.getData(e);if(r&&r.position){r.position.x=a.x;r.position.y=a.y;r.position.height=a.height;r.position.width=a.width}}};N.prototype._updateDatapointRefLine=function(e,t,i){if(e&&i.hasOwnProperty("x")&&i.hasOwnProperty("y")){e.setAttribute("transform","translate("+i.x+", "+i.y+")");y.update(e,t)}};N.prototype._buildWrapperConfig=function(e,t,i){var a=N.superclass._buildWrapperConfig.apply(this,arguments);a.position=t;return a};N.prototype._getMinCategoryWidth=function(e){var t=!!this._options.inTrellis;var i=this._properties;if(e||t||i.get("isFixedDataPointSize")&&!i.origin.get("interaction.noninteractiveMode")){var a=t?I:E;var r=p.isMobile()?a.mobile.minWidth:a.desktop.minWidth;return r}else{return 0}};N.prototype.getSeriesIndex=function(e){return this._series.length-e._addr[1]-1};N.prototype.getPreferredSize=function(){return a.prototype.getPreferredSize.apply(this,arguments)};S.registerClazz("area",N);S.registerClazz("horizontal_area",N);D.register(["info/area","info/horizontal_area","info/trellis_area","info/trellis_horizontal_area","info/100_area","info/100_horizontal_area","info/trellis_100_area","info/trellis_100_horizontal_area"],w);C.register(z.DATAPOINT_NAVIGATOR,z.AREA,T);return N});define("sap/viz/chart/components/datalabels/AreaPercentageDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/datalabels/AreaDataLabels","sap/viz/chart/components/util/PercentageDataLabelUtil"],function(e,t,i,a){var r=function(e,t,i){r.superclass.constructor.apply(this,arguments)};e.extend(r,i);r.prototype._getDataLabelInfo=function(e){var t=this._data&&this._data.rawData&&this._data.rawData.dataModel;return a.getDataLabelInfo(e,t)};r.prototype._buildDataLabelText=function(e,i,r,o,n){var l=i.value;if(l===0&&!this.drawZero(n)){return null}return t.buildDataLabelText(this._properties,e,i,r,o,a.getTypes,a.mergeDataLabels,null)};return r});define("sap/viz/chart/components/plots/PercentageAreaPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/AreaPlot","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/scales/ValueScale","sap/viz/chart/components/renderers/GridlineRenderer","sap/viz/chart/components/datalabels/AreaPercentageDataLabels","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/plots/XYPlotFactory"],function e(t,i,a,r,o,n,l,s,u,c){var h=function(e,t){h.superclass.constructor.apply(this,arguments)};t.extend(h,i);h.prototype._getDataHandler=function(){return{valueAxis:o.getStackHandler(false,true)}};h.prototype._drawGridlines=function(e){var t=this._realSize;var i=this.isHorizontal();var a=i?r.DIRECTION.VERTICAL:r.DIRECTION.HORIZONTAL;var o=this._properties.proxy("gridline");var s=i?[0,t.width]:[t.height,0];var u=new n([0,1],s);u.setTickHint(this._data.valueAxis.tickHint);l.drawValueGridline(e,t.width,t.height,u,o,a,this.runtime().effectManager())};h.prototype._getAxisPosition=function(e,t,i,a){var r=this._dataHandler;var o=this._data.valueAxis;var n=o.categorySum[i];var l;for(var s=0,u=e.length;s<u;s++){var c=e[s];if(a.hasOwnProperty(c.id)){if(a[c.id]<0&&n>0){l=0}else{l=a[c.id]}return c.scale(l,{index:i,seriesIndex:t,dataHandler:r[c.id]})}}return e[0].scale(null,{index:i,seriesIndex:t,rawData:a})};h.prototype._getPosition=function(e,t,i){var a=this._data.valueAxis;a.scale.total(a.categorySum[t]);return h.superclass._getPosition.apply(this,arguments)};h.prototype._buildWrapperConfig=function(e,t,i,a){var o=a&&a.itemIndex;var n=this._data.valueAxis;if(n.categorySum){n.scale.total(n.categorySum[o])}if(i){i.percentage=this._data.valueAxis.scale.scale(e.valueAxis)}var l=h.superclass._buildWrapperConfig.apply(this,arguments);if(e.valueAxis<0&&n.categorySum[o]>0){l.ctx=r.NULL_VALUE}return l};h.prototype._buildData=function(e,t,i,a,r){var o=h.superclass._buildData.apply(this,arguments);o.percentageValue=e.ctx.percentage;return o};h.prototype._getDataLabels=function(e,t){var i=u.extend({},this._options);i.name=e;return new s(t,i,this._seriesColorStyleMap)};c.registerClazz("100_area",h);c.registerClazz("100_horizontal_area",h);return h});define("sap/viz/chart/metadata/bindings/CombinationBindings",[],function e(){var t=[{id:"dataFrame",name:"IDS_DATA_FRAME",type:"Dimension",min:0,max:1,acceptMND:false,role:"frame.data"},{id:"trellisColumn",name:"IDS_TRELLIS_COLUMN",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.columnCategory"},{id:"trellisRow",name:"IDS_TRELLIS_ROW",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.rowCategory"},{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"layout.category"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:2,max:Number.POSITIVE_INFINITY,role:"layout.value"}];return t});define("sap/viz/chart/components/util/CombinationDataLabelUtil",["sap/viz/chart/components/util/DataPointUtils"],function e(t){var i={isIntersectedHelper:function(e,t,i,a){var r={};var o;var n=this.allowIntersectionCheck(a);for(o=0;o<i.length;o++){var l=this.allowIntersectionCheck(i[o]);if(n&&!l){var s=t[o];if(!(e.left>s.right||e.right<s.left||e.top>s.bottom||e.bottom<s.top)){r.intersected=true;break}}else if(!n&&l){var u=t[o];if(!(u.right<e.left||u.left>e.right||u.top>e.bottom||u.bottom<e.top)){r.hitPoint=true;break}}}return r}};return i});define("sap/viz/chart/components/datalabels/CombinationDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/datalabels/ColumnDataLabels","sap/viz/chart/components/util/CombinationDataLabelUtil","sap/viz/chart/components/datalabels/LineDataLabels"],function(e,t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments);this.isHorizontal=false;this._labelPosition="up"};e.extend(o,i);o.prototype._computeDataLabelTranslate=function(e){var a;if(t.getData(e).type!=="line"){a=i.prototype._computeDataLabelTranslate}else{a=r.prototype._computeDataLabelTranslate}return a.apply(this,arguments)};o.prototype._computeDataLabelPosition=function(e,a,o,n,l,s){var u;if(t.getData(s).type!=="line"){u=i.prototype._computeDataLabelPosition}else{u=r.prototype._computeDataLabelPosition}return u.apply(this,arguments)};o.prototype.allowIntersectionCheck=function(e){return t.getData(e).type==="line"};o.prototype.intersectResult=function(e,t,i,r){return a.isIntersectedHelper.call(this,e,t,i,r)};o.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=true;if(!this.allowIntersectionCheck(t.dataPoint)){i=o.superclass.isDataLabelOutOfDataPoint.apply(this,arguments)}return i};return o});define("sap/viz/chart/components/datalabels/HCombinationDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/datalabels/BarDataLabels","sap/viz/chart/components/util/CombinationDataLabelUtil","sap/viz/chart/components/datalabels/LineDataLabels","sap/viz/chart/components/datalabels/DataLabels"],function(e,t,i,a,r,o){var n=function(e,t){n.superclass.constructor.apply(this,arguments);this.isHorizontal=true;this._labelPosition="outside"};e.extend(n,i);n.prototype._computeDataLabelTranslate=function(e){var a;if(t.getData(e).type!=="line"){a=i.prototype}else{a=r.prototype}this._computeDataLabelPosition=a._computeDataLabelPosition;return a._computeDataLabelTranslate.apply(this,arguments)};n.prototype.allowIntersectionCheck=function(e){return t.getData(e).type==="line"};n.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=true;if(!this.allowIntersectionCheck(t.dataPoint)){i=n.prototype.isDataLabelOutOfDataPoint.apply(this,arguments)}return i};n.prototype.intersectResult=function(e,t,i,r){return a.isIntersectedHelper.call(this,e,t,i,r)};return n});define("sap/viz/chart/components/accessibility/CombinationDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/BaseDataPointNavigator","sap/viz/chart/components/accessibility/ColumnDataPointNavigator","sap/viz/chart/components/accessibility/LineDataPointNavigator"],function(e,t,i,a){function r(e){r.superclass.constructor.apply(this,arguments);this._dataShapes=null;this._barSeries=[];this._lineSeries=[];this._barNavigator=null;this._lineNavigator=null;this._initSubComponent(e)}e.extend(r,t);var o=r.prototype;o._initSubComponent=function(e){if(this._series){this._setupSeriesTypeTable();for(var t=0;t<this._seriesTypeLookup.length;t++){if(this._seriesTypeLookup[t]===this._constants.BAR){this._barSeries.push(this._series[t]);this._lineSeries.push(undefined)}else{this._lineSeries.push(this._series[t])}}var r={isVerticalRender:e.isVerticalRender,dataModel:e.dataModel,series:this._barSeries,propertyManager:e.propertyManager};this._barNavigator=new i(r);var o={isVerticalRender:e.isVerticalRender,dataModel:e.dataModel,series:this._lineSeries,propertyManager:e.propertyManager};this._lineNavigator=new a(o)}};o.destroy=function(){r.superclass.destroy.apply(this,arguments);this._dataShapes=null;this._seriesTypeLookup=null;this._barSeries=null;this._lineSeries=null;if(this._lineNavigator){this._lineNavigator.destroy()}if(this._barNavigator){this._barNavigator.destroy()}this._lineNavigator=null;this._barNavigator=null};o.left=function(e){return this._DPRouter(e,this._constants.LEFT)};o.right=function(e){return this._DPRouter(e,this._constants.RIGHT)};o.up=function(e){return this._DPRouter(e,this._constants.UP)};o.down=function(e){return this._DPRouter(e,this._constants.DOWN)};o._DPRouter=function(e,t){var i=this.getDataPoint(e);if(i){var a=this._getSeriesType(i);if(this._isVerticalRender){if(t===this._constants.UP||t===this._constants.DOWN){i=this._getShortestDPInCategory(e,t)}}else{if(t===this._constants.LEFT||t===this._constants.RIGHT){i=this._getShortestDPInCategory(e,t)}}switch(a){case this._constants.LINE:if(this._isVerticalRender){if(t===this._constants.LEFT){i=this._lineNavigator.left(e)}else if(t===this._constants.RIGHT){i=this._lineNavigator.right(e)}}else{if(t===this._constants.UP){i=this._lineNavigator.up(e)}else if(t===this._constants.DOWN){i=this._lineNavigator.down(e)}}break;case this._constants.BAR:if(this._isVerticalRender){if(t===this._constants.LEFT){i=this._barNavigator.left(e)}else if(t===this._constants.RIGHT){i=this._barNavigator.right(e)}}else{if(t===this._constants.UP){i=this._barNavigator.up(e)}else if(t===this._constants.DOWN){i=this._barNavigator.down(e)}}break}}return i};o._getShortestDPInCategory=function(e,t){var i=this.getDataPoint(e);var a=null;var r=-1;var o=i.address();var n=o[0];if(!this._sortedDataPointsByDirection[n]){this.dataPointValueSortInCategory(n)}var l=this._sortedDataPointsByDirection[n].indexOf(i);if(t===this._constants.UP||t===this._constants.RIGHT){r=l+1}else if(t===this._constants.DOWN||t===this._constants.LEFT){r=l-1}if(r>-1&&r<this._sortedDataPointsByDirection[n].length){a=this._sortedDataPointsByDirection[n][r];if(this._seriesTypeLookup[i.address()[1]]===this._constants.BAR){var s=this._seriesTypeLookup[a.address()[1]];while(s!==this._constants.LINE){r+=t===this._constants.UP||t===this._constants.RIGHT?1:-1;if(r>this._sortedDataPointsByDirection[n].length||r<0){a=null;break}s=this._seriesTypeLookup[this._sortedDataPointsByDirection[n][r].address()[1]]}a=this._sortedDataPointsByDirection[n][r]}}return a};return r});define("sap/viz/chart/components/plots/CombinationPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/chart/components/plots/BaseLinePlot","sap/viz/chart/components/plots/StackedColumnPlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/chart/components/renderers/LineRenderer","sap/viz/chart/components/renderers/SmoothLineRenderer","sap/viz/chart/components/util/DrawUtil","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/LineRendererUtil","sap/viz/chart/components/datalabels/CombinationDataLabels","sap/viz/chart/components/datalabels/HCombinationDataLabels","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/CombinationDataPointNavigator","sap/viz/chart/components/util/ChartConstants"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x){var S="line";var D="bar";var w=o.CSS.CLASS.DATAPOINT+" "+o.CSS.CLASS.MORPHABLEDATAPOINT+" "+o.CSS.CLASS.DATAPOINTDEFAULT;var C=function(e,t){this._isFlexibleStack=true;C.superclass.constructor.apply(this,arguments);this._markerPropName="line.marker";l.prototype._initCategoryAxis.call(this,s,u);var i=this.runtime().semanticManager();i.setUseSemanticDPLineStyle(true);this._attachMarkManager();this.dataShapePrimaryAxisPW=this._properties.watch("dataShape.primaryAxis",this._onDataShapeChange.bind(this));var a=t&&t.isDualValueAxis;if(a){this.dataShapeSecondaryAxisPW=this._properties.watch("dataShape.secondaryAxis",this._onDataShapeChange.bind(this))}this.lineMarkerShapePW=this._properties.watch("line.marker.shape",this._onDataShapeChange.bind(this));this._semanticMgr.setUseSemanticPattern(true);this._defaultLineRenderer=g.getDefaultRenderer(this._properties.get("line.isSmoothed"))};t.extend(C,n);C.prototype._isSupportBarPathGenerator=function(){return true};C.prototype._hideDataPoints=function(e,t){if(e[0]&&this._seriesType[e[0].getSeriesIndex()]===S){for(var i in e){if(e.hasOwnProperty(i)){this._hideNode(e,i)}}this._lightLineOutOfRange(e,t)}else{this._columnOutOfRange(e,t)}};C.prototype.destroy=function(){if(this.dataShapePrimaryAxisPW){this.dataShapePrimaryAxisPW.remove();this.dataShapePrimaryAxisPW=null}if(this.dataShapeSecondaryAxisPW){this.dataShapeSecondaryAxisPW.remove();this.dataShapeSecondaryAxisPW=null}this.lineMarkerShapePW.remove();this.lineMarkerShapePW=null;C.superclass.destroy.call(this);this._barCategoryAxis=null;this._categoryScaleHandler=null;this._realSize=null;this._measureIndex=null;this._markerD=null;this._seriesType=null};C.prototype._attachMarkManager=function(){var e=this.runtime().markManager();var t=this._properties.get("dataShape.primaryAxis");var i=this._getMarkerShape();var a=this._properties.parentLevel;var r=[];e.lock();e.setMode("combination");var o=[];r.push(C.processMark.call(this,t,i,a));o.push(t);if(this._options&&this._options.isDualValueAxis){var n=this._properties.get("dataShape.secondaryAxis");r.push(C.processMark.call(this,n,i,a));o.push(n)}e.setShape(r,i);e.setSeriesShape(o)};C.processMark=function(e,t,i){var a=[];if(!e||!e.length){return a}for(var r=0;r<e.length;r++){if(e[r]===S){a.push(t)}else{var o=this._getLegendMarkerShape();a.push(o)}}return a};C.prototype._onDataShapeChange=function(){this._attachMarkManager()};C.prototype._getCategoryScaleHandlers=function(e){return[s.getCategoryScaleHandler("categoryAxis",{isHorizontal:e,itemScaleHandler:u.get(false),alignment:"center"})]};C.prototype._getSeriesRenderer=function(){return new c(this._drawLine.bind(this),this._updateLine.bind(this))};C.prototype._applyChanges=function(){C.superclass._applyChanges.apply(this,arguments);l.prototype._initBarCategoryAxis.apply(this,arguments)};C.prototype._adjustPosition=function(e,t){var i=this._getDataShape(t)===S;if(!i){C.superclass._adjustPosition.apply(this,arguments)}};C.prototype._preRender=function(){C.superclass._preRender.apply(this,arguments);var e=this._data.series.length;this._measureIndex=[];var t=0;for(var i=0;i<e;i++){var a=this._getDataShape(i);if(a===D){this._measureIndex[i]=t;t++}}};C.prototype._getDataShape=function(e){var t=this._data.series[e];var i=null;for(var a=0;a<t.length;a++){i=t[a];if(i){break}}if(i){var r=i.hasOwnProperty("valueAxis")?"dataShape.primaryAxis":"dataShape.secondaryAxis";var o=this._properties.get(r);if(!(o instanceof Array)){o=this._properties.get(r,"defaultValue")}var n;if(i.color){n=i.color.mndIndex}else if(i.color2){n=i.color2.mndIndex}else{n=-1}if(o[n]!==S&&o[n]!==D){o[n]=S}return o[n]}return S};C.prototype._getXPosition=function(e,t,i){var a=this._getDataShape(e)===S;if(this.isHorizontal()){var r=C.superclass._getXPosition.apply(this,arguments);if(a){return[r[0]+r[1],r[1]]}else{return r}}else{if(a){return C.superclass._getXPosition.apply(this,arguments)}else{e=this._measureIndex[e];return this._getAxisPosition([this._barCategoryAxis],e,t,i)}}};C.prototype._getYPosition=function(e,t,i){var a=this._getDataShape(e)===S;if(!this.isHorizontal()){var r=C.superclass._getYPosition.apply(this,arguments);return r}else{if(a){return C.superclass._getYPosition.apply(this,arguments)}else{e=this._measureIndex[e];return this._getAxisPosition([this._barCategoryAxis],e,t,i)}}};C.prototype.getLineRenderer=function(){if(!this._lineRenderer){var e=this._properties;this._lineRenderer=g.getRenderer(e.get("line.lineRenderer"),e.get("line.isSmoothed"))}return this._lineRenderer};C.prototype._isLineVisible=function(){return this._properties.get("line.visible")};C.prototype._getPatternConfig=n.prototype._getPatternConfig;C.prototype._drawLine=function(e,t,i,a){if(this._getDataShape(i)!==S){return 0}C.superclass._drawLine.apply(this,arguments);return 1};C.prototype._updateDatapoint=function(e,t,i,a){C.superclass._updateDatapoint.apply(this,arguments);if(a.hasOwnProperty("x")&&a.hasOwnProperty("y")){var o=r.getData(e).translate;if(o){o[0]=a.x;o[1]=a.y}}if(e.getAttribute("combination-column")){this._updateStrokeWidth(e)}};C.prototype._buildConfig=function(e,t,i){var a=C.superclass._buildConfig.apply(this,arguments);a.graphic.d=this._markerD;if(!this._properties.get("line.marker.visible")){a.graphic.opacity=0}return a};C.prototype._getDataPointRenderer=function(e){var t;if(this._getDataShape(e)===S){this._isLineMarker=true;t=this._customMarkerRenderer||h}else{this._isLineMarker=false;t=C.superclass._getDataPointRenderer.apply(this,arguments)}return t};C.prototype._getDataLabels=function(e,t){var i=a.extend({},this._options);i.name=e;if(i.isHorizontal){return new y(t,i)}else{return new m(t,i)}};C.prototype._getColumnCount=function(){var e=this._data.series.length;var t=0;for(var i=0;i<e;i++){if(this._getDataShape(i)==D){t++;this._seriesType[i]=D}else{this._seriesType[i]=S}}return t};C.prototype._drawDataPoint=function(e,t){var a=t.getConfig();var o=i.create("g");v.setDataId(o,t.getDataId());v.setDataPointId(o,t.getDataPointId());r.setContext(o,t.getContext());r.setAdditionCtx(o,t.getAdditionCtx());var n=t.getData();n.seriesIndex=t.getSeriesIndex();n.itemIndex=t.getItemIndex();if(this._isLineMarker){n.shape=this._properties.get("line.marker.shape")}o.setAttribute("class",w);if(this._isLineMarker===true){o.setAttribute("combination-marker","true")}else{o.setAttribute("combination-column","true")}a["isLineMarker"]=this._isLineMarker;var l=this._renderNode(e,a,o,n);var s=this._drawShadowNode(a.graphic,o,l,n,e);delete a["isLineMarker"];r.setData(o,n);var u=t.getPosition();if(u.hasOwnProperty("x")&&u.hasOwnProperty("y")){o.setAttribute("transform","translate("+u.x+", "+u.y+")")}var c=a.ctx[a.ctx.measureNames]<0;if(c&&!this._isLineMarker){this._addNegativeClass(o,a)}return o};C.prototype._isNeedSimplifyLine=function(){return false};C.prototype.getSeriesStyle=function(e,t){var i=C.superclass.getSeriesStyle.apply(this,arguments);i.isCombination=true;return i};_.registerClazz("combination",C);_.registerClazz("horizontal_combination",C);A.register(x.DATAPOINT_NAVIGATOR,x.COLUMN_COMBINATION,b);return C});define("sap/viz/chart/components/legend/SizeLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/legend/BaseLegend","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/lang/LangManager"],function(e,t,i,a,r,o,n,l,s){function u(e,t){u.superclass.constructor.apply(this,arguments);var i=this._properties.get("label.style");this._labelFont={fontfamily:i.fontFamily,fontsize:i.fontSize,fontweight:i.fontWeight,color:i.color,fontstyle:i.fontStyle};this._layoutInfo={guideLineWidth:10,labelPaddingLeft:15};this._labels=[];this._scale=null;this._semanticStyle=null;this._labelHeight=0;this._parent=null;this._type="SizeLegend"}e.extend(u,t);u.prototype._addDefaultProperties=function(){u.superclass._addDefaultProperties.call(this);this._properties.add({drawingEffect:"normal",formatString:null,unitFormatType:null,inGeo:false,plotArea:{colorPalette:null}})};u.prototype.visible=function(){var e=true;if(this.getPosition()==="bottom"&&this._properties.origin.get("legendGroup.layout.position")==="auto"){e=false}else{e=u.superclass.visible.call(this)}return e};u.prototype.render=function(e,t){this._parent=e;if(this._scale&&this._labels.length>0){u.superclass.render.apply(this,arguments)}if(!this.isVisible()&&!this._isDedicated){e.selectAll("g.v-content").remove();return this}var o=this._properties.get();var n=o.drawingEffect;if(this._scale&&this._labels.length>0){var s=e.selectAll("g.v-content").data(["content"]);s.enter().append("g").classed("v-content",true).classed("v-label",true).classed("viz-legend-valueLabel",true);s.exit().remove();s.attr("transform","translate(0, "+this._pos.y+")");var c=parseInt(this._labelFont.fontsize,10);var h=[],p="font-size:"+this._labelFont.fontsize+"; font-weight:"+this._labelFont.fontweight+"; font-family:"+this._labelFont.fontfamily+"; font-style:"+this._labelFont.fontstyle;if(this._labelHeight===0){this._labelHeight=i.fastMeasure("M",this._labelFont.fontsize,this._labelFont.fontweight,this._labelFont.fontfamily).height}var d=Math.floor((this._scale(this._labels[0])+c)/this._labelHeight);switch(d){case 0:case 1:h.push(this._labels[0]);break;case 2:h.push(this._labels[0]);if(this._labels.length>1){h.push(this._labels[this._labels.length-1])}break;default:h=this._labels}var f=[],v=-1,g,m;for(var y=0,_=h.length;y<_;y++){f.push(this._scale(h[y])/2);m=this._getLabelValue(h[y]);g=i.fastMeasure(m,this._labelFont.fontsize,this._labelFont.fontweight,this._labelFont.fontfamily).width;if(g>v){v=g}}var A=f[0];var b=s;var x=b.selectAll("g.v-circles");if(!x.empty()){x.remove()}x=b.append("g").attr("class","v-circles").data([f]);x.attr("transform","translate("+A+","+(A+c/2)+")");var S;var D=this._properties.origin.get("plotArea.colorPalette");if(D&&D.length&&D.length>0){S=l.convertColor(D[0])}else{S="#748CB2"}var w=true;if(!w&&this._semanticStyle&&!r.isEmptyObject(this._semanticStyle)){if(this._semanticStyle.others&&this._semanticStyle.others.properties&&this._semanticStyle.others.properties.color){S=this._semanticStyle.others.properties.color}}var C={drawingEffect:n,graphType:"circle",fillColor:S};var T=this.runtime().effectManager().register(C);var z=x.selectAll("path").data(f,function(e,t){return e});z.exit().remove();z.enter().append("path").attr("stroke","white").attr("stroke-width",1).attr("fill",T).attr("opacity","1").attr("fill-opacity","0.85");z.attr("d",function(e,t){return a.createMarkerData({type:"circle",borderWidth:0,rx:e,ry:e})}).attr("transform",function(e,t){return["translate(",0,",",A-e,")"].join("")});var L=b.selectAll("g.v-valueLabels");if(L.empty()){L=b.append("g").attr("class","v-valueLabels").data([h])}var P=A*2+this._layoutInfo.labelPaddingLeft+this._layoutInfo.guideLineWidth+v>this._sizeLA_width?this._sizeLA_width:A*2+this._layoutInfo.labelPaddingLeft+this._layoutInfo.guideLineWidth+v;L.attr("transform","translate("+P+", "+(A+c)+")");var k=L.selectAll("text").data(h,function(e,t){return e});k.exit().remove();var E=k.enter().append("text");var I=null;var O=this.runtime().envManager();if(O){I=O.textAnchor()}var R=this;k.text(function(e,t){return R._getLabelValue(e)}).attr("dx",function(e){var t=i.fastMeasure(R._getLabelValue(e),R._labelFont.fontsize,R._labelFont.fontweight,R._labelFont.fontfamily).width;return-t}).attr("dy",function(e,t){var i=(t-1)*A-2;if(h.length===2&&t===1){i=A-2}return i}).attr("text-anchor",I);var N=b.selectAll("g.v-guideLines");if(!N.empty()){N.remove()}N=b.append("g").attr("class","v-guideLines").attr("transform","translate("+A+","+(A+c/2)+")");if(h.length>0){N.append("path").attr("stroke","gray").attr("d","M 0 "+-A+" L "+(A+this._layoutInfo.guideLineWidth)+" "+-A)}if(h.length>1){N.append("path").attr("stroke","gray").attr("d","M 0 "+A+"L"+(A+this._layoutInfo.guideLineWidth)+" "+A)}if(h.length>2){N.append("path").attr("stroke","gray").attr("d","M 0 "+(A-f[1])+" L "+A+" 0"+" M "+A+" 0 "+" L "+(A+this._layoutInfo.guideLineWidth)+" 0")}b.attr("font-family",this._labelFont.fontfamily).attr("font-size",this._labelFont.fontsize).attr("font-weight",this._labelFont.fontweight).attr("fill",this._labelFont.color).attr("font-style",this._labelFont.fontstyle)}return this};u.prototype.hasData=function(){return this._scale&&this._labels.length>0};u.prototype._getBodyPreferredSize=function(){this._setupThemeStyleDef();var e=0,t=0,a=0,r=0;var o=this._properties.get();var n=o.position;if(this._scale&&this._labels.length>0){var l=this._labels,s,u=[],c=-1,h,p,d;for(p=0,d=l.length;p<d;p++){s=this._getLabelValue(l[p]);u[p]=i.fastMeasure(s,this._labelFont.fontsize,this._labelFont.fontweight,this._labelFont.fontfamily);if(u[p]===undefined||u[p].width>c){c=u[p].width}}var f=c+this._layoutInfo.labelPaddingLeft+this._layoutInfo.guideLineWidth;h=this._scale(l[0]);t=h+u[d-1].height;e=h+f;a=e;r=t;if(!o.inGeo){if(n==="top"||n==="bottom"){e=e+u[d-1].height;a=a+u[d-1].height}else{t=t+u[d-1].height;r=t}}}return{maxWidth:e,maxHeight:t,minWidth:a,minHeight:r}};u.prototype.setData=function(e){if(!e){return}if(e.bubbleWidth){this._bindingFields=e.bubbleWidth.metaData}this._labels=e.labels;this._scale=e.scale;this._semanticStyle=e.semanticStyle};u.prototype._setupThemeStyleDef=function(){u.superclass._setupThemeStyleDef.apply(this,arguments);var e=this._properties.get();var t;t={fill:e.label.style.color,"font-family":e.label.style.fontFamily,"font-size":e.label.style.fontSize,"font-weight":e.label.style.fontWeight,"font-style":e.label.style.fontStyle};if(t){if(t["fill"]){this._labelFont.color=t["fill"]}if(t["font-family"]){this._labelFont.fontfamily=t["font-family"]}if(t["font-size"]){this._labelFont.fontsize=t["font-size"]}if(t["font-weight"]){this._labelFont.fontweight=t["font-weight"]}if(t["font-style"]){this._labelFont.fontstyle=t["font-style"]}}};u.prototype._getLabelValue=function(e){e=e===null?s.get("IDS_ISNOVALUE"):e;var t=this._properties.get();var i=null;if(this._bindingFields&&this._bindingFields.length){i=this._bindingFields[0].formatString;if(r.isArray(i)){i=i[0]}}var a=t.unitFormatType;var n={decimalFormatString:o.getDecimalFormatString(o.SUPPORT_CUSTOM_COMPONENTS.SIZELEGEND)};e=o.format(e,t.formatString||i,a,n);return e};u.prototype.getZonePrefix=function(){return"sizeLegend"};u.prototype.destroy=function(){u.superclass.destroy.call(this);this._labelFont=null;this._layoutInfo=null;this._labels=null;this._scale=null;this._semanticStyle=null;this._labelHeight=null;this._parent=null;this._type=null};return u});define("sap/viz/chart/scales/TimeScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataUtils"],function(e,t,i,a){var r=function(e,t){r.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.TimeScale"};e.extend(r,t);r.prototype.scale=function(e){this._ensureScaled();var t=e;if(t){if(i.isArray(t)){t=t[0]}t=a.getDimensionParsedValue(t)}if(this._domain[0]===this._domain[1]&&t!==this._domain[0]){return t<this._domain[0]?-Infinity:Infinity}return this._scale(t)};r.prototype.normalizeValue=function(e){return new Date(e).getTime()};r.prototype.destroy=function(){r.superclass.destroy.apply(this,arguments)};return r});define("sap/viz/chart/components/renderers/ValueBasedColorRenderer",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/TypeUtils"],function(e,t,i){var a={};a.cleanVBCAxisLines=function(t){var i=e.CSS.CLASS.AXIS.VBCLINE;t.selectAll("."+i).remove()};a.drawVBCAxis=function(a,r,o,n,l,s){var u=e.CSS.CLASS.AXIS.VBCLINE;var c=3;var h=l.get("axisLine.size");if(!i.isNumber(h)){h=1}var p=h/2+c/2;var d=s.register({fillColor:t.convertColor(n)});var f=a.append("line").style("pointer-events","none").attr("class",u).attr("shape-rendering","crispEdges");f.attr("stroke",d).attr("stroke-width",c).attr("x1",r).attr("y1",p).attr("x2",o).attr("y2",p);return f};return a});define("sap/viz/chart/components/axis/renderer/TimeBodyRenderer",["sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/FiscalUtil","sap/viz/chart/components/util/DataPointUtils"],function(e,t,i,a,r,o,n,l,s,u,c){var h=11;var p=e.CSS.CLASS.AXIS;var d="v-label-interaction";var f=5;var v=10;var g=2;var m={minTicksCount:1};m.drawTicks=function(t,i,a,r,o,n,l,s,u){var c=p.PERIMETER+" "+p.TICK;var h=s.register({fillColor:l||n.get("color")});var d=n.get("axisLine.size");var g=0;var m=i.length;var y=[];var _=[];var A=[];var b=[];var x;var S;var D=i.offset||0;switch(o){case e.POSITION.LEFT:for(;g<m;++g){x=i[g];S=x.major?v:f;y[g]=a;_[g]=x.position-D;A[g]=a-f;b[g]=x.position-D}break;case e.POSITION.RIGHT:for(;g<m;++g){x=i[g];S=x.major?v:f;y[g]=0;_[g]=x.position-D;A[g]=S;b[g]=x.position-D}break;case e.POSITION.TOP:for(;g<m;++g){x=i[g];S=x.major?v:f;y[g]=x.position-D;_[g]=r;A[g]=x.position-D;b[g]=r-S}break;case e.POSITION.BOTTOM:for(;g<m;++g){x=i[g];S=x.major?v:f;y[g]=x.position-D;_[g]=0;A[g]=x.position-D;b[g]=S}break}var w=t.selectAll("."+p.TICK).data(i);w.enter().append("line").attr("class",c).attr("stroke-width",d).attr("shape-rendering","crispEdges");w.exit().remove();w.each(function(e,t){this.setAttribute("x1",y[t]);this.setAttribute("y1",_[t]);this.setAttribute("x2",A[t]);this.setAttribute("y2",b[t]);this.setAttribute("stroke",h)})};m.drawLabels=function(i,r,o,n,l,f,v,m,_,A){var b=u.hasFiscalLevel(f&&f.origin);var x=i._labelGroupNode;var S=i._data;var D=p.LABEL+" "+p.MORPHABLE_LABEL+" "+p.LABEL_BACKWORD;var w=f.get("label.style");var C=t.getTextBaselineOffset(w);var T=v.register({fillColor:w.color});var z=v.register({fillColor:w.parentColor});var L=w.fontSize;var P=w.fontWeight;var k=w.fontFamily;var E=w.fontStyle;var I=null;var O=i.runtime().envManager();if(O){I=O.textAnchor()}x.selectAll("."+d).remove();x.selectAll(".v-label-upperLevel").remove();var R=x.selectAll("."+p.LABEL).data(r);R.enter().append("g").each(function(){this.setAttribute("class",D);this.setAttribute("fill",T);this.setAttribute("font-size",L);this.setAttribute("font-weight",P);this.setAttribute("font-family",k);this.setAttribute("font-style",E);this.setAttribute("pointer-events","none");this.setAttribute("text-anchor",I)});R.exit().remove();var N=l===e.POSITION.TOP;var M=r.offset||0;var B=i.isForceCategoryForMinLevel(A,_);R.each(function(e){var l=e.layers;var u=l.length;var f=d3.select(this);if(u){var v=x.insert("g","."+p.LABEL).attr("class",d);var A=v.append("g").attr("class",p.LABEL_SELECTION_TIMEAXIS).node();var S,D=l[0];var w=b&&_===1&&r.isOverlappedLabelHide&&l.length===1;if(_===1&&D.text&&!w){S=a.create("rect");S.setAttribute("class",p.BACKGROUND_RECT);S.setAttribute("fill","transparent");A.appendChild(S)}var T=this.querySelector(".v-label-baseLevel");if(!T){T=a.create("text");T.setAttribute("class","v-label-baseLevel");this.appendChild(T)}A.setAttribute("timelabel-id",D.id);c.setContext(A,D);var E=N?n-h-C:h+D.height-C;y(T,D,z);T.setAttribute("x",D.left-M);T.setAttribute("y",E);T.setAttribute("timelabel-id",D.id);var I,O;if(_===1&&D.text&&!w){if(m==="CONTINUOUS"||B){I=D.left-g-M;O=D.width+2*g;var R=t.fastMeasure(D.text,L,P,k);S.setAttribute("x",I);S.setAttribute("y",E+R.y-g);S.setAttribute("width",O);S.setAttribute("height",D.height+2*g)}else if(D.hasOwnProperty("rectX")){I=D.rectX-M;S.setAttribute("x",I);S.setAttribute("y",1);O=D.rectWidth;if(I>o){O=0}else if(I+O>o){O=o-I}S.setAttribute("width",O);S.setAttribute("height",E+g)}}var V=v.selectAll("."+p.LABEL_SELECTION_TIMEAXIS_UPPERLEVEL).data(l.slice(1),function(e){return e.level});V.enter().insert("g","."+p.LABEL_SELECTION_TIMEAXIS).each(function(e){this.setAttribute("class",p.LABEL_SELECTION_TIMEAXIS_UPPERLEVEL)}).sort(function(e,t){if(e.level&&t.level){return s.levelComparator.bind(i)(t.level,e.level)}return false});V.exit().remove();var F=this;V.each(function(e,t){this.setAttribute("timelabel-id",e.id);D=l[t+1];E=N?n-h-C:h+e.height-C;var i=e.height*(t+1)*(N?-1:1);var r=this.querySelector("."+p.BACKGROUND_RECT);if(D.hasOwnProperty("rectX")){r=a.create("rect");r.setAttribute("class",p.BACKGROUND_RECT);r.setAttribute("fill","transparent");this.appendChild(r);I=D.rectX-M;O=D.rectWidth?D.rectWidth:D.width+g;if(I<0){O=Math.max(0,O+I);I=-1}if(I>o){O=0}else if(I+O>o){O=o-I}r.setAttribute("x",I);r.setAttribute("y",E+e.height*t*(N?-1:1)+3);r.setAttribute("width",O);r.setAttribute("height",e.height)}var s=F.querySelector(".v-label-upperLevel:nth-child("+(t+2)+")");if(!s){s=a.create("text");s.setAttribute("class","v-label-upperLevel");F.appendChild(s)}y(s,e,z);s.setAttribute("timelabel-id",D.id);s.setAttribute("fill",z);s.setAttribute("x",e.left-M);s.setAttribute("y",E+i)})}else{f.selectAll(".v-label-baseLevel").remove();f.selectAll(".v-label-upperLevel").remove()}})};function y(e,t,i){var o=t.text;var n=t.format;var l="{{";var s="}}";if(!o){e.textContent="";return}r.empty(e);if(n.indexOf(l)<0||n.indexOf(s)<0){e.textContent=o;return}var u=0;var c;var h;var p=0;var d=[];var f=[];var v=0;while(u<o.length){c=o.indexOf(l,u);h=o.indexOf(s,u);if(c<0&&h<0){d.push(o.slice(v));f.push(0);break}if(c>=0&&(c<h||h<0)){if(p===0){d.push(o.slice(v,c));f.push(0);v=c+l.length}u=c+l.length;++p}else{if(p>0){--p;if(p===0){d.push(o.slice(v,h));f.push(1);v=h+s.length}}u=h+s.length}}d.forEach(function(t,r){var o=a.create("tspan");o.textContent=t;if(f[r]){o.setAttribute("fill",i)}e.appendChild(o)})}return m});define("sap/viz/chart/components/axis/sub/TimeAxisCommon",["sap/viz/framework/common/util/TimeUtil","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/format/FormatManager","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o){var n="KEEP_FIRST";var l="KEEP_LONGER";var s=Math.floor;var u=Math.ceil;var c=Math.max;var h=Math.min;var p=1;var d=1<<2;var f="formatString";var v="visible";var g="row";var m=4;var y=["day","second"];var _={day:"month",second:"minute"};var A=e.levelComparator;function b(t,i){return function(a,r,o,n,l,s,u,c){if(r===o){return[r]}var h=this.hasOwnProperty("align")?this.align:true;var p=n&&m;return e[t](r,o,this.step,p,h,l,s,a,u,i,c)}}function x(e){var t=new Date(e.start);var i=new Date(e.end);if(e.utc){return t.getUTCFullYear()===i.getUTCFullYear()}return t.getFullYear()===i.getFullYear()}function S(e){var t=new Date(e.start);var i=new Date(e.end);if(e.utc){return t.getUTCFullYear()===i.getUTCFullYear()&&t.getUTCMonth()===i.getUTCMonth()}return t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()}function D(e){return function(t){return!e(t)}}var w="YearMonthDay";var C="YearQuarter";var T="YearMonth";var z={};z[w]=["day","year"];z[C]=["quarter","year"];z[T]=["month","year"];function L(t,i,r,o,n,l,s){l=l||n.scale(i);var u=true;if(y.indexOf(t)===-1||!a.isExist(r)){if(I(l,n)){u=false}}else{s=s||n.scale(r);var c=new Date(i);var h=e.getTimeTable(c);var p=h[t];var d=_[t];var f=n.timeBodyCtx.levelDict[d].same(c,r,o,n.weekConfig);if(t==="day"&&p===1||p===0){u=false}else if(!f){u=false}else if(!I(s,n)&&I(l,n)){u=false}}return u}var P={hourminutesecond:{},hourminute:{},monthday:{},yearmonthday:{},yearquarter:{},yearmonth:{}};var k=function(e,t){e.forEach(function(e){e.density=E(e.name,e.step,t);e.values=e.values||t[e.name].values})};function E(t,i,a){var r=e.ONE_YEAR*2/(i*a[t].period);return r>=1?s(r):r}function I(e,t){if(!a.isExist(e)){return false}if(!t||!t.scale){return true}var i=t.scale.invert(e);return O(i,t)}function O(e,t){if(!a.isExist(e)){return false}if(!t||!t.limit){return true}if(t.limit.length===4){return t.limit[2]<=e&&e<=t.limit[3]}else if(t.limit.length===2){return t.limit[0]<=e&&e<=t.limit[1]}return false}function R(e,t,i,r){var o=i[e]&&i[e].hasOwnProperty(v)?i[e][v]:r.timeBodyCtx.levelDict[e].visible;if(a.isFunction(o)){return o(t.slice())}return o}function N(e,t){if(!e){return false}for(var i=0;i<e.layers.length;i++){var a=e.layers[i];if(!I(a.left)){return false}}return true}function M(t,i,a,r){var n={};var l=o.extend(true,[],e.normalizeLevels(i.levels,r));if(a){a=e.normalizeLevelName(a);if(a&&l.indexOf(a)===-1){l.push(a);l.sort(A.bind(r))}}var s=[];var u;if(l.indexOf("second")>=0){u=l.indexOf("minute");if(u>=0){l.splice(u,1)}u=l.indexOf("hour");if(u>=0){l.splice(u,1)}}else if(l.indexOf("minute")>=0){u=l.indexOf("hour");if(u>=0){l.splice(u,1)}}if(l.indexOf("day")>=0){u=l.indexOf("month");if(u>=0){l.splice(u,1)}}if(["second","minute","hour"].indexOf(l[0])>=0){s[0]=l[0];l.splice(0,1)}var c;var h;var p=V(null,null);var d=[];var f=[];var v;if(s.length>0){s.forEach(function(e){c=B(t,e,s,null);h=F(null,true);v=H(c,p,i,h);f.push(v.text)})}if(l.length>0){var g=q(l);v=null;if(g.length>0){c=B(t,g[0].pattern,l,null);h=F(true,true);v=H(c,p,i,h)}if(!v){h=F(false,true);l.forEach(function(e){c=B(t,e,l,null);v=H(c,p,i,h);d.push(v.text)})}else{d.push(v.text)}}v=[U(d,i),U(f,i)];return v}function B(e,t,i,a){return{value:e,levelName:t,labelLevels:i,position:a}}function V(e,t){return{prevValue:e,prevPosition:t}}function F(e,t){return{isCombination:e,isForcedFullFormat:t}}function H(e,t,i,o){var n=e.value;var l=e.levelName;var s=e.labelLevels;var u=e.position;var c=t&&t.prevValue;var h=t&&t.prevPosition;var p=o&&o.isCombination;var d=o&&o.isForcedFullFormat;var v=i.config;var g=i.combinationConfig;var m=i.utc;var y=new Date(n);if(m){y.setUTCMilliseconds(0)}else{y.setMilliseconds(0)}var _=v&&v[l]?v[l][f]:null;var A=i.timeBodyCtx.levelDict[l]&&i.timeBodyCtx.levelDict[l].format;var b;var x;if([T,C,w].indexOf(l)>-1){var S=String(l).toLowerCase();A=P[S]&&P[S].format;if(l===T&&g.yearmonth){_=g.yearmonth[f]}else if(l===C&&g.yearquarter){_=g.yearquarter[f]}else if(l===w&&g.yearmonthday){_=g.yearmonthday[f]}if(!A&&!_){b=r.format(y,l,m);if(b===r.DEFAULT_FORMATTED_VALUE){return undefined}}}if(l==="day"&&g.monthday){if(!L("day",n,c,m,i,u,h)){if(!p){_=g.monthday[f]}}}else if(l==="minute"&&g.hourminute){_=g.hourminute[f]}else if(l==="second"&&g.hourminutesecond){if(!L("second",n,c,m,i,u,h)){_=g.hourminutesecond[f]}}if(a.isFunction(_)){x=_(n,c,m,s.slice());if(x){b={format:_,text:x}}}else if(a.isString(_)){x=r.format(y,_,m);if(x){if(x instanceof Date){x=_}b={format:_,text:x}}}if(!b){if(a.isString(A)){x=r.format(y,A,m);if(x instanceof Date){x=A}b={format:A,text:x}}else if(a.isFunction(A)){var D=A(n,c,m,s,i,u,h,d);if(a.isPlainObject(D)){b=D}else{b={format:A,text:D}}}}if(a.isString(b)){b={text:b}}b.text=a.isNumber(b.text)?b.text.toString():b.text;return b}function U(e,t){return e.join(t.levelLabelSeparator)}function W(e,a){e=e.replace(/\{\{|\}\}/g,"");var r=t.canvasMeasure(e,a.fontSize,a.fontWeight,a.fontFamily);return i.preciseObject(r)}function G(e,t){var i=K.apply(null,arguments);Q(i,t);return i}function Y(e,t,i,a){var r=K(e,t,i,a,undefined,true);Q(r,t);return r}function X(e,t,i,a){var r=t.labels;var o=t.labels.offset;var n;var l;var s;var u=true;var c=Infinity;var h=Infinity;var p=Infinity;var d=Infinity;for(s=r.length-1;s>=0;s--){if(r[s].isFirstData){n=ae(r[s],r[s+1],i.labelMargin);if(n){c=s+1}l=ae(r[s],r[s-1],i.labelMargin);if(l){h=s-1}}else if(r[s].isLastData){n=ae(r[s],r[s+1],i.labelMargin);if(n){p=s+1}l=ae(r[s],r[s-1],i.labelMargin);if(l){d=s-1}}}u=false;if(p!==Infinity){r.splice(p,1);u=true}if(d!==Infinity){r.splice(d,1);u=true}if(c!==Infinity&&c<Math.min(d,p)){r.splice(c,1);u=true}if(h!==Infinity&&h<Math.min(d,p)){r.splice(h,1);u=true}if(u||a){var f=[];for(s=0;s<r.length;s++){f.push(r[s].value)}r=Y(e,i,0,f);if(r.length>=t.labels.length){u=false}t.labels=r;t.labels.offset=o}return u}function j(e,t){var i,a;var r=t.levels.indexOf(e.name);if(r>=0){i=t.levels.slice(r);a=t.levels}else{i=[e.name].concat(t.levels).sort(A.bind(t.timeBodyCtx));a=i.slice();i=i.slice(i.indexOf(e.name))}var o=t.config;var n=[[]];var l;for(var u=0;u<i.length;++u){var c=i[u];if(R(c,i,o,t)){var h=s(o[c]&&o[c][g]);if(h>=1){h=h>t.maxLayerCount?t.maxLayerCount:h}else if(u===0){h=1}else{h=2}l=n[h-1]=n[h-1]||[];l.push(c)}}if(!n[0].length){n=n.slice(1)}return[i,a,n]}function Z(t,i,a,r,o){var n=t;if(i==="week"&&A.bind(o.timeBodyCtx)(a,"week")>0&&e.getWeek(t,r,o.weekConfig)===1){n=t+e.ONE_WEEK}return n}function q(e){var t=[];if(z){var i=Object.keys(z);i.forEach(function(i){var a={startIdx:-1,endIdx:-1,pattern:""};var r=z[i];var o=0;var n=r.length;var l=false;var s=-1;for(var u=0;u<e.length;u++){if(e[u]!==r[o]){if(l){break}continue}else{l=true;if(s<0){s=u}o++;if(o===n){a.startIdx=s;a.endIdx=s+n-1;a.pattern=i;t.push(a);break}}}})}return t}function K(t,i,r,o,n,l){if(o&&n&&o.length!==n.length){return null}var s=!!n;n=n||[];var u=a.isSet(r,p);var c=a.isSet(r,d)?i.intervalPivot:null;o=o||t.values(i.utc,i.start,i.end,u,i.limit,c,i.categoryLook,i.weekConfig);var h=-1;var f=-1;var v;if(l){v=ue(o,t.name,i);h=v.firstDataIndex;f=v.lastDataIndex}var g,m,y;var _,A,b,x;var S,D,C;var T=i.utc;var z=i.weekConfig;var L=j(t,i);var P=L[0];var k=L[1];var E=L[2];var R=t.name;for(g=0;g<o.length;++g){if(O(o[g],i)){if(g>1){o=o.slice(g-1);if(l){h=h>=g-1?h-(g-1):-1;f=f>=g-1?f-(g-1):-1}}break}}var N=[];for(g=0;g<o.length;++g){_=o[g];A=o[g-1];b={value:_,layers:[]};var M=n[g];var G=n[g-1];for(m=0;m<E.length;++m){S=E[m]||[];var Y=[];var X=[];var K=null;for(y=0;y<S.length;++y){D=S[y];if(!K){K=D}else{if(e.levelComparator.bind(i.timeBodyCtx)(D,K)<0){K=D}}var Q;C=Z(_,R,D,T,i);var $=B(C,D,P,M);var J=V(A,G);var ee=F(S.length>1&&S.indexOf("day")>-1,false);Q=H($,J,i,ee);Y.push(Q.text);X.push(a.isFunction(Q.format)?"":Q.format)}b.layers[m]={formats:X,texts:Y,levels:S};b.layers[m].level=K}if(l){if(g===h){b.isFirstData=true}else if(g===f){b.isLastData=true}}N.push(b)}if(!i.firstLastTicksOnly&&N.length>1){var te={};var ie={};for(g=1;g<o.length;++g){_=o[g];A=o[g-1];b=N[g];x=N[g-1];for(m=1;m<E.length;++m){var ae=b.layers[m];var re=x.layers[m];S=E[m]||[];for(y=0;y<S.length;++y){D=S[y];var oe=i.timeBodyCtx.levelDict[S[y]].same;var ne=ae.texts[y];var le=re.texts[y];var se=te[D];var ce=ie[D];C=Z(_,R,D,T,i);if(s&&g===1&&!I(n[0],i)){N[0].layers[m].texts[y]="";if(I(n[1],i)){te[D]=ne;ie[D]=C}}else{if(ne===le||ne===se||oe&&(oe(C,A,T,z)||oe(ce,C,T,z))){b.layers[m].texts[y]=""}else{te[D]=ne;ie[D]=C}}}}}}N.forEach(function(e,t){for(g=0;g<e.layers.length;g++){e.layers[g].texts=e.layers[g].texts.filter(function(e){return e.length>0});e.layers[g].formats=e.layers[g].formats.filter(function(e){return e.length>0});e.layers[g].text=U(e.layers[g].texts,i)||"";e.layers[g].format=U(e.layers[g].formats,i)||"";var a=Z(e.value,R,D,T,i);var r;if(t>0){r=N[t-1].value}var o=q(e.layers[g].levels);if(o.length>0){var n=B(a,o[0].pattern,P,M);var l=V(r,null);var s=F(true,false);var u=H(n,l,i,s);if(e.layers[g].texts.length>0&&e.layers[g].texts.indexOf("")<0&&u&&u.text){var c=e.layers[g].levels.indexOf("day");var h=e.layers[g].formats[c];if(o[0].pattern!==w&&e.layers[g].levels.length===2){e.layers[g].text=u.text}if(o[0].pattern===w){if(h&&h.search(/M|m/)>-1&&h.search(/D|d/)>-1||e.layers[g].levels.length===e.layers[g].texts.length){e.layers[g].text=u.text}}}}if(e.layers[g].text){var p=W(e.layers[g].text,i.style);e.layers[g].height=p.height;e.layers[g].width=p.width}else{e.layers[g].height=0;e.layers[g].width=0}e.layers[g].left=e.layers[g].right=e.layers[g].center=0;delete e.layers[g].formats;delete e.layers[g].texts}});N.allLevels=k;N.levels=P;N.layerCount=E.length;return N}function Q(e,t,i,a){var r,n,l,s,u;var c=t.width;var h=-1;var p=Infinity;var d=!i;var f=-1;var v=-1;for(r=0;r<e.length;r++){l=e[r];if(a){if(l.isFirstData){f=r}else if(l.isLastData){v=r}}l.center=t.scale(l.value);for(n=l.layers.length-1;n>=0;n--){s=l.layers[n];if(s.text){s.left=l.center-s.width/2;if(d&&s.left<0){s.left=0;h=Math.max(h,r)}s.right=s.left+s.width;if(d&&s.right>c&&c>=s.width){p=Math.min(r,p);s.right=c;s.left=c-s.width}}else{s.left=s.right=l.center}}}if(a){if(h>f&&f!==-1){h=f}if(p<v&&v!==-1){p=v}}if(h>0){for(n=1;n<e[h].layers.length;n++){if(e[h].layers[n].text===""){e[h].layers[n]=o.clone(e[h-1].layers[n])}}e.splice(0,h)}if(p!==Infinity){e.splice(p+1,e.length)}}function $(e,t){if(e.length<2){return}ee(e[0],e[1],n,t);var i=e[e.length-1];var a=e[e.length-2];ee(i,a,n,t)}var J=function(e){var t=(e.left+e.right)/2;e.text="";e.width=0;e.left=t;e.right=t;e.isEmpty=true};function ee(e,t,i,a){for(var r=0;r<e.layers.length;++r){var o=e.layers[r];var l=t.layers[r];if(!l||!o){continue}var s=(l.left+l.right)/2;if(!I(s,a)){continue}var u=1;if(ie(l,o,u)>0){if(a.enableForceToShowFisrtLast){if(e.isFirstData||e.isLastData){J(l)}else{J(o)}}else{if(i===n){J(l)}else{if(o.text.length>=l.text.length){J(l)}else{J(o)}}}}}}function te(e){var t=e.labels;var i=e.context;if(t.length<2){return}var a;for(a=0;a<t.length-1;a++){var r=t[a];for(var o=a+1;o<t.length&&o<a+oe;++o){var s=t[o];if(a===0){ee(r,s,n,i)}else if(o===t.length-1){ee(s,r,n,i)}else{ee(s,r,l,i)}}}var u=.1;t.forEach(function(e){e.layers.forEach(function(e){if(Math.abs(e.right-e.left)<u){J(e);t.isOverlappedLabelHide=true}})});if(e.displayMode==="CONTINUOUS"&&e.labels.length>0&&e.ticks.length===0&&e.originalTicks&&e.originalTicks.length>0){var c=[];var h;var p;var d;for(h=0;h<t.length;h++){var f=true;for(p=0;p<t[h].layers.length;p++){if(!t[h].layers[p].isEmpty){f=false;break}}if(f){c.push(t[h].value)}}if(c.length>0&&c.length<e.originalTicks.length){for(d=0;d<e.originalTicks.length;d++){if(c.indexOf(e.originalTicks[d].value)<0){e.originalTicks[d].major=true;e.ticks.push(e.originalTicks[d])}}}}}function ie(e,t,i){if(!e||!t){return 0}if((e.left+e.right)/2<(t.left+t.right)/2){var a=e;e=t;t=a}i=i||0;if(e.width>0&&e.text.length>0&&t.width>0&&t.text.length){var r=e.left-t.right-i;if(r<0){return-r}}return 0}function ae(e,t,i){if(!e||!t){return 0}var a;for(var r=0;r<e.layers.length;++r){var o=e.layers[r];var n=t.layers[r];a=ie(o,n,i);if(a>0){break}}return a}var re=2;var oe=4;function ne(e,t,i){var a=i?[0,-1]:0;if(e.length<2){return a}for(var r=re;r<=oe;r++){var o=r;var n=o-1;var l=n;for(var s=l;s<e.length;++s){var u=ae(e[s],e[s-n],t);if(u>0){a=i?[u,s]:u;return a}}}return a}function le(e,t){return e.value-t.value}function se(t,i,a){var r=e.truncate(t,i,a.utc,a.timeBodyCtx._properties.origin);return r===t}function ue(e,t,i){var a={};a.firstDataIndex=-1;a.lastDataIndex=-1;var r;if(i.dataBound&&i.dataBound.length>=2){r=i.dataBound.slice()}else{r=i.domain.slice()}r.sort();var o;var n=[];if(i.isContinuous){for(o=0;o<r.length;o++){n.push(se(r[o],t,i))}}for(o=0;o<r.length;o++){var l=e.indexOf(r[o]);if(l>=0&&o===0){a.firstDataIndex=l;a.firstDataAdded=false;continue}if(l>=0&&o===1){a.lastDataIndex=l;a.lastDataAdded=false;continue}var s;for(s=0;s<e.length;s++){if(e[s]>r[o]&&(!i.isContinuous||n[o])){e.splice(s,0,r[o]);if(a.firstDataIndex===-1){a.firstDataIndex=s;a.firstDataAdded=true}else{a.lastDataIndex=s;a.lastDataAdded=true}break}}if(a.firstDataIndex<0&&o===0&&(!i.isContinuous||n[o])){e.push(r[o]);a.firstDataIndex=e.length-1;a.firstDataAdded=true}if(a.lastDataIndex<0&&o===1&&(!i.isContinuous||n[o])){e.push(r[o]);a.lastDataIndex=e.length-1;a.lastDataAdded=true}}return a}var ce=function(e,t,i){var r=i[t-1];var o=i[t+1];var n;var l;if(a.isExist(r)){n=r;l=t-1;if(a.isExist(o)){if(i[t]-r>o-i[t]){n=o;l=t+1}}}else if(a.isExist(o)){n=o;l=t+1}if(n){if(e.indexOf(n)<0){i.splice(l,1)}}return l};function he(e,t,i,a){var r=[];if(e.tickLevel){var o=e.labels;if(i&&a){o=a}var n=e.tickLevel.values(t.utc,t.start,t.end,false,t.limit,undefined,t.categoryLook,t.weekConfig);if(i){var l=ue(n,e.tickLevel.name,t);if((l.firstDataAdded||l.lastDataAdded)&&n.length>1){var s=[];var u;for(u=0;u<o.length;u++){s.push(o[u].value)}var c;if(l.lastDataAdded&&n.length>1){c=ce(s,l.lastDataIndex,n)}if(l.firstDataAdded&&n.length>1){if(c<=l.firstDataIndex){l.firstDataIndex--}ce(s,l.firstDataIndex,n)}if(!e.hasMajor){var h;for(h=n.length-1;h>=0;h--){if(s.indexOf(n[h])<0){n.splice(h,1)}}}}}for(var p=0,d=0;p<n.length;++p){var f=n[p];var v=d<o.length&&o[d];if(i&&v.value<f){d++;v=d<o.length&&o[d]}var g=v&&e.hasMajor&&v.value===f;r.push({value:f,position:g?v.center:t.scale(f),major:g});if(g){++d}}}r.sort(le);return r}function pe(e,t){var i=[];if(e){var a=e.values(t.utc,t.start,t.end,false,t.limit,undefined,t.categoryLook);for(var r=0,o=0;r<a.length;++r){var n=a[r];i.push({value:n,position:t.scale(n),major:false})}}i.sort(le);return i}return{combinationDict:P,isPositionVisible:I,isValueVisible:O,isLabelVisible:N,getTicks:he,getIndependentTicks:pe,getDensity:E,preventAnyOverlapping:te,getLabelsAndSetLayout:G,getLabelsWithFirstLastDataAndSetLayout:Y,resetAndLayoutLabelsWithFirstLastData:X,getLabels:K,layoutLabels:Q,layoutFirstAndLastLabel:$,getOverlappedPixelNum:ne,getTwoLayersOverlappedNum:ie,getTwoLabelsOverlappedNum:ae,getTimeValueFormat:M,getValuesFunc:b,shouldUseShortFormat:L,initLevelStoreValues:k,notCheck:D,sameMonth:S,sameYear:x,getPrevInfo:V,getCurrentInfo:B,TRIAL_MODE:p,PIVOT_MODE:d,FORMAT_CONFIG_FIELD:f}});define("sap/viz/chart/components/axis/sub/TimeAxisBodyTransformer",["sap/viz/framework/common/util/TimeUtil","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/components/axis/sub/TimeAxisCommon"],function(e,t,i,a,r,o,n){var l=Math.floor;var s=Math.ceil;var u=Math.max;var c=Math.min;var h=n.getTicks;var p=n.getLabels;var d=e.levelComparator;var f=n.getLabelsAndSetLayout;var v=n.getLabelsWithFirstLastDataAndSetLayout;var g=n.resetAndLayoutLabelsWithFirstLastData;var m=n.layoutFirstAndLastLabel;var y=n.getOverlappedPixelNum;function _(e){var t=e.levelStore.filter(function(t){return!t.continuousOnly&&d.bind(e)(t.name,e.minCategoryLevel)>=0});t.sort(H.bind(e));return t}var A={ILLEGAL_LEVEL:"ILLEGAL_LEVEL",NO_TICKS:"NO_TICKS",NO_LABELS:"NO_LABELS",WRONG_TICK_STEP:"WRONG_TICK_STEP",LABEL_TOO_BIG:"LABEL_TOO_BIG",LABEL_TOO_SMALL:"LABEL_TOO_SMALL",LABEL_OVERLAPPED:"LABEL_OVERLAPPED",GOOD:"GOOD"};function b(e,t){if(!e||!t.forceToShowFirstLastData){return false}var i=d.bind(t.timeBodyCtx);t.levels.sort(i);var a=t.levels[0];var r=e.name;return i(r,a)===0}function x(e,t){var i=e;var a=i.labels.offset;var r=i.labelLevel;var o=false;if(r&&r.name){o=t.timeBodyCtx.isForceCategoryForMinLevel(r.name,r.step,t.levels)}if(!o&&i.displayMode==="CONTINUOUS"&&b(i.labelLevel,t)){t.isContinuous=true;var n=v(i.labelLevel,t);i.labels=n;var l=true;var s=i.labels.length;var u;for(u=0;l&&i.labels.length>1&&u<s;u++){l=g(i.labelLevel,i,t)}var c=h(i.levelResult,t,true,i.labels);i.ticks=c;i.labels.offset=a;i.ticks.offset=a;delete t.isContinuous}}function S(e,t,i){var a=e;if(a.ticks.length===0||a.labels.length===0||!a.labelLevel){return}a.displayMode="CONTINUOUS";if(D(a.labelLevel,t)){if(i){t.categoryLook=true;var r=z(a,t);var o=L(t);var n=O(a.labelLevel.id,o);if(r===A.GOOD&&!n){r=A.ILLEGAL_LEVEL}if(r!==A.GOOD){var l=B(a,t,r);if(!l){var s=a.labels.length;var u=200;if(t.width>u){t.categoryLook=false;return}else if(r===A.LABEL_OVERLAPPED||r===A.LABEL_TOO_BIG||r===A.ILLEGAL_LEVEL){if(s>2){var c=a.labels[0];var h=a.labels[s-1];a.labels.splice(0,s);a.labels.push(c);a.labels.push(h)}F(a,t);return}else if(r===A.WRONG_TICK_STEP){a.labels.splice(1,s);F(a,t);return}else{t.categoryLook=false;return}}}else{var p=e.labelLevel;o=L(t,p);M(p,t,o,e)}}F(a,t);if(!i&&b(a.labelLevel,t)){N(a.labelLevel,a,t)}}}function D(e,t){if(!e){return false}var i=d.bind(t.timeBodyCtx);t.levels.sort(i);var a=t.levels[0];var r=e.name;if(i(r,t.timeBodyCtx.minCategoryLevel)>=0&&i(r,a)>0){if(!(r===t.timeBodyCtx.maxCategoryLevel.name&&e.step>t.timeBodyCtx.maxCategoryLevel.step)){return true}}return false}var w=400;var C=4;var T=.1;function z(e,t){var i=e.ticks;var a=e.labels;var r=e.labelLevel;var o=e.tickLevel;if(i.length<2){return A.NO_TICKS}else if(a.length===0){return A.NO_LABELS}else if(r&&o&&o.step>1){return A.WRONG_TICK_STEP}var n=Math.abs(i[1].position-i[0].position);var l,s;var u=n*C;var c=n*T;for(l=0;l<a.length;l++){s=a[l].layers[0];if(s.width>u){return A.LABEL_TOO_BIG}else if(s.width<c&&s.width+w<n){return A.LABEL_TOO_SMALL}}var h=e.labels;if(b(r,t)){var p;var d=[];for(p=0;p<e.labels.length;p++){if(!(e.labels[p].isFirstData||e.labels[p].isLastData)){d.push(e.labels[p])}}h=d}if(y(h,t.labelMargin)>0){return A.LABEL_OVERLAPPED}return A.GOOD}function L(t){var i=_(t.timeBodyCtx);var a=[];if(t.start===t.end){return i.slice()}var r=d.bind(t.timeBodyCtx);t.levels.sort(r);var o=t.levels;var n=t.intervalUnit;var l,s,u;var c=t.levels[0];for(l=0;l<i.length;l++){u=i[l];if(u.condition&&!u.condition(t)){continue}if(n){if(n===u.name){a.push(u)}}else if(o.indexOf(u.name)>=0&&D(u,t)){a.push(u)}}if(!n){if(a.length>=2){for(l=1;l<a.length;l++){if(a[l-1].name==="day"&&r(a[l].name,"quarter")>=0){a=a.concat(R("month",i))}}}if(a.length<=2){e.DEFAULT_LEVELS.forEach(function(e){var t=false;for(l=0;l<a.length;l++){if(a[l].name===e){t=true;break}}if(!t){a=a.concat(R(e,i))}})}}a.sort(H.bind(t.timeBodyCtx));return a}var P=5;function k(e,t,i,a){var r=e.name;var o=d.bind(a);var n=0;for(var l=0;l<t.length;l++){if(o(r,t[l].name)===0){n=l;break}else if(o(r,t[l].name)>0&&t[l+1]&&o(r,t[l+1].name)<=0){n=l;break}}var s;if(i){s=t.slice(n,n+P)}else{s=t.slice(u(n-P,0),n)}s.sort(H.bind(a));return s}function E(e,t,i){return k(e,t,true,i)}function I(e,t,i){return k(e,t,false,i)}function O(e,t){for(var i=0;i<t.length;i++){if(t[i].id===e){return t[i]}}return null}function R(e,t){return t.filter(function(t){return t.name===e})}var N=function(e,t,i){var a=true;var r=t.labels.length;var o;var n=false;for(o=0;a&&t.labels.length>1&&o<r;o++){a=g(e,t,i,n);n=false;F(t,i);if(!a){var l;for(l=t.labels.length-1;l>=0;l--){var s=false;var u;var c=0;for(u=0;u<t.labels[l].layers.length;u++){if(t.labels[l].layers[u].isEmpty){c++;break}}if(c>0){t.labels.splice(l,1);if(t.labels.length>1){n=true}a=true;break}}}}};function M(e,t,i,a,o){var l=false;var s;if(b(e,t)){s=v(e,t)}else{s=f(e,t)}var u={level:e.name,labelLevel:e,labels:s};var c=null;var h=e.base;if(h){var p=h[0];var d=O(p,i);if(d&&!(u.labelLevel.step>1&&d.step>1)){c=d}}c=c||u.labelLevel;u.tickLevel=c;u.ticks=n.getIndependentTicks(c,t);F(u,t);if(!o&&b(u.labelLevel,t)){N(e,u,t)}var g=z(u,t);if(g===A.GOOD){a.level=u.level;a.labelLevel=u.labelLevel;a.tickLevel=u.tickLevel;r.extend(a.labels,u.labels);r.extend(a.ticks,u.ticks);a.labels.splice(u.labels.length);a.ticks.splice(u.ticks.length);l=true}return l}function B(e,t,i){var a=e.labelLevel;var r=L(t,a);var o;var n;if(!i){return false}else if(i===A.GOOD){return true}else if(i===A.NO_TICKS||i===A.NO_LABELS||i===A.LABEL_TOO_SMALL){o=I(a,r,t.timeBodyCtx)}else if(i===A.LABEL_TOO_BIG||i===A.LABEL_OVERLAPPED){o=E(a,r,t.timeBodyCtx)}else if(i===A.ILLEGAL_LEVEL){o=E(a,r,t.timeBodyCtx);o=o.concat(I(a,r,t.timeBodyCtx))}else if(i===A.WRONG_TICK_STEP){o=E(a,r,t.timeBodyCtx);o.splice(0,0,a)}else{return false}if(!o||!o.length){return false}var l=false;for(n=0;n<o.length;n++){if(M(o[n],t,r,e,true)){l=true;break}}return l}function V(e,t){if(!a.isExist(e)||!t||t.length<2){return-1}var i=function(e){return e.value};var r=o.bisearch(t,e,i);r=Math.min(r,t.length-1);if(t[r].value>e){r--}var n=[];if(r>=0){var l;if(r===t.length-1){l=t[r].position-t[r-1].position}else{l=t[r+1].position-t[r].position}var s=t[r].position;n=[s,s+l,r,r+1]}return n}function F(e,t){var i=e.labels;var a=e.ticks;var r,o,n,l;var s=t.width;var u=b(e.labelLevel,t);if(a.length<2){return false}var c=-1;var h=-1;for(r=0;r<i.length;r++){if(u){if(i[r].isFirstData){c=r}else if(i[r].isLastData){h=r}}}var p=Infinity;var d=-1;for(r=0;r<i.length;r++){n=i[r];var f=V(n.value,a);if(f.length===0||f[0]<0&&f[1]<0){d=r+1;continue}for(o=0;o<n.layers.length;o++){l=n.layers[o];var v=f[0];var g=f[1];var y=(g-v)/2+v;l.left=y-l.width/2;if(l.left<0){l.left=0;d=r}l.right=l.left+l.width;l.center=(l.right-l.left)/2+l.left;if(l.right>s&&s-l.width>=0){if(v+l.width<s||u&&i[r].isLastData){var _=l.right-s;l.left-=_;l.center-=_;l.right-=_}else{p=Math.min(r,p);break}}}}if(u){if(d>c&&c!==-1){d=c}if(p<h+1&&h!==-1){p=h+1}}if(p!==Infinity){i.splice(p,i.length)}if(d>0){i.splice(0,d)}for(r=0;r<a.length;r++){a[r].major=false}m(i,t);e.displayMode="CATEGORY";return true}function H(e,t){if(e.name===t.name){return e.step-t.step}else{return d.bind(this)(e.name,t.name)}}function U(t,i){var a=t;if(!i.isColumnLike){return}var r=t.ticks;if(r.length===0||a.labels.length===0||!a.labelLevel){return}var o=e.levelComparator.bind(i.timeBodyCtx);i.levels.sort(o);var l=i.levels[0];var s=a.labelLevel;var u=i.timeBodyCtx.isForceCategoryForMinLevel(s.name,s.step,i.levels);if(o(s.name,l)<=0&&!u){if(s.step>1&&a.displayMode==="CONTINUOUS"){var c;if(a.labelLevel.name===a.tickLevel.name&&a.labelLevel.step===a.tickLevel.step){for(c=a.ticks.length-1;c>=0;c--){a.ticks[c].major=true}}else{for(c=a.ticks.length-1;c>=0;c--){if(!a.ticks[c].major){a.ticks.splice(c,1)}}}}else if(!i.timeBodyCtx._isKeepMinimalLevelContinuousTicks){a.originalTicks=r;a.ticks=[]}}else if(a.displayMode==="CATEGORY"||u){var h=r[r.length-1];var p=h.value;var d=e.ceil(h.value,s.name,i.utc,i.timeBodyCtx._properties.origin);var f=false;if(!n.isValueVisible(d,i)){d=i.end;f=true}if(!n.isValueVisible(d,i)){d=h.value+e.getPeriod(s.name);f=true}if(d!==p){r.push({value:d,position:i.scale(d),major:false})}if(l!=="week"){var v=i.timeBodyCtx.levelDict[l].period;var g=i.limit[0];g=e.truncate(g,l,i.utc,i.timeBodyCtx._properties.origin);var m=g+v;var y=i.scale(g);var _=i.scale(m);var A=(_-y)/2;a.ticks.forEach(function(e,t){if(t!==r.length-1||!f||!n.isValueVisible(d,i)){e.position-=A;e.value=i.scale.invert(e.position)}});F(a,i)}else if(s.name==="year"){a.ticks.forEach(function(t,a){if(a!==r.length-1||!f||!n.isValueVisible(d,i)){var o=e.getFullYear(new Date(t.value),i.utc);var l=o-1;var s=e.getWeekNumInYear(l);var u=e.getDateByWeek(l,s,i.utc,i.weekConfig);var c=e.getDateByWeek(o,1,i.utc,i.weekConfig);u=u.getTime();c=c.getTime();t.value=(c-u)/2+u;t.position=i.scale(t.value)}});F(a,i)}}}return{categoryWrapper:S,shouldFirstLastMode:b,firstLastDataWrapper:x,mustCategoryLook:D,timeColumnWrapper:U}});define("sap/viz/chart/components/axis/sub/TimeAxisBodyHelper",["sap/viz/framework/common/util/TimeUtil","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/components/axis/sub/TimeAxisCommon","sap/viz/chart/components/axis/sub/TimeAxisBodyTransformer"],function(e,t,i,a,r,o,n,l){var s=Math.floor;var u=Math.ceil;var c=Math.max;var h=Math.min;var p=8;var d=80;var f=100;var v=5;var g=3;var m=", ";var y=1;var _="minlevel";var A=1;var b=1<<2;var x=4;var S=10;var D={second:5,minute:20,hour:.5,day:2,week:.5,month:.5,quarter:1,halfyear:3,year:1,fiscal_period:1,fiscal_year:1};var w=n.getTicks;var C=e.levelComparator;var T=n.getLabelsAndSetLayout;var z=n.getLabelsWithFirstLastDataAndSetLayout;var L=n.getLabels;var P=n.layoutLabels;var k=n.getOverlappedPixelNum;var E=l.mustCategoryLook;var I=n.TRIAL_MODE;var O=n.PIVOT_MODE;var R=n.getDensity;var N=n.combinationDict;function M(t){var i=t.timeBodyCtx.normalizeDomain(t.domain);var a=t.timeBodyCtx.normalizeDomain(t.dataBound);var r=null;if(i){var o=t.levels;if(!o||!o.length){o=e.DEFAULT_LEVELS}t.timeBodyCtx.fixLevelGap(o);var s={domain:i,dataBound:a,width:c(0,t.width),levels:o,start:i[0],end:i[1],limitInput:t.limit,style:t.labelStyle,config:K(t.config,t.timeBodyCtx),combinationConfig:K(t.combinationConfig,t.timeBodyCtx),utc:t.utc,isColumnLike:t.isColumnLike,isZoomIn:t.zoomType==="zoomIn",prevLv:t.prevLv,findLevelMemory:t.findLevelMemory,minTickDistance:ee(t.minTickDistance,p),fixedSpacing:ee(t.fixedSpacing,d),limitMargin:ee(t.limitMargin,f),labelMargin:ee(t.labelMargin,v),maxLayerCount:ee(t.maxLayerCount,g),levelLabelSeparator:ee(t.levelLabelSeparator,m),forceToShowFirstLastData:t.forceToShowFirstLastData,timeBodyCtx:t.timeBodyCtx,weekConfig:t.weekConfig};if(t.showFirstLastDataOnly){r=F(s);r.ticks.offset=r.labels.offset=t.offset||0}else{var u=Q(t.intervalUnit,o,s);if(u){s.intervalUnit=u;s.intervalNumber=$(t.intervalNumber);s.intervalPivot=J(t.intervalPivot);r=V(s)}else{r=H(s)}r.ticks.offset=r.labels.offset=t.offset||0;l.categoryWrapper(r,s,true);l.firstLastDataWrapper(r,s);l.timeColumnWrapper(r,s)}W(r,r.context);n.preventAnyOverlapping(r)}return r}function B(e,t){var i=e.tickLevel;var a=e.labelLevel;var r=e.context;if(i&&a&&r){r.limit=G(t.limit,r,a);if(!t.showFirstLastDataOnly){var o;if(r.intervalUnit){o=O}var s;if(l.shouldFirstLastMode(a,r)){s=z(a,r,o)}else{s=T(a,r,o)}var u=w({hasMajor:i.step!==a.step,tickLevel:i,labels:s},r);u.offset=s.offset=t.offset||0;e.ticks=u;e.labels=s;l.categoryWrapper(e,r,false);l.firstLastDataWrapper(e,r);l.timeColumnWrapper(e,r)}else{var c=F(r);e.ticks=c.ticks;e.labels=c.labels;e.ticks.offset=t.offset||0;e.labels.offset=e.ticks.offset}W(e,e.context);n.preventAnyOverlapping(e)}}function V(e){var t=e.intervalUnit;var i=e.intervalNumber;var a=e.timeBodyCtx.levelDict[t];var o=a.period*i;var n={id:"fixed",name:t,step:i,density:R(t,i,e.timeBodyCtx.levelDict),values:a.values,align:false};var s=e.fixedSpacing;var h=e.width;var p=e.end-e.start;if(e.dataBound){p=e.dataBound[1]-e.dataBound[0]}e.width=c(h,u(p*s/o));e.scale=te(e.domain,e.width);e.limit=G(e.limitInput,e,n);var d=T(n,e,O);var f=k(d,e.labelMargin);var v=null;var g=l.shouldFirstLastMode(n,e);while(f){s=c(s,s+f);e.width=c(h,u(p*s/o));e.scale=te(e.domain,e.width);e.limit=G(e.limitInput,e,n);P(d,e,null,g);f=k(d,e.labelMargin);if(Math.abs(f-v)<.01){break}v=f}d=T(n,e,O);var m=e.timeBodyCtx.levelStore.filter(function(e){return e.name===t&&i%e.step===0});var y;for(var _=0;_<m.length;++_){var A=m[_];var b=e.scale(e.start+A.step*e.timeBodyCtx.levelDict[A.name].period);if(b>=e.minTickDistance){y=A;break}}if(y){y=r.extend({align:false},y)}else{y=n}var x={hasMajor:y.step!==n.step,tickLevel:y,labels:d};var S=w(x,e);e.enableForceToShowFirstLast=g;return{width:e.width,level:t,ticks:S,labels:d,tickLevel:y,labelLevel:n,levelResult:x,context:e}}function F(e){var t=[];var i=[];var a={};e.scale=te(e.domain,e.width);e.limit=G(e.limitInput,e);e.firstLastTicksOnly=true;var r=X(e);if(r.length>0){a=r[0];var o;if(e.dataBound&&e.dataBound.length>=2){o=e.dataBound.slice()}else{o=e.domain.slice()}t=T(a,e,0,o);var n={};n.labels=t;n.tickLevel=a;var l={value:o[0],position:e.scale(o[0]),major:false};var s={value:o[o.length-1],position:e.scale(o[o.length-1]),major:false};if(o[0]>o[o.length-1]){i.push(s);i.push(l)}else{i.push(l);i.push(s)}}return{width:e.width,level:a.name,ticks:i,labels:t,tickLevel:a,labelLevel:a,context:e}}function H(e){e.scale=te(e.domain,e.width);e.limit=G(e.limitInput,e);var t=X(e);var i=q(t,e);if(i.labels.length<=1||i.overlapped){t=X(e,A);i=q(t,e,b)}var a=w(i,e);var r=l.shouldFirstLastMode(i.labelLevel,e);e.enableForceToShowFirstLast=r;return{width:e.width,level:i.level,ticks:a,labels:i.labels,tickLevel:i.tickLevel,labelLevel:i.labelLevel,levelResult:i,context:e}}function U(e,t){for(var i=e.layers.length-1;i>=0;i--){var r=e.layers[i];var o=t.layers[i];if(r&&o){o.left=(r.left+r.right)/2-o.width/2;if(o.left<0){o.left=0;o.right=o.width}else{o.right=(r.left+r.right)/2+o.width/2}o.center=(o.right+o.left)/2;t.center=a.isExist(t.center)?t.center:o.center}}t.isFirstData=e.isFirstData;t.isLastData=e.isLastData}function W(e,t){if(e.labels.length<2){return}var i=[];var a=[];var r;var n=5;for(r=0;r<n&&r<e.labels.length;r++){var l=e.labels[r];var s=o.min(l.layers,function(e,t){return(e.left+e.right)/2});i.push(s);a.push(l.value)}var u=L(e.labelLevel,t,0,a,i);for(r=0;r<u.length;r++){U(e.labels[r],u[r]);e.labels[r]=u[r]}}function G(e,t,i){if(e){var a=t.scale;var r=t.limitMargin;if(i){var o=a(t.timeBodyCtx.levelDict[i.name].period*i.step)-a(0);r=c(r,o)}var n=c(0,e[0]-r);var l=h(a.range()[1],e[1]+r);return[s(a.invert(n)),u(a.invert(l)),s(a.invert(e[0])),u(a.invert(e[1]))]}return null}function Y(e,t){C=C.bind(t);e.sort(C);if(e.length===2&&e[1]==="year"&&e[0]==="week"){return}else if(e.length>=2){var i,a,r;for(i=1;i<e.length;i++){a=e[i];r=e[i-1];if(C(a,"quarter")>=0&&C(r,"day")<=0){if(e.indexOf("month")===-1){e.push("month")}if(e.indexOf("day")===-1){e.push("day")}}if(C(a,"day")>=0&&C(r,"minute")<=0){if(e.indexOf("hour")===-1){e.push("hour")}if(e.indexOf("minute")===-1){e.push("minute")}}}}e.sort(C)}function X(e,t){var i,r;var o=e.levels;if(e.start===e.end){for(i=0;i<e.timeBodyCtx.levelStore.length;++i){r=e.timeBodyCtx.levelStore[i];if(r.name===o[0]&&r.step===1){return[r]}}}var n=e.timeBodyCtx.levelStore.filter(function(t){return t.condition?t.condition(e):true});var l={};for(i=o.length;i--;){l[o[i]]=1}var s=e.end-e.start;for(i=n.length;i--;){r=n[i];if(s<r.step*e.timeBodyCtx.levelDict[r.name].period){n.pop()}else{break}}for(i=0;i<n.length;++i){r=n[i];var u=e.scale(e.start+r.step*e.timeBodyCtx.levelDict[r.name].period);if(u>=e.minTickDistance){break}}n=n.slice(i).concat(j(e));if(!a.isSet(t,A)){var c=e.timeBodyCtx.levelStore.filter(function(e){return l[e.name]});var h=c[0].density;var p=c[c.length-1].density;var d={};n=n.filter(function(e){if(e.density>=p&&e.density<=h&&!l[e.name]){d[e.name]=1;return false}return true}).filter(function(e){return!d[e.name]})}var f={};for(i=n.length;i--;){r=n[i];if(f[r.density]){n.splice(i,1)}else if(l[r.name]){f[r.density]=1}}f={};n=n.filter(function(e){if(!f[e.density]){f[e.density]=1;return true}return false});for(i=0;i<n.length;++i){r=n[i];if(l[r.name]){break}}n=i<n.length?n.slice(i):n;if(e.firstLastTicksOnly&&o.length>0&&n.length>0){for(i=0;i<e.timeBodyCtx.levelStore.length;++i){r=e.timeBodyCtx.levelStore[i];if(r.name===o[0]&&r.step===1&&n[0].id!==r.id){n.unshift(r);break}}}return n}function j(e){var t=e.end-e.start;var i=e.timeBodyCtx.levelStore[e.timeBodyCtx.levelStore.length-1];var a=i.name;var r=e.timeBodyCtx.levelDict[a];var o=[];var n=2;var l=n*i.step;var s=e.timeBodyCtx.levelStore.filter(function(e){return e.name===a});while(l*r.period<=t){var u=e.scale(e.start+l*r.period);if(u>=e.minTickDistance){var c=s.concat(o).filter(function(e){return l%e.step===0}).map(function(e){return e.id});o.push({id:n,name:a,step:l,values:r.values,density:R(a,l,e.timeBodyCtx.levelDict),base:c})}n++;l=n*i.step}return o}function Z(t,i){var a=i.start;var r=i.limit;i.limit=null;var o=true;var s=t.name;var u=D[s]*e.getPeriod(s);var c=i.findLevelMemory;var h=i.end-i.start;var p=t.id;var d=l.shouldFirstLastMode(t,i);if(c&&c[p]&&c[p]<=h){return o}else{for(var f=0;f<S&&i.start<i.end;f++){var v=n.getLabels(t,i,I);n.layoutLabels(v,i,true,d);var g=k(v,i.labelMargin,true);if(g[0]>0){o=false;break}i.start+=u}i.start=a;i.limit=r;if(c&&o){c[p]=Math.min(h,c[p])}return o}}function q(e,t,i){var r=-1;var o=-1;var n,l,s,u,c,h;if(e.length){h=true;for(n=0;n<e.length;++n){var p=e[n];if(E(p,t)&&p.continuousOnly){continue}if(Z(p,t)){s=T(p,t);if(k(s,t.labelMargin)===0){r=n;h=false;break}}}u=e[r];if(r<0){r=e.length-1;u=e[r];s=T(u,t)}var d=E(u,t);var f=u.base;if(f){for(n=0;n<f.length;++n){var v=f[n];for(l=r;l--;){if(e[l].id===v){if(d&&e[l].step>1){continue}o=l;break}}if(o>=0){break}}}if(o<0){o=r}c=e[o];if(a.isSet(i,b)){if((h||s.length===1)&&c.step<u.step){var g=c.values(t.utc,t.start,t.end);if(g.length>1){g=[g[0],g[g.length-1]];var m=T(u,t,0,g);if(s.length>1||!k(m,t.labelMargin)){s=m;h=k(s,t.labelMargin)}}}if(h){var y=t.timeBodyCtx.levelStore.filter(function(e){return e.step===1&&e.density<=u.density});for(n=0;n<y.length&&h;++n){u=c=y[n];s=T(u,t);h=k(s,t.labelMargin)}}}}return{hasMajor:c!==u,level:u?u.name:null,tickLevel:c,labelLevel:u,labels:s||[],overlapped:h}}function K(t,i){var a={};t=t||{};for(var r in t){if(t.hasOwnProperty(r)){var o=e.normalizeLevelName(r);if(i.levelDict[o]){a[o]=t[r]}if(N[o]){a[o]=t[r]}}}return a}function Q(e,t,i){e=String(e).toLowerCase();if(e===_){e=t[0]}return i.timeBodyCtx.levelDict[e]?e:null}function $(e){e=s(+e);return isNaN(e)||e<=0?y:e}function J(e){if(e===null||typeof e==="boolean"){return null}var t=new Date(e).getTime();return isNaN(t)?null:t}function ee(e,t){return ae(e)?e:t}function te(e,t){return d3.scale.linear().domain(e).range([0,t])}function ie(e){return e.limitInput&&(e.limitInput[0]>0||e.limitInput[1]<e.width)}function ae(e){return typeof e==="number"&&!isNaN(e)}return{getTicksAndLabels:M,updateTicksAndLabels:B,getScale:te,fixLevelGap:Y}});define("sap/viz/chart/components/axis/sub/TimeAxisBody",["sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/AxisComponent","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/axis/renderer/ValueBodyRenderer","sap/viz/chart/components/renderers/ValueBasedColorRenderer","sap/viz/chart/components/axis/renderer/TimeBodyRenderer","sap/viz/chart/components/util/ClippathUtil","sap/viz/chart/components/util/ZoomUtil","sap/viz/chart/components/axis/sub/TimeAxisBodyHelper","sap/viz/chart/components/axis/sub/TimeAxisCommon","sap/viz/framework/common/format/FormatManager","sap/viz/chart/components/util/BoundUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/api/env/Locale","sap/viz/framework/common/lang/LangManager"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m){var y=11;var _=80;var A=5;var b=3;var x=t.CSS.CLASS.AXIS;var S=t.TIME_LEVEL;var D=["ja","zh_CN","zh_TW","ko"];var w=function(e,t){w.superclass.constructor.apply(this,arguments);this._ticksAndLabels=null;this._tickGroupNode=null;this._labelGroupNode=null;this._scrollOffset=0;if(t){this._isColumnLike=!!t.isColumnLike;this._isLineChart=!!t.isLineChart;this._isMultiplySeriesColumn=t.isMultiplySeriesColumn;this._isKeepMinimalLevelContinuousTicks=t.isKeepMinimalLevelContinuousTicks;this._allowInterval=t.hasOwnProperty("allowInterval")?t.allowInterval:true}this.initLevelList();this.initLevelStore();this.initLevelDict();h.initLevelStoreValues(this.levelStore,this.levelDict);this.minCategoryLevel="day";this.maxCategoryLevel={name:"year",step:5};this._isSupportVBCAxisLine=true;this._cachedVBCStyleArray=[]};i.extend(w,a);w.prototype.normalizeDomain=function(e){if(v.isArray(e)&&e.length>1){var t=new Date(e[0]).getTime();var i=new Date(e[1]).getTime();if(!isNaN(t)&&!isNaN(i)){return t<=i?[t,i]:[i,t]}}return null};w.prototype.initLevelList=function(){this.levelList=f.clone(e.levelList)};w.prototype.initLevelStore=function(){this.levelStore=[{id:"seconds_1",name:"second",step:1},{id:"seconds_5",name:"second",base:["seconds_1"],step:5},{id:"seconds_15",name:"second",base:["seconds_1","seconds_5"],step:15},{id:"seconds_30",name:"second",base:["seconds_1","seconds_2","seconds_5","seconds_15"],step:30},{id:"minutes_1",name:"minute",step:1},{id:"minutes_5",name:"minute",base:["minutes_1"],step:5},{id:"minutes_15",name:"minute",base:["minutes_1","minutes_5"],step:15},{id:"minutes_30",name:"minute",base:["minutes_1","minutes_5","minutes_15"],step:30},{id:"hours_1",name:"hour",step:1},{id:"hours_6",name:"hour",base:["hours_1"],step:6},{id:"hours_12",name:"hour",base:["hours_1","hours_6"],step:12},{id:"days_1",name:"day",step:1},{id:"days_5",name:"day",base:["days_1"],step:5},{id:"weeks_1",name:"week",step:1},{id:"weeks_2",name:"week",base:["weeks_1"],step:2},{id:"days_15",name:"day",base:["days_1","days_5"],step:15,continuousOnly:true},{id:"months_1",condition:h.notCheck(h.sameMonth),name:"month",step:1},{id:"weeks_10",name:"week",base:["weeks_1","weeks_2"],step:10,continuousOnly:true},{id:"months_3",name:"month",base:["months_1"],step:3},{id:"quarters_1",name:"quarter",step:1},{id:"quarters_2",condition:h.notCheck(h.sameYear),name:"quarter",base:["quarters_1"],step:2},{id:"halfyears_1",name:"halfyear",step:1},{id:"quarters_3",name:"quarter",condition:h.sameYear,base:["quarters_1"],step:3},{id:"years_1",name:"year",step:1},{id:"years_5",name:"year",base:["years_1"],step:5}]};w.prototype.initLevelDict=function(){this.levelDict={second:{period:e.ONE_SECOND,format:function(e,t,i,a,r,o,n,l){var s=new Date(e);var u;if(!l&&h.shouldUseShortFormat("second",e,t,i,r,o,n)){u="ss''"}else{u="hh:mm:ss"}return{text:p.format(s,u,i),format:u}},visible:true,values:h.getValuesFunc("seconds"),same:e.isSameSecond},minute:{period:e.ONE_MINUTE,format:"hh:mm",visible:function(e){return e.indexOf("second")<0},values:h.getValuesFunc("minutes"),same:e.isSameMinute},hour:{period:e.ONE_HOUR,format:"hh:00",visible:function(e){return e.indexOf("minute")<0&&e.indexOf("second")<0},values:h.getValuesFunc("hours"),same:e.isSameHour},day:{period:e.ONE_DAY,format:function(e,t,i,a,r,o,n,l){var s=new Date(e);var u;if(!l&&h.shouldUseShortFormat("day",e,t,i,r,o,n)){u="d"}else{var c=D.indexOf(g.get())>-1?m.get("IDS_DAY"):"";u="MMM d"+c}return{text:p.format(s,u,i),format:u}},visible:true,values:h.getValuesFunc("days"),same:e.isSameDay},week:{period:e.ONE_WEEK,format:function(t,i,a,r,o){var n=new Date(t);var l=e.getWeek(n,a,o.weekConfig);if(o.weekConfig&&o.weekConfig.type==="Gregorian"&&o.weekConfig.region==="US"){if(l===1&&e.getMonth(n,a)===11){n=new Date(e.getFullYear(n,a)+1,0,1)}}var s=p.format(n,"Week",a);if(s===p.DEFAULT_FORMATTED_VALUE){if(e.getMonth(n,a)===0&&l>=52){return"W1"}else{return"W"+l}}return s},visible:true,values:h.getValuesFunc("weeks"),same:e.isSameWeek},month:{period:e.ONE_MONTH,format:"MMM",visible:function(e){return e.indexOf("day")<0},values:h.getValuesFunc("months"),same:e.isSameMonth},quarter:{period:e.ONE_QUARTER,format:function(e,t,i){var a=new Date(e);var r=p.format(a,"Quarter",i);if(r===p.DEFAULT_FORMATTED_VALUE){var o=i?a.getUTCMonth():a.getMonth();return"Q"+(Math.floor(o/3)+1)}return r},visible:true,values:h.getValuesFunc("quarters"),same:e.isSameQuarter},halfyear:{period:e.HALF_YEAR,format:function(e,t,i){var a=new Date(e);var r=i?a.getUTCMonth():a.getMonth();return r<6?"H1":"H2"},visible:true,values:h.getValuesFunc("halfyears"),same:e.isSameHalfYear},year:{period:e.ONE_YEAR,format:function(t,i,a,r,o){var n=new Date(t);var l=a?n.getUTCFullYear():n.getFullYear();var s=r;var u=s.length;if(u===2&&s[0]==="week"||u===3&&s[0]==="day"&&s[1]==="week"||o.weekConfig&&o.weekConfig.type==="Gregorian"&&o.levels.indexOf("week")>-1){var c=a?n.getUTCMonth():n.getMonth();if(c===11){var h=e.getWeek(t,a,o.weekConfig);if(h===1){l++}}}return l},visible:true,values:h.getValuesFunc("years"),same:e.isSameYear}}};w.prototype.normalizePadding=function(e){return Math.round(e)};w.prototype.setHasNegativeValue=function(e){this._hasNegativeValue=e;return this};w.prototype.update=function(e){if(this._data&&this._properties.get("visible")&&this._isSpaceEnough()){var t=this._getTicksAndLabels(this._realSize.width,this._size.width,e);this._renderTicksAndLabels(t)}};w.prototype._getAxisColor=function(){var e=this._properties;var t=e.get("color");if(this._hasNegativeValue&&e.origin.get("plotArea.gridline.zeroLine.unhighlightAxis")){t=e.origin.get("plotArea.gridline.color")}return t};w.prototype._renderTicksAndLabels=function(t){if(!t){return}var i=this._properties;var a=this._size.width;var r=this._size.height;var o=this._position;var n=t.ticks;var s=t.labels;var u=t&&t.labelLevel?t.labelLevel.step:1;var h=this._properties.get("label.forceToShowFirstLastData");var p=function(a,r,o){var n=r.value,l;if(t.level==="week"&&r.layers[0].level==="week"){var s=e.truncate(n,r.layers[0].level,undefined,i.origin),u=e.ceil(n,r.layers[0].level,undefined,i.origin);if(new Date(s).getYear()!==new Date(u).getYear()){n=e.truncate(u,a.level,undefined,i.origin)}}n=e.truncate(n,a.level,undefined,i.origin);l=e.ceil(n,a.level,undefined,i.origin);if(g._isColumnLike&&t.displayMode==="CONTINUOUS"){l=e.truncate(l,t.level,undefined,i.origin)}return{min:n,max:l}};var d;if(!this._properties.get("label.showFirstLastDataOnly")){var f=s.length,g=this;var m=c.getScale(this._data.getDomain(),this._realSize.width);for(var y=0;y<f;y++){var _=s[y];_.layers[0].id="0-"+_.value;_.layers[0].range={min:_.value,max:e.ceil(_.value,_.layers[0].level,undefined,i.origin)};if(u===1){if(h&&(_.isFirstData||_.isLastData)){d=e.floor(_.layers[0].range.min,_.layers[0].level,undefined,i.origin);_.layers[0].rectX=m(d);_.layers[0].range.min=d}else{_.layers[0].rectX=m(_.layers[0].range.min)}_.layers[0].rectWidth=m(_.layers[0].range.max)-_.layers[0].rectX}for(var A=1;A<_.layers.length;A++){var b=_.layers[A];b.id=A+"-"+_.value;if(v.isNonEmptyString(b.text)){var x=p(b,_,y);b.range=x;if(h&&(_.isFirstData||_.isLastData)){d=e.floor(x.min,b.level,undefined,i.origin);b.rectX=m(d);b.range.min=d}else{b.rectX=m(x.min)}b.rectWidth=m(x.max)-b.rectX;for(var S=A-1;S>=0;S--){if(_.layers[S].range&&x.min>=_.layers[S].range.min&&x.max<_.layers[S].range.max){_.layers[S].range.max=x.max;if(_.layers[S].hasOwnProperty("rectX")){_.layers[S].rectWidth=m(_.layers[S].range.max)-_.layers[S].rectX}}}}}}}var D=this.runtime().effectManager();if(i.get("axisTick.visible")&&this._tickGroupNode){var w=this._properties.get("color");l.drawTicks(this._tickGroupNode,n,a,r,o,i,w,D)}if(i.get("label.visible")&&this._labelGroupNode){l.drawLabels(this,s,a,r,o,i,D,t.displayMode,u,t.level)}this._lockLabels(t.labels)};w.prototype._lockLabels=function(e){if(!this._labelGroupNode||e.layerCount<=1){return}var t=this._properties.get("label.showFirstLastDataOnly");if(t){return}var i=0;var a=this._labelGroupNode.node().querySelectorAll(".v-label");var r=a.length?a.length:0;var o=e.offset||0;var n,l;function s(t,i){var a=e[t];var r=a&&a.layers;return r&&r[i]&&r[i].text}for(l=0;l<e.layerCount-1;++l){var u=null;var c=null;var h=null;var p=false;for(n=0;n<r;++n){var d=e[n];u=a[n].querySelectorAll(".v-label-upperLevel")[l];if(u){u.removeAttribute("dx")}var f=s(n,l+1);if(d.layers[0].right-o>i&&!p){p=1;if(f){u=a[n].querySelectorAll(".v-label-upperLevel")[l];h=d}else if(v.isNumber(c)&&c>=0){u=a[c].querySelectorAll(".v-label-upperLevel")[l]}if(u){var g=s(n+1,l+1);var m=parseFloat(u.getAttribute("x"));if(m<i){if(!g){u.setAttribute("dx",i-m)}else if(h){var y=a[n].querySelectorAll(".v-label-baseLevel")[0];var _=parseFloat(y.getAttribute("x"));var A=_+d.layers[0].width/2;var b=A-h.layers[l+1].width/2;if(b>i){u.setAttribute("dx",i-m)}else{u.setAttribute("dx",b-m)}}}}}if(!p&&f){c=n;h=d}}}};w.prototype.isExistingItem=function(e,t){var i=false;var a;for(a=0;a<e.length;a++){if(f.deepEqual(e[a],t)){i=true;break}}return i};w.prototype.normalizeVBCArray=function(e,t){var i;var a=f.clone(e);i=[];var r;for(r=0;r<a.length;r++){if(!a[r].callback){i.push(a[r])}}if(t){for(r=0;r<t.length;r++){if(t[r].vbcContext.color&&t[r].rawData&&t[r].rawData.timeAxis&&t[r].rawData.timeAxis[0]){var o={};o.start=t[r].rawData.timeAxis[0].parsedValue;o.end=t[r].rawData.timeAxis[0].parsedValue;o.color=t[r].vbcContext.color;if(!this.isExistingItem(i,o)){i.push(o)}}}}return i};w.prototype.renderValueBasedColorLine=function(i){var a=this._ticksAndLabels;var r=this._lineSelection;if(r){var o=this._properties;var l=this._size.width;var s=this._size.height;var u=this.runtime().effectManager();if(this._isSupportVBCAxisLine&&o.get("axisLine.visible")&&l>0&&s>0){var h=r.select("."+x.LINE_GROUP);if(!h.node()){h=r.append("g").attr("class",x.LINE_GROUP)}var p=0;if(a&&a.labels&&a.labels.offset){p=a.labels.offset}else if(a&&a.ticks&&a.ticks.offset){p=a.ticks.offset}var d=this._data.getDomain();var f=c.getScale(d,this._realSize.width);var g=o.origin.get("general.defaultTimePeriodColor");var m=o.origin.get("general.timePeriodStyle");if(m&&m.length){if(i){m=this.normalizeVBCArray(m,i);this._cachedVBCStyleArray=m.slice()}else{if(!this._cachedVBCStyleArray.length){this._cachedVBCStyleArray=this.normalizeVBCArray(m)}m=this._cachedVBCStyleArray.slice()}var y;var _;var A;var b;n.cleanVBCAxisLines(h);var S;for(y=0;y<m.length;y++){if(m[y]&&v.isExist(m[y].start)&&v.isExist(m[y].end)){var D=m[y].start;var w=m[y].end;if(D===t.PLOTAREA.LAST_DATAPOINT||w===t.PLOTAREA.FIRST_DATAPOINT){w=m[y].start;D=m[y].end}if(D===t.PLOTAREA.FIRST_DATAPOINT||w===t.PLOTAREA.LAST_DATAPOINT){if(!S){S=d.slice();if(a&&a.context){if(a.context.dataBound&&a.context.dataBound.length>=2){S=a.context.dataBound.slice()}else if(a.context.domain){S=a.context.domain.slice()}}}if(D===t.PLOTAREA.FIRST_DATAPOINT){D=S[0]}if(w===t.PLOTAREA.LAST_DATAPOINT){w=S[1]}}var C=new Date(D).getTime();var T=new Date(w).getTime();if(!v.isNumber(C)||!v.isNumber(T)){continue}var z;if(C>T){z=C;C=T;T=z}var L=e.levelComparator.bind(this);a.context.levels.sort(L);var P=a.context.levels[0];var k=this.levelDict[P].period;C=e.truncate(C,P,a.context.utc,o.origin,a.context.weekConfig)-k/2;T=e.truncate(T,P,a.context.utc,o.origin,a.context.weekConfig)+k/2;_=f(C)-p;A=f(T)-p;if(_>l||A<0){continue}if(_<0){_=0}if(A>l){A=l}b=m[y].color||g;n.drawVBCAxis(h,_,A,b,o,u)}}}}}};w.prototype._renderAxisLine=function(e,t){if(e){var i=this._properties;var a=this._size.width;var r=this._size.height;if(i.get("axisLine.visible")&&a>0&&r>0){var n=e.select("."+x.LINE_GROUP);if(!n.node()){n=e.append("g").attr("class",x.LINE_GROUP)}var l=this._isVertical()?r:a;var s=[0,l];var u=i.get();var c=this.runtime().effectManager();var h=this._position;u.color=this._getAxisColor();o.drawLines(n,s,a,r,h,u,c);this._ticksAndLabels=t;this._lineSelection=e;this.renderValueBasedColorLine()}}};w.prototype.scroll=function(e){var t=this._properties;var i=-e.x;var a=this._ticksAndLabels;var o=Math.abs(this._scrollOffset-i);o=r.preciseSimple(o);if(this._isHorizontal()&&a){this._scrollOffset=i;c.updateTicksAndLabels(a,{offset:i,limit:[i,i+this._size.width],showFirstLastDataOnly:t.get("label.showFirstLastDataOnly")});this._renderTicksAndLabels(a);this._renderAxisLine(this._selection,a)}};w.prototype.render=function(e){this._selection=e;d.drawBound(e,this._size.width,this._size.height,null,true);e.select("g."+x.LINE_GROUP).remove();e.select("g."+x.TICK_GROUP).remove();e.select("g."+x.LABEL_GROUP).remove();var t=s.drawClippath(d3.select(e.node().parentNode),this._size.width+2,this._size.height+2,-1,-1);e.attr("clip-path","url(#"+t+")");var i=this._properties;if(this._data&&i.get("visible")){var a=null;var r=this._position;var o=this._size.width;var n=this._size.height;var l=this.runtime().effectManager();if(i.get("label.visible")){t=s.drawClippath(e,o+2,n+2,-1,-1,"labels");a=e.append("g").attr("clip-path","url(#"+t+")");this._labelGroupNode=a.append("g").attr("class",x.LABEL_GROUP)}var u=this._getTicksAndLabels(this._realSize.width,o);this._renderAxisLine(e,u);if(i.get("axisTick.visible")){t=s.drawClippath(e,o+2,n+2,-1,-1,"ticks");a=e.append("g").attr("clip-path","url(#"+t+")");this._tickGroupNode=a.append("g").attr("class",x.TICK_GROUP)}this._renderTicksAndLabels(u);if(u){e.datum({level:u.level})}}};w.prototype.getPreferredSize=function(e){var i={minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,spacings:[{interval:0,type:t.SPACING_TYPE.STEP}]};var a=this._properties;if(this._data&&a.get("visible")&&this._isHorizontal()){var o=this._data;var n=o.getRange();var l=Math.abs(n[0]-n[1]);var s=y;var u=e?e.width:this._size.width||l;var c=this._getTicksAndLabels(l,u);if(c){this._realSize.width=c.width;if(a.get("label.visible")){var h=this._properties.get("label.style");var p=this._measureTextSize("1",h).height;s+=p*Math.max(c.labels.layerCount,2)}}i.minWidth=u;i.maxWidth=u;i.minHeight=s;i.maxHeight=s;i.spacings=[{interval:s,type:t.SPACING_TYPE.STEP}]}var d=r.preciseObject(i);this._updatePfdSize(d);return d};w.prototype.getRealSize=function(){return{width:this._realSize.width,height:this._realSize.height}};w.prototype.destroy=function(){w.superclass.destroy.apply(this,arguments);this._ticksAndLabels=null;this._tickGroupNode=null;this._labelGroupNode=null;this._findLevelMemory=null};w.prototype._getTicksAndLabels=function(e,t,i){var a=this._properties;var r=this._allowInterval&&a.get("interval.unit");var o=this._data.getDomain();var n=this._data.getDataBound();var l=u.getZoomRange(a.origin,o);var s=l[0];var h=l[1];var p=u.isZoomRangeValid(s,h,o);var d=u.isRangeIncomplete(l);var f=a.get("levelConfig");var v=f&&f.week;var g=this.runtime().statusManager();if(g.get("zooming")){r=null}else if(this._isLineChart&&p&&d){var m="minlevel";r=r||m}else if(p){r=null}var y=Math.min(this._scrollOffset,e-t);var _=this._ticksAndLabels?this._ticksAndLabels.labelLevel:null;this._findLevelMemory=this._findLevelMemory||{};t=t||e;this._ticksAndLabels=c.getTicksAndLabels({dataBound:n,domain:o,width:e,offset:y,limit:[y,y+t],levels:g.get("timeLevels"),labelStyle:a.get("label.style"),weekConfig:v,config:f,combinationConfig:a.get("combinationConfig"),intervalUnit:r,intervalNumber:a.get("interval.number"),intervalPivot:a.get("interval.keyLabel"),utc:a.origin.get("general.showAsUTC"),isColumnLike:this._isColumnLike,showFirstLastDataOnly:a.get("label.showFirstLastDataOnly"),forceToShowFirstLastData:a.get("label.forceToShowFirstLastData"),prevLv:_,zoomType:i,findLevelMemory:this._findLevelMemory,timeBodyCtx:this});return this._ticksAndLabels};w.prototype.getAvailableLayersNumber=function(){var e=0;if(this._data&&this._properties.get("visible")&&this._isSpaceEnough()){e=1}return e};w.prototype.getActiveLevels=function(){return this._ticksAndLabels&&this._ticksAndLabels.labels.allLevels};w.prototype.getActiveLabels=function(){return this._ticksAndLabels&&this._ticksAndLabels.labels};w.prototype.getRange=function(){if(this._ticksAndLabels&&this._ticksAndLabels.context){return[this._ticksAndLabels.context.start,this._ticksAndLabels.context.end]}};w.prototype.getTimeValueFormat=function(t){var i=t;if(v.isString(t)){i=new Date(t).getTime()}else if(e.isDateValid(t)){i=t.getTime()}if(!this._data||isNaN(i)||!v.isNumber(i)){return[]}if(!this._ticksAndLabels){this._getTicksAndLabels(this._realSize.width,this._size.width)}var a=this._ticksAndLabels;return this.getValueFormatForTooltip(i,a.context,a.labelLevel?a.labelLevel.name:null)};w.prototype.getCellPosition=function(e){var t=this._ticksAndLabels.labels,i;for(var a=0;a<t.length;a++){var r=t[a].layers;for(var o=0;o<r.length;o++){var n=r[o];if(n.id===e){var l=c.getScale(this._data.getDomain(),this._realSize.width);if(n.range){var s=l(n.range.min),u=l(n.range.max);i={x:s,width:u-s}}break}}if(i){break}}return i};w.prototype.getScale=function(){return this._data};w.prototype.isOnlyShowingFirstAndLastLabel=function(){return this._properties.get("label.showFirstLastDataOnly")};w.prototype.getValueFormatForTooltip=function(e,t,i){return h.getTimeValueFormat(e,t,i,this)};w.prototype.fixLevelGap=function(e){c.fixLevelGap(e,this)};w.prototype.isForceCategoryForMinLevel=function(t,i,a){var r=e.levelComparator.bind(this);var o=a;if(!o){var n=this.runtime().statusManager();o=n.get("timeLevels");if(o){o.sort(r)}}var l=false;if(o&&t){l=this._isMultiplySeriesColumn&&i===1&&r(t,o[0])===0}return l};return w});define("sap/viz/chart/components/axis/sub/FiscalAxisBody",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/TimeAxisBody","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/chart/components/axis/sub/TimeAxisCommon","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/format/FormatManager"],function(e,t,i,a,r,o,n,l,s){var u=function(e,t){u.superclass.constructor.apply(this,arguments);this.minCategoryLevel=i.FISCAL.PERIOD;var a=this.maxCategoryLevel.step;this.maxCategoryLevel={name:i.FISCAL.YEAR,step:a};this._isSupportVBCAxisLine=false};e.extend(u,t);u.prototype.normalizeDomain=function(e){if(l.isArray(e)&&e.length>1){var t=e[0];var i=e[1];if(!isNaN(t)&&!isNaN(i)&&isFinite(t)&&isFinite(i)){return t<=i?[t,i]:[i,t]}}return null};u.prototype.initLevelList=function(){this.levelList={};this.levelList[i.FISCAL.PERIOD]=a.clone(r.levelList[i.FISCAL.PERIOD]);this.levelList[i.FISCAL.YEAR]=a.clone(r.levelList[i.FISCAL.YEAR])};u.prototype.initLevelStore=function(){this.levelStore=[{id:"fiscal_period_1",name:"fiscal_period",step:1},{id:"fiscal_period_2",name:"fiscal_period",base:["fiscal_period_1"],step:2},{id:"fiscal_period_4",name:"fiscal_period",base:["fiscal_period_1","fiscal_period_2"],step:4},{id:"fiscal_year_1",name:"fiscal_year",step:1},{id:"fiscal_year_5",name:"fiscal_year",base:["fiscal_year_1"],step:5}]};u.prototype.initLevelDict=function(){var e=this._properties.origin;this.levelDict={fiscal_period:{period:i.FISCAL.ONE_FISCAL_PERIOD,format:function(t,i){if(i&&i.isOriginalFiscalStamp){return n.fiscalStampToObj(t,e).fiscalPeriod}else{return n.quantityToFiscal(t,e).fiscalPeriod}},visible:true,values:o.getValuesFunc("fiscal_periods",this),same:n.isSameFiscalPeriod},fiscal_year:{period:i.FISCAL.ONE_FISCAL_YEAR,format:function(t,i){if(i&&i.isOriginalFiscalStamp){return n.fiscalStampToObj(t,e).fiscalYear}else{return n.quantityToFiscal(t,e).fiscalYear}},visible:true,values:o.getValuesFunc("fiscal_years",this),same:n.isSameFiscalYear.bind(this)}}};u.prototype.normalizePadding=function(e){return e};u.prototype.getValueFormatForTooltip=function(e,t,i){var n=a.extend(true,[],r.normalizeLevels(t.levels,this));if(i){i=r.normalizeLevelName(i);if(i&&n.indexOf(i)===-1){n.push(i);n.sort(r.levelComparator.bind(this))}}var l=o.getPrevInfo(null,null);var s;var u;var c=[];var h;for(h=n.length-1;h>=0;h--){s=o.getCurrentInfo(e,n[h],n,null);u=this.formatFiscalLabel(s,l,t);c.push(u.text)}return c};u.prototype.formatFiscalLabel=function(e,t,i){var a=e.value;var r=e.levelName;var n=e.labelLevels;var u=t&&t.prevValue;var c=i.config;var h=c&&c[r]?c[r][o.FORMAT_CONFIG_FIELD]:null;var p=i.timeBodyCtx.levelDict[r]&&i.timeBodyCtx.levelDict[r].format;var d;var f;var v={};v.isOriginalFiscalStamp=true;if(l.isFunction(h)){f=h(a,u,false,n.slice());if(f){d={format:h,text:f}}}else if(l.isString(h)){f=s.format(a,h);if(f){if(f instanceof Date){f=h}d={format:h,text:f}}}if(!d){if(l.isString(p)){f=s.format(a,p);if(f instanceof Date){f=p}d={format:p,text:f}}else if(l.isFunction(p)){var g=p(a,v);if(l.isPlainObject(g)){d=g}else{d={format:p,text:g}}}}if(l.isString(d)){d={text:d}}d.text=l.isNumber(d.text)?d.text.toString():d.text;return d};u.prototype.fixLevelGap=function(e){e.sort(r.levelComparator.bind(this))};return u});define("sap/viz/chart/components/accessibility/TimeAxisNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/ChartComponentNavigator","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i){function a(e){a.superclass.constructor.apply(this,arguments);this._timeLabels={};this._cells=this.label2cells(e.cells)}var r=3*24*36e5;e.extend(a,t);var o=a.prototype;o.label2cells=function(e){var t=[],i=[];for(var a=0;a<e.length;a++){var r=e[a].layers;for(var o=0;o<r.length;o++){var n=r[o];if(n.hasOwnProperty("rectX")&&n.text){if(!t[o]){t[o]=[];i[o]=0}t[o].push(n);n.index={row:o,col:i[o]++};this._timeLabels[n.id]={};this._timeLabels[n.id].index=n.index}}}return t};o.init=function(){};o.destroy=function(){a.superclass.destroy.apply(this,arguments);this._cells=null;this._categoryLabels=null};o.up=function(e,t){return this.getFirstChildCell(e,t)};o.down=function(e){return this.getParentCell(e)};o.left=function(e){return this.getSiblingCell(e,-1)};o.right=function(e){return this.getSiblingCell(e,1)};o.getCell=function(e){if(!this._timeLabels[e]){return null}var t=this._timeLabels[e].index;return this._cells[t.row][t.col]||null};o.getSiblingCell=function(e,t){var i;if(!this._timeLabels[e]){i={row:parseInt(e.split("-")[0]),col:0};return this._cells[i.row][i.col]}else{i=this._timeLabels[e].index}var a=this._cells[i.row][i.col+t];return a?a:null};o.getFirstChildCell=function(e,t){if(!this._timeLabels[e]){return null}var i=this._timeLabels[e].index;var a=this._cells[i.row-1];if(!a){return null}var o=function(e,i,a){if(i[a].rectX+t.x>=0){return i[a]}else{if(i[a+1]&&i[a+1].range.min<e.range.max){return i[a+1]}else{return i[a]}}};var n=this._cells[i.row][i.col],l;for(var s=0;s<a.length;++s){if(a[s].level==="week"){var u=a[s].range.min+r;if(n.range.min<=a[s].range.min&&u<=n.range.max||n.range.min<=u&&a[s].range.max<=n.range.max){return o(n,a,s)}}else{if(a[s].range.min>=n.range.min&&a[s].range.max<=n.range.max){return o(n,a,s)}}}};o.getParentCell=function(e){if(!this._timeLabels[e]){return null}var t=this._timeLabels[e].index;var i=this._cells[t.row+1];if(!i){return null}var a=this._cells[t.row][t.col];for(var o=0;o<i.length;o++){if(a.level==="week"){var n=a.range.min+r;if(a.range.min>=i[o].range.min&&n<=i[o].range.max||n>=i[o].range.min&&a.range.max<=i[o].range.max){return i[o]}}else{if(a.range.min>=i[o].range.min&&a.range.max<=i[o].range.max){return i[o]}}}};o.getFirstStartPoint=function(){var e=this._cells[0]?0:1;var t=this._cells[e]&&this._cells[e].length||0;for(var i=0;i<t;i++){if(this._cells[e][i]&&this._cells[e][i].text){return this._cells[e][i]}}return{id:null}};o.updateCells=function(e){this._timeLabels={};this._cells=this.label2cells(e)};o.findCell=function(e,t){if(!(e&&e.id)){return null}var i=e.id.split("-");var a=i[0],r=i[1];if(!this._cells[a]){a++}if(!this._cells[a]){return null}for(var o,n=0,l=this._cells[a].length;n<l;n++){o=this._cells[a][n];if(e.id===o.id||r>=o.range.min&&r<o.range.max){return o}}return null};return a});define("sap/viz/chart/components/axis/TimeAxis",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/AxisContainer","sap/viz/chart/scales/TimeScale","sap/viz/chart/components/axis/sub/TimeAxisBody","sap/viz/chart/components/axis/sub/FiscalAxisBody","sap/viz/framework/common/util/FiscalUtil","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/FunctionUtils","sap/viz/framework/common/format/FormatManager","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/TimeAxisNavigator","sap/viz/chart/components/util/ChartConstants"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f){var v="measureNames";var g=function(e,t){g.superclass.constructor.apply(this,arguments);var i;if(n.isFiscal(t.rawData)){this._isFiscal=true;i=new o(e,t)}else{i=new r(e,t)}this.setChild("axisBody",i,{order:1,priority:2,offset:0})};t.extend(g,i);g.prototype.addARIATag=function(e){e.attr("role","listbox")};g.prototype._updateSubModules=function(e){var t=this.getChild("axisBody").module;t.setSize({width:this._size.width});var i;if(e.x===this._prevScaleX||!this._prevScaleX){i="noChange"}else if(e.x>this._prevScaleX){i="zoomIn"}else{i="zoomOut"}this._prevScaleX=e.x;t.setRealSize(this._realSize);t.update(i)};g.prototype.setData=function(e,t){g.superclass.setData.call(this,e);if(h.isExist(t)){this._hasNegativeValue=t}if(e.scale){var i=e.scale;this._scale=new a(i.getDomain(),[0,1],undefined,{dataBound:i.getDataBound()})}};g.prototype.setHasNegativeValue=function(e){this._hasNegativeValue=e;var t=this.getChild("axisBody").module;t.setHasNegativeValue(this._hasNegativeValue);return this};g.prototype._updateData=function(e){g.superclass._updateData.apply(this,arguments);if(!this._scale){return}if(this._isVertical()){this._scale.setRange([e.height,0])}else{this._scale.setRange([0,e.width])}var t=this.getChild("axisBody").module;t.setData(this._scale);t.setHasNegativeValue(this._hasNegativeValue)};g.prototype._constructTitle=function(e,t){var i=e.map(function(e){return e.name||e.id}).join(" / ");var a={};a.isHidden=false;a.text=i;t.push(a);return i};g.prototype.isVisible=function(){var e=this.properties();return e.visible===true};g.prototype.isLabelVisible=function(){var e=this.properties();return this._bodyLayersNumber>0&&e.label.visible};g.prototype.getFiscalUnitLabels=function(){var t=[];if(this._isFiscal){t.push(s.get("IDS_FISCALYEAR"));if(n.extractUnitType(this._properties.origin)===e.FISCAL.UNITTYPE_YEARPERIOD){t.push(s.get("IDS_FISCALPERIOD"))}}return t};g.prototype.getFormatTimeValue=function(e){var t=this.getChild("axisBody").module;var i=t.getTimeValueFormat(e);var a=i[0]===""?null:i[0];var r=i[1]===""?null:i[1];var o={};if(this._isFiscal){o.fiscalyear=a;o.fiscalperiod=r}else{o.day=a;o.time=r}return o};g.prototype.supportFixedLayout=true;g.prototype._setupLayout=function(t){g.superclass._setupLayout.call(this,t);var i=this.getChild(e.AXIS.SCROLLBAR_NAME);var a=this._properties.origin.get("plotArea.scrollbar.visible");if(i&&a===false){i.module.isExist(false)}};g.prototype.isByBound=function(){return true};p.register(f.TIMEAXIS_NAVIGATOR,null,d);return g});define("sap/viz/chart/components/datalabels/ScatterDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils"],function(e,t,i){function a(e,t){a.superclass.constructor.apply(this,arguments);this._labelPosition="up"}e.extend(a,t);var r=a.prototype;r._hasTimeAxis=function(){return!!this._data.timeAxis};r._getDataLabelInfo=function(e){var t=this._hasTimeAxis()?"valueAxis":"valueAxis2";var a=this._data;var r=i.getContextByDataModel(e,a);var o=a[t].metaData[0].id;return{key:o,value:r[o]}};return a});define("sap/viz/chart/components/renderers/ScatterRenderer",["sap/viz/framework/common/util/SVG","sap/viz/chart/components/util/DrawUtil"],function(e,t){function i(i){var a=e.createSVGNode("path");var r=i.graphic;var o=r.opacity;if(o>1||o<0){o=.8}var n=r.fillOpacity;if(n>1||n<0){n=1}if(r.shape==="circle"&&i.isBigData){a=e.createSVGNode("circle");a.setAttribute("fill",r.fill);a.setAttribute("r",r.width/2);if(r.fill!=="transparent"){a.setAttribute("stroke-width",r.borderWidth);a.setAttribute("stroke",r.borderColor);a.setAttribute("opacity",o);if(n!=null){a.setAttribute("fill-opacity",n)}}return a}var l={drawingEffect:r.drawingEffect,fillColor:r.fill,graphType:r.shape,direction:"vertical",rx:r.width/2,ry:r.height/2,borderWidth:r.borderWidth,node:a,opacity:o,fillOpacity:n,borderColor:r.borderColor};if(i.graphic.pattern){l.patternEffect=i.graphic.pattern}t.drawGraph(l,i.effectManager);return a}i.expose={renderer:i};return i});define("sap/viz/chart/components/plots/ProjectionHelper",["sap/viz/framework/common/util/oo"],function(e){var t=1;var i=6;var a=Math.abs;var r={};function o(){}o.prototype.init=function(e,t){this._rx=e;this._ry=t};function n(){}e.extend(n,o);n.prototype.init=function(e,t){this._rxSquare=e*e;this._rySquare=t*t;this._rxrySquare=this._rxSquare*this._rySquare;this._isCircle=this._rxSquare===this._rySquare};n.prototype.isInRange=function(e,t){return this._isCircle?e*e+t*t<=this._rxSquare:e*e*this._rySquare+t*t*this._rxSquare<=this._rxrySquare};function l(){}e.extend(l,o);l.prototype.init=function(e,t){this._rx=e;this._ry=t;this._rxry=e*t};l.prototype.isInRange=function(e,t){e=a(e);t=a(t);return this._rx*t+this._ry*e<=this._rxry};function s(){}e.extend(s,o);s.prototype.init=function(e,t){this._2ry=t*2;this._rxry=e*t;this._rx=e};s.prototype.isInRange=function(e,t){e=a(e);return this._rx*t+this._2ry*e<=this._rxry};function u(){}e.extend(u,o);u.prototype.init=function(e,t){this._2ry=t*2;this._rxry=e*t;this._rx=e};u.prototype.isInRange=function(e,t){e=a(e);return this._2ry*e-this._rx*t<=this._rxry};function c(){}e.extend(c,o);c.prototype.init=function(e,t){this._2rx=e*2;this._rxry=e*t;this._ry=t};c.prototype.isInRange=function(e,t){t=a(t);return this._2rx*t-this._ry*e<=this._rxry};function h(){}e.extend(h,o);h.prototype.init=function(e,t){this._2rx=e*2;this._rxry=e*t;this._ry=t};h.prototype.isInRange=function(e,t){t=a(t);return this._2rx*t+this._ry*e<=this._rxry};function p(){}e.extend(p,o);p.prototype.init=function(e,t){this._9ry=9*t;this._8ry=8*t;this._6rx=6*e;var i=e*t;this._3rxry=3*i;this._2rxry=2*i};p.prototype.isInRange=function(e,t){e=a(e);t=a(t);var i=this._6rx*t;return this._9ry*e-this._3rxry<=i&&i<=this._8ry*e+this._2rxry};function d(){}e.extend(d,o);d.prototype.init=function(e,t){this._dx=e/3;this._dy=t/3};d.prototype.isInRange=function(e,t){return a(e)<=this._dx||a(t)<=this._dy};function f(){}e.extend(f,o);f.prototype.isInRange=function(e,t){return a(e)<=this._rx&&a(t)<=this._ry};function v(e){this._projectorClz=e}e.extend(v,o);v.prototype.init=function(e,t,i){this._outer=new this._projectorClz;this._outer.init(e,t);this._inner=new this._projectorClz;this._inner.init(e-i,t-i)};v.prototype.isInRange=function(e,t){return!this._inner.isInRange(e,t)&&this._outer.isInRange(e,t)};var g={circle:new n,diamond:new l,triangleUp:new s,triangleDown:new u,triangleLeft:new c,triangleRight:new h,intersection:new p,cross:new d,square:new f,negative_circle:new v(n),negative_diamond:new v(l),negative_triangleUp:new v(s),negative_triangleDown:new v(u),negative_triangleLeft:new v(c),negative_triangleRight:new v(h),negative_intersection:new v(p),negative_cross:new v(d),negative_square:new v(f)};function m(e){var t=e.shape;if(t=="circle"&&!e.negativeValue){t="square"}t=e.negativeValue===true?"negative_"+t:t;return t}function y(e,t,i){var a=m(e);var o=r[a];o=o&&o[t];return o&&o[i]}function _(e,t,i){var a=m(e);var o=r[a]=e[a]||{};o=o[t]=o[t]||{};var n=o[i]=[];return n}function A(e,t,i){var a=m(e);var r=y(e,t,i);if(!r){var o=g[a];if(o){o.init(t,i,e.borderWidth);r=_(e,t,i);r.length=(t*2+1)*(i*2+1)*2;var n=0;for(var l=-t;l<=t;++l){for(var s=-i;s<=i;++s){if(o.isInRange(l,s)){r[n++]=l;r[n++]=s}}}r.length=n}}return r}function b(e,a,r){var o=[];r=r||{};e=o.width=Math.round(e);a=o.height=Math.round(a);o.layerLimit=r.layerLimit>0?parseInt(r.layerLimit):t;o.visibleThreshold=r.visibleThreshold>0?parseInt(r.visibleThreshold):i;var n=o.length=e*a;for(;n--;){o[n]=0}return o}function x(e,t,i,a,r,o){var n=e.width;var l=e.height;var s=e.layerLimit;if(t.shape=="circle"&&!!!t.negativeValue){r=o=Math.round(o/Math.SQRT2)}var u=A(t,r,o);var c=i-r;var h=i+r;var p=a-o;var d=a+o;var f=[];var v;var g,m,y;var _,b;if(c<0){c=0;v=true}if(h>n){h=n;v=true}if(p<0){p=0;v=true}if(d>l){d=l;v=true}if(u){var x=u.length;for(g=0;g<x;g+=2){if(!v){_=i+u[g];b=a+u[g+1];if(_>=c&&_<=h&&b>=p&&b<=d){y=_*l+b;if(e[y]<s){f.push(y)}}}}}else{for(g=c;g<=h;++g){var S=g*l;var D=S+d;for(y=S+p;y<=D;++y){if(e[y]<s){f.push(y)}}}}if(f.length>=e.visibleThreshold){for(g=f.length;g--;){e[f[g]]++}return true}return false}return{createPixelBoard:b,isAreaVisible:x}});define("sap/viz/chart/components/decorator/HitTestDecorator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/decorator/BaseHitTestDecorator","sap/viz/chart/components/util/HitTestUtils"],function(e,t,i){var a=i.isInCircle;var r=i.isInRect;var o=function(){o.superclass.constructor.apply(this,arguments);this._decos.hitTest=function(e){var t=this._dataPointContext,i=e.left,o=e.top;var n;var l=this.getSize();var s=this._offset;var u=-s.x;var c=-s.y;var h=this._selection.select(".v-plot-bound").node();var p=h.getBoundingClientRect().width/l.width;if(e.hasOwnProperty("width")&&e.hasOwnProperty("height")){var d=e.width,f=e.height;var v=l.width;if(p!=1){v*=p;u*=p;c*=p}n=t.filter(function(e){var t=e.data.translate.slice();if(p!=1){t[0]*=p;t[1]*=p}var a=[i+u,o+c];return t[0]>=u&&t[0]<=v+u&&r(t,a,d,f)})}else{n=t.filter(function(e){return a(e.data.translate,[i,o],4)})}return n}};e.extend(o,t);return o});define("sap/viz/chart/components/accessibility/ScatterDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/BaseDataPointNavigator"],function(e,t){function i(){i.superclass.constructor.apply(this,arguments);this._vSortedDatapoint=[];this._hSortedDatapoint=[]}e.extend(i,t);var a=i.prototype;a.init=function(){if(this._series){for(var e=0;e<this._series.length;e++){for(var t=0;t<this._series[e].length;t++){this._vSortedDatapoint.push(this._series[e][t]);this._hSortedDatapoint.push(this._series[e][t])}}if(this._renderType.match(/^timeseries/)){this._hSortedDatapoint.sort(function(e,t){return e.timeAxis[0].parsedValue-t.timeAxis[0].parsedValue});this._vSortedDatapoint.sort(function(e,t){return e.valueAxis-t.valueAxis})}else{this._hSortedDatapoint.sort(function(e,t){return e.valueAxis-t.valueAxis});this._vSortedDatapoint.sort(function(e,t){return e.valueAxis2-t.valueAxis2})}}};a.getFirstStartPoint=function(){if(this._series){for(var e=0;e<this._series.length;e++){for(var t=0;t<this._series[e].length;t++){if(this._isValidDataItem(this._series[e][t])){return this._series[e][t].dp}}}}return null};a.up=function(e){return this._move(e,1)};a.down=function(e){return this._move(e,-1)};a.left=function(e){return this._move(e,-1,true)};a.right=function(e){return this._move(e,1,true)};a.destroy=function(){i.superclass.destroy.apply(this,arguments);this._vSortedDatapoint=null;this._hSortedDatapoint=null};a._isValidDataItem=function(e){return e&&e.valueAxis&&(e.valueAxis2||e.timeAxis)};a._move=function(e,t,i){var a=i?this._hSortedDatapoint:this._vSortedDatapoint;var r=this.getDataPoint(e);var o=this.locate(r.address());var n=a.indexOf(o)+t;var l=a[n];var s=a.length;while(n>=0&&n<s&&!l){n+=t;l=a[n]}return l?l.dp:null};return i});define("sap/viz/chart/components/trendline/mixin/scatterPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/trendline/mixin/columnPlot","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/trendline/Trendline"],function(e,t,i,a){function r(){}e.extend(r,t);var o=r.prototype;o._rasterizeTrendData=function(e,t){var i=e.raw;return!t?i:i.map(function(e){return{x:e.y,y:e.x}})};o._getTrendlineRange=function(e,t){var i=e.raw,a=t?"y":"x",r=t?this._realSize.height:this._realSize.width,o=i[0][a],n=i[0][a];i.forEach(function(e){var t=e[a];o=o<t?o:t;n=n>t?n:t});return{start:o,end:n,step:(n-o)/r}};o._trendlineValueDomain=function(e,t){var i={valueAxis:[],valueAxis2:[]};this._getTrendLines(e);if(!this._trendlines){return[]}i=this._trendlines.reduce(function(e,i){if(!i){return e}var r=i.series,o=a.Utils.seriesAxisHasTime(r),n="valueAxis",l,s,u=i.raw;if(t){u=i.raw.filter(function(e){return e.x>=t[0]&&e.x<=t[1]})}if(!o){var c=u.map(function(e){return e.x});l=[Math.min.apply(null,c),Math.max.apply(null,c)];s=e[n].concat(l);e[n]=[Math.min.apply(null,s),Math.max.apply(null,s)];n="valueAxis2";l=a.domainPerTrendline(i.fx,u);s=e[n].concat(l);e[n]=[Math.min.apply(null,s),Math.max.apply(null,s)]}else{l=a.domainPerTrendline(i.fx,u);s=e[n].concat(l);e[n]=[Math.min.apply(null,s),Math.max.apply(null,s)]}return e},i);if(i.valueAxis.length===0){delete i.valueAxis}if(i.valueAxis2.length===0){delete i.valueAxis2}return i};o._val2PosFns=function(e,t,i){var a=this._xHandlers[0],r=this._yHandlers[0],o=this._realSize.width,n=this._realSize.height,l=function(e){var t=a._scale.scale(e);return t*o},s=function(e){var t=r._scale.scale(e);return(1-t)*n};return i?{x:s,y:l}:{x:l,y:s}};o._expandTrendlineXRange=function(e){a.expandTimeAxisDomain(e,this._trendlines)};return r});define("sap/viz/chart/components/plots/ScatterPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/datalabels/ScatterDataLabels","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/model/DataPointInfo","sap/viz/chart/components/plots/model/Series","sap/viz/chart/components/renderers/GridlineRenderer","sap/viz/chart/components/renderers/ScatterRenderer","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/plots/ProjectionHelper","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/decorator/HitTestDecorator","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/plots/PlotGeometryKeeper","sap/viz/chart/util/PropertyUtils","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/ScatterDataPointNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/components/trendline/mixin/scatterPlot"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D,w){var C=10,T=4,z=32,L="#ffffff",P="circle",k=1,E=4e6;var I=Math.min,O=Math.max;var R=i.CSS.CLASS;var N=function(e,t){this._renderType=t.renderType;N.superclass.constructor.apply(this,arguments);this._dataPointRenderer=c;this._markerSize=null;this._shapePalette=null;this._dpStrokeVisible=null;this._dpStrokeColor=null;this._dpOpacity=null;this._drawingEffect=null;this._markerSizeDirty=true;this._dpStrokeColorDirty=true;this._bigDataThreshold=1e4;this._syncHighlightThreshold=4e3;this._dataPointContext=[]};e.extend(N,o);var M=N.prototype;M.setLastSeries=function(e,t){var i=this._series;var a=i.length;if(!a){return}var r=a;while(r--){var o=i[r];if(d.deepEqual(e,o.getContext())){if(r!==a-1){var n=i[a-1];i[a-1]=o;i[r]=n;if(t){this.refresh()}}break}}};M.refresh=function(){var e=this._series;for(var t=e.length;t--;){var i=e[t].getDataPoints();for(var a=i.length;a--;){var r=i[a];if(r){r.setNode(null)}}}var o=this._selection.node().querySelector("."+R.DATAPOINT_GROUP);var n=o.getAttribute("fill-opacity");var l=o.parentNode;l.removeChild(o);o=h.create("g");o.setAttribute("class",R.DATAPOINT_GROUP);this._showDatapoints(o);this._postRender(o);if(n){o.setAttribute("fill-opacity",n);o.setAttribute("stroke-opacity",n)}l.appendChild(o);var s=this._selection.node().querySelector("."+R.DATALABEL_GROUP);if(s){l=s.parentNode;l.removeChild(s)}this._drawDataLabels(d3.select(l),o)};M.destroy=function(){N.superclass.destroy.call(this);this._dataPointRenderer=null;this._markerSize=null;this._shapePalette=null;this._dpStrokeVisible=null;this._dpStrokeColor=null;this._dpOpacity=null;this._drawingEffect=null;this._markerSizeDirty=true;this._dpStrokeColorDirty=true;this._timeField=null};M._getDataLabels=function(e,t){return new r(t,{name:e})};M._getXHandlers=function(){var e=this._getBottomAxisName();var t={isHorizontal:true,alignment:"right"};var i=this._hasTimeAxis()?n.getTimeScaleHandler(e,t):n.getValueScaleHandler(e,t);return[i]};M.isDisableSyncHightlight=function(){return this._hasTimeAxis()&&this.getDataPointCount()>this._syncHighlightThreshold};M._getYHandlers=function(){var e=this._getLeftAxisName();return[n.getValueScaleHandler(e,{isHorizontal:false})]};M._getAxisPosition=function(e,t,i,a){var r=e[0];var o=r.id;var n={index:i,seriesIndex:t,dataHandler:this._dataHandler[o]};return r.scale(a[o],n)};M.getDataPointCount=function(){var e=0;var t=this._getSeries();for(var i=0;i<t.length;i++){var a=t[i];e+=a?a.length:0}return e};M._drawDatapoints=function(e){var t=this._getSeries();for(var i in this._dataHandler){if(this._dataHandler[i].reset){this._dataHandler[i].reset()}}var a=this._properties;this._markerSize=a.get("markerSize");this._markerSizeDirty=true;this._shapePalette=a.get("shapePalette");this._dpStrokeVisible=a.get("dataPoint.stroke.visible");this._dpStrokeColor=a.get("dataPoint.stroke.color");this._dpStrokeColorDirty=true;this._dpOpacity=a.get("dataPoint.opacity");this._drawingEffect=a.get("drawingEffect");var r=0;var o;var n;var l;var u;var c;var p;var d;var f;var v;var g=t.length;var m;var _=this.getDataPointCount();this._isBigData=_>this._bigDataThreshold&&this._realSize.width*this._realSize.height<E;var A=this._dataPointContext;for(o=0;o<g;o++){l=t[o];if(!l){continue}u=null;m=l.length;for(n=0;n<m;n++){c=l[n];if(!c){continue}d=this._getPosition(o,n,c);if(!d){continue}u=u||new s;f=this._buildWrapperConfig(c,d);v=this._buildData(f);p=this._createDataPoint(o,n,f,v,d,r,c);u.setDataPoint(n,p);A[c.dp.id]=f;r++}if(u){u.setContext(y.buildSeriesContext(this._data,o,["color","shape"]))}this._series[o]=u}if(this._series.every(function(e){return e==null})){this._series=[]}var b=h.create("g");b.setAttribute("class",R.DATAPOINT_GROUP);this._showDatapoints(b);this._postRender(b);e.node().appendChild(b);this._drawDataLabels(e,b)};M._buildWrapperConfig=function(e,t,i){var a;if(this.isBigDataMode()&&i==null){var r=this._getShape(e);var o=this._getMarkerSize();a={rawData:e,graphic:{width:o,height:o,borderWidth:k,shape:r},data:{translate:[t.x,t.y]}}}else{var n=i||e.dp.context();a=N.superclass._buildWrapperConfig.call(this,e,t,n)}if(this._data.timeAxis){a.timeField=this._getTimeField()}if(this._isBigData){a.isBigData=true}return a};M._preShowDatapoints=function(){var e=this._realSize;var t=this._series;var i=this._properties;var a=f.createPixelBoard(e.width,e.height,{layerLimit:1,visibleThreshold:6});for(var r=t.length;r--;){var o=t[r].getDataPoints();for(var n=o.length;n--;){var l=o[n];if(l){var s=l.getPosition();var u=Math.round(s.x);var c=Math.round(s.y);var h=l.getConfig().graphic;var p=h.borderWidth/2;var d=Math.round(h.width/2+p);var v=Math.round(h.height/2+p);var g=f.isAreaVisible(a,h,u,c,d,v);l.setVisible(g)}}}};M._showDatapoints=function(e){if(this.isBigDataMode()){this._preShowDatapoints()}this._renderDataPoints(e)};M._renderDataPoints=function(e){var t=this._series;var i=t.length;var a=this._dataPointContext;for(var r=0;r<i;r++){var o=this._getDataPointRenderer(r);if(!o){continue}var n=t[r];if(!n){continue}var l=n.getDataPoints();var s=l.length;for(var u=0;u<s;u++){var c=l[u];if(!c){continue}var h=c.getConfig().rawData;if(h){var p=c.getPosition();var d=this._buildWrapperConfig(h,p,h.dp.context());var f=this._buildData(d);c.setConfig(d);c.setData(f);a[h.dp.id]=d}if(!c.isVisible()){continue}var v=this._drawDataPoint(o,c);c.setNode(v);if(v){e.appendChild(v)}}}};M.isBigDataMode=function(){return this._isBigData};M.update=function(e){this._applyChanges();this._dataLabels.setSize(this._realSize);var t=this._selection.select(".v-plot-main");this._drawGridlines(this._selection);this._updateDatapoints(t)};M._redrawReferenceLine=function(e){};M.scroll=function(e){this._setOffset(e);if(!this._selection){return}if(!this._isInTrellis){var t=this._selection.select("g.v-plot-main");var i="translate("+this._offset.x+", "+this._offset.y+")";t.node().setAttribute("transform",i)}this._redrawReferenceLine(e);this._repositionReferenceLine();this.renderTrendlines(this._selection);if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};M._updateDatapoints=function(e){for(var t in this._dataHandler){if(this._dataHandler[t].reset){this._dataHandler[t].reset()}}var i=this._series;for(var a=i.length;a--;){var r=i[a];if(!r){continue}var o=this._getDataPointRenderer(a);if(!o){continue}var n=i[a].getDataPoints();for(var l=n.length;l--;){var s=n[l];if(!s){continue}var u=s.getRawData();if(!u){continue}var c=this._getPosition(a,l,u);if(!c){continue}s.setPosition(c);var h=s.getConfig();h.data.translate=[c.x,c.y];if(!s.isVisible()){continue}var p=s.getNode();if(!p){continue}this._updateDatapoint(p,o,h,c)}}var d=e.selectAll("."+R.DATAPOINT)[0];this._dataLabels.updatePosition(e,d)};M._updateDatapoint=function(e,t,i,r){if(t.update&&a.isFunction(t.update)){t.update(e,i)}if(r.hasOwnProperty("x")&&r.hasOwnProperty("y")){e.setAttribute("transform","translate("+r.x+", "+r.y+")")}};M._createDataPoint=function(e,t,a,r,o,n,s,u){var c=new l(e,t,null,-1);c.init(a,n,r,s&&s.dp&&s.dp.id?s.dp.id:i.NULL_VALUE,u);c.setPosition(o);c.setRawData(s);return c};M._drawGridlines=function(e){var a=this._realSize;var r=i.DIRECTION.HORIZONTAL;var o=this._properties.proxy("gridline");var n=[a.height,0];var l=this._getLeftAxisName();var s=this._data[l];var c=new t(s.scale.getDomain(),n);c.setTickHint(s.tickHint);u.drawValueGridline(e,a.width,a.height,c,o,r,this.runtime().effectManager())};M._getDataHandler=function(){return this._hasTimeAxis()?{valueAxis:g.getHandler()}:{valueAxis:g.getHandler(),valueAxis2:g.getHandler()}};M.getDataPointPosition=function(e,t){var i=this._data.series[e][t];var a=this._getPosition(e,t,i);a.height=0;return a};M._getMarkerSize=function(){if(!this._markerSizeDirty){return this._markerSize}var e=this._markerSize;if(!(a.isExist(e)&&T<=e&&e<=z)){e=C}this._markerSizeDirty=false;this._markerSize=e;return e};M._getBorderColor=function(){if(!this._dpStrokeColorDirty){return this._dpStrokeColor}var e;if(this._dpStrokeVisible===true){e=this._dpStrokeColor}else{e=L}this._dpStrokeColorDirty=false;this._dpStrokeColor=e;return e};M._getColor=function(e){var t=null;if(this._data.color){var i=e.color;if(i&&i.length){var a=b.getBubbleDepth(this._properties,"colorDepth",i);i=i.slice(0,a)}t=this._data.color.scale.scale(i)}return t};M._getShape=function(e){var t;if(e.hasOwnProperty("shape")){var i=e.shape;if(i&&i.length){var a=b.getBubbleDepth(this._properties,"shapeDepth",i);i=i.slice(0,a)}t=this._data.shape.scale.scale(i)}else{var r=this._shapePalette||[];t=r.length?r[0]:P}return t};M._buildConfig=function(e,t,i){var a=this._properties;var r=this._getColor(e);var o=this._getShape(e);var n=this._getMarkerSize();var l=this._getBorderColor();var s={graphic:{drawingEffect:this._drawingEffect,fill:r,shape:o,width:n,height:n,borderColor:l,borderWidth:k,opacity:this._dpOpacity},data:{color:r,shape:o,translate:[t.x,t.y]},ctx:i,effectManager:this._effectManager};return s};M._buildData=function(e){var t=e.graphic;var i={color:t.fill,shape:t.shape,borderColor:t.borderColor};if(this._data.timeAxis){i.timeField=e.timeField=this._getTimeField()}return i};(new m).decorate(N);M._hasTimeAxis=function(){return/timeseries/.test(this._renderType)};M._getBottomAxisName=function(){return this._hasTimeAxis()?"timeAxis":"valueAxis"};M._getLeftAxisName=function(){return this._hasTimeAxis()?"valueAxis":"valueAxis2"};M._getTimeField=function(){if(!this._timeField&&this._data&&this._data.timeAxis){this._timeField=this._data.timeAxis.metaData.map(function(e){return e.id})}return this._timeField};M._recordPlotWindow=function(){var e=this._properties.get("window"),t=this.getVisibleRange();if(t.x||t.y){this.runtime().statusManager().set("plotArea.window",e)}};M.getVisibleRange=function(){var e={};var t=!this._properties.origin.get("interaction.noninteractiveMode");if(t){var a=this._properties.get("window.start")||{},r=this._properties.get("window.end")||{},o,n,l;var s=function(e){if(this._hasTimeAxis()){n=this._data.timeAxis.scale.getDomain();l=this._data.valueAxis.scale.getDomain()}else{n=this._data.valueAxis.scale.getDomain();l=this._data.valueAxis2.scale.getDomain()}var t=e;if(e===i.PLOTAREA.FIRST_DATAPOINT){if(this._hasTimeAxis()){t={timeAxis:n[0],valueAxis:l[0]}}else{t={valueAxis:n[0],valueAxis2:l[0]}}}else if(e===i.PLOTAREA.LAST_DATAPOINT){if(this._hasTimeAxis()){t={timeAxis:n[1],valueAxis:l[1]}}else{t={valueAxis:n[1],valueAxis2:l[1]}}}return t};var u=p.startEndConvertor(a,r,this._properties.origin);a=s.call(this,u.start);r=s.call(this,u.end);if(this._hasTimeAxis()){if(a.hasOwnProperty("timeAxis")||r.hasOwnProperty("timeAxis")){o=this._data.timeAxis.scale.getDomain();e.x=_.visibleRangeTransform(o,new Date(a.timeAxis).getTime(),new Date(r.timeAxis).getTime())}if(a.hasOwnProperty("valueAxis")||r.hasOwnProperty("valueAxis")){o=this._data.valueAxis.scale.getDomain();e.y=_.visibleRangeTransform(o,a.valueAxis,r.valueAxis)}}else{if(a.hasOwnProperty("valueAxis")||r.hasOwnProperty("valueAxis")){o=this._data.valueAxis.scale.getDomain();e.x=_.visibleRangeTransform(o,a.valueAxis,r.valueAxis)}if(a.hasOwnProperty("valueAxis2")||r.hasOwnProperty("valueAxis2")){o=this._data.valueAxis2.scale.getDomain();e.y=_.visibleRangeTransform(o,a.valueAxis2,r.valueAxis2)}}}return e};M.isHorizontal=function(){return this._options.isHorizontal===true};x.register(D.DATAPOINT_NAVIGATOR,D.TIMESCATTER,S);x.register(D.DATAPOINT_NAVIGATOR,D.SCATTER,S);(new w).inject(N.prototype);return N});define("sap/viz/chart/components/datalabels/BubbleDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/ScatterDataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/lang/LangManager","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/DataUtils"],function(e,t,i,a,r,o,n,l,s){var u="bubbleWidth";var c="color";var h="regionColor";var p="shape";var d="regionShape";var f=function(e,t){f.superclass.constructor.apply(this,arguments);this._labelPosition="inside";this._needDateFormat=false};e.extend(f,t);var v=f.prototype;v.destroy=function(){f.superclass.destroy.call(this);this._labelPosition=null;this._timeBindingId=null;this._datalabel_type=null;this._needDateFormat=false};v.getBound=function(){var e;if(this._isTrellis){e={left:0-this._trellisPadding.left,width:this._trellisCellSize.width,top:0-this._trellisPadding.top,height:this._trellisCellSize.height}}else{e=f.superclass.getBound.call(this)}return e};v.setTimeBindingId=function(e){this._timeBindingId=e};v._isPrimary=function(e){return this._hasTimeAxis()?e==="timeAxis":e==="valueAxis"};v._isSecondary=function(e){return this._hasTimeAxis()?e==="valueAxis":e==="valueAxis2"};v._getDataLabelInfo=function(e){var t=i.getContextByDataModel(e,this._data);this._datalabel_type=this._properties.get("type");if(this._datalabel_type===h){this._datalabel_type=c}else if(this._datalabel_type===d){this._datalabel_type=p}var a,r;if(this._data.hasOwnProperty(this._datalabel_type)&&this._data[this._datalabel_type].metaData){a=this._data[this._datalabel_type].metaData[0].id;r=t[a];if(r===null){r=undefined}return{key:a,value:r}}else{if(this._data.hasOwnProperty(u)&&this._data[u].metaData){a=this._data[u].metaData[0].id;r=t[a];return{key:a,value:r===null?undefined:r}}return{key:null,value:undefined}}};v._buildDataLabelText=function(e,t,i,a){return r.buildDataLabelText(this._properties,e,t,i,a,g.bind(this),y.bind(this),m.bind(this))};function g(e){var t=e.get("type");var i;if(t==="color"||t==="shape"){i=[t]}else if(this._isPrimary(t)&&(this._hasTimeAxis()||this._timeBindingId)){i=["date"];this._needDateFormat=true}else{i=["value"]}return i}function m(e,t){var i="";var r,o,l;if(this._data.hasOwnProperty(this._datalabel_type)&&this._data[this._datalabel_type].metaData){r=this._data[this._datalabel_type].metaData;l=r?r.length:0}for(var u=0;u<l;u++){o=e[r[u].id+s.DIMENSION_DISPLAYNAME_SUFFIX]||e[r[u].id];i+=n.isString(o)||!n.isNaN(o)?o:a.get("IDS_ISNOVALUE");if(u<l-1){i+="-"}}return i}function y(e,t,i){var r=e.get("type");var o;if(r==="color"||r==="shape"){o=t[0]}else if((r==="valueAxis"||r==="valueAxis2"||r==="bubbleWidth")&&this._needDateFormat){o=t[0]}else{o=n.isNaN(i.value)?a.get("IDS_ISNOVALUE"):t[0]}return o}v._processDataLabelRendererConfig=function(e,t){var i=this._fixBBoxWhenInvisible(t),a=this._properties.get("style"),r;var l=this._properties.get("respectShapeWidth");if(l){if(this._isPrimary(this._datalabel_type)&&!this._timeBindingId||this._isSecondary(this._datalabel_type)||this._datalabel_type===u){var s=a.fontSize;if(!n.isNaN(s)){s+="px"}var c=o.fastMeasure(e.text,s,a.fontWeight,a.fontFamily);if(c.width>i.width){e.text=""}return}var h={};var p=this.runtime().envManager();h.reverseDots=p&&p.reverseDots();r=o.ellipsis(e.text,undefined,i.width,e.styles.cssString,h);if(r!==e.text&&r.indexOf("...")>=0&&r.length<6){r=""}e.text=r}};var _=3;v.hideConditional=function(e){var t=e.length;for(var i=0;i<t;++i){var a=e[i];var r=a.center;for(var o=i+1;o<t;++o){var n=e[o].center;var s=l.getData(e[o].dataPoint).width/2+_;if((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)<=s*s){a.skip=true;break}}}f.superclass.hideConditional.call(this,e)};v.sortDataLabelInfos=function(e){};return f});define("sap/viz/chart/scales/SizeScaleUtil",["sap/viz/framework/common/util/NumberUtils"],function(e){var t=4;var i=10;var a={build:function(e,a,r){var o;if(e){if(e<0){e=i}o=e<=a?e:i}var n=r[0],l=r[1];var s=r.withNoValue?r.withNoValue:false;return function(e){if(isNaN(e)||isNaN(l)&&isNaN(n)){return o?o:t}if(n===l){if(s){return a}else{return i}}var r;if(o){if(l>n&&e>=n&&e<=l){r=Math.pow((Math.abs(e)-n)/(l-n),.5)*(a-o)+o}else{r=o}}else{r=Math.pow(Math.abs(e)/l,.5)*a}return r>t?r:t}}};return a});define("sap/viz/chart/components/plots/BubblePlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/plots/ScatterPlot","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/components/plots/model/DataPointInfo","sap/viz/chart/components/plots/model/Series","sap/viz/chart/components/renderers/ScatterRenderer","sap/viz/chart/components/datalabels/BubbleDataLabels","sap/viz/chart/scales/SizeScaleUtil","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/plots/ProjectionHelper","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/BoundingBoxUtils"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v){function g(e,t){g.superclass.constructor.apply(this,arguments);this._seletedSeries=[];this._semanticMgr.setUseSemanticPattern(true);if(this._renderType&&this._renderType.indexOf("time")>-1){this._bigDataThreshold=Infinity}}e.extend(g,a);var m=4;var y=1;var _=g.prototype;_.setSizeScale=function(e){this._widthScale=e};_.getWidthScale=function(){return this._widthScale};_._getOrderMap=function(){return this._data.orderMap};_.setLastSeries=function(e,t){var i=this._series;var a=i.length;if(!a){return}var r=a;while(r--){var o=i[r];if(f.deepEqual(e,o.getContext())){var n=this._seletedSeries.indexOf(r);if(n!==-1){this._seletedSeries.splice(n,1)}this._seletedSeries.push(r);if(t&&a>1){this.refresh()}break}}};_.destroy=function(){g.superclass.destroy.call(this);this._widthScale=null;this._seletedSeries=[]};var A=function(e,t){return t-e};_._getSortedSeries=function(){var e=this._getOrderMap();var t=this._series;var i;i=Object.getOwnPropertyNames(e);i.sort(A);return i};_._buildConfig=function(e,t,i){var a=g.superclass._buildConfig.apply(this,arguments);var r=m;if(e.hasOwnProperty("bubbleWidth")){r=Math.max(m,this._widthScale(e.bubbleWidth))}a.graphic.width=r;a.graphic.height=r;a.graphic.opacity=this._dpOpacity;return a};_._getFillColorConfig=function(e,t,i,a){var r=a.bubbleWidth<0;this._semanticMgr.setUseSemanticPattern(!r);g.superclass._getFillColorConfig.apply(this,arguments);if(r){e.graphic.fillOpacity=0;e.graphic.opacity=1;e.graphic.borderColor=e.graphic.fill}e.data.negativeValue=r;this._semanticMgr.setUseSemanticPattern(true);return e};_._buildWrapperConfig=function(e,t,i){var a;if(this._isBigData&&i==null){var r=this._getShape(e);var o=m;var n=false;if(e.hasOwnProperty("bubbleWidth")){o=Math.max(m,this._widthScale(e.bubbleWidth));n=e.bubbleWidth<0}a={graphic:{width:o,height:o,borderWidth:y,shape:r},data:{negativeValue:n,translate:[t.x,t.y]}}}else{a=g.superclass._buildWrapperConfig.apply(this,arguments)}return a};_._showDatapoints=function(e){if(this._isBigData){this._renderBigVolumeDataPoints(e)}else{this._renderDataPoints(e)}};_._renderBigVolumeDataPoints=function(e){var t=this._realSize;var i=this._properties;var a=this._series;var r=this._dataPointContext;var o,n,l;var s=d.createPixelBoard(t.width,t.height,{layerLimit:1,visibleThreshold:6});var u=this._getSortedSeries();var c=this._getOrderMap();var h,p=u.length;var f=this._properties.get("showNegativeValues");var v,g,m;var y,_,A,b;for(o=p;o>=0;o--){if(o===p){m=this._seletedSeries}else{m=c[u[o]]}h=m.length;for(n=h-1;n>=0;n--){v=m[n];if(o!==p&&this._seletedSeries.length>0&&this._seletedSeries.indexOf(v)!==-1){continue}g=a[v];if(!g){continue}A=this._getDataPointRenderer(v);if(!A){continue}y=g.getDataPoints();_=y.length;for(l=0;l<_;l++){b=y[l];if(b){var x=b.getRawData();if(!x){continue}var S=b.getConfig();if(!f&&S.data.negativeValue||S.data.isNoValue){b.setVisible(false)}else{var D=b.getPosition();var w=Math.round(D.x);var C=Math.round(D.y);var T=S.graphic;var z=Math.round(T.width/2+T.borderWidth);var L=Math.round(T.height/2+T.borderWidth);T.negativeValue=S.data.negativeValue;var P=d.isAreaVisible(s,T,w,C,z,L);b.setVisible(P);if(P){S=this._buildWrapperConfig(x,D,x.dp.context());b.setConfig(S);var k=this._buildData(S);r[x.dp.id]=S;b.setData(k);var E=this._drawDataPoint(A,b);b.setNode(E);if(E){e.insertBefore(E,e.firstChild)}}}}}}}};_._getDataLabels=function(e,t){return new c(t,{name:e})};_.getDataPointPosition=function(e,t){var i=g.superclass.getDataPointPosition.apply(this,arguments);var a=this._data.series[e][t];if(this._widthScale){i.r=this._widthScale(a.bubbleWidth)}return i};_._drawDataPoint=function(e,t){var i=this._properties.get("showNegativeValues");var a=t.getConfig();if(false===i&&a.data.negativeValue){return null}if(true===a.data.isNoValue){return null}return g.superclass._drawDataPoint.apply(this,arguments)};_._buildData=function(e){var t=g.superclass._buildData.apply(this,arguments);var i=e.graphic;t.width=i.width;t.height=i.width;t.fillOpacity=i.fillOpacity;if(i.pattern){t.pattern=i.pattern}return t};_._postRender=function(e){g.superclass._postRender.apply(this,arguments);if(this._isBigData){return}var t=e.querySelectorAll("."+n.CSS.CLASS.DATAPOINT);var i=t.length;var a=[];var r=0;for(r=0;r<i;++r){a.push({index:r,dp:t.item(r)})}a.sort(function(e,t){var i=p.getData(t.dp).width-p.getData(e.dp).width;if(i===0){i=e.index-t.index}return i});for(r=0;r<a.length;++r){e.appendChild(a[r].dp)}};_._updateDatapoint=function(e,t,i,a){var r=this._properties.get("showNegativeValues");if(false===r&&i.data.negativeValue){return}if(true===i.data.isNoValue){return}return g.superclass._updateDatapoint.call(this,e,t,i,a)};_.hitTest=function(e){var t=this._dataPointContext,i=e.x,a=e.y;var r;var o=this.getSize();var n=this._offset;var l=-n.x;var s=-n.y;var u=this._selection.select(".v-plot-bound").node();var c=u.getBoundingClientRect().width/u.getBBox().width;var h=this._properties.get("showNegativeValues");if(e.hasOwnProperty("width")&&e.hasOwnProperty("height")){var p=e.width,d=e.height;var f=o.width;if(c!=1){f*=c}r=t.filter(function(e){if(!h&&e.data.negativeValue){return false}var t=e.data.translate.slice();if(c!=1){t[0]*=c;t[1]*=c}var r={left:t[0]-e.graphic.width/2-e.graphic.borderWidth,top:t[1]-e.graphic.height/2-e.graphic.borderWidth,width:e.graphic.width+2*e.graphic.borderWidth,height:e.graphic.height+2*e.graphic.borderWidth};var o={left:i+l,top:a+s,width:p,height:d};return v.intersects(r,o)})}else{r=t.filter(function(e){if(!h&&e.data.negativeValue){return false}var t=e.data.translate.slice();if(c!=1){t[0]*=c;t[1]*=c}var r={left:t[0]-e.graphic.width/2-e.graphic.borderWidth,top:t[1]-e.graphic.height/2-e.graphic.borderWidth,width:e.graphic.width+2*e.graphic.borderWidth,height:e.graphic.height+2*e.graphic.borderWidth};var o={x:i+l,y:a+s};return v.contains(r,o)})}return r};return g});define("sap/viz/chart/components/renderers/TimeReferenceLineRenderer",["sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/renderers/ReferenceLineRenderer","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Math","sap/viz/chart/components/axis/sub/TimeAxisBodyHelper","sap/viz/framework/common/util/TypeUtils"],function(e,t,i,a,r,o,n,l){var s=e.extend({},t);var u=i.REF_LINE_DASH_TYPE_ARRAY;var c="timeAxis";var h=function(e,t){var i=e;var r=[];var o;var n;var l;var s=-t.xOffset;var u=0;for(n=0;n<i.length;n++){for(l=0;l<2;l++){if(l<1){u=i[n].y}else{s=i[n].loc}o=[s,u];r.push(o)}}return a.outputPath(r)};var p=function(e,t){var i=[];var a;var r=-Number.MAX_VALUE;var o=parseFloat(t);for(a=0;a<e.length;a++){if(e[a]&&l.isExist(e[a].date)&&l.isExist(e[a].value)){var n=new Date(e[a].date).getTime();if(!isNaN(n)&&!isNaN(parseFloat(e[a].value))&&n>r){i.push({value:o,timeStamp:n});o=parseFloat(e[a].value);r=n}}}i.push({value:o,timeStamp:Number.MAX_VALUE});return i};s._combineConfig=function(e,i,a){var r=i.defaultStyle;var o=i.width;var s=i.height;var u=i.isPercentage;var h=i.xHandlers;var d=i.props;var f=t._combineConfig(e,i);if(e.changePoints&&l.isArray(e.changePoints)&&e.changePoints.length>0){var v=p(e.changePoints,e.value);if(v){f.variety=[];var g;var m;var y=this._searchAxisHandler(h,c).getDomain();var _=n.getScale(y,f.realWidth);var A=this._calculatePosition(u,a,e.value);var b=(1-A)*f.realHeight;var x;for(m=0;m<v.length;m++){g={};A=this._calculatePosition(u,a,v[m].value);g.y=(1-A)*f.realHeight-b;g.loc=_(v[m].timeStamp);if(g.loc<0){g.loc=0}else if(g.loc>f.realWidth){g.loc=f.realWidth}if(f.variety.length===0||g.loc>x){f.variety.push(g);x=g.loc}}}}return f};s._isInvisiblePosition=function(e,i){return t._isInvisiblePosition(e)&&!(i.changePoints&&l.isArray(i.changePoints)&&i.changePoints.length>0)};s._drawReferenceLine=function(e,r,o,n,s,c,p){if(e.variety&&l.isArray(e.variety)&&e.variety.length>0){var f=a.create("g",o);f.setAttribute("class","v-referenceline v-referenceline-"+r);f.setAttribute("transform","translate("+e.xOffset+","+0+")");var v=a.create("path",f);v.setAttribute("stroke",e.strokeColor);v.setAttribute("stroke-width",e.strokeWidth);v.setAttribute("shape-rendering","crispEdges");var g=d(e,c);var m=h(g,e);v.setAttribute("d",m);v.setAttribute("fill","none");if(i.GRIDLINE_TYPE.DASHED===e.lineType||i.GRIDLINE_TYPE.DOTTED===e.lineType){var y=v.cloneNode(true);y.setAttribute("stroke","transparent");f.appendChild(y);v.setAttribute("stroke-dasharray",u)}else if(i.GRIDLINE_TYPE.INCISED===e.lineType){v.setAttribute("stroke","#ffffff")}}else{t._drawReferenceLine(e,r,o,n,s,c,p)}};var d=function(e,t){var i=[];var a=-e.xOffset;var r=a+t;var o;for(o=0;o<e.variety.length;o++){if(e.variety[o].loc>a){i.push(e.variety[o])}if(e.variety[o].loc>=r){e.variety[o].loc=r;break}}return i};var f=function(e,t,i,a){var r=t.label.textSize;var o=d(t,i.width);var n=0;if(e){n=o.length-1}var l=o[n].y;var s=(1-i.pos)*a+l-r.height/2;var u=s;if(t.realHeight){u=(1-i.pos)*t.realHeight+l-r.height/2}if(u<=0){s+=r.height/2}else if(u>=t.realHeight-r.height){s-=r.height/2}return s};s._drawLabel=function(e){var i=t._buildLabelObj(e);var a=e.height;var r=e.combinedConfig;if(r.variety&&l.isArray(r.variety)&&r.variety.length>0){var o=false;if(e.axisLayout[e.key]==="right"){o=true}i.rect.y=f(o,r,e,a);i.candidateRect.y=f(!o,r,e,a)}t._layoutAndUpdateLabelDOM(e,i);return i};return s});define("sap/viz/chart/components/plots/TimeSeriesPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/renderers/TimeReferenceLineRenderer"],function(e,t){var i=function(i){var a=function(e,t){a.superclass.constructor.apply(this,arguments)};e.extend(a,i);a.prototype.getReferenceLineRenderer=function(){return t};a.prototype.zoom=function(e){this.update(e)};a.prototype._redrawReferenceLine=function(e){this._drawReferenceLine(e)};a.prototype.update=function(e){if(this._selection){a.superclass.update.apply(this,arguments);this._drawReferenceLine(e);this._repositionReferenceLine()}};return a};return i});define("sap/viz/chart/components/plots/YYPlotFactory",["jquery","sap/viz/chart/components/plots/BubblePlot","sap/viz/chart/components/plots/ScatterPlot","sap/viz/chart/components/plots/TimeSeriesPlot"],function(e,t,i,a){var r={bubble:{plotClazz:t},scatter:{plotClazz:i},time_bubble:{plotClazz:t},timeseries_scatter:{plotClazz:a(i),options:{}},timeseries_bubble:{plotClazz:a(t),options:{}}};return{getPlotClazz:function(e){var t=r[e];return t&&t.plotClazz}}});define("sap/viz/chart/components/axis/sub/TimeValueAxisBody",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/ValueAxisBody","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ValueScaleUtil","sap/viz/framework/common/lang/LangManager","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/axis/renderer/ValueBodyRenderer","sap/viz/framework/common/format/FormatManager"],function(e,t,i,a,r,o,n,l){var s=function(){s.superclass.constructor.apply(this,arguments)};e.extend(s,t);s.prototype._getTicksToRender=function(){var e=this._data,t=e.getDomain();return this._getAllLabels(null,e,true).filter(function(e){return e.value>=t[0]&&e.value<=t[1]}).map(function(e){return e.value})};s.prototype.drawTicks=function(e,t,i,a,r,o,l){return n.drawTicks(e,t,i,a,r,o,l,true)};s.prototype._getFixedTicksLabels=function(e,t){e.forEach(function(e){e.text=i.isNonEmptyString(e.text)?e.text:r.get("IDS_ISNOVALUE")});return e.filter(function(e){return e.value>=t[0]&&e.value<=t[1]})};s.prototype._getAllLabels=function(e,t,i){var a=this._properties.get("axisTick.fixedTicks"),r=t.getDomain(),o=[];if(a&&a.length>0){o=this._getFixedTicksLabels(a,r)}else{var n=t.timeUnit,s=t.timeUnitGap,u=t.tickNum,c=new Date(r[0]);var h=function(e){return l.format(new Date(e),n.format)},p=function(e){return l.format(new Date(e),"dd/mm/yyyy hh:mm")};c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);for(var d=0,f;d<u;d++){f=new Date(c.getTime());n.set.apply(f,[n.get.apply(c,[])+d*s]);o.push({text:h(f),value:f.getTime()})}var v=t.getDomainFixed();if(v[0]){o[0].text=p(new Date(o[0].value))}if(v[1]){o.push({value:r[1],text:p(new Date(r[1]))})}}this._setLabelsPosition(o,t);if(!i){return this._filterLabels(o)}return o};s.prototype._filterLabels=function(e){var t=[];if(e.length>1){t=o.calculateLabelsToDrawHelper(e);if(t.length<=1||t.length===2&&o.isOverLapped(t[0],t[1])){t=[]}}else if(e.length===1){t=e}return t};s.prototype.formatTickValue=function(e,t,i,a){var r=e;var o=a.getDomainFixed();if(o[0]){r=l.format(new Date(e),"dd/mm/yyyy hh:mm")}else{r=l.format(new Date(e),a.timeUnit.format)}return r};return s});define("sap/viz/chart/components/axis/TimeValueAxis",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/axis/sub/TimeValueAxisBody","sap/viz/chart/components/scrollbar/Scrollbar"],function(e,t,i,a,r){var o=function(t,o){i.superclass.constructor.apply(this,arguments);this.setChild("axisBody",new a(t,o),{order:1,priority:2,offset:0});this.setChild(e.AXIS.SCROLLBAR_NAME,new r(t,{name:"plotArea.scrollbar"}),{order:2,priority:0,offset:0});this._isPercentageMode=false};t.extend(o,i);o.prototype.setData=function(e){o.superclass.setData.apply(this,arguments);if(e&&e.scale){this._scale.tickNum=e.scale.tickNum;this._scale.timeUnit=e.scale.timeUnit;this._scale.timeUnitGap=e.scale.timeUnitGap}};return o});define("sap/viz/chart/components/zoom/YYZoomer",["sap/viz/chart/components/zoom/XYZoomer","sap/viz/chart/components/zoom/ZoomLimit","sap/viz/framework/common/util/oo"],function(e,t,i){function a(){a.superclass.constructor.apply(this,arguments)}i.extend(a,e);a.prototype.direction=function(){return"xy"};a.prototype._calcZoomLimit=function(e,i){var a=t.Regular(e,i),r=e.plot.getVisibleRange(),o=r.x?r.x.ratio:0,n=r.y?r.y.ratio:0;var l=a[0],s=Math.max(a[1],o,n);return{x:{min:l,max:s},y:{min:l,max:s}}};return a});define("sap/viz/chart/components/zoom/TimeYZoomer",["sap/viz/chart/components/zoom/XYZoomer","sap/viz/chart/components/zoom/ZoomLimit","sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r,o){function n(){n.superclass.constructor.apply(this,arguments)}i.extend(n,e);n.prototype.direction=function(){var e=this._modules.main._renderType;if(!this.enabled()){return""}else{switch(e){case"timeseries_waterfall":case"timeseries_line":case"timeseries_column":case"timeseries_stacked_column":case"timeseries_100_stacked_column":case"timeseries_combination":case"timeseries_bullet":return this._modules.isHorizontal?"y":"x";case"timeseries_bubble":case"timeseries_scatter":return"xy";default:return n.superclass.direction.call(this)}}};n.prototype.zoom=function(e,t,i,a){this._status.set("zooming",true);return n.superclass.zoom.call(this,e,t,i,a)};n.prototype._calcZoomLimit=function(e,i){if(!(e.main.isColumnLike&&e.main.isColumnLike())){var n=e.main,l=e.plot,s=n.getChild("timeAxis").module,u=n._properties.get("plotArea.window"),c=n.getData().timeAxis.scale.getDomain(),h=c[1]-c[0],p,d=Math.min(l.getSize().width*.7,250);if(u){var f=c[0],v=c[1];if(a.isExist(u.start)){if(a.isNumber(u.start)){f=Number(u.start)}else if(a.isNumber(new Date(u.start).getTime())){f=new Date(u.start).getTime()}}if(a.isExist(u.end)){if(a.isNumber(u.end)){v=Number(u.end)}else if(a.isNumber(new Date(u.end).getTime())){v=new Date(u.end).getTime()}}if(v>f){p=h/(v-f)}}var g=s.getChild("axisBody").module.getActiveLevels(),m=g&&g.length>0?g[0]:"day",y=l.getSize().width;var _=r["ONE_"+m.toUpperCase()];if(!_){if(m===o.FISCAL.PERIOD){_=o.FISCAL.ONE_FISCAL_PERIOD}else if(m===o.FISCAL.YEAR){_=o.FISCAL.ONE_FISCAL_YEAR}}var A=d/_*h/y;if(!a.isExist(p)||p<A){p=A}return{x:{min:1,max:p},y:{min:1,max:p}}}else{var b={x:{},y:{}},x=t.Bar(e,i);b.x.min=x[0];b.x.max=x[1];b.y.min=x[0];b.y.max=x[1];return b}};return n});define("sap/viz/chart/components/plotareas/YYPlotArea",["sap/viz/framework/common/util/oo","sap/viz/chart/components/container/XYContainer","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/axis/TimeAxis","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/chart/components/plots/YYPlotFactory","sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/scales/ValueScale","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/axis/TimeValueAxis","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataUtils","sap/viz/chart/scales/TimeScale","sap/viz/chart/components/zoom/YYZoomer","sap/viz/chart/components/zoom/TimeYZoomer","sap/viz/chart/components/util/ZoomUtil","sap/viz/chart/components/plots/PlotGeometryKeeper","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/trendline/Trendline"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S){function D(e){var t,i,a=e._plot;if(a._hasTimeAxis()){t="timeAxis";i="valueAxis"}else{t="valueAxis";i="valueAxis2"}function r(){return y.offsetInValue({h:e._data[t].scale,v:e._data[i].scale},e.getOffset(),a.getRealSize())}function o(r){var o=e._data[t].scale,n=e._data[i].scale,l=a.getRealSize(),s={};if(!isNaN(r.x)){s.x=-o.scale(r.x)*l.width}if(!isNaN(r.y)){s.y=-(1-n.scale(r.y))*l.height}e.scroll(s)}return{get:r,set:o}}function w(e,t){this._rawData=t&&t.rawData&&t.rawData.dataModel&&t.rawData.dataModel._rawData;w.superclass.constructor.apply(this,arguments);this._init();e.statusManager().add("plot.offsetInValue",{serializable:false,get:D(this).get,set:D(this).set})}e.extend(w,t);var C=w.prototype;C._init=function(e){var t=this.runtime();this._plot=n.create(this._renderType,o.getPlotClazz(this._renderType),t);this._plot.getDispatch().on("reRenderComplete.plotarea",this._reRenderComplete.bind(this));this.setChild("plot",this._plot,{position:"center"});this.setLayoutSequence(["left","right","bottom","top"]);var l=!this._properties.get("interaction.noninteractiveMode");if(this._hasTimeAxis()){this._bottomAxis=new a(t,{name:"timeAxis",allowInterval:false,hasScrollbar:l,rawData:this._rawData});this._leftAxis=new i(t,{name:"valueAxis"});this.setChild("timeAxis",this._bottomAxis,{position:"bottom"});this.setChild("valueAxis",this._leftAxis,{position:"left"})}else{if(this.isTimeBased()){this._bottomAxis=new u(t,{name:"valueAxis"});this._plot._dataLabels.setTimeBindingId("valueAxis")}else{this._bottomAxis=new i(t,{name:"valueAxis",hasScrollbar:l})}this._leftAxis=new i(t,{name:"valueAxis2"});this.setChild("valueAxis",this._bottomAxis,{position:"bottom"});this.setChild("valueAxis2",this._leftAxis,{position:"left"})}if(l){this._hScrollbar=this._bottomAxis.getChild(p.AXIS.SCROLLBAR_NAME).module;this._vScrollbar=new r(t,{name:"plotArea.scrollbar"});this.setChild("scrollbar",this._vScrollbar,{position:"right"})}this.getZoomer().init({main:this,plot:this._plot,axisByDirection:{x:[this._bottomAxis],y:[this._leftAxis]}})};C._preRender=function(){w.superclass._preRender.apply(this,arguments);this._setValueAxisRange()};C._reRenderComplete=function(){if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};C.getDisplayedTimeDomain=function(){if(this._bottomAxis.getName()==="timeAxis"){var e=this.getChildrenByPosition("center")[0];var t=e.getRealSize();var i=e.getSize();var a=false;var r=this._plot.getOffset();var o=false;if(this._data.rawData&&this._data.rawData.dataModel&&this._data.rawData.dataModel._rawData){o=A.isFiscal(this._data.rawData.dataModel._rawData)}return c.getTimeAxisDomain(i,r,t,this.getData().timeAxis.scale.getDomain(),a,o)}return null};C._setValueAxisRange=function(){var e=this._plot.getSize();var t=this._plot.getRealSize();var i=this._plot.getVisibleRange();if(!i.x&&!i.y){return}var a={},r={};if(i.x){a.x=i.x.ratio;r.x=i.x.delta*e.width*a.x}if(i.y){a.y=i.y.ratio;r.y=-(e.height*(a.y-1)+i.y.delta*e.height*a.y)}this.zoom(a);this.scroll(r)};C.destroy=function(){var e=this._data;var t=this.runtime().statusManager();if(t.get("valueAxisScaleDomain")){if(e&&e.valueAxis&&!e.valueAxis.scale.isFixed()&&e.valueAxis.scale.getDomainChanged()){e.valueAxis.scale.setDomain(t.get("valueAxisScaleDomain"))}t.remove("valueAxisScaleDomain")}if(t.get("valueAxis2ScaleDomain")){if(e&&e.valueAxis2&&!e.valueAxis2.scale.isFixed()&&e.valueAxis2.scale.getDomainChanged()){e.valueAxis2.scale.setDomain(t.get("valueAxis2ScaleDomain"))}t.remove("valueAxis2ScaleDomain")}w.superclass.destroy.call(this);this._plot=null;this._bottomAxis=null;this._leftAxis=null};C.getPlot=function(){return this._plot};C.isTimeBased=function(){return this._renderType==="time_bubble"};C._hasTimeAxis=function(){return/timeseries/.test(this._renderType)};C.isScatter=function(){return this._renderType==="scatter"};C.setData=function(e){w.superclass.setData.apply(this,arguments);this.updateValueScale();this._plot.setData(this._data)};function T(e,t,i,a){var r=c.updateScatterValueAxis(e,[0,t*.8],p.BUBBLE.DEFAULT_WIDTH_RATIO,a);r.scale.setRange([0,1]);e.scale=r.scale;e.tickHint=r.tickHint;i.setData(e)}function z(e,t,i,a){var r=p.BUBBLE.DEFAULT_WIDTH_RATIO;var o=e.scale;var n=o.getDomain().slice();var l=o.getDomainFixed();var s;if(n[1]===n[0]){s=b.getPeriod(a)/2}else{s=(n[1]-n[0])*r}if(!l[0]){n[0]-=s}if(!l[1]){n[1]+=s}e.scale=new f(n,o.getRange(),o.getDomainFixed(),{dataBound:o.getDataBound()});i.setData(e)}C._adjustScale=function(){var e=this._data;var t=this._hasTimeAxis();var i=e.valueAxis;var a=e.valueAxis2;var r=this.runtime().statusManager();var o=function(e){e.setZeroAdjusted(true);e.setDomainChanged(false)};if(i&&i.scale.isFixed()||a&&a.scale.isFixed()){o(i.scale);if(!t){o(a.scale)}return}var n=this._properties.get("plotArea.adjustScale");if(!_.isExist(n)||!n){o(i.scale);if(!t){o(a.scale)}return}i.scale.setZeroAdjusted(false);if(!t){a.scale.setZeroAdjusted(false)}var l=this._roughSize.width;var s=this._roughSize.height;var u=this._renderType;var h=null;var d=null;var f=r.get("valueAxisScaleDomain");if(!f){return}var v;if(!t){h=i.scale.getDomainFixed();d=a.scale.getDomainFixed();v=r.get("valueAxis2ScaleDomain");if(!v){return}}else{d=i.scale.getDomainFixed()}var g=function(e,t,i,a,r){var o=c.updateScatterValueAxis(e,t,p.BUBBLE.DEFAULT_WIDTH_RATIO,false);var n=e.scale;var l=n.getRange();var s=n.getDomain().slice();n.setRange(t);var u=o.scale.getDomain().slice();n.setDomain(u);var h;var d=i[1]<=0?Math.round(n.scale(u[1])):Math.round(n.scale(u[0]));var f=false;var v=1.2;if(i[0]<0&&i[1]<=0){if(Math.round(n.scale(i[1]))+a>=d){f=true}}else{if(Math.round(n.scale(i[0]))-d<=a*v){f=true}}var g=function(e,t,i){if(t&&i){return e/(t[1]-t[0])*(i[1]-i[0])}return e};if(f){if(i[1]>0){if(i[0]!==0){h=u[0]-g(a*r,t,u)}else{h=g(-a*r,t,i)}if(n.scale(i[1]-i[0])<n.scale(Math.abs(h))){h=-u[1]*1/8}n.setDomain([h,i[1]])}else if(i[0]===0&&i[1]===0){h=-u[1]*1/8;n.setDomain([h,u[1]])}else{h=u[1]+a*r;n.setDomain([i[0],h])}n.setDomainChanged(true)}else{n.setDomain(s)}n.setRange(l)};var m;var y=0;if(u.indexOf("scatter")>-1){var A=10;y=1;if(!t&&!h[0]){m=[0,l];g(i,m,f,A,y)}if(!d[0]){m=[0,s];g(t?i:a,m,t?f:v,A,y)}}else if(u.indexOf("bubble")>-1){var b;b=Math.min(s,l);b*=p.BUBBLE.DEFAULT_WIDTH_RATIO;var x=Math.pow(1,.5)*b/2;y=2;if(!t&&!h[0]){m=[0,l*.8];g(i,m,f,x,y)}if(!d[0]){m=[0,s];g(t?i:a,m,t?f:v,x,y)}}};C.updateValueScale=function(){var e=this._data;var t=this._roughSize.width;var i=this._roughSize.height;var a=this.runtime().statusManager();if(e&&t>0&&i>0){if(!a.get("valueAxisScaleDomain")){a.add("valueAxisScaleDomain",e.valueAxis.scale.getDomain().slice())}if(!this._hasTimeAxis()&&!a.get("valueAxis2ScaleDomain")){a.add("valueAxis2ScaleDomain",e.valueAxis2.scale.getDomain().slice())}this._adjustScale();var r=this._hasTimeAxis();var o=this.runtime().statusManager().get("timeLevels");var n=o?o[0]:"day";if(r){z(e.timeAxis,t,this._bottomAxis,n);T(e.valueAxis,i,this._leftAxis)}else{var l=this.isTimeBased();T(e.valueAxis,t,this._bottomAxis,l);T(e.valueAxis2,i,this._leftAxis)}var s=.8;var u={valueAxis:[0,t*s],valueAxis2:[0,i*s]};var c=S.updateValueScale(this._plot,u,e);if(c){Object.keys(c).forEach(function(a){if(r){T({values:e.valueAxis.values,scale:c[a].scale},i,this._leftAxis)}else if(a==="valueAxis"){var o=this.isTimeBased();T({values:e.valueAxis.values,scale:c[a].scale},t,this._bottomAxis,o)}else{T({values:e.valueAxis2.values,scale:c[a].scale},i,this._leftAxis)}e[a]=x.extend(true,{},e[a],c[a])},this)}if(r&&e&&e.timeAxis&&e.timeAxis.scale){var h=e.timeAxis.scale;var p=h.getDomain();var d=x.extend(true,[],p);this._plot._expandTrendlineXRange(d);if(p&&p[1]<d[1]){e.timeAxis.scale=new f(d,h.getRange(),h.getDomainFixed(),{dataBound:h.getDataBound()});z(e.timeAxis,t,this._bottomAxis,n)}}}};C._configLayout=function(){var e=this._scrollbarExistence();if(this._vScrollbar){this._vScrollbar.isExist(e.v)}if(this._hScrollbar){this._hScrollbar.isExist(e.h)}return w.superclass._configLayout.apply(this,arguments)};C._scrollbarExistence=function(){var e=this.getZoomer().enabled();var t=this.getZoomer().direction()||"",i=e&&t.indexOf("x")!==-1,a=e&&t.indexOf("y")!==-1;var r=this._properties.get("plotArea.window.start")||{},o=this._properties.get("plotArea.window.end")||{},n=this._hasTimeAxis();var l=A.startEndConvertor(r,o,this._properties.origin);r=l.start;o=l.end;if(!i){if(n){i=r.hasOwnProperty("timeAxis")||o.hasOwnProperty("timeAxis")}else{i=!(isNaN(r.valueAxis)&&isNaN(o.valueAxis))}}if(!a){if(n){a=!(isNaN(r.valueAxis)&&isNaN(o.valueAxis))}else{a=!(isNaN(r.valueAxis2)&&isNaN(o.valueAxis2))}}return{h:i,v:a}};C._getZoomer=function(){if(this._hasTimeAxis()){return new g(this)}else{return new v(this)}};return w});define("sap/viz/chart/chains/YYChains",["sap/viz/chart/chains/ChainUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/chains/BaseChains","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/binding/BindingManager","sap/viz/chart/chains/SeriesContext"],function e(t,i,a,r,o,n){var l={};var s=["GetDimensionsFromFlattable","GetContext","OnBindingFinished","OnBindingStart"];l=a.extend("yy",s);var u=function(e,a,r,o,l,s){var u=[],c=[],h=[],p=[],d=[];var f=s&&s.allowEmptyMeasure;var v="context";var g="addition";var m={};a.forEach(function(e){if(o[e]){c.push(o[e]);h.push(e)}});r.forEach(function(e){if(o[e]){p.push(o[e]);d.push(e)}});var y=t.dpInitializer(l);var _=t.getArrayLength(c);var A=t.generateIndexArray(_);var b,x,S,D,w,C,T,z;S=A.length;T=p.length;var L=r.filter(function(e){return e!=="bubbleWidth"});for(x=0;x<S;x++){var P=A[x];if(!i.isExist(P)){continue}b=y();w=P.length;for(D=0;D<w;D++){b[h[D]]=c[D].rowArray[P[D]]}var k;for(C=0;C<T;C++){z=p[C].values;if(!i.isExist(z)){b[d[C]]=undefined;continue}k=0;for(D=0;D<w;D++){if(f||i.isExist(z[P[D]])){z=z[P[D]];k++}}b[d[C]]=z}var E=t.processYYSeriesContext(o.context,P);if(E){b[v]=E}var I=t.processYYSeriesContext(o.additionInfo,P);if(I){b[g]=I}if(k===w||P===0){var O=t.generateNum(_,P);u[O]=u[O]||[];if(i.isArray(b[d[0]])){for(D=0,w=b[d[0]].length;D<w;++D){var R={};var N=false;for(var M in b){if(i.isExist(b[M])){if(r.indexOf(M)>-1){R[M]=b[M][D]}else if(M===v){R[M]=R[M]||[];var B=b[M];for(var V=0;V<B.length;++V){R[M].push(B[V][D])}}else{R[M]=b[M]}if(L.indexOf(M)>-1&&!i.isExist(R[M])){N=true}}}if(f||!N){u[O].push(R);if(R.hasOwnProperty("bubbleWidth")&&i.isNumber(R.bubbleWidth)){m[R.bubbleWidth]=m[R.bubbleWidth]||[];m[R.bubbleWidth].push(O)}}}}else if(f||L.every(function(e,t){return i.isExist(b[e])})){u[O].push(b)}}}o.series=u.filter(function(e){return e});o.seriesContext=n(u,h,c,p);o.orderMap=m};l.yyGetBindingSeries=t.generateSeriesGetter(u);l.yyGetMeasuresFromFlattable=function(e,i,a,o,n,s){l.parsedData=t.getData(e,o,l.parsedData);var u=/bubbleWidth/.test(s);var c=t.handleMeasure(e,i,a,l.parsedData,l.multiDimensionIndex,{enableDuplicated:n});var h=r.transpose(c.measureArray);var p=0,d=h.length;var f=Array(d);for(;p<d;++p){var v=h[p];var g=Infinity,m=-Infinity;for(var y=0,_=v.length;y<_;++y){var A=v[y];if(A==null){if(u){A=0}else{continue}}if(u&&A<0){A=v[y]=-A}g=Math.min(g,A);m=Math.max(m,A)}f[p]=[g,m]}var b=t.buildMetaData(e,i);var x={values:c.multiArray,range:f,metaData:b};return x};Object.keys(l).forEach(function(e){o.registerChain(e,l[e])});return l});define("sap/viz/chart/scales/ShapeScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/DataUtils"],function(e,t,i){var a=function(e,t){a.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.ShapeScale";this._name=null;this._type="shape";this._initScale()};e.extend(a,t);a.prototype._initScale=function(){if(this._scale===undefined){this._scale=d3.scale.ordinal();var e=[];for(var t=0,a=this._domain.length;t<a;t++){e.push(i.valuesToString(this._domain[t]))}var r=[].concat(this._range);this._range=r.splice(0,e.length>0?e.length:1);this._scale.domain(e).range(this._range)}};a.prototype.scale=function(e){if(e){return this._scale(i.valuesToString(e))}else{return this._scale(e)}};return a});define("sap/viz/chart/scales/ShapeScaleProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleRepository","sap/viz/framework/common/util/Constants","sap/viz/chart/scales/ShapeScale","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/util/PropertyUtils","sap/viz/chart/scales/ScaleUtil"],function(e,t,i,a,r,o,n,l){var s=r.transpose;var u=l.generateUniqueDomain;var c=function(t,r,o,l,c,h){c=c||{};var p=c.seriesType,d=c.role;var f=o.get(r);var v=f?f.palette:null;if(!e.isExist(t)){return new a([],v)}if(!e.isExist(o.getDefault(r))){o.add(r,{serializable:true,defaultValue:{feed:r,type:"shape",palette:i.SHAPE}})}var g=[];if(t.values){if(p==="yy"){var m=n.getBubbleDepth(l.origin,"plotArea.shapeDepth",t.values);var y=l.get("legend.ignoreNoValue");g=u(t.values,m,t.metaData,t.rowArray,h,y,"shape")}else{g=s(t.values)}}if(!v){v=i.SHAPE}l.origin.add("plotArea.shapePalette",{defaultValue:i.SHAPE,serializable:false,get:function(){return v}});if(g!=null){return new a(g,v)}};t["shapeScale"]=c});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForScatter",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DOM","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n,l,s){var u=["info/timeseries_scatter","info/timeseries_bubble"];var c=["info/bubble","info/scatter","info/time_bubble"].concat(u);c=r.addTrellisType(c);var h=e.CSS.CLASS;function p(e){var t=1,i;if(f(e)&&/scale/.test(e.getAttribute("transform"))){i=e.querySelector("circle")||e.querySelector("rect")||e.querySelector("ellipse")||e.querySelector("line")||e.querySelector("polyline")||e.querySelector("polygon")||e.querySelector("path");if(i){var a=i.getBoundingClientRect();var r=i.getBBox();t=r.width/a.width}}return t}function d(e){return a.getData(e).fillOpacity===0}function f(e){return n.hasClass(e,"v-datapoint")||n.hasClass(e,"v-datapoint-marker")||n.hasClass(e,"v-lines")}var v=function(e,i,r,o){var n=a.getData(i).color;var l;if(t.isFunction(r)){l=r(n)}else if(t.isString(r)){l=e.parseColorProperty(r,n)}l=l||n;if(o){var s=a.getData(i);l=e.register({drawingEffect:o,fillColor:l,direction:"vertical",graphType:s.shape,radius:s.r,patternEffect:s.pattern})}return l};function g(e,t,r,o,n){var l,s;if(r.stroke.visible===true||d(t)){if(d(t)){l=v(e,t,r.color)}else{l=v(e,t,r.stroke.color)}s=i.getWidth(r.stroke.width,o,n)}else{l=a.getData(t).borderColor;s=1}var u=t.querySelector("path")||t.querySelector("circle");if(u){u.setAttribute("stroke",l);u.setAttribute("stroke-width",s)}var c=t.querySelector("rect.v-highlight-bound");if(c){c.removeAttribute("stroke");c.removeAttribute("stroke-width");c.removeAttribute("stroke-dasharray");c.removeAttribute("shape-rendering")}}function m(e,i,a,r,o){var n=a.opacity;if(!t.isExist(a.opacity)){n=1}i.setAttribute("fill-opacity",n);var l=i.querySelector("path")||i.querySelector("circle");if(l){l.setAttribute("stroke-opacity",n);if(!r){var s=v(e,i,a.color,o);l.setAttribute("fill",s)}}}var y=[{id:"selectDataPoint_scatter",triggerEvent:{name:"selectDataPoint",supportedChartTypes:c},handler:function(e,a){var r=i.turnToArray(e.data.targets);var n=a.getProperties();var l={color:n.get("interaction.selected.color"),opacity:n.get("interaction.selected.opacity"),stroke:n.get("interaction.selected.stroke")};var s=t.isExist(n.get("plotArea.markerRenderer"));var u=n.get("plotArea.drawingEffect");var c=a.getEffectManager();if(a.isBigDataMode()){var h=a.getNodes(a.NodeType.DATA_POINT,false);r=o.findByDataPointIds(h,r)}var d={name:e.name,data:{targets:r}};a.fireEvent(d,true);for(var f=r.length;f--;){var v=r[f];var y=p(v);g(c,v,l,1,y);m(c,v,l,s,u)}}},{id:"deselectDataPoint_scatter",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:c},handler:function(e,a){var r=i.turnToArray(e.data.targets);var n=a.getProperties();var l;if(e.data.isAnyOtherSelected){l={color:n.get("interaction.deselected.color"),opacity:n.get("interaction.deselected.opacity"),stroke:n.get("interaction.deselected.stroke")}}else{l={color:n.get("plotArea.dataPoint.color"),stroke:n.get("plotArea.dataPoint.stroke")}}var s=t.isExist(n.get("plotArea.markerRenderer"));var u=n.get("plotArea.drawingEffect");var c=a.getEffectManager();if(a.isBigDataMode()){var h=a.getNodes(a.NodeType.DATA_POINT,false);r=o.findByDataPointIds(h,r);r=[].slice.call(r)}var d={name:e.name,data:{targets:r}};a.fireEvent(d,true);r.forEach(function(e){var t=p(e);g(c,e,l,1,t);m(c,e,l,s,u)})}},{id:"hoverOnDataPoint_scatter",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o=a.getProperties();var n=o.get("interaction.hover");var l=t.isExist(o.get("plotArea.markerRenderer"));var s=o.get("plotArea.drawingEffect");var u=a.getEffectManager();r.forEach(function(t){var i=p(t);if(!e.data.byKeyboard){g(u,t,n,2,i)}m(u,t,n,l,s)})}},{id:"unhoverOnDataPoint_scatter",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o=a.getProperties();var n;var l=t.isExist(o.get("plotArea.markerRenderer"));var s=o.get("plotArea.drawingEffect");var u=a.getEffectManager();r.forEach(function(e){var t=p(e);if(d3.select(e).classed(h.DATAPOINTSELECTED)){n=o.get("interaction.selected")}else{if(a.shouldUseDeselectedColor()){n=o.get("interaction.deselected")}else{n=o.get("plotArea.dataPoint");delete n.opacity}}g(u,e,n,1,t);m(u,e,n,l,s)})}},{id:"hover_range_selection_scatter",triggerEvent:{name:"hover",supportedChartTypes:u,targets:"v-m-action-layerrange"},handler:function(e,t){l.showDetailForRangeSelectionWhenHover(e,t)}},{id:"clearPlot_scatter",triggerEvent:{name:"clearPlot",supportedChartTypes:c},handler:function(e,i){i.fireEvent(e,true);var a=i.getNodes(i.NodeType.DATA_POINT,false);if(!a||!a.length){return}var r=i.getProperties();var o;var n=e.data.rangeSelection;var l=n&&n!=="clear";if(e.data.isGray||l){o={color:r.get("interaction.deselected.color"),stroke:r.get("interaction.deselected.stroke")};if(!l){o.opacity=r.get("interaction.deselected.opacity")}}else{o={color:r.get("plotArea.dataPoint.color"),stroke:r.get("plotArea.dataPoint.stroke")}}var s=t.isExist(r.get("plotArea.markerRenderer"));var u=r.get("plotArea.drawingEffect");var c=i.getEffectManager();a.forEach(function(e){var t=p(e);g(c,e,o,1,t);m(c,e,o,s,u)})}},{id:"click_on_non_selection_scatter",triggerEvent:{name:"click",supportedChartTypes:c,excludeTargets:i.getDeselAllExTargets()},handler:function(e,t){l.clickOnNonSelection(e,t,u)}},{id:"clearPlot_time_scatter",triggerEvent:{name:"clearPlot",supportedChartTypes:u},handler:function(e,t){l.clearForTime(e,t)}},{id:"update_range_selection_effect_scatter",triggerEvent:{targets:"v-m-action-layerrange",name:"down",supportedChartTypes:u},handler:function(e,t){l.updateRangeEffect(e,t)}},{id:"recover_range_selection_effect_scatter",triggerEvent:{targets:"v-m-action-layerrange",name:"up",supportedChartTypes:u},handler:function(e,t){l.recoverRangeEffect(e,t)}}];s.registerAll(y)});define("sap/viz/chart/views/YYChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/legend/ColorLegend","sap/viz/chart/components/legend/SizeLegend","sap/viz/chart/components/plotareas/YYPlotArea","sap/viz/chart/scales/SizeScaleUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/chains/YYChains","sap/viz/chart/scales/FrameScaleProcessor","sap/viz/chart/scales/ShapeScaleProcessor","sap/viz/chart/behavior/config/DataPointBehaviorConfigForScatter"],function(e,t,i,a,r,o,n,l,s,u){function c(e,t){c.superclass.constructor.apply(this,arguments);this._supportLazyRender=true}e.extend(c,t);var h=c.prototype;h.setSize=function(){if(this._plotArea&&this._plotArea.setRoughSize){this._plotArea.setRoughSize.apply(this._plotArea,arguments)}c.superclass.setSize.apply(this,arguments)};h._isBubble=function(){return/bubble/.test(this._renderType)};h._getLegendDefinition=function(){if(this._isBubble()){return[a,i]}return[i]};h._getLegendModuleKey=function(){if(this._isBubble()){return["sizeLegend","legend"]}return["legend"]};h._getDataItems=function(){return["valueAxis","timeAxis","valueAxis2","bubbleHeight","bubbleWidth","color","shape","dataFrame","series","transparent","trellisRow","trellisColumn","orderMap","seriesContext"]};h._createPlotContainer=function(e){this._plotArea=new r(this.runtime(),{renderType:this._renderType,rawData:this._rawData});this._plotArea.setRoughSize(this._size);this._plot=this._plotArea.getPlot();this.setChild("main",this._plotArea,{priority:3})};h._configLayout=function(){if(this._isBubble()){this._applySizeScale()}return c.superclass._configLayout.apply(this,arguments)};h._applySizeScale=function(e){var t=this._data.bubbleWidth.scale;var i=t.getDomain();var a=i[0],r=i[1];var s;if(n.isNoValue(r)&&n.isNoValue(a)){s=[null]}else if(r===a){if(!i.withNoValue){s=[r]}else{s=[r,null]}}else{if(!i.withNoValue&&!i.withMiddleValue){s=[r,a]}else if(!i.withNoValue&&i.withMiddleValue){s=[r,(r+a)/2,a]}else if(i.withNoValue&&!i.withMiddleValue&&i.withZeroValue){s=[r,a]}else if(i.withNoValue&&!i.withMiddleValue&&!i.withZeroValue){s=[r,(r+a)/2,null]}else{s=[r,(r+a)/2,i.withZeroValue?0:null]}}var u=parseInt(this._properties.get("plotArea.minMarkerSize"));var c=null;var h=this.getChild(l.LEGEND_GROUP.KEY).module;c=Math.min(this._size.height,this._size.width);c*=l.BUBBLE.DEFAULT_WIDTH_RATIO;var p=o.build(u,c,i);var d=h.getChild("sizeLegend").module;d.setData({labels:s,scale:p});this._plot.setSizeScale(p)};h.calculatePaddingInPX=function(e){var t=c.superclass.calculatePaddingInPX.apply(this,arguments);if(e.get("title.visible")===false&&e.get("valueAxis.visible")===true){this.changePaddingTop(e,t)}return t};return c});define("sap/viz/chart/metadata/bindings/YYBindings",[],function e(){var t=[{id:"dataFrame",name:"IDS_DATA_FRAME",type:"Dimension",min:0,max:1,acceptMND:false,role:"frame.data"},{id:"trellisColumn",name:"IDS_TRELLIS_COLUMN",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"trellis.columnCategory"},{id:"trellisRow",name:"IDS_TRELLIS_ROW",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"trellis.rowCategory"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"mark.color"},{id:"shape",name:"IDS_SHAPE",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"mark.shape"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:1,role:"layout.value"},{id:"valueAxis2",name:"IDS_VALUE_AXIS2",type:"Measure",min:1,max:1,role:"layout.secondValue"},{id:"bubbleWidth",name:"IDS_BUBBLESIZE",type:"Measure",min:1,max:1,role:"mark.size"}];return t});define("sap/viz/chart/components/plotareas/XYYPlotArea",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/plotareas/XYPlotArea","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/axis/CategoryAxis","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/datalabels/BarDataLabels","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/components/plotareas/UpdateByTrendlineUtil"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f){var v=function(e,t){v.superclass.constructor.apply(this,arguments)};i.extend(v,a);v.prototype._getPlotOptions=function(){return{isDualValueAxis:true}};v.prototype.setData=function(e){v.superclass.setData.apply(this,arguments);this._applyDefaultProperties(e)};v.prototype._applyDefaultProperties=function(e){var t=this.runtime().semanticManager();if(t.isOverrideMode()&&t.shouldChangeColor()){var i=this._properties.get("categoryAxis.title.style.color","templateValue");if(!this._properties.has("valueAxis.title.style.color","value")){this._properties.set("valueAxis.color",i,true,"templateValue")}if(!this._properties.has("valueAxis2.title.style.color","value")){this._properties.set("valueAxis2.color",i,true,"templateValue")}}else{this._properties.setDefault("valueAxis.color",e.color.scale.getRange()[0]);this._properties.setDefault("valueAxis2.color",e.color2.scale.getRange()[0]);this._properties.setDefault("valueAxis.title.applyAxislineColor",true)}};v.prototype._init=function(){var e={};e.valueAxisScrollbar=false;e.valueAxisPosition="top";v.superclass._init.apply(this,[e]);var i=this._plot.isHorizontal();var a=!this._properties.get("interaction.noninteractiveMode");if(i){this.setLayoutSequence(["bottom","top",this.allOrNone.bind(this),"left","right"]);this._valueAxis2=new r(this.runtime(),{name:"valueAxis2",hasScrollbar:a,valueAxes:this._valueAxes});this.setChild("valueAxis2",this._valueAxis2,{position:"bottom"});if(a){this._hScrollbar=this._valueAxis2.getChild(t.AXIS.SCROLLBAR_NAME).module}}else{this.setLayoutSequence(["left","right",this.allOrNone.bind(this),"bottom","top"]);this._valueAxis2=new r(this.runtime(),{name:"valueAxis2",hasScrollbar:a,valueAxes:this._valueAxes});this.setChild("valueAxis2",this._valueAxis2,{position:"right"});if(a){this._vScrollbar=this._valueAxis2.getChild(t.AXIS.SCROLLBAR_NAME).module;this.getChild("scrollbar").module.destroy();this.removeChild("scrollbar")}}if(this._isPercentageChart()){this._valueAxis.setPercentageMode(true);this._valueAxis2.setPercentageMode(true)}this._zoomer.init({main:this,plot:this._plot,axisByDirection:{x:i?[this._valueAxis,this._valueAxis2]:[this._categoryAxis],y:i?[this._categoryAxis]:[this._valueAxis,this._valueAxis2]},isHorizontal:i})};v.prototype.updateValueScale=function(){var e=this._data;var t=this._roughSize.width;var i=this._roughSize.height;if(!e||t<=0||i<=0){return e}var a=[0,1];var r=this._plot.isHorizontal();if(r){a[1]=t}else{a[1]=i}a[1]*=.8;var o,n,c=e;if(this._isPercentageChart()){o=this._calcPercentageValueAxisScale(a);["","2"].forEach(function(t){var i="valueAxis"+t;o.metaData=e[i].metaData;e[i].tickHint=o.tickHint;this["_"+i].setData(o)},this)}else{if(this._isAdjustValueScaleForTopLabel()){var v=this._properties.get("plotArea.dataLabel");var g=this._properties.get("plotArea.primaryScale.fixedRange");var m=this._data.valueAxis.scale;var y=this._data.valueAxis2.scale;var _=m.getDomain().slice();var A=y.getDomain().slice();var b=v.formatString;var x,S,D;if(this._data&&this._data.valueAxis&&this._data.valueAxis.metaData){S=this._data.valueAxis.metaData[0].id;D=this._data.valueAxis.metaData[0].formatString}b=b?b:D;var w={key:S};o=this._calcValueAxisScale("valueAxis",a);n=this._calcValueAxisScale("valueAxis2",a);if(!(g||m.getDomainFixed()[1]||y.getDomainFixed()[1])&&(v.visible||v.showTotal)&&(_||A)){var C=[null,null];if(this._isStackedChart()&&v.showTotal){if(this._plot.isHorizontal()){x=h.getFirstFormatPattern(b,w)}var T;var z={decimalFormatString:u.getDecimalFormatString(u.SUPPORT_CUSTOM_COMPONENTS.DATALABEL)};if(_[1]>0){T=u.format(d.preciseSimple(_[1]),x,v.unitFormatType,z);C[1]=s.fastMeasure(T,v.style.fontSize,v.style.fontWeight,v.style.fontFamily,v.style.fontStyle)}if(_[0]<0){T=u.format(d.preciseSimple(_[0]),x,v.unitFormatType,z);C[0]=s.fastMeasure(T,v.style.fontSize,v.style.fontWeight,v.style.fontFamily,v.style.fontStyle)}o=this._calcValueAxisScale("valueAxis",a,l.extendDomainForDataLabel(_,a,C,this._plot.isHorizontal()));C=[null,null];if(A[1]>0){T=u.format(d.preciseSimple(A[1]),x,v.unitFormatType,z);C[1]=s.fastMeasure(T,v.style.fontSize,v.style.fontWeight,v.style.fontFamily,v.style.fontStyle)}if(A[0]<0){T=u.format(d.preciseSimple(A[0]),x,v.unitFormatType,z);C[0]=s.fastMeasure(T,v.style.fontSize,v.style.fontWeight,v.style.fontFamily,v.style.fontStyle)}n=this._calcValueAxisScale("valueAxis2",a,l.extendDomainForDataLabel(A,a,C,this._plot.isHorizontal()))}if(!this._isStackedChart()&&v.visible&&(_&&(_[1]>0||_[0]<0)||A&&(A[1]>0||A[0]<0))){if(this._isColumnChart()){var L=s.fastMeasure("M",v.style.fontSize,v.style.fontWeight,v.style.fontFamily,v.style.fontStyle);if(_[1]>0){C[1]=L}if(_[0]<0){C[0]=L}o=this._calcValueAxisScale("valueAxis",a,l.extendDomainForDataLabel(_,a,C,r));C=[null,null];if(A[1]>0){C[1]=L}if(A[0]<0){C[0]=L}n=this._calcValueAxisScale("valueAxis2",a,l.extendDomainForDataLabel(A,a,C,r))}else{if(_[1]>0){C[1]=p.getLabelSize(this._data.series,_[1],this._properties,b)}if(_[0]<0){C[0]=p.getLabelSize(this._data.series,_[0],this._properties,b)}o=this._calcValueAxisScale("valueAxis",a,l.extendDomainForDataLabel(_,a,C,r));C=[null,null];if(A[1]>0){C[1]=p.getLabelSize(this._data.series,A[1],this._properties,b,"valueAxis2")}if(A[0]<0){C[0]=p.getLabelSize(this._data.series,A[0],this._properties,b,"valueAxis2")}n=this._calcValueAxisScale("valueAxis2",a,l.extendDomainForDataLabel(A,a,C,r))}}}}else{o=this._calcValueAxisScale("valueAxis",a);n=this._calcValueAxisScale("valueAxis2",a)}l.syncTicks(o.scale,n.scale);var P=o.autoScale;var k=n.autoScale;l.syncTicks(P,k);o.scale.setAutoDomain(P.getDomain());n.scale.setAutoDomain(k.getDomain());var E={valueAxis:o,valueAxis2:n};[o,n].forEach(function(t,i){var a="valueAxis"+(i?"2":"");e[a].scale=t.scale;t.tickHint=e[a].tickHint=t.scale._tickHint;e[a].scale.setRange([0,1]);var r=E[a];r.metaData=e[a].metaData;this["_"+a].setData(r)},this);c=this._cloneData(E)}c=f.call(this,c,a);return c};function g(){}return v});define("sap/viz/chart/chains/XYYChains",["sap/viz/chart/chains/BaseChains","sap/viz/framework/binding/BindingManager"],function e(t,i){var a={};var r=["GetDimensionsFromFlattable","GetMeasuresFromFlattable","GetBindingSeries","GetContext","OnBindingFinished","OnBindingStart"];a=t.extend("xyy",r);Object.keys(a).forEach(function(e){i.registerChain(e,a[e])});return a});define("sap/viz/chart/views/XYYChartView",["jquery","sap/viz/framework/common/util/oo","sap/viz/chart/views/XYChartView","sap/viz/chart/components/plotareas/XYYPlotArea","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/chains/XYYChains","sap/viz/chart/scales/FrameScaleProcessor"],function e(t,i,a,r,o,n){var l=function(e,t){l.superclass.constructor.apply(this,arguments)};i.extend(l,a);l.prototype._getDataItems=function(){return["valueAxis","valueAxis2","categoryAxis","color","color2","dataFrame","series","trellisRow","trellisColumn","seriesContext"]};l.prototype._createPlotContainer=function(e){this._plotArea=new r(this.runtime(),{renderType:this._renderType,valueAxisIndex:this._valueAxisIndex});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};l.prototype.changePaddingTop=function(e,t){var i=e.get("valueAxis.label.style");var a=o.canvasMeasure("",i["fontSize"],i["fontWeight"],i["fontFamily"]).height;var r=e.get("valueAxis2.label.style");var l=0;if(r){l=o.canvasMeasure("",r["fontSize"],r["fontWeight"],r["fontFamily"]).height}if(n.isExist(t.propertyPaddingInPX)&&t.propertyPaddingInPX<Math.min(a,l)/2){t.propertyPaddingTopInPX=Math.max(a,l)/2}if(n.isExist(t.propertyPaddingTopInPX)&&t.propertyPaddingTopInPX<Math.min(a,l)/2){t.propertyPaddingTopInPX=Math.max(a,l)/2}};l.prototype._getSeriesSettings=function(){var e=l.superclass._getSeriesSettings.call(this);if(e){e.forEach(function(e,t){if(this._renderType.match(/stacked/)){e.stack="stacked_"+this._data.series[t].measureMeta[0]}}.bind(this))}return e};return l});define("sap/viz/chart/metadata/bindings/XYYBindings",[],function e(){var t=[{id:"dataFrame",name:"IDS_DATA_FRAME",type:"Dimension",min:0,max:1,acceptMND:false,role:"frame.data"},{id:"trellisColumn",name:"IDS_TRELLIS_COLUMN",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.columnCategory"},{id:"trellisRow",name:"IDS_TRELLIS_ROW",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.rowCategory"},{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"layout.category"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"valueAxis2",name:"IDS_VALUE_AXIS2",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.secondValue"}];return t});define("sap/viz/chart/scales/RGBA",[],function e(){function t(e,t,i,a,r){this.r=e;this.g=t;this.b=i;this.a=a;this.signForOpacity=r}t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a,this.signForOpacity)};t.prototype.toHex=function(){return d3.rgb(this.r,this.g,this.b).toString()};t.prototype.toString=function(){if(this.a<=1&&this.signForOpacity===true){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}else if(this.a<1){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"}else{return this.toHex()}};t.prototype.from=function(e,t){var i=d3.rgb(0,0,0),a=1,r;if(t){a=t;r=true}if(e!==undefined&&typeof e==="object"){if(e.rgb){i=e.rgb()}else{i=e}}else if(typeof e==="string"){e=e.toLowerCase();var o,n,l;if(e.indexOf("rgba")>=0){o=e.substring(e.indexOf("(")+1);n=o.lastIndexOf(",");l=o.indexOf(")");if(n>=0&&l>=0){var s="rgb("+o.substring(0,n)+")";a=parseFloat(o.substring(n+1,l));i=d3.rgb(s)}}else if(e.indexOf("hsla")>=0){o=e.substring(e.indexOf("(")+1);n=o.lastIndexOf(",");l=o.indexOf(")");if(n>=0&&l>=0){var u="hsl("+o.substring(0,n)+")";a=parseFloat(o.substring(n+1,l));i=d3.hsl(u).rgb()}}else if(e.indexOf("hsl")>=0){i=d3.hsl(e).rgb()}else if(e.indexOf("#")>=0){var c,h,p;if(e.length===4){c=e.charAt(1);c+=c;h=e.charAt(2);h+=h;p=e.charAt(3);p+=p}else if(e.length===7){c=e.substring(1,3);h=e.substring(3,5);p=e.substring(5,7)}c=parseInt(c,16);h=parseInt(h,16);p=parseInt(p,16);i=d3.rgb(c,h,p)}else{i=d3.rgb(e)}}this.r=i.r;this.g=i.g;this.b=i.b;this.a=a;this.signForOpacity=r;return this};t.prototype.toGray=function(){var e=this.r,t=this.g,i=this.b,a,r;if(e===t&&t===i){a=Math.round(e+(255-e)*.6)}else{a=Math.round((e*299+t*587+i*114+500)/1e3)}r=this.clone();r.r=a;r.g=a;r.b=a;return r};t.prototype.increaseBrightness=function(e){var t=this.r,i=this.g,a=this.b,r,o,n,l;if(!isNaN(e)){if(e>=0){r=Math.round(t+(255-t)*e/100);o=Math.round(i+(255-i)*e/100);n=Math.round(a+(255-a)*e/100)}else{r=Math.round(t*(100+e)/100);o=Math.round(i*(100+e)/100);n=Math.round(a*(100+e)/100)}l=this.clone();l.r=r;l.g=o;l.b=n}return l};return t});define("sap/viz/chart/components/util/FillPatternUtils",["sap/viz/framework/common/util/SVG","sap/viz/chart/scales/RGBA"],function e(t,i){var a="v-m-root";var r="defs-diagonalHatch";var o="diagonalHatch-";var n={};n.getPatternId=function(e){var t=new i;e=t.from(e).toHex();return"url(#"+o+e.replace(/#/,"")+")"};n.patternize=function(e,n,l){var s=n;while(!s.getAttribute("class")||s.getAttribute("class").indexOf(a)===-1){s=s.parentNode}var u=s.querySelector("#"+r);if(!u){u=t.create("defs");u.setAttribute("id",r);s.appendChild(u)}var c;if(e){var h=new i;e=h.from(e).toHex();c=o+e.replace(/#/,"")}else{e=l.substr(("url(#"+o).length,6);c=o+e;e="#"+e}var p=s.querySelector("#"+c);if(!p){var d=t.create("path");p=t.create("pattern");d.setAttribute("d","M2,0L5,0L0,5L0,2L2,0 M7,2L7,5L5,7L2,7L7,2");d.setAttribute("fill",e);d.setAttribute("fill-opacity",1);p.setAttribute("id",c);p.setAttribute("patternUnits","userSpaceOnUse");p.setAttribute("width",7);p.setAttribute("height",7);p.appendChild(d);u.appendChild(p)}return"url(#"+c+")"};return n});define("sap/viz/chart/scales/BulletColorScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ColorScale","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/scale/ScaleOptionFactory","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils"],function(e,t,i,a,r,o,n,l){var s={actualValues:"plotArea.actualColor",additionalValues:"plotArea.additionalColor",forecastValues:"plotArea.forecastColor",targetValues:"plotArea.target.valueColor"};function u(e,t,i,a){v(i,a,t);this._metaIds=i.metaData&&i.metaData.map(function(e){return e.id}).concat("measureNames")||["measureNames"];i.sharedRuntimeColorScale=h(i.sharedRuntimeColorScale,"type",this._metaIds);this._scales=c(e.rowArray,i,t);this._scaleMap={};for(var r=0;r<this._scales.length;r++){var o=this._scales[r].id;this._scaleMap[o]=this._scales[r].scale}u.superclass.constructor.apply(this,arguments)}e.extend(u,t);u.prototype.scale=function(e,t){if(arguments.length===1||!t){return u.superclass.scale.apply(this,arguments)}else{return this._scaleMap[t].scale(e)}};u.prototype._initScale=function(){var e=[],t=[];this._scales.forEach(function(i){var a=i.scale;a.getDomain().forEach(function(i){e.push(i);t.push(a.scale(i))})});this._domain=e;this._range=t;this._scale=d3.scale.ordinal();this._scale.domain(this._domain.map(i.valuesToString)).range(this._range);this._constructRuntimeColorScale()};u.prototype.getDomain=function(e){if(e){return this._scaleMap[e]&&this._scaleMap[e].getDomain()}else{return u.superclass.getDomain.apply(this,arguments)}};u.prototype._constructRuntimeColorScale=function(){var e=this._scales;function t(t){var i=[];for(var r=0;r<e.length;++r){var o=e[r].scale[t]().results;for(var n=0;n<o.length;++n){var l=a.extend(true,{type:e[r].id},o[n]);i.push(l)}}return i}this._runtimeColorScale={feed:"color",fields:this._metaIds,results:t("runtimeColorScale")};this._mergedRuntimeColorScale={feed:"color",fields:this._metaIds,results:t("mergedRuntimeColorScale")}};function c(e,t,i){var a=t.mnds;var r=a.actualValues.length;return Object.keys(a).map(function(o){var l=a[o];var u=i.get(s[o]);if(!n.isArray(u)){u=[u]}var c=t.sharedRuntimeColorScale[o];return{id:o,scale:g(o,e,l,u,r,c,t.noValueIndex)}})}function h(e,i,a){var r=t.findMatchRuntimeScale(e,a);if(!r){return{}}else{return r.results.reduce(function(e,t){var a=t[i]||"actualValues";if(!e[a]){e[a]={feed:"color",results:[]}}e[a].results.push(t);return e},{})}}var p=["actualValues","additionalValues","forecastValues","targetValues"];var d=p.length;function f(e,t){return!t||t.indexOf(e)===-1||t.indexOf(e+1)===-1||t.indexOf(e+2)===-1||t.indexOf(e+3)===-1}function v(e,t,i,a){if(!t){return}if(!t.getDefault("color")){var r={serializable:true,defaultValue:{feed:"color",type:"color",actualColor:o.COLOR.BULLET.ActualColor,additionalColor:o.COLOR.BULLET.AdditionalColor}};if(!e.isTime){r["defaultValue"]["forecastColor"]=o.COLOR.BULLET.ForecastColor}t.add("color",r)}function n(e,a){var r="plotArea."+e;if(i.origin.has(r)){i.origin.add(r,{defaultValue:a,serializable:false,get:function(){var i=t.get("color");if(i&&i[e]){return i[e]}else{var r=t.get("color","templateValue");return r&&r[e]||a}}})}}n("actualColor",o.COLOR.BULLET.ActualColor);n("additionalColor",o.COLOR.BULLET.AdditionalColor);n("forecastColor",o.COLOR.BULLET.ForecastColor)}function g(e,i,a,r,o,n,l){var s=[],u=[];var c;var h=0;var v=[];if(n&&n.results){n.results.forEach(function(e){var t=e.scaleResult.index%r.length;v[t]=r[t];h=t+1})}if(!i){for(var g=0;g<o;++g){if(f(g*d,l)){c=g*d+p.indexOf(e);if(!l||l.indexOf(c)===-1){s.push([a[g]]);u.push(r[h%r.length])}h++}}}else{i.forEach(function(t,i){for(var n=0;n<o;n++){if(f((i*o+n)*d,l)){c=(i*o+n)*d+p.indexOf(e);if((!l||l.indexOf(c)===-1)&&a[n]){s.push(t.concat(a[n]));u.push(r[h%r.length])}h++}}})}u=v.concat(u);return new t(s,u,{needRuntimeColorScales:true,sharedRuntimeColorScale:n})}r.register("bullet","color",function(e,t,i,a,r,o){var n=["actualValues","additionalValues","targetValues"];if(o.indexOf("time")===-1){n.push("forecastValues")}e.mnds=n.reduce(function(e,i){e[i]=(t[i]().metaData||[]).map(function(e){return e.id});return e},{})});return u});define("sap/viz/chart/components/legend/BulletLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/ColorScale","sap/viz/chart/components/legend/ColorLegend","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/FillPatternUtils","sap/viz/framework/scale/ColorShapeScaleMerger","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/lang/LangManager","sap/viz/chart/scales/BulletColorScale"],function(e,t,i,a,r,o,n,l,s,u,c){var h=l.CSS.CLASS.LEGENDITEM;var p=l.CSS.CLASS.BULLETLEGENDITEM;var d="#aaaaaa";var f=function(){f.superclass.constructor.apply(this,arguments)};var v=["actualColor","additionalColor","forecastColor"],g=[true,true,false];e.extend(f,i);f.prototype.setData=function(e){this._data=e;this._series=e.color||this._createSeries(e);this._colorShapeScale=null;return this};function m(e,t){for(var i=0;i<e.length;++i){if(e[i].color.hasOwnProperty(t)&&e[i].color[t]){return true}}return false}f.prototype._createSeries=function(e){var t="actualValues,additionalValues,forecastValues,targetValues".split(",").reduce(function(t,i){if(e[i]){t[i]=e[i].metaData.map(function(e){return e.name||e.id})}return t},{});return{scale:new c([],this._properties.parentLevel,{mnds:t})}};f.prototype._createColorScale=function(){var e=this._properties.parentLevel;var i=this.runtime().semanticManager();var a=A(i);var r=a.scale;var o=this._data.actualValues.metaData.length;var n=i.isOverrideMode()&&r&&r._others&&r._others.properties&&r._others.properties.color;var l=m(a.range,"actualColor")||n&&!!r._others.properties.color["actualColor"];var s=m(a.range,"additionalColor")||n&&!!r._others.properties.color["additionalColor"];var c=m(a.range,"forecastColor")||n&&!!r._others.properties.color["forecastColor"];var h;for(h=0;h<a.range.length;h++){var p=a.range[h];if(p.color&&p.pattern){if(!p.color["actualColor"]&&p.pattern["actualColor"]){p.color["actualColor"]=d}if(!p.color["additionalColor"]&&p.pattern["additionalColor"]){p.color["additionalColor"]=d}if(!p.color.hasOwnProperty("forecastColor")&&p.pattern["forecastColor"]){delete p.pattern["forecastColor"];delete a.domain[h]["forecastColor"]}}}if(!i.isOverrideMode()){l=false;s=false;c=false}var f,y,_;var S=this._series;var D=b(this._data.targetValues,S.scale,S,o,"targetValues"),w=x(e,D),C;f=b(this._data.actualValues,S.scale,S,o,"actualValues");if(!s){y=b(this._data.additionalValues,S.scale,S,o,"additionalValues")}if(!c){_=b(this._data.forecastValues,S.scale,S,o,"forecastValues")}var T={domain:[],range:[]};for(h=0;h<f.domain.length;++h){if(!l&&f.domain[h]){T.domain.push(f.domain[h]);T.range.push(f.range[h])}if(!s&&y&&y.domain[h]){T.domain.push(y.domain[h]);T.range.push(y.range[h])}if(!c&&_&&_.domain[h]){T.domain.push(_.domain[h]);T.range.push(_.range[h])}}var z=-1,L=[],P=[];if(a.scale&&!a.scale._hideSemanticLegend){for(h=0;h<a.domain.length;++h){for(var k=0;k<v.length;++k){if(a.domain[h].hasOwnProperty(v[k])){var E=T.domain,I=T.range;if(!i.isOverrideMode()){E=L;I=P;z++}E.push([a.domain[h][v[k]]]);if(a.range[h].pattern&&a.range[h].pattern[v[k]]&&g[k]){I.push({color:a.range[h].color[v[k]],pattern:a.range[h].pattern[v[k]]})}else{I.push(a.range[h].color[v[k]])}}}}}if(!i.isOverrideMode()){T.domain=L.concat(T.domain);T.range=P.concat(T.range)}T.domain=T.domain.concat(w.domain);T.range=T.range.concat(w.range);var O=this._series.scale.getDomain("targetValues");var R=this._data.targetValues;if(R&&R.metaData&&R.metaData.length&&O&&O.length>0){var N=e.get("legend.label.text.target");if(N===null||N===""){N=u.get("IDS_TARGET")}if(this._data.targetValues.metaData.length>1){T.domain.push(N)}else{T.domain.push(this._data.targetValues.metaData[0].name||this._data.targetValues.metaData[0].id)}T.range.push(e.get("plotArea.target.valueColor"))}var M=new t(T.domain,T.range);var B=[];if(S&&S.metaData){B=B.concat(S.metaData)}B.push({id:"measureNames",type:"Dimension",values:[{id:"id",name:"name"},{id:"id1",name:"name1"}]});return{semSplitIndex:z,metaData:B,scale:M,rowArray:T.domain}};f.prototype.render=function(e,t){if(this._colorShapeScale&&this._colorShapeScale._colorScales){var i=this._colorShapeScale._colorScales;if(i&&i[0]&&i[0].scale){var r=i[0].scale.getRange();var n=r.length;for(var l=0;l<n;++l){if(r[l]&&!a.isPlainObject(r[l])&&r[l].indexOf("url")!==-1){r[l]=o.patternize(null,e.node(),r[l])}}}}f.superclass.render.apply(this,arguments);e.selectAll("g."+h).classed(p,true).classed(h,false)};var y={actualValues:"v-primary",additionalValues:"v-additional",forecastValues:"v-forecast",targetValues:"v-target"};function _(e,t){if(e.length!==t.length){return false}for(var i=0;i<e.length-1;i++){if(!r.deepEqual(e[i],t[i])){return false}}return true}f.prototype._calcDomain=function(e,t){var i=f.superclass._calcDomain.apply(this,arguments);var a=this._series.scale._mergedRuntimeColorScale.results;var r={};for(var o=0;o<i.length;o++){var n=i[o];delete n.bulletClass;if(n.ctx.measureNamesId){for(var l=0;l<a.length;l++){if(r[l]){continue}var s=a[l];var u=s.dataContext[s.dataContext.length-1];var c=n.ctx.measureNamesId===u;if(c&&_(n.val,s.dataContext)){var h=s.type;n.bulletClass=y[h];r[l]=true;break}}}else if(o===i.length-1){n.bulletClass="v-target"}}return i};f.prototype._initColorShapeScale=function(){if(this._colorShapeScale){return}var e=this.runtime().markManager(),t=this._createColorScale(),i=new n(e);i._isBullet=true;i._bindingInfo={actualValues:this._data.actualValues,forecastValues:this._data.forecastValues,additionalValues:this._data.additionalValues,targetValues:this._data.targetValues};i.addColorScale(t);i.merge();var a=this._series.scale.getDomain("targetValues");var r=this._data.targetValues.metaData;for(var o,s=0,u=i.getLength();s<u;s++){o=i.getItem(s);if(s<=t.semSplitIndex){o.isSemanticItem=true}if(s===u-1&&a&&a.length>0&&r&&r.length>0){o.shape=this._options&&this._options.options&&this._options.options["targetLineDirection"]===l.DIRECTION.HORIZONTAL?"horizontal-target-line":"vertial-target-line"}else{o.shape="square"}}this._colorShapeScale=i;this.setBindingFields(i.getBindingFields())};function A(e){if(e.hasDataPointColorStyle()){var t=e.getDataPointColorScale(true);if(a.isArray(t)&&t.length===0){return{domain:[],range:[],scale:null}}else if(t.hasValidOthers()){var i=t.getDomain();var r=t.getRange();var o=[];var n=[];var l=i.length;for(var s=0;s<l-1;++s){o.push(i[s]);n.push(r[s])}var u={};var c={color:{},pattern:{}};var h=false;for(var p in i[l-1]){if(i[l-1][p]!==null){h=true;u[p]=i[l-1][p];c.color[p]=r[l-1].color[p];if(r[l-1].pattern){c.pattern[p]=r[l-1].pattern[p]}}}if(h){o.push(u);n.push({color:c.color,pattern:c.pattern})}return{domain:o,range:n,scale:t}}else{return{domain:t.getDomain(),range:t.getRange(),scale:t}}}else{return{domain:[],range:[],scale:null}}}function b(e,t,i,a,r){var o=[],n=[];var l=0;var s;function c(i,a,l){if(a<e.metaData.length&&t.hasDomain(i.concat(e.metaData[a].id))){o.push(l.concat(e.metaData[a].name||e.metaData[a].id));n.push(t.scale(i.concat(e.metaData[a].id),r))}else{++o.length;n.push(undefined)}}if(e&&e.metaData){if(i&&i.metaData&&i.metaData.length>0){var h=i.rowArray;for(var p=0;p<h.length;++p){var d=[];d.push(h[p][0]===null?u.get("IDS_ISNOVALUE"):h[p][0]);for(var f=1;f<h[p].length;++f){d.push(h[p][f]===null?u.get("IDS_ISNOVALUE"):h[p][f])}for(s=0;s<a;++s){c(h[p],s,d);++l}}}else{for(s=0;s<a;++s){c([],s,[])}}}var v=o.length;var g=n.length;while(g<v){n.push(n[v%g]);g++}return{domain:o,range:n.slice(0,o.length)}}function x(e,t){var i=e.get("plotArea.gap.visible"),a=e.get("plotArea.gap.type"),r=e.get("legend.label.text.positiveGap"),n=e.get("plotArea.gap.positiveColor"),l=e.get("legend.label.text.negativeGap"),c=o.getPatternId(s.convertColor(e.get("plotArea.gap.negativeColor"))),h=[],p=[];if(r===null||r===""){r=u.get("IDS_ABOVE_IS_GOOD")}if(l===null||l===""){l=u.get("IDS_BELOW_IS_BAD")}if(i&&t.domain.length>0){if(a==="both"){h.push([r]);h.push([l]);p.push(n);p.push(c)}else if(a==="positive"){h.push([r]);p.push(n)}else if(a==="negative"){h.push([l]);p.push(c)}}return{domain:h,range:p}}f.prototype._adjustRendererOption=function(e){e.isBullet=true};f.prototype.destroy=function(){f.superclass.destroy.call(this);this._data=null;this._colorShapeScale=null};return f});define("sap/viz/chart/components/accessibility/BulletDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/components/accessibility/BaseDataPointNavigator"],function(e,t,i){function a(){a.superclass.constructor.apply(this,arguments);this._dataPointIndexTable=[];this._setupDataPointsMap()}e.extend(a,i);var r=a.prototype;r._setupDataPointsMap=function(){if(!this._series||!this._series[0]){return}var e,t,i,a;var r=this._series[0].length;var o=this._series.every(function(e){return e===r});if(this._isTimeBullet&&!o){var n={};var l=[];for(e=0;e<this._series.length;e++){var s=this._series[e];for(t=0;t<s.length;t++){i=this._series[e][t];if(i&&i.dp){a=i.timeAxis[0].parsedValue;if(!n[a]){n[a]=[];l.push(a)}n[a].push(i.dp)}}}l.sort();for(e=0;e<l.length;e++){a=l[e];var u=n[a];for(t=0;u&&t<u.length;t++){this._dataPointIndexTable.push(u[t])}}}else{for(var c=0;c<r;c++){for(var h=0;h<this._series.length;h++){i=this._series[h][c];if(i&&i.dp){this._dataPointIndexTable.push(i.dp)}}}}};r.destroy=function(){a.superclass.destroy.apply(this,arguments);this._dataPointIndexTable=null};r.left=function(e){return this._isVerticalRender?this.getPrevDataPointInSeries(e):this.getPrevDataPointInSeries(e)};r.right=function(e){return this._isVerticalRender?this.getNextDataPointInSeries(e):this.getNextDataPointInSeries(e)};r.up=function(e){return this._isVerticalRender?this.getPrevDataPointInSeries(e):this.getPrevDataPointInSeries(e)};r.down=function(e){return this._isVerticalRender?this.getNextDataPointInSeries(e):this.getNextDataPointInSeries(e)};r.getPrevDataPointInSeries=function(e){var t=null;if(this._dataPointIndexTable){var i=this._dataPointIndexTable.indexOf(this.getDataPoint(e));i--;t=this._dataPointIndexTable[i];while(!t&&--i>-1){t=this._dataPointIndexTable[i]}}return t};r.getNextDataPointInSeries=function(e){var t=null;if(this._dataPointIndexTable){var i=this._dataPointIndexTable.indexOf(this.getDataPoint(e));i++;t=this._dataPointIndexTable[i];while(!t&&++i<this._dataPointIndexTable.length){t=this._dataPointIndexTable[i]}}return t};r.getFirstStartPoint=function(){if(this._series){return this._dataPointIndexTable[0]}else{return null}};return a});define("sap/viz/chart/components/plots/BulletPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/DataHandler","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/renderers/BarRenderer","sap/viz/chart/components/util/FillPatternUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/scales/ValueScale","sap/viz/chart/components/renderers/GridlineRenderer","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/ColorUtil","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/BulletDataPointNavigator","sap/viz/chart/components/util/ChartConstants"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_){var A={PRIMARYONLY:.7143,PRIMARYWIDTH:.5714};var b=c.MIN_FILL_SIZE;var x=function(e,t){t=t||{isHorizontal:true};x.superclass.constructor.apply(this,arguments);this._semanticMgr.setUseSemanticPattern(true)};e.extend(x,i);x.prototype._getCategoryWidth=function(){return this._data.categoryAxis.scale.getRangeBand()*(this.isHorizontal()?this._realSize.height:this._realSize.width)};x.prototype._getScaleValue=function(e){return this._data.actualValues.scale.scale(e)*(this.isHorizontal()?this._realSize.width:this._realSize.height)};x.prototype.isHorizontal=function(){return this._options.isHorizontal===true};x.prototype.update=function(e){this._applyChanges();var t=this._selection.select(".v-plot-main");this._drawGridlines(t);this._updateDatapoints(t)};function S(e,t,i){if(u.isNoValue(t)||u.isNoValue(i)){return false}if(e==="both"&&t!=i){return true}else if(e==="positive"&&t>i){return true}else if(e==="negative"&&t<i){return true}else{return false}}x.prototype._categoryCount=function(){return this._data.categoryAxis.rowArray.length};x.prototype.getPreferredSize=function(){var e=this._properties;var t=this.isHorizontal();var i=this._getCategoryRange()||this._getTimeRange();var a=this._data.series.length;var r={size:t?"height":"width",pos:t?"y":"x"};var o=!!this._data.timeAxis;var n=this._isRangeIncomplete;var l=!e.origin.get("interaction.noninteractiveMode");function s(){return!o&&i&&!n(i)&&l}var u=l&&!s()&&(e.get("isFixedDataPointSize")||n(i));if(u||s()){var c=this.__fixedBarSize();var h=c.max;var p=c.min;var d=this.__barSizeRatio();var f=c.max*d;var v=this._categoryCount();var g=this._size[r.size]/v;if(u){var m=p*((a-1)/8+a+2/3);if(g<m){this._realSize[t?"height":"width"]=m*v}if(n(i)&&this._shiftOffsetForIncompleteRange(i,v)){return this._realSize}}if(s()){var y=i[1]-i[0]+1;var _=(t?this._size.height:this._size.width)/y;if(_>f){if(g<f){var A=this._size[r.size]/f;if(A>v-i[0]){i[0]=v-A}this._realSize[r.size]=f*v}else{i[0]=0}}else{this._realSize[r.size]=this._size[r.size]*v/y}this._offset[r.pos]=-i[0]/v*this._realSize[r.size]}}return this._realSize};x.prototype._generatePath=function(e,i){var a=[];var r=1.5;if(this.isHorizontal()){if(e.width===0){r=0}if(i>=0){a.push([0,r]);a.push([e.width-r,r]);a.push([e.width-r,e.height-r]);a.push([0,e.height-r])}else{a.push([e.width,r]);a.push([r,r]);a.push([r,e.height-r]);a.push([e.width,e.height-r])}}else{if(e.height===0){r=0}if(i>=0){a.push([r,e.height]);a.push([r,r]);a.push([e.width-r,r]);a.push([e.width-r,e.height])}else{a.push([r,0]);a.push([r,e.height-r]);a.push([e.width-r,e.height-r]);a.push([e.width-r,0])}}return t.generatePath({points:a})};x.prototype._pathStrokeWidth=function(e){if(e&&e[e.measureNames]===0){return 0}return 3};x.prototype._drawGridlines=function(e){var t=this._realSize;var i=this.isHorizontal();var a=i?c.DIRECTION.VERTICAL:c.DIRECTION.HORIZONTAL;var r=this._properties.proxy("gridline");var o=i?[0,t.width]:[t.height,0];var n=this._gridlineScale=new h(this._data.actualValues.scale.getDomain(),o);n.setTickHint(this._data.actualValues.tickHint);p.drawValueGridline(e,t.width,t.height,n,r,a,this._effectManager)};x.prototype._updateBulletBar=function(e,t){var i=t.width<1&&t.width!==0?1:t.width;var a=t.height<1&&t.height!==0?1:t.height;e.setAttribute("width",i);e.setAttribute("height",a);if(t.stroke){var r=this.isHorizontal()?a:i;var o=r>t.strokeWidth+1?t.strokeWidth:r-1;if(o>=1){e.setAttribute("stroke",t.stroke);e.setAttribute("stroke-width",t.strokeWidth)}else{e.removeAttribute("stroke");e.removeAttribute("stroke-width")}}return e};x.prototype._updateBulletNoFillBar=function(e,t,i){e.setAttribute("stroke",t.fill);e.setAttribute("stroke-width",isNaN(t.pathStrokeWidth)?3:t.pathStrokeWidth);e.setAttribute("d",i);return e};x.prototype._updateBulletLine=function(e,t){e.setAttribute("x1",""+t.x1);e.setAttribute("x2",""+t.x2);e.setAttribute("y1",""+t.y1);e.setAttribute("y2",""+t.y2);e.setAttribute("stroke-width",t.width);return e};x.prototype._getDefaultZeroLineColor=function(){return this._properties.origin.get("categoryAxis.color")};x.prototype._drawZeroLine=function(e){var t=this._realSize;var i=this.isHorizontal()?c.DIRECTION.VERTICAL:c.DIRECTION.HORIZONTAL;p.drawZeroLine(e,t.width,t.height,this._gridlineScale,this._properties,i,this._getDefaultZeroLineColor())};x.prototype._drawDatapoints=function(e){this._renderDatapoints(e,false);this._drawZeroLine(e)};x.prototype._updateDatapoints=function(e){this._renderDatapoints(e,true);this._drawZeroLine(e)};function D(e,t,i,a){var r=e[a+"Color"]||t.scale(i.color.concat(i[a]),a+"Values");return n.convertColor(r)}x.prototype._adjustColorDomain=function(e,t,i){var a=e.actualValues;var r=e.additionalValues;var o=e.forecastValues;if(!u.isNoValue(a)){i.actual=this._data.actualValues.metaData[t].id}if(!u.isNoValue(r)){i.additional=this._data.additionalValues.metaData[t].id}if(!u.isNoValue(o)){i.forecast=this._data.forecastValues.metaData[t].id}return i};x.prototype._getInitialColorDomain=function(e,t,i){if(e&&e.metaData){t.color=e.rowArray[parseInt(i/this._data.actualValues.metaData.length)]}return t};var w=2.5,C=.5;x.prototype._renderOnePoint=function(e,i,a,r,o,c){var h=e.dp&&e.dp.context();var p=e.dp&&e.dp.additionCtx();var d;var g;var m;var y;var _=this._data.color.scale;var A,x;var T=this._properties.get("target.shadowColor");var z=0,L;var P=r.isUpdate;var k=this._properties.get("markerRenderer")||l;var E=this._realSize;var I=b;if(r.horizontal){r.x=0}else{r.y=0}var O=this._getScaleValue(0);var R=O;function N(){var e=Math.abs(y-R);if(e<I&&F!==0){e=I;if(F>0&&!r.horizontal){y=R+I}else if(F<0&&r.horizontal){y=R-I}}return e}function M(){return F>0?R:y}function B(){return F>0?E.height-y:E.height-R}function V(){c.max=Math.max(c.max,y);c.min=Math.min(c.min,y);c.max=Math.max(c.max,R);c.min=Math.min(c.min,R)}var F=e.forecastValues;if(!u.isNoValue(F)){y=this._getScaleValue(F);if(r.horizontal){r.width=N();r.height=r.realBarSize;r.x=M();r.y=r.categoryPos}else{r.height=N();r.width=r.realBarSize;r.x=r.categoryPos;r.y=B()}V();d=this._semanticMgr.analyzeDataPoint(["color","forecastColor"],h,true,p);g=((d||{}).properties||{}).color||{};r.fill=D(g,_,i,"forecast");if(P){A=o.querySelector(".v-forecast");A=this._updateBulletBar(A,r)}else{A=k({ctx:h,graphic:r,effectManager:this._effectManager,horizontal:r.horizontal,defaultRender:{render:l},currCate:e,bulletType:"forecastValue",bulletClass:"v-forecast",measures:i});A.setAttribute("class","v-forecast");o.appendChild(A)}A.setAttribute("transform","translate("+r.x+", "+r.y+")");a.color["v-forecast"]={color:r.fill}}if(this._strokeProp&&this._strokeProp.visible){r.stroke=this._strokeProp.color;r.strokeWidth="1px"}if(r.horizontal){r.y=r.categoryPos+r.primaryOffset;r.height=r.primaryPercentage*r.realBarSize;r.width=0}else{r.x=r.categoryPos+r.primaryOffset;r.width=r.primaryPercentage*r.realBarSize;r.height=0}F=e.actualValues;if(!u.isNoValue(F)){y=this._getScaleValue(F);if(r.horizontal){r.width=N();r.x=M()}else{r.height=N();r.y=B()}d=this._semanticMgr.analyzeDataPoint(["color","actualColor"],h,true,p);m=this._semanticMgr.analyzeDataPoint(["pattern","actualColor"],h,true,p);g=((d||{}).properties||{}).color||{};r.fill=D(g,_,i,"actual");r.pattern=m&&m.properties&&m.properties.pattern&&m.properties.pattern.actualColor;if(r.pattern==="noFill"){L=this._generatePath(r,F);r.pathStrokeWidth=this._pathStrokeWidth(h);r.bgColor=this._getBackgroundColor()}if(P){A=o.querySelector(".v-primary");if(r.pattern==="noFill"){x=o.querySelector(".v-primary-noFill");x=this._updateBulletBar(x,r);A=this._updateBulletNoFillBar(A,r,L)}else{A=this._updateBulletBar(A,r)}}else{A=k({ctx:h,graphic:r,path:L,effectManager:this._effectManager,horizontal:r.horizontal,defaultRender:{render:l},currCate:e,bulletType:"actualValue",bulletClass:"v-primary",measures:i});A.setAttribute("class","v-primary");o.appendChild(A);if(r.pattern==="noFill"){var H=v.clone(r);delete H.bgColor;delete H.drawingEffect;delete H.pattern;H.fill="transparent";x=k({graphic:H});if(x){o.appendChild(x)}x.setAttribute("class","v-primary-noFill")}}A.setAttribute("transform","translate("+r.x+", "+r.y+")");if(x){x.setAttribute("transform","translate("+r.x+", "+r.y+")")}a.color["v-primary"]={color:r.fill,strokeWidth:A.getAttribute("stroke-width"),pathStrokeWidth:r.pathStrokeWidth,pattern:r.pattern};if(a.color["v-primary"]["pattern"]){a.color["v-primary"]["patternURL"]=A.getAttribute("fill")}z=y;V()}F=e.additionalValues;if(!u.isNoValue(F)){F=+F;if(!u.isNoValue(e.actualValues)&&e.additionalValues*e.actualValues>0){F+=+e.actualValues;R=z}if(e.actualValues===0){I+=b}y=this._getScaleValue(F);V();if(r.horizontal){r.width=N();r.x=M()}else{r.height=N();r.y=B()}d=this._semanticMgr.analyzeDataPoint(["color","additionalColor"],h,true,p);m=this._semanticMgr.analyzeDataPoint(["pattern","additionalColor"],h,true,p);g=((d||{}).properties||{}).color||{};r.fill=D(g,_,i,"additional");r.pattern=m&&m.properties&&m.properties.pattern&&m.properties.pattern.additionalColor;if(P){A=o.querySelector(".v-additional");A=this._updateBulletBar(A,r)}else{A=k({ctx:h,graphic:r,effectManager:this._effectManager,horizontal:r.horizontal,defaultRender:{render:l},currCate:e,bulletType:"additionalValue",bulletClass:"v-additional",measures:i});A.setAttribute("class","v-additional");o.appendChild(A)}A.setAttribute("transform","translate("+r.x+", "+r.y+")");a.color["v-additional"]={color:r.fill,strokeWidth:A.getAttribute("stroke-width"),pattern:r.pattern};if(a.color["v-additional"]["pattern"]){a.color["v-additional"]["patternURL"]=A.getAttribute("fill")}}var U;if(!u.isNoValue(e.targetValues)){y=U=this._getScaleValue(e.targetValues);V();if(this._properties.get("gap.visible")&&S(this._properties.get("gap.type"),z,U)&&!u.isNoValue(e.actualValues)){var W=e.targetValues>e.actualValues;if(r.pattern){delete r.pattern}if(r.horizontal){r.width=W?U-z-w:z-U;r.height=r.realBarSize*r.primaryPercentage;r.x=W?z:U+C;r.y=r.categoryPos+r.primaryOffset}else{r.width=r.realBarSize*r.primaryPercentage;r.height=W?U-z-w:z-U-C;r.x=r.categoryPos+r.primaryOffset;r.y=W?this._realSize.height-U+w:this._realSize.height-z}var G=n.convertColor(this._properties.get("gap.positiveColor"));var Y=n.convertColor(this._properties.get("gap.negativeColor"));if(P){A=o.querySelector(".v-gap");A=this._updateBulletBar(A,r)}else{r.fill=W?s.patternize(Y,r.parent):G;A=l({graphic:r,effectManager:W?null:this._effectManager,horizontal:r.horizontal});A.setAttribute("class","v-gap");o.appendChild(A)}A.setAttribute("transform","translate("+r.x+", "+r.y+")");a.color["v-gap"]={color:W?Y:G,strokeWidth:A.getAttribute("stroke-width")};if(Math.abs(z-U)<=2){A.style.display="none"}else{A.style.display=null}}var X=2;var j={};var Z=0;if(T!==""){Z=1}if(U>=0&&U<X+Z){U=X+Z}if(Z>0){if(r.horizontal){j.x1=U-X-Z/2;j.x2=j.x1;j.y1=r.categoryPos;j.y2=r.categoryPos}else{j.y1=this._realSize.height-U+X;j.y2=j.y1;j.x1=r.categoryPos;j.x2=r.categoryPos}j.width=Z;if(P){A=o.querySelector(".v-target-shadow");A=this._updateBulletLine(A,j)}else{A=t.create("line");A=this._updateBulletLine(A,j);A.setAttribute("stroke",T);if(!f.isMobile()){A.setAttribute("shape-rendering","crispEdges")}A.setAttribute("class","v-target-shadow");o.appendChild(A)}}if(r.horizontal){j.x1=U-X/2;j.x2=j.x1;j.y1=r.categoryPos;j.y2=r.categoryPos+r.realBarSize}else{j.y1=this._realSize.height-U+X/2;j.y2=j.y1;j.x1=r.categoryPos;j.x2=r.categoryPos+r.realBarSize}j.width=X;if(P){A=o.querySelector(".v-target");A=this._updateBulletLine(A,j)}else{A=t.create("line");A=this._updateBulletLine(A,j);A.setAttribute("stroke",this._properties.get("target.valueColor"));A.setAttribute("class","v-target");if(!f.isMobile()){A.setAttribute("shape-rendering","crispEdges")}o.appendChild(A)}}};x.prototype._getDataLabels=function(e){return null};function T(e,i){var a=t.create("g");a.setAttribute("class",i);e.node().appendChild(a);return a}x.prototype._renderDatapoints=function(e,i){var a=this.isHorizontal();var n=this._data.series;var s=this._data.color;var h;var p=A.PRIMARYONLY;if(this._data.forecastValues&&this._data.forecastValues.metaData&&this._data.forecastValues.metaData.length>0){p=A.PRIMARYWIDTH}var d;if(i){d=e.select("."+c.CSS.CLASS.DATAPOINT_GROUP).node()}else{d=T(e,c.CSS.CLASS.DATAPOINT_GROUP)}var f;var v;var g;var m={color:[]};var y=0;var _,b;var x,S;var D=this._categoryPosFn();var w=this.__barSize();var C=w*(1-p)/2;var z;var L=this._getScaleValue(0);var P=.15*w;var k=this._data.actualValues.scale.getDomain();var E=Number(k[0]<0);var I=Number(k[1]>0);for(var O=0;O<n.length;++O){x=n[O];var R=x.rIndex==null?O:x.rIndex;var N=R%this._data.actualValues.metaData.length;m=this._getInitialColorDomain(s,m,R);for(y=0;y<x.length;++y){h=this._getExtraData(O,y);S=x[y]||{};f=!u.isNoValue(S.actualValues)||!u.isNoValue(S.additionalValues)||!u.isNoValue(S.targetValues)||!u.isNoValue(S.forecastValues);z={min:L,max:Number.NEGATIVE_INFINITY};if(i){v=o.find(d,y)}else{v=t.create("g");v.setAttribute("class",c.CSS.CLASS.DATAPOINT+" "+c.CSS.CLASS.MORPHABLEDATAPOINT+" "+c.CSS.CLASS.DATAPOINTDEFAULT)}g={horizontal:a,realBarSize:w,isUpdate:i,primaryOffset:C,primaryPercentage:p,parent:e.node()};g.categoryPos=D(O,y);m=this._adjustColorDomain(S,N,m);h.actual=m.actual;h.additional=m.additional;h.forecast=m.forecast;h.target=this._data.targetValues&&this._data.targetValues.metaData&&this._data.targetValues.metaData.id;this._renderOnePoint(S,m,h,g,v,z);delete g.stroke;delete g.strokeWidth;if(f&&z.max!==Number.NEGATIVE_INFINITY){var M=this._getItemMinMax(y,O,true);var B=z.max;var V=B-z.min;V+=(E+I)*P;if(a){if(B>this._realSize.width){B=this._realSize.width}g.width=V;g.height=w;g.y=g.categoryPos;g.x=z.min-E*P}else{if(B>this._realSize.height){B=this._realSize.height}g.width=w;g.height=V;g.x=g.categoryPos;g.y=this._realSize.height-B-I*P}g.fill="transparent";if(i){_=v.querySelector(".v-eventArea");_=this._updateBulletBar(_,g)}else{_=l({graphic:g,effectManager:this._effectManager});_.setAttribute("class","v-eventArea");_.setAttribute("stroke","transparent");v.appendChild(_)}_.setAttribute("transform","translate("+g.x+", "+g.y+")");b=S.dp;o.setDataPointId(v,b.id);o.setDataId(v,y);r.setContext(v,b.context());r.setAdditionCtx(v,b.additionCtx());r.setData(v,h);d.appendChild(v)}}}};x.prototype.getRealSizeByFixedDPSize=function(e){return e*this.__barSizeRatio()*this._categoryCount()};x.prototype._getItemMinMax=function(e,t,i){var a=(this._data.series[t]||[])[e];var r=a["actualValues"];var o=a["additionalValues"];var n=a["forecastValues"];var l=d.isNumber(r)&&d.isNumber(o)?o+r:undefined;var s=[r,o,l,n,0];if(i){s.push(a["targetValues"])}s=s.filter(d.isNumber);var u=Math.min.apply(null,s);var c=Math.max.apply(null,s);return{max:c,min:u}};x.prototype.getDataPointPosition=function(e,t){e=e||0;var i=this._getItemMinMax(t,e);var a=this._getScaleValue(i.max);var r=this._getScaleValue(i.min);var o=a-r;var n=this._categoryPosFn()(e,t);var l=this.__barSize();if(this.isHorizontal()){return{x:r,y:n,height:l,width:o}}else{return{y:this._realSize.height-a,width:l,x:n,height:o}}};x.prototype._categoryPosFn=function(){var e=this.__barSizeRatio();var t=this._getCategoryWidth(),i=this.__barSize(t,e),a=(t-i*e)/2,r=i/3;return function(e,o){return e*(i*9/8)+r+o*t+a}};x.prototype.__barSize=function(e,t){var i=e||this._getCategoryWidth(),a=t||this.__barSizeRatio(),r=this.__fixedBarSize();return Math.min(i/a,r.max)};x.prototype.__barSizeRatio=function(){return(this._data.series.length-1)/8+this._data.series.length+2/3};x.prototype.__fixedBarSize=function(){var e=this._properties;var t=e.get("dataPointSize.min")||e.getDefault("dataPointSize.min"),i=e.get("dataPointSize.max")||e.getDefault("dataPointSize.max");if(t>i){i=e.getDefault("dataPointSize.max");t=e.getDefault("dataPointSize.min")}return{min:Math.min(t,i),max:i}};x.prototype._getExtraData=function(e,t){return{color:{}}};x.prototype.getZoomLevel=function(){if(this.isHorizontal()){return this._realSize.height/this._size.height}else{return this._realSize.width/this._size.width}};x.prototype.destroy=function(){x.superclass.destroy.call(this);this._gridlineScale=null;this._realSize=null};m.register(_.DATAPOINT_NAVIGATOR,_.BULLET,y);return x});define("sap/viz/chart/components/plotareas/BulletPlotArea",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/components/plotareas/XYPlotArea","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/axis/CategoryAxis","sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/components/plots/BulletPlot","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/util/TextUtils"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f){var v=function(e,t){this._valueAxisPosition=e.propertyManager().get("valueAxis.layout.position");if(["top","bottom"].indexOf(this._valueAxisPosition)===-1){this._valueAxisPosition=e.propertyManager().getDefault("valueAxis.layout.position")}v.superclass.constructor.apply(this,arguments)};i.extend(v,o);v.prototype._init=function(){this._plot=s.create(this._renderType,u,this.runtime(),this._getPlotOptions());this.setChild("plot",this._plot,{position:"center"});this._plot.getDispatch().on("reRenderComplete.plotarea",this._reRenderComplete.bind(this));var e=this._plot.isHorizontal();var i=!this._properties.get("interaction.noninteractiveMode");if(e){this.setLayoutSequence(["bottom","top","left","right"]);this._categoryAxis=new l(this.runtime(),{name:"categoryAxis"});this.setChild("categoryAxis",this._categoryAxis,{position:"left"});this._valueAxis=new n(this.runtime(),{name:"valueAxis"});this.setChild("valueAxis",this._valueAxis,{position:this._valueAxisPosition});if(i){this._hScrollbar=new h(this.runtime(),{name:"plotArea.scrollbar"});this.setChild("scrollbar2",this._hScrollbar,{position:"bottom"})}}else{this.setLayoutSequence(["left","right","bottom","top"]);this._categoryAxis=new l(this.runtime(),{name:"categoryAxis",hasScrollbar:i});this.setChild("categoryAxis",this._categoryAxis,{position:"bottom"});if(i){this._hScrollbar=this._categoryAxis.getChild(t.AXIS.SCROLLBAR_NAME).module}this._valueAxis=new n(this.runtime(),{name:"valueAxis"});this.setChild("valueAxis",this._valueAxis,{position:"left"})}if(i){this._vScrollbar=new h(this.runtime(),{name:"plotArea.scrollbar"});this.setChild("scrollbar",this._vScrollbar,{position:"right"})}this.getZoomer().init({main:this,plot:this._plot,axisByDirection:{x:e?[this._valueAxis]:[this._categoryAxis],y:e?[this._categoryAxis]:[this._valueAxis]},isHorizontal:e})};v.prototype.updateValueScale=function(){var e=this._data;var t=this._roughSize.width;var i=this._roughSize.height;if(!e||t<=0||i<=0){return e}var a=[0,1];if(this._plot.isHorizontal()){a[1]=t}else{a[1]=i}a[1]*=.8;var r;var o=e;var n=[this._data.actualValues.minValue,this._data.actualValues.maxValue];if(n[0]===0&&n[1]===0){n=null}r=this._calcValueAxisScale("actualValues",a,n);e.actualValues.scale=r.scale;e.actualValues.tickHint=r.tickHint;e.actualValues.scale.setRange([0,1]);this._valueAxis.setData(e.actualValues);return o};v.prototype._isHorizontal=function(){return this._plot.isHorizontal()};return v});define("sap/viz/chart/chains/BulletChains",["sap/viz/chart/chains/BaseChains","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/binding/BindingManager","sap/viz/framework/common/util/BulletUtils","sap/viz/chart/chains/ChainUtils"],function(e,t,i,a,r,o,n){var l=["GetDimensionsFromFlattable","GetContext","OnBindingFinished","OnBindingStart"];var s=e.extend("bullet",l);function u(e,t,a,r,n){var l=r.color?r.color.rowArray.length:1,s=r.actualValues.metaData.length,u=r.categoryAxis.rowArray.length;var c=[];for(var h=0;h<l;h++){for(var p=0;p<s;p++){var d=[];c.push(d);for(var f=0;f<u;f++){var v=a.reduce(function(e,t){var a;if(!r.color){a=r[t].values[f][p]}else{a=r[t].values[f][h]}if(!i.isExist(a)){e[t]=undefined}else if(i.isArray(a)){e[t]=a[p]}else{e[t]=a}return e},{});d.push(v)}}}if(n){c.trellisRow=n.trellisRow;c.trellisColumn=n.trellisColumn}r.series=c;o.bulletSetMinMax(r)}s.bulletGetBindingSeries=n.generateSeriesGetter(u);s.bulletGetMeasuresFromFlattable=function(e,t,i,r,o,l){var u=n.getMetadata(e).fields;s.parsedData=n.getData(e,r,s.parsedData);for(var c=0;c<t.length;c++){for(var h=0;h<u.length;h++){if(t[c]===u[h].id){var p=n.handleMeasure(e,t,i,s.parsedData,s.multiDimensionIndex,{isBullet:true});var d=p.measureArray;var f=a.transpose(d);var v=f.map(function(e){return a.extent(e)});var g=n.buildMetaData(e,t);var m=p.multiArray;var y={values:m,categorySum:n.sumByCategory(m),range:v,metaData:g};return y}}}return null};Object.keys(s).forEach(function(e){r.registerChain(e,s[e])});return s});define("sap/viz/chart/dynamicScales/BulletDyScaleProcessor",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/DynamicScaleRepository","sap/viz/chart/dynamicScales/StackedDyScaleProcessor"],function(e,t,i,a){function r(e,t,i,a){r.superclass.constructor.apply(this,arguments);this._mainValue="actualValues"}e.extend(r,a);["bullet","vertical_bullet","timeseries_bullet"].forEach(function(e){i[e]=r});r.prototype.getValue=function(e){var i=[e.actualValues,e.additionalValues,e.forecastValues,e.targetValues].filter(t.isNumber);return Math.min.apply(null,i)};return r});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForBullet",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/ColorUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler","sap/viz/framework/interaction/BehaviorManager","sap/viz/chart/components/util/ChartTypeUtils"],function(e,t,i,a,r,o,n,l,s){var u=["info/bullet","info/vertical_bullet","info/trellis_bullet","info/trellis_vertical_bullet"];var c=["info/timeseries_bullet"];var h=u.concat(c);var p=4;var d=e.CSS.CLASS;var f=function(e,i,n){var l,u;var c=a.getData(i);var h=c.color;var p=i.querySelector(".v-forecast");var d=c.isZeroValue;var f=e._getRenderType();var g=s.getChartTypeProperty(f).isVerticalRender;var m,y,_={};o.extend(true,_,e.getProperties().get("interaction."+n.bStatus));_.name="interaction."+n.bStatus;var A=e.getProperties().get(_.name);var b=e.isHorizontal()?"width":"height";if(n.bShow){if(_.stroke.visible===true||n.bKeyboard){var S=e.getProperties().get("interaction.keyboard");S.color=e.getEffectManager().register({fillColor:S.color});S.isZeroValue=d;S.isVerticalRender=g;S.isAllValueNegative=c.isAllValueNegative;S.isZeroOnFirstTab=c.isZeroOnFirstTab;if(p){if(n.bKeyboard){x(e,i,p,S,h)}else{v(e,i,p,A,"#999999",n.bSelected)}}var D=true;for(y in h){if(h.hasOwnProperty(y)){var w=d3.select(i).select("."+y);var C=a.getData(w.node())||{};if(parseFloat(w.attr(b))!==0&&!C.reshaped){D=false;break}}}for(y in h){if(h.hasOwnProperty(y)&&y!=="v-forecast"){l=h[y];if(l.pattern==="noFill"){m=i.querySelector("."+y+"-noFill")}else{m=i.querySelector("."+y)}if(m){if(n.bKeyboard||D){x(e,i,m,S,h)}else{var T=r.fromCSSColor(h[y].color.toLowerCase());if(T){T.r=parseInt(T.r*.7,10);T.g=parseInt(T.g*.7,10);T.b=parseInt(T.b*.7,10);v(e,i,m,A,T.toString(),n.bSelected)}}}}}}}else{var z=e.getProperties().get("plotArea.dataPoint.stroke");if(p){p.removeAttribute("stroke");p.removeAttribute("stroke-width");p.removeAttribute("stroke-dasharray");p.removeAttribute("shape-rendering")}for(y in h){if(h.hasOwnProperty(y)){l=h[y];if(l.pattern==="noFill"){m=i.querySelector("."+y+"-noFill");u=1}else{m=i.querySelector("."+y);u=h[y].strokeWidth}if(m){var L=a.getData(m)||{};if(L.reshaped){m.setAttribute(b,"0")}m.removeAttribute("stroke-dasharray");m.removeAttribute("shape-rendering");if(l.strokeWidth){if(z&&z.visible===true){m.setAttribute("stroke",z.color)}else{m.setAttribute("stroke","#ffffff")}m.setAttribute("stroke-width",u)}else{m.removeAttribute("stroke");m.removeAttribute("stroke-width")}}}}}i.setAttribute("fill-opacity",t.isExist(A)&&t.isExist(A.opacity)?A.opacity:1);i.setAttribute("stroke-opacity",t.isExist(A)&&t.isExist(A.opacity)?A.opacity:1)};function v(e,t,a,r,o,n){var l=i.getColors(e,t,r.stroke.color,o);if(l.customizedColor){a.setAttribute("stroke",l.customizedColor)}else{a.setAttribute("stroke",l.defaultColor)}a.setAttribute("stroke-width",n?i.getWidth(r.stroke.width,1):i.getWidth(r.stroke.width,2));a.removeAttribute("stroke-dasharray");a.removeAttribute("shape-rendering")}function g(e,t,i){var r=a.getData(e)||{};if(r.reshaped){e.setAttribute("width",0)}if(i.isZeroOnFirstTab){if(parseFloat(e.getAttribute("width"))===0){e.setAttribute("width",p);r.reshaped=true;t.x=i.isAllValueNegative?-1:1}}a.setData(e,r);return t}function m(e,t,i){var r=a.getData(e)||{};if(r.reshaped){e.setAttribute("height",0)}if(i.isZeroOnFirstTab){if(parseFloat(e.getAttribute("height"))===0){e.setAttribute("height",p);r.reshaped=true;t.y=i.isAllValueNegative?1:-1}}a.setData(e,r);return t}function y(e){var t=e.lastIndexOf("(");var i=e.lastIndexOf(")");return e.substr(t+1,i-t-1)}function _(e,i,r){var o=e.getAttribute("transform").split("scale")[0];var n={x:1,y:1};if(t.isExist(e.getAttribute("transform").split("scale")[1])){var l=y(e.getAttribute("transform").split("scale")[1]);if(l.indexOf(",")<0){n={x:parseFloat(l),y:parseFloat(l)}}else{n={x:parseFloat(l.split(",")[0]),y:parseFloat(l.split(",")[1])}}}var s=i.isVerticalRender?m:g;n=s(e,n,i);var u=A(e,r);var c=t.isExist(A(e,r));if(c){if(t.isExist(u)){if(u.getAttribute("transform").indexOf("scale")<0){e.setAttribute("transform",o+"scale"+"("+n.x+","+n.y+")")}}var h=a.getData(e)||{};if(h.reshaped){e.setAttribute("fill","none")}}return e}function A(e,t){var i=e.previousSibling||e.nextSibling;if(t){if(d3.select(i).attr("class")in t){return i}}return e}function b(e,t,i){if(t.isZeroValue){var r=d3.select(e).attr("class")==="v-forecast";if(!r){var o=t.isVerticalRender?"height":"width";var n=a.getData(e)||{};if(parseFloat(A(e,i).getAttribute(o))===0||n.reshaped){_(e,t,i)}}}return e}function x(e,t,a,r,o){var n=i.getColors(e,t,r.color);b(a,r,o);a.setAttribute("stroke",n.customizedColor);a.setAttribute("stroke-width",i.getWidth(r.width,1));a.setAttribute("stroke-dasharray","1, 1");a.setAttribute("shape-rendering","crispEdges")}var S=[{id:"selectDataPoint_bullet",triggerEvent:{name:"selectDataPoint",supportedChartTypes:h},handler:function(e,t){t.fireEvent(e,true);var a=i.turnToArray(e.data.targets);a.forEach(function(e){if(t.getProperties().get("interaction.selected.stroke.visible")===true){f(t,e,{bShow:true,bSelected:true,bStatus:"selected"})}else{f(t,e,{bShow:false,bSelected:false,bStatus:"default"})}})}},{id:"deselectDataPoint_bullet",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:h},handler:function(e,t){t.fireEvent(e,true);var a=i.turnToArray(e.data.targets);a.forEach(function(i){if(e.data.isAnyOtherSelected){if(t.getProperties().get("interaction.deselected.stroke.visible")===true){f(t,i,{bShow:true,bSelected:true,bStatus:"deselected"})}else{f(t,i,{bShow:false,bSelected:true,bStatus:"deselected"})}}else{f(t,i,{bShow:false,bSelected:true,bStatus:"default"})}})}},{id:"hoverOnDataPoint_bullet",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:h},handler:function(e,t){t.fireEvent(e,true);var a=i.turnToArray(e.data.targets);a.forEach(function(i){f(t,i,{bShow:true,bSelected:false,bStatus:"hover",bKeyboard:!!e.data.byKeyboard})})}},{id:"unhoverOnDataPoint_bullet",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:h},handler:function(e,t){t.fireEvent(e,true);var a=i.turnToArray(e.data.targets);a.forEach(function(e){if(d3.select(e).classed(d.DATAPOINTSELECTED)){var i=t.getProperties().get("interaction.selected.stroke.visible");if(i===true){f(t,e,{bShow:true,bSelected:true,bStatus:"selected"})}else{f(t,e,{bShow:false,bSelected:true,bStatus:"selected"})}}else{var a=t.getStatus("selectedDataPoints");if(a.length){if(t.getProperties().get("interaction.deselected.stroke.visible")===true){f(t,e,{bShow:true,bSelected:true,bStatus:"deselected"})}else{f(t,e,{bShow:false,bSelected:true,bStatus:"deselected"})}}else{f(t,e,{bShow:false,bSelected:true,bStatus:"default"})}}})}},{id:"clearPlot_bullet",triggerEvent:{name:"clearPlot",supportedChartTypes:h},handler:function(e,t){t.fireEvent(e,true);var i=t.getNodes(t.NodeType.DATA_POINT,false);if(!i||!i.length){return}var a=e.data.isGray;i.forEach(function(e){if(a){f(t,e,{bShow:true,bSelected:true,bStatus:"deselected"})}else{f(t,e,{bShow:false,bSelected:false,bStatus:"default"})}})}},{id:"click_on_non_selection_bullet",triggerEvent:{name:"click",supportedChartTypes:h,excludeTargets:i.getDeselAllExTargets()},handler:function(e,t){n.clickOnNonSelection(e,t,c)}},{id:"clearPlot_time_bullet",triggerEvent:{name:"clearPlot",supportedChartTypes:c},handler:function(e,t){n.clearForTime(e,t)}},{id:"hover_range_selection_bullet",triggerEvent:{name:"hover",supportedChartTypes:c,targets:"v-m-action-layerrange"},handler:function(e,t){n.showDetailForRangeSelectionWhenHover(e,t)}},{id:"update_range_selection_effect_bullet",triggerEvent:{targets:"v-m-action-layerrange",name:"down",supportedChartTypes:c},handler:function(e,t){n.updateRangeEffect(e,t)}},{id:"recover_range_selection_effect_bullet",triggerEvent:{targets:"v-m-action-layerrange",name:"up",supportedChartTypes:c},handler:function(e,t){n.recoverRangeEffect(e,t)}}];l.registerAll(S);return S});define("sap/viz/chart/views/BulletChartView",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/chart/views/ChartView","sap/viz/chart/components/legend/BulletLegend","sap/viz/chart/components/plotareas/BulletPlotArea","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/scales/ScalesFactory","sap/viz/chart/scales/BulletColorScale","sap/viz/chart/chains/BulletChains","sap/viz/chart/dynamicScales/BulletDyScaleProcessor","sap/viz/chart/behavior/config/DataPointBehaviorConfigForBullet"],function e(t,i,a,r,o,n,l,s,u,c){s.register("bullet","color",u);var h=function(e,t){h.superclass.constructor.apply(this,arguments);this._supportLazyRender=true};t.extend(h,a);h.prototype.setSize=function(){if(this._plotArea&&this._plotArea.setRoughSize){this._plotArea.setRoughSize.apply(this._plotArea,arguments)}h.superclass.setSize.apply(this,arguments)};h.prototype._getDataItems=function(){return["actualValues","additionalValues","color","categoryAxis","targetValues","forecastValues","series","trellisRow","trellisColumn"]};h.prototype._createPlotContainer=function(e){this._plotArea=new o(this.runtime(),{renderType:this._renderType});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};h.prototype._getLegendDefinition=function(){return[r]};h.prototype._getLegendInitOptions=function(){return[{noFillSupport:true,targetLineDirection:/vertical_bullet|timeseries_bullet/.test(this._options.renderType)?i.DIRECTION.HORIZONTAL:i.DIRECTION.VERTICAL}]};h.prototype.calculatePaddingInPX=function(e){var t=h.superclass.calculatePaddingInPX.apply(this,arguments);if(e.get("title.visible")===false&&this._plotArea&&(this._plotArea._isHorizontal&&l.isExist(this._plotArea._isHorizontal())&&this._plotArea._isHorizontal()!==true)&&e.get("valueAxis.visible")===true){this.changePaddingTop(e,t)}return t};return h});define("sap/viz/chart/metadata/bindings/BulletBindings",[],function e(){var t=[{id:"trellisColumn",name:"IDS_TRELLIS_COLUMN",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.columnCategory"},{id:"trellisRow",name:"IDS_TRELLIS_ROW",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.rowCategory"},{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"layout.category"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"mark.color"},{id:"actualValues",name:"IDS_PRIMARY_VALE",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"additionalValues",name:"IDS_ADDITIONAL_VALE",type:"Measure",min:0,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"targetValues",name:"IDS_TARGETVALUES",type:"Measure",min:0,max:Number.POSITIVE_INFINITY,role:"mark.target"},{id:"forecastValues",name:"ID_FORECAST_VALUES",type:"Measure",min:0,max:Number.POSITIVE_INFINITY,role:"mark.forecast",description:"This is deprecated"}];return t});define("sap/viz/chart/components/datalabels/PieDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/ArrayUtils"],function e(t,i,a,r,o,n,l,s,u,c,h,p){var d="measureNames";var f=function(e,t){f.superclass.constructor.apply(this,arguments)};t.extend(f,i);f.prototype._getDataLabelInfo=function(e){var t=d3.select(e.childNodes[0]).datum();var i=(t.endAngle-t.startAngle)/(2*Math.PI);var r=a.getContext(e);var o=this._data.size.metaData;var n=r[d]||o[0].id;var l;for(var s=0;s<o.length;++s){if(o[s].id===n){l=o[s].name;break}}return{key:n,value:r[n],name:l,percentage:i<1e-6?0:i}};f.prototype._showProperty=function(e){if(!this._data||!this._data.color||!this._data.color.metaData){return false}var t=this._data.color.metaData;for(var i=0;i<t.length;i++){if(e===t[i].id&&!t[i].hidden){return true}}return false};f.prototype._buildDataLabelText=function(e,t,a,r,o){if(t.value===0&&!this.drawZero(o)){return null}return i.buildDataLabelText(this._properties,e,t,a,r,v,g,m.bind(this))};function v(e){var t=e.get("type");var i;if(t==="color"){i=["color"]}else if(t==="value"){i=["value"]}else if(t==="percentage"){i=["percentage"]}else{i=["color","percentage"]}return i}function g(e,t){var i=e.get("type");var a;if(i==="color"||i==="value"||i==="percentage"){a=t[0]}else{a=t[1]?t[0]+"   ("+t[1]+")":t[0]}return a}function m(e,t){var i=null;if(e&&t){if(t.key){var a=t.key;if(e.hasOwnProperty(a)){var o=0,n;for(var l in e){if(e.hasOwnProperty(l)&&l!==a&&this._showProperty(l)){if(l===d){if(!t.keepMND){continue}n=t.name||e[l]}else{n=e[l+r.DIMENSION_DISPLAYNAME_SUFFIX]||e[l]}if(o===0){i=n}else{i=i+"/"+n}o++}}}}}return i}f.prototype.removeExtraDataOfDataPoint=function(e,t){var i=t;if(e&&t){if(e.getData&&e.setData){var a=e.getData(t);if(a&&a.decoras){delete a.decoras;e.setData(t,a);i=t}}}return i};f.prototype._isKeepMND=function(){var e=this._data.color.metaData;var t=this._data.color.values;var i=false;var a=0;for(var r=0;r<e.length;++r){if(!e[r].hidden){++a}if(e[r].id===d){var o=p.unique(t[r],function(e){return e?e.toString():false});if(o&&o.length<2){i=true}}}return!(a>1&&i)};f.prototype.setExtraDataOfDataPoint=function(e,t,i){var a=t;if(e&&t&&i){if(e.getData&&e.setData){var r=e.getData(t);if(!r||o.isPlainObject(t)){r={}}r.decoras=i;e.setData(t,r);a=t}}return a};f.prototype.getLabelLineOffset=function(e){return e*u.DATALABEL.PIE_LINE_LABEL_OFFSET};f.prototype._reverseLineModeLocation=function(e,t,i){var a=this.getLabelLineOffset(t)+u.DATALABEL.PIE_LINE_OFFSET;var r={};r.x=i.x;r.y=i.y+i.height/2;if(e>0&&e<=Math.PI){r.x-=a}else{r.x+=i.width;r.x+=a}return r};f.prototype._adjustLineModeLocation=function(e,t,i,a,r){var o=this.getLabelLineOffset(i)+u.DATALABEL.PIE_LINE_OFFSET;var n={};n.x=t;n.y=a;if(e>0&&e<=Math.PI){n.x+=r.width/2;n.x+=o}else{n.x-=r.width/2;n.x-=o}return n};f.prototype._adjustOutsideLocation=function(e,t,i,a,r){var o={};o.x=i;o.y=a;if(e>=0&&e<=Math.PI/8||e>Math.PI/8*15&&e<=2*Math.PI){o.y-=r.height/2}else if(e>Math.PI/8&&e<=Math.PI/4){o.y-=r.height/2;o.x+=r.width/2}else if(e>Math.PI/4&&e<=Math.PI/4*3){o.x+=r.width/2}else if(e>Math.PI/4*3&&e<=Math.PI/8*7){o.y+=r.height/2;o.x+=r.width/2}else if(e>Math.PI/8*7&&e<=Math.PI/8*9){o.y+=r.height/2}else if(e>Math.PI/8*9&&e<=Math.PI/4*5){o.y+=r.height/2;o.x-=r.width/2}else if(e>Math.PI/4*5&&e<=Math.PI/4*7){o.x-=r.width/2}else{o.y-=r.height/2;o.x-=r.width/2}o.x+=this.getLabelLineOffset(t)*Math.sin(e);o.y-=this.getLabelLineOffset(t)*Math.cos(e);return o};f.prototype.renderDataLabelLine=function(e){var t;if(e.length>0){var i;i=c.getData(e[0].dataPoint);t=i.r;if(this.getLocationMode(t)===u.DATALABEL.LOCATIONMODE_LINE){var a;for(a=0;a<e.length;a++){var r=0;var o=0;i=c.getData(e[a].dataPoint);var n=d3.select(e[a].node).text();if(!n||n.length<=0){continue}var s=l.getBBox(e[a].node);var h=this._reverseLineModeLocation(i.midAngle,t,s);var p={};p.x=-e[a].originalCenterX+h.x;p.y=-e[a].originalCenterY+h.y;var d={};d.x=p.x+i.r*Math.sin(i.midAngle);d.y=p.y-i.r*Math.cos(i.midAngle);var f={};f.y=h.y;f.x=h.x;if(i.midAngle>0&&i.midAngle<=Math.PI){f.x+=u.DATALABEL.PIE_LINE_OFFSET}else{f.x-=u.DATALABEL.PIE_LINE_OFFSET}var v="M"+d.x+" "+d.y;v+=" L"+h.x+" "+h.y;v+=" L"+f.x+" "+f.y;var g=this._properties.get("line.color");d3.select(e[a].node).append("path").attr("d",v).attr("stroke",g).attr("fill","none").attr("stroke-width","1")}}}};f.prototype.getRadiusPercentage=function(e){var t=this._properties.get("distance");var i=this._properties.getDefault("distance")+1;var a=.5;var r=false;if(o.isString(t)&&t.indexOf("px")>=0){r=true}t=parseFloat(t);if(o.isNumber(t)){i=a;if(t>=0){if(r){i=(e+t)/e}else{i=1+t}}}return i};f.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=this._properties.get("distance");i=parseFloat(i);return i>=0};f.prototype._computeDataLabelTranslate=function(e,t,i,a){var r=d3.select(e.childNodes[0]).datum();var o=r.startAngle;var n=r.endAngle;var l=r.innerRadius;var s=r.outerRadius;var c=this.getRadiusPercentage(s);var h=(o+n)/2;var p=Math.sin(h-Math.PI/2);var d=Math.cos(h-Math.PI/2);var f,v;if(this._options.isDonut){var g;if(c<1){g=l+c*(s-l)}else{g=c*s}f=g*d;v=g*p}else{f=c*s*d;v=c*s*p}var m=[];m.originalCenterX=f;m.originalCenterY=v;var y;if(this.getLocationMode(s)===u.DATALABEL.LOCATIONMODE_OUTSIDE){y=this._adjustOutsideLocation(h,s,f,v,a);f=y.x;v=y.y}else if(this.getLocationMode(s)===u.DATALABEL.LOCATIONMODE_LINE){y=this._adjustLineModeLocation(h,f,s,v,a);f=y.x;v=y.y}f+=t.e;v+=t.f;m[0]=f-(a.x+a.width/2);m[1]=v-(a.y+a.height/2);return m};f.prototype.getLocationMode=function(e){var t=this.getRadiusPercentage(e);var i=this._properties.get("line.visible");var a=u.DATALABEL.LOCATIONMODE_INSIDE;if(t>=1){if(i){a=u.DATALABEL.LOCATIONMODE_LINE}else{a=u.DATALABEL.LOCATIONMODE_OUTSIDE}}return a};f.prototype.sortDataLabelInfos=function(e){e.sort(function(e,t){var i=e.info.value-t.info.value;return i})};f.prototype.truncateText=function(e){var t;if(e.length>0){var i;i=c.getData(e[0].dataPoint);t=i.r;if(this.getLocationMode(t)===u.DATALABEL.LOCATIONMODE_INSIDE){var a=this._properties.get("type");if(a==="percentage"||a==="value"){return}for(var r=e.length-1;r>=0;r--){var o=e[r].dataPoint;var s=e[r].node;var p=o.getBoundingClientRect();var d=s.getElementsByTagName("text");if(!d||d.length===0){continue}d=d[0];var f=d.textContent;var v=this._getStyle(o);var g={};var m=this.runtime().envManager();g.reverseDots=m&&m.reverseDots();if(a==="color"){n.ellipsis(f,d,p.width,v.cssString,g)}else{var y=f.split(" ")[0];var _=y.substr(0,3)+"...";var A=f.substring(y.length);var b=n.canvasMeasure(A,v["font-size"],v["font-weight"],v["font-family"]).width;var x=n.canvasMeasure(_,v["font-size"],v["font-weight"],v["font-family"]).width;var S=p.width-b;var D=n.ellipsis(y,d,S>x?S:x,v.cssString,g);d.textContent=D+A}var w=l.getBBox(s);var C=h.getTransformToElement(o,o.parentNode.parentNode);var T=this._computeDataLabelTranslate(o,C,this._labelPosition,w);s.setAttribute("transform","translate("+T[0]+","+T[1]+")");var z=T[0],L=T[1];e[r].left=z+w.x;e[r].right=z+w.x+w.width}}}};return f});define("sap/viz/chart/components/renderers/PieRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics"],function(e,t){var i=function(i){var a=i.graphic;var r=e.create("path");var o=0;if(a.innerRadius){o=a.innerRadius}var n=d3.svg.arc().innerRadius(o).outerRadius(a.outerRadius).startAngle(a.startAngle).endAngle(a.endAngle)();var l=i.effectManager.register({drawingEffect:a.drawingEffect,graphType:"sector",direction:"vertical",radius:a.outerRadius,fillColor:a.color});r.setAttribute("fill",l);r.setAttribute("d",n);if(a.stroke){r.setAttribute("stroke",a.stroke);r.setAttribute("stroke-width",a.strokeWidth)}t.setContext(r,{innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle});return r};i.expose={renderer:i};return i});define("sap/viz/chart/components/util/ContextUtil",["sap/viz/framework/common/util/Constants"],function e(t){var i={isEqualArray:function(e,t){if(!e||!t){return false}var i=true;if(e.length===t.length&&t.length>0){for(var a=0;a<e.length;a++){if(e[a]!==t[a]){i=false;break}}}else{i=false}return i},getUniqueFieldName:function(e){if(!e){return null}var t=null;if(e.hasOwnProperty("id")){t=e.id}else if(e.hasOwnProperty("name")){t=e.name}return t},getContextObjByFieldsArray:function(e,t){if(!e||!t||e&&e.length<1||t&&t.length<1){return null}var a=null;if(e&&t){var r=e.length;var o=t.length;if(r>=o&&o>0){for(var n=0;n<r;n++){var l=e[n];if(l&&l.length>0){var s=false;for(var u=0;u<l.length;u++){var c=l[u];if(c&&c.length>0&&c.length===o){if(i.isEqualArray(c,t)){s=true}else{if(s){for(var h=0;h<o;h++){if(!a){a={}}if(t[h]){a[t[h]]=l[u][h]}}break}}}else{break}}if(s){break}}else{break}}}}return a},filterDimensionContext:function(e,t){if(!e||!t){return null}var i=null;if(e.length>0){for(var a in t){if(t.hasOwnProperty(a)){if(!i){i={}}var r=true;for(var o=0;o<e.length;o++){if(a===e[o]){e.splice(o,1);r=false;break}}if(!r){continue}i[a]=t[a]}}}return i},getDimensionKeyAndValueString:function(e){if(!e){return null}var t=null;if(e&&typeof e==="object"){var i=0;for(var a in e){if(e.hasOwnProperty(a)){var r=a+"="+e[a];if(r){++i;if(i>1){t=t+"&"+r}else{t=r}}}}}return t},getDimensionKeyAndValueStringFromAxes:function(e,t){if(!e||!e._data||!e._fields){return null}var a=null;if(e._data.length>0&&e._fields.length>0&&t<e._data.length){var r=e._fields.length;var o=e._fields;var n=e._data;if(n[t]&&n[t].val){var l=0;var s=null;var u=null;var c=i.getUniqueFieldName(o[l]);for(;l<r;l++){if(o[l]&&c){if(!a){a={}}u=c;s=n[t].val[l];a[u]=s}}}}return a},isEmptyObj:function(e){if(!e){return true}var t=true;if(e){for(var i in e){if(e.hasOwnProperty(i)){t=false;break}}}return t},getHighlightContextIndexOfAxes:function(e,t){if(!e||!t||i.isEmptyObj(t)){return-1}var a=-1;if(e&&e._data&&e._data.length>0&&e._fields&&e._fields.length>0){var r=e._fields;var o=r.length;var n=0;var l=e._data;var s=this.getDimensionKeyAndValueString(t);var u=function(e,t){var a=null;for(var r=0;r<o;r++){var n=i.getUniqueFieldName(e._fields[r]);if(n){var l=n+"="+e._data[t].val[r];if(r>0){a=a+"&"+l}else{a=l}}}return a};if(l&&l.length>0&&o){for(;n<l.length;n++){if(s===u(e,n)){a=n;break}}}}return a},equalCtx:function(e,t){var i=Object.keys(e),a=Object.keys(t);return i.length>0&&i.every(function(i){return e[i]===t[i]})},match:function(e,t){if(!e){return false}if(!Array.isArray(e)){e=[e]}return e.some(function(e){if(!e){return true}return i.equalCtx(e,t)})},getContextInfo:function(e,t){var a=e;if(!Array.isArray(t)){t=[t]}var r;for(var o=0,n=t.length;o<n;o++){var l=t[o],s=l.ctx,u=l.paras;if(!s){r=u}}var c=this._parameters,h,p=-1,d,f;for(var v=0,g=t.length;v<g;v++){var m=t[v],y=m.ctx,_=m.paras;if(!y){f=v}else if(i.match(y,a)){d=0;for(var A in y){if(y.hasOwnProperty(A)){d++}}if(p<d){p=d;f=v}}}if(t[f]){return t[f].paras}return r},getContextDisplayKey:function(e){return e+".d"},getContextValueKey:function(e){return e+".v"},getContextDisplayValue:function(e){return e&&e.hasOwnProperty("d")?e["d"]:e&&e.hasOwnProperty("v")?e["v"]:undefined},getContextValue:function(e){return e&&e.hasOwnProperty("v")?e["v"]:undefined},enableDisplayContext:function(e){var t=false;if(e){for(var i in e){if(e.hasOwnProperty(i)&&e.hasOwnProperty(i+".d")){t=true;break}}}return t},enableObjectContext:function(e){var t=false;if(e){for(var i in e){if(e.hasOwnProperty(i)&&(e.hasOwnProperty(i+".d")||e.hasOwnProperty(i+".parsedValue"))){t=true;break}}}return t},equalCtxWithoutDisplayName:function(e,t,i){var a=true;for(var r in e){if(e.hasOwnProperty(r)){for(var o=0;o<i.length;o++){if(r===i[o].id){if(e[r]!==t[o]){a=false}break}}if(o>=i.length){a=false;break}}}return a},equalCtxWithColorDomain:function(e,t,i){var a=true;var r=e.length;var o=0;for(var n in t){if(t.hasOwnProperty(n)){for(var l=0;l<i.length;l++){if(n===i[l].id){if(t[n]===e[l]){o++}break}}}}return r===o},equalCtxExtend:function(e,t,a){if(!i.enableObjectContext(e)){return i.equalCtxWithColorDomain(t,e,a)}var r=false;if(e&&t&&a&&a.length===t.length){if(t.length>0){var o=null;var n=null;var l=null;var s=null;var u=-1;var c={};var h=null;var p=null;var d=null;r=a.every(function(a){o=a.id;n=a.type;var r=false;if(n==="Dimension"){u++;h=i.getContextDisplayKey(o);if(e.hasOwnProperty(o)){s=e[o];c=t[u];d=i.getContextValue(c);if(s!==undefined&&d!==undefined&&s!==null&&d!==null){r=s===d}}}return r})}}return r},getContextDisplayNames:function(e){var t=[];if(e&&e.length){e.forEach(function(e){if(e&&e.hasOwnProperty("id")&&e.hasOwnProperty("type")&&e.type==="Dimension"){t.push(i.getContextDisplayKey(e.id))}})}return t},getContextRawValue:function(e){var i=null;if(e){for(var a in e){if(e.hasOwnProperty(a)&&a!==t.BINDING.CONTEXT_ID_NAME){if(!i){i=e[a]}else{i+="/"+e[a]}}}}return i},getDisplayValueOfContext:function(e,t){if(!i.enableObjectContext(e)){return i.getContextRawValue(e)}var a=null;if(e&&t&&t.length>0){t.forEach(function(t){var r=t.id;var o=i.getContextDisplayKey(r);var n=e[r];if(e.hasOwnProperty(o)){n=e[o]}if(n!=null){a=!a?n:a+"/"+n}})}return a}};return i});define("sap/viz/chart/components/accessibility/PieDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/ColumnDataPointNavigator"],function(e,t){function i(){i.superclass.constructor.apply(this,arguments);this._isAllValueNegative=false;this._allDataPoints=[];this._setupDataPointsMap()}e.extend(i,t);var a=i.prototype;a._setupDataPointsMap=function(){if(this._series){var e=0;var t=this._series.length;for(var i=0;i<t;i++){if(this._series[i][0].size<0){e++}}this._isAllValueNegative=e===t;for(var a=0;a<t;a++){if(!this._isAllValueNegative&&this._series[a][0].size<0){continue}else{this._allDataPoints.push(this._series[a][0].dp)}}}};a.getFirstStartPoint=function(){for(var e=0;e<this._series.length;e++){if(!this._isAllValueNegative&&this._series[e][0].size<0){continue}else{return this._series[e][0].dp}}};return i});define("sap/viz/chart/components/plots/PiePlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/datalabels/PieDataLabels","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/renderers/PieRenderer","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/ContextUtil","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/format/FormatManager","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/PieDataPointNavigator","sap/viz/chart/components/util/ChartConstants"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y){var _=function(e,t){_.superclass.constructor.apply(this,arguments);this._dataPointRenderer=l};t.extend(_,o);_.prototype.destroy=function(){_.superclass.destroy.call(this);this._dataPointRenderer=null;this._padding=null;this._outerRadius=null;this._innerRadius=null;this._dataSeries=null;this._pieLayout=null};_.prototype._getDataHandler=function(){return{size:new L}};_.prototype._getDataLabels=function(e,t){var i=s.extend({},this._options);i.name=e;return new r(t,i)};_.prototype._applyChanges=function(){var e=this._size.width,t=this._size.height;this._padding=S(e,t);this._outerRadius=this.calculateOuterRadius(e,t,null);this._innerRadius=this._options.isDonut?C(this._outerRadius,this._properties.get("innerRadiusRatio")):0;var i=true,a=[];var r=[];this._dataSeries=[];for(var o=0;o<this._data.series.length;o++){if(this._data.series[o]&&this._data.series[o][0]){r[o]=this._data.series[o][0].size;if(r[o]>0){i=false}}}for(o=0;o<r.length;o++){var n=r[o];if(u.isNoValue(n)||n<0&&!i){continue}a.push(n);this._dataSeries.push(this._data.series[o])}this._pieLayout=d3.layout.pie().sort(null)(a)};_.prototype._getSeries=function(){return this._dataSeries};_.prototype._applyDataPointRenderer=function(e,t){var i=this._properties.get("markerRenderer");if(i){return i(t,l.expose)}else{return _.superclass._applyDataPointRenderer.apply(this,arguments)}};_.prototype._drawDataPoint=function(e,t){var i=_.superclass._drawDataPoint.apply(this,arguments);var a=t.getConfig();if(a.isMatchedHighlightContext!==undefined&&a.isMatchedHighlightContext!==true){i.setAttribute("fill-opacity",1);i.setAttribute("class","")}return i};_.prototype.isFlexibleLayout=function(){return true};_.prototype._postRender=function(e){var t=this._size.width/2;var i=this._options&&this._options.inTrellis;var r=this.runtime().statusManager().get("legendGroup.isHorizontal");var o=i||r?this._size.height/2:this._outerRadius*x+this._padding;if(this.isFlexibleLayout()){o=this._size.height/2;if(o>t&&!(r&&this._properties.get("alignment.vertical")==="center")){o=t}}e.setAttribute("transform","translate("+t+", "+o+")");if(this._options.isDonut&&this._highlightContext){var n=p.getDisplayValueOfContext(this._highlightContext,this._data.color.metaData);var l=(this._highlightContextPosition.endAngle-this._highlightContextPosition.startAngle)/(2*Math.PI);var s=this._properties.get("dataLabel.formatString");var u=this._properties.get("dataLabel.type");var c,d;var f=false;if(this._data&&this._data.size&&this._data.size.metaData){c=this._data.size.metaData[0].id;d=this._data.size.metaData[0].formatString}if(!s){s=d;if(h.isArray(s)&&u==="percentage"){s=s[1]}}var g={key:c,value:l};var m=a.getFirstFormatPattern(s,g);m=m?m:v.getPercentagePattern(1);var y=v.format(l,m);var _={centerName:n,centerValue:y,properties:this._properties.get()};e.appendChild(z.call(this,_,this._highlightContext))}};_.prototype._computeDataLabelTranslate=function(e,t,i,a){var r=d3.select(e.childNodes[0]).datum();var o=r.startAngle;var n=r.endAngle;var l=r.innerRadius;var s=r.outerRadius;var u=(o+n)/2;var c=Math.sin(u-Math.PI/2);var h=Math.cos(u-Math.PI/2);var p,d;if(this._options.isDonut){p=(l+s)/2*h;d=(l+s)/2*c}else{p=.5*s*h;d=.5*s*c}p+=t.e;d+=t.f;return[p-(a.x+a.width/2),d-(a.y+a.height/2)]};_.prototype._getPosition=function(e,t,i){var a=this._pieLayout[e];if(isNaN(a.startAngle)||isNaN(a.endAngle)){a=null}return a};_.prototype._buildData=function(e){var t=e.graphic;var i;if(this._data.size.totalSum===0){i=1}else{i=e.rawData.size/this._data.size.totalSum}return{color:t.color,midAngle:t.startAngle/2+t.endAngle/2,startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,r:t.outerRadius,shape:"sector",percentage:i}};_.prototype._buildConfig=function(e,t,i){var a=this._data.color.scale.scale(e.color);var r;if(this._options.isDonut){var o=this._properties.get("highlight.highlightContext");if(o&&o.length>0){o=o[0];r=p.equalCtx(o,i);if(r===true){this._highlightContext=o;if(this._highlightContextPosition){this._highlightContextPosition.data+=t.data;this._highlightContextPosition.value+=t.value;this._highlightContextPosition.endAngle=t.endAngle}else{this._highlightContextPosition=t}}else{a=this._properties.get("highlight.unhighlightSliceColor")}}}return{graphic:{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:this._innerRadius,outerRadius:this._outerRadius,color:a,drawingEffect:this._properties.get("drawingEffect")},ctx:i,isMatchedHighlightContext:r,effectManager:this._effectManager}};var A=6,b=2.414;var x=1.08;var S=function(e,t){var i;var a=Math.min(e,t);if(a<A*2){if(a<A/4*2){if(a<A/8*2){i=0}else{i=A/8}}else{i=A/4}}else{i=A}return i};var D=function(e,t){return(e/2-t)/x};var w=function(e,t){var i=Math.max(e/2/(1+1/b),t*b);return Math.min(i,e/2-t)};_.prototype.calculateOuterRadius=function(e,t,i){var a=this._padding;if(this.isFlexibleLayout()){var r=this._properties.get("radius");if(!(h.isNumber(r)&&r>=0&&r<=.5)){r=this._properties.getDefault("radius")}return Math.min(t*r,e*r)}else{if(i){return Math.min(t/2,e/2)}return Math.min(D(t,a),w(e,a))}};var C=function(e,t){if(!h.isNaN(t)){return e*t}return e/b};var T=function(e,t,a,r){var o=20;var n=document.createTextNode(t);var l=i.create("tspan");var s=a&&a.hasOwnProperty("fontSize")?parseFloat(a["fontSize"])/2:o/2;l.setAttribute("class",r);l.appendChild(n);e.appendChild(l);return{node:l,offset:s}};var z=function(e,t){var a="v-donut-centername",r="v-donut-centervalue",o="centerName",n="centerValue",l="highlight";var s=6;var u=e.properties;var c=i.create("text");var h,d,v=0,g=0;var m,y;var _,A=u.highlight.contextInfos;if(A&&A.length>0){for(var b=0;b<A.length;b++){if(p.equalCtx(A[b].ctx,t)){_=A[b].paras.color;break}}}var x=0;var S=0;if(u.highlight.centerName.visible){y=u[l][o]["style"];m=T(c,e.centerName,y,a);if(m){h=m.node;v=m.offset;x=f.fastMeasure(e.centerName,y["fontSize"],y["fontWeight"],y["fontFamily"],y["fontStyle"]).width;h.style.fill=y["color"]||_;h.style.fontFamily=y["fontFamily"];h.style.fontSize=y["fontSize"];h.style.fontWeight=y["fontWeight"];h.style.fontStyle=y["fontStyle"]}}if(u.highlight.centerValue.visible){y=u[l][n]["style"];m=T(c,e.centerValue,y,r);if(m){d=m.node;g=m.offset;S=f.fastMeasure(e.centerValue,y["fontSize"],y["fontWeight"],y["fontFamily"],y["fontStyle"]).width;d.style.fill=y["color"]||_;d.style.fontFamily=y["fontFamily"];d.style.fontSize=y["fontSize"];d.style.fontWeight=y["fontWeight"];d.style.fontStyle=y["fontStyle"]}}if(h){h.setAttribute("x",-x/2);h.setAttribute("y",v-g-s/2)}if(d){d.setAttribute("x",-S/2);d.setAttribute("y",v+g+s/2)}var D=null;var w=this.runtime().envManager();if(w){D=w.textAnchor()}c.setAttribute("text-anchor",D);return c};var L=function(){};L.prototype.reset=function(){this._sum=0};L.prototype.getBase=function(e,t){return this._sum};L.prototype.add=function(e,t){this._sum+=t;return this._sum};L.prototype.destroy=function(){this._sum=null};g.register(y.DATAPOINT_NAVIGATOR,y.PIE,m);return _});define("sap/viz/chart/chains/PieChains",["sap/viz/chart/chains/BaseChains","sap/viz/chart/chains/YYChains","sap/viz/framework/binding/BindingManager"],function e(t,i,a){var r={};var o=["GetDimensionsFromFlattable","GetMeasuresFromFlattable","GetContext","OnBindingFinished","OnBindingStart"];r=t.extend("pie",o);r.pieGetBindingSeries=i.yyGetBindingSeries;Object.keys(r).forEach(function(e){a.registerChain(e,r[e])});return r});define("sap/viz/chart/dynamicScales/PieDyScaleProcessor",["sap/viz/framework/common/util/oo","sap/viz/framework/scale/DynamicScaleRepository","sap/viz/chart/dynamicScales/BaseColumnDyScaleProcessor"],function(e,t,i){function a(e,t,i,r){a.superclass.constructor.apply(this,arguments);this._mainValue="size"}t["pie"]=a;t["donut"]=a;e.extend(a,i);return a});define("sap/viz/chart/behavior/config/PieBehaviorHelper",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/DataGraphics"],function(e,t){function i(e,t,i,a,r){e=d3.select(e);var o=d3.transform(e.attr("transform"));if(!e.attr("inPos")){e.attr("inPos",o.translate.join(","))}if(!e.attr("outPos")){e.attr("outPos",[o.translate[0]+t,o.translate[1]+i].join(","))}var n=a?e.attr("inPos"):e.attr("outPos");if(!r){e=e.transition()}e.attr("transform","translate("+n+")")}var a=function(a,r){if(!e.isArray(a)){a=[a]}a.forEach(function(e){if(e.parentNode.childNodes.length>1){var a=d3.select(e);var o=t.getData(a.node());if(o){var n=o.decoras;var l=0,s=0;var u=o.midAngle;var c=o.r;var h;h=.05*c;l=h*Math.sin(u);s=-h*Math.cos(u);a.attr("transform","translate("+l+","+s+")");a.attr("translateOffsetX",l);a.attr("translateOffsetY",s);if(n&&(!a.attr("offsetDone")||a.attr("offsetDone")==="false")){i(n,l,s,false,r)}a.attr("offsetDone",true)}}})};var r={selectDataPoint:a,deselectDataPoint:function(a){if(!e.isArray(a)){a=[a]}a.forEach(function(a){var r=d3.select(a);if(r){if(r.attr("offsetDone")==="true"){r.attr("transform","translate(0,0)");var o=r.attr("translateOffsetX");var n=r.attr("translateOffsetY");var l=t.getData(r.node());var s=l.decoras;if(s&&o&&n){if(e.isNumber(o)&&e.isNumber(n)){i(s,-Number(o),-Number(n),true)}}r.attr("offsetDone",false)}}})}};return r});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForPie",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/behavior/config/PieBehaviorHelper","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/interaction/InteractionUtils","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n,l,s,u){var c=["info/pie","info/donut"];c=r.addTrellisType(c);var h=e.CSS.CLASS;var p=[{id:"selectDataPoint_pie",triggerEvent:{name:"selectDataPoint",supportedChartTypes:c},handler:function(e,r){r.fireEvent(e,true);var o=i.turnToArray(e.data.targets);var n=r.getProperties().get("interaction.selected");o.forEach(function(e){d3.select(e).selectAll("."+h.PIE_HOVER_STROKE).remove();var a=s.getData(e);i.drawStroke(r,e,"path",n.stroke,1,undefined,a);i.drawFill(r,e,"path",n,t.isExist(r.getProperties().get("plotArea.markerRenderer")))});a.selectDataPoint(o,e.data.disableAnimation)}},{id:"deselectDataPoint_pie",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:c},handler:function(e,r){r.fireEvent(e,true);var o=i.turnToArray(e.data.targets);var n;o.forEach(function(a){if(e.data.isAnyOtherSelected){n=r.getProperties().get("interaction.deselected")}else{n=r.getProperties().get("plotArea.dataPoint")}var o=s.getData(a);i.drawStroke(r,a,"path",n.stroke,1,undefined,o);i.drawFill(r,a,"path",n,t.isExist(r.getProperties().get("plotArea.markerRenderer")))});a.deselectDataPoint(o)}},{id:"hoverOnDataPoint_pie",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=a.getStatus("hoveringLegend");if(!r){a.fireEvent("processUnhighlight")}var n=i.turnToArray(e.data.targets);var u=a.getProperties();var c=u.get("interaction.hover");var p=2;var d=parseFloat(i.getWidth(c.stroke.width,2));n.forEach(function(r){i.drawFill(a,r,"path",c,t.isExist(u.get("plotArea.markerRenderer")));if(d3.select(r).classed(h.DATAPOINTSELECTED)&&!s.getData(r).isZeroValue||!c.stroke.visible||d===0){return}var o=s.getData(r);var n=o.r;var f=o.startAngle;var v=o.endAngle;var g=1/(2*n);var m=n+p;var y=m+d;var _,A;if(e.data.byKeyboard){_=u.get("interaction.keyboard");_.color=a.getEffectManager().register({fillColor:_.color})}else{A=i.getColors(a,r,c.stroke.color)}d3.select(r.parentNode).selectAll("."+h.ZEROVALUEHOVER).remove();if(o.isZeroValue&&o.isZeroOnFirstTab){var b=l.create("path");if(e.data.byKeyboard){b.setAttribute("stroke",_.color)}else{b.setAttribute("stroke",A.customizedColor||A.defaultColor)}var x=parseFloat(c.stroke.width/2)||1;var S=x+", "+x;var D=l.create("g");D.setAttribute("class",h.ZEROVALUEHOVER);b.setAttribute("class",h.PIE_HOVER_STROKE);var w=o.innerRadius;var C=[{x:w*Math.sin(v),y:-w*Math.cos(v)},{x:n*Math.sin(v),y:-n*Math.cos(v)}];var T=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y})(C);b.setAttribute("d",T);b.setAttribute("stroke-width",parseFloat(c.stroke.width)/2+"px");b.setAttribute("stroke-dasharray",S);D.appendChild(b);r.parentNode.appendChild(D)}else{var z=l.create("path");if(e.data.byKeyboard){z.setAttribute("fill",_.color)}else{z.setAttribute("fill",A.customizedColor||A.defaultColor)}z.setAttribute("class",h.PIE_HOVER_STROKE);var L;if(!u.get("plotArea.dataPoint.stroke.visible")){L=d3.svg.arc().innerRadius(m).outerRadius(y).startAngle(f).endAngle(v)()}else{L=d3.svg.arc().innerRadius(m).outerRadius(y).startAngle(f+g).endAngle(v-g)()}z.setAttribute("d",L);r.appendChild(z)}});if(!a.isTrellis()&&!r){a.fireEvent("cleanLegendHoverEffect");var f=o.getCorrespondingLegendItem(e.data.targets,a);if(f){a.fireEvent("highlightLegendItem",{currentTarget:f})}}}},{id:"unhoverOnDataPoint_pie",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=t.isArray(e.data.targets)?e.data.targets[0]:e.data.targets;var o=t.isExist(r)?r.parentNode:undefined;d3.select(o).selectAll("."+h.ZEROVALUEHOVER).remove();var n=i.turnToArray(e.data.targets);var l;n.forEach(function(e){d3.select(e).selectAll("."+h.PIE_HOVER_STROKE).remove();if(d3.select(e).classed(h.DATAPOINTSELECTED)){l=a.getProperties().get("interaction.selected")}else{var r=a.getStatus("selectedDataPoints");if(r.length){l=a.getProperties().get("interaction.deselected")}else{l=a.getProperties().get("plotArea.dataPoint")}}i.drawStroke(a,e,"path",l.stroke,1);i.drawFill(a,e,"path",l,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}},{id:"clearPlot_pie",triggerEvent:{name:"clearPlot",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=a.getNodes(a.NodeType.DATA_POINT,false);if(!r||!r.length){return}var o;var n=e.data.isGray;r.forEach(function(e){d3.select(e).selectAll("."+h.PIE_HOVER_STROKE).remove();if(n){o=a.getProperties().get("interaction.deselected")}else{o=a.getProperties().get("plotArea.dataPoint")}var r=s.getData(e);i.drawStroke(a,e,"path",o.stroke,1,undefined,r);i.drawFill(a,e,"path",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}},n.getDeselectEvent("click_on_non_selection_pie",c,i.getDeselAllExTargets())];u.registerAll(p);return p});define("sap/viz/chart/views/PieChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/plots/PiePlot","sap/viz/chart/components/plots/PlotHelper","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/chart/components/util/ContextUtil","sap/viz/chart/chains/PieChains","sap/viz/chart/scales/FrameScaleProcessor","sap/viz/chart/dynamicScales/PieDyScaleProcessor","sap/viz/chart/behavior/config/DataPointBehaviorConfigForPie"],function e(t,i,a,r,o,n,l){var s=function(e,t){s.superclass.constructor.apply(this,arguments);this._supportLazyRender=true};t.extend(s,i);s.prototype._getDataItems=function(){return["size","categoryAxis","color","dataFrame","series","trellisRow","trellisColumn"]};s.prototype._createPlotContainer=function(e){var t=this.runtime();this._plotArea=r.create(this._renderType,a,t,null);t.zoneManager().add(o.plot(this._plotArea));t.zoneManager().add(n.plot(this._plotArea));this.setChild("plot",this._plotArea,{priority:3})};s.prototype.render=function(e){var t=this._properties.get("plotArea.highlight.contextInfos");if(t&&t.length>0){for(var i=0;i<t.length;i++){for(var a=0;a<this._data.color.scale._domain.length;a++){if(l.equalCtxExtend(t[i].ctx,this._data.color.scale._domain[a],this._rawData.dataModel._color.metaData)){this._data.color.scale._range[a]=t[i].paras.color}}}}if(this._options.chartType.indexOf("donut")>=0){var r=this._properties.get("plotArea.highlight.highlightContext");if(r&&r.length>0){r=r[0];var o=this._properties.get("plotArea.highlight.unhighlightSliceColor");for(var n=0;n<this._data.color.scale._domain.length;n++){if(!l.equalCtxExtend(r,this._data.color.scale._domain[n],this._rawData.dataModel._color.metaData)){this._data.color.scale._range[n]=o}}}}s.superclass.render.apply(this,arguments)};return s});define("sap/viz/chart/metadata/bindings/PieBindings",[],function e(){var t=[{id:"dataFrame",name:"IDS_DATA_FRAME",type:"Dimension",min:0,max:1,acceptMND:false,role:"frame.data"},{id:"size",name:"IDS_SIZE",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,role:"mark.color",acceptMND:true}];return t});define("sap/viz/chart/components/renderers/TreeMapDimensionLabelRenderer",["sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/ColorUtil","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/Constants"],function(e,t,i,a,r,o){var n=function(e){var t=e.data;var a=e.styles;var r=e.props;var n=i.superFastMeasure(t.label,t.fontSize||a.fontSize,a.fontWeight,a.fontFamily);if(t.tempLabelsSize){n=t.tempLabelsSize}var l=n.height;var s=n.width;var u=0;if(l>t.height){u=-1}else{if(r.labelPosition==="topleft"){var c=i.superFastMeasure("M...",t.fontSize||a.fontSize,a.fontWeight,a.fontFamily);u=t.width-(2*o.TREE_MAP.LEFT_PADDING+2*(t.levelNum-t.level-1)*e.borderWidth);if(u<=c.width){u=t.width-(o.TREE_MAP.LEFT_PADDING+(t.levelNum-t.level-1)*e.borderWidth)}}else{u=t.width}}return u};var l=function(e){var t=e.data;var i=e.padding;if(e.props.labelPosition==="topleft"){return e.isLeafItem?o.TREE_MAP.LEFT_PADDING+2*(t.levelNum-t.level-1)*i:t.left+i+o.TREE_MAP.LEFT_PADDING+2*(t.levelNum-t.level-1)*i}else{return e.isLeafItem?t.width/2-t.realLabelWidth/2:t.left+t.width/2-t.realLabelWidth/2}};var s=function(e){var t=e.data;var a=e.props;var r=e.styles;var n;if(t.labelHeight!==undefined){n=t.labelHeight}else{n=i.fastMeasure(t.label,r.fontSize,r.fontWeight,r.fontFamily).height}if(t.children.length===0){if(a.labelPosition==="topleft"){var l=i.superFastMeasure(t.label,t.fontSize||r.fontSize,r.fontWeight,r.fontFamily);var s=a.dataLabel.visible?l.height+t.labelHeight:l.height;var u=e.isLeafItem?0:t.top;if(o.TREE_MAP.TOP_PADDING+s>t.height){if(s>t.height){return-t.labelYPos}else{return u-t.labelYPos+t.height-s}}else{return u+o.TREE_MAP.TOP_PADDING-t.labelYPos}}return e.isLeafItem?t.height/2-(n/2+t.labelYPos):t.top+t.height/2+n/2-t.labelYPos/2}else{return t.top+n/2-t.labelYPos/2}};var u=function(t){var a=t.data;var r=t.styles;var o="font-size:"+r.fontSize+";";o+="font-weight:"+r.fontWeight+";";o+="font-family:"+r.fontFamily+";";var l="";a.realLabelWidth=0;if(a.showLabel){if(!a.label){a.label=""}var s=i.ellipsis(a.label,e.create("text"),n(t),o,t.ellipsisOptions);a.realLabelWidth=s.realLength;l=s.text;if(!t.isLeafItem&&l!==a.label){var u=d3.select(this.parentNode).select(".v-labelarea");if(u.select("title").empty()){u.append("title").text(a.label)}}}return l};var c=function(e){var t;var i=e.data;if(i.children.length===0){t="white"}else{if(i.level===i.levelNum-1){t="white"}else if(i.levelNum-i.level===6){t="white"}else if(i.levelNum-i.level===5){t="white"}else if(i.levelNum-i.level===4){t="white"}else if(i.levelNum-i.level===3){t="#595959"}else{t="#464646"}}return t};var h=function(e,t){var i=l(t);var a=s(t);if(t.isLeafItem){e.setAttribute("x",i);e.setAttribute("y",a);e.setAttribute("class","v-treemapdatalabel v-dimensionlabel v-treemapdimensionlabel");e.setAttribute("text-anchor",t.textAnchor)}else{e.setAttribute("x",i);e.setAttribute("y",a);e.setAttribute("text-anchor",t.textAnchor);e.setAttribute("class","v-dimensionlabel v-treemapdimensionlabel v-nonLeafDimensionLabel")}};var p=function(e){var t,i;var o=e.data;var n=r.convertColor(o.color)||"0x000000";var l=e.props;if(l.dimensionLabel.style.color){t=l.dimensionLabel.style.color}else{if(e.isLeafItem){if(l.dataLabel.visible&&l.dataLabel.style.color){if(l.dataLabel.style.colorRange==="outside"){t=a.getDataLabelColor(n)}else{t=l.dataLabel.style.color}}else{t=a.getDataLabelColor(n)}}else{t=c(e)}}return t};var d=function(t){var i=e.create("text");var a=t.styles;var r=a.color?a.color:p(t);i.setAttribute("fill",r);i.setAttribute("font-size",a.fontSize);i.setAttribute("stroke","none");i.setAttribute("font-weight",a.fontWeight);i.setAttribute("font-style",a.fontStyle);i.setAttribute("font-family",a.fontFamily);i.setAttribute("fill-opacity",1);i.setAttribute("aria-hidden","true");i.value=t.data.label;i.textContent=u(t);h(i,t);return i};d.getPreferedSize=function(e){var t=e.styles;var a=i.fastMeasure(e.minLabel,t.fontSize,t.fontWeight,t.fontFamily);return a};d.expose={renderer:d,getPreferedSize:d.getPreferedSize};return d});define("sap/viz/chart/components/plots/treemap/DataHandler",["sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/renderers/TreeMapDimensionLabelRenderer"],function e(t,i,a,r){var o=function(e,t,i,a,o){var n=function(e,t,o,l){var s=0;var u;for(u=0;u<e.length;u++){s+=e[u].val}var h=function(e,t){var i=0;if(t.val!==e.val){i=e.val-t.val}return i};var p;for(var d=0;d<e.length-1;d++){for(u=e.length-1;u>d;u--){if(h(e[u],e[u-1])>0){p=e[u-1];e[u-1]=e[u];e[u]=p}}}var f={left:0,top:0,width:0,height:0,weight:0,items:[],worstRadio:0};var v={left:0,top:0,width:0,height:0,weight:0,vertical:false};for(u=0;u<e.length;u++){c(e,u,s,f,v,t)}var g;for(g=0;g<e.length;g++){if(!e[g].left){e[g].left=0}if(!e[g].top){e[g].top=0}if(!e[g].width||e[g].width<0){e[g].width=0}if(!e[g].height||e[g].height<0){e[g].height=0}var m,y="",_;if(e[g].label){m=e[g].label.toString();if(m.length>0){_=m[0];y=_.concat("...")}}var A;var b=e[g].children.length===0;var x=l&&l.renderer||r;var S=e[g].ctx;S.level=e[g].level;var D={minLabel:y,ctx:S,styles:i};A=x.getPreferedSize(D,r.expose);if(!A){A=r.getPreferedSize(D)}e[g].labelHeight=A.height;e[g].labelWidth=A.width;e[g].labelYPos=A.y;e[g].needMoreHeightToShowLabel=false;if(e[g].labelHeight<e[g].height&&e[g].labelWidth<e[g].width){e[g].showLabel=true}else{e[g].showLabel=false;if(e[g].labelHeight>=e[g].height&&e[g].val>0){e[g].needMoreHeightToShowLabel=true}}}var w=true;for(g=0;g<e.length;g++){if(e[g].level===e[g].levelNum-1){if(!e[g].needMoreHeightToShowLabel){w=false;break}}else{w=false}}var C=function(t){if(e[t].level!==e[t].levelNum-1){e[t].showLabel=false}L.top=e[t].top+a*2;L.left=e[t].left+a*2;L.width=e[t].width-a*2-a;L.height=e[t].height-a*2-a};if(!w){for(u=0;u<e.length;u++){if(e[u].children.length>0){var T=true;if(!o){T=false}var z=e[u].labelHeight;var L={};L.top=e[u].top+a*2+z;L.left=e[u].left+a*2;L.width=e[u].width-a*2-a;L.height=e[u].height-a*2-a-z;if(!T){C(u)}w=n(e[u].children,L,T,l);if((w||!e[u].showLabel)&&T){C(u);w=n(e[u].children,L,false,l)}}}}return w};var l=function(e){var t;if(e.height>e.width){t=e.height/e.width}else{t=e.width/e.height}t=Math.floor(t*1e3);return t};var s=function(e,t,i,a,r){var o=0;var n={};if(i){if(r.vertical){n.width=r.width*(t/(a.weight+t));n.height=r.height*((a.weight+t)/r.weight)}else{n.height=r.height*(t/(a.weight+t));n.width=r.width*((a.weight+t)/r.weight)}o=l(n);for(var s=0;s<a.items.length;s++){var u=a.items[s];var c={};if(r.vertical){c.width=a.width*(e[u].val/(a.weight+t));c.height=r.height*((a.weight+t)/r.weight)}else{c.height=a.height*(e[u].val/(a.weight+t));c.width=r.width*((a.weight+t)/r.weight)}var h=l(c);if(o<h){o=h}}}else{o=a.worstRadio}return o};var u=function(e,t){var i={};i.weight=t.weight-e.weight;if(t.width===e.width){i.left=t.left;i.top=e.top+e.height;i.width=t.width;i.height=t.height-e.height}else{i.left=e.left+e.width;i.top=t.top;i.width=t.width-e.width;i.height=t.height}return i};var c=function(e,t,i,a,r,o){if(t===0){e[t].left=o.left;e[t].top=o.top;if(o.width>o.height){e[t].height=o.height;e[t].width=o.width*(e[t].val/i);r.vertical=false}else{e[t].width=o.width;e[t].height=o.height*(e[t].val/i);r.vertical=true}a.left=o.left;a.top=o.top;a.width=e[t].width;a.height=e[t].height;a.weight=e[t].val;a.items.push(t);a.worstRadio=l(a);r.left=o.left;r.top=o.top;r.width=o.width;r.height=o.height;r.weight=i}else if(t===e.length-1){var n=u(a,r);e[t].left=n.left;e[t].top=n.top;e[t].width=n.width;e[t].height=n.height}else{var c=s(e,e[t].val,true,a,r);var h=s(e,e[t].val,false,a,r);if(c<h){a.worstRadio=c;a.items.push(t);a.weight+=e[t].val;if(r.vertical){a.height=r.height*(a.weight/r.weight)}else{a.width=r.width*(a.weight/r.weight)}for(var p=0;p<a.items.length;p++){var d=a.items[p];if(r.vertical){e[d].width=a.width*(e[d].val/a.weight);e[d].height=r.height*(a.weight/r.weight);e[d].top=a.top;if(p===0){e[d].left=a.left}else{e[d].left=e[d-1].left+e[d-1].width}}else{e[d].height=a.height*(e[d].val/a.weight);e[d].width=r.width*(a.weight/r.weight);e[d].left=a.left;if(p===0){e[d].top=a.top}else{e[d].top=e[d-1].top+e[d-1].height}}}}else{var f=u(a,r);r.left=f.left;r.top=f.top;r.width=f.width;r.height=f.height;r.weight=f.weight;if(r.width>r.height){r.vertical=false}else{r.vertical=true}a.left=r.left;a.top=r.top;a.weight=e[t].val;if(r.vertical){a.width=r.width;a.height=r.height;if(r.weight>=e[t].val){a.height*=e[t].val/r.weight}}else{a.height=r.height;a.width=r.width;if(r.weight>=e[t].val){a.width*=e[t].val/r.weight}}a.worstRadio=l(a);a.items=[];a.items.push(t);e[t].width=a.width;e[t].height=a.height;e[t].top=a.top;e[t].left=a.left}}};var h={};h.top=0;h.left=0;h.width=t.width;h.height=t.height;var p=n(e,h,true,o);if(p){n(e,h,false,o)}};var n=["#f9f9f9","#e3e3e3","#bfbfbf","#989898","#717171"],l;function s(e,t){return n[e-t-1]}function u(e,t,i,r,o){if(!e){return[]}var n=[],c,h,p=0,d;l=t;for(c in e){if(e.hasOwnProperty(c)){d=e[c];h=d.dp.context();n[p]={colorValue:d.color,ctx:h,children:u(d.children,t+1,i,h,o),label:a.getLabelText(d.title),val:+d.weight>0?+d.weight:0,level:t,rawdata:d};n[p].color=d.children?s(l,t):i.color.scale.scale(d.color);n[p].levelNum=l+1;if(o&&o.visible===true){n[p].stroke=o.color;n[p].strokeWidth="1px"}p++}}return n}function c(e){var t;for(t=0;t<e.length;t++){var i=[];i.push(e[t].val);i.push(e[t].colorVal);e[t].val=i;if(e[t].children.length>0){c(e[t].children)}}}return function(e,t,i,a,r,n){var l=u(e.series,0,e,{},n);o(l,t,i,a,r);c(l);return l}});define("sap/viz/chart/components/datalabels/TreeMapDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DOM","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/ObjectUtils"],function e(t,i,a,r,o,n,l,s,u,c){var h=function(e,t){h.superclass.constructor.apply(this,arguments);this._labelPosition=t.labelPosition;this._borderWidth=t.borderWidth;this._enableTextCallback=false};t.extend(h,a);h.prototype._getDataLabelInfo=function(e){var t=r.getContext(e);var i=this._data.weight.metaData[0].id;return{key:i,value:t[i]}};h.prototype._computeDataLabelTranslate=function(e,t,i,a,r){var n=false;if(e.childNodes[1]&&e.childNodes[1].textContent){n=true;var l=o.getBBox(e.childNodes[1]);if(i==="topleft"){t.f+=l.y+l.height}else{t.f+=l.height/2}}return this._computeDataLabelPosition(t,this._fixBBoxWhenInvisible(e),i,a,r,n)};h.prototype._computeDataLabelPosition=function(e,t,i,a,r,o){if(r.val<=0){return null}var l,s;var u=t.x+e.e;var c=t.y+e.f;if(i==="topleft"){l=u+n.TREE_MAP.LEFT_PADDING+2*(r.ctx.levelNum-r.ctx.level-1)*this._borderWidth;if(o){s=c-a.y}else{if(n.TREE_MAP.TOP_PADDING+a.height>t.height){if(a.height>t.height){s=c-a.y}else{s=c-a.y+t.height-a.height}}else{s=c+n.TREE_MAP.TOP_PADDING-a.y}}}else{l=u+t.width/2-(a.x+a.width/2);if(o){s=c+t.height/2-a.y}else{s=c+t.height/2-a.y/2}}return[l,s]};h.prototype.hideConditional=function(e){var t;for(t=e.length-1;t>=0;t--){var a=e[t].dataPoint;var r=e[t].node;var o=r.getBoundingClientRect();var l=a.getBoundingClientRect();var s=this._labelPosition==="topleft"?l.width-n.TREE_MAP.LEFT_PADDING:l.width;if(e[t].textRealWidth>s||o.bottom>l.bottom||o.top<l.top||o.left<l.left||o.right>l.right){i.remove(r);e.splice(t,1)}}return h.superclass.hideConditional.apply(this,arguments)};h.prototype.isTextTruncated=function(){return this._enableTextCallback&&this._properties.get("truncationBehavior")==="truncate"};h.prototype.isDataLabelOutOfDataPoint=function(e,t){var i=false;if(!this.isTextTruncated()){i=h.superclass.isDataLabelOutOfDataPoint.apply(this,arguments)}return i};h.prototype._buildDataLabelText=function(e,t,i,a,r){var o=this.runtime().statusManager().get("data.unit")||{};var n=this._properties.get("text");if(n){this._enableTextCallback=true;var l=c.extend(true,{},{units:o},i);delete l.level;delete l.levelNum;delete l.realLabelWidth;return this._properties.get("text").call(this,l)}else{return h.superclass._buildDataLabelText.apply(this,arguments)}};h.prototype.truncateText=function(e){var t;if(this.isTextTruncated()){for(t=e.length-1;t>=0;t--){var i=e[t].dataPoint;var a=e[t].node;var l=a.firstChild;var c=this._getStyle(i);var h={};var p=this.runtime().envManager();h.reverseDots=p&&p.reverseDots();h.needRealLength=true;var d=i.getBoundingClientRect();var f=a.textContent;var v=this._labelPosition==="topleft"?d.width-n.TREE_MAP.LEFT_PADDING:d.width;e[t].textRealWidth=s.ellipsis(f,l,v,c.cssString,h).realLength;var g=o.getBBox(a);var m=u.getTransformToElement(i,i.parentNode);var y={val:e[t].info.value,ctx:r.getContext(i)};var _=this._computeDataLabelTranslate(i,m,this._labelPosition,g,y);a.setAttribute("transform","translate("+_[0]+","+_[1]+")");e[t].left=_[0];e[t].right=e[t].left+e[t].textRealWidth}}};return h});define("sap/viz/chart/components/accessibility/HeatMapDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/BaseDataPointNavigator"],function(e,t){function i(){i.superclass.constructor.apply(this,arguments);this._datapointMap=[]}e.extend(i,t);var a=i.prototype;a.init=function(){if(this._series){var e=[];var t=0;for(t=0;t<this._series.length;t++){for(var i=0;i<this._series[t].length;i++){if(this._series[t][i]){e.push(this._series[t][i])}}}if(e.length>0){e.sort(function(e,t){return e.y-t.y});var a=e[0];var r=null;var o=0;var n=0;var l=0;for(t=1;t<e.length+1;t++){r=e[t];if(r&&Math.floor(a.y)===Math.floor(r.y)){l++;continue}else{l++;this._datapointMap[o]=e.slice(n,l);o++;n=l;a=r}}for(t=0;t<this._datapointMap.length;t++){this._datapointMap[t].sort(function(e,t){return e.x-t.x})}}}};a.getFirstStartPoint=function(){if(this._series){for(var e=0;e<this._series.length;e++){for(var t=0;t<this._series[e].length;t++){if(this._series[e][t]){return this._series[e][t].dp}}}}return null};a.up=function(e){return this._move(e,-1)};a.down=function(e){return this._move(e,1)};a.left=function(e){return this._move(e,-1,true)};a.right=function(e){return this._move(e,1,true)};a.destroy=function(){i.superclass.destroy.apply(this,arguments);this._datapointMap=null};a._move=function(e,t,i){var a=this.getDataPoint(e);var r=this.locate(a.address());var o=-1,n=-1;for(var l=0;l<this._datapointMap.length;l++){o=this._datapointMap[l].indexOf(r);if(o>-1){n=l;break}}if(i){o+=t}else{n+=t}return this._datapointMap[n]&&this._datapointMap[n][o]?this._datapointMap[n][o].dp:null};return i});define("sap/viz/chart/components/accessibility/TreeMapDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/HeatMapDataPointNavigator"],function(e,t){var i=1;var a=-1;var r=2;var o=-2;var n=function(e){return-e};var l=function(e,t){for(var i=0;i<e.length;i++){if(e[i].children.length>0){l(e[i].children,t)}if(e[i].val[0]!==0){t.push(e[i])}}};function s(e){s.superclass.constructor.apply(this,arguments);this._datapointMap=[];this._borderWidth=e.borderWidth;this.previousDpID=0;this.previousOperation=0;l(e.treeRect,this._datapointMap)}e.extend(s,t);var u=s.prototype;u.init=function(){var e;for(var t=0;t<this._datapointMap.length;t++){if(this._datapointMap[t].children.length>0){this._datapointMap[t].height=this._datapointMap[t].labelHeight;e=this._datapointMap[t].levelNum-this._datapointMap[t].level-1;if(this._borderWidth===1){this._datapointMap[t].left+=2*e;this._datapointMap[t].width-=3*e}}}};u.getFirstStartPoint=function(){for(var e=0;e<this._datapointMap.length;e++){if(this._datapointMap[e].children.length===0){return this._datapointMap[e].rawdata.dp}}};u.getDataPointInfo=function(e){for(var t=0;t<this._datapointMap.length;t++){var i=this._datapointMap[t].rawdata.dp.id;if(i===parseInt(e)){return this._datapointMap[t]}}};u.getDataPoint=function(e){return this.getDataPointInfo(e).rawdata.dp};u.getCandidate=function(e,t,r,o){for(var n=0;n<this._datapointMap.length;n++){if(this._datapointMap[n].showLabel===true||this._datapointMap[n].levelNum-this._datapointMap[n].level==1){if(o===i||o===a){if(this._datapointMap[n].left<=e.left&&e.left<this._datapointMap[n].left+this._datapointMap[n].width){t.push(this._datapointMap[n])}if(this._datapointMap[n].left>e.left&&this._datapointMap[n].left<e.left+e.width){r.push(this._datapointMap[n])}}else{if(this._datapointMap[n].top<=e.top&&e.top<this._datapointMap[n].top+this._datapointMap[n].height){t.push(this._datapointMap[n])}if(this._datapointMap[n].top>e.top&&this._datapointMap[n].top<e.top+e.height){r.push(this._datapointMap[n])}}}}};u.getDistance=function(e,t,n){var l;if(n===a){l=e.top-(t.top+t.height)}else if(n===i){l=t.top-(e.top+e.height)}else if(n===o){l=t.left-(e.left+e.width)}else if(n===r){l=e.left-(t.left+t.width)}return l};u.getMinDistanceAndDp=function(e,t,i,a){var r=t;var o=null;var n;for(var l=0;l<e.length;l++){n=this.getDistance(e[l],i,a);if(n>=0&&n<r){r=n;o=e[l].rawdata.dp}}return{minDistance:r,closestDp:o}};u.move=function(e,t){var r;if(this.previousOperation===n(t)){r=this.getDataPoint(this.previousDpID)}else{var o=this.getDataPointInfo(e);var l=[];var s=[];var u;if(t===i||t===a){u=o.height+o.top}else{u=o.width+o.left}this.getCandidate(o,l,s,t);var c=this.getMinDistanceAndDp(l,u,o,t);var h=this.getMinDistanceAndDp(s,u,o,t);if(c.minDistance<=h.minDistance){r=c.closestDp}else{r=h.closestDp}}if(r){this.previousDpID=e;this.previousOperation=t}return r};u.up=function(e){return this.move(e,i)};u.down=function(e){return this.move(e,a)};u.left=function(e){return this.move(e,o)};u.right=function(e){return this.move(e,r)};u.destroy=function(){s.superclass.destroy.apply(this,arguments);this._datapointMap=null};return s});define("sap/viz/chart/components/plots/treemap/TreeMapPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/treemap/DataHandler","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/chart/components/datalabels/TreeMapDataLabels","sap/viz/chart/components/util/ColorUtil","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/SVG","sap/viz/chart/components/renderers/TreeMapDimensionLabelRenderer","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/TreeMapDataPointNavigator","sap/viz/chart/components/util/ChartConstants"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_){var A="v-treemap",b="v-treemapitem",x={fontSize:"12px",fontWeight:"normal",fontFamily:"'Open Sans', Arial, Helvetica, sans-serif"};var S=function(e,t){S.superclass.constructor.apply(this,arguments);this._redrawAll=true;this._rects=null;e.zoneManager().add(c.plot(this));e.zoneManager().add(h.plot(this));this._borderWidth=1;this.runtime().statusManager().add("treeRect")};t.extend(S,o);S.prototype.destroy=function(){S.superclass.destroy.call(this);this._redrawAll=null;this._properties=null;this._borderWidth=null;this._rects=null;if(this._dimensionLabels&&this._dimensionLabels.destroy){this._dimensionLabels.destroy()}this._dimensionLabels=null};S.prototype._applyChanges=function(){this._redrawAll=true;this._borderWidth=this._properties.get("border.visible")?1:0;var e=this._properties.get().dimensionLabel;if(e&&e.style){x=e.style;this._labelVisibility=e.visible}if(e&&e.renderer){this._dimensionLabels=e}var t=this._properties.get("dataPoint.stroke");var i=x["fontSize"];var a=x["fontWeight"];var r=x["fontFamily"];var o=x["fontStyle"];var s=x["color"];var u={fontSize:i,fontWeight:a,fontFamily:r,fontStyle:o,color:s};this._rects=n(this._data,this._size,u,this._borderWidth,e,t);var c=l.extend(true,[],this._rects);this.runtime().statusManager().set("treeRect",c)};S.prototype._drawDatapoints=function(e){var t=this._rects;if(this._redrawAll){e.selectAll("*").remove()}var a=e;var r=e.selectAll("g."+u.CSS.CLASS.DATAPOINT_GROUP);if(!i.isExist(r[0][0])){r=e.append("g").attr("class",u.CSS.CLASS.DATAPOINT_GROUP)}var o=this._properties.get();this._drawTreeMapItems(r,t,this._redrawAll,0,this._borderWidth,this._effectManager,this._randomSuffix,o);var n;if(this._redrawAll){n=e.append("g").attr("class","v-element").attr("visibility","hidden");n.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("shape-rendering","crispEdges").attr("stroke","#6c6c6c");n.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("shape-rendering","crispEdges").attr("stroke","#6c6c6c");n.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("shape-rendering","crispEdges").attr("stroke","#6c6c6c");n.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("shape-rendering","crispEdges").attr("stroke","#6c6c6c")}else{if(n){n.attr("visibility","hidden")}}this._redrawAll=false;this._clearReduntantDataFromCtx(e);this._drawTreeMapDataLabels(e)};S.prototype._drawTreeMapDataLabels=function(e){var t=e.node();var i=d3.select(t);var a=i.select(".v-datapoint-group");if(!a.empty()){this._drawDataLabels(i,a.node())}};S.prototype._clearReduntantDataFromCtx=function(e){var t=e.select(".v-datapoint-group");if(t.empty()){return}var i=t.node().querySelectorAll("g");for(var a=0,r=i.length;a<r;a++){var o=d3.select(i[a]).datum();if(o!==undefined){delete o["children"];delete o["val"];delete o["ctx"];delete o["rawdata"];delete o["height"];delete o["width"];delete o["left"];delete o["top"];delete o["labelHeight"];delete o["labelWidth"];delete o["showLabel"];delete o["needMoreHeightToShowLabel"];delete o["color"];delete o["colorValue"];delete o["label"];delete o["stroke"];delete o["strokeWidth"];delete o["labelYPos"];delete o["fontSize"]}}};function D(e,t,i){e.each(function(e){var a=t._buildWrapperConfig(e.rawdata,{width:e.width,height:e.height},e.ctx,i);var o=t._buildData(a);e.color=o.color;s.setData(this,o);r.setDataPointId(this,e.rawdata.dp.id)})}S.prototype._drawTreeMapItems=function(e,t,i,a,r,o,n,u){if(t.length<=0){return}var c=null;var h=this.runtime().envManager();if(h){c=h.textAnchor()}var p={};p.reverseDots=h&&h.reverseDots();p.needRealLength=true;var d=t[0].children.length===0;if(i){e=e.append("g").attr("class",A+"level"+t[0].level)}else{e=e.select("."+A+"level"+t[0].level)}var v=[];for(var m=0;m<t.length;m++){if(t[m].level===a){var y=t[m].ctx;l.extend(true,t[m],y);if(d&&t[m].val[0]===0){continue}v.push(t[m])}}var _=e.attr("class");var S=e.selectAll("."+_+" > ."+b);S=S.data(v);var w=S.enter();var C;var T=function(e){var t=e.attr("x",function(e){return e.left+r}).attr("class","v-labelarea v-mbc-axis-item v-axis-item").attr("y",function(e){return e.top+r}).attr("width",function(e){return e.width-2*r>0?e.width-2*r:0}).attr("height",function(e){return e.showLabel?e.labelHeight:0}).attr("opacity",0).attr("shape-rendering","crispEdges").attr("fill-opacity",1);t.each(function(e){this.labelContexts=e.ctx});return t};var z=function(e){var t=e.attr("x",function(e){return d?0:e.left+r}).attr("class",function(e){return d?"v-item":"v-item"}).attr("y",function(e){return d?0:e.top+r}).attr("width",function(e){return e.width-2*r>0?e.width-2*r:0}).attr("height",function(e){return e.height-2*r>0?e.height-2*r:0}).attr("fill",function(e){var t={drawingEffect:"normal",fillColor:f.convertColor(e.color)};return o.register(t)}).attr("shape-rendering","crispEdges").attr("stroke",function(e){return d?e.stroke:undefined}).attr("stroke-width",function(e){return d?e.strokeWidth:undefined});if(!d){t.attr("fill-opacity",1)}return t};var L=this;var P=function(e,t){var i=L._dimensionLabels;if(t){var a=i&&i.renderer||g;var o;for(o=0;o<e[0].length;o++){var n=s.getContext(e[0][o]);var l=x["fontSize"];var h=x["fontWeight"];var f=x["fontFamily"];var v=x["fontStyle"];var m=x["color"];var y={fontSize:l,fontWeight:h,fontFamily:f,fontStyle:v,color:m};var _={ctx:n.ctx,data:n,styles:y,props:u,ellipsisOptions:p,isLeafItem:d,textAnchor:c,borderWidth:L._borderWidth,padding:r};var A=a(_,g.expose);if(A){s.setContext(A,n.ctx);e[0][o].appendChild(A)}}}};var k,E,I;var O={disableSemantic:false};if(i){var R=b;if(d){R+=" v-datashape v-datapoint v-morphable-datapoint"}C=w.append("g").attr("class",R);if(d){C.attr("transform",function(e){return"translate("+(e.left+r)+","+(e.top+r)+")"});D(C,this,O)}I=C.append("rect");z(I);if(d){I.attr("id",function(e,t){return"HM"+e.index+n})}else{k=C.append("rect");T(k)}P(C,this._labelVisibility)}var N=function(e,t,l){var s=d3.select(e);this._drawTreeMapItems(s,s.datum().children,i,a+1,r,o,n,u)}.bind(this);if(!d){D(C,this,O)}C.each(function(e,t){N(this,e,t,O)});return C};S.prototype._getDataLabels=function(e,t){var i=this._properties.get("labelPosition");var a=this._properties.get("border.visible")?1:0;return new p(t,{name:e,labelPosition:i,borderWidth:a})};S.prototype.render=function(e){var t=this._size.width,i=this._size.height;this._size.width=t<0?0:t;this._size.height=i<0?0:i;S.superclass.render.apply(this,arguments)};m.register(_.DATAPOINT_NAVIGATOR,_.TREEMAP,y);return S});define("sap/viz/chart/components/accessibility/MBCLegendNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/accessibility/ColorLegendNavigator"],function(e,t){function i(e){i.superclass.constructor.apply(this,arguments)}e.extend(i,t);return i});define("sap/viz/chart/scales/QuantizeScaleUtil",["sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/ColorUtils"],function e(t,i,a,r,o){function n(e){var t=1;while(e+t===e){t*=10}return t}var l={getColorScale:function(e,t,l,d,f){var v;var g={};var m=o.fromCSSColor(i.convertColor(d.startColor)).toString();var y=o.fromCSSColor(i.convertColor(d.endColor)).toString();var _=i.convertColor(d.nullColor);var A=e;var b=t;if(!l){if(d.palette&&d.palette.length){g.range=d.palette}else if(y){g.range=[y]}}if(e===undefined&&t===undefined||e===Number.MAX_VALUE&&t===-Number.MAX_VALUE){if(l){v=d3.scale.ordinal().domain([[]]).range([d.nullColor]);v.domainInfo=[{}];g.nullColor=_}}else{var x=null;var S=d.numOfSegments;var D;var w;if(d.palette&&d.palette.length>=S){D=d.palette.slice(0,S);if(S===1){D.push(d.palette[0])}x=d3.scale.quantize().domain([e,t]).range(D);w=d3.scale.linear().domain([e,t]).range(D).nice().domain();x.domain(w)}else{if(d.palette.length>0&&e===t){D=d.palette.slice(0,d.palette.length);x=d3.scale.quantize().domain([e,t]).range(D);w=d3.scale.linear().domain([e,t]).range(D).nice().domain();x.domain(w)}else{x=d3.scale.linear().domain([e,t]).range([m,y]).nice()}}var C=[],T,z;if(s(d.legendValues,S)){C=d.legendValues.slice(0,S+1)}else{if(d.type==="quantile"){var L=0,P=[];for(T=0,z=f.length;T<z;T++){if(a.isArray(f[T])){P=P.concat(f[T])}else{P.push(f[T])}}P=P.sort(function(e,t){return e-t}).filter(function(e){return e!==null});while(++L<S){C[L-1]=p(P,L/S)}C=r.unique([Math.floor(P[0])].concat(C)).concat([Math.ceil(P[P.length-1])])}else{var k=x.domain();var E=c(k[0]),I=c(k[1]);var O=E>I?E:I;O++;var R=x.domain();R=u(R,O);e=R[0];t=R[1];if(e===t){S=1}var N=t-e,M,B=0,V;if(N/S>1){if(N%S===0){M=h(N/S,O+1);B=c(M);for(T=0;T<S+1;T++){C.push(e+h(T*M,B))}}else{M=Math.ceil(N/S);B=c(M);V=Math.floor(e/M)*M;if(V===0||V+M*S<t){V=e}for(T=0;T<S+1;T++){C.push(V+h(T*M,B))}}}else{V=e;M=h(N/S,O+1);B=c(M);for(T=0;T<S;T++){C.push(V+h(T*M,B))}C.push(h(t,B))}for(T=0,z=C.length;T<z;T++){C[T]=h(C[T],B)}M=n(C[0]);while(e<C[0]){C[0]-=M}M=n(C[C.length-1]);while(t>C[C.length-1]){C[C.length-1]+=M}}}if(!(d.palette&&d.palette.length)){S=C.length-1}x.domain([0,S===1?1:S-1]);var F=[],H=[],U=[];for(T=0,z=C.length-1;T<z;T++){F.push([C[T],C[T+1]]);H.push(x(T));U.push({isLeftOpen:false,isRightOpen:true,isAscending:true})}U[z-1].isRightOpen=false;var W=false;var G=false;if(d.legendValues&&d.legendValues.length>0){var Y=d.legendValues.length-1;if(d.numOfSegments&&d.numOfSegments<d.legendValues.length){Y=d.numOfSegments-1}W=A<d.legendValues[0];G=b>d.legendValues[Y]}var X,j,Z;if(e<F[0][0]){if(W){F.splice(0,1)}F.unshift([-Number.MAX_VALUE,F[0][0]]);if(W){U.splice(0,1)}U.unshift({isLeftOpen:false,isRightOpen:true,isAscending:true})}if(t>F[F.length-1][1]){if(G){F.pop()}F.push([F[F.length-1][1],Number.MAX_VALUE]);if(G){U.pop()}U.push({isLeftOpen:true,isRightOpen:true,isAscending:true})}g.domain=F;g.range=H;g.domainInfo=U;g.legendValues=F;if(l){g.nullColor=d.nullColor}}return g},getScale:function(e,t,i,a,r){return l.getColorScale(e,t,false,{numOfSegments:i,startColor:a,endColor:r})}};l.fillContexts2DomainInfo4MBC=function(e,i,a,r){if(e){var o=e.domain,n;var l=e.domainInfo,s;var u,c,h,p,d,f;var v;for(var g=-1;++g<i.length;){f=a?a(i[g]):i[g].val;for(var m=-1;++m<o.length;){n=o[m];s=l[m];if(t.isNoValue(f)){u=n.length===0}else if(n.length>0){c=n[0];h=s.isLeftOpen;p=n[1];d=s.isRightOpen;u=(f<c||!h&&f===c)&&(f>p||!d&&f===p)||(f>c||!h&&f===c)&&(f<p||!d&&f===p)}if(u){s.dpPaths=s.dpPaths||[];v=r?r(i[g]):i[g].ctx.path;s.dpPaths.push(v);break}}}}};var s=function(e,t){var i;if(!e||!t){return false}if(e.length<t+1){return false}for(i=0;i<t+1;i++){if(isNaN(e[i])){return false}}for(i=0;i<t+1;i++){if(e[i]>=e[i+1]){return false}}return true};var u=function(e,t){for(var i=0,a=e.length;i<a;i++){e[i]=h(e[i],t)}return e};var c=function(e){var t=e.toString().split(".");return t.length>1?t[1].length:0};var h=function(e,t){return Math.round(Math.pow(10,t)*e)/Math.pow(10,t)};var p=function(e,t){var i=(e.length-1)*t+1,a=Math.floor(i),r=+e[a-1],o=i-a;return o?r+o*(e[a]-r):r};l.isLegendValuesValid=s;return l});define("sap/viz/chart/components/legend/MBCLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/legend/BaseLegend","sap/viz/chart/components/legend/ColorLegend","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/MBCLegendNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/scales/QuantizeScaleUtil"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v){var g={width:14,maxHeight:34,minHeight:12};var m={height:14,defaultWidth:36,maxWidth:36,minWidth:14};var y={noValuePadding:18,valuePadding:8,markerPaddingRight:.5,maxValueSpace:1.6,minValueSpace:.5};var _=1,A=5;var b=function(e,t){b.superclass.constructor.apply(this,arguments);var i=this._properties.get();this._mbcLA_width=400;this._mbcLA_height=200;this._mbcLA_valueLabelFont=i.label.style;this._mbcLA_wrap=undefined;this._mbcLA_chartData=undefined;this._mbcLA_colors=[];this._mbcLA_markerSize={width:12,height:12};this._mbcLA_paddingBottom=1;this._mbcLA_selectedItem=[];this._mbcLA_textInfos=null;this._mbcLA_perferredSize=null;this._mbcLA_nullLabelIndex=-1;this._mbcLA_textHeight=20;this._mbcLA_minimized=false;this._mbcLA_effectManager=this.runtime().effectManager();this._mbcLA_styleManager=i;this._mbcLA_style={};this._mbcLA_style.clickedshadow=i.mouseDownShadow.color;this._need_calTextSize=false;this._cells=[];this._type="MBCLegend"};t.extend(b,a);b.prototype._addDefaultProperties=function(){b.superclass._addDefaultProperties.call(this);this._properties.add({formatString:null,unitFormatType:null,drawingEffect:"normal",hovershadow:{color:"#cccccc"},mouseDownShadow:{color:"#808080"},onlyShowStartEndLabel:false})};b.prototype.syncProperties=function(){this._mbcLA_valueLabelFont=this._properties.get("label.style");this._mbcLA_styleManager=this._properties.get();this._formatString=this._mbcLA_styleManager.formatString;this._onlyShowStartEndLabel=this._properties.get("onlyShowStartEndLabel")};b.prototype.setData=function(e){if(!e){return}this.syncProperties();m.maxWidth=m.defaultWidth;if(e.color){this._bindingFields=e.color.metaData}this._mbcLA_colors=[];if(e.color&&e.color.scale&&e.color.scale._range){var t;for(t=0;t<e.color.scale._range.length;t++){this._mbcLA_colors.push(e.color.scale._range[t])}}var i=e.color.range,a,r,o,l=e.color.metaData,s=u.extend(true,[],e.color.scale._legendValues);this._mbcLA_chartData=[];if(!l||!l.length||!i.length||!i[0]||!i[0].length){return}var c=i[0][0],h=i[0][1],p=l[0].id;this._measureName=l[0].name;a=c<=h?true:false;if(s&&s.length){if(a){s=s.reverse()}for(r=0,o=s.length;r<o;r++){var d={measureName:p};d[p]={min:s[r][0],openmax:s[r][1]};if(r===0){d[p].max=s[r][1]}this._mbcLA_chartData.push({ctx:d,val:s[r][0]});if(r===0){this._mbcLA_chartData[0].val1=s[r][1];if(Math.abs(s[r][1])===Number.MAX_VALUE){this._mbcLA_chartData[r].val1=undefined}}if(r===o-1&&Math.abs(s[r][0])===Number.MAX_VALUE){if(o>1){this._mbcLA_chartData[r].val=undefined}}}}var f=function(e){var t,i;for(t=0;t<e.length;t++){if(n.isArray(e[t])){if(e[t].length!==e[0].length){return true}for(i=0;i<e[t].length;i++){if(e[t][i]===null||isNaN(e[t][i])){return true}}}else{if(e[t]===null||isNaN(e[t])){return true}}}return false};var v=e.color.values;var g=f(v);if(g){this._mbcLA_chartData.push({ctx:{measureName:p,and:function(e){return e[p]===null||isNaN(e[p])}},val:"N/A"});this._mbcLA_colors.push(e.color.scale.scale(null))}this._need_calTextSize=true};b.prototype.isInSemanticMode=function(){var e=this.runtime().semanticManager();return e.hasDataPointColorStyle()&&e.isOverrideMode()};b.prototype.render=function(e,t){if(this.isInSemanticMode()){e.selectAll("g.v-mbc-content").remove();a.prototype.render.apply(this,arguments);e.selectAll("g.v-content").classed("v-color-content",true);return}e.selectAll("g.v-color-content").remove();i.prototype.render.apply(this,arguments);if(!this.isVisible()){e.selectAll("g.v-content").remove();return this}this._cells=[];var r=this;this.syncProperties();var n=this._parent=e;var l=n.selectAll("g.v-content").data(["content"]);l.enter().append("g").classed("v-content v-mbc-content",true);l.exit().remove();l.attr("transform","translate(0, "+this._pos.y+")");var s=l.selectAll("g.v-groups").data(["groups"]);s.enter().append("g").classed("v-groups",true).classed("v-label",true).classed("viz-legend-valueLabel",true);s.attr("role","listbox");s.exit().remove();this._tempGroups=s;var u=function(e){var t={marker:[],label:[],ticker:[]},i=0,a=0,n=r._mbcLA_colors.map(h.convertColor),l,s,u,c,p;var d=y.markerPaddingRight*r._mbcLA_textHeight;var f=r._mbcLAfn_calTextSize();var g=f.textSize;var m=f.tValueWidth;n=n.reverse();if(r._mbcLA_nullLabelIndex!==-1){var b=n.shift();n.push(b)}u=e.length;var x=u>0&&e[u-1].val==="N/A";if(r._orientation==="top"||r._orientation==="bottom"){d=d+r._getValuePaddingDelta(d);var S=r._properties._props["legend.onlyShowStartEndLabel"];if(S&&S.value===undefined){var D=r._runtime._scaleMgr.get("color");if(D&&D.legendValues){if(!v.isLegendValuesValid(D.legendValues,D.numOfSegments)){r._onlyShowStartEndLabel=true}}}if(m&&g[0].visibility_tVal!=="hidden"){i=m/2-_/2}l=r._mbcLA_markerSize.width+r._mbcLA_paddingBottom;var w=r._mbcLA_markerSize.height+d-r._mbcLA_textY;var C=r._mbcLA_markerSize.height+(d-A)/2;for(s=0;s<u;s++){c=e[s].val;p=e[s].val1;if(c==="N/A"&&u>1){var T=y.valuePadding;if(g[s-1].visibility!=="hidden"){T+=g[s-1].width/2}if(g[s-1].width!==0){T-=_/2}i=i-r._mbcLA_paddingBottom+T}t.marker.push({x:i,y:a,color:n[s],val:e[s].val,ctx:e[s].ctx});if(p!==undefined){t.label.push({val:p,x:0,y:w,visibility:g[s].visibility_tVal});t.ticker.push({val:p,x1:i+_/2,x2:i+_/2,y1:C,y2:C+A,visibility:g[s].visibility_tVal})}if(!(r._onlyShowStartEndLabel&&s<u-(x?2:1))){if(c!==undefined){if(c==="N/A"){t.label.push({val:o.get("IDS_ISNOVALUE"),x:i,y:w,visibility:g[s].visibility})}else{var z=i+l-(s===u-(x?2:1)?r._mbcLA_paddingBottom+_/2:_/2);t.label.push({val:c,x:z-g[s].width/2,y:w,visibility:g[s].visibility});t.ticker.push({val:c,x1:z,x2:z,y1:C,y2:C+A,visibility:g[s].visibility})}}}i=i+l}}else{l=r._mbcLA_markerSize.height+r._mbcLA_paddingBottom;var L=r._mbcLA_markerSize.width+d;for(s=0;s<u;s++){c=e[s].val;p=e[s].val1;if(c==="N/A"&&u>1){a=a+y.noValuePadding}var P=a;if(c!=="N/A"){P=a+r._mbcLA_textHeight/2}t.marker.push({x:i,y:P,color:n[s],val:c,ctx:e[s].ctx});if(p!==undefined){t.label.push({val:p,x:L,y:-r._mbcLA_textY,visibility:g[s].visibility_tVal})}if(c!==undefined){if(!(r._onlyShowStartEndLabel&&s<u-(x?2:1))){if(c==="N/A"){t.label.push({val:o.get("IDS_ISNOVALUE"),x:L,y:a-r._mbcLA_textY/2-r._mbcLA_paddingBottom+l/2,visibility:g[s].visibility})}else{t.label.push({val:c,x:L,y:a+l-r._mbcLA_textY-r._mbcLA_paddingBottom,visibility:g[s].visibility})}}}a=a+l}}return t};e.each(function(){r._mbcLAfn_setupThemeStyleDef();r._mbcLAfn_calMarkerSize({width:r._mbcLA_width,height:r._mbcLA_height-r._pos.y});var e=r._mbcLA_chartData,t,i=0,a,o,n=y.markerPaddingRight*r._mbcLA_textHeight;var l=r._tempGroups;r._mbcLA_wrap=l;var s=l.selectAll("rect.v-indicatedRect");if(s.empty()){s=l.append("rect").attr("class","v-indicatedRect v-hovershadow")}s.attr("visibility","hidden");if(r._orientation==="top"||r._orientation==="bottom"){s.attr("width",r._mbcLA_markerSize.width+2).attr("height",r._mbcLA_markerSize.height+4)}else{s.attr("width",r._mbcLA_markerSize.width+4).attr("height",r._mbcLA_markerSize.height+2)}var c=u(e);var h=l.selectAll("rect.v-marker").data(c.marker);h.exit().remove();h.enter().append("rect");h.attr("class",function(e,t){return"v-marker v-mbc-legend-item ID_"+t});h.attr("legendlabel-id",function(e,t){r._cells.push([{id:t}]);return t});if(r.isSelectable()){h.attr("aria-posinset",function(e,t){return t+1}).attr("aria-setsize",c.marker.length).attr("role","option")}h.attr("width",r._mbcLA_markerSize.width).attr("height",r._mbcLA_markerSize.height).attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("fill",function(e){var t={drawingEffect:"normal",fillColor:e.color};var i=r._mbcLA_effectManager.register(t);return i});var p=r._mbcLA_nullLabelIndex===-1?c.label.length:c.label.length-1;var d=l.selectAll("text").data(c.label);d.exit().remove();d.enter().append("text");d.text(function(e){return r._getLabelValue(e.val)});d.attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("visibility",function(e){return e.visibility});var f=null;var v=r.runtime()&&r.runtime().envManager();if(v){f=v.textAnchor()}d.attr("text-anchor",f);var g=r._mbcLA_styleManager.label.style;l.attr("font-family",g["fontFamily"]).attr("font-size",g["fontSize"]).attr("font-weight",g["fontWeight"]).attr("fill",g.color).attr("font-style",g["fontStyle"]);var m=l.selectAll("line").data(c.ticker);m.exit().remove();if(r._orientation==="top"||r._orientation==="bottom"){m.enter().append("line");m.attr("x1",function(e){return e.x1}).attr("x2",function(e){return e.x2}).attr("y1",function(e){return e.y1}).attr("y2",function(e){return e.y2}).attr("visibility",function(e){return e.visibility}).attr("stroke-width",_).attr("stroke",g.color)}})};b.prototype._getValuePaddingDelta=function(e){var t=9;return e<t?t-e:0};b.prototype._updateHeight=function(e){var t=this._tempGroups;var i=true;t.selectAll("text").each(function(e){i=i&&e.visibility==="hidden"});if(i&&this._mbcLA_perferredSize.height>this._mbcLA_perferredSize.minHeight){var a=e.getAttribute("height");e.setAttribute("height",a-(y.markerPaddingRight*this._mbcLA_textHeight+this._mbcLA_textHeight))}};b.prototype.highlight=function(e){if(e.__data__){var t=this._mbcLA_wrap.selectAll(".v-indicatedRect");var i=e.__data__;if(i.x!==undefined&&i.y!==undefined){t.attr("class","v-indicatedRect v-mbc-legend-item v-hovershadow").attr("visibility","visible").attr("fill",this._mbcLA_style.hovershadow.fill);if(this._orientation==="top"||this._orientation==="bottom"){t.attr("x",i.x-1).attr("y",i.y-2)}else{t.attr("x",i.x-2).attr("y",i.y-1)}}}};b.prototype._shouldInitColorShapeScale=function(){return!this._colorShapeScale||!this._colorScale};b.prototype.hasData=function(){if(this.isInSemanticMode()){this._initColorShapeScale();return this._colorShapeScale&&this._colorShapeScale.getLength()>0}return!!(this._mbcLA_chartData&&this._mbcLA_chartData.length)};b.prototype.unhighlight=function(e){if(this._mbcLA_wrap){this._mbcLA_wrap.selectAll(".v-indicatedRect").attr("visibility","hidden")}};b.prototype.selected=function(e){if(e.__data__){var t=this._mbcLA_wrap.selectAll(".v-indicatedRect");var i=e.__data__;if(i.x!==undefined&&i.y!==undefined){t.attr("class","v-indicatedRect v-mbc-legend-item v-hovershadow-mousedown").attr("visibility","visible").attr("fill",this._mbcLA_style.clickedshadow);if(this._orientation==="top"||this._orientation==="bottom"){t.attr("x",i.x-1).attr("y",i.y-2)}else{t.attr("x",i.x-2).attr("y",i.y-1)}}}};b.prototype.setSize=function(e){b.superclass.setSize.apply(this,arguments);this.width(e.width);this.height(e.height)};b.prototype.width=function(e){b.superclass.width.apply(this,arguments);var t=[].slice.call(arguments);if(t.length<1||t[0]===undefined){this._properties.set("width",this._mbcLA_width);return this._mbcLA_width}this._mbcLA_width=e;this._properties.set("width",this._mbcLA_width);return this};b.prototype.height=function(e){b.superclass.height.apply(this,arguments);var t=[].slice.call(arguments);if(t.length<1||t[0]===undefined){this._properties.set("height",this._mbcLA_height);return this._mbcLA_height}this._mbcLA_height=e;this._properties.set("height",this._mbcLA_height);return this};b.prototype.setOrientation=function(e){if(!arguments.length){return this._orientation}if(e&&e!==this._orientation){this._mbcLA_markerSize={width:12,height:12}}this._orientation=e;this._need_calTextSize=true;return this};b.prototype.getPreferredSize=function(e,t){this.syncProperties();return b.superclass.getPreferredSize.apply(this,arguments)};b.prototype._getBodyPreferredSize=function(e){if(this.isInSemanticMode()){return a.prototype._getBodyPreferredSize.apply(this,arguments)}var t=0,i=0,o=0,n=0;if(this._mbcLA_chartData&&this._mbcLA_chartData.length&&this._need_calTextSize){this._mbcLAfn_setupThemeStyleDef();var l=r.fastMeasure("M",this._mbcLA_valueLabelFont.fontsize,this._mbcLA_valueLabelFont.fontweight,this._mbcLA_valueLabelFont.fontfamily);this._mbcLA_textHeight=l.height;this._mbcLA_textY=l.y;var s=this._mbcLAfn_calTextSize();var u=s.maxValueWidth;var c=s.textSize;var h=this._mbcLA_chartData.length;if(s.maxNumValueWidth>m.maxWidth){m.maxWidth=s.maxNumValueWidth+y.valuePadding}if(this._orientation==="top"||this._orientation==="bottom"){var p=this._mbcLAfn_calLegendWidthFromMarkerWidth(m.maxWidth);i=p.height;t=p.width;p=this._mbcLAfn_calLegendWidthFromMarkerWidth(m.minWidth);o=p.height;n=p.width}else{t=this._mbcLA_markerSize.width+y.markerPaddingRight*this._mbcLA_textHeight+u;n=this._mbcLA_markerSize.width+y.markerPaddingRight*this._mbcLA_textHeight+(c[0].width>c[h-1].width?c[0].width:c[h-1].width);if(this._mbcLA_nullLabelIndex!==-1){i=(g.maxHeight+this._mbcLA_paddingBottom)*h+y.noValuePadding-this._mbcLA_paddingBottom;o=(g.minHeight+this._mbcLA_paddingBottom)*h+y.noValuePadding-this._mbcLA_paddingBottom}else{i=(g.maxHeight+this._mbcLA_paddingBottom)*h+this._mbcLA_textHeight-this._mbcLA_paddingBottom;o=(g.minHeight+this._mbcLA_paddingBottom)*h+this._mbcLA_textHeight-this._mbcLA_paddingBottom}}this._mbcLA_perferredSize={minHeight:o,minWidth:n,width:t,height:i,maxWidth:t,maxHeight:i}}else{this._mbcLA_perferredSize={minHeight:0,minWidth:0,width:0,height:0,maxWidth:0,maxHeight:0}}return this._mbcLA_perferredSize};b.prototype._mbcLAfn_calTextSize=function(){var e=-1,t=-1,i=[],a=0,n=this._mbcLA_chartData,l,s,u,c;var h=n.length;var p=h;if(this._need_calTextSize){this._mbcLA_nullLabelIndex=-1;if(h>0&&n[h-1].val==="N/A"){p=h-1}for(u=0;u<h;u++){if(n[u].val==="N/A"){i[u]=r.fastMeasure(o.get("IDS_ISNOVALUE"),this._mbcLA_valueLabelFont.fontsize,this._mbcLA_valueLabelFont.fontweight,this._mbcLA_valueLabelFont.fontfamily);this._mbcLA_nullLabelIndex=u}else{l=n[u].val;if(l!==undefined){l=this._getLabelValue(n[u].val);i[u]=r.fastMeasure(l,this._mbcLA_valueLabelFont.fontsize,this._mbcLA_valueLabelFont.fontweight,this._mbcLA_valueLabelFont.fontfamily)}else{i[u]={width:0,height:0}}s=n[u].val1;if(s!==undefined){s=this._getLabelValue(s);c=r.fastMeasure(s,this._mbcLA_valueLabelFont.fontsize,this._mbcLA_valueLabelFont.fontweight,this._mbcLA_valueLabelFont.fontfamily);if(this._orientation==="top"||this._orientation==="bottom"){a=c.width;if(a>t){t=a}}else{if(c.width>i[u].width){i[u]=c}}}if(i[u].width>t){t=i[u].width}}if(i[u].width>e){e=i[u].width}}if(this._onlyShowStartEndLabel){var d=i[p-1].width;t=a>d?a:d}this._mbcLA_textInfos={maxValueWidth:e,maxNumValueWidth:t,textSize:i,tValueWidth:a};this._need_calTextSize=false}return this._mbcLA_textInfos};b.prototype._mbcLAfn_calMarkerSize=function(e){if(!this.hasData()){return false}var t=this._mbcLA_chartData.length,i=0,a,r,o,n;this._mbcLA_minimized=false;var l=y.maxValueSpace*this._mbcLA_textHeight;var s=y.minValueSpace*this._mbcLA_textHeight;var u=this._mbcLAfn_calTextSize().textSize;if(this._orientation==="top"||this._orientation==="bottom"){a=e.width;var c=m.maxWidth;var h=m.minWidth;var p=-1;var d=this._mbcLAfn_calLegendWidthFromMarkerWidth(c);if(d.width<=a){i=c}else{d=this._mbcLAfn_calLegendWidthFromMarkerWidth(h);if(d.width>=a){i=h}else{while(c-h>1){p=h+(c-h)/2;d=this._mbcLAfn_calLegendWidthFromMarkerWidth(p);if(Math.abs(d.width-a)<1){h=p;break}else if(d.width>a){c=p}else{h=p}}i=h;d=this._mbcLAfn_calLegendWidthFromMarkerWidth(i);if(d.isAllHidden&&i>m.defaultWidth){i=m.defaultWidth}}}}else{a=e.height;var f=false;var v;if(this._mbcLA_textHeight>g.maxHeight){f=true}if(this._mbcLA_nullLabelIndex!==-1){i=(a-this._mbcLA_paddingBottom*(t-1)-y.noValuePadding-(f?this._mbcLA_textHeight-g.maxHeight:0))/t}else{i=(a-this._mbcLA_paddingBottom*(t-1)-this._mbcLA_textHeight)/t}if(i>g.maxHeight){i=g.maxHeight}if(i<this._mbcLA_textHeight){f=true}if(f){this._mbcLA_minimized=true}for(n=0;n<u.length;n++){if(this._mbcLA_minimized){u[n].visibility="hidden"}else{u[n].visibility="visible"}}u[0].visibility_tVal="visible";if(this._mbcLA_nullLabelIndex!==-1){u[this._mbcLA_nullLabelIndex].visibility="visible";v=u.length-1}else{v=u.length}if(v>0){if(u[v-1].height===0){u[v-2].visibility="visible"}else{u[v-1].visibility="visible"}}}if(this._orientation==="top"||this._orientation==="bottom"){this._mbcLA_markerSize.width=i;this._mbcLA_markerSize.height=m.height}else{this._mbcLA_markerSize.width=g.width;this._mbcLA_markerSize.height=i}};b.prototype._mbcLAfn_setupThemeStyleDef=function(){var e=this._mbcLA_styleManager.label.style;var t=false;if(e){if(e["fill"]&&e["fill"]!==this._mbcLA_valueLabelFont.color){this._mbcLA_valueLabelFont.color=e["fill"]}if(e["fontFamily"]&&e["fontFamily"]!==this._mbcLA_valueLabelFont.fontfamily){this._mbcLA_valueLabelFont.fontfamily=e["fontFamily"];t=true}if(e["fontSize"]&&e["fontSize"]!==this._mbcLA_valueLabelFont.fontsize){this._mbcLA_valueLabelFont.fontsize=e["fontSize"];t=true}if(e["fontWeight"]&&e["fontWeight"]!==this._mbcLA_valueLabelFont.fontweight){this._mbcLA_valueLabelFont.fontweight=e["fontWeight"];t=true}if(t){this._need_calTextSize=true}}};b.prototype.getActiveLevels=function(){return this._cells};b.prototype.destroy=function(){b.superclass.destroy.apply(this,arguments);if(this._mbcLA_wrap){this._mbcLA_wrap.remove();this._mbcLA_wrap=null}this._need_calTextSize=null;this._mbcLA_perferredSize=null;this._mbcLA_styleManager=null;this._mbcLA_effectManager=null;this._mbcLA_selectedItem=null;this._mbcLA_chartData=null;this._mbcLA_nullLabelIndex=null;this._mbcLA_width=null;this._mbcLA_height=null;this._mbcLA_valueLabelFont=null;this._mbcLA_colors=null;this._mbcLA_markerSize=null;this._mbcLA_paddingBottom=null;this._mbcLA_textInfos=null;this._mbcLA_textHeight=20;this._mbcLA_minimized=false;this._mbcLA_style=null;this._cells=null};b.prototype._mbcLAfn_calLegendWidthFromMarkerWidth=function(e){var t=0,i=0,a=0,r=2;var o,n,l,s;var u=this._mbcLAfn_calTextSize();var c=u.textSize;var h=u.tValueWidth;var p=this._mbcLA_chartData.length,d=p;var f=false;if(this._mbcLA_nullLabelIndex!==-1){t=c[this._mbcLA_nullLabelIndex].width;d=p-1}if(this._onlyShowStartEndLabel){a=(e+this._mbcLA_paddingBottom)*d-this._mbcLA_paddingBottom;if(d*e-(h+c[d-1].width)/2<r){c[0].visibility_tVal="hidden";c[d-1].visibility="hidden"}else{a+=h/2+c[d-1].width/2}}else{for(var v=0;v!==d;v++){if(v===0){l=e-(h+c[v].width)/2}else{s=e-(c[v].width+c[v-1].width)/2;if(l>s){l=s}}}for(v=0;v!==d;v++){if(l<r){c[v].visibility="hidden"}else{c[v].visibility="visible"}}if(this._mbcLA_nullLabelIndex!==-1){c[this._mbcLA_nullLabelIndex].visibility="visible"}if(d>0){a=(e+this._mbcLA_paddingBottom)*d-this._mbcLA_paddingBottom;if(h!==0){a-=_/2;c[0].visibility_tVal="visible";o=-1}else{c[0].visibility="visible";o=0}if(c[d-1].width!==0){a-=_/2;n=d-1}else{n=d-2}c[n].visibility="visible";var g=e*(n-o);var A=h!==0?h:c[0].width;var b=c[n].width;if(o===n){if(c[o].width+2*r>d*e){c[o].visibility="hidden"}}else if(g-(A+b)/2<r){c[n].visibility="hidden";f=true;if(h!==0){c[0].visibility_tVal="hidden"}else{c[0].visibility="hidden"}}else{a+=h/2+c[d-1].width/2}}}if(this._mbcLA_nullLabelIndex!==-1){a+=y.valuePadding+(t>e?t:e)}var x=y.markerPaddingRight*this._mbcLA_textHeight;i=m.height+x+this._mbcLA_textHeight;i=i+this._getValuePaddingDelta(x);return{width:a,height:i,isAllHidden:f}};b.prototype._getLabelValue=function(e){e=e===null?o.get("IDS_ISNOVALUE"):e;var t=this._properties.get();var i=null;if(this._bindingFields&&this._bindingFields.length){i=this._bindingFields[0].formatString;if(n.isArray(i)){i=i[0]}}var a=t.unitFormatType;var r={decimalFormatString:l.getDecimalFormatString(l.SUPPORT_CUSTOM_COMPONENTS.MBCLegend)};e=l.format(e,this._formatString||i,a,r);return e};b.prototype._getTitleText=function(){var e="";var t=this._properties.get("title.text");if(n.isString(t)){e=t}else{e=this._measureName}return e};p.register(f.MBCLEGEND_NAVIGATOR,null,d);return b});define("sap/viz/chart/scales/QuantizeScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/Constants"],function(e,t,i,a){var r=function(e){this.__className="sap.viz.scale.QuantizeScale";this._name=null;this._type="quantize";this._domain=e.domain;this._range=e.range;this._nullColor=e.nullColor;this._legendValues=e.legendValues;this._domainInfo=e.domainInfo;this._defaultColors=a.COLOR.SAPColorSingleAxis;this._initScale()};e.extend(r,t);r.prototype._initScale=function(){if(this._scale===undefined){this._scale=d3.scale.ordinal();if(this._domain){this._scale.domain(this._domain)}if(this._range){this._scale.range(this._range)}else{this._scale.range(this._defaultColors)}}};r.prototype.scale=function(e){if(i.isNoValue(e)){if(this._nullColor){return this._nullColor}}var t,a,r,o,n;if(this._domain){for(a=0;a<this._domain.length;a++){r=this._domain[a];o=this._domainInfo[a];n=false;if(a===this._domain.length-1||this._domain[a+1].length===0){t=r;break}if(e>r[0]&&e<r[1]){n=true}else if(!o.isLeftOpen&&e===r[0]){n=true}else if(!o.isRightOpen&&e===r[1]){n=true}if(n){t=r;break}if(e>=r[0]&&e<r[1]){t=r;break}}return this._scale(t)}else{return this._scale.range()[0]}};r.prototype.getLegendValues=function(){return this._legendValues};r.prototype.destroy=function(){r.superclass.destroy.call(this);this._nullColor=null;this._legendValues=null;this._domainInfo=null;this._defaultColors=null};return r});define("sap/viz/chart/scales/QuantizeScaleProcessor",["sap/viz/framework/scale/ScaleRepository","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/scales/QuantizeScaleUtil","sap/viz/chart/scales/QuantizeScale","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o,n){e.quantizeScale=function(e,l,s,u,c){c=c||{};var h=c.seriesType,p=c.role;var d=n.clone(e.values||[],true),f=[],v=false;var g=function(e){for(var t=0;t<e.length;t++){if(i.isArray(e[t])){if(e[t].length!==e[0].length){v=true}g(e[t])}else{if(e[t]===null||isNaN(e[t])){v=true}else if(f.indexOf(+e[t])<0){f.push(+e[t])}}}};g(d);var m,y;if(f.length===1){m=f[0];y=f[0]}else if(f.length===0){m=undefined;y=undefined}else{m=t.min(f);y=t.max(f)}var _=s.get(l);var A=_&&_.palette?_.palette:a.TREE_MAP.PALETTE;var b=_&&_.startColor?_.startColor:a.TREE_MAP.START_COLOR;var x=_&&_.endColor?_.endColor:a.TREE_MAP.END_COLOR;var S=_&&_.legendValues?_.legendValues:a.TREE_MAP.LEGEND_VALUES;var D=_&&_.maxNumOfSegments||9;var w=s.getDefault(l);var C={feed:l,type:"quantize",palette:a.TREE_MAP.PALETTE,startColor:a.TREE_MAP.START_COLOR,endColor:a.TREE_MAP.END_COLOR,nullColor:a.TREE_MAP.NULL_COLOR,numOfSegments:a.TREE_MAP.DEFAULT_TICKS,legendValues:a.TREE_MAP.LEGEND_VALUES};if(!i.isExist(w)){s.add(l,{serializable:true,defaultValue:C})}else{s.set(l,n.extend({},C,w),1,"templateValue")}u.origin.add("plotArea.colorPalette",{defaultValue:a.TREE_MAP.PALETTE,serializable:false,get:function(){return A}});u.origin.add("plotArea.startColor",{defaultValue:a.TREE_MAP.START_COLOR,serializable:false,get:function(){return b}});u.origin.add("plotArea.endColor",{defaultValue:a.TREE_MAP.END_COLOR,serializable:false,get:function(){return x}});u.origin.add("plotArea.legendValues",{defaultValue:a.TREE_MAP.LEGEND_VALUES,serializable:false,get:function(){return S}});var T=n.extend({},s.get(l));var z=s.getDefault(l);if(!T){T=z}else{T.numOfSegments=T.numOfSegments;T.legendValues=T.legendValues||z.legendValues;T.nullColor=T.nullColor||z.nullColor;T.startColor=T.startColor||z.startColor;T.endColor=T.endColor||z.endColor;T.palette=T.palette||z.palette;if(!i.isNumber(T.numOfSegments)){T.numOfSegments=z.numOfSegments}else if(T.numOfSegments>D){T.numOfSegments=D}else if(T.numOfSegments<2){T.numOfSegments=2}}var L=r.getColorScale(m,y,v,T,e.values);var P=L.legendValues;if(P&&P.length>0){var k=[];for(var E=0;E<P.length;E++){k.push(P[E][0]);if(E===P.length-1){k.push(P[E][1])}}u.setDefault("plotArea.autoLegendValues",k)}if(L.domain!==null){return new o(L)}}});define("sap/viz/chart/chains/TreeChains",["sap/viz/framework/common/util/TypeUtils","sap/viz/chart/chains/BaseChains","sap/viz/framework/common/util/DataUtils","sap/viz/framework/binding/BindingManager"],function e(t,i,a,r){var o={};var n=["GetDimensionsFromFlattable","GetMeasuresFromFlattable","GetContext","OnBindingFinished","OnBindingStart"];o=i.extend("treemap",n);var l=function(e){var i=e.title.rowArray;var r=i.length;var o={};var n=e.weight?e.weight.values:[];var l=e.color?e.color.values:[];var s=e.context?e.context.values:[];for(var u=0;u<r;u++){var c,h=i[u].length,p=i[u],d;h=p.length;c=o;for(var f=0;f<h;f++){d=a.getDimensionValue(p[f]);if(!c[d]){c[d]={title:p[f]}}c=c[d];if(f!==h-1){c.weight=c.weight||0;c.weight+=+n[u]>0?+n[u]:0;if(!c.children){c.children={}}c=c.children}else{c.weight=n[u];c.color=l[u];c.context=[];if(t.isArray(c.weight)){c.weight=c.weight[0]}if(t.isArray(c.color)){c.color=c.color[0]}for(var v=0;v<s.length;++v){c.context.push(s[v][u])}}}}return o};var s=function(e){var t={};t.hierarchy=e.title?e.title.metaData:[];t.color=e.color?e.color.metaData:[];t.weight=e.weight?e.weight.metaData:[];return t};o.treemapGetBindingSeries=function(e,t,i,a,r,o){var n=l(a);a.series=n;var u=s(a);return{data:n,metaData:u}};Object.keys(o).forEach(function(e){r.registerChain(e,o[e])});return o});define("sap/viz/chart/behavior/config/AxisBehaviorConfigForTreeMap",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o,n){var l=t.BEHAVIOR,s="v-axis-item",u="v-nonLeafDimensionLabel",c=e.CSS.CLASS,h="info/treemap",p="#cccccc",d="#808080";function f(e){var i=e.getProperties().get("interaction.selectability");if(!i){return false}var a=i.mode.toUpperCase();var r=e.getNodes(e.NodeType.TREE_MAP_ITEM);if(!i.axisLabelSelection||a===t.SELECTION_MODE.NONE||a===t.SELECTION_MODE.SINGLE||!r.node()){return false}else{return true}}var v=function(e,t){var i=r.getContext(e.data.currentTarget);i=a.extend({},i);delete i.level;delete i.levelNum;delete i.realLabelWidth;return o.getDataPointIds(i,t)};var g=[{id:"hover_on_axis_label_treemap",triggerEvent:{name:"hover",targets:s,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}t.fireEvent("processUnhighlight");d3.select(e.data.currentTarget).attr("fill",p).attr("opacity",e.data.byKeyboard?0:1).classed(c.HOVER_SHADOW,true);var i=v(e,t);t.fireEvent("processHighlight",{targets:i})}},{id:"hover_on_non_axis_label_treemap",triggerEvent:{name:"hover",excludeTargets:[s,e.CSS.CLASS.MBCLEGENDITEM,e.CSS.CLASS.LEGENDITEM],supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}t.fireEvent("processUnhighlight")}},{id:"hover_on_non_leaf_dimension_label_treemap",triggerEvent:{name:"hover",targets:u,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}t.fireEvent("processUnhighlight");d3.select(e.data.currentTarget.previousElementSibling).attr("fill",p).attr("opacity",1).classed(c.HOVER_SHADOW,true);var i=v(e,t);t.fireEvent("processHighlight",{targets:i})}},{id:"click_on_non_leaf_dimension_label_treemap",triggerEvent:{name:"click",targets:u,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}var i=r.getContext(e.data.currentTarget.previousElementSibling);i=a.extend({},i);delete i.level;delete i.levelNum;delete i.realLabelWidth;var n=o.getDataPointIds(i,t);t.fireEvent("processSelection",{targets:n,deselectable:true,ctrlKeyPressed:e.data.ctrlKey});t.fireEvent("processMultipleSelectionTooltip",{targets:n,point:e.data.point})}},{id:"cleanAxisHoverEffect_treemap",triggerEvent:{name:"cleanAxisHoverEffect",supportedChartTypes:h},handler:function(e,t){t.getNodes(t.NodeType.AXIS_ITEM).attr("opacity","0").classed(c.HOVER_SHADOW,false).classed(c.FOCUS_SHADOW,false)}},{id:"click_on_axis_label_treemap",triggerEvent:{name:"click",targets:s,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}var i=v(e,t);t.fireEvent("processSelection",{targets:i,deselectable:true,ctrlKeyPressed:e.data.ctrlKey});t.fireEvent("processMultipleSelectionTooltip",{targets:i,point:e.data.point})}},{id:"down_on_axis_label_treemap",triggerEvent:{name:"down",targets:s,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}d3.select(e.data.currentTarget).attr("fill",d).attr("opacity",1).classed(c.FOCUS_SHADOW,true).classed(c.HOVER_SHADOW,false)}},{id:"down_on_non_leaf_dimension_label_treemap",triggerEvent:{name:"down",targets:u,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}d3.select(e.data.currentTarget.previousElementSibling).attr("fill",d).attr("opacity",1).classed(c.FOCUS_SHADOW,true).classed(c.HOVER_SHADOW,false)}},{id:"up_on_axis_label_treemap",triggerEvent:{name:"up",targets:s,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}if(i.isMobile()){d3.select(e.data.currentTarget).attr("fill",p).attr("opacity",0).classed(c.HOVER_SHADOW,true).classed(c.FOCUS_SHADOW,false)}else{d3.select(e.data.currentTarget).attr("fill",p).attr("opacity",1).classed(c.HOVER_SHADOW,true).classed(c.FOCUS_SHADOW,false)}}},{id:"up_on_non_leaf_dimension_label_treemap",triggerEvent:{name:"up",targets:u,supportedChartTypes:h},handler:function(e,t){if(!f(t)){return}if(i.isMobile()){d3.select(e.data.currentTarget.previousElementSibling).attr("fill",p).attr("opacity",0).classed(c.HOVER_SHADOW,true).classed(c.FOCUS_SHADOW,false)}else{d3.select(e.data.currentTarget.previousElementSibling).attr("fill",p).attr("opacity",1).classed(c.HOVER_SHADOW,true).classed(c.FOCUS_SHADOW,false)}}}];n.registerAll(g);return g});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForTreeMap",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/framework/interaction/InteractionUtils","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r,o){var n=["info/treemap"];n=a.addTrellisType(n);var l=e.CSS.CLASS;var s=[{id:"selectDataPoint_tree",triggerEvent:{name:"selectDataPoint",supportedChartTypes:n},handler:function(e,a){if(e.data.targets[0]&&e.data.targets[0].parentNode){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o=a.getProperties().get("interaction.selected");r.forEach(function(e){i.drawStroke(a,e,"rect",o.stroke,1);i.drawFill(a,e,"rect",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}}},{id:"deselectDataPoint_tree",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:n},handler:function(e,a){if(e.data.targets[0]&&e.data.targets[0].parentNode){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o;r.forEach(function(r){if(e.data.isAnyOtherSelected){o=a.getProperties().get("interaction.deselected")}else{o=a.getProperties().get("plotArea.dataPoint")}i.drawStroke(a,r,"rect",o.stroke,1);i.drawFill(a,r,"rect",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}}},{id:"hoverOnDataPoint_tree",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:n},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o=a.getProperties().get("interaction.hover");r.forEach(function(r){if(!e.data.byKeyboard){i.drawStroke(a,r,"rect",o.stroke,2)}i.drawFill(a,r,"rect",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}},{id:"unhoverOnDataPoint_tree",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:n},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o;r.forEach(function(e){if(d3.select(e).classed(l.DATAPOINTSELECTED)){o=a.getProperties().get("interaction.selected")}else{var r=a.getStatus("selectedDataPoints");if(r.length){o=a.getProperties().get("interaction.deselected")}else{o=a.getProperties().get("plotArea.dataPoint")}}i.drawStroke(a,e,"rect",o.stroke,1);i.drawFill(a,e,"rect",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}},{id:"clearPlot_tree",triggerEvent:{name:"clearPlot",supportedChartTypes:n},handler:function(e,a){a.fireEvent(e,true);var r=a.getNodes(a.NodeType.DATA_POINT,false);if(!r||!r.length){return}var o=e.data.isGray;var n;r.forEach(function(e){if(o){n=a.getProperties().get("interaction.deselected")}else{n=a.getProperties().get("plotArea.dataPoint")}i.drawStroke(a,e,"rect",n.stroke,1);i.drawFill(a,e,"rect",n,t.isExist(a.getProperties().get("plotArea.markerRenderer")))})}},r.getDeselectEvent("click_on_non_selection_tree",n,i.getDeselAllExTargets())];o.registerAll(s)});define("sap/viz/chart/behavior/config/handler/MBCLegendBehaviorHandler",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DOM","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/chart/behavior/config/AlignToUtil"],function(e,t,i,a,r,o,n,l){var s=t.BEHAVIOR,u=e.CSS.CLASS;var c=function(){};c.prototype={standAloneInitialized:function(e,t){t.getProperties().origin.add({legend:{mouseDownShadow:{color:"#808080"},hoverShadow:{color:"#cccccc"}},interaction:{selectability:{legendSelection:true}}})},hover:function(t,i){if(!n.isLegendTriggerable(i,i.NodeType.MBC_LEGEND_ITEM)){return}i.fireEvent("processUnhighlight");if(t.data.byKeyboard){var r=i.getProperties().get("interaction.keyboard");r.color=i.getEffectManager().register({fillColor:r.color});d3.select(t.data.currentTarget).attr("stroke",r.color).attr("stroke-width",r.width).attr("stroke-dasharray","1, 1").attr("shape-rendering","crispEdges")}else{d3.select(t.data.currentTarget).attr("stroke",n.getColorProperty(i,"legend.hoverShadow",e.MBCLEGEND.HOVER_SHADOW_COLOR)).attr("stroke-width",e.MBCLEGEND.VISIBLE_STROKE_WIDTH).attr("stroke-dasharray",undefined).attr("shape-rendering",undefined).classed(u.HOVER_SHADOW,true)}if(!t.data.byKeyboard){n.resetMBCLegendSelectionEffect(i)}var l=a.extend({},o.getContext(t.data.currentTarget).ctx);delete l.measureName;var s=this._getTargets(l,t,i);i.fireEvent("processHighlight",{targets:s})},syncSelectedMBCLegendItems:function(e,t){n.updateCorrespondingSelectedLegendItems(t,true)},nonHover:function(e,t){if(!n.isLegendTriggerable(t,t.NodeType.MBC_LEGEND_ITEM)||!n.isLegendTriggerable(t,t.NodeType.LEGEND_ITEM)){return}t.fireEvent("processUnhighlight")},cleanMBCHoverEffect:function(e,t){t.getNodes(t.NodeType.MBC_LEGEND_ITEM).classed(u.HOVER_SHADOW,false).classed(u.FOCUS_SHADOW,false).attr("stroke-width",0).attr("stroke-dasharray",undefined).attr("shape-rendering",undefined);n.resetMBCLegendSelectionEffect(t)},click:function(e,t){if(!n.isLegendTriggerable(t,t.NodeType.MBC_LEGEND_ITEM)){return}var i=a.extend({},o.getContext(e.data.currentTarget).ctx);delete i.measureName;var s=this._getTargets(i,e,t);t.fireEvent("processSelection",{targets:s,deselectable:true,ctrlKeyPressed:e.data.ctrlKey});var u=r.parent(e.data.target,".v-groups");var c=l.getMBCTooltipData(e,t,s,e.data.target,u);t.fireEvent("processMultipleSelectionTooltip",c)},_getTargets:function(e,t,i){return n.getDataPointIds(e,i)},mouseDown:function(t,i){if(!n.isLegendTriggerable(i,i.NodeType.MBC_LEGEND_ITEM)){return}var a=n.getColorProperty(i,"legend.mouseDownShadow",e.MBCLEGEND.HOVER_SHADOW_MOUSE_DOWN_COLOR);n.resetMBCLegendSelectionEffect(i);d3.select(t.data.currentTarget).attr("stroke",a).attr("stroke-width",e.MBCLEGEND.VISIBLE_STROKE_WIDTH).classed(u.FOCUS_SHADOW,true)},mouseUp:function(t,a){if(!n.isLegendTriggerable(a,a.NodeType.MBC_LEGEND_ITEM)){return}var r=n.getColorProperty(a,"legend.hoverShadow",e.MBCLEGEND.HOVER_SHADOW_COLOR);if(i.isMobile()){d3.select(t.data.currentTarget).attr("stroke",null).attr("stroke-width",null).classed(u.FOCUS_SHADOW,false)}else{d3.select(t.data.currentTarget).attr("stroke",r).attr("stroke-width",e.MBCLEGEND.VISIBLE_STROKE_WIDTH).classed(u.FOCUS_SHADOW,false)}n.resetMBCLegendSelectionEffect(a)}};return c});define("sap/viz/chart/behavior/config/MBCLegendBehaviorConfig",["sap/viz/framework/common/util/Constants","sap/viz/chart/behavior/config/handler/MBCLegendBehaviorHandler","sap/viz/framework/interaction/BehaviorManager","sap/viz/chart/behavior/config/SelectionTreeUtil","sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o){var n="v-mbc-legend-item";var l=[{id:"mbcLegendBehaviorDefinition",handler:t,handlerType:"class",supportedChartTypes:["info/treemap","info/heatmap","info/tagcloud"],triggerEvent:[{name:"standAloneInitialized",method:"standAloneInitialized"},{name:"hover",targets:n,method:"hover"},{name:"hover",excludeTargets:[n,e.CSS.CLASS.AXIS.LABEL_SELECTION,e.TREE_MAP.NON_LEAF_DIMENSION_LABEL],method:"nonHover"},{name:"cleanMBCHoverEffect",excludeTargets:n,method:"cleanMBCHoverEffect"},{name:"click",targets:n,method:"click"},{name:"syncSelectedMBCLegendItems",excludeTargets:n,method:"syncSelectedMBCLegendItems"},{name:"down",targets:n,method:"mouseDown"},{name:"up",targets:n,method:"mouseUp"}]}];var s=function(){};r.extend(s,t);s.prototype.click=function(e,t){if(a.isSelectable(t,"MBC")){s.superclass.click.apply(this,arguments)}};var u=o.clone(l,true);u[0].handler=s;i.registerAll(l,u);return l});define("sap/viz/chart/views/TreeChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/plots/treemap/TreeMapPlot","sap/viz/chart/components/legend/MBCLegend","sap/viz/chart/scales/QuantizeScaleProcessor","sap/viz/chart/chains/TreeChains","sap/viz/chart/behavior/config/AxisBehaviorConfigForTreeMap","sap/viz/chart/behavior/config/DataPointBehaviorConfigForTreeMap","sap/viz/chart/behavior/config/MBCLegendBehaviorConfig"],function e(t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments)};t.extend(o,i);o.prototype._getDataItems=function(){return["title","weight","color","series"]};o.prototype._createPlotContainer=function(){this._plotArea=new a(this.runtime(),{name:"plotArea"});this.setChild("plot",this._plotArea,{priority:3})};o.prototype._getLegendDefinition=function(){return[r]};return o});define("sap/viz/chart/metadata/bindings/TreeBindings",[],function e(){var t=[{id:"title",name:"IDS_TITLE",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,role:"layout.tree",acceptMND:false},{id:"color",name:"IDS_COLOR",type:"Measure",min:0,max:1,role:"mark.quantizeColor"},{id:"weight",name:"IDS_WEIGHT",type:"Measure",min:1,max:1,role:"layout.value"}];return t});define("sap/viz/chart/components/axis/ReversedCategoryAxis",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/CategoryScale","sap/viz/chart/components/axis/CategoryAxis","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments)};e.extend(o,i);o.prototype.setData=function(e,i){o.superclass.setData.apply(this,arguments);if(e.scale){var r=a.clone(e.scale.getDomain());this._scale=new t(r.reverse(),[0,1])}};o.prototype.render=function(e){o.superclass.render.apply(this,arguments);if(this.getParent()&&this.getParent().node()){var t=this.getParent().node();r.setContext(t,{name:this.getName()})}};o.prototype.destroy=function(){o.superclass.destroy.call(this);this._scale=null};return o});define("sap/viz/chart/components/datalabels/HeatMapDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/GeometryUtils","sap/viz/framework/common/util/TypeUtils"],function e(t,i,a,r,o){var n=function(e,t){n.superclass.constructor.apply(this,arguments);this._ignoreEmptyDataLabel=true};t.extend(n,i);n.prototype._getDataLabelInfo=function(e){var t=a.getContext(e);var i=this._data.color.metaData[0].id;return{key:i,value:o.isExist(t[i])?t[i]:null}};n.prototype._computeDataLabelTranslate=function(e,t,i,a,o){var n=false;if(e.childNodes[1]&&e.childNodes[1].textContent){n=true;t.f+=r.getBBox(e.childNodes[1]).height/2}return this._computeDataLabelPosition(t,this._fixBBoxWhenInvisible(e),i,a,o,n)};n.prototype._computeDataLabelPosition=function(e,t,i,a,r,o){var n,l;var s=t.x+e.e;var u=t.y+e.f;n=s+t.width/2-(a.x+a.width/2);if(o){l=u+t.height/2-a.y}else{l=u+t.height/2-a.y/2}return[n,l]};n.prototype.hideConditional=function(e){var t;for(t=e.length-1;t>=0;t--){var i=e[t].dataPoint;var a=e[t].node;var r=a.getBoundingClientRect();var o=i.getBoundingClientRect();if(r.width>o.width||r.bottom>o.bottom){if(a&&a.parentNode){a.parentNode.removeChild(a)}e.splice(t,1)}}return n.superclass.hideConditional.apply(this,arguments)};return n});define("sap/viz/chart/components/plots/HeatMapPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/renderers/BarRenderer","sap/viz/chart/components/datalabels/HeatMapDataLabels","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/framework/common/util/SVG","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/util/ColorUtil","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/HeatMapDataPointNavigator","sap/viz/chart/components/util/ChartConstants","sap/viz/chart/behavior/config/DataPointBehaviorConfigForBar"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A){var b={fontSize:"12px",fontWeight:"normal",fontFamily:"'Open Sans', Arial, Helvetica, sans-serif",fontStyle:"normal"};var x=function(e,t){x.superclass.constructor.apply(this,arguments);e.zoneManager().add(s.plot(this));e.zoneManager().add(u.plot(this));this._ellipsisText=[]};t.extend(x,i);x.prototype._getXHandlers=function(){return[r.getCategoryScaleHandler("categoryAxis",{isHorizontal:true,itemScaleHandler:a.get(true,{forBar:false})})]};x.prototype._getYHandlers=function(){return[r.getCategoryScaleHandler("categoryAxis2",{isHorizontal:false,itemScaleHandler:a.get(true,{forBar:false})})]};x.prototype.setData=function(e){this._isOnlyOneCategory=false;if(!e.categoryAxis2||!e.categoryAxis2.metaData){this._isOnlyOneCategory=true}e._isOnlyOneCategory=this._isOnlyOneCategory;x.superclass.setData.apply(this,arguments)};x.prototype._applyChanges=function(){x.superclass._applyChanges.apply(this,arguments);this._borderWidth=this._properties.get("border.visible")?1:0;var e=this._properties.get("dimensionLabel");if(e&&e.style){b=e.style;this._dimensionLabelVisible=e.visible;var t=this._semanticMgr;this._dimensionLabelSemantic=t.hasRuleForProp("dimensionLabel")||t.othersStyleHas("dimensionLabel")}if(e&&e.renderer){this._dimensionLabels=e}};x.prototype._calculatePreferredLayout=function(){var e=this._size;var t=e.height;var i=e.width;var a=this._getSeries()[0];var r=-Number.MAX_VALUE;var o;var n;var l;var s;var u;var c=[];var h;var p=this._borderWidth;if(this._isOnlyOneCategory){if(a.length==1){o=t;n=i;s=1;l=1}else{for(l=1;l<=a.length;l++){o=t/l;s=Math.ceil(a.length/l);n=i/s;u=s*l-a.length;h=(o-n)*(o-n);if(h<1){h=1}if(u===0&&h===0){r=1+1}else if(u===0&&h!==0){r=1+1/h}else if(u!==0&&h===0){r=1+1}else{r=1+1/h}c.push({iRow:l,iCol:s,rHeight:o,rWidth:n,varianceRec:h,emptyCellNum:u,score:r})}var d=0;var f=-1;for(var v=0;v<c.length;v++){if(c[v].score>d){d=c[v].score;f=v}}o=c[f].rHeight;n=c[f].rWidth;s=c[f].iCol;l=c[f].iRow}for(var g=0;g<a.length;g++){a[g].width=n-2*p;a[g].height=o-2*p;a[g].x=n*(g%s)+p;a[g].y=o*Math.floor(g/s)+p}}else{s=this._data.categoryAxis.rowArray.length;l=this._data.categoryAxis2.rowArray.length;o=t/l;n=i/s;for(var m=0;m<a.length;m++){a[m].width=n-p;a[m].height=o-p;a[m].x=n*Math.floor(m/l)+p/2;a[m].y=o*(m%l)+p/2}}return a};x.prototype._buildWrapperConfig=function(e){var t=this._getColor(e);var i={graphic:{width:e.width,height:e.height,fill:t,opacity:1},ctx:e.dp.context(),effectManager:this._effectManager,categoryAxis:e.categoryAxis};if(this._strokeProp&&this._strokeProp.visible&&i.graphic){i.graphic.stroke=this._strokeProp.color;i.graphic.strokeWidth="1px"}i=this._getFillColorConfig(i,i.ctx,e.options,e);if(i.graphic.fill){i.graphic.fill=f.convertColor(i.graphic.fill)}if(i.graphic.color){i.graphic.color=f.convertColor(i.graphic.color)}return i};x.prototype._drawDimensionLabel=function(e){var t;var i="";var a=e.categoryAxis;var r;for(t=0;t<a.length;t++){if(a[t]){i+=g.getLabelText(a[t])+" / "}else{i+="null /"}}i=i.slice(0,i.length-2);var o={};var n=this.runtime().envManager();o.reverseDots=n&&n.reverseDots();var l=b["fontSize"];var s=b["fontWeight"];var u=b["fontFamily"];var c=b["fontStyle"];var h=b["color"];var f={fontSize:l,fontWeight:s,fontFamily:u,fontStyle:c,color:h};var v={ctx:e.ctx,text:i,styles:f,defaultColor:"#ffffff",dpSize:{width:e.graphic.width,height:e.graphic.height},isMeasureText:true,background:e.graphic.fill,dataLabelColor:this._properties.get("dataLabel.style.color"),ellipsisText:this._ellipsisText,ellipsisOptions:o,colorRange:this._properties.get("dataLabel.style.colorRange")};if(this._dimensionLabels&&this._dimensionLabels.renderer){r=this._dimensionLabels.renderer(v,S.expose)}if(!r&&this._showDimensionLabelFor(v.ctx)){var m=this._semanticMgr;var y;if(m.hasRuleForProp("dataLabel")){y=m.analyzeDataPointForProperty(v.ctx,"dataLabel",false,{})}if(y){v.dataLabelVisible=y.dataLabel}else{v.dataLabelVisible=this._properties.get("dataLabel.visible")}r=S(v)}if(r){p.setContext(r,v.ctx);var _=d.getTextBBox(r);var A=d3.select(r).attr("class","v-dimensionlabel v-heatmapdimensionlabel").attr("fill-opacity","1").attr("x",v.dpSize.width/2-_.width/2).attr("y",v.dpSize.height/2-(_.height/2+_.y));var x=null;if(n){x=n.textAnchor()}A.attr("text-anchor",x)}return r};x.prototype._showDimensionLabelFor=function(e){if(this._dimensionLabelSemantic){var t=this._semanticMgr;var i=t.analyzeDataPointForProperty(e,"dimensionLabel");if(i){return i.dimensionLabel}}return this._dimensionLabelVisible};function S(e){var t;var i=e.styles["fontSize"];var a=e.styles["fontWeight"];var r=e.styles["fontFamily"];var o=e.styles["fontStyle"];var n=e.styles["color"];if(!n&&e.dataLabelVisible){if(e.colorRange==="outside"){n=m.getDataLabelColor(e.background)}else{n=e.dataLabelColor}}if(!n){n=m.getDataLabelColor(e.background)}i=d.validateFontStyle(i);a=d.validateFontStyle(a);var l=0;var s=d.superFastMeasure(e.text,i,a,r);if(s.height>e.dpSize.height){l=-1}else{t=c.create("text");l=e.dpSize.width;var u="font-size:"+i+";";u+="font-weight:"+a+";";u+="font-family:"+r+";";u+="font-style:"+o+";";u+="fill:"+n+";";var h=null;for(var p=0;p<e.ellipsisText.length;p++){var f=e.ellipsisText[p];if(e.text.indexOf(f)===0){h=e.text.length>f.length?f+"...":f;break}}if(h){t.textContent=h;if(h!==e.text){t.appendChild(document.createElementNS(t.namespaceURI,"title")).textContent=e.text}e.text=h}else{e.text=d.ellipsis(e.text,t,l,u,e.ellipsisOptions);if(e.text.length>0){var v=e.text.indexOf("...");var g=3;if(e.ellipsisOptions.reverseDots){e.ellipsisText.push(v<0?e.text:e.text.substring(g))}else{e.ellipsisText.push(v<0?e.text:e.text.substring(0,v))}}}d3.select(t).attr("font-size",i).attr("font-weight",a).attr("font-family",r).attr("font-style",o).attr("fill",n)}return t}S.expose={renderer:S};x.prototype._drawDatapoint=function(e){var t=c.create("g");var i=o(e);t.appendChild(i);return t};x.prototype._drawOneCategoryDataPoint=function(e){var t=c.create("g");var i=o(e);var a=this._drawDimensionLabel(e);t.appendChild(i);if(a){t.appendChild(a)}return t};x.prototype._filterHidden=function(e){var t=this._data.categoryAxis.metaData.map(function(e){return e.hidden});if(t.length>0){e.forEach(function(e){e.categoryAxis=t.reduce(function(t,i,a){return i?t:t.concat(e.categoryAxis[a])},[])})}return e};x.prototype._drawDatapoints=function(e){var t=this._filterHidden(this._calculatePreferredLayout());var i,a;this._dataPointRenderer=this._isOnlyOneCategory?this._drawOneCategoryDataPoint:this._drawDatapoint;var r,o,n,s,u;var d=c.create("g");d.setAttribute("class",l.CSS.CLASS.DATAPOINT_GROUP);this._ellipsisText=[];var f={disableSemantic:false};for(o=0;o<t.length;o++){s=t[o];s.options=f;u=this._buildWrapperConfig(s);u.twoDirection=true;r=this._dataPointRenderer(u);h.setDataId(r,o);h.setDataPointId(r,s.dp.id);p.setContext(r,u.ctx);p.setData(r,{color:u.graphic.fill,strokeWidth:r.querySelector("rect").getAttribute("stroke-width")});r.setAttribute("class",l.CSS.CLASS.DATAPOINT+" "+l.CSS.CLASS.MORPHABLEDATAPOINT+" "+l.CSS.CLASS.DATAPOINTDEFAULT);r.setAttribute("transform","translate("+s.x+","+s.y+")");d.appendChild(r)}e.node().appendChild(d);this._drawHeatMapDataLabels(e)};x.prototype.destroy=function(){x.superclass.destroy.call(this);this._dataPointRenderer=null;this._borderWidth=null;this._properties=null;this._isOnlyOneCategory=null;if(this._dimensionLabels&&this._dimensionLabels.destroy){this._dimensionLabels.destroy()}this._dimensionLabels=null;this._ellipsisText=null};x.prototype._drawHeatMapDataLabels=function(e){var t=e.select(".v-datapoint-group");if(!t.empty()){this._drawDataLabels(e,t.node())}};x.prototype._getDataLabels=function(e,t){return new n(t,{name:e})};y.register(A.DATAPOINT_NAVIGATOR,A.HEATMAP,_);return x});define("sap/viz/chart/components/plotareas/XXPlotArea",["sap/viz/framework/common/util/oo","sap/viz/chart/components/container/XYContainer","sap/viz/chart/components/axis/CategoryAxis","sap/viz/chart/components/axis/ReversedCategoryAxis","sap/viz/chart/components/plots/HeatMapPlot"],function e(t,i,a,r,o){var n=function(e,t){n.superclass.constructor.apply(this,arguments);this._init()};t.extend(n,i);n.prototype._init=function(){this._plot=new o(this.runtime(),{name:"plotArea"});this._categoryAxis=new a(this.runtime(),{name:"categoryAxis"});this._categoryAxis2=new r(this.runtime(),{name:"categoryAxis2"});this.setLayoutSequence(["left","right","bottom","top"]);this.setChild("categoryAxis",this._categoryAxis,{position:"bottom"});this.setChild("categoryAxis2",this._categoryAxis2,{position:"left"});this.setChild("plot",this._plot,{position:"center"})};n.prototype.setData=function(e){n.superclass.setData.apply(this,arguments);var t=false;if(!e.categoryAxis2||!e.categoryAxis2.scale){this._categoryAxis2=null;t=true}else{this._categoryAxis2.setData(e.categoryAxis2)}this._categoryAxis.setData(e.categoryAxis);this._categoryAxis.isAxisBodyOptional(t);this._plot.setData(e)};n.prototype.destroy=function(){n.superclass.destroy.call(this);this._plot=null;this._categoryAxis=null;this._categoryAxis2=null};return n});define("sap/viz/chart/chains/XXChains",["sap/viz/chart/chains/BaseChains","sap/viz/framework/binding/BindingManager"],function e(t,i){var a={};var r=["GetDimensionsFromFlattable","GetMeasuresFromFlattable","GetContext","OnBindingFinished","OnBindingStart"];a=t.extend("xx",r);a.xxGetBindingSeries=function(e,t,i,a,r,o){var n=[];var l=n[0]=[];var s,u,c,h,p;var d=a.context,f=d&&d.metaData?d.metaData[0]:undefined,v=d&&d.values&&d.values.length>0?d.values:undefined,g=d&&f&&v;if(!a.categoryAxis2||!a.categoryAxis2.values){c=a.categoryAxis.rowArray.length;for(s=0;s<c;s++){p={categoryAxis:a.categoryAxis.rowArray[s],color:a.color.values[s]};if(g){p.context=[v[0][s]]}l.push(p)}}else{c=a.categoryAxis.rowArray.length;h=a.categoryAxis2.rowArray.length;for(s=0;s<c;s++){for(u=h-1;u>-1;u--){p={categoryAxis:a.categoryAxis.rowArray[s],categoryAxis2:a.categoryAxis2.rowArray[u],color:a.color.values[s][u]};if(g){p.context=[];for(var m=0;m<v.length;++m){p.context.push(v[m][s][u])}}l.push(p)}}}a.series=n};Object.keys(a).forEach(function(e){i.registerChain(e,a[e])});return a});define("sap/viz/chart/views/XXChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/plotareas/XXPlotArea","sap/viz/chart/components/legend/MBCLegend","sap/viz/chart/scales/QuantizeScaleProcessor","sap/viz/chart/chains/XXChains","sap/viz/chart/behavior/config/MBCLegendBehaviorConfig"],function e(t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments)};t.extend(o,i);o.prototype._getLegendDefinition=function(){return[r]};o.prototype._getDataItems=function(){return["categoryAxis","categoryAxis2","series","color"]};o.prototype._createPlotContainer=function(){this._plotArea=new a(this.runtime());this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};return o});define("sap/viz/chart/metadata/bindings/XXBindings",[],function e(){var t=[{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"layout.category"},{id:"categoryAxis2",name:"IDS_CATEGORY_AXIS2",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"layout.secondCategory"},{id:"color",name:"IDS_COLOR",type:"Measure",min:1,max:1,role:"mark.quantizeColor"}];return t});define("sap/viz/chart/components/datalabels/StackedCombinationDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/datalabels/StackedDataLabels","sap/viz/chart/components/util/CombinationDataLabelUtil","sap/viz/chart/components/datalabels/LineDataLabels","sap/viz/chart/components/datalabels/CombinationDataLabels"],function(e,t,i,a,r,o,n){var l=function(e,t){l.superclass.constructor.apply(this,arguments);this.isHorizontal=t.isHorizontal;this._labelPosition="outside";this._stackedLabelPosition="inside";this._lineLabelPosition="outside"};e.extend(l,a);l.prototype._computeDataLabelPosition=function(e,t,r,n,l,s){if(i.getData(s).type!=="line"){return a.prototype._computeDataLabelPosition.apply(this,arguments)}else{return o.prototype._computeDataLabelPosition.apply(this,arguments)}};l.prototype._computeDataLabelTranslate=function(e){if(i.getData(e).type!=="line"){return a.prototype._computeDataLabelTranslate.apply(this,arguments)}else{return o.prototype._computeDataLabelTranslate.apply(this,arguments)}};l.prototype.hideConditional=function(e,i){var a;var r;var o=new Array(i.length);for(a=0;a<i.length;a++){o[a]=i[a].getBoundingClientRect()}for(a=e.length-1;a>=0;a--){var n=e[a];var s=n.node;var u=s.getBoundingClientRect();var c=n.dataPoint;var h=this.indexOfDataLabelIntersectDataPoints(u,o,i,c);if(h!==-1){t.remove(s);e.splice(a,1)}}return l.superclass.hideConditional.apply(this,arguments)};l.prototype.allowIntersectionCheck=function(e){var t=i.getData(e).type;var a=false;if(t=="line"){a=true}return a};l.prototype.getDataLabelDefaultPosition=function(e){if(i.getData(e).type=="line"){this._labelPosition=this._lineLabelPosition}else{this._labelPosition=this._stackedLabelPosition}};l.prototype.drawZero=function(e){if(i.getData(e).type=="line"){return true}else{return false}};l.prototype.intersectResult=function(e,t,i,a){return r.isIntersectedHelper.call(this,e,t,i,a)};l.prototype.isDataLabelOutOfDataPoint=n.prototype.isDataLabelOutOfDataPoint;return l});define("sap/viz/chart/components/accessibility/StackedCombinationDataPointNavigator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/util/SeriesUtil","sap/viz/chart/components/accessibility/BaseDataPointNavigator","sap/viz/chart/components/accessibility/StackedColumnDataPointNavigator","sap/viz/chart/components/accessibility/LineDataPointNavigator"],function(e,t,i,a,r){function o(e){o.superclass.constructor.apply(this,arguments);this._dataShapes=null;this._seriesTypeLookup=[];this._stackedColumnNavigator=null;this._lineNavigator=null;this._lineSortedDPInCategory=[];this._barDPInCategory=[];this._stackedSeries=[];this._lineSeries=[];this._initSubComponent(e)}e.extend(o,i);var n=o.prototype;n._initSubComponent=function(e){if(this._series){this._setupSeriesTypeTable();for(var t=0;t<this._seriesTypeLookup.length;t++){if(this._seriesTypeLookup[t]===this._constants.BAR){this._stackedSeries.push(this._series[t]);this._lineSeries.push(undefined)}else{this._stackedSeries.push(undefined);this._lineSeries.push(this._series[t])}}var i={isVerticalRender:e.isVerticalRender,dataModel:e.dataModel,series:this._stackedSeries,isCombination:true};this._stackedColumnNavigator=new a(i);var o={isDual:e.isDual,isVerticalRender:e.isVerticalRender,dataModel:e.dataModel,series:this._lineSeries,propertyManager:e.propertyManager};this._lineNavigator=new r(o)}};n.destroy=function(){o.superclass.destroy.apply(this,arguments);if(this._stackedColumnNavigator){this._stackedColumnNavigator.destroy()}if(this._lineNavigator){this._lineNavigator.destroy()}this._stackedColumnNavigator=null;this._lineNavigator=null;this._stackedSeries=null;this._lineSeries=null;this._lineSortedDPInCategory=null;this._barDPInCategory=null};n.left=function(e){return this._DPRouter(e,this._constants.LEFT)};n.right=function(e){return this._DPRouter(e,this._constants.RIGHT)};n.up=function(e){return this._DPRouter(e,this._constants.UP)};n.down=function(e){return this._DPRouter(e,this._constants.DOWN)};function l(e){return e&&!e.ignore}n._DPRouter=function(e,t){var i=this.getDataPoint(e);var a=null;if(i){var r=this.getDataPoint(e).address();s.call(this,r[0]);var o=this._getSeriesType(i);if(o===this._constants.BAR){switch(t){case this._constants.UP:a=this._stackedColumnNavigator.up(e);if(this._isVerticalRender&&!l(a)){a=this._getFirstDPByTypeInCategory(this._constants.LINE,r[0])}break;case this._constants.DOWN:a=this._stackedColumnNavigator.down(e);break;case this._constants.LEFT:a=this._stackedColumnNavigator.left(e);break;case this._constants.RIGHT:a=this._stackedColumnNavigator.right(e);if(!this._isVerticalRender&&!l(a)){a=this._getFirstDPByTypeInCategory(this._constants.LINE,r[0])}break}}else if(o===this._constants.LINE){switch(t){case this._constants.UP:a=this._lineNavigator.up(e);break;case this._constants.DOWN:a=this._lineNavigator.down(e);if(this._isVerticalRender&&!l(a)){a=this._getFirstDPByTypeInCategory(this._constants.BAR,r[0])}break;case this._constants.LEFT:a=this._lineNavigator.left(e);if(!this._isVerticalRender&&!l(a)){a=this._getFirstDPByTypeInCategory(this._constants.BAR,r[0])}break;case this._constants.RIGHT:a=this._lineNavigator.right(e);break}}}return a};n._getFirstDPByTypeInCategory=function(e,t){var i=e===this._constants.BAR?this._barDPInCategory[t]:this._lineSortedDPInCategory[t];for(var a=0;a<i.length;a++){if(l(i[a])){return i[a]}}return null};n._getLastDPByTypeInCategory=function(e,t){var i=e===this._constants.BAR?this._barDPInCategory[t]:this._lineSortedDPInCategory[t];for(var a=i.length-1;a>-1;a--){if(l(i[a])){return i[a]}}return null};function s(e){if(!this._sortedDataPointsByDirection[e]){this.dataPointValueSortInCategory(e)}if(!this._lineSortedDPInCategory[e]){this._lineSortedDPInCategory[e]=[];for(var t=0;t<this._sortedDataPointsByDirection[e].length;t++){var i=this._sortedDataPointsByDirection[e][t];if(this._seriesTypeLookup[i.address()[1]]===this._constants.LINE){this._lineSortedDPInCategory[e].push(i)}}}if(!this._barDPInCategory[e]){this._barDPInCategory[e]=[];var a=this.getColumn(e);for(var r=0;r<a.length;r++){if(this._seriesTypeLookup[a[r].address()[1]]===this._constants.BAR){this._barDPInCategory[e].push(a[r])}}}}n._getLineShortestDPInCategory=function(e,t){var i=this.getDataPoint(e);var a=null;var r=-1;var o=i.address();var n=o[0];var l=this._lineSortedDPInCategory[n].indexOf(i);if(l===-1){return this._lineSortedDPInCategory[n][0]}else{if(t===this._constants.UP||t===this._constants.RIGHT){r=l+1}else if(t===this._constants.DOWN||t===this._constants.LEFT){r=l-1}}if(r>-1&&r<this._lineSortedDPInCategory[n].length){a=this._lineSortedDPInCategory[n][r]}else{}return a};return o});define("sap/viz/chart/components/plots/StackedCombinationPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DOM","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/plots/StackedColumnPlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/plots/BasePlot","sap/viz/chart/components/plots/BaseLinePlot","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/chart/components/renderers/StackedBarRenderer","sap/viz/chart/components/renderers/LineRenderer","sap/viz/chart/components/renderers/SmoothLineRenderer","sap/viz/chart/components/util/DrawUtil","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/LineRendererUtil","sap/viz/chart/components/datalabels/StackedCombinationDataLabels","sap/viz/chart/components/plots/XYPlotFactory","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/StackedCombinationDataPointNavigator","sap/viz/chart/components/util/ChartConstants"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D,w,C){var T="line";var z="bar";var L=function(e,t){L.superclass.constructor.apply(this,arguments);this._barCategoryAxis=u.getCategoryScaleHandler("categoryAxis",{isHorizontal:false,itemScaleHandler:this._getItemScaleHandler()});this._categoryScaleHandler=this._barCategoryAxis;this._lineDataHandler=c.getHandler();this._stackDataHandler=this._getDataHandler();this._drawZeroLineBeforeDatapoints=true;var i=this.runtime().semanticManager();i.setUseSemanticPattern(true);i.setUseSemanticDPLineStyle(true);this._attachMarkManager();this._markerPropName="line.marker";this.dataShapePrimaryAxisPW=this._properties.watch("dataShape.primaryAxis",this._onDataShapeChange.bind(this));this._options.isCombination=true;var a=t&&t.isDualValueAxis;if(a){this.dataShapeSecondaryAxisPW=this._properties.watch("dataShape.secondaryAxis",this._onDataShapeChange.bind(this))}this.lineMarkerShapePW=this._properties.watch("line.marker.shape",this._onDataShapeChange.bind(this));this._lineRenderer=null;this._defaultLineRenderer=b.getDefaultRenderer(this._properties.get("line.isSmoothed"))};t.extend(L,s);L.prototype._isSupportBarPathGenerator=function(){return true};L.prototype.destroy=function(){this.dataShapePrimaryAxisPW.remove();this.dataShapePrimaryAxisPW=null;if(this.dataShapeSecondaryAxisPW){this.dataShapeSecondaryAxisPW.remove();this.dataShapeSecondaryAxisPW=null}this.lineMarkerShapePW.remove();this.lineMarkerShapePW=null;L.superclass.destroy.call(this);this._barCategoryAxis=null;this._categoryScaleHandler=null;this._realSize=null;this._markerD=null;this._lineDataHandler=null;this._stackDataHandler=null;this._reversedSeries=null;this._lineRenderer=null;this._dpPlotNode=null;this._dpParentNode=null;this._extendSize=null};L.prototype._createMainNode=d.prototype._createMainNode;L.prototype._getClipPathAttribute=d.prototype._getClipPathAttribute;L.prototype.zoom=d.prototype.zoom;L.prototype.scroll=d.prototype.scroll;L.prototype._isNeedSimplifyLine=function(){return false};L.prototype._getItemScaleHandler=function(){var e;var t=this._getBarProperties();if(this._options.isDualValueAxis){var i=this._properties.get("dataShape.primaryAxis").indexOf("bar")>-1;var a=this._properties.get("dataShape.secondaryAxis").indexOf("bar")>-1;if(i&&a){t.valueAxis=["valueAxis","valueAxis2"];e=h.get(false,t);delete t.valueAxis}else{e=h.get(false,t)}}else{e=h.get(false,t)}this._itemScaleHandler=e;return e};L.prototype._attachMarkManager=function(){var e=this.runtime().markManager();var t=this._properties.get("dataShape.primaryAxis");var i=this._getMarkerShape();var a=this._properties.parentLevel;var r=[];e.lock();e.setMode("combination");var o=[];o.push(t);r.push(P.call(this,t,i,a));if(this._options&&this._options.isDualValueAxis){var n=this._properties.get("dataShape.secondaryAxis");r.push(P.call(this,n,i,a));o.push(n)}e.setShape(r,i);e.setSeriesShape(o)};function P(e,t,i){var a=[];if(!e||!e.length){return a}for(var r=0;r<e.length;r++){if(e[r]===T){a.push(t)}else{var o=this._getLegendMarkerShape();a.push(o)}}return a}L.prototype._onDataShapeChange=function(){this._attachMarkManager()};L.prototype._getCategoryScaleHandlers=function(e){return[u.getCategoryScaleHandler("categoryAxis",{isHorizontal:e,itemScaleHandler:h.get(false),alignment:"center"})]};L.prototype._getSeriesRenderer=function(){return new f(this._drawLine.bind(this),this._updateLine.bind(this))};L.prototype._applyChanges=function(){L.superclass._applyChanges.apply(this,arguments);var e=this._data["categoryAxis"].scale;var t=this.isHorizontal()?this._realSize.height:this._realSize.width;this._barCategoryAxis.init(e,this._data.series.length,t)};L.prototype._preRender=function(){L.superclass._preRender.apply(this,arguments);this._generateMarkerPath();this._lineRenderer=null};L.prototype._getDataShape=function(e){this._reversedSeries=this._reversedSeries||this._getSeries();var t=this._reversedSeries[e];var i=null;for(var a=0;a<t.length;a++){i=t[a];if(i){break}}if(i){var r="dataShape.primaryAxis";if(!i.hasOwnProperty("valueAxis")){r="dataShape.secondaryAxis"}var o=this._properties.get(r);if(!(o instanceof Array)){o=this._properties.get(r,"defaultValue")}var n;if(i.color){n=i.color.mndIndex}else if(i.color2){n=i.color2.mndIndex}else{n=-1}if(o[n]!==T&&o[n]!==z){o[n]=T}return o[n]}return T};L.prototype._getXPosition=function(e,t,i){var a=this._getDataShape(e)===T;if(this.isHorizontal()){if(a){this._dataHandler={valueAxis:this._lineDataHandler}}else{this._dataHandler=this._stackDataHandler}var r=L.superclass._getXPosition.apply(this,arguments);if(a){return[r[0]+r[1],r[1]]}else{return r}}else{if(a){return L.superclass._getXPosition.apply(this,arguments)}else{return this._getAxisPosition([this._barCategoryAxis],e,t,i)}}};L.prototype._adjustPosition=function(e,t){var i=this._getDataShape(t)===T;if(!i){L.superclass._adjustPosition.apply(this,arguments)}};L.prototype._getYPosition=function(e,t,i){var a=this._getDataShape(e)===T;if(!this.isHorizontal()){if(a){this._dataHandler={valueAxis:this._lineDataHandler}}else{this._dataHandler=this._stackDataHandler}var r=L.superclass._getYPosition.apply(this,arguments);return r}else{if(a){return L.superclass._getYPosition.apply(this,arguments)}else{return this._getAxisPosition([this._barCategoryAxis],e,t,i)}}};L.prototype.getLineRenderer=function(){if(!this._lineRenderer){var e=this._properties;this._lineRenderer=b.getRenderer(e.get("line.lineRenderer"),e.get("line.isSmoothed"))}return this._lineRenderer};L.prototype._isLineVisible=function(){return this._properties.get("line.visible")};L.prototype._drawLine=function(e,t,i,a){if(this._getDataShape(i)!==T){return 0}var r=this._data.series.length-1-i;d.prototype._drawLine.apply(this,[e,t,r,a]);return 1};L.prototype._updateLine=function(e,t,i){this._drawLine(e,t,i,true)};L.prototype._updateDatapoint=function(e,t,i,a){L.superclass._updateDatapoint.apply(this,arguments);if(a.hasOwnProperty("x")&&a.hasOwnProperty("y")){var o=r.getData(e).translate;if(o){o[0]=a.x;o[1]=a.y}}};L.prototype._buildConfig=function(e,t,i){var a=L.superclass._buildConfig.apply(this,arguments);a.graphic.d=this._markerD;if(!this._properties.get("line.marker.visible")){a.graphic.opacity=0}return a};L.prototype._getDataPointRenderer=function(e){if(e==null||this._getDataShape(e)!==T){this._isLineMarker=false;return L.superclass._getDataPointRenderer.apply(this,arguments)}else{this._isLineMarker=true;return this._customMarkerRenderer||v}};L.prototype._getDataLabels=function(e,t){var i=a.extend({},this._options);i.name=e;return new x(t,i)};L.prototype._getPatternConfig=d.prototype._getPatternConfig;L.prototype._updateDatapoints=function(e){var t=this._reversedSeries=this._getSeries();var i=t.length;var a;a=e.select("."+o.CSS.CLASS.DATAPOINT_GROUP).node();var l;for(var s in this._stackDataHandler){if(this._stackDataHandler[s].reset){this._stackDataHandler[s].reset()}}this._lineDataHandler.reset();if(this._seriesRenderer){this._seriesRenderer.resetDataPoints()}var u;var c=0;var h=[],p;for(var d=0;d<i;d++){var f=t[d];if(!f){continue}l=this._getDataPointRenderer(d);if(!l){continue}var m=this._getDataShape(d)===T;var y=this.getSeriesDPStyle(this._reversedSeries?i-d-1:d,null,m);for(var _=0;_<f.length;_++){var b=f[_];if(!b){continue}var x=this._getPosition(d,_,b);if(!x){continue}u=c++;var S=this._getDPOptions(y,m,b);var D=this._buildWrapperConfig(b,x,b.dp.context(),S);D.seqId=u;var w=this._buildData(D);if(m){D.isLineMarker=true;var C=this._createDataPoint(d,_,D,w,x,u,b);var z;if(!this._isBigData){z=this._drawDataPoint(l,C,true);var L=r.getData(z);if(!L){L={}}L.seriesIndex=b.dp._addr[1];L.itemIndex=b.dp._addr[0];r.setData(z,L)}var P=A.find(a,u);if(P){this._updateDatapoint(P,l,D,x);C.setNode(P)}else if(z){a.appendChild(z);C.setNode(z)}if(this._seriesRenderer){this._seriesRenderer.updateDataPoint(d,_,D,x,z)}}else{D.isLineMarker=false;p=h[_]=h[_]||{configs:[],positions:[],currentIds:[],dataPoints:[],addrs:[]};if(!p.node){var k=A.find(a,u);var E=k;while((E=E.parentNode)&&!n.hasClass(E,o.CSS.CLASS.STACK)){}p.node=E}p.configs.push(D);p.dataPoints.push(b.dp);p.addrs.push([d,_]);p.positions.push(x);p.currentIds.push(u)}this._pushDataPointContext(D)}}this._dataPointRenderer=g;l=this._getDataPointRenderer();for(var I=0;I<h.length;I++){if(h[I]){p=h[I];var O=this._drawCategory(p,l,[])}}this._dataPointRenderer=v;if(this._seriesRenderer){this._seriesRenderer.update(a)}var R=e.selectAll("."+o.CSS.CLASS.DATAPOINT)[0];this._dataLabels.updatePosition(e,R)};L.prototype._drawDataPoint=function(e,t,i){if(i){var a=p.prototype._drawDataPoint.apply(this,arguments);var o=t.getData();o.shape=this._getMarkerShape();r.setData(a,o);a.setAttribute("combination-marker","true");return a}else{return L.superclass._drawDataPoint.apply(this,arguments)}};L.prototype._getDPOptions=function(e,t,i){return{seriesStyle:e,seriesType:t?"line":"bar"}};L.prototype._drawDatapoints=function(e){var t=this._reversedSeries=this._getSeries();var a=t.length;var n=e.node().querySelector("."+o.CSS.CLASS.DATAPOINT_GROUP);if(!n){n=i.create("g");n.setAttribute("class",o.CSS.CLASS.DATAPOINT_GROUP);e.node().appendChild(n)}var l;if(this._seriesRenderer){this._seriesRenderer.init(a)}for(var s in this._stackDataHandler){if(this._stackDataHandler[s].reset){this._stackDataHandler[s].reset()}}this._lineDataHandler.reset();var u;var c=0;var h=[],p;for(var d=0;d<a;d++){var f=t[d];if(!f){continue}var m=this._getDataShape(d)===T;var y=this.getSeriesDPStyle(this._reversedSeries?a-d-1:d,null,m);l=this._getDataPointRenderer(d);if(!l){continue}for(var _=0;_<f.length;_++){var A=f[_];if(!A){continue}var b=this._getPosition(d,_,A);if(!b){continue}u=c++;var x=this._getDPOptions(y,m,A);var S=this._buildWrapperConfig(A,b,A.dp.context(),x);S.seqId=u;var D=this._buildData(S);if(m){S.isLineMarker=true;if(this.allowBreakLine(S.rawData.dp)){b=null;continue}var w=this._createDataPoint(d,_,S,D,b,u,A);this._dataPointRenderer=v;var C;if(!this._isBigData){C=this._drawDataPoint(l,w,true);var z=r.getData(C);z=z||{};z.seriesIndex=A.dp._addr[1];z.itemIndex=A.dp._addr[0];r.setData(C,z);w.setNode(C)}if(C||this._isBigData){if(this._seriesRenderer){this._seriesRenderer.addDataPoint(d,_,S,b,C)}else if(C){n.appendChild(C)}}}else{p=h[_]=h[_]||{configs:[],positions:[],currentIds:[],dataPoints:[],addrs:[]};p.data=p.data||[];p.data.push(D);S.isLineMarker=false;S.isStacked=true;p.configs.push(S);p.dataPoints.push(A.dp);p.addrs.push([d,_]);p.positions.push(b);p.currentIds.push(u)}this._pushDataPointContext(S)}}this._dataPointRenderer=g;l=this._getDataPointRenderer();for(var L=0;L<h.length;L++){p=h[L];if(!p){continue}var P=this._drawCategory(p,l,[]);if(P.children){for(var k=0;k<P.children.length;k++){P.children[k].setAttribute("combination-column","true")}}if(P){n.appendChild(P)}}this._dataPointRenderer=v;if(this._seriesRenderer){this._seriesRenderer.render(n)}this._postRender(n);this._dataLabels._gridlineScale=this._gridlineScale;this._drawDataLabels(e,n)};L.prototype._renderNode=d.prototype._renderNode;L.prototype._buildWrapperConfig=function(e,t,i,a){var r=L.superclass._buildWrapperConfig.apply(this,arguments);r.graphic.shape=this._getMarkerShape();return r};L.prototype.update=function(){L.superclass.update.apply(this,arguments);d.prototype._updateLightLine.apply(this,arguments)};L.prototype.getSeriesStyle=function(){var e=d.prototype.getSeriesStyle.apply(this,arguments);e.isCombination=true;return e};L.prototype._buildSeriesContext=function(e){return l.buildSeriesContext(this._data,e,["color","color2","trellisColumn","trellisRow"])};L.prototype._pushDataPointContext=function(){};L.prototype.allowBreakLine=function(e){return false};S.registerClazz("stacked_combination",L);S.registerClazz("horizontal_stacked_combination",L);D.register(C.DATAPOINT_NAVIGATOR,C.STACKED_COMBINATION,w);return L});define("sap/viz/chart/metadata/bindings/XYYCombinationBindings",[],function e(){var t=[{id:"dataFrame",name:"IDS_DATA_FRAME",type:"Dimension",min:0,max:1,acceptMND:false,role:"frame.data"},{id:"trellisColumn",name:"IDS_TRELLIS_COLUMN",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.columnCategory"},{id:"trellisRow",name:"IDS_TRELLIS_ROW",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"trellis.rowCategory"},{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"layout.category"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"valueAxis2",name:"IDS_VALUE_AXIS2",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.secondValue"}];return t});define("sap/viz/chart/components/trendline/mixin/timeLinePlot",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/trendline/mixin/scatterPlot","sap/viz/chart/components/trendline/Trendline"],function(e,t,i,a){function r(){}t.extend(r,i);r.prototype._getTrendLineContainer=function(t,i){var a=i.querySelector("."+e.CSS.CLASS.DATAPOINT_GROUP);if(a){i.insertBefore(t,a)}else{i.appendChild(t)}};return r});define("sap/viz/chart/components/plots/TimePlotHelper",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/TimeUtil"],function(e,t){var i={};i.getVisibleRange=function(e){var t;if(e._needLazyRender()){var i=e.getData().timeAxis.scale;var a=i.getDomain();var r=-e._offset.x/e._realSize.width*(a[1]-a[0])+a[0];var o=a[0]+e._visibleBound.x/e._realSize.width*(a[1]-a[0]);t={min:r,max:o}}return t};i.getDataPointRange=function(e,t){var i=0,a=e.length-1;var r={min:i,max:a};if(t){var o=[];var n=0;for(var l=i;l<=a;++l){if(e[l]){o[n++]=l}}a=n-1;var s,u;var c=i;while(i<a){s=Math.floor((i+a)/2);u=e[o[s]].getRawData();if(u.timeAxis[0].parsedValue<t.min){i=s+1;c=s}else{a=s-1}}r.min=i=o[c];c=a=n-1;while(i<a){s=Math.floor((i+a)/2);u=e[o[s]].getRawData();if(u.timeAxis[0].parsedValue>t.max){a=s-1;c=s}else{i=s+1}}r.max=o[c]}return r};return i});define("sap/viz/chart/components/plots/TimeLinePlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/chart/components/plots/LinePlot","sap/viz/chart/components/plots/model/DataPointInfo","sap/viz/chart/components/plots/model/Series","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/util/SeriesUtil","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/renderers/TimeReferenceLineRenderer","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/decorator/HitTestDecorator","sap/viz/chart/components/trendline/mixin/timeLinePlot","sap/viz/chart/components/plots/TimePlotHelper"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g){var m=function(e,t){m.superclass.constructor.apply(this,arguments);this._dataPointContext=[];this._calloutInfo=[]};e.extend(m,a);m.prototype._buildData=function(e){var t=m.superclass._buildData.apply(this,arguments);t.timeField=this._data.timeAxis.metaData.map(function(e){return e.id});e.timeField=t.timeField;return t};m.prototype.getReferenceLineRenderer=function(){return h};m.prototype._getCategoryScaleHandlers=function(){return[l.getTimeScaleHandler("timeAxis",{isHorizontal:true})]};m.prototype._getCategoryCount=function(){var e=this._data.timeAxis;return e&&e.rowArray?e.rowArray.length:1};m.prototype._buildWrapperConfig=function(e,t,i,a){a=a?a:{};var r;var o=a.markerSize||this._properties.get("marker.size")||this._properties.get("line.marker.size");var n=a.markerShape||this._properties.get("marker.shape")||this._properties.get("line.marker.shape");var l;if(this._isBigData){var s=e.transparent||0;var c=t.width;var h=t.height;var d=p.convertColor(a.color);r={graphic:{width:c,height:h,drawingEffect:this._drawingEffect||a.drawingEffect||this._properties.get("drawingEffect"),fill:a&&a.seriesStyle&&a.seriesStyle.color?p.convertColor(a.seriesStyle.color):d,opacity:1-s,shape:n,size:o},data:{color:d,width:c,height:h,translate:[t.x,t.y]},effectManager:this._effectManager,rawData:e,horizontal:this.isHorizontal(),dataId:e.dp.id};if(this._isCombination){l=e.dp&&e.dp.context()?e.dp.context():u.NULL_VALUE;r.ctx=l}if(this._calloutInfo&&this._calloutInfo.length){r.graphic.d=this._markerD}}else{l=e.dp&&e.dp.context()?e.dp.context():u.NULL_VALUE;r=m.superclass._buildWrapperConfig.call(this,e,t,l,a);r.graphic.size=o}return r};m.prototype._preRender=function(){var e=this._series;m.superclass._preRender.apply(this,arguments);this._series=e||this._series||[];this._resetDataPoints()};m.prototype._postRender=function(){m.superclass._postRender.apply(this,arguments);this._repositionReferenceLine()};m.prototype.setCalloutInfo=function(e){this._calloutInfo=e};m.prototype._getVisibleRange=function(){return g.getVisibleRange(this)};m.prototype._hideDataPoints=function(e,t){if(!this._isBigData){return m.superclass._hideDataPoints.apply(this,arguments)}else{e.forEach(function(e){if(e){var t=e.getNode();i.remove(t);e.setNode(null)}})}};m.prototype.isDrawDataPointForCallout=function(e){var t=false;var i;for(i=0;i<this._calloutInfo.length;i++){if(this._calloutInfo[i].dpId===e){t=true;break}}return t};m.prototype._getDataPointRange=function(e,t){return g.getDataPointRange(e,t)};m.prototype._showDataPoints=function(){this._preShowDataPoints();var e=[];var t=this._data.timeAxis.metaData.map(function(e){return e.id});this._dataPointContext=[];this._seriesRenderer.resetDataPoints();var i=this._getMarkerShape();var a={color:null,markerShape:i,markerSize:this._properties.get("marker.size"),drawingEffect:this._properties.get("drawingEffect")};var r=this._getVisibleRange();var o=u.DATAPOINT_INVALIDITY_SUPPORTED.indexOf(this._properties.get("dataPoint.invalidity"))<=0;for(var n=0;n<this._series.length;n++){var l=this.getSeriesDPStyle(n,null,true);var s=this._series[n];if(!s){continue}var c=this._getDataPointRenderer(n);if(!c){continue}var h=null;var p=s.getDataPoints();var d=this._getDataPointRange(p,r);this._hideDataPoints(p,d);d=d||{min:0,max:p.length-1};for(var f=d.min;f<=d.max;f++){var v=p[f];if(!v){continue}var g=this._getDataPointPosition(v);if(!g||isNaN(g.x)){continue}var m=v.getId();var y=null;var _=v.getConfig();var A=v.getRawData();if(!h){h=this._getColor(A)}if(o&&A.dp.ignore){g=null;if(!_){_={graphic:{fill:h}}}}else{if(!_){a.color=h;a.seriesStyle=l;_=this._buildWrapperConfig(A,g,null,a);_.timeField=t;_.seriesIndex=n;_.itemIndex=f;_.seqId=m}this._dataPointContext[A.dp.id]=_;if(!this._isBigData||this.isDrawDataPointForCallout(A.dp.id)){var b=v.getData();if(!b){b=this._buildData(_);v.init(_,m,b,A.dp.id)}y=v.getNode();if(y){this._updateDatapoint(y,c,_,g)}else{y=this._drawDataPoint(c,v);v.setNode(y)}if(y){e.push(y)}}}this._seriesRenderer.addDataPoint(n,f,_,g,y)}}return e};m.prototype.destroy=function(){m.superclass.destroy.call(this);this._dataPointContext=null;this._calloutInfo=null};m.prototype._getDefaultZeroLineColor=function(){return this._properties.origin.get("timeAxis.color")};m.prototype._calMarkProps=function(){var e=this._getSeries();var t=s.getMaxSeriesLength(e);var i=s.isBigDensityMode(this._realSize.width,t);this._isBigData=i;var a=this._properties.get("marker.hoverOnlyMode");this._isMarkerVisible=this._properties.get("marker.visible");if(!a){this._isBigData=false;if(i){this._isMarkerVisible=false}}};m.prototype.isBigDataMode=function(){this._calMarkProps();return this._isBigData};m.prototype.getDataPointGraphicFromLineRenderer=function(e){if(this._lineRenderer.getGraphic){var t=this._lineRenderer.getGraphic(e);return t}};m.prototype.getDataPointsRenderInfo=function(){var e=this._lineRenderer;var t=this._lineRenderer.getGraphic?function(t){var i=t.rawData.dp.context();var a=t.data;var r=e.getGraphic(i);if(r&&r.color){a=c.extend({},a,{color:r.color})}return a}:function(e){return e.data};return this._dataPointContext&&this._dataPointContext.filter(function(e){return!!e}).map(function(e){var i=t(e);return{dataId:e.dataId,seriesIndex:e.seriesIndex,itemIndex:e.itemIndex,graphic:e.graphic,data:i,context:e.rawData.dp.context(),width:e.graphic.size,height:e.graphic.size}})};m.prototype._shiftOffsetForIncompleteRange=function(){};m.prototype.mappingDataPointInfo=function(e){var t=this._dataPointContext[e];if(t==null){return null}return t};(new f).decorate(m);(new v).inject(m.prototype);return m});define("sap/viz/chart/components/trendline/mixin/timeColumnPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/trendline/mixin/scatterPlot","sap/viz/chart/components/trendline/Trendline"],function(e,t,i){function a(){}e.extend(a,t);return a});define("sap/viz/chart/components/plots/TimeColumnPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/chart/components/plots/ColumnPlot","sap/viz/chart/components/plots/model/DataPointInfo","sap/viz/chart/components/plots/model/Series","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/util/SeriesUtil","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/renderers/TimeReferenceLineRenderer","sap/viz/framework/common/util/NameColorUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/chart/components/plots/BarWidthUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/trendline/mixin/timeColumnPlot","sap/viz/chart/components/plots/TimePlotHelper"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y){var _=function(e,t){_.superclass.constructor.apply(this,arguments);this._dataPointContext=[]};e.extend(_,a);_.prototype._buildData=function(e){var t=_.superclass._buildData.apply(this,arguments);t.timeField=this._data.timeAxis.metaData.map(function(e){return e.id});e.timeField=t.timeField;return t};_.prototype.getReferenceLineRenderer=function(){return h};_.prototype._getBarProperties=function(){if(!this._barInfoProperties){var e=this._barInfoProperties=v.getBarProperties(this._properties.origin);var t=this._properties.origin;var i=this.runtime().statusManager().get("timeLevels");e.isHorizontal=true;e.minTimeLevel=i.length?i[0]:["day"];e.showAsUTC=t.get("general.showAsUTC")}return this._barInfoProperties};_.prototype._getCategoryScaleHandlers=function(){var e=this._getBarProperties();this._categoryScaleHandler=l.getTimeScaleHandler("timeAxis",e);return[this._categoryScaleHandler]};_.prototype._getCategoryCount=function(){return this._calcCount?this._calcCount-1:1};_.prototype._preRender=function(){var e=this._series;_.superclass._preRender.apply(this,arguments);this._series=e||this._series||[];this._resetDataPoints()};_.prototype._postRender=function(){_.superclass._postRender.apply(this,arguments);this._repositionReferenceLine()};_.prototype.destroy=function(){_.superclass.destroy.call(this);this._dataPointContext=null};_.prototype._getDefaultZeroLineColor=function(){return this._properties.origin.get("timeAxis.color")};_.prototype.getRealSizeByFixedDPSize=function(e){var t=_.superclass.getRealSizeByFixedDPSize.call(this,e,this._getColumnCount(),this._getCategoryCount());return t};_.prototype._getRangeTick=function(){var e=this.getData().timeAxis.scale;var t=e.getDomain();if(t[0]===Infinity&&t[1]===-Infinity){return 0}var i=this._getBarProperties();var a=i.minTimeLevel;a=g.isArray(a)?a[0]:a;var r=i.showAsUTC;var o=f.truncate(t[0],a,r,this._properties.origin);var n=f.truncate(t[1],a,r,this._properties.origin);if(o===n){n=f.nextDateByLevel(n,a,r,this._properties.origin)}this._calcCount=f.getTickNumberByLevel(a,o,n,r,this._properties.origin)};_.prototype._getVisibleRange=function(){return y.getVisibleRange(this)};_.prototype._getDataPointRange=function(e,t){return y.getDataPointRange(e,t)};_.prototype._getColumnWidthRatio=function(){this._getRangeTick();var e=v.getBarInfo(this._getColumnCount(),this._getBarProperties()).barWidth/(this._calcCount-1);return e};_.prototype._getColumnWidth=function(){return this._getColumnWidthRatio()*this._size.width};_.prototype.getPreferredSize=function(){var e=this._getColumnWidthRatio();this._categoryScaleHandler.updateBarWidth(this._getColumnWidthRatio(),this._getBarProperties().innerGroupSpacing*e,this._getColumnCount());return _.superclass.getPreferredSize.call(this)};_.prototype._updateBarWidth=function(e){var t=e/this._size.width;this._categoryScaleHandler.updateBarWidth(t,this._getBarProperties().innerGroupSpacing*t,this._getColumnCount())};_.prototype._shiftOffsetForIncompleteRange=function(){};_.prototype._adjustPosition=function(e,t){_.superclass._adjustPosition.apply(this,arguments);var i=this._properties.get("dataPointSize.max");if(g.isNumber(i)&&e.width>i){e.x=e.x+e.width/2-i/2;e.width=i}};(new m).inject(_.prototype);return _});define("sap/viz/chart/components/decorator/HitTestCombDecorator",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/components/util/BoundingBoxUtils","sap/viz/chart/components/decorator/BaseHitTestDecorator","sap/viz/chart/components/util/HitTestUtils"],function(e,t,i,a,r){var o=r.isInCircle;var n=r.isInRect;var l=r.isInRectWithRatio;var s=function(){s.superclass.constructor.apply(this,arguments);this._decos.hitTest=function(e,a){var r=this._dataPointContext,s=e.left,u=e.top;var c;var h=this;var p=this._selection.select(".v-plot-bound").node();var d=p.getBoundingClientRect().width/p.getBBox().width;if(e.hasOwnProperty("width")&&e.hasOwnProperty("height")){var f=e.width;var v=e.height;var g=this.getSize();var m=this._offset;var y=-m.x;var _=-m.y;e.left=e.left+y;e.top=e.top+_;var A=g.width;var b=g.height;if(d!=1){A*=d;b*=d}var x={left:y,top:_,width:A,height:b};if(!i.intersects(x,e)){return[]}e=i.intersection(x,e);c=r.filter(function(t){var a=t.seriesIndex;var r=h.getDataPointShape(a);if(r==="bar"){var o=t.position;var l={left:o.x,top:o.y,width:o.width,height:o.height};if(d!=1){l.left*=d;l.top*=d;l.width*=d;l.height*=d}return i.intersects(l,x)&&i.intersects(l,e)}else{var c=t.data.translate.slice();if(d!=1){c[0]*=d;c[1]*=d}return c[0]>=y&&c[0]<=A+y&&n(c,[s+y,u+_],f,v)}})}else{c=r.filter(function(t){var i=t.seriesIndex;var a=h.getDataPointShape(i);if(a==="bar"){return l(e,t.position,d)}else{return o(t.data.translate,[s,u],4)}})}if(a){t.stableSort(c,function(e,t){var i=h.getDataPointShape(e.seriesIndex)==="bar"?1:0;var a=h.getDataPointShape(t.seriesIndex)==="bar"?1:0;return i-a})}return c}};e.extend(s,a);return s});define("sap/viz/chart/components/plots/TimeStackedColumnPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/ColumnPlot","sap/viz/chart/components/plots/TimeColumnPlot","sap/viz/chart/components/plots/StackedColumnPlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/StackedPlotHelper"],function(e,t,i,a,r,o){var n=function(e,t){n.superclass.constructor.apply(this,arguments)};e.extend(n,i);n.prototype._getColor=t.prototype._getColor;n.prototype._adjustPosition=a.prototype._adjustPosition;n.prototype._drawDatapoints=a.prototype._drawDatapoints;n.prototype._updateDatapoints=a.prototype._updateDatapoints;n.prototype._needValidEmptyAxisData=a.prototype._needValidEmptyAxisData;n.prototype._showDataPoints=a.prototype._showDataPoints;n.prototype._drawCategory=a.prototype._drawCategory;n.prototype._getDataHandler=a.prototype._getDataHandler;n.prototype._getSeries=a.prototype._getSeries;n.prototype._generatePath=a.prototype._generatePath;n.prototype._getDataLabels=a.prototype._getDataLabels;n.prototype._removeEmptyStacks=a.prototype._removeEmptyStacks;n.prototype._getVisibleRange=function(){return o.getVisibleRange(this,i)};n.prototype._pushDataPointContext=function(e){if(e){this._dataPointContext[e.dataId]=e}};n.prototype._getCategoryScaleHandlers=function(){var e=this._getBarProperties();e.forSingleBar=true;this._categoryScaleHandler=r.getTimeScaleHandler("timeAxis",e);return[this._categoryScaleHandler]};n.prototype._getColumnWidthRatio=function(){var e=this._getBarProperties();var t=e.barSpacing;this._getRangeTick();var i=1/(this._calcCount-1)/(1+t);return i};n.prototype._getColumnCount=function(){return 1};return n});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForComb",["sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/SelectionUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/interaction/BehaviorManager","sap/viz/chart/behavior/config/handler/DataPointBehaviorHandler"],function(e,t,i,a,r,o,n,l,s){var u=["info/timeseries_combination","info/dual_timeseries_combination"];var c=["info/timeseries_stacked_combination"];var h=c.concat(u);var p=s.setMakerOpacity;function d(e,t){var i=t.getDataModel();var a=t.getModule("main.plot");var r=[],o=[];for(var n=0;n<e.length;n++){var l=e[n];var s=i.getDataPoint(l);if(s){var u=a.getDataPointShape(s);if(u==="line"){o.push(l)}else if(u==="bar"){r.push(l)}}}return{bar:r,line:o}}function f(t,a){var r=a.getModule("main.plot");var o=a.getDataModel();var n=e.turnToArray(t);var l=[],s=[];n.forEach(function(e){var t=i.getDataPointId(e);var a=o.getDataPoint(t);var n=r.getDataPointShape(a);if(n==="line"){s.push(e)}else{l.push(e)}});return{bar:l,line:s}}function v(e,t){var i=e.data.targets;var a=f(e.data.targets,t);e.data.targets=a.bar;s.selectOnBarOnNormalMode(e,t);e.data.targets=a.line;s.selectOnLineOnNormalMode(e,t);e.data.targets=i}var g=[{id:"selectDataPoint_comb",triggerEvent:{name:"selectDataPoint",supportedChartTypes:u},handler:function(e,t){if(t.isBigDataMode()){s.selectOnCombinationDuringBigData(e,t)}else{v(e,t)}}},{id:"selectDataPoint_stacked_comb",triggerEvent:{name:"selectDataPoint",supportedChartTypes:c},handler:function(e,t){if(t.isBigDataMode()){var a=e.data.targets;var r=d(e.data.targets,t);e.data.targets=i.getNodeDom(r.bar,t);s.selectOnBarOnNormalMode(e,t);e.data.targets=r.line;s.selectOnLineDuringBigData(e,t);e.data.targets=a}else{v(e,t)}}},{id:"hoverOnDataPoint_comb",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:u},handler:function(e,t){if(t.isBigDataMode()&&!t.isTrellis()){s.highlightOnCombDuringBigData(e,t)}else{s.hoverEffectDuringNormalMode(e,t)}}},{id:"hoverOnDataPoint_stack_comb",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:c},handler:function(e,t){if(t.isBigDataMode()&&!t.isTrellis()){var a=e.data.targets;var r=t.getStatus("selectedDataPoints");var o=r.concat(e.data.targets);var n=d(e.data.targets,t);e.data.targets=i.getNodeDom(n.bar,t);s.hoverEffectDuringNormalMode(e,t);n=d(o,t);e.data.targets=n.line;s.selectOnLineDuringBigData(e,t);e.data.targets=a}else{s.hoverEffectDuringNormalMode(e,t)}}},{id:"unhoverOnDataPoint_comb_big_data",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:u},handler:function(e,t){if(t.isBigDataMode()&&!t.isTrellis()){s.unhighlightOnCombDuringBigData(e,t)}else{s.unhoverEffectDuringNormalMode(e,t)}}},{id:"unhoverOnDataPoint_stk_comb_big_data",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:c},handler:function(e,t){if(t.isBigDataMode()&&!t.isTrellis()){var a=e.data.targets;var r=d(e.data.targets,t);e.data.targets=i.getNodeDom(r.bar,t);s.unhoverEffectDuringNormalMode(e,t);var o=t.getStatus("selectedDataPoints");var n=d(o,t);e.data.targets=n.line;s.selectOnLineDuringBigData(e,t);e.data.targets=a}else{s.unhoverEffectDuringNormalMode(e,t)}}},{id:"deselectDataPoint_comb",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:h},handler:function(t,a){if(a.isBigDataMode()){return}a.fireEvent(t,true);var o=e.turnToArray(t.data.targets);var l;var u=a.getProperties();var c;var h=r.isExist(u.get("plotArea.markerRenderer"));var d=a.getModule("main.plot");var f=a.getDataModel();o.forEach(function(r){var o=i.getDataPointId(r);var v=f.getDataPoint(o);var g=d.getDataPointShape(v);var m=1;if(t.data.isAnyOtherSelected){l=u.get("interaction.deselected")}else{l=u.get("plotArea.dataPoint");var y=n.getData(r);if(y){m=y.strokeWidth}}if(g==="line"){i.unhighlight(r);c=s.getLineRenderer(a,r);s.renderLightLine(a,r,false,c);e.drawStroke(a,r,"path, rect",l.stroke,m);e.drawFill(a,r,"path, rect",l,h,true);p(a,r)}else{e.drawStroke(a,r,"rect",l.stroke,m);e.drawFill(a,r,"rect, path",l,h)}})}},{id:"clearPlot_comb",triggerEvent:{name:"clearPlot",supportedChartTypes:h},handler:function(t,a){a.fireEvent(t,true);a._getDecorationLayer().clear();var l=t.data.isGray;var u=t.data.rangeSelection;var c=u&&u!=="clear";var h=a.getProperties();var d=h.get("interaction.deselected");s.cleanLine(t,a);var f=a.getNodes(a.NodeType.DATA_POINT,false);if(!f||!f.length){s.cleanBar(t,a);return}var v=a.getModule("main.plot");var g=a.getDataModel();var m=r.isExist(h.get("plotArea.markerRenderer"));f.forEach(function(t){var s=1;if(l||c){if(c){d=o.extend(true,{},d);d.opacity=1}}else{d=h.get("plotArea.dataPoint");var u=n.getData(t);if(u){s=u.strokeWidth;s=r.isExist(s)?s:1}}var f=i.getDataPointId(t);var y=g.getDataPoint(f);var _=v.getDataPointShape(y);if(_==="line"){e.drawStroke(a,t,"path, rect",d.stroke,s);e.drawFill(a,t,"path, rect",d,m,true);p(a,t)}else{e.drawStroke(a,t,"rect",d.stroke,s);e.drawFill(a,t,"rect, path",d,m)}})}}];l.registerAll(g);return g});define("sap/viz/chart/components/plots/TimeCombinationPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/DOM","sap/viz/chart/components/plots/TimeColumnPlot","sap/viz/chart/components/plots/TimeLinePlot","sap/viz/chart/components/plots/CombinationPlot","sap/viz/chart/components/plots/BaseLinePlot","sap/viz/chart/components/plots/LinePlot","sap/viz/chart/components/plots/model/Series","sap/viz/chart/components/util/BarSeriesUtil","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/decorator/HitTestCombDecorator","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/LineRendererUtil","sap/viz/chart/components/util/DrawUtil","sap/viz/chart/components/plots/TimeStackedColumnPlot","sap/viz/chart/behavior/config/DataPointBehaviorConfigForComb"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m){var y="line";var _="bar";var A=function(e,t){A.superclass.constructor.apply(this,arguments);this._isCombination=true;this._isBigData=false;var i=this.runtime().semanticManager();i.setUseSemanticPattern(true);i.setUseSemanticDPLineStyle(true);this._attachMarkManager();this.lineMarkerShapePW=this._properties.watch("line.marker.shape",this._onDataShapeChange.bind(this));this._isInTrellis=false;this._markerPropName="line.marker";this._defaultLineRenderer=v.getDefaultRenderer(this._properties.get("line.isSmoothed"));this._isFlexibleStack=false};e.extend(A,a);A.prototype._isSupportBarPathGenerator=function(){return true};A.prototype._applyScroll=function(){return r.prototype._applyScroll.apply(this,arguments)};A.prototype._getPatternConfig=n.prototype._getPatternConfig;A.prototype._isLineVisible=function(){return this._properties.get("line.visible")};A.prototype.getLineRenderer=function(){if(!this._lineRenderer){var e=this._properties;this._lineRenderer=v.getRenderer(e.get("line.lineRenderer"),e.get("line.isSmoothed"))}return this._lineRenderer};A.prototype._renderNode=r.prototype._renderNode;A.prototype._preShowDataPoints=function(){var e=this._offset;var t=e.hasOwnProperty("x")?e.x:0;var i=e.hasOwnProperty("y")?e.y:0;if(this._positionInWindow){t+=this._positionInWindow.hasOwnProperty("x")?this._positionInWindow.x:0;i+=this._positionInWindow.hasOwnProperty("y")?this._positionInWindow.y:0}var r=this._getMaxVisibleSize();this._visibleBound={x:r.width-t,y:r.height-i};var o=this._isBigData;a.prototype._preShowDataPoints.apply(this,arguments);if(o!==this._isBigData){for(var n=0;n<this._series.length;n++){var l=this._getDataShape(n);if(l===_){var s=this._series[n];var u=s.getDataPoints();for(var c=0;c<u.length;c++){this._hideNode(u,c)}}}}this._isMarkerVisible=this._isBigData?false:this._properties.get("line.marker.visible")};A.prototype._preRender=function(){l.prototype._preRender.apply(this,arguments);return a.prototype._preRender.apply(this,arguments)};A.prototype._buildData=function(e){var t=this._getDataShape(e.seriesIndex);var i;if(t===_){i=a.prototype._buildData.apply(this,arguments);i.type=_}else{i=r.prototype._buildData.apply(this,arguments);i.type=y}return i};A.prototype._buildConfig=function(e,t,i){var o=this.getDataPointShape(e.dp);if(o===_){return a.prototype._buildConfig.apply(this,arguments)}else{return r.prototype._buildConfig.apply(this,arguments)}};A.prototype._buildWrapperConfig=function(e,t,i,o){var n=this.getSeriesIndex(e.dp);var l=this._getDataShape(n);var s;if(l===_){o.seriesType="bar";s=a.prototype._buildWrapperConfig.apply(this,arguments);s["isLineMarker"]=false}else if(l===y){if(!e.hasOwnProperty("transparent")){e.transparent=this._isMarkerVisible?0:1}o.seriesType="line";s=r.prototype._buildWrapperConfig.apply(this,arguments);s.graphic.opacity=this._properties.get("line.marker.visible")?1:0;s.graphic.d=s.graphic.d||this._markerD;s["isLineMarker"]=true;s.data.width=0}var u=e.dp&&e.dp.context()?e.dp.context():f.NULL_VALUE;s.ctx=u;return s};A.prototype.getDataPointShape=function(e){if(c.isNumber(arguments[0])){return this._getDataShape(arguments[0])}else{return this._getDataShape(e._addr[1])}};A.prototype._createMainNode=n.prototype._createMainNode;A.prototype._getClipPathAttribute=n.prototype._getClipPathAttribute;A.prototype.zoom=n.prototype.zoom;A.prototype.scroll=n.prototype.scroll;A.prototype._isNeedSimplifyLine=function(){return false};A.prototype._getDataShape=function(e){return(this._data.series[e].rIndex||e)===0?_:y};A.prototype.getSeriesStyle=function(){return r.prototype.getSeriesStyle.apply(this,arguments)};A.prototype._getColor=function(e){return o.prototype._getColor.apply(this,arguments)};A.prototype._attachMarkManager=function(){var e=this.runtime().markManager();var t=["bar","line","line"];var i=this._getMarkerShape();var a=this._properties.parentLevel;var r=[];e.lock();e.setMode("combination");var n=[];n.push(t);r.push(o.processMark.call(this,t,i,a));if(this._options&&this._options.isDualValueAxis){var l=["line","line","line"];r.push(o.processMark.call(this,l,i,a));n.push(l)}e.setShape(r,i);e.setSeriesShape(n)};A.prototype._onDataShapeChange=function(){this._attachMarkManager()};A.prototype._getSeriesRenderer=function(){return new h(this._drawLine.bind(this),this._updateLine.bind(this))};A.prototype._adjustPosition=function(e,t){var i=this._getDataShape(t);if(i===_){a.prototype._adjustPosition.apply(this,arguments)}else{}};A.prototype._getXPosition=function(e,t,i){var o=this._getDataShape(e)===y;if(o){return r.superclass._getXPosition.apply(this,arguments)}else{return a.prototype._getXPosition.apply(this,arguments)}};A.prototype._getYPosition=function(e,t,i){return o.prototype._getYPosition.apply(this,arguments)};A.prototype._drawLine=function(e,t,i,a){if(this._getDataShape(i)!==y){u.drawBarSeries(e,t,this._semanticMgr,this._effectManager,this.isHorizontal(),!this._isBigData);return 0}n.prototype._drawLine.apply(this,[e,t,i,a]);return 1};A.prototype._updateLine=function(e,t,i){var a=this._getDataShape(i);if(a===_){u.updateBarSeries(e,t,this._semanticMgr,this._effectManager,this.isHorizontal(),!this._isBigData)}else{this._drawLine(e,t,i,true)}};A.prototype._buildSeriesContext=function(e){return n.prototype._buildSeriesContext.apply(this,arguments)};A.prototype.isMarkerVisible=function(){return this._isMarkerVisible};A.prototype._getDataLabels=function(){return o.prototype._getDataLabels.apply(this,arguments)};A.prototype._drawDataPoint=function(e,t){var i=t._seriesIndex;var o=this._getDataShape(i);if(o===_){return a.prototype._drawDataPoint.apply(this,arguments)}else{return r.prototype._drawDataPoint.apply(this,arguments)}};A.prototype._hideDataPoints=function(e,t){var i;if(!t){t=r.prototype._getVisibleRange.call(this,e);t=r.prototype._getDataPointRange.call(this,e,t)}if(e[0]&&this._getDataShape(e[0].getSeriesIndex())===y){for(i=0;i<e.length;i++){this._hideNode(e,i)}this._lightLineOutOfRange(e,t)}else{this._columnOutOfRange(e,t)}};A.prototype.update=function(){A.superclass.update.apply(this,arguments);this._updateLightLine()};A.prototype._updateLightLine=function(){n.prototype._updateLightLine.apply(this,arguments)};A.prototype._lightLineOutOfRange=function(e,t){o.prototype._lightLineOutOfRange.apply(this,arguments)};A.prototype._updateDatapoints=function(){return o.prototype._updateDatapoints.apply(this,arguments)};A.prototype._updateDatapoint=function(e,t,i,o){var n=i.seriesIndex;var l=this._getDataShape(n);if(l===_){return a.prototype._updateDatapoint.apply(this,arguments)}else{return r.prototype._updateDatapoint.apply(this,arguments)}};A.prototype._getDataPointRenderer=function(e){return o.prototype._getDataPointRenderer.apply(this,arguments)};A.prototype.destroy=function(){a.prototype.destroy.apply(this,arguments);o.prototype.destroy.apply(this,arguments)};A.prototype._getAxisPosition=function(e,t,i,r){return a.prototype._getAxisPosition.call(this,e,t,i,r,this._getDataShape(t))};A.prototype._getFillColorConfig=function(){return o.prototype._getFillColorConfig.apply(this,arguments)};A.prototype._useSemanticPattern=function(){return o.prototype._useSemanticPattern.apply(this,arguments)};A.prototype._getColumnWidthRatio=m.prototype._getColumnWidthRatio;A.prototype._getCategoryScaleHandlers=m.prototype._getCategoryScaleHandlers;A.prototype._getColumnCount=function(){return 1};(new p).decorate(A);return A});define("sap/viz/chart/components/decorator/HitTestBulletDecorator",["sap/viz/framework/common/util/oo","sap/viz/chart/components/decorator/BaseHitTestDecorator","sap/viz/chart/components/util/HitTestUtils"],function(e,t,i){var a=i.inRange;var r=function(){r.superclass.constructor.apply(this,arguments);this._decos.hitTestForRangeSelection=function(e){if(!e.hasOwnProperty("start")&&!e.hasOwnProperty("end")){return null}var t=[];var i=this._data.actualValues.scale._domain;this._data.series.forEach(function(r){var o=r.filter(function(t){var r=t.timeAxis[0].parsedValue||t.timeAxis[0].value;return a(r,e["start"],e["end"])&&a(t.actualValues,i[0],i[1])});t=t.concat(o)});return t.map(function(e){return e.dp.id})}};e.extend(r,t);return r});define("sap/viz/chart/components/plots/TimeBulletPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/BulletPlot","sap/viz/chart/components/plots/TimeColumnPlot","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/decorator/HitTestBulletDecorator"],function(e,t,i,a,r,o){function n(){n.superclass.constructor.apply(this,arguments)}e.extend(n,t);n.prototype.update=function(e){if(!this._selection){return}n.superclass.update.apply(this,arguments)};n.prototype.setData=function(){n.superclass.setData.apply(this,arguments);this._data.categoryAxis=this._data.timeAxis};n.prototype._getCategoryWidth=function(){return this._getColumnWidthRatio()*this.getRealSize().width};n.prototype._getCategoryCount=function(){var e=this.getData().timeAxis.scale,t=e.getDomain();if(t[0]===Infinity&&t[1]===-Infinity){return null}var i=this._getBarProperties();var r=a.truncate(t[0],i.minTimeLevel,i.utc,this._properties.origin),o=a.truncate(t[1],i.minTimeLevel,i.utc,this._properties.origin);if(r===o){o=a.nextDateByLevel(o,i.minTimeLevel,i.utc,this._properties.origin)}return{range:e.scale(o)-e.scale(r),count:a.getTickNumberByLevel(i.minTimeLevel,r,o,i.utc,this._properties.origin)-1}};n.prototype._getColumnWidthRatio=function(){var e=this._getCategoryCount();return e?e.range/e.count:0};n.prototype._getExtraData=function(){var e=n.superclass._getExtraData();e.timeField=[this._data.timeAxis.metaData[0].id];return e};n.prototype._categoryPosFn=function(){var e=this._data.series,t=this._data.timeAxis.scale,i=this.isHorizontal()?this._realSize.height:this._realSize.width,a=this.__barSize()/2;return function(r,o){var n=e[r][o];if(n){if(e.length>1){return i*t.scale(n.timeAxis)+2*a*(r-e.length/2)}else{return i*t.scale(n.timeAxis)-a}}else{return null}}};n.prototype.sizeByFixedDPSize=function(e){var t=this._getCategoryCount();var i=n.superclass.sizeByFixedDPSize.apply(this,arguments);return i/t.range};n.prototype._categoryCount=function(){var e=this._getCategoryCount();return e?e.count:0};n.prototype._getBarProperties=function(){return{minTimeLevel:(this.runtime().statusManager().get("timeLevels")||[])[0]||["day"],utc:this._properties.origin.get("general.showAsUTC")}};n.prototype.scroll=function(e){n.superclass.scroll.apply(this,arguments);if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};n.prototype._getCategoryRange=function(){return null};n.prototype._shiftOffsetForIncompleteRange=function(){return null};n.prototype._getDefaultZeroLineColor=function(){return this._properties.origin.get("timeAxis.color")};(new o).decorate(n);return n});define("sap/viz/chart/components/plots/TimeStackedPercentagePlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/TimeStackedColumnPlot","sap/viz/chart/components/plots/PercentagePlot"],function e(t,i,a){var r=function(e,t){r.superclass.constructor.apply(this,arguments);this._isPercent=true};t.extend(r,i);r.prototype._getDataHandler=a.prototype._getDataHandler;r.prototype._total=a.prototype._total;r.prototype._getPosition=function(e,t,i){var a=this._total(t,i);if(!a){return null}return r.superclass._getPosition.apply(this,arguments)};r.prototype._buildWrapperContext=a.prototype._buildWrapperContext;r.prototype._buildWrapperConfig=function(e,t,i,a){i=this._buildWrapperContext(e,i);return r.superclass._buildWrapperConfig.apply(this,[e,t,i,a])};r.prototype._buildData=function(e){var t=r.superclass._buildData.apply(this,arguments);t.percentageValue=e.ctx.percentage;return t};r.prototype._drawGridlines=a.prototype._drawGridlines;r.prototype._getDataLabels=a.prototype._getDataLabels;return r});define("sap/viz/chart/components/datalabels/WaterfallDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/datalabels/DataLabels","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/GeometryUtils"],function(e,t,i,a,r,o,n,l){var s=t.CSS.CLASS.DATALABEL+" "+t.CSS.CLASS.MORPHABLELABEL,u=t.CSS.CLASS.DATALABEL_GROUP_RECAP,c="g";var h=8;var p=2;var d="data-id";var f=[0,2,1];var v=function(e,t){v.superclass.constructor.apply(this,arguments);this._labelPosition="waterfall";this._recapLabelsGroupNode=null};e.extend(v,o);v.prototype.verticalLabelOffset=t.DATALABEL.VERTICAL_LABEL_OFFSET;v.prototype.horizontalLabelOffset=t.DATALABEL.HORIZONTAL_LABEL_OFFSET;v.prototype._getStyle=function(e){var t=this._properties;var i=v.superclass._getStyle.apply(this,arguments);if(e){var a=r.getContext(e);if(a&&a.isCumulative){i["font-weight"]="bold";i["cssString"]="fill:"+i.fill+";font-family:"+t.get("style.fontFamily")+";font-size:"+t.get("style.fontSize")+";font-weight:"+"bold"+";font-style:"+t.get("style.fontStyle")+";"}}return i};v.prototype.hideConditional=function(e,o){var n,s=new Array(o.length);for(n=0;n<o.length;n++){s[n]=o[n].getBoundingClientRect()}var u;if(this._recapLabelsGroupNode){u=[];var c=this._dataShapesGroupNode;var h=this._recapLabelsGroupNode.querySelectorAll("."+t.CSS.CLASS.DATALABEL);var p=h.length;for(n=0;n<p;n++){var d=h[n];var f=a.getData(d).id;var g=r.find(c,f);if(g){var m=a.getData(g).recap;if(m){var y=a.getContext(d).val;var _=/translate\((.*)\)/g.exec(d.getAttribute("transform"))[1].replace(/\s+/g,",").split(",");_[0]=parseFloat(_[0]);_[1]=parseFloat(_[1]);var A=l.getBBox(d);u.push({info:{value:y},node:d,dataPoint:g,left:_[0]+A.x,right:_[0]+A.x+A.width,top:_[1]+A.y,bottom:_[1]+A.y+A.height,x:m.x,y:m.y})}}}u.sort(function(e,t){return e.x-t.x})}var b=u?e.concat(u):e;for(n=b.length-1;n>=0;n--){var x=b[n];var S=x.node;var D=S.getBoundingClientRect();var w=x.dataPoint;var C=this.indexOfDataLabelIntersectDataPoints(D,s,o,w,x.info.value);if(C!==-1){i.remove(S);b.splice(n,1)}}return v.superclass.hideConditional.call(this,b)};v.prototype.sortDataLabelInfos=function(e){var t,i,a,o;var n=this;if(this._data.waterfallTypeScale){e.sort(function(e,l){t=r.getContext(e.node);a=n._data.waterfallTypeScale.scale(t?t.Type:null);i=r.getContext(l.node);o=n._data.waterfallTypeScale.scale(i?i.Type:null);return f.indexOf(a)-f.indexOf(o)})}};v.prototype._computeDataLabelTranslate=function(e,i,a,r,o){var n=v.superclass._computeDataLabelTranslate.apply(this,arguments);if(this._horizontal){var l=this._fixBBoxWhenInvisible(e,o&&o.dpBBox);var s=l.x+i.e;var u=this.getBound();var c=t.DATALABEL.BOUND_OFFSET;var h=r.width+c;if(o.val<0&&s-r.x-u.left<h&&u.width+u.left-(s+l.width)>=h){n[0]=s+l.width+this.horizontalLabelOffset;if(n[0]+r.x+r.width>u.width+u.left){n[0]=u.width+u.left-c-r.width-r.x}}}return n};var g=100;v.prototype._computeDataLabelPosition=function(e,t,i,a,r,o){var n,l;var s=t.x+e.e;var u=t.y+e.f;var c;if(this._horizontal){c=this.horizontalLabelOffset}else{if(this._size.height<g){c=this.verticalLabelOffset*.2}else{c=this.verticalLabelOffset}}if(this._horizontal){l=u+t.height/2-(a.y+a.height/2);if(r.val>=0){n=s+t.width+c}else{n=s-(a.x+a.width)-c}}else{n=s+t.width/2-(a.x+a.width/2);if(r.val>=0){l=u-(a.y+a.height);if(l+a.y<0){l=-a.y-c}else{l=l+c}}else{l=u+t.height-a.y;if(l+a.height+a.y>r.plotSize.height){l=r.plotSize.height-(a.y+a.height)+c}else{l=l-c}}}return[n,l]};v.prototype.indexOfDataLabelIntersectDataPoints=function(e,t,i,a,r){var o=-1;var n;for(n=0;n<t.length;n++){var l=t[n];if(!(e.left>l.right||e.right<l.left||e.top>l.bottom||e.bottom<l.top)){o=n;break}}return o};v.prototype.render=function(e,t){t=t||r.findAll(this._dataShapesGroupNode)||[];this._plotSelection=e;var i=this._beforeRender(t);this._render(e,i);var a=r.findAll(e.node());this._renderRecapLabels(e,a);this._afterRender(e)};v.prototype._renderRecapLabels=function(e,i){var o=this._properties;if(!o.origin.get("plotArea.dataLabel.showRecap")){return}this._recapLabels=[];var l=e.node();var h=l.querySelector("."+u);if(!h){h=n.create(c,l);h.setAttribute("class",u);this._recapLabelsGroupNode=h}var p=h.querySelectorAll("."+t.CSS.CLASS.DATALABEL);var d=null;var f=this.runtime().envManager();if(f){d=f.textAnchor()}h.setAttribute("text-anchor",d);var v=o.get("renderer")||y;var g=this._getStyle();for(var m in g){if(g.hasOwnProperty(m)){h.setAttribute(m,g[m])}}var _=o.get("formatString");var A,b;if(this._data&&this._data.valueAxis&&this._data.valueAxis.metaData){A=this._data.valueAxis.metaData[0].id;b=this._data.valueAxis.metaData[0].formatString}var x=_?_:b;var S=this._runtime.statusManager().get("dynamicScale");for(var D=0,w=i.length;D<w;D++){var C=i[D];var T=r.getDataPointId(C);var z=r.findByDataRecapIds(p,T);if(z.length){continue}var L=r.getDataId(C);var P=a.getData(C).recap;if(!P){continue}var k={key:A,value:P.value,dynamicScale:S};var E=this._buildDataLabelText(x,k,null,false,C);z=n.create("g",h);r.setDataRecapId(z,T);z.setAttribute("class",s);a.setData(z,{id:L});var I={val:k.value,text:E,info:k,styles:g,horizontal:this._horizontal};var O=v(I);if(O){z.appendChild(O)}a.setContext(z,{val:k.value})}};v.prototype.updatePosition=function(e,o){var n=e,l=e.node();var s=n.select("."+u);if(s.node()){var c=this._dataShapesGroupNode;var h=[];var p=s.node().querySelectorAll("."+t.CSS.CLASS.DATALABEL);for(var d=0,f=p.length;d<f;d++){var g=p[d];var y=a.getData(g).id;var _=r.find(c,y);if(!_){i.remove(g);continue}var A=a.getData(_).recap;if(!A){i.remove(g);continue}h.push(y);var b=m(g,A);g.setAttribute("transform","translate("+b[0]+","+b[1]+")")}if(o){var x=o.filter(function(e){return h.indexOf(r.getDataId(e))===-1});if(x.length){this._renderRecapLabels(e,r.findAll(c))}}}v.superclass.updatePosition.apply(this,arguments)};v.prototype._afterRender=function(e,o,n){if(this._recapLabelsGroupNode){var l=this._dataShapesGroupNode;var s=this._recapLabelsGroupNode.querySelectorAll("."+t.CSS.CLASS.DATALABEL);var u=function(e,t,a,o,n){var l,s,u;if(a.basePos==="end"||a.basePos==="start"){l=r.find(e,a.basePosId)}else if(a.nearBasePos){l=r.find(e,a.nearBasePosId)}else{return}if(!l){i.remove(t);return}s=l.getBoundingClientRect();if((a.basePos==="end"||a.nearBasePos==="right")&&o.right>=s.left){n[0]-=o.right-s.left+p}else if((a.basePos==="start"||a.nearBasePos==="left")&&o.left<=s.right){n[0]+=s.right-o.left+p}t.setAttribute("transform","translate("+n[0]+","+n[1]+")")};for(var c=0,h=s.length;c<h;c++){var d=s[c];var f=a.getData(d).id;var g=r.find(l,f);if(!g){i.remove(d);continue}var y=a.getData(g).recap;if(!y){i.remove(d);continue}var _=m(d,y);d.setAttribute("transform","translate("+_[0]+","+_[1]+")");var A=d.getBoundingClientRect();if(y.basePos){u(l,d,y,A,_)}else{_[0]-=A.width/2+p;d.setAttribute("transform","translate("+_[0]+","+_[1]+")")}}}v.superclass._afterRender.apply(this,arguments)};function m(e,t){var i=l.getBBox(e);var a=t.x-.5*i.width,r;if(t.position==="up"){r=t.y-h}else{r=t.y-i.y+h}return[a,r]}function y(e){var t=n.create("text");t.textContent=e.text;return t}return v});define("sap/viz/chart/util/WaterfallUtils",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/SVG","sap/viz/framework/common/util/CSSUtils","sap/viz/framework/common/util/Constants"],function(e,t,i,a){var r={};r.WATERFALLTYPE="waterfallType";var o=a.CSS.CLASS.WATERFALL_LINKLINE;var n=a.CSS.CLASS.WATERFALL_RECAP;var l=a.RECAP.WIDTH;var s=a.RECAP.PADDING;r.Key2Type=[{key:"subtotal",type:2},{key:"total",type:1},{key:"",type:0}];r.scale=function(t,i){if(e.isString(t)){t=t.trim().split(":")[0].toLowerCase().trim()}for(var a in i){if(i[a].key===t){return i[a].type}}return 0};r.joinLines=function(e,t){var i,a;if(t){e.sort(function(e,t){return e.x1!==t.x1?e.x1-t.x1:e.y1-t.y1});for(i=0;i<e.length;i++){if(!a){a=e[i]}else{if(a.x1===e[i].x1){if(a.y2<e[i].y1){a=e[i]}else{if(a.y2<e[i].y2){a.y2=e[i].y2}e[i].skip=true}}else{a=e[i]}}}}else{e.sort(function(e,t){return e.y1!==t.y1?e.y1-t.y1:e.x1-t.x1});for(i=0;i<e.length;i++){if(!a){a=e[i]}else{if(a.y1===e[i].y1){if(a.x2<e[i].x1){a=e[i]}else{if(a.x2<e[i].x2){a.x2=e[i].x2}e[i].skip=true}}else{a=e[i]}}}}};r.drawLines=function(e,u,c,h,p,d){if(e.length===0){return}if(p){r.joinLines(e,c)}var f=1;var v=u.get("linkline.color");var g=u.get("linkline.size");var m=v;var y=u.get("linkline.type");var _=y==a.LINE_TYPE.DASHED||y===a.LINE_TYPE.DOTTED?"stroke-dasharray:6":"";for(var A=0;A<e.length;A++){if(e[A]){if(!e[A].skip){var b=t.create("line");b.setAttribute("class",o);b.setAttribute("stroke",v);b.setAttribute("stroke-opacity",f);b.setAttribute("stroke-width",g);i.setDOMStyle(b,_);b.setAttribute("pointer-events","none");b.setAttribute("x1",e[A].x1);b.setAttribute("y1",e[A].y1);b.setAttribute("x2",e[A].x2);b.setAttribute("y2",e[A].y2);h.appendChild(b)}if(e[A].recap&&d>=s*2+l){var x=t.createSVGNode("circle");x.setAttribute("class",n);x.setAttribute("fill-opacity",f);x.setAttribute("fill",m);x.setAttribute("r",l/2);x.setAttribute("cx",e[A].recap.x);x.setAttribute("cy",e[A].recap.y);h.appendChild(x)}}}};return r});define("sap/viz/chart/components/plots/WaterFallPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/SVG","sap/viz/chart/components/plots/BaseColumnPlot","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/SeriesUtil","sap/viz/chart/components/datalabels/WaterfallDataLabels","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/Constants","sap/viz/chart/util/WaterfallUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/behavior/config/DataPointBehaviorConfigForBar"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_){var A=function(e,t){A.superclass.constructor.apply(this,arguments);this._dpGap=0};t.extend(A,r);A.prototype._isSupportNoFill=function(){return false};var b=.5;var x=m.CSS.CLASS.WATERFALL_LINKLINE;var S="v-wtf-linklinegroup";A.prototype.setData=function(e){if(e&&e.waterfallType&&e.waterfallType.scale){e.waterfallTypeScale=e.waterfallType.scale}A.superclass.setData.apply(this,arguments);return this};A.prototype.render=function(e){var t=this._size.width,i=this._size.height;this._size.width=t<0?0:t;this._size.height=i<0?0:i;A.superclass.render.apply(this,arguments)};A.prototype._getDataHandler=function(){return{valueAxis:l.getWTFHandler()}};A.prototype._getXYPosition=function(e,t,i,a,r){return a.scale({value:i.valueAxis,total:i.total,base:i.base},{index:t,seriesIndex:e,dataHandler:r})};A.prototype._getXPosition=function(e,t,i){var a=this._xHandlers[0];return this._getXYPosition(e,t,i,a)};A.prototype._getYPosition=function(e,t,i){var a=this._yHandlers[0];return this._getXYPosition(e,t,i,a)};A.prototype._getValueScaleHandlers=function(e){return[n.getWTFScaleHandler("valueAxis",{isHorizontal:this.isHorizontal()})]};A.prototype._showDataPoints=function(e){this._preShowDataPoints();var t=[];this._dataPointContext=[];if(this._seriesRenderer){this._seriesRenderer.resetDataPoints()}this._selection.selectAll("."+S).remove();var i=a.create("g");i.setAttribute("class",S);var r=this._getVisibleRange();var o,n,l;for(o=0;o<this._series.length;o++){n=this._series[o];if(!n){continue}var s=this._getDataPointRenderer(o);if(!s){continue}l=n.getDataPoints();var u=this._getDataPointRange(l,r);this._hideDataPoints(l,u);for(var c=u.min;c<=u.max;c++){var h=l[c];if(!h){continue}var p=h.getRawData();var d=this._getDataPointPosition(h);if(!d){continue}var f=false;var v=h.getConfig();if(!v){f=true;var g=p.dp&&p.dp.context()?p.dp.context():m.NULL_VALUE;var y=p.timeAxis&&p.timeAxis[0]&&p.timeAxis[0].parsedValue;v=this._buildWrapperConfig(p,d,g,{timeValue:y})}this._dataPointContext.push(v);var _=h.getData();if(!_){f=true;var A=h.getId();_=this._buildData(v);h.init(v,A,_,p.dp&&p.dp.id?p.dp.id:m.NULL_VALUE)}var b=h.getNode();if(b){if(f){this._updateDatapoint(b,s,v,d);t.push(b)}}else{b=this._drawDataPoint(s,h);h.setNode(b);if(b){t.push(b)}}if(this._seriesRenderer){this._seriesRenderer.addDataPoint(o,c,v,d,b)}else if(!b.parentNode){e.appendChild(b)}}}if(!this._seriesRenderer){this._drawLine(i,this._series,r)}e.appendChild(i);return t};A.prototype._getSeriesDataPoint=function(e,t){return{valueAxis:0,total:0,base:0}};A.prototype._getGap=function(e,t){var i;var a;var r=this.getRealSize();var o;if(this.isHorizontal()){a=this._yHandlers[0];i=this._getYPosition.bind(this);o=r.height}else{a=this._xHandlers[0];i=this._getXPosition.bind(this);o=r.width}if(a._scale.getDomain().length>1){var n=this._getSeriesDataPoint(e,t);var l=this._getSeriesDataPoint(e,t+1);if(!l){return undefined}var s=i(0,0,n);var u=i(0,1,l);o=u[0]-s[0]}return o};A.prototype._getHorizontalLine=function(e,t,i,a){var r,o,n;var l;var s=b;var u=this._dpGap;var c=u-e.height;r={y1:Math.round(e.y-c/2),y2:Math.round(e.y+e.height)};o={y1:Math.round(e.y),y2:Math.round(e.y+e.height+c/2)};if(1===i){l=!t?Math.round(e.x+e.width):Math.round(e.x+s);r.x1=r.x2=o.x1=o.x2=l}else if(2===i){n={y1:Math.round(e.y-u*a),y2:Math.round(e.y+e.height)};l=!t?Math.round(e.x+e.width):Math.round(e.x+s);r.x1=r.x2=o.x1=o.x2=l;l=!t?Math.round(e.x):Math.round(e.x+e.width+s);n.x1=n.x2=l}else{l=!t?Math.round(e.x):Math.round(e.x+e.width+s);r.x1=r.x2=l;l=!t?Math.round(e.x+e.width):Math.round(e.x+s);o.x1=o.x2=l}return{lLine:r,rLine:o,subLine:n}};A.prototype._getVerticalLine=function(e,t,i,a){var r,o,n;var l;var s=b;var u=this._dpGap;var c=u-e.width;r={x1:Math.round(e.x-c/2),x2:Math.round(e.x+e.width)};o={x1:Math.round(e.x),x2:Math.round(e.x+e.width+c/2)};if(1===i){l=!t?Math.round(e.y):Math.round(e.y+e.height+s);r.y1=r.y2=o.y1=o.y2=l}else if(2===i){n={x1:Math.round(e.x-u*a),x2:Math.round(e.x+e.width)};l=!t?Math.round(e.y):Math.round(e.y+e.height+s);r.y1=r.y2=o.y1=o.y2=l;l=!t?Math.round(e.y+e.height):Math.round(e.y+s);n.y1=n.y2=l}else{l=!t?Math.round(e.y+e.height):Math.round(e.y+s);r.y1=r.y2=l;l=!t?Math.round(e.y):Math.round(e.y+e.height+s);o.y1=o.y2=l}return{lLine:r,rLine:o,subLine:n}};A.prototype._getWaterFallTypeScale=function(e){return this._data.waterfallType.scale.scale(e)};A.prototype._getChildNumScale=function(e){return this._data.waterfallType.scale.childrenNum(e)};A.prototype._drawLine=function(e,t,i){t=t[0].getDataPoints();var a=this._properties.get("linkline.visible");if(!a){return}this._dpGap=this._getGap(0,0);var r=[];var o;for(var n=i.min;n<=i.max;n++){var l=t[n];if(!l||l.getRawData().valueAxis===null){continue}var s=l.getConfig();var u=l.getPosition();var c=s.ctx[s.ctx.measureNames]<0;var h=l.getRawData().waterfallType;var p=this._getWaterFallTypeScale(h);var d=this._getChildNumScale(h);if(this.isHorizontal()){o=this._getHorizontalLine(u,c,p,d)}else{o=this._getVerticalLine(u,c,p,d)}if(!o){continue}if(l.getItemIndex()!==0){r.push(o.lLine)}if(l.getItemIndex()!==this._data.series[0].length-1){r.push(o.rLine)}if(2===p){r.push(o.subLine)}}y.drawLines(r,this._properties,this.isHorizontal(),e,true)};A.prototype._buildWrapperConfig=function(e,t,i){var a=A.superclass._buildWrapperConfig.apply(this,arguments);if(this._semanticMgr.hasDataPointColorStyle()){if(this._semanticMgr.isOverrideMode()){return a}else if(a.hasOwnProperty("isOthers")&&a.graphic.fill){return a}}var r=this._properties.get("dataPoint.color.isSemanticColoring");var o,n,l;if(r===false){var s=this._properties.get("colorPalette");o=n=a.data.color||s[0]}else{o=this._properties.get("dataPoint.color.positive");n=this._properties.get("dataPoint.color.negative")}o=_.convertColor(o);n=_.convertColor(n);l=this._properties.get("dataPoint.color.total");l=_.convertColor(l);var u=this._getWaterFallTypeScale(e.waterfallType);a.graphic.fill=1===u?l:e.valueAxis>=0?o:n;return a};A.prototype._getDataLabels=function(e,t){this._datalabels=new f(t,{name:e,horizontal:this.isHorizontal()});return this._datalabels};A.prototype._adjustPosition=function(e,t){var i=this.isHorizontal();if(i&&e.width<0){e.width=e.width>-1?1:Math.abs(e.width);e.x-=e.width+.5}if(!i&&e.height<0){e.height=e.height>-1?1:Math.abs(e.height);e.y-=e.height+.5}};A.prototype.destroy=function(){A.superclass.destroy.call(this);this._dpGap=null};return A});define("sap/viz/chart/components/plots/TimeWaterFallPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/TimeColumnPlot","sap/viz/chart/components/plots/WaterFallPlot","sap/viz/chart/util/WaterfallUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/plots/TimeStackedColumnPlot","sap/viz/chart/components/renderers/TimeReferenceLineRenderer","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f){var v=function(e,t){v.superclass.constructor.apply(this,arguments);this._isSyncValueAxis=this.runtime().propertyManager().get("interaction.syncValueAxis")||false;this._visibleRange=null};t.extend(v,a);v.prototype._getXPosition=i.prototype._getXPosition;v.prototype._getBarProperties=i.prototype._getBarProperties;v.prototype._getColumnWidth=i.prototype._getColumnWidth;v.prototype._getVisibleRange=i.prototype._getVisibleRange;v.prototype._getDataPointRange=i.prototype._getDataPointRange;v.prototype.getPreferredSize=i.prototype.getPreferredSize;v.prototype._updateBarWidth=i.prototype._updateBarWidth;v.prototype._getStartEnd=i.prototype._getStartEnd;v.prototype._getWaterFallTypeScale=function(e){return 0};v.prototype._getChildNumScale=function(e){return 0};v.prototype.getReferenceLineRenderer=function(){return u};v.prototype._buildData=i.prototype._buildData;v.prototype.getRealSizeByFixedDPSize=i.prototype.getRealSizeByFixedDPSize;v.prototype._getSeriesDataPoint=function(e,t){return this._data.series[e][t]};v.prototype._getConnectionLine=function(e,t,i,a){var r={};if(!a){return undefined}r.skip=false;r.x1=e.x;r.x2=a.x+a.width;if(t){r.y1=e.y+e.height;r.y2=e.y+e.height}else{r.y1=e.y;r.y2=e.y}return r};v.prototype._getRecapDate=function(e,t,i,a){var r=false;if(this._data.rawData&&this._data.rawData.dataModel&&this._data.rawData.dataModel._rawData){r=n.isFiscal(this._data.rawData.dataModel._rawData)}var l;var s=e.getRawData().timeAxis[0].parsedValue;var u;if(r){u=o.nextDateByLevel(s,t,i,a);l=.5*(s+u)}else{u=o.ceil(s,t,i,a);l=Math.ceil(.5*(s+u))}return l};v.prototype._drawLine=function(e,t,i){var a=this._properties.get("linkline.visible");var o=this._properties.origin.get("plotArea.dataLabel.showRecap");if(!a&&!o){return}var n=this.getData().valueAxis.values;var s=this.getData().timeAxis._sortedTimeStampSet;var u=[];var p,d,v,g;var m=0;var y=t.length;var _=y-1;var A=this.getRealSize().width;var b=this.getData().timeAxis.scale;var x,S,D=null,w=null,C,T;var z,L,P,k,E,I;var O=this._getBarProperties();var R=O.minTimeLevel;var N=this._properties.origin.get("general.showAsUTC");var M=this._properties.origin;var B=function(e,t,i){var a=e.getDataPoints();var r;if(i){r=i.getDataPoints()}var o=function(e,t){var i=f.bisearch(e,t,function(e){return e?e.getRawData().timeAxis[0].parsedValue:0});return e[i]&&e[i].getRawData().timeAxis[0].parsedValue===t?e[i]:null};return{dataPoint:o(a,s[t]),nearDataPoint:r?o(r,s[t]):null}};if(o){for(var V=0;V<y;V++){if(t[V]){v=t[V].getDataPoints();for(var F=0;F<v.length;F++){g=v[F];if(g){L=this._getDataPointPosition(g);d=y===1?L.width*O.barSpacing:L.width*O.groupSpacing;break}}}}for(C=0;C<=s.length&&!D;C++){for(T=m;T<=_&&!D;T++){if(t[T]){D=B(t[T],C).dataPoint}}}if(D){z=D.getConfig();if(z){L=D.getPosition();P=z.ctx[z.ctx.measureNames]<0;var H={};H.skip=false;H.x1=0;H.x2=L.x+L.width;if(P){H.y1=L.y;H.y2=L.y}else{H.y1=L.y+L.height;H.y2=L.y+L.height}u.push(H)}}}for(C=0;C<s.length-1;C++){var U=null,W,G,Y=null;for(T=_;T>=m&&!U;T--){if(t[T]){G=B(t[T],C,t[T-1]);U=G.dataPoint;Y=G.nearDataPoint}}if(!U||!U.getNode()){continue}z=U.getConfig();if(!z){continue}L=U.getPosition();P=z.ctx[z.ctx.measureNames]<0;var X={seriesIndex:T,itemIndex:C};var j=null,Z=null;for(var q=C+1;q<s.length&&!j;q++){for(T=m;T<=_&&!j;T++){if(t[T]){G=B(t[T],q,t[T+1]);j=G.dataPoint;Z=G.nearDataPoint}}}x=this._getRecapDate(U,R,N,M);var K=j?j.getPosition():undefined;k=l.getData(U.getNode());if(K){p=this._getConnectionLine(L,P,X,K);if(!a){p.skip=true}u.push(p)}else{p={skip:true}}if(o){E=b.scale(x)*A;I=P?L.y+L.height:L.y;p.recap={x:E,y:I};var Q=U.getRawData().valueAxis,$=j?j.getRawData().valueAxis:null;k.recap={x:E,y:I,value:h.preciseSimple(U.getRawData().total),position:Q>=0&&$<0?"up":"down"};if(Q<0&&$<0){k.recap.basePos="end";k.recap.basePosId=j.getId()}else if(Q>=0&&$>=0){k.recap.basePos="start";k.recap.basePosId=U.getId()}else{k.recap.basePos="middle";var J=Y?Y.getRawData().valueAxis:0;var ee=Z?Z.getRawData().valueAxis:0;var te=function(e,t,i){e.recap.nearBasePos=t;e.recap.nearBasePosId=i.getId()};if(Q>=0&&$<0){if((J<0&&Math.abs(J)<=Q||J>=0)&&ee>Math.abs($)){te(k,"right",Z)}else if(J<0&&Math.abs(J)>Q&&ee<=Math.abs($)){te(k,"left",Y)}}else{if((J<=0||J>0&&J<=Math.abs(Q))&&ee<0&&Math.abs(ee)>$){te(k,"right",Z)}else if((ee>=0||ee<0&&Math.abs(ee)<=$)&&J>Math.abs(Q)){te(k,"left",Y)}}}l.setData(U.getNode(),k)}}if(o){for(C=s.length-1;C>=0;C--){for(T=_;T>=m;T--){if(t[T]){w=B(t[T],C).dataPoint}if(w){break}}if(w){break}}if(w&&w.getNode()){z=w.getConfig();if(z){L=w.getPosition();P=z.ctx[z.ctx.measureNames]<0;x=this._getRecapDate(w,R,N,M);var ie={};ie.skip=false;ie.x1=L.x;ie.x2=A;if(P){ie.y1=L.y+L.height;ie.y2=L.y+L.height}else{ie.y1=L.y;ie.y2=L.y}u.push(ie);E=ie.x2-c.RECAP.WIDTH/2;I=ie.y1;ie.recap={x:E,y:I};k=l.getData(w.getNode());k.recap={x:E,y:I,value:h.preciseSimple(w.getRawData().total),position:P?"down":"up",startId:w.getId(),endId:null};l.setData(w.getNode(),k)}}}r.drawLines(u,this._properties,this.isHorizontal(),e,false,d)};v.prototype._shiftOffsetForIncompleteRange=i.prototype._shiftOffsetForIncompleteRange;v.prototype._getDefaultZeroLineColor=function(){return this._properties.origin.get("timeAxis.color")};v.prototype._drawDatapoints=function(e,t){v.superclass._drawDatapoints.apply(this,arguments);this._addtionalInfo=t;this.renderAddition()};v.prototype._updateDatapoints=function(e){v.superclass._updateDatapoints.apply(this,arguments);this.renderAddition()};v.prototype.scroll=function(e){v.superclass.scroll.apply(this,arguments);this.renderAddition()};v.prototype.renderAddition=function(){return this._addtionalInfo&&this._addtionalInfo.timeAxis&&this._addtionalInfo.timeAxis.renderAddition&&this._addtionalInfo.timeAxis.renderAddition(this._dataPointContext)};v.prototype._preShowDataPoints=function(e){v.superclass._preShowDataPoints.apply(this,arguments);this._endOfPeriodArray=[];var t;for(t=0;t<this._series.length;t++){var i=this._series[t];if(i){var a=i.getDataPoints();for(var r=0;r<a.length;r++){var o=a[r];if(!o){continue}var n=o.getRawData();var l=n.timeAxis[0].parsedValue;this._endOfPeriodArray[l]=n.total}}}};v.prototype._buildWrapperConfig=function(e,t,i,a){var r=this.runtime().statusManager();var o=r.get(c.RECAP.RECAP_KEY);if(d.isExist(o)){delete i[o]}else{r.add(c.RECAP.RECAP_KEY,o)}if(this._properties.origin.get("plotArea.dataLabel.showRecap")){o=this._properties.origin.get("plotArea.dataLabel.recapTitle")||p.get("IDS_END_OF_PERIOD","en");if(this._endOfPeriodArray&&a&&this._endOfPeriodArray[a.timeValue]){i[o]=this._endOfPeriodArray[a.timeValue]}else{i[o]=e.total}r.set(c.RECAP.RECAP_KEY,o)}var n=v.superclass._buildWrapperConfig.apply(this,arguments);var l=e&&!e.isNullValue?e.dp.additionCtx():{};n.vbcContext={};n.vbcContext.color=this._semanticMgr.analyzeValueBasedColor(i,l);return n};v.prototype.destroy=function(){v.superclass.destroy.call(this);this._isSyncValueAxis=null;this._visibleRange=null};v.prototype._getRangeTick=i.prototype._getRangeTick;v.prototype._getColumnWidthRatio=i.prototype._getColumnWidthRatio;v.prototype._getCategoryScaleHandlers=i.prototype._getCategoryScaleHandlers;v.prototype._getCategoryCount=i.prototype._getCategoryCount;return v});define("sap/viz/chart/components/plots/TimeStackedCombinationPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/TimeCombinationPlot","sap/viz/chart/components/plots/TimeStackedColumnPlot","sap/viz/chart/components/plots/StackedCombinationPlot","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/StackedPlotHelper","sap/viz/chart/components/plots/DataHandler","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils"],function(e,t,i,a,r,o,n,l,s){var u="line";var c="bar";var h=function(e,t){h.superclass.constructor.apply(this,arguments);this._lineDataHandler=n.getHandler();this._stackDataHandler=this._getDataHandler();this._drawZeroLineBeforeDatapoints=true;this._attachMarkManager();this._markerPropName="line.marker";this.dataShapePrimaryAxisPW=this._properties.watch("dataShape.primaryAxis",this._onDataShapeChange.bind(this));this._options.isCombination=true;this._lineRenderer=null;this._isDrawDp=true};e.extend(h,t);var p=h.prototype;var d=["_adjustPosition","_attachMarkManager","_buildConfig","_getColor","_getDataHandler","_getDataPointRenderer","_drawCategory","_drawDataPoint","_drawLine","_updateLine","_updateDatapoint","_getSeries","getSeriesStyle","_getDataHandler","_generatePath","_getDataLabels","_getDataShape","_getYPosition","isMarkerVisible","_needValidEmptyAxisData","_removeEmptyStacks"];d.forEach(function(e){p[e]=a.prototype[e]});p._pushDataPointContext=i.prototype._pushDataPointContext;p._getCategoryScaleHandlers=i.prototype._getCategoryScaleHandlers;p._getColumnWidthRatio=i.prototype._getColumnWidthRatio;p._getColumnCount=i.prototype._getColumnCount;p._showDataPoints=function(){};p._updateDatapoints=function(){this._preShowDataPoints();a.prototype._updateDatapoints.apply(this,arguments)};p._preShowDataPoints=function(){this._dataPointContext=[];h.superclass._preShowDataPoints.apply(this,arguments)};p._drawDatapoints=function(e){this._initSeries();this._preShowDataPoints();a.prototype._drawDatapoints.apply(this,arguments)};p._buildData=function(e){var t=a.prototype._buildData.apply(this,arguments);t.timeField=this._data.timeAxis.metaData.map(function(e){return e.id});e.timeField=t.timeField;return t};p._buildWrapperConfig=function(e,t,i,a){var r=h.superclass._buildWrapperConfig.apply(this,arguments);r.graphic.shape=this._getMarkerShape();r.position=t;if(!s.isExist(r.graphic.fill)){r.graphic.fill=this._getColor(e)}r.seriesIndex=this.getSeriesIndex(e.dp);return r};p._getVisibleRange=function(){return o.getVisibleRange(this,t)};p.allowBreakLine=function(e){return l.DATAPOINT_INVALIDITY_SUPPORTED.indexOf(this._properties.get("dataPoint.invalidity"))<=0&&e.ignore};p._createDataPoint=function(e,t,i,r,o,n,s){var u;var c=this._series[e];var h=c.getDataPoints();if(h){u=h[t];u.init(i,n,r,s.dp&&s.dp.id?s.dp.id:l.NULL_VALUE);u.setPosition(o);u.setRawData(s)}else{u=a.prototype._createDataPoint.apply(this,arguments)}return u};p.getSeriesIndex=function(e){return this._series.length-e._addr[1]-1};p.getDataPointShape=function(e){var t;if(s.isNumber(e)){t=e}else{t=this._series.length-e._addr[1]-1}return this._getDataShape(t)};p.getSeriesStyle=function(e,t,i){e=t||i?e:this._series.length-e-1;return h.superclass.getSeriesStyle.call(this,e,t)};p._getDPOptions=function(e,t,i){var r=a.prototype._getDPOptions.apply(this,arguments);r.color=this._getColor(i);return r};return h});define("sap/viz/chart/components/plots/TYPlotFactory",["jquery","sap/viz/chart/components/plots/TimeLinePlot","sap/viz/chart/components/plots/TimeColumnPlot","sap/viz/chart/components/plots/TimeCombinationPlot","sap/viz/chart/components/plots/TimeBulletPlot","sap/viz/chart/components/plots/TimeStackedColumnPlot","sap/viz/chart/components/plots/TimeStackedPercentagePlot","sap/viz/chart/components/plots/TimeWaterFallPlot","sap/viz/chart/components/plots/TimeStackedCombinationPlot"],function(e,t,i,a,r,o,n,l,s){var u={timeseries_line:{plotClazz:t},timeseries_column:{plotClazz:i},timeseries_stacked_column:{plotClazz:o},timeseries_100_stacked_column:{plotClazz:n},timeseries_combination:{plotClazz:a},dual_timeseries_combination:{plotClazz:a},timeseries_bullet:{plotClazz:r},timeseries_waterfall:{plotClazz:l},timeseries_stacked_combination:{plotClazz:s}};return{getPlotClazz:function(e){var t=u[e];return t&&t.plotClazz}}});define("sap/viz/chart/components/plotareas/TimeYPlotArea",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScale","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/components/callout/CalloutContainer","sap/viz/chart/components/plotareas/XYPlotArea","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/axis/TimeAxis","sap/viz/chart/components/plots/TYPlotFactory","sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/util/ZoomUtil","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/TimeUtil","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/scales/TimeScale","sap/viz/chart/components/zoom/TimeYZoomer","sap/viz/chart/components/plots/TimeWaterFallPlot","sap/viz/chart/components/zoom/ZoomLimit","sap/viz/chart/components/util/SeriesUtil","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/trendline/Trendline"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D,w,C){var T=function(e,t){this._rawData=t&&t.rawData&&t.rawData.dataModel&&t.rawData.dataModel._rawData;this._isTruncatedWindowInput=false;T.superclass.constructor.apply(this,arguments)};var z=_.preciseSimple;var L=g.isNumber;t.extend(T,o);T.prototype._getValueAxis=function(e){return e.valueAxis};T.prototype.destroy=function(){T.superclass.destroy.apply(this,arguments)};T.prototype._init=function(t,i){this._plot=u.create(this._renderType,s.getPlotClazz(this._renderType),this.runtime(),this._getPlotOptions());this.setChild("plot",this._plot,{position:"center"});this._plot.getDispatch().on("reRenderComplete.plotarea",this._reRenderComplete.bind(this));var a=!this._properties.get("interaction.noninteractiveMode")||!this.isColumnLike()&&!!this._properties.get("timeAxis.interval.unit");this.setLayoutSequence(["left","right","bottom","top"]);var o=i&&i.rawData&&i.rawData.dataModel;this._categoryAxis=new l(this.runtime(),{name:"timeAxis",hasScrollbar:a,isColumnLike:this.isColumnLike(),isMultiplySeriesColumn:this.isMultiplySeriesColumn(o),isKeepMinimalLevelContinuousTicks:this.isKeepMinimalLevelContinuousTicks(o),isLineChart:this._isLineChart(),rawData:this._rawData});this.setChild("timeAxis",this._categoryAxis,{position:"bottom"});if(a){this._hScrollbar=this._categoryAxis.getChild(e.AXIS.SCROLLBAR_NAME).module}this._valueAxis=new n(this.runtime(),{name:"valueAxis"});this.setChild("valueAxis",this._valueAxis,{position:"left"});if(this._properties.get("plotArea.callout.left")){this._leftCallouts=new r(this.runtime(),{name:"plotArea.callout",position:"left"});this.setChild("leftCallouts",this._leftCallouts,{position:"left",priority:1,unique:true})}if(this._properties.get("plotArea.callout.top")){this._topCallouts=new r(this.runtime(),{name:"plotArea.callout",position:"top"});this.setChild("topCallouts",this._topCallouts,{position:"top"})}if(this._isPercentageChart()){this._valueAxis.setPercentageMode(true)}this.getZoomer().init({main:this,plot:this._plot,isHorizontal:false})};T.prototype.extractCalloutInfo=function(){var e=[];for(var t in this._children){if(this._children.hasOwnProperty(t)){var i=this._children[t].module;if(i._callouts){e=e.concat(i._callouts)}}}return e};T.prototype._postLayout=function(e){T.superclass._postLayout.apply(this,arguments);var t=this.extractCalloutInfo();for(var i in this._children){if(this._children.hasOwnProperty(i)){var a=this._children[i].module;if(a.setCalloutInfo){a.setCalloutInfo(t)}}}};T.prototype.getAddtionalInfo=function(e){var t;if(e instanceof x){var i;var a=this.getChild("timeAxis");if(a){i=a.module}t={};t.timeAxis=i}return t};T.prototype._hasScrollbar=function(){var e=T.superclass._hasScrollbar.apply(this,arguments);return e||!this.isColumnLike()&&!!this._properties.get("timeAxis.interval.unit")};T.prototype._preRender=function(){var e=this._data.timeAxis.scale;var t=e.getDomain();var i=this._getZoomRange(t);if(!this._plot.isHorizontal()){if(this.isColumnLike()){var a=this._plot.getPreferredSize();if(this._hasScrollbar()){this._categoryAxis.setRealSize(a)}}else{if(this._categoryAxis.isVisible()){var r=this._categoryAxis.getChild("axisBody").module.getRealSize().width;if(r>0){this._realSize.width=r;this._plot.setRealSize({width:r})}}}}o.superclass._preRender.apply(this,arguments);var n=this._valueAxis._scale.getDomain();this._runtime.statusManager().add("globalDomain",{value:[n[0],n[1]],readonly:true});this._applyTransform(t,i)};T.prototype._getZoomRange=function(e){function t(e){var t=e;if(g.isExist(t)){t=new Date(t).getTime();t=parseInt(t)}return t}var i=this._properties;var a=h.getZoomRange(i,e);var r=t(a[0]);var o=t(a[1]);if(L(r)&&r<e[0]){r=e[0]}if(L(o)&&o>e[1]){o=e[1]}return[r,o]};T.prototype._applyTransform=function(e,t){this._isTruncatedWindowInput=false;function i(){if(isNaN(a)||a<e[0]){a=e[0]}if(isNaN(r)||r>e[1]){r=e[1]}}var a=t[0];var r=t[1];var o=h.isRangeIncomplete(t);var n=h.isZoomRangeValid(a,r,e);var l,s;if(n&&o){l=this.runtime().statusManager().get("plot.transform.scale");var u=this._plot._getBarProperties().minTimeLevel;var c=m.getPeriod(u)/2;var p={};if(!L(a)){a=r-Math.abs(e[0]-e[1])/l.x;if(this.isColumnLike()){a+=c}i();p["alignStart"]=e[0];p["alignEnd"]=r+c}else{if(this.isColumnLike()){a-=c}i();p["alignStart"]=a;p["alignEnd"]=e[1]}s=-Math.abs((e[0]-a)/(e[0]-e[1]));if(this._applyOffserAndZoom(s,l,p)){return}else{P(t,e)}}a=t[0];r=t[1];o=h.isRangeIncomplete(t);n=h.isZoomRangeValid(a,r,e);if(n&&!o){i();if(this.isColumnLike()){this._isTruncatedWindowInput=true;var d=this._truncateAndExtendWindowInput(a,r);a=d[0];r=d[1];i()}if(a>=r){a=e[0];r=e[1]}l=Math.abs((e[0]-e[1])/(a-r));l={x:l,y:l};s=-Math.abs((e[0]-a)/(e[0]-e[1]))}else{l=this.runtime().statusManager().get("plot.transform.scale");s=0}if(l){this._applyOffserAndZoom(s,l)}};function P(e,t){if(!g.isExist(e[0])){e[0]=t[0]}if(!g.isExist(e[1])){e[1]=t[1]}return e}T.prototype._applyOffserAndZoom=function(e,t,i){var a={x:1,y:1};var r={x:0,y:0};var o=this.getChildrenByPosition("center")[0];var n=o.getSize();var l=o.getRealSize();var s=o.isHorizontal()?"y":"x";var u=o.isHorizontal()?"height":"width";a[s]=t[s];r[s]=z(e*n[u]*t[s]);if(i){var c=z(-r[s]+n[u]);var h=this._convertPositionIntoTimeStemp(c);var p=this._convertPositionIntoTimeStemp(-r[s]);if(L(i["alignStart"])&&p<i["alignStart"]){return false}else if(L(i["alignEnd"])&&h>i["alignEnd"]){return false}}this.zoom(a);if(this._properties.get("interaction.syncValueAxis")||r.x||r.y){this.scroll(r)}return true};T.prototype._convertPositionIntoTimeStemp=function(e){var t=this.getChildrenByPosition("center")[0];var i=t.getRealSize();var a=t.isHorizontal()?i.height:i.width;return Math.round(t._data.timeAxis.scale._scale.invert(e/a))};T.prototype._setAxisData=function(e){this._categoryAxis.setData(e.timeAxis,f.hasNegativeValue(e))};function k(e,t,i){if(e===Infinity&&t===-Infinity){return[e,t]}var a=e;var r=t;var o;var n=i.minTimeLevel;n=g.isArray(n)?n[0]:n;var l=i.showAsUTC;if(i.labelTruncate){a=m.truncate(e,n,l,i.origin);r=m.truncate(t,n,l,i.origin)}if(i.hasOwnProperty("linePadding")){o=i.linePadding}else{o=m.getPeriod(n)/2}a-=o;r+=o;return[a,r]}T.prototype._updateTrendLineAxis=function(e){if(e&&e.timeAxis&&e.timeAxis.scale){var t=e.timeAxis.scale;var i=t.getDomain();var a=w.extend(true,[],i);this._plot._expandTrendlineXRange(a);if(a&&a.length>1&&a[1]>i[1]){if(this._isLineChart()){this._timeOriginalDomain=a}else if(this.isColumnLike()){var r=this._plot._getBarProperties();a[1]+=m.getPeriod(r.minTimeLevel)/2}e.timeAxis.scale=new A(a,t.getRange(),t.getDomainFixed(),{dataBound:t.getDataBound()})}}};T.prototype._updateTimeScale=function(e,t,i){var a=e.scale;var r=a.getDomain();if(i.recoverDomain){r=this._timeOriginalDomain}i.origin=this._properties.origin;var o=k(r[0],r[1],i);e.scale=new A(o,a.getRange(),a.getDomainFixed(),{dataBound:a.getDataBound()});t.setData(e)};T.prototype._truncateAndExtendWindowInput=function(e,t){var i=this._plot._getBarProperties();i.origin=this._properties.origin;return k(e,t,i)};T.prototype.zoom=function(e){T.superclass.zoom.apply(this,arguments);if(this._isLineChart()){var t=this._properties.origin;if(!t.get("plotArea.marker.visible")){return}var i=this._data;var a=i.timeAxis.scale.getDomainFixed();if(a[0]||a[1]){return}var r=this.getChildrenByPosition("center")[0];if(!r){return}var o={};if(this._timeSeriesMaxLength!==0&&D.isBigDensityMode(r.getRealSize().width,this._timeSeriesMaxLength)){o.linePadding=0;o.recoverDomain=true;this._updateTimeScale(i.timeAxis,this._categoryAxis,o);return}var n=i.timeAxis.scale.getDomain();var l=this._timeOriginalDomain;var s=t.get("plotArea.marker.size")+2;o.showAsUTC=t.get("general.showAsUTC");if(l[1]===l[0]){var u=this.runtime().statusManager().get("timeLevels");var c=u.length?u[0]:["day"];o.linePadding=m.getPeriod(c)/2}else{var h=(l[1]-l[0])/r.getRealSize().width;var p=this._categoryAxis.getChild("axisBody").module;o.linePadding=p.normalizePadding(h*s)}o.recoverDomain=e.x!==1;o.labelTruncate=false;if(e.x!==1||(n[0]===l[0]||n[1]===l[1])){this._updateTimeScale(i.timeAxis,this._categoryAxis,o)}}};T.prototype._adjustTimeDomain=function(){var e=this._data;var t=this._roughSize.width;var i=this._roughSize.height;if(e&&t>0&&i>0){var a={};if(this.isColumnLike()){a=this._plot._getBarProperties();a.labelTruncate=true;a.recoverDomain=false;this._updateTimeScale(e.timeAxis,this._categoryAxis,a)}else if(this._isLineChart()){this._timeOriginalDomain=e.timeAxis.scale.getDomain();this._timeSeriesMaxLength=D.getMaxSeriesLength(e.series)}}};T.prototype.updateValueScale=function(){this._adjustTimeDomain();return T.superclass.updateValueScale.apply(this,arguments)};T.prototype._updateValueScaleDomain=function(e){this._lastValueDomain=e;var t=this._data;var i=this._roughSize.width;var a=this._roughSize.height;if(!t||i<=0||a<=0){return false}var r=[0,1];if(this._plot.isHorizontal()){r[1]=i}else{r[1]=a}r[1]*=.8;var o=this._getValueAxis(this._data).scale;var n=o.getDomain().slice();var l;var s;o.setDomain(e);if(this._isAdjustValueScaleForTopLabel()){l=this._calcValueScaleWithTopLabel(r);s=l.scale.getDomain();this._valueAxis.setData(l,true);this._plot.getData().valueAxis=l}else{l=c.calcScale(o,r,{keepAutoScale:true,isLineChart:this._isLineChart()});s=l.scale.getDomain();o.setDomain(s);o.setRange([0,1]);var u=this._getValueAxis(t);u.tickHint=l.tickHint;this._valueAxis.setData(u,true)}return n[0]!==s[0]||n[1]!==s[1]};T.prototype._getValueRange=function(e,t,i,a){function r(e){return e.timeAxis[0].parsedValue}var o=Infinity;var n=-Infinity;var l=2;if(L(a.min)){o=a.min;l--}if(L(a.max)){n=a.max;l--}var s=/timeseries.*stacked_column/.test(this._renderType);var u=/timeseries.*stacked_combination/.test(this._renderType);var c=s||u;var h=/timeseries_waterfall/.test(this._renderType);if(l){var p=false;var f=[];var v,m,y,_,A=e.length;var b,x,S,D;for(v=0;v<A;++v){b=e[v];if(!b.length){f[v]=null;continue}var w=b,C=[];if(c){w=[];for(y=0,_=0;y<b.length;y++){if(b[y]){w[_]=b[y];C[_]=y;_++}}}x=d.bisearch(w,t,r);if(c){x=C[x]||x}x=Math.min(x,b.length-1);S=d.bisearch(w,i,r);if(c){S=C[S]||S}S=Math.min(S,b.length-1);if(b[x]&&t>r(b[x])){x++}if(b[S]&&r(b[S])>i){S--}if(x>S){f[v]=null}else{f[v]=[x,S];p=true}}var T=this.getData().valueAxis;var z,P;if(s){z=T&&T.range;if(z&&z.length>0){for(v=x;v<z.length&&v<=S;v++){P=z[v];o=Math.min(o,P[0]);n=Math.max(n,P[1])}}}else if(u&&T){var k=T.stackedRange;var E=T.lineRange;var I=k.length>=E.length?k:E;var O=k.length<E.length?k:E;for(v=x;v<I.length&&v<=S;v++){var R=I[v][0];var N=I[v][1];if(O[v]){R=Math.min(R,O[v][0]);N=Math.max(N,O[v][1])}o=Math.min(o,R);n=Math.max(n,N)}}else if(h){var M=this.getData().timeAxis._sortedTimeStampSet;var B=this.getChild("plot");if(B){B.module._visibleRange={min:x,max:S}}if(M){if(!p){x=0;S=M.length-1}var V=0,F=null;for(v=x;v<M.length&&v<=S;v++){for(m=0;m<e.length;m++){var H=e[m][d.bisearch(e[m],M[v],function(e){return e?e.timeAxis[0].parsedValue:0})];if(!H||H.timeAxis[0].parsedValue!==M[v]){continue}if(!F){F=H}V=H.base+H.valueAxis;o=Math.min(o,V);n=Math.max(n,V)}}o=Math.min(o,F.base);n=Math.max(n,F.base)}}else{for(v=0;v<A;++v){b=e[v];if(p){var U=f[v];if(!U){continue}x=U[0];S=U[1]}else{x=0;S=b.length-1}for(m=x;m<=S;++m){D=this._getItemMinMax(b[m],a.feed);if(!g.isNaN(D.min)){o=Math.min(o,D.min)}if(!g.isNaN(D.max)){n=Math.max(n,D.max)}}}}}if(o===Infinity&&n===-Infinity){return null}if(o===0&&n===0){n=1}return[o,n]};T.prototype._getItemMinMax=function(e,t){return{min:e[t],max:e[t]}};T.prototype._isAdjustValueScaleForTopLabel=function(){var e=this._properties.get("plotArea.dataLabel.position")||this._properties.getDefault("plotArea.dataLabel.position");return e==="outside"};T.prototype.getDisplayedTimeDomain=function(){var e=this.getChildrenByPosition("center")[0];var t=e.getRealSize();var i=e.getSize();var a=e.isHorizontal();var r=this._plot.getOffset();var o=false;if(this._data.rawData&&this._data.rawData.dataModel&&this._data.rawData.dataModel._rawData){o=y.isFiscal(this._data.rawData.dataModel._rawData)}return c.getTimeAxisDomain(i,r,t,this._data.rawData.scales.timeAxis.getDomain(),a,o)};T.prototype._scroll=function(e){var t=this.getChildrenByPosition("center")[0];var i=t.getRealSize();var a=t.getSize();var r=t.isHorizontal();if(this._properties.get("interaction.syncValueAxis")&&(r&&i.height>=a.height||!r&&i.width>=a.width)){var o=this._data.rawData;var n=o.dataModel;var l=o.scales;var s=false;if(n&&n._rawData){s=y.isFiscal(n._rawData)}var u=c.getTimeAxisDomain(a,e,i,this._data.timeAxis.scale.getDomain(),r,s);var h=this._getValueAxis(l);var p=this._getValueRange(n.series(),u[0],u[1],h.getOption());if(p==null){p=h.getDomain()}p=C.getValueScaleDomain(this._plot,p,n,u);var d=this._updateValueScaleDomain(p);if(d){var v=this.getChild("timeAxis").module;v.setHasNegativeValue(f.domainWithNegativeValue(p));this.getChild("valueAxis").module.update()}}this._plot.update(e);T.superclass._scroll.apply(this,arguments)};T.prototype._getZoomer=function(){return new b(this)};T.prototype.isColumnLike=function(){return/column|combination|waterfall/.test(this._renderType)};T.prototype.isMultiplySeriesColumn=function(e){var t=false;if(this.isColumnLike()&&e){var i=/timeseries.*stacked_column/.test(this._renderType);var a=/combination/.test(this._renderType);if(!i&&!a){var r=e.series&&e.series();if(r&&r.length>1){t=true}}}return t};T.prototype.isKeepMinimalLevelContinuousTicks=function(e){var t=true;if(this.isColumnLike()&&e){t=false;if(/timeseries_waterfall/.test(this._renderType)){var i=e.series&&e.series();if(i&&i.length===1){t=true}}}return t};T.prototype._getFormatTime=function(e){var t=this._categoryAxis.getFormatTimeValue(e);var i=t.day||"";if(t.day&&t.time){i+=" "+t.time}else if(t.time){i=t.time}return i};T.prototype._getDataRange=function(e,t){var i={start:{},end:{},displayValues:{start:e,end:t}};var a=this.getData().timeAxis;var r=a&&a.scale;if(r){var o=r.getDomain();var n=Math.floor(o[0]+(o[1]-o[0])*e/100);var l=Math.ceil(o[0]+(o[1]-o[0])*t/100);var s=a.metaData[0].id;i.displayValues.start=this._getFormatTime(n);i.displayValues.end=this._getFormatTime(l);i["start"][s]=n;i["end"][s]=l}return i};return T});define("sap/viz/chart/scales/TimeScaleUtil",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/DataUtils"],function(e,t,i){var a={getDomainInfo:function(a,r){var o=[];var n=i.getDimensionParsedValue;a.forEach(function(e){var t=e.length;if(t){if(!e._sorted){for(var i=0;i<t;++i){if(!e[i]){continue}o.push(n(e[i].timeAxis[0]))}}else{var a=0;for(a=0;a<e.length;a++){if(e[a]){break}}o.push(n(e[a].timeAxis[0]),n(e[t-1].timeAxis[0]))}}});var l=t.extent(o);var s=l[0]==null?Infinity:l[0];var u=l[1]==null?-Infinity:l[1];var c=[s,u];var h=s,p=u;var d=false,f=false;var v=r&&r.allowEqual;if(e.isExist(r)){if(e.isExist(r.start)){if(e.isNumber(r.start)){d=true;h=Number(r.start)}else if(e.isNumber(new Date(r.start).getTime())){d=true;h=new Date(r.start).getTime()}}if(e.isExist(r.end)){if(e.isNumber(r.end)){f=true;p=Number(r.end)}else if(e.isNumber(new Date(r.end).getTime())){f=true;p=new Date(r.end).getTime()}}var g=h<p;if(v){g=h<=p}if(g){s=h;u=p}else{d=false;f=false}}return{domain:[Number(s),Number(u)],dataBound:c,domainFixed:[d,f]}}};return a});define("sap/viz/chart/scales/TimeScaleProcessor",["sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleRepository","sap/viz/framework/scale/ScaleUtil","sap/viz/chart/scales/TimeScale","sap/viz/chart/scales/TimeScaleUtil","sap/viz/framework/common/util/TimeUtil"],function(e,t,i,a,r,o){var n=function(t,o,n,l,s,u,c){if(!e.isExist(n.getDefault(o))){n.add(o,{serializable:true,defaultValue:{feed:o,start:"auto",end:"auto"}})}var h=n.get(o);if(s&&s.allowEqual){h=i.truncateScaleOption(s,h,l)}var p=r.getDomainInfo(s.series,h);var d=new a(p.domain,[0,1],p.domainFixed,{dataBound:p.dataBound});return d};t["timeScale"]=n});define("sap/viz/chart/chains/SeriesIterator",[],function(){function e(e,t){var i=e;var a=t;if(e.length>t.length){i=t;a=e}var r={};var o,n;for(o=0,n=i.length;o<n;++o){r[i[o]]=true}var l=[];for(o=0,n=a.length;o<n;++o){if(r[a[o]]){l.push(a[o])}}return l}function t(e,t){this._seriesBinds=e;this._seriesMeta=t;this._init(e)}var i=t.prototype;i.hasNext=function(){return this._index<this._maxIndex-1};i.next=function(){if(!this.hasNext()){return null}this._increasePivot();var t=this._pivots;var i=this._seriesBinds;var a=this._seriesMeta;var r=null;var o=[];var n;for(var l=0,s=this._bindsLength;l<s;++l){if(!i[l].rowArray){continue}var u=i[l].rowArray[t[l]];n=u.mndIndex;r=r==null?u.reference:e(r,u.reference);o.push({key:a[l],value:u})}var c={index:this._index,reference:r,data:o};if(n!=null){c.mndIndex=n}return c};i._init=function(e){var t=[];var i=1;for(var a=0,r=e.length;a<r;a++){var o=e[a].rowArray||e[a].metaData;var n=o.length;t.push(n);i*=n}this._maxIndex=i;this._bindsLength=r;this._lengthArr=t;this._pivots=t.map(function(){return 0});this._pivots[r-1]=-1;this._index=-1};i._increasePivot=function(){this._index++;var e=this._pivots;var t=this._lengthArr;for(var i=e.length;i--;){e[i]++;if(e[i]<t[i]){break}else{e[i]=0}}};return t});define("sap/viz/chart/chains/TYChains",["sap/viz/framework/common/util/TypeUtils","sap/viz/chart/chains/ChainUtils","sap/viz/chart/chains/SeriesIterator","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/chart/chains/BaseChains","sap/viz/framework/common/util/FunctionUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/binding/BindingManager","sap/viz/chart/chains/SeriesContext"],function e(t,i,a,r,o,n,l,s,u,c,h,p){var d={};var f="Dimension";var v=["GetDimensionsFromFlattable","OnBindingFinished","getContext"];d=n.extend("ty",v);d.tyOnBindingStart=function(){d.parsedData=null;d.multiDimensionIndex=null};d.tyGetBindingSeries=function(e,t,i,a,r,o,n){y(e,t,i,a,o,n)};function g(e,t){for(var i=0,a=t.length;i<a;i++){if(t[i].id===e){return i}}return-1}function m(e,t,i,a,r){var o;if(t){e.context=[];for(o=0;o<t.length;++o){e.context.push(t[o][a][r])}}if(i){e.addition=[];for(o=0;o<i.length;++o){e.addition.push(i[o][a][r])}}}function y(e,o,n,h,f,v){var y=[];var _=[];var A=[];var b;var x=[];var S=[];var D;var w;var C;var T=[];var z=[];var L;var P;var k,E,I,O;var R=h.seriesType==="bullet";var N,M,B;var V,F;var H=false;var U=null;var W=v&&v.errorOnDuplicate;var G=v&&v.isTimeStacked;f.some(function(e){if(e.sort===true){H=true;U=e.id;return true}return false});for(k=0;k<o.length;++k){var Y=o[k];L=h[Y];if(L){if(Y==="timeAxis"){b=L;D=Y}else{_.push(L);x.push(Y)}T.push(Y)}}var X=-1;for(k=0;k<n.length;++k){M=n[k];L=h[M];if(L){if(M==="bubbleWidth"){X=k}S.push(M);A.push(L);z.push(M)}}var j=v&&v.allowEmptyMeasure;var Z=_.length;var q;var K;var Q,$,J;var ee=h.context?h.context.values:null;var te=h.additionInfo&&h.additionInfo.values;var ie;if(G){ie=i.getAvailableCategories(A,_)}var ae=R?h.actualValues.metaData.length:1;if(Z===0){for(var re=0;re<ae;re++){C=[];C._mndIndex=re;if(b&&b.values&&b.values.length){var oe=b.values[0];if(v&&v.isTimeStacked){oe.sort(function(e,t){if(e&&t){return e.parsedValue-t.parsedValue}else if(!e){return-1}else if(!t){return 1}})}for(var ne=0;ne<oe.length;ne++){P={};var le=oe[ne];for($=0;$<S.length;++$){F=A[$];if(v&&v.isTimeStacked){w=F.values[ne]}else{w=F.values[ne][re]}q=X===$?true:t.isExist(w);if(t.isExist(le)&&(q||v.allowEmptyMeasure)){if(!P[D]){P[D]=[le]}P[S[$]]=w==null?w:+w;if(!q){if(R){P.isNullValue=true}if(v.breakOnEmptyMeasure){P._break=true}}m(P,ee,te,ne,0)}}if(!t.isEmptyObject(P)){if(R){P._cateIndex=ne}C.push(P)}}}y.push(C)}}else{N=i.parseData(e,b.metaData[0].id,d.parsedData);M=S.map(function(t){return h[t].metaData.map(function(t){return i.parseData(e,t.id,d.parsedData)})});K=M.map(function(e){return e[0]});var se;if(R&&ae>1){se=new a(_.concat(A[0]),x.concat(S[0]))}else{se=new a(_,x)}var ue=0;while(se.hasNext()){var ce=se.next();C=y[ce.index]=[];var he=M;var pe=S;if(H){C._mndIndex=0}if(ce.hasOwnProperty("mndIndex")){var de=ce.mndIndex;var fe=g(de,A[0].metaData);_[0].rowArray[se._index].mndIndex=fe;C._mndIndex=fe;he=[M[0][fe]]}else{if(!R){he=K}else{he=M.map(function(e){return e[ue%ae]}).filter(function(e){return!!e})}}B=ce.reference;if(B.length>0&&G){var ve=B.map(function(e){return{index:e,value:N[e]}});if(ve){c.stableSort(ve,function(e,t){if(e.value===t.value&&W){l.error(u.getLogMessage("IDS_ERROR_DATA_NOT_MATCHING_TIME_LEVEL"))}if(!e.value||!t.value){return-1}if(e.value.parsedValue===t.value.parsedValue&&W){l.error(u.getLogMessage("IDS_ERROR_DATA_NOT_MATCHING_TIME_LEVEL"))}return e.value.parsedValue-t.value.parsedValue});ve.map(function(e,t){B[t]=e.index})}}var ge=ce.data;for(k=0,I=B.length;k<I;++k){Q=B[k];w=he.map(function(e){return e[Q]});q=w.every(function(e,i){if(i===X){return true}return t.isExist(e)});if(t.isExist(N[Q])&&(j||q)){P={};if(R&&!q){var me=w.every(function(e,i){return!t.isExist(e)});if(me){P.isNullValue=true}}P[D]=[N[Q]];pe.forEach(function(e,t){P[e]=w[t]});ge.forEach(function(e){P[e.key]=e.value});if(!q&&v.breakOnEmptyMeasure){P._break=true}if(!G){m(P,ee,te,Q,0);C.push(P)}else{if(v.dataShapes&&v.dataShapes[C._mndIndex]==="line"){C.push(P)}else{C[ie[ue][k]]=P}var ye=ie[ue][k];m(P,ee,te,ye,ue)}if(!t.isEmptyObject(P)){if(R){P._cateIndex=Q}}}}ue++}}h.dimensions=T;h.measures=z;h.series=y;h.seriesContext=p(y,x,_,A);if(!H){return}var _e=[];var Ae=r.getDimensionParsedValue;var be=function(e,t){return Ae(e[U][0])-Ae(t[U][0])};for(k=y.length;k--;){C=y[k];if(!G||Z===0){c.stableSort(C,be);C._sorted=true}if(!s.isFiscal(e)){C._sorted=true}var xe=_e[C._mndIndex]=_e[C._mndIndex]||[Infinity,-Infinity];var Se=null;for(E=C.length;E--;){var De=C[E];var we=C[E-1];var Ce=Se===null?Ae(De[D][0]):Se;Se=we&&Ae(we[D][0]);if(G&&!De){continue}var Te=De[S];if(Ce===Se){if(W){l.error(u.getLogMessage("IDS_ERROR_DATA_NOT_MATCHING_TIME_LEVEL"))}if(!t.isExist(we[S])){we[S]=Te}C.splice(E,1)}else{xe[0]=Math.min(xe[0],Te);xe[1]=Math.max(xe[1],Te)}}}if(h.valueAxis2){h.valueAxis2.range=_e}else if(h.valueAxis){h.valueAxis.range=_e}}d.tyGetMeasuresFromFlattable=function(e,t,a,r,o,n,l){d.parsedData=i.getData(e,r,d.parsedData,l);var s=[],u=[];var h=/bubbleWidth/.test(n);for(var p=0;p<t.length;p++){var f=s[p]=i.parseData(e,t[p],d.parsedData);if(h){f=f.slice();f.forEach(function(e,t){if(e==null){f[t]=0}if(e<0){f[t]=-e}})}u[p]=c.extent(f.filter(function(e){return e!=null}).map(function(e){return+e}))}if(a.length!==s.length&&s.length>1){s=[s[s.length-1]];t=[t[t.length-1]];u=[u[u.length-1]]}return{values:c.transpose(s),metaData:i.buildMetaData(e,t),range:u}};Object.keys(d).forEach(function(e){h.registerChain(e,d[e])});return d});define("sap/viz/chart/behavior/config/handler/TimeLassoBehaviorHandler",["sap/viz/framework/common/util/oo","sap/viz/chart/behavior/config/handler/LassoBehaviorHandler","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/behavior/config/ContextualDataUtil","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/framework/interaction/Constants"],function(e,t,i,a,r,o,n){var l=function(){};e.extend(l,t);l.prototype.processTimeRange=function(e,t){if(t.getStatus("rangeSelection")){var i=t.getModule("main.plot");var a=i.getRealSize();var n=i.getSize();var l=i.getOffset();var s=t.getBBox(t.BoxType.PLOT_BOUND_NODE);var u=t.getBBox(t.BoxType.RANGE_SELECTION);var c=t.getTransformScaleRatio();u.width=u.width/s.width*n.width;var h={x:l.x-(u.left-s.left)/s.width*n.width,y:0};var p=t.getExtendTimeRange();h.x*=c.x;h.y*=c.y;a.width*=c.x;a.height*=c.y;var d=false;var f=t.getDataModel();if(f&&f._rawData){d=o.isFiscal(f._rawData)}var v=r.getTimeAxisDomain(u,h,a,p,i.isHorizontal(),d);if(d){v[0]=parseInt(o.quantityToFiscal(Math.round(v[0]),t.getProperties()).fiscalString);v[1]=parseInt(o.quantityToFiscal(Math.round(v[1]),t.getProperties()).fiscalString);e.data.isConvertedFiscalStamp=true}else{v[0]=Math.round(v[0]/100)*100;v[1]=Math.round(v[1]/100)*100}t.setStatus("rangeDomain",v);t.fireEvent("showDetail",e.data)}};l.prototype.refreshTimeRange=function(e,t){var i=t.getProperties().get("interaction.selectability.mode");var a=i?i.toUpperCase():i;var r=t.getProperties().get("interaction.selectability.plotLassoMode");if(!(r!=="range"||!t.getStatusManager().get("interaction.holdSelection")||a===n.SELECTION_MODE.NONE||a===n.SELECTION_MODE.SINGLE)){this._lassoDecoration.rangeRecover(e)}t._rootNode.node().style.cursor="default"};l.prototype.rangeRecover=function(e,t){this._lassoDecoration.rangeRecover(e)};l.prototype.changeRangeEffect=function(e,t){this._lassoDecoration.changeRangeEffect(e)};l.prototype._getStartEnd=function(e,t){var i=e.getDataModel();if(i&&i._rawData&&o.isFiscal(i._rawData)){t.start=o.fiscalToQuantity(t.start,e.getProperties());t.end=o.fiscalToQuantity(t.end,e.getProperties())}return t};l.prototype._postProcessTargets=function(e,t){t=l.superclass._postProcessTargets.apply(this,arguments);var r=e.getProperties().get("interaction.selectByTimeAxisGroup");if(r){var o=[];t.forEach(function(t){if(o.indexOf(t)===-1){var r=e.getNodes(e.NodeType.DATA_POINT_GROUP,false)[0];var n=i.findByDataPointId(r,t);var l=a.getDataPointsByTimeField(n,e).map(function(e){return i.getDataPointId(e)});o=o.concat(l)}});if(o.length>0){t=o}}return t};return l});define("sap/viz/chart/behavior/config/TimeLassoBehaviorConfig",["sap/viz/chart/behavior/config/handler/TimeLassoBehaviorHandler","sap/viz/framework/interaction/BehaviorManager"],function(e,t){var i="v-m-root";var a=["info/timeseries_line","info/timeseries_column","info/timeseries_scatter","info/timeseries_bubble","info/timeseries_combination","info/dual_timeseries_combination","info/timeseries_stacked_column","info/timeseries_stacked_combination","info/timeseries_100_stacked_column","info/timeseries_bullet","info/timeseries_waterfall"];var r=[{id:"timeLassoBehaviorDefinition",handler:e,handlerType:"class",triggerEvent:[{name:"standAloneInitialized",method:"standAloneInitialized"},{name:"afterBehaviorLoaded",method:"initialized"},{name:"beforeBehaviorUnloaded",method:"unloadClear"},{name:"lassostart",targets:i,supportedChartTypes:a,excludeTargets:"v-m-scrollbarThumb",method:"lassoStart"},{name:"lassomove",supportedChartTypes:a,targets:i,method:"lassoMove"},{name:"lassoend",supportedChartTypes:a,targets:i,method:"lassoEnd"},{name:"afterChartRendered",targets:i,method:"refreshTimeRange",supportedChartTypes:a},{name:"rangeRecover",targets:i,method:"rangeRecover",supportedChartTypes:a},{name:"timeRangeChanged",targets:i,method:"processTimeRange",supportedChartTypes:a},{name:"changeRangeEffect",targets:i,method:"changeRangeEffect",supportedChartTypes:a}]}];t.registerAll(r);return r});define("sap/viz/chart/views/TimeYChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/plotareas/TimeYPlotArea","sap/viz/chart/components/legend/CombinationLegend","sap/viz/chart/components/legend/LineLegend","sap/viz/framework/common/util/DataUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/util/TextUtils","sap/viz/chart/scales/TimeScaleProcessor","sap/viz/chart/chains/TYChains","sap/viz/chart/dynamicScales/StackedDyScaleProcessor","sap/viz/chart/behavior/config/TimeLassoBehaviorConfig"],function e(t,i,a,r,o,n,l,s){var u=function(e,t){u.superclass.constructor.apply(this,arguments);this._supportLazyRender=true};t.extend(u,i);u.prototype.setSize=function(){if(this._plotArea&&this._plotArea.setRoughSize){this._plotArea.setRoughSize.apply(this._plotArea,arguments)}u.superclass.setSize.apply(this,arguments)};u.prototype._getDataItems=function(){return["valueAxis","timeAxis","color","series","seriesContext"]};u.prototype._getLegendInitOptions=function(){return[{noFillSupport:true}]};u.prototype._createPlotContainer=function(){this._plotArea=new a(this.runtime(),{renderType:this._renderType,rawData:this._rawData});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};u.prototype.isBar=function(){return this._renderType.search(/bar|column/)!==-1&&!/timeseries.*column/.test(this._renderType)};u.prototype.isCombination=function(){return this._renderType.search(/combination/)!==-1};u.prototype.isLine=function(){return this._renderType.indexOf("line")!==-1};u.prototype._getLegendDefinition=function(){if(this.isCombination()){return[r]}else if(this.isLine()){return[o]}else{return u.superclass._getLegendDefinition.apply(this,arguments)}};u.prototype._getLegendInitOptions=function(){if(this.isBar()){return[{noFeeding:true,noFillSupport:true}]}else{return[{noFillSupport:true}]}};u.prototype.calculatePaddingInPX=function(e){var t=u.superclass.calculatePaddingInPX.apply(this,arguments);if(e.get("title.visible")===false&&e.get("valueAxis.visible")===true){this.changePaddingTop(e,t)}return t};return u});define("sap/viz/chart/metadata/bindings/TimeYBindings",[],function e(){var t=[{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:true,role:"layout.time"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"}];return t});define("sap/viz/chart/components/plotareas/TimeBulletPlotArea",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plotareas/TimeYPlotArea","sap/viz/chart/components/plotareas/BulletPlotArea","sap/viz/framework/common/util/TypeUtils"],function(e,t,i,a){function r(){r.superclass.constructor.apply(this,arguments)}e.extend(r,t);r.prototype.isColumnLike=function(){return true};r.prototype._getValueAxis=function(e){return e.actualValues};r.prototype._getItemMinMax=function(e){var t=e["actualValues"];var i=e["additionalValues"];var r=e["targetValues"];var o=a.isNumber(t)&&a.isNumber(i)?i+t:undefined;var n=[t,i,o,r].filter(a.isNumber);var l=n.length>0?Math.min.apply(null,n):undefined;var s=n.length>0?Math.max.apply(null,n):undefined;return{min:l,max:s}};r.prototype.updateValueScale=function(){var e=this._data;var t=this._roughSize.width;var a=this._roughSize.height;if(this.isColumnLike()&&e&&t>0&&a>0){this._updateTimeScale(e.timeAxis,this._categoryAxis,{minTimeLevel:(this.runtime().statusManager().get("timeLevels")||[])[0]||["day"],showAsUTC:this.properties("general.showAsUTC")})}return i.prototype.updateValueScale.apply(this,arguments)};return r});define("sap/viz/chart/chains/TBulletChains",["sap/viz/chart/chains/BaseChains","sap/viz/chart/chains/TYChains","sap/viz/chart/chains/BulletChains","sap/viz/framework/common/util/BulletUtils","sap/viz/framework/binding/BindingManager"],function e(t,i,a,r,o){var n={};n=t.extend("tBullet",[]);Object.keys(i).forEach(function(e){var t=e.replace(/^ty/,"tBullet");n[t]=i[e]});n.tBulletGetBindingSeries=function(e,t,a,o,n,l,s){i.tyGetBindingSeries(e,t,a,o,n,l,s);r.bulletSetMinMax(o)};n.tBulletGetMeasuresFromFlattable=a.bulletGetMeasuresFromFlattable;Object.keys(n).forEach(function(e){o.registerChain(e,n[e])});return n});define("sap/viz/chart/views/TimeBulletChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/BulletChartView","sap/viz/chart/components/plotareas/TimeBulletPlotArea","sap/viz/chart/scales/BulletColorScale","sap/viz/chart/chains/TBulletChains","sap/viz/chart/scales/TimeScaleProcessor","sap/viz/chart/behavior/config/TimeLassoBehaviorConfig"],function(e,t,i,a){var r=function(){r.superclass.constructor.apply(this,arguments)};e.extend(r,t);r.prototype._getDataItems=function(){return["actualValues","additionalValues","color","series","timeAxis","targetValues","forecastValues"]};r.prototype._createPlotContainer=function(){this._plotArea=new i(this.runtime(),{renderType:this._renderType,rawData:this._rawData});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};r.prototype._dataChanged=function(){if(this._data&&!this._data.color){this._data.color=this._createSeries(this._data)}r.superclass._dataChanged.apply(this,arguments)};r.prototype._createSeries=function(e){var t="actualValues,additionalValues,forecastValues,targetValues".split(",").reduce(function(t,i){if(e[i]&&e[i].metaData){t[i]=e[i].metaData.map(function(e){return e.name||e.id})}return t},{});return{scale:new a([],this.runtime()._propertyMgr,{mnds:t})}};return r});define("sap/viz/chart/metadata/bindings/TimeBulletBindings",[],function(){return[{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:true,role:"layout.time"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"mark.color"},{id:"actualValues",name:"IDS_PRIMARY_VALE",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"additionalValues",name:"IDS_ADDITIONAL_VALE",type:"Measure",min:0,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"targetValues",name:"IDS_TARGETVALUES",type:"Measure",min:0,max:Number.POSITIVE_INFINITY,role:"mark.target"}]});define("sap/viz/chart/metadata/bindings/TimeYCombinationBindings",[],function e(){var t=[{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:true,configurable:false,role:"layout.time"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:1,max:1,MNDOnly:true,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:2,max:Number.POSITIVE_INFINITY,role:"layout.value"}];return t});define("sap/viz/chart/components/plotareas/TimeYYPlotArea",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/components/plotareas/TimeYPlotArea","sap/viz/chart/components/plotareas/XYYPlotArea","sap/viz/chart/components/plots/TYPlotFactory","sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/components/axis/ValueAxis","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/format/UnitFormat","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/datalabels/BarDataLabels","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/FiscalUtil","sap/viz/chart/components/axis/TimeAxis"],function(e,t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m){var y=function(e,t){y.superclass.constructor.apply(this,arguments)};t.extend(y,a);var _=y.prototype;_._getPlotOptions=function(){return{isDualValueAxis:true}};_.setData=function(e){y.superclass.setData.apply(this,arguments);this._applyDefaultProperties(e)};_._applyDefaultProperties=function(e){r.prototype._applyDefaultProperties.apply(this,arguments)};_.allOrNone=function(e,t){r.prototype.allOrNone.apply(this,arguments)};_._init=function(){this._plot=n.create(this._renderType,o.getPlotClazz(this._renderType),this.runtime(),this._getPlotOptions());this.setChild("plot",this._plot,{position:"center"});this._plot.getDispatch().on("reRenderComplete.plotarea",this._reRenderComplete.bind(this));var t=!this._properties.get("interaction.noninteractiveMode");this.setLayoutSequence(["left","right",this.allOrNone.bind(this),"bottom","top"]);this._categoryAxis=new m(this.runtime(),{name:"timeAxis",hasScrollbar:t,isColumnLike:this.isColumnLike(),rawData:this._rawData});this.setChild("timeAxis",this._categoryAxis,{position:"bottom"});this._valueAxis=new l(this.runtime(),{name:"valueAxis"});this.setChild("valueAxis",this._valueAxis,{position:"left"});this._valueAxis2=new l(this.runtime(),{name:"valueAxis2"});this.setChild("valueAxis2",this._valueAxis2,{position:"right"});if(t){this._hScrollbar=this._categoryAxis.getChild(e.AXIS.SCROLLBAR_NAME).module}if(this._isPercentageChart()){this._valueAxis.setPercentageMode(true);this._valueAxis2.setPercentageMode(true)}this.getZoomer().init({main:this,plot:this._plot,isHorizontal:false})};_._preRender=function(){y.superclass._preRender.apply(this,arguments);this._runtime.statusManager().add("globalDomain2",{value:this._valueAxis2._scale.getDomain(),readonly:true})};_.updateValueScale=function(){this._adjustTimeDomain();return r.prototype.updateValueScale.call(this)};_._updateValueScaleDomain=function(e,t){var i=this._data;var a=this._roughSize.width;var r=this._roughSize.height;if(!i||a<=0||r<=0){return false}var o=[0,1];if(this._plot.isHorizontal()){o[1]=a}else{o[1]=r}o[1]*=.8;var n=i[t].scale;var l=n.getDomain().slice();n.setDomain(e);var u=s.calcScale(n,o,{keepAutoScale:true,isLineChart:this._isLineChart()});e=u.scale.getDomain();n.setDomain(e);i[t].tickHint=u.tickHint;i[t].scale.setRange([0,1]);this["_"+t].setData(i[t],true);return l[0]!==e[0]||l[1]!==e[1]};_._scroll=function(e){var t=this.getChildrenByPosition("center")[0];var i=t.getRealSize();var r=t.getSize();var o=t.isHorizontal();if(this._properties.get("interaction.syncValueAxis")&&(o&&i.height>r.height||!o&&i.width>r.width)){var n=this._data.rawData;var l=n.dataModel;var u=n.scales;var c=false;if(l&&l._rawData){c=g.isFiscal(l._rawData)}var h,p=s.getTimeAxisDomain(r,e,i,this._data.timeAxis.scale.getDomain(),o,c);var f=this._getValueRange(l.series().filter(function(e){for(var t=0;t<e.length;t++){if(e[t]){return e[t].hasOwnProperty("valueAxis")}}return false}),p[0],p[1],u.valueAxis.getOption());if(f==null){f=u.valueAxis.getDomain()}var v=this._updateValueScaleDomain(f,"valueAxis");if(v){h=this.getChild("timeAxis").module;h.setHasNegativeValue(d.domainWithNegativeValue(f));this.getChild("valueAxis").module.update()}var m=this._getValueRange(l.series().filter(function(e){for(var t=0;t<e.length;t++){if(e[t]){return e[t].hasOwnProperty("valueAxis2")}}return false}),p[0],p[1],u.valueAxis2.getOption());if(m==null){m=u.valueAxis2.getDomain()}var y=this._updateValueScaleDomain(m,"valueAxis2");if(y){h=this.getChild("timeAxis").module;h.setHasNegativeValue(d.domainWithNegativeValue(m));this.getChild("valueAxis2").module.update()}}this._plot.update(e);a.superclass._scroll.apply(this,arguments)};return y});define("sap/viz/chart/views/TimeYYChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/TimeYChartView","sap/viz/chart/components/plotareas/TimeYYPlotArea","sap/viz/chart/scales/FrameScaleProcessor","sap/viz/chart/scales/ShapeScaleProcessor","sap/viz/chart/behavior/config/TimeLassoBehaviorConfig"],function e(t,i,a){var r=function(e,t){r.superclass.constructor.apply(this,arguments)};t.extend(r,i);r.prototype._getDataItems=function(){return["valueAxis","valueAxis2","timeAxis","color","color2","series"]};r.prototype._createPlotContainer=function(){this._plotArea=new a(this.runtime(),{renderType:this._renderType,rawData:this._rawData});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};return r});define("sap/viz/chart/metadata/bindings/TimeYYBindings",[],function e(){var t=[{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:true,configurable:false,role:"layout.time"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:1,max:1,MNDOnly:true,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"valueAxis2",name:"IDS_VALUE_AXIS2",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.secondValue"}];return t});define("sap/viz/chart/metadata/bindings/TimeYStackedCombinationBindings",[],function e(){var t=[{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:true,role:"layout.time"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:2,max:Number.POSITIVE_INFINITY,role:"layout.value"}];return t});define("sap/viz/chart/metadata/bindings/YYTimeBindings",[],function e(){var t=[{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"mark.color"},{id:"shape",name:"IDS_SHAPE",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:false,role:"mark.shape"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:1,role:"layout.value"},{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:false,role:"layout.time"},{id:"bubbleWidth",name:"IDS_BUBBLESIZE",type:"Measure",min:1,max:1,role:"mark.size"}];return t});define("sap/viz/chart/components/datalabels/StackedWaterfallDataLabels",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/datalabels/DataLabels"],function(e,t,i,a,r,o){var n=[0,1];var l=function(e,t){l.superclass.constructor.apply(this,arguments);this._labelPosition="stackedWaterfall"};e.extend(l,o);l.prototype.verticalLabelOffset=-3;l.prototype.horizontalLabelOffset=6;l.prototype._getStyle=function(e){var t=this._properties;var i=l.superclass._getStyle.apply(this,arguments);var a=r.getContext(e);if(a&&a.hasOwnProperty("Type")&&this._data.waterfallTypeScale.scale(a.Type)!==0){i["font-weight"]="bold";i["cssString"]="fill:"+i.fill+";font-family:"+t.get("style.fontFamily")+";font-size:"+t.get("style.fontSize")+";font-weight:"+"bold"+";font-style:"+t.get("style.fontStyle")+";"}return i};l.prototype.hideConditional=function(e){for(var t=e.length-1;t>=0;t--){var a=e[t];var o=a.node;var n=r.getContext(o);var s=this._data.waterfallTypeScale.scale(n?n.Type:null);if(this.isDataLabelOutOfDataPoint(o,a)&&s!==1){i.remove(o);e.splice(t,1)}}return l.superclass.hideConditional.apply(this,arguments)};l.prototype.sortDataLabelInfos=function(e){var t,i,a,o;var l=this;e.sort(function(e,s){t=r.getContext(e.node);a=l._data.waterfallTypeScale.scale(t?t.Type:null);i=r.getContext(s.node);o=l._data.waterfallTypeScale.scale(i?i.Type:null);return n.indexOf(a)-n.indexOf(o)})};l.prototype._computeDataLabelPosition=function(e,t,i,a,r,o){var n,l;var s=t.x+e.e;var u=t.y+e.f;var c=this._horizontal?this.horizontalLabelOffset:this.verticalLabelOffset;if(this._horizontal){l=u+t.height/2-(a.y+a.height/2);if(this._data.waterfallTypeScale.scale(r.ctx.Type)!==0){n=s+t.width+c}else{n=s+t.width/2-(a.x+a.width/2)}}else{n=s+t.width/2-(a.x+a.width/2);if(this._data.waterfallTypeScale.scale(r.ctx.Type)!==0){l=u-(a.y+a.height);if(l+a.y<0){l=-a.y-c}else{l=l+c}}else{l=u+t.height/2-(a.y+a.height/2)}}return[n,l]};l.prototype.drawZero=function(e){return false};return l});define("sap/viz/chart/components/plots/StackedWaterFallPlot",["sap/viz/framework/common/util/oo","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/SVG","sap/viz/chart/components/plots/StackedColumnPlot","sap/viz/chart/components/plots/WaterFallPlot","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/plots/DataHandler","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/SeriesUtil","sap/viz/chart/components/datalabels/StackedWaterfallDataLabels","sap/viz/framework/common/util/UADetector","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DOM","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/util/WaterfallUtils"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b){var x=function(e,t){x.superclass.constructor.apply(this,arguments)};t.extend(x,r);x.prototype._isSupportNoFill=function(){return false};var S=.5;var D=y.CSS.CLASS.WATERFALL_LINKLINE;x.prototype.setData=function(e){if(e&&e.waterfallType&&e.waterfallType.scale){e.waterfallTypeScale=e.waterfallType.scale}x.superclass.setData.apply(this,arguments);return this};x.prototype.render=function(e){var t=this._size.width,i=this._size.height;this._size.width=t<0?0:t;this._size.height=i<0?0:i;x.superclass.render.apply(this,arguments)};x.prototype._getDataHandler=function(){return{valueAxis:s.getSTKWTFHandler()}};x.prototype._getXPosition=function(e,t,i){var a=this._dataHandler;var r=this._xHandlers[0];return o.prototype._getXYPosition.call(this,e,t,i,r,a[r.id])};x.prototype._getYPosition=function(e,t,i){var a=this._dataHandler;var r=this._yHandlers[0];return o.prototype._getXYPosition.call(this,e,t,i,r,a[r.id])};x.prototype._getValueScaleHandlers=function(e){return[l.getWTFScaleHandler("valueAxis",{isHorizontal:this.isHorizontal()})]};x.prototype._drawDatapoints=function(e){var t={validAxisData:this._needValidEmptyAxisData()};w.call(this,e,t)};x.prototype._updateDatapoints=function(e){var t={updateOnly:true,validAxisData:this._needValidEmptyAxisData()};w.call(this,e,t)};function w(e,t){var i=false;var r=false;if(t&&t.hasOwnProperty("updateOnly")){i=t.updateOnly}if(t&&t.hasOwnProperty("validAxisData")){r=t.validAxisData}var o=this._getSeries();var n=o.length;var l;if(i){l=e.select("."+y.CSS.CLASS.DATAPOINT_GROUP).node()}else{l=a.create("g");l.setAttribute("class",y.CSS.CLASS.DATAPOINT_GROUP)}if(!i&&this._seriesRenderer){this._seriesRenderer.init(n)}for(var s in this._dataHandler){if(this._dataHandler[s].reset){this._dataHandler[s].reset()}}var u;var c=0;var h=[],p;this._selection.selectAll("."+D).remove();var d=a.create("g");for(var f=0;f<n;f++){var v=o[f];if(!v){continue}var g=null;for(var A=0;A<v.length;A++){var b=v[A];if(!b){continue}if(r===true){var x=b.valueAxis===undefined||b.valueAxis===null;var S=b.valueAxis2===undefined||b.valueAxis2===null;if(x&&S){continue}}var w=this._getPosition(f,A,b);if(!w){continue}u=c++;var C=b.dp.context();if(C[C.measureNames]===null){C[C.measureNames]=b.valueAxis}var T=this._buildWrapperConfig(b,w,C);if(!g){g="valueAxis"}h[A]=h[A]||{};p=h[A][g]=h[A][g]||{configs:[],positions:[],currentIds:[],dataPoints:[]};if(i){if(!p.node){var z=m.find(l,u);var L=z;while((L=L.parentNode)&&!_.hasClass(L,y.CSS.CLASS.STACK)){}p.node=L}}else{var P=this._buildData(T);p.data=p.data||[];p.data.push(P)}p.configs.push(T);p.dataPoints.push(b.dp);p.positions.push(w);p.currentIds.push(u)}}var k=this._getDataPointRenderer(f);for(var E=0;E<h.length;E++){var I=h[E];for(var O in I){if(I.hasOwnProperty(O)){p=I[O];if(!p){continue}var R=this._drawCategory(p,k,[]);if(R){l.appendChild(R)}}}}if(h.length>1){this._drawLine(d,h)}l.appendChild(d);if(!i){this._postRender(l);e.node().appendChild(l);this._dataLabels._gridlineScale=this._gridlineScale;this._drawDataLabels(e,l)}else{var N=e.selectAll("."+y.CSS.CLASS.DATAPOINT)[0];this._dataLabels.updatePosition(e,N)}}x.prototype._getGap=function(){var e,t;if(this.isHorizontal()){e=this._getYPosition(0,0,{valueAxis:0,total:0,base:0});t=this._getYPosition(0,1,{valueAxis:0,total:0,base:0});return t[0]-e[0]}else{e=this._getXPosition(0,0,{valueAxis:0,total:0,base:0});t=this._getXPosition(0,1,{valueAxis:0,total:0,base:0});return t[0]-e[0]}};x.prototype._getHorizontalLine=function(e,t,i,a,r){var o,n,l;var s;var u=S;var c=e.length-1;var h=e[0];var p=t[0];var d=this._getGap();var f=d-p.height;var v=h.ctx[h.ctx.measureNames]<0;if(1===i||2===i){h=e[c];p=t[c];v=h.ctx[h.ctx.measureNames]<0;s=!v?Math.round(p.x+p.width):Math.round(p.x+u);if(a!==0){o={y1:Math.round(p.y-f/2),y2:Math.round(p.y+p.height)};o.x1=o.x2=s}if(a!==this._data.series[0].length-1){n={y1:Math.round(p.y),y2:Math.round(p.y+p.height+f/2)};n.x1=n.x2=s}if(i===2){h=e[0];p=t[0];v=h.ctx[h.ctx.measureNames]<0;l={y1:Math.round(p.y-d*r),y2:Math.round(p.y+p.height)};s=!v?Math.round(p.x):Math.round(p.x+p.width+u);l.x1=l.x2=s}}else{if(a!==0){o={y1:Math.round(p.y-f/2),y2:Math.round(p.y+p.height)};s=!v?Math.round(p.x):Math.round(p.x+p.width+u);o.x1=o.x2=s}h=e[c];p=t[c];v=h.ctx[h.ctx.measureNames]<0;if(a!==this._data.series[0].length-1){n={y1:Math.round(p.y),y2:Math.round(p.y+p.height+f/2)};s=!v?Math.round(p.x+p.width):Math.round(p.x+u);n.x1=n.x2=s}}return{lLine:o,rLine:n,subLine:l}};x.prototype._getVerticalLine=function(e,t,i,a,r){var o,n,l;var s;var u=S;var c=e.length-1;var h=e[0];var p=t[0];var d=this._getGap();var f=d-p.width;var v=h.ctx[h.ctx.measureNames]<0;if(1===i||i===2){h=e[c];p=t[c];v=h.ctx[h.ctx.measureNames]<0;s=!v?Math.round(p.y):Math.round(p.y+p.height+u);if(a!==0){o={x1:Math.round(p.x-f/2),x2:Math.round(p.x+p.width)};o.y1=o.y2=s}if(a!==this._data.series[0].length-1){n={x1:Math.round(p.x),x2:Math.round(p.x+p.width+f/2)};n.y1=n.y2=s}if(i===2){h=e[0];p=t[0];v=h.ctx[h.ctx.measureNames]<0;l={x1:Math.round(p.x-d*r),x2:Math.round(p.x+p.width)};s=!v?Math.round(p.y+p.height):Math.round(p.y+u);l.y1=l.y2=s}}else{if(a!==0){o={x1:Math.round(p.x-f/2),x2:Math.round(p.x+p.width)};s=!v?Math.round(p.y+p.height):Math.round(p.y+u);o.y1=o.y2=s}h=e[c];p=t[c];v=h.ctx[h.ctx.measureNames]<0;if(a!==this._data.series[0].length-1){n={x1:Math.round(p.x),x2:Math.round(p.x+p.width+f/2)};s=!v?Math.round(p.y):Math.round(p.y+p.height+u);n.y1=n.y2=s}}return{lLine:o,rLine:n,subLine:l}};x.prototype._drawLine=function(e,t){var i=this._properties.get("linkline.visible");if(!i){return}var a=[];var r;var o,n;for(o=0;o<t.length;o++){var l=t[o];for(var s in l){if(l.hasOwnProperty(s)){n=l[s];if(!n){continue}var u=n.configs;var c=true;for(var h=0;h<u.length;h++){if(null!==u[h].ctx[u[h].ctx.measureNames]){c=false;break}}if(c){continue}var p=null;var d=this._data.waterfallType.values;if(d&&d.hasOwnProperty(o)){if(A.isArray(d[o])){p=d[o][d[o].length-1]}else{p=d[o]}}var f=this._data.waterfallType.scale.scale(p);var v=this._getChildNumScale(p);if(this.isHorizontal()){r=this._getHorizontalLine(u,n.positions,f,o,v)}else{r=this._getVerticalLine(u,n.positions,f,o,v)}if(r.lLine){a.push(r.lLine)}if(r.rLine){a.push(r.rLine)}if(2===f){a.push(r.subLine)}}}}b.drawLines(a,this._properties,this.isHorizontal(),e,true)};x.prototype._getDataLabels=function(e,t){this._datalabels=new v(t,{name:e,horizontal:this.isHorizontal()});return this._datalabels};x.prototype._buildWrapperConfig=function(e,t,i){var a=x.superclass._buildWrapperConfig.apply(this,arguments);var r=this._data.waterfallType.scale.scale(e.waterfallType);if(1===r&&!a.matchSemantic){var o=this._properties.get("dataPoint.color.total");var n=this._effectManager;if(o&&n.isColorProp(o)){a.graphic.fill=n.parseColorProperty(o,a.graphic.fill)}else{a.graphic.fill=o}}return a};x.prototype._getChildNumScale=function(e){return this._data.waterfallType.scale.childrenNum(e)};return x});define("sap/viz/chart/components/plots/WaterFallPlotFactory",["jquery","sap/viz/chart/components/plots/WaterFallPlot","sap/viz/chart/components/plots/StackedWaterFallPlot"],function(e,t,i){var a={waterfall:{plotClazz:t},stacked_waterfall:{plotClazz:i},horizontal_waterfall:{plotClazz:t},horizontal_stacked_waterfall:{plotClazz:i}};return{getPlotClazz:function(e){var t=a[e];return t&&t.plotClazz}}});define("sap/viz/chart/components/axis/renderer/WaterfallCategoryBodyRenderer",["sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/axis/renderer/OrdinalCommonBodyRenderer","sap/viz/framework/common/util/oo"],function(e,t,i){var a=function(){a.superclass.constructor.apply(this,arguments)};i.extend(a,t);a.prototype._createLabelStyle=function(t,i){a.superclass._createLabelStyle.apply(this,arguments);this._propStyleTotal=e.clone(this._propStyle);this._propStyleTotal.fontWeight="bold"};a.prototype._getLabelStyle=function(t,i){if(t&&t._waterfallType!==undefined&&t._waterfallType!==0){return e.clone(this._propStyleTotal)}return a.superclass._getLabelStyle.apply(this,arguments)};return a});define("sap/viz/chart/components/axis/sub/WaterfallCategoryAxisBody",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/components/axis/sub/CategoryAxisBody","sap/viz/chart/components/axis/renderer/WaterfallCategoryBodyRenderer"],function(e,t,i,a){var r=function(){r.superclass.constructor.apply(this,arguments);this.setBodyRenderer(new a)};e.extend(r,i);r.prototype._buildLayers=function(e){var i=r.superclass._buildLayers.apply(this,arguments);if(e._waterfallType&&i&&i.length>0&&i[i.length-1].cells){var a=e._waterfallType.values;if(a){var o=a.length;var n=i[i.length-1].cells;for(var l=0;l<n.length;l++){var s=null;if(t.isArray(a[l])){for(var u=0;u<a[l].length;u++){if(a[l][u]!==undefined){s=a[l][u];break}}}else{s=a[l]}n[l]._waterfallType=e._waterfallType.scale.scale(l<o?s:null)}}}return i};r.prototype.getLayoutCellsConfig=function(){var e=r.superclass.getLayoutCellsConfig.apply(this,arguments);if(e&&e.propStyle){e.propStyle.fontWeight="bold";if(e.propParentStyle){e.propParentStyle.fontWeight="bold"}}return e};return r});define("sap/viz/chart/components/axis/WaterfallCategoryAxis",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/CategoryAxis","sap/viz/chart/components/axis/sub/WaterfallCategoryAxisBody"],function(e,t,i){var a=function(e,t){a.superclass.constructor.apply(this,arguments)};e.extend(a,t);a.prototype.setData=function(e,t){if(e&&e.hasOwnProperty("categoryAxis")){a.superclass.setData.call(this,e.categoryAxis,t);this._hasNegativeValue=t;if(e.categoryAxis.scale){this._scale=e.categoryAxis.scale;this._scale._waterfallType=e.waterfallType}}};a.prototype._setAxisBody=function(e,t){this.setChild("axisBody",new i(e,t),{order:1,priority:2,offset:0})};return a});define("sap/viz/chart/components/plotareas/WaterfallPlotArea",["sap/viz/framework/common/util/oo","sap/viz/chart/components/plots/WaterFallPlotFactory","sap/viz/chart/components/plotareas/XYPlotArea","sap/viz/chart/components/axis/WaterfallCategoryAxis","sap/viz/framework/common/util/DataUtils"],function e(t,i,a,r,o){var n=.8;var l=function(e,t){l.superclass.constructor.apply(this,arguments)};t.extend(l,a);l.prototype._setAxisData=function(e){this._categoryAxis.setData(e,o.hasNegativeValue(e))};l.prototype._isAdjustValueScaleForTopLabel=function(){return true};l.prototype._getCategoryAxisClass=function(){return r};l.prototype._isHorizontal=function(){return this._renderType.indexOf("horizontal")>-1};l.prototype._getPlotClazz=function(e){return i.getPlotClazz(e)};return l});define("sap/viz/chart/components/legend/WaterFallLegend",["sap/viz/framework/common/util/oo","sap/viz/chart/components/legend/ColorLegend","sap/viz/chart/components/legend/LineLegend","sap/viz/framework/common/util/Constants","sap/viz/chart/scales/ColorScale","sap/viz/framework/scale/ColorShapeScaleMerger","sap/viz/framework/common/lang/LangManager","sap/viz/framework/common/util/ObjectUtils","sap/viz/framework/common/util/StatusConstants","sap/viz/framework/common/util/TypeUtils"],function(e,t,i,a,r,o,n,l,s,u){var c=a.CSS.CLASS.LEGENDITEM,h="v-legend-element";var p=["positiveValue","negativeValue","total"];var d="measureNames";var f=function(e,t){f.superclass.constructor.apply(this,arguments);this._labelText={total:null,positiveValue:null,negativeValue:null};this._legendColor={total:null,positiveValue:null,negativeValue:null};this._isSemanticColoring=null;this._colorPalette=null;this._validItems=null;this._recapVisible=null};e.extend(f,t);function v(e,t){var i;if(t&&t.valueAxis&&t.valueAxis.metaData&&t.valueAxis.metaData[0]){i=t.valueAxis.metaData[0].id}else{return}var a=[];var o=[];var n=[];var l,s;var u=e._validItems;var c=false;for(var h=0;h<u.length;h++){l=u[h];if(e._isSemanticColoring||l==="total"){n.push(e._legendColor[l]);o.push([e._labelText[l]])}else{if(n.indexOf(e._colorPalette[0])<0){n.push(e._colorPalette[0])}if(!c){e._validItems=e._validItems.filter(function(e){return e==="total"});e._validItems.unshift(i);o.push([i]);c=true}}}if(!e._isSemanticColoring&&t.color){a.push(t.color)}else{var p=new r(o,n),f=[{id:d,type:"Dimension",values:t.valueAxis.metaData}];a.push({scale:p,metaData:f})}e.setColorScale(a)}function g(e,t){e.sort(function(e,i){return t.indexOf(e)-t.indexOf(i)});return e}f.prototype._initColorShapeScale=function(){f.superclass._initColorShapeScale.apply(this,arguments);var e=this.runtime().semanticManager();var t,i;if(!(e.hasDataPointColorStyle()&&e.isOverrideMode())&&this._colorShapeScale){var a=this._colorShapeScale.getLength();var r=this._validItems;var o=0;for(var n=0;n<a;n++){if(!this._colorShapeScale.getItem(n).isSemanticItem){t=r[o++];i=this._buildLegendContext(t);this._colorShapeScale.setContext(n,i)}}}};f.prototype._constructTitle=function(e){var t="",i=this.runtime().semanticManager(),a=i.isOverrideMode()&&i.hasDataPointColorStyle();if(this._isSemanticColoring&&!a){var r=e[0];if(r.values.length>1){t=n.get("IDS_DEFAULTMND")}else{var o=r.values[0];t=o.name||o.id}}else{t=f.superclass._constructTitle.apply(this,arguments)}return t};f.prototype.render=function(e,t){this._getLegendProperties();v(this,this._data);f.superclass.render.apply(this,arguments)};f.prototype._getLegendProperties=function(){this._labelText.total=this._properties.get("label.text.total")||n.get("IDS_SEMANTICTOTAL");var e=this._properties.get("label.text.positiveValue");if(e===null||e===""){e=n.get("IDS_INCREASING")}this._labelText.positiveValue=e;var t=this._properties.get("label.text.negativeValue");if(t===null||t===""){t=n.get("IDS_DECREASING")}this._labelText.negativeValue=t;this._legendColor.total=this._properties.origin.get("plotArea.dataPoint.color.total");this._legendColor.positiveValue=this._properties.origin.get("plotArea.dataPoint.color.positive");this._legendColor.negativeValue=this._properties.origin.get("plotArea.dataPoint.color.negative");this._isSemanticColoring=this._properties.origin.get("plotArea.dataPoint.color.isSemanticColoring");this._colorPalette=this._properties.origin.get("plotArea.colorPalette");this._recapVisible=this._properties.origin.get("plotArea.dataLabel.showRecap");this._recapColor=this._properties.origin.get("plotArea.linkline.color")};f.prototype.setData=function(e){this._data=e;this._getLegendProperties();this._validItems=this._getShownLegendItem(e);v(this,e);return this};f.prototype._buildLegendContext=function(e){var t=[];var i=1;var a=this._data.categoryAxis&&this._data.categoryAxis.metaData;var r;for(r=0;a&&r<a.length;++r){if(a[r].id==="measureNames"&&a[r].values.length>1){i=a[r].values.length}}a=this._data.valueAxis.metaData;var o=this._data.waterfallType?this._data.waterfallType.metaData:undefined;var n=o&&o[0]?o[0].id:undefined;var s={};if(n){if(e==="total"){s[n]="total"}else{s[n]={notEqual:"total"}}}if(this._isSemanticColoring){for(r=0;r<i;++r){var u=l.extend(true,{},s);if(e==="positiveValue"){u[a[r].id]={min:0}}else if(e==="negativeValue"){u[a[r].id]={openmax:0}}t.push(u)}}else{t.push(s)}return t};f.prototype._getShownLegendItem=function(e){var t=e._dataPoints;var i,a,r,o,n,l;var s=[];var u=this._data.waterfallType?this._data.waterfallType.metaData:undefined;var c=u&&u[0]?u[0].id:undefined;for(var h in t){if(t.hasOwnProperty(h)){if(s.length===3){break}a=t[h];if(a){r=a.context();i=r.measureNames;o=c?r[c]:undefined;l=r[i];if(l>=0&&o!=="total"){n="positiveValue"}else if(l<0&&o!=="total"){n="negativeValue"}else if(o==="total"){n="total"}if(s.indexOf(n)===-1){s.push(n)}}}}if(!this._isSemanticColoring&&s.indexOf("total")<0){return[]}s=g(s,p);return s};f.prototype._buildColorShapeScale=function(e){var t=f.superclass._buildColorShapeScale.apply(this,arguments);var i=this._properties.origin.get("plotArea.dataLabel.recapTitle")||n.get("IDS_END_OF_PERIOD");if(this._recapVisible){t._items.push({color:this._recapColor,data:[i],shape:"squareWithLine"})}return t};f.prototype._isShowWideMarker=function(){return this._recapVisible};f.prototype._getMarkerWidth=i.prototype._getMarkerWidth;f.prototype._calcMetaInfo=i.prototype._calcMetaInfo;f.prototype._createGroupItems=function(e,t){f.superclass._createGroupItems.apply(this,arguments);if(this._data.timeAxis){e.selectAll("g."+c).classed(c,false)}};f.prototype.destroy=function(){f.superclass.destroy.apply(this,arguments);this._labelText=null;this._legendColor=null;this._validItems=null};f.prototype.statusChanged=function(e){if(e===s.LOCALE_CHANGED){this._colorShapeScale=null;this._getLegendProperties();v(this,this._data)}};return f});define("sap/viz/chart/scales/WaterFallTypeScale",["sap/viz/framework/common/util/oo","sap/viz/chart/scales/BaseScale","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/util/WaterfallUtils","sap/viz/framework/common/util/DataUtils"],function(e,t,i,a,r){var o=r.DIMENSION_VALUE;var n=function(e,t,i){n.superclass.constructor.apply(this,arguments);this.__className="sap.viz.scale.WaterFallTypeScale";this._name=null;this._type="wtfType";i=i||{};this._key2Type=a.Key2Type;this._initScale()};e.extend(n,t);n.prototype._initScale=function(){this._scale=d3.scale.ordinal();this._scale.domain(this._domain).range(this._range);this._isReset=false};n.prototype.getDomain=function(){if(this._scale===undefined||this._isReset===true){this._initScale()}return this._domain};n.prototype.getRange=function(){if(this._scale===undefined||this._isReset===true){this._initScale()}return this._range};var l=function(e){var t=e;if(e&&e.hasOwnProperty(o)){t=e[o]}return t};n.prototype.scale=function(e){return a.scale(l(e),this._key2Type)};n.prototype.childrenNum=function(e){var t=this.scale(e);if(t!==2){return 0}var i=parseInt(l(e).split(":")[1].trim());return i};return n});define("sap/viz/chart/scales/WaterScaleProcessor",["sap/viz/chart/scales/WaterFallTypeScale","sap/viz/framework/scale/ScaleDataParseFactory","sap/viz/framework/common/util/ArrayUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/scale/ScaleRepository"],function(e,t,i,a,r){var o=function(e,t,o){var n=e["valueAxis"]();var l,s;var u=/timeseries.*waterfall/.test(t);if(u){s=null}else{l=e["waterfallType"]();s=l.values}var c=n.values;var h=n.categorySum;var p=e["series"]();var d={isStacked:/stacked_/.test(t)?true:false};var f=r.waterfallScale(n,"waterfallType",null,null,d);var v=parseFloat(o.propertyManager().get("plotArea.startValue"))||0;var g,m,y,_=v,A=0,b=[v],x=[];var S,D;var w,C=[];var T=function(){if(c[m]&&g.valueAxis===null){if(a.isArray(c[m])){g.valueAxis=c[m][y]}else{g.valueAxis=c[m]}}var e=+g.valueAxis||0;if(e===0){g.valueAxis=0}g.total=g.base+(u?e:h[m]);if(!x.hasOwnProperty(m)){x[m]=g.total}if(b.hasOwnProperty(m)){b[m]+=e}else{b[m]=g.base+e}};if(!u){for(m=0;m<c.length;m++){if(a.isArray(c[m])){S=c[m][c[m].length-1];D=s?s[m][s[m].length-1]:null;if(1===f.scale(D)){if(S===null){h[m]=0;for(y=m-1;y>=0;y--){D=s[y][s[y].length-1];h[m]+=h[y];if(1===f.scale(D)){break}}c[m][c[m].length-1]=h[m]}else{h[m]=S}}}else{D=s?s[m]:null;if(1===f.scale(D)){if(c[m]===null){h[m]=0;for(y=m-1;y>=0;y--){D=s[y];h[m]+=h[y];if(1===f.scale(D)){break}}c[m]=h[m]}else{h[m]=+c[m]}}}}w=c;for(m=0;m<w.length;m++){for(y=p.length-1;y>=0;y--){g=p[y][m]||{};h[m]=h[m]||0;D=s?s[m]:null;if(a.isArray(D)){D=D[D.length-1]}if(m===0){g.base=0}else{if(1===f.scale(D)){g.base=0}else if(2===f.scale(D)){g.base=x[m-1]-h[m]}else{g.base=x[m-1]}}T();_=Math.min(_,b[m]);A=Math.max(A,b[m])}}}else{var z=e["timeAxis"]();var L=z.values[0];if(L){L=L.map(function(e){return e?e.parsedValue:null});L=L.filter(function(e){return e});L=i.unique(L);L.sort(function(e,t){return e-t});z._sortedTimeStampSet=L;for(m=0;m<L.length;m++){for(y=0;y<p.length;y++){var P=p[y][i.bisearch(p[y],L[m],function(e){return e?e.timeAxis[0].parsedValue:0})];if(!P||P.timeAxis[0].parsedValue!==L[m]){if(!b.hasOwnProperty(m)){b[m]=g?g.base+g.valueAxis:0}continue}g=P;C[m]=(C[m]||0)+g.valueAxis;if(m===0&&y===0){g.base=v}else{g.base=y===0?b[m-1]:b[m]}T();_=Math.min(_,b[m]);A=Math.max(A,b[m])}}}}if(C.length>0){n.categorySum=C}n.range=[[_,A]];return e};r["waterfallScale"]=function(t,i,a,r,o){var n=t&&t.values?t.values.slice(0):[];var l=[0,1];var s=new e(n,l,o);return s};t.register("waterfall","valueAxis",o)});define("sap/viz/chart/chains/WaterFallChains",["sap/viz/chart/chains/BaseChains","sap/viz/chart/chains/ChainUtils","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/ArrayUtils","sap/viz/chart/util/WaterfallUtils","sap/viz/chart/chains/TYChains","sap/viz/framework/binding/BindingManager"],function e(t,i,a,r,o,n,l,s){var u={};var c=["GetDimensionsFromFlattable","GetContext","OnBindingFinished","OnBindingStart"];u=t.extend("waterfall",c);var h=function(e,t,a,o,l,s){var u=[];var c="categoryAxis";var h=o[c];var p,d;if(h){var f=[],v=[],g=[],m=[];var y="context";t.filter(function(e){return e!==c}).forEach(function(e){if(o[e]){f.push(o[e]);v.push(e)}});a.forEach(function(e){if(o[e]){g.push(o[e]);m.push(e)}});var _=i.dpInitializer(l);var A=i.getArrayLength(f);var b=i.generateIndexArray(A);s=s||{};var x=n.Key2Type;var S,D,w;for(p=0;p<b.length;p++){u[p]=new Array(h.rowArray.length);for(var C=0,T=h.rowArray.length;C<T;C++){S=_();var z=true;for(d=0;d<b[p].length;d++){var L=f[d].rowArray[b[p][d]];if(L.mndIndex){var P=L.mndIndex;var k=o[v[d]].metaData;var E=k[L.indexOf(P)];if(E&&E.values){var I=E.values;for(D=0;D<I.length;D++){if(I[D].id==P){L.mndIndex=D;break}}}}S[v[d]]=L}for(D=0;D<g.length;D++){if(r.isExist(g[D].values)&&g[D].values[C]!==undefined){w=g[D].values[C];for(d=0;d<b[p].length;d++){if(w[b[p][d]]!==undefined){w=w[b[p][d]]}}if(r.isArray(w)){z=false}else{S[m[D]]=w}}else{z=false}}var O=false;for(var R in S){if(R===n.WATERFALLTYPE&&n.scale(S[R],x)>0||R!==n.WATERFALLTYPE&&m.indexOf(R)>-1&&S[R]!==null){O=true;break}}if(!z||!O){continue}var N=i.processSeriesContext(o.context,C,b[p]);if(N){S.context=N}var M=i.processSeriesContext(o.additionInfo,C,b[p]);if(M){S.addition=M}var B=i.generateNum(A,b[p]);u[B]=u[B]||[];u[B][C]=S}}}o.series=u.filter(function(e){return e})};u.waterfallGetBindingSeries=i.generateSeriesGetter(h);var p=function(e){var t=[],i,a,o,n,l;var s=0;for(a=0,n=e.length;a<n;a++){var u=0;i=e[a];if(r.isArray(i)){for(o=0,l=i.length;o<l;o++){if(r.isArray(i[o])||!r.isNumber(i[o])){continue}if(u===0){u=+i[o]}else{u+=+i[o]}}}else{u=+i}t[a]=u}return t};var d=function(e){var t=[],i,a,o,n;var l=0;for(a=0,o=0,n=e.length;a<n;a++){var s=0;i=e[a];if(r.isArray(i)){for(var u=0;u<i.length;++u){if(!r.isNumber(i[u])){continue}s+=+i[u]}}else{s=+i}t[o++]=s}return t};u.waterfallGetMeasuresFromFlattable=function(e,i,a,r,o,n,s,u){var c=u&&u.isTimeWaterFall?l.tyGetMeasuresFromFlattable.apply(t,arguments):t.GetMeasuresFromFlattable.apply(t,arguments);if(u&&u.isTimeWaterFall){c.categorySum=d(c.values)}else{c.categorySum=p(c.values)}return c};Object.keys(u).forEach(function(e){s.registerChain(e,u[e])});return u});define("sap/viz/chart/views/WaterFallChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/XYChartView","sap/viz/chart/components/plotareas/WaterfallPlotArea","sap/viz/chart/components/legend/WaterFallLegend","sap/viz/chart/scales/WaterScaleProcessor","sap/viz/chart/chains/WaterFallChains"],function e(t,i,a,r){var o=function(e,t){o.superclass.constructor.apply(this,arguments)};t.extend(o,i);o.prototype._getDataItems=function(){return["valueAxis","categoryAxis","waterfallType","series"]};o.prototype._getLegendInitOptions=function(){return[null]};o.prototype._createPlotContainer=function(){this._plotArea=new a(this.runtime(),{renderType:this._renderType});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};o.prototype._getLegendDefinition=function(){return[r]};o.prototype._getLegendInitOptions=function(){return[{noFeeding:true}]};return o});define("sap/viz/chart/views/TimeWaterFallChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/TimeYChartView","sap/viz/chart/views/WaterFallChartView","sap/viz/chart/behavior/config/TimeLassoBehaviorConfig"],function e(t,i,a){var r=function(e,t){r.superclass.constructor.apply(this,arguments)};t.extend(r,i);r.prototype._getLegendDefinition=a.prototype._getLegendDefinition;r.prototype._getLegendInitOptions=function(){return[null]};return r});define("sap/viz/chart/metadata/bindings/TimeYColumnBindings",[],function e(){var t=[{id:"timeAxis",name:"IDS_TIME_AXIS",type:"Dimension",min:1,max:1,acceptMND:false,continuous:true,sort:true,role:"layout.time"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"},{id:"color",name:"IDS_COLOR",type:"Dimension",min:0,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"mark.color"}];return t});define("sap/viz/chart/metadata/bindings/WaterFallBindings",[],function e(){var t=[{id:"categoryAxis",name:"IDS_CATEGORY_AXIS",type:"Dimension",min:1,max:Number.POSITIVE_INFINITY,acceptMND:true,role:"layout.category"},{id:"waterfallType",name:"IDS_WATERFALLTYPE",type:"Dimension",min:0,max:1,acceptMND:false,role:"mark.waterfallType",description:"Not recommend to use together with MND enabled on category axis"},{id:"valueAxis",name:"IDS_VALUE_AXIS",type:"Measure",min:1,max:Number.POSITIVE_INFINITY,role:"layout.value"}];return t});define("sap/viz/chart/layout/RadarLayout",["sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/oo","sap/viz/chart/layout/BaseLayout"],function e(t,i,a,r){var o={height:{max:"maxHeight",fix:"height"},width:{max:"maxWidth",fix:"width"}};var n={left:"width",right:"width",top:"height",bottom:"height"};var l={left:"height",right:"height",top:"width",bottom:"width"};var s=0;var u=1;var c=2;var h=3;var p=1/3;var d=1/3;function f(){f.superclass.constructor.apply(this,arguments);this.config.add({padding:[0,0,0,0],rootWidth:0,rootHeight:0,layoutSequence:[]})}a.extend(f,r);f.prototype.layout=function(e){var a={};var r=this.config;var f=0;var m=r.get("totalWidth");var y=r.get("totalHeight");var _=r.get("rootWidth");var A=r.get("rootHeight");var b={width:r.get("rootWidth"),height:r.get("rootHeight")};var x=r.get("padding");var S=r.get("layoutSequence");var D=m-(x[u]+x[h]);var w=y-(x[s]+x[c]);D=D>0?D:0;w=w>0?w:0;var C;var T,z,L;var P;var k;var E={};for(var I in e){if(e.hasOwnProperty(I)){C=e[I];P=C.option;k=P.position;E[k]={module:C.module,option:{position:k,padding:{paddingTop:v(P.paddingTop),paddingBottom:v(P.paddingBottom),paddingLeft:v(P.paddingLeft),paddingRight:v(P.paddingRight)},maxWidth:g(P.maxWidth)?P.maxWidth:p,maxHeight:g(P.maxHeight)?P.maxHeight:d,width:g(P.width)?P.width:null,height:g(P.height)?P.height:null}}}}var O=[];for(f=0;f<S.length;++f){k=S[f];if(i.isFunction(k)){O.push(k);continue}C=E[k];if(C){O.push(C)}}if(!E.center){throw"Cannot solve layout without plot"}var R={width:_?_:D,height:A?A:w};var N={width:D,height:w,x:x[u],y:x[s]};var M={center:false};var B=O.length;for(f=0;f<B;f++){T=O[f];if(i.isFunction(T)){T(a,N);continue}z={};a[T.module.alias]=z;P=T.option;var V=T.module;k=P.position;if(k==="center"||k==="left"){continue}var F=n[k];var H=l[k];z.padding=P.padding;var U={width:0,height:0};U.height+=z.padding.paddingTop+z.padding.paddingBottom;U.width+=z.padding.paddingLeft+z.padding.paddingRight;var W={},G=P[o[F].fix],Y=T.module.properties().visible===true&&G!==null?t.getSizeValue(G,R[F]):undefined;if(Y===undefined){if(i.isFunction(V.getPreferredSize)){var X=t.getSizeValue(P[o[F].max],R[F]);X=X>N[F]?N[F]:X;W[H]=N[H];W[F]=X;L=V.getPreferredSize(W)[F]+U[F];X=L>X?X:L;N[F]=N[F]-X;z[F]=X}else{z[F]=0}}else{Y=Y>N[F]?N[F]:Y;if(i.isFunction(V.getPreferredSize)){W[H]=N[H];W[F]=Y;V.getPreferredSize(W)}N[F]=N[F]-Y;z[F]=Y}}for(f=0;f<B;f++){T=O[f];if(!T){continue}else if(i.isFunction(T)){T(a,N);continue}z=a[T.module.alias];if(!z.hasOwnProperty("width")){z.width=N.width}else if(!z.hasOwnProperty("height")){z.height=N.height}switch(T.option.position){case"top":N.y=N.y+z.height;break}}var j,Z=0;for(f=0;f<B;f++){T=O[f];if(i.isFunction(T)){T(a,N);continue}else if(T){P=T.option;z=a[T.module.alias];switch(P.position){case"top":z.x=N.x;z.y=N.y-z.height;break;case"left":var q=T.module.getLabelHeight({width:N.width,height:N.height});j=T.module;N.height=N.height-q/2;N.y=N.y+q/2;break;case"bottom":z.x=N.x;z.y=N.y+N.height;break;case"right":z.x=N.x+N.width;z.y=N.y;break;case"center":z=a[T.module.alias]={};z.x=N.x;z.y=N.y;z.width=N.width;z.height=N.height;Z=T.module.calculateRadius({width:N.width,height:N.height});break}if(!i.isPlainObject(z.padding)){z.padding=P.padding}if(P.position==="top"){z.y+=z.padding.paddingTop}z.height-=z.padding.paddingTop+z.padding.paddingBottom;z.width-=z.padding.paddingLeft+z.padding.paddingRight;N.height=N.height>0?N.height:0;N.width=N.width>0?N.width:0}}z=a[j.alias];L=j.getPreferredSize({width:Z,height:Z});z.height=Z;z.width=L["width"];z.y=N.y+N.height/2-Z;z.x=N.x+N.width/2-L["bodySize"];return a};function v(e){var t=parseFloat(e);if(isNaN(t)){t=0}return t}function g(e){var t=parseFloat(e);return i.isNumber(t)&&t>=0}return f});define("sap/viz/chart/components/container/RadarContainer",["sap/viz/framework/common/util/oo","sap/viz/chart/layout/RadarLayout","sap/viz/chart/components/container/XYContainer"],function(e,t,i){var a=function(e,i){a.superclass.constructor.apply(this,arguments);this.setLayoutAlgorithm(new t)};e.extend(a,i);a.prototype._renderSub=function(){var e=this._layoutSequence||["left","right","bottom","top"];if(e.indexOf("center")<0){e.push("center")}var t=this._selections;var i=function(e){e.render(t[e.alias])};for(var a=0;a<e.length;a++){this.getChildrenByPosition(e[a]).forEach(i)}};a.prototype._initRenderBase=function(e){this._selections={};for(var t in this._children){if(this._children.hasOwnProperty(t)){if(this._selections[t]==null){if(this._children[t].option.position==="center"){this._selections[t]=e.insert("g",":first-child").attr("class","v-m-"+t)}else{this._selections[t]=e.append("g").attr("class","v-m-"+t)}}}}};return a});define("sap/viz/chart/components/axis/sub/RadarValueAxisBody",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/ValueAxisBody","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/BoundUtil","sap/viz/chart/scales/ValueScaleUtil","sap/viz/chart/components/util/ClippathUtil","sap/viz/framework/common/util/DataGraphics"],function(e,t,i,a,r,o,n){var l=5;var s=6;var u=i.CSS.CLASS.AXIS;var c=function(){c.superclass.constructor.apply(this,arguments)};e.extend(c,t);c.prototype.getLabelHeight=function(){var e=this._properties.get();var t=e.label&&e.label.style;if(e.visible){var i=this._measureTextSize("100",t);return i.height}return 0};c.prototype.render=function(e){var t=this._properties.get();var i=this._size.width;var r=this._size.height;a.drawBound(e,i,r,null,true);e.select("g."+u.LABEL_GROUP).remove();if(this._data&&t.visible){var n=this._position;var c=this._data;var h=c.getRange();var p=null;if(this._isSpaceEnough()){var d=this._getTicksToRender();var f=this._getAllLabels(d,c);var v;if(t.label.visible&&f.length){var g=this.getPadding(this._data);var m={x:0,y:0,width:this._size.width,height:this._size.height};var y=this._getWidestLabel(f)+s+l;var _=0;if(this._isVertical()){m.y-=g.start;m.height+=g.start+g.end;_=y-m.width;if(this._noReLayout&&_>0){m.width+=_;m.x-=_}}else{m.x-=g.start;m.width+=g.start+g.end;_=y-m.height;if(this._noReLayout&&_>0){m.height+=_;m.y-=_}}v=o.drawClippath(e,m.width+2,m.height+2,m.x-1,m.y-1,"labels");p=e.append("g").attr("clip-path","url(#"+v+")");this._labelGroupNode=p.append("g").attr("class",u.LABEL_GROUP);this.drawLabels(this._labelGroupNode,c,f,i,r,n,t,this._options,this.runtime().effectManager());var A=c.getDomain()}}}};return c});define("sap/viz/chart/layout/RadarAxisLayout",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/layout/AxisLayout"],function(e,t,i,a,r){var o=t.DIRECTION.HORIZONTAL;var n=t.DIRECTION.VERTICAL;var l=t.AXIS.SPACING_TO_ROUGH;var s=t.AXIS.SPACING_MAX_IN_PX;var u=function(){u.superclass.constructor.apply(this,arguments)};e.extend(u,r);u.prototype.getPreferredSize=function(e){var t=this.config;var r=t.get("totalWidth");var n=t.get("totalHeight");var u=t.get("position");var d=t.get("sizeFn");var f=t.get("offsetFn");var v=this._dictToArray(e);var g=t.get("rootWidth");var m=t.get("rootHeight");var y=t.get("roughWidth");var _=t.get("roughHeight");var A=[];var b=0;var x=0,S=0;var D=p(v,t);var w=D.length;var C=c(u);var T=C===o;var z=T?"height":"width";var L=T?"width":"height";var P=h(u,r,n);var k=a.isVertical(u)?r:n;var E,I,O,R,N,M,B,V;V=Math.min(y,_);if(T){N="maxWidth";M="minHeight";B=g}else{N="maxHeight";M="minWidth";B=m}var F=false;for(;b<w&&!F;++b){E=D[b];var H=f(E,B);var U=l*V;R=Math.min(H,U);R=Math.min(R,s);var W={};W[L]=k-x-R;W[z]=P;I=d(E,W);if(Math.ceil(I[M])<=Math.ceil(P)&&I[N]&&i.preciseSimple(x+R+I[N])<=i.preciseSimple(k)){x+=R+I[N];if(E.option&&E.option.axisBody){S=I[N]}}else if(I[N]!==0){F=true}}var G=0,Y=0;if(T){G=x;Y=P}else{G=P;Y=x}return{width:G,height:Y,bodySize:S}};function c(e){if(e===t.POSITION.TOP||e===t.POSITION.BOTTOM){return n}else{return o}}function h(e,t,i){return a.isVertical(e)?i:t}function p(e,t){return e.slice().sort(t.get("sortPriorityFn"))}return u});define("sap/viz/chart/components/axis/RadarValueAxis",["sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/RadarValueAxisBody","sap/viz/chart/scales/ValueScale","sap/viz/chart/layout/RadarAxisLayout","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/PositionUtil","sap/viz/chart/components/axis/sub/AxisTitle","sap/viz/chart/components/container/UIContainer","sap/viz/chart/components/util/BoundUtil","sap/viz/framework/common/util/NumberUtils","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/PropertyZoneUtil"],function(e,t,i,a,r,o,n,l,s,u,c,h){var p="Axis Title";var d=function(e,i){d.superclass.constructor.apply(this,arguments);var o=this._properties;this._showTitle=o.get("title.visible");this._roughSize={width:0,height:0};this._bodyLayersNumber=-1;var l=this;["height","width"].forEach(function(e){var t={set:function(e,t){if(e===null||parseFloat(e)>=0){return e}else{return t.value}}},i={layout:{}};i.layout[e]=t;o.add(i)});var s={};s[this._name]={value:[],readonly:true,serializable:false,get:function(){var e=[],t,i,a,r,o,n,s;if(l._properties.get("title.visible")&&l._selections&&l._selections["axisTitle"]&&l._selections["axisTitle"].length>0){i=l._selections["axisTitle"].node().getBoundingClientRect();if(i.width>1.5&&i.height>1.5){r=[[]];r[0].push([i.left,i.top]);r[0].push([i.right,i.top]);r[0].push([i.right,i.bottom]);r[0].push([i.left,i.bottom]);e.push({name:l._name+" title",bound:r})}}if(l._parent&&l._parent.select(".v-m-axisBody").node()){var u=l._parent.select(".v-m-axisBody").node();var c=u.getAttribute("clip-path");if(c&&c.length>0){c=c.replace(/\s/g,"");var p=/^url\(/;c=c.replace(p,"");c=c.replace(/\)$/,"");c=c.replace(/^\"/,"");c=c.replace(/\"$/,"");u=l._parent.select(c).node()}n=u.getBoundingClientRect();if(c&&c.length>0){if(n.width===0&&n.height===0){var d=u.querySelector("rect");if(d){n=d.getBoundingClientRect()}}}if(n.width>1.5||n.height>1.5){a={left:n.left,right:n.right,top:n.top,bottom:n.bottom};o=[[]];o[0].push([a.left,a.top]);o[0].push([a.right,a.top]);o[0].push([a.right,a.bottom]);o[0].push([a.left,a.bottom]);e.push({name:l._name,bound:o})}s=l._parent.node().ownerSVGElement}h.calcOffsetFromChart(s,e);return e}};e.zoneManager().add({tempPropertyZone:s});this.setLayoutAlgorithm(new a);this._scale=null;this._bindingFields=[];if(this._showTitle){this.setChild("axisTitle",new n(e,i),{order:1,priority:2,offset:r.AXIS.SPACING_TO_ROOT})}this._position=null;this._parent=null;this.runtime().graphicModel().registerExposedModule(i.name);this.setChild("axisBody",new t(e,i),{order:2,priority:1,offset:0,axisBody:true});var u,c,p,f,v,g;v="primaryScale";u="plotArea."+v+".autoMinValue";c="plotArea."+v+".autoMaxValue";p="plotArea."+v+".minValue";f="plotArea."+v+".maxValue";g="plotArea."+v+".fixedRange";this._properties.origin.add(u,{defaultValue:[],readonly:true,serializable:false,get:function(){return l._scale?l._scale.getAutoDomain()?l._scale.getAutoDomain()[0]:l._scale.getDomain()[0]:undefined}});this._properties.origin.add(c,{defaultValue:[],readonly:true,serializable:false,get:function(){return l._scale?l._scale.getAutoDomain()?l._scale.getAutoDomain()[1]:l._scale.getDomain()[1]:undefined}});this._properties.origin.add(p,{defaultValue:[],readonly:true,serializable:false,get:function(){if(l._scale&&l._scale.getDomainFixed()[0]){return l._scale.getDomain()[0]}return null}});this._properties.origin.add(f,{defaultValue:[],readonly:true,serializable:false,get:function(){if(l._scale&&l._scale.getDomainFixed()[1]){return l._scale.getDomain()[1]}return null}});this._properties.origin.add(g,{defaultValue:[],readonly:true,serializable:false,get:function(){if(l._scale&&l._scale.getDomainFixed()){var e=l._scale.getDomainFixed();var t=e[0];var i=e[1];if(!t&&!i){return false}return true}return false}})};e.extend(d,l);d.prototype.getLabelHeight=function(e){return this.getChild("axisBody").module.getLabelHeight()};d.prototype.getMaxZoomRatio=function(){var e=this._scale.getTickHint();if(e>=1){return e}else{return Number.MAX_VALUE}};d.prototype.setScale=function(e){if(e.scale){this._scale=new i(e.scale.getDomain(),[0,1],e.scale.getDomainFixed());this._scale.setAutoDomain(e.scale.getAutoDomain());this._scale.setTickHint(e.tickHint)}};d.prototype.setData=function(e,t){if(e.metaData){var i=e.metaData;this._bindingFields=[];for(var a=0,r=i.length;a<r;++a){var o={id:i[a].id,name:i[a].name};if(i[a].values){var n={};i[a].values.forEach(function(e){n[e.id]=e.name});o.values=n}this._bindingFields.push(o)}}this._noReLayout=t;this.setScale(e)};d.prototype.getPadding=function(e){var t=this.getChild("axisBody");if(!t||!e){return{start:0,end:0}}return t.module.getPadding(e)};d.prototype._updateData=function(e){if(this._showTitle){this.getChild("axisTitle").module.setData(this._getTitle())}this._scale.setRange([e.height,0]);this.getChild("axisBody").module.setData(this._scale,this._noReLayout)};d.prototype._constructTitle=function(e,t){var i=e.map(function(e){return e.name||e.id}).join(" & ");var a={};a.isHidden=false;a.text=i;t.push(a);return i};d.prototype.zoom=function(e){if(e){this._realSize.width=this._size.width*e.x;this._realSize.height=this._size.height*e.y;this._updateData(this._getSizeInfo())}this._updateSubModules()};d.prototype.update=function(){this._updateData(this._getSizeInfo());this._updateSubModules()};d.prototype._updateSubModules=function(){if(this.getChild("axisBody")){this.getChild("axisBody").module.update()}};d.prototype.setPosition=function(e){var t,i;this._position=e;for(var a in this._children){if(this._children.hasOwnProperty(a)){var n=this.getChild(a).module;n.setPosition(this._position);if(a==="axisTitle"){t=this.properties();i=this.getChild(a).option;if(t.visible&&o.isHorizontal(i.position)?parseFloat(t.layout.height)>=0:parseFloat(t.layout.width)>=0){i.offsetType=r.AXIS.FIX_LAYOUT_TYPE}}}}return this};d.prototype._getTitle=function(){var e={};e.text="";e.isCustomized=false;e.items=[];var t="";var i=this._properties.get("title.text");if(c.isString(i)){t=i;e.isCustomized=true}else if(this._bindingFields){t=this._constructTitle(this._bindingFields,e.items)}else{t=p;e.isCustomized=true}e.text=t;return e};d.prototype.getParent=function(){if(this._parent){return this._parent.select("g."+r.CSS.CLASS.AXIS.CONTAINER)}else{return null}};d.prototype.render=function(e){this._parent=e;d.superclass.render.apply(this,arguments);s.drawBound(e,this._size.width,this._size.height,undefined,true);var t=e.select("g."+r.CSS.CLASS.AXIS.CONTAINER);if(this._size.width>0||this._size.height>0){if(!t.node()){delete this._selections;this._selections=null;t=e.append("g").attr("class",r.CSS.CLASS.AXIS.CONTAINER)}this._initRenderBase(t);this.layout();if(this.getChild("axisBody")){var i=this.getChild("axisBody").module.getAvailableLayersNumber();this._bodyLayersNumber=i;if(this._showTitle){this.getChild("axisTitle").module.setTitleHiddenItems(i)}}this._renderSub()}this.appendSynonymClass(e);e.node().style.pointerEvents="none"};d.prototype.isVisible=function(){return this._bodyLayersNumber>0};d.prototype.setChild=function(e,t,i){d.superclass.setChild.apply(this,arguments);if(t.setPosition&&i.position){t.setPosition(i.position)}};d.prototype._configLayout=function(){this._setupLayout(this._getSizeInfo())};d.prototype._setupLayout=function(e){this._updateData(e);var t=u.getPositiveInt;var i=this._properties.origin;var a=this.calculatePaddingInPX(i,this._roughSize.width,this._roughSize.height);var r=t(a.propertyPaddingInPX,a.constantPaddingInPX);var o=t(a.propertyPaddingTopInPX,r);var n=t(a.propertyPaddingRightInPX,r);var l=t(a.propertyPaddingBottomInPX,r);var s=t(a.propertyPaddingLeftInPX,r);var c=this._layoutAlgorithm.config;c.set({position:this._position,rootWidth:this._roughSize.width-(n+s),rootHeight:this._roughSize.height-(o+l),roughWidth:this._roughSize.width,roughHeight:this._roughSize.height});if(e.hasOwnProperty("width")){c.set("totalWidth",e.width)}if(e.hasOwnProperty("height")){c.set("totalHeight",e.height)}};d.prototype._configLayout=function(){this._setupLayout(this._getSizeInfo())};d.prototype._getSizeInfo=function(e){var t={width:this._size.width,height:this._size.height};if(e){if(e.width){t.width=e.width}if(e.height){t.height=e.height}}else if(this._realSize.width>this._size.width||this._realSize.height>this._size.height){if(this._isHorizontal()){t.width=this._realSize.width}else{t.height=this._realSize.height}}return t};d.prototype._postLayout=function(){var e=this._layoutResult;var t=this._selections;for(var i in this._children){if(this._children.hasOwnProperty(i)){var a=this._children[i].module;var r=t?t[i]:null;var o=e[i];a.setSize({width:o.width,height:this._size.height});a.setRealSize({width:o.width,height:o.height});if(a.layout){a.layout()}if(r){r.attr("transform","translate("+o.x+","+o.y+")")}}}};d.prototype.getPreferredSize=function(e){this._setupLayout(this._getSizeInfo(e));var t=this._layoutAlgorithm.getPreferredSize(this._children);return u.preciseObject(t)};d.prototype._renderSub=function(){for(var e in this._children){if(this._children.hasOwnProperty(e)){this.getChild(e).module.render(this._selections[e])}}};d.prototype.appendSynonymClass=function(e,t){var i="v-m-yAxis";e.classed(i,true)};d.prototype.setRoughSize=function(e){if(e.width!=null){this._roughSize.width=e.width}if(e.height!=null){this._roughSize.height=e.height}};d.prototype.destroy=function(){d.superclass.destroy.call(this);this._scale=null;this._bindingFields=null;this._showTitle=null;this._parent=null;this._position=null};d.prototype.supportFixedLayout=true;return d});define("sap/viz/chart/components/renderers/RadarRenderer",["sap/viz/framework/common/util/SVG"],function(e){var t=function(t){var r=t.graphic;var o=e.create("path");var n=i(t.points);var l=a(t);var s=r.visible?r.opacity:0;o.setAttribute("d",n);o.setAttribute("fill-opacity",s);o.setAttribute("fill",l.fill);o.style.pointerEvents="none";if(r.strokeVisible){o.setAttribute("stroke-width",r.strokeWidth);o.setAttribute("stroke",l.color);o.setAttribute("stroke-linejoin","round")}if(t.filterId){o.setAttribute("filter","url(#"+t.filterId+")")}return o};t.update=function(e,t){};function i(e){var t;var i;for(var a=0;a<e.length;a++){if(e[a]&&e[a].position){t=t?t+"L":"M";if(t==="M"){i="L"+e[a].position.x+","+e[a].position.y}t+=e[a].position.x+","+e[a].position.y}}t+=i;return t}var a=function(e){var t={};t.fill=e.effectManager.register({drawingEffect:e.graphic.drawingEffect,fillColor:e.graphic.fill});t.color=e.effectManager.register({drawingEffect:e.graphic.drawingEffect,fillColor:e.graphic.color});return t};return t});define("sap/viz/chart/components/util/RadarSeriesUtil",["sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/renderers/RadarRenderer","sap/viz/framework/common/util/Constants"],function(e,t,i,a){var r={drawNet:function(r,o,n,l,s,u,c,h){u.line.color=t.convertColor(u.line.color);u.area.color=t.convertColor(u.area.color);var p=u.area.hasOwnProperty("visible")?u.area.visible:c.visible;var d=u.area.opacity||c.opacity;var f={graphic:{visible:p,color:u.line.color,fill:u.area.color,opacity:d,strokeVisible:h.visible,strokeWidth:h.width},points:o,effectManager:l,ctx:s};var v=i(f);v.setAttribute("class",a.CSS.CLASS.RADAR_NET);e.setData(v,{seriesIndex:n,color:f.graphic.color,pointSum:o.filter(function(e){return Boolean(e)}).length,fill:f.graphic.fill,visibility:p?"visible":"hidden",opacity:d});e.setContext(v,s);r.insertBefore(v,r.firstChild)}};return r});define("sap/viz/chart/components/datalabels/RadarDataLabels",["sap/viz/framework/common/util/oo","sap/viz/chart/components/datalabels/DataLabels","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o){var n=[[1,4,3,2],[2,3,4,1],[3,2,1,4],[4,1,2,3]];var l=4;var s=function(e,t){s.superclass.constructor.apply(this,arguments);this._labelsPool=[]};e.extend(s,t);s.prototype.render=function(e){if(this._isTrellis){this._bound={left:this._trellisPadding.left,right:this._realSize.width-this._trellisPadding.right,top:this._trellisPadding.top,bottom:this._realSize.height-this._trellisPadding.bottom}}else{this._bound={left:0,right:this._realSize.width,top:0,bottom:this._realSize.height}}s.superclass.render.apply(this,arguments)};s.prototype._render=function(e,t){this._labelsPool=o.extend(true,[],this._runtime.statusManager().get("polarAxisLabelRenderInfo"));s.superclass._render.apply(this,arguments)};s.prototype.setCenter=function(e){if(e===undefined){return}this._center=e};s.prototype._computeDataLabelPosition=function(e,t,i,a,r){var o,n;switch(i){case 1:o=e-r.width+a.x;n=t+a.y;break;case 2:o=e-a.x;n=t+a.y;break;case 3:o=e-a.x;n=t+r.height;break;case 4:o=e-r.width+a.x;n=t+r.height;break}var l={x:o,y:n,width:r.width,height:r.height};if(this._overlap(l)||this._outPlot(l)){l.overlap=true}return l};s.prototype._overlap=function(e){function t(e,t){var i=e.x<t.x?e:t;var a=e.x<t.x?t:e;var r=e.y-e.height<t.y-t.height?e:t;var o=e.y-e.height<t.y-t.height?t:e;return(i.x+i.width>a.x||i.x===a.x)&&(r.y>o.y-o.height||r.y-r.height===o.y-o.height)}function i(e){var t={x:e.x,y:e.y-1,height:e.height-2,width:e.width};return t}var a;for(var r=0;r<this._labelsPool.length;r++){a=t(i(e),i(this._labelsPool[r]));if(a){return true}}return false};s.prototype._outPlot=function(e){if(e.x>this._bound.left&&e.x+e.width<this._bound.right&&e.y-e.height>this._bound.top&&e.y<this._bound.bottom){return false}return true};s.prototype._computeDataLabelTranslate=function(e,t,i,a,r){var o=this._properties.get("hideWhenOverlap");var n=this._fixBBoxWhenInvisible(e,r&&r.dpBBox);var s=t.e;var u=t.f;var c=this._judgeQuadrant(s,u);var h;for(var p=0;p<l;p++){i=this._getLabelPosition(c,p);h=this._computeDataLabelPosition(s,u,i,n,a);if(!h.overlap||p===l-1&&!o){this._labelsPool.push(h);var d=[h.x,h.y];this._forceInner(d,a);return d}}return};s.prototype._getLabelPosition=function(e,t){return n[e][t]};s.prototype._judgeQuadrant=function(e,t){var i=Math.floor(this._center.x);var a=Math.floor(this._center.y);e=Math.floor(e);t=Math.floor(t);if(e<i&&t<=a){return 0}else if(e>=i&&t<=a){return 1}else if(e>=i&&t>a){return 2}else if(e<i&&t>a){return 3}};s.prototype.destroy=function(){t.superclass.destroy.call(this);this._center=null;this._labelsPool=null;this._size=null;this._bound=null};return s});define("sap/viz/chart/components/axis/sub/PolarAxisTitle",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/oo","sap/viz/chart/components/axis/sub/AxisTitle","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/lang/LangManager","sap/viz/chart/components/util/TextUtils","sap/viz/framework/common/util/NameColorUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/common/util/NumberUtils"],function(e,t,i,a,r,o,n,l,s,u,c){var h="Axis Title";var p="measureNames";var d=e.CSS.CLASS.AXIS;var f=function(e,t){f.superclass.constructor.apply(this,arguments);var i=this;if(!t.inTrellis){var a={};a[this._name]={value:[],readonly:true,serializable:false,get:function(){var e=[],t,a,r,o,n,l,u;if(i._properties.get("polarAxis.title.visible")&&i._selection){a=i._selection.node().getBoundingClientRect();if(a.width>1.5&&a.height>1.5){o=[[]];o[0].push([a.left,a.top]);o[0].push([a.right,a.top]);o[0].push([a.right,a.bottom]);o[0].push([a.left,a.bottom]);e.push({name:i._name+" title",bound:o})}}s.calcOffsetFromChart(u,e);return e}};e.zoneManager().add({tempPropertyZone:a})}};t.extend(f,i);f.prototype.setData=function(e){if(e.metaData){var t=e.metaData;this._bindingFields=[];for(var i=0,a=t.length;i<a;++i){var r={id:t[i].id,name:t[i].name};if(t[i].values){var o={};t[i].values.forEach(function(e){o[e.id]=e.name});r.values=o}this._bindingFields.push(r)}}f.superclass.setData.apply(this,[this._getTitle()])};f.prototype.setTitleHiddenItems=function(){this.visibleItemsNumber=this._bindingFields.length};f.prototype._getTitle=function(){var e={};e.text="";e.isCustomized=false;e.items=[];var t="";var i=this._properties.get("title.text");if(a.isString(i)){t=i;e.isCustomized=true}else if(this._bindingFields){t=this._constructTitle(this._bindingFields,e.items)}else{t=h;e.isCustomized=true}e.text=t;return e};f.prototype._constructTitle=function(e,t){var i=e.map(function(e){var t=e.name||e.id;if(t===p){t=r.get("IDS_DEFAULTMND")}return t});t.splice(0,t.length);var a="";var o="";for(var n=0;n<i.length;n++){if(n===0){o=i[n]}else{o=" / "+i[n]}a+=o;var l={};l.isHidden=false;l.text=o;t.push(l)}return a};f.prototype.render=function(e){this._selection=e;f.superclass.render.apply(this,arguments)};f.prototype.destroy=function(){this._runtime.zoneManager().remove("tempPropertyZone."+this._name);f.superclass.destroy.call(this)};return f});define("sap/viz/chart/components/plots/RadarPlot",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/components/util/DrawUtil","sap/viz/framework/common/util/SVG","sap/viz/chart/components/plots/BaseColumnPlot","sap/viz/chart/components/plots/ItemScaleHandler","sap/viz/chart/components/plots/ScaleHandler","sap/viz/chart/components/renderers/SeriesRenderer","sap/viz/chart/components/renderers/PathRenderer","sap/viz/framework/chartmodel/ContextBuilder","sap/viz/chart/components/util/RadarSeriesUtil","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/DataGraphics","sap/viz/chart/components/renderers/GridlineRenderer","sap/viz/framework/common/util/DataUtils","sap/viz/chart/components/util/TextUtils","sap/viz/chart/components/util/StyleUtils","sap/viz/chart/components/util/BuildLayerUtil","sap/viz/chart/components/datalabels/RadarDataLabels","sap/viz/chart/components/axis/sub/PolarAxisTitle","sap/viz/chart/components/util/AxisBodyUtil","sap/viz/chart/components/plots/BaseLinePlot","sap/viz/chart/components/accessibility/ChartComponentNavigatorFactory","sap/viz/chart/components/accessibility/LineDataPointNavigator","sap/viz/chart/components/util/ChartConstants"],function e(t,i,a,r,o,n,l,s,u,c,h,p,d,f,v,g,m,y,_,A,b,x,S,D,w){var C=5;var T=50;var z=C+T;var L=7;var P=2*(C+T)+L;var k=function(e,t){k.superclass.constructor.apply(this,arguments);this._dataPointRenderer=u;this._markerPropName="marker";this._markerD=null;this._branchAngles=[];this._center=null;this._radius=null;this._branchTitileSize=null;this._resetLabelCache();if(this._properties.get("polarAxis.title.visible")){this._axisTitle=new A(e,{name:"plotArea.polarAxis",inTrellis:t.inTrellis})}this.runtime().markManager().setMode("dual");this.runtime().markManager().lock();this._attachMarkRestrict();var i=this.runtime().semanticManager();i.setUseSemanticPattern(true);i.bindSeriesStyleProperty(this._name+".seriesStyle")};t.extend(k,o);k.prototype._attachMarkRestrict=function(){var e=this._getMarkerShape();var t=this.runtime().markManager();t.setShape([e],e)};k.prototype._renderNode=x.prototype._renderNode;k.prototype.destroy=function(){k.superclass.destroy.call(this);this._dataPointRenderer=null;this._markerD=null;this._branchAngles=null;this._center=null;this._radius=null;this._branchLabels=null;this._branchLabelHeight=null;this._branchLabelWidth=null;this._truncatedBranchLabels=null;this._hideBranchLabels=null;this._labelContext=null;this._branchTitileSize=null;this._polarAxisLabelRenderInfo=null;if(this._axisTitle){this._axisTitle.destroy();this._axisTitle=null}};k.prototype._getDataLabels=function(e,t){return new _(t,{name:e})};k.prototype._resetLabelCache=function(){this._branchLabels=[];this._branchLabelHeight=[];this._branchLabelWidth=[];this._truncatedBranchLabels=[];this._hideBranchLabels=[];this._labelContext=[]};k.prototype._getValueScaleHandlers=function(e){return[l.getPerfectValueScaleHandler("valueAxis",{isHorizontal:e})]};k.prototype._getCategoryScaleHandlers=function(e){this._categoryScaleHandler=l.getPolarScaleHandler("categoryAxis",{isHorizontal:e,itemScaleHandler:n.get(false)});return[this._categoryScaleHandler]};k.prototype._buildData=function(e){return{color:e.graphic.fill,trellisInfo:e.trellisInfo}};k.prototype._buildWrapperConfig=function(e,t,i){var a=k.superclass._buildWrapperConfig.apply(this,arguments);var r;if(e.trellisColumn){r=r||"";e.trellisColumn.forEach(function(e){r+=v.getDimensionValue(e)+"."})}if(e.trellisRow){r=r||"";e.trellisRow.forEach(function(e){r+=v.getDimensionValue(e)+"."})}a.trellisInfo=r;return a};k.prototype.calculateRadius=function(e){var t=this._data.trellisSeriesLength?this._data.trellisSeriesLength:this._data.series.length;this._initXHandler(this._xHandlers,this._data,0,t);var i=this._xHandlers[0].categorySum();for(var a=0;a<i;a++){var r=this._getXPosition(0,a,0);this._branchAngles[a]=r[0]}this._center={x:e.width/2,y:e.height/2};this._radius=e.width>e.height?e.height/2:e.width/2;var o=this._properties.get("polarAxis.label");this._branchLabelStyle=o.style;if(o.visible&&this._radius>z){this._calculateBranchLabels(e)}return this._radius};k.prototype._applyChanges=function(){this._resetLabelCache();if(this._axisTitle){var e=this._axisTitle.getPreferredSize(this._realSize);this._branchTitileSize={width:e.maxWidth>this._realSize.width?this._realSize.width:e.maxWidth+1,height:e.maxHeight>this._realSize.height?this._realSize.height:e.maxHeight}}var t={width:this._realSize.width,height:this._realSize.height};if(this._branchTitileSize){var i=this._realSize.height-this._branchTitileSize.height;if(i<P){i=this._realSize.height;this._branchTitileSize.height=0;this._branchTitileSize.width=0}t.height=i}this.calculateRadius(t);var a=this._data.trellisSeriesLength?this._data.trellisSeriesLength:this._data.series.length;this._initYHandler(this._yHandlers,this._data,this._radius,a)};k.prototype._calculateBranchLabels=function(e){var t=[];this._data.categoryAxis.metaData.forEach(function(e){t.push(e.id)});this._bindingFields=b.getBindingFields(this._data.categoryAxis.metaData)||this._bindingFields;var i=y.mergeLabels(this,this._data.categoryAxis.scale.getDomain(),t);this.buildLabelsText(i[0].cells,"");this._center={x:e.width/2,y:e.height/2+L/2};var a,r;var o=e.width/2,n=e.height/2-L/2;var l=o>n?n:o;for(var s=0;s<this._branchAngles.length;s++){var u=g.fastMeasure(this._branchLabels[s],this._branchLabelStyle.fontSize,this._branchLabelStyle.fontWeight,this._branchLabelStyle.fontFamily);a=a>=u.height?a:u.height;this._branchLabelHeight.push(u.height);this._branchLabelWidth.push(u.width);var c=Math.abs(Math.sin(this._branchAngles[s]));var h=Math.abs(Math.cos(this._branchAngles[s]));if(c){r=(o-u.width)/c;l=l<r?l:r}if(h){r=(n-u.height)/h;l=l<r?l:r}if(l<z){l=z;var p=o-z*c;if(p<this._branchLabelWidth[s]){this._branchLabelWidth[s]=p;this._truncatedBranchLabels[s]=true}else{this._hideBranchLabels[s]=true}}}this._radius=l-C};k.prototype._getPosition=function(e,t,i){var a=this._getXPosition(e,t,i);var r=this._getYPosition(e,t,i);if(isNaN(a[0])||isNaN(a[1])||isNaN(r[0])||isNaN(r[1])){return null}return{angle:a[0],distance:this._radius-r[0]}};k.prototype._convertPosition=function(e){var t=e.distance*Math.sin(e.angle);var i=e.distance*Math.cos(e.angle);e.x=this._center.x-t;e.y=this._center.y-i;return e};k.prototype._buildConfig=function(e,t,i,a){var r=this._getColor(e);this._convertPosition(t);var o=this._isMarkerVisible?1:0;return{graphic:{width:0,height:t.distance,drawingEffect:this._properties.get("drawingEffect"),fill:r,opacity:o,d:this._markerD},data:{color:r,width:0,height:t.distance,translate:[t.x,t.y]},ctx:i,effectManager:a||this._effectManager}};k.prototype._preRender=function(){k.superclass._preRender.apply(this,arguments);this._isMarkerVisible=this._properties.get("marker.visible");this._generateMarkerPath()};k.prototype._getSeriesRenderer=function(){return new s(this._drawNet.bind(this),this._updateNet.bind(this))};k.prototype._updateNet=function(){};k.prototype._drawNet=function(e,t,i){var a=this._properties.get("area"),r=this._properties.get("line"),o=this.runtime().effectManager(),n=c.buildSeriesContext(this._data,i,["color","color2","trellisColumn","trellisRow"]);h.drawNet(e,t,i,o,n,this._getlineAreaConfig(this._data,i,n),a,r)};k.prototype._getlineAreaConfig=function(e,t,i){var a=this._semanticMgr;var r={line:{},area:{}};var o=a.analyzeSeriesStyle(i,"line");if(o&&o.line&&o.line.color){r.line.color=o.line.color}else if((a.hasDataPointColorStyle()||a.hasDataPointLineStyle())&&a.isOverrideMode()&&a.shouldChangeColor()){r.line.color=a.getOthersStyle("color").properties.color}else{var n=c.getSeriesScaleInfo(e,t,["color"]);if(n){r.line.color=e[n.field].scale.scale(n.domain)}else{r.line.color=e.color.scale.getRange()[0]}}r.area.color=r.line.color;o=a.analyzeSeriesStyle(i,"area");if(o&&o.area){var l=o.area;if(l.hasOwnProperty("color")){r.area.color=l.color}if(l.hasOwnProperty("opacity")){r.area.opacity=l.opacity}if(l.hasOwnProperty("visible")){r.area.visible=l.visible}}return r};k.prototype._drawBranchLabels=function(){this._polarAxisLabelRenderInfo=[];var e=r.create("g");e.setAttribute("class",p.CSS.CLASS.AXIS.CONTAINER);var t=this._radius+C;var a=Number(this._branchLabelStyle.fontSize.match(/\d+/));for(var o=0;o<this._branchAngles.length;o++){if(this._hideBranchLabels[o]||!this._branchLabelWidth[o]){continue}var n=this._branchAngles[o];var l=this._convertPosition({angle:n,distance:t});if(n===0){l.x-=this._branchLabelWidth[o]/2;l.y-=this._branchLabelHeight[o]/2+L}else if(n===Math.PI){l.x-=this._branchLabelWidth[o]/2}else if(n>0&&n<Math.PI){l.x-=this._branchLabelWidth[o]}l.y+=this._branchLabelHeight[o]/2;var s=r.create("g");s.setAttribute("class",p.CSS.CLASS.AXIS.LABEL_SELECTION);if(this._trellisContext!==undefined){i.extend(true,this._labelContext[o],this._trellisContext)}d.setContext(s,this._labelContext[o]);var u=r.create("text");var c=r.create("rect");u.setAttribute("class",p.CSS.CLASS.RADAR_BRANCH_LABEL);u.setAttribute("x",l.x);u.setAttribute("y",l.y);u.setAttribute("font-size",this._branchLabelStyle.fontSize);u.setAttribute("font-weight",this._branchLabelStyle.fontWeight);u.setAttribute("font-family",this._branchLabelStyle.fontFamily);u.setAttribute("font-style",this._branchLabelStyle.fontStyle);u.setAttribute("fill",this._branchLabelStyle.color);var h=null;var f=this.runtime().envManager();if(f){h=f.textAnchor()}var v={};v.reverseDots=f&&f.reverseDots();u.setAttribute("text-anchor",h);var y=m.convertToCss(this._branchLabelStyle);if(this._truncatedBranchLabels[o]){g.ellipsis(this._branchLabels[o],u,this._branchLabelWidth[o],y,v)}else{u.textContent=this._branchLabels[o]}c.setAttribute("fill","transparent");c.setAttribute("x",l.x);c.setAttribute("y",l.y-this._branchLabelHeight[o]+1);c.setAttribute("height",this._branchLabelHeight[o]);c.setAttribute("width",this._branchLabelWidth[o]);c.setAttribute("class",p.CSS.CLASS.AXIS.BACKGROUND_RECT);this._polarAxisLabelRenderInfo.push({x:l.x,y:l.y,height:this._branchLabelHeight[o],width:this._branchLabelWidth[o]});s.appendChild(c);s.appendChild(u);e.appendChild(s)}this._dataLabels.setSize(this._realSize);return e};k.prototype.renderBranches=function(e){var t=this._properties.get("polarAxis");if(t.visible===false){return}var i=this._xHandlers[0].categorySum();var a=r.create("g");a.setAttribute("class",p.CSS.CLASS.RADAR_BRANCH_GROUP);var o=r.create("g");o.setAttribute("class",p.CSS.CLASS.RADAR_BRANCH_AXIS_GROUP);if(t.axisLine.visible){for(var n=0;n<i;n++){var l=r.create("line");l.setAttribute("class",p.CSS.CLASS.RADAR_BRANCH_AXIS);l.setAttribute("stroke",t.color);l.setAttribute("stroke-width",t.axisLine.size);var s=this._convertPosition({angle:this._branchAngles[n],distance:this._radius});l.setAttribute("x1",this._center.x);l.setAttribute("y1",this._center.y);l.setAttribute("x2",s.x);l.setAttribute("y2",s.y);o.appendChild(l)}a.appendChild(o)}if(t.label.visible&&this._radius>=T){var u=this._drawBranchLabels();a.appendChild(u)}if(e.node().childNodes[0]){e.node().insertBefore(a,e.node().childNodes[0])}else{e.node().appendChild(a)}var c=this._polarAxisLabelRenderInfo;this._runtime.statusManager().add({polarAxisLabelRenderInfo:{get:function(){return c}}})};k.prototype._updateNegativeDatapoint=function(e,t){};k.prototype._drawGridlines=function(e){var t=this._properties.get("gridline");var i=[0,this._radius];var a=this._gridlineScale=this._getGridLineScale(i);f.drawRadarGridLine(e,this._center,this._branchAngles,a,t);this.renderBranches(e);this._dataLabels.setCenter(this._center)};k.prototype.buildLabelsText=function(e,t){for(var i=0;i<e.length;i++){if(e[i].children&&e[i].children.length){this.buildLabelsText(e[i].children,t+e[i].text+"/")}else{var a=t+e[i].text;this._branchLabels.push(t+e[i].text);this._labelContext.push(e[i])}}};k.prototype.setTrellisContext=function(e){this._trellisContext=e};_.prototype.hideConditional=function(){return};k.prototype.render=function(e){k.superclass.render.apply(this,arguments);if(this._axisTitle){var t={x:0,y:this._realSize.height-this._branchTitileSize.height};var i={height:this._branchTitileSize.height,width:this._realSize.width};this._axisTitle.setSize(i);var a=e.append("g").attr("class","v-m-polarAxis");a.attr("transform","translate("+t.x+", "+t.y+")");this._axisTitle.setTitleHiddenItems();this._axisTitle.render(a)}};k.prototype.setData=function(e){k.superclass.setData.apply(this,arguments);if(this._axisTitle){this._axisTitle.setData(e.categoryAxis,v.hasNegativeValue(e))}};S.register(w.DATAPOINT_NAVIGATOR,w.RADAR,D);return k});define("sap/viz/chart/components/plotareas/RadarPlotArea",["sap/viz/framework/common/util/oo","sap/viz/chart/components/container/RadarContainer","sap/viz/chart/components/axis/RadarValueAxis","sap/viz/chart/components/plots/PlotHelper","sap/viz/chart/components/plots/RadarPlot","sap/viz/chart/components/util/ValueAxisUtils","sap/viz/chart/components/scrollbar/Scrollbar","sap/viz/framework/common/util/DataUtils"],function e(t,i,a,r,o,n,l,s){var u=function(e,t){u.superclass.constructor.apply(this,arguments);this._init()};t.extend(u,i);u.prototype._getPlotOptions=function(){return this._options};u.prototype._reRenderComplete=function(){if(this._eventDispatch){this._eventDispatch.reRenderComplete()}};u.prototype._registerZoneManager=function(e,t){if(!t||!t.inTrellis){u.superclass._registerZoneManager.call(this,e)}};u.prototype._init=function(){this._plot=r.create(this._renderType,o,this.runtime(),this._getPlotOptions());this.setChild("plot",this._plot,{position:"center"});this._plot.getDispatch().on("reRenderComplete.plotarea",this._reRenderComplete.bind(this));this.setLayoutSequence(["bottom","top","left","right","center"]);this._valueAxis=new a(this.runtime(),{name:"plotArea.valueAxis"});this.setChild("valueAxis",this._valueAxis,{position:"left"})};u.prototype.destroy=function(){u.superclass.destroy.call(this);this._plot=null;this._hScrollbar=null;this._valueAxis=null};u.prototype._calcValueAxisScale=function(e,t,i){var a=this._data[e].scale;return n.calcScale(a,t,{domain:i})};u.prototype.setData=function(e){u.superclass.setData.apply(this,arguments);var t=this.updateValueScale();if(t){this._plot.setData(t)}};u.prototype.setTrellisContext=function(e){this._plot.setTrellisContext(e)};u.prototype.updateValueScale=function(){var e=this._data;var t=this._roughSize.width;var i=this._roughSize.height;if(!e||t<=0||i<=0){return e}var a=[0,1];a[1]=i;a[1]*=.8;var r;if(this._options.inTrellis){if(this._data.valueAxis._scaleCalculated){this._valueAxis.setData(e.valueAxis);return e}else{this._data.valueAxis._scaleCalculated=true}}r=this._calcValueAxisScale("valueAxis",a);e.valueAxis.scale=r.scale;e.valueAxis.tickHint=r.tickHint;e.valueAxis.scale.setRange([0,1]);this._valueAxis.setData(e.valueAxis);return e};u.prototype.setSize=function(e){var t=u.superclass.setSize.apply(this,arguments);if(this._options.inTrellis){this.setRoughSize(e);var i=this.updateValueScale();if(i){this._plot.setData(i)}}return t};u.prototype._hasScrollbar=function(){return!!this._properties.get("plotArea.isFixedDataPointSize")||!!this._properties.get("plotArea.window.start")||!!this._properties.get("plotArea.window.end")};u.prototype._preRender=function(){var e={x:0,y:0};if(this._hasScrollbar()){e=this._plot.getOffset()}u.superclass._preRender.apply(this,arguments);if(e.x||e.y){this.scroll(e)}};u.prototype._configLayout=function(){var e=this.getZoomer();var t=false,i=false;if(e){t=true;i=true}if(this._hasScrollbar()){t=true;i=true;this.runtime().statusManager().add("plotRealSize",{value:this._plot.getPreferredSize()})}if(this._vScrollbar){this._vScrollbar.isExist(t)}if(this._hScrollbar){this._hScrollbar.isExist(i)}return u.superclass._configLayout.apply(this,arguments)};u.prototype._cloneData=function(e){var t={};var i=this._data;for(var a in i){if(i.hasOwnProperty(a)){t[a]=i[a]}}for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t};u.prototype.drawTrellisDataLabels=function(e,t){this._plot.drawTrellisDataLabels(e,t)};return u});define("sap/viz/chart/behavior/config/AxisBehaviorConfigForRadar",["sap/viz/framework/common/util/Constants","sap/viz/framework/interaction/Constants","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/framework/common/util/UADetector","sap/viz/framework/interaction/BehaviorManager"],function(e,t,i,a,r){var o="v-axis-item",n=e.CSS.CLASS,l=["info/radar"],s="plotArea.polarAxis";l=i.addTrellisType(l);function u(e){var i=e.getProperties().get("interaction.selectability");if(!i){return false}var a=i.mode?i.mode.toUpperCase():i.mode;var r=e.getNodes(e.NodeType.AXIS_ITEM);if(!i.axisLabelSelection||a===t.SELECTION_MODE.NONE||a===t.SELECTION_MODE.SINGLE||!r.node()){return false}else{return true}}var c=[{id:"hover_on_axis_label_radar",triggerEvent:{name:"hover",targets:o,supportedChartTypes:l},handler:function(e,t){if(!u(t)){return}t.fireEvent("cleanAxisHoverEffect");var i=t.getProperties().get(s+".hoverShadow.color");if(i){d3.select(e.data.currentTarget).select("rect").attr("fill",e.data.byKeyboard?"transparent":i).classed(n.HOVER_SHADOW,true)}}},{id:"down_on_axis_label_radar",triggerEvent:{name:"down",targets:o,supportedChartTypes:l},handler:function(e,t){if(!u(t)){return}t.fireEvent("cleanAxisHoverEffect");var i=t.getProperties().get(s+".mouseDownShadow.color");if(i){d3.select(e.data.currentTarget).select("rect").attr("fill",i).classed(n.HOVER_SHADOW,false).classed(n.FOCUS_SHADOW,true)}}},{id:"up_on_axis_label_radar",triggerEvent:{name:"up",targets:o,supportedChartTypes:l},handler:function(e,t){if(!u(t)){return}var i=t.getNodes(t.NodeType.AXIS_ITEM_BACKGROUND);i.attr("fill","transparent").classed(n.FOCUS_SHADOW,false);if(a.isMobile()){i.classed(n.HOVER_SHADOW,false)}else{var r=t.getProperties().get(s+".hoverShadow.color");if(r){d3.select(e.data.currentTarget).select("rect").attr("fill",r).classed(n.HOVER_SHADOW,true)}}}}];r.registerAll(c);return c});define("sap/viz/chart/behavior/config/DataPointBehaviorConfigForRadar",["sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/TypeUtils","sap/viz/chart/behavior/config/HighlightHelper","sap/viz/chart/components/util/DataPointUtils","sap/viz/chart/components/util/ChartTypeUtils","sap/viz/framework/common/util/DataGraphics","sap/viz/framework/interaction/InteractionUtils","sap/viz/framework/interaction/BehaviorManager","sap/viz/framework/interaction/BehaviorFactory","sap/viz/framework/interaction/Constants"],function(e,t,i,a,r,o,n,l,s,u){var c=["info/radar"];c=r.addTrellisType(c);var h="v-datapoint";var p="v-datalabel";var d=e.CSS.CLASS;var f=d.RADAR_NET;function v(e,t,i,a){if(!e.length){return}if(!i&&o.getData(e[0]).trellisInfo){var r=g(e);for(var n in r){if(r.hasOwnProperty(n)){v(r[n],t,true,a)}}return}var l=A(t,t.NodeType.DATA_POINT_GROUP,e[0]);var s=l.querySelectorAll("."+f);var u=m(e);for(var c in u){if(u.hasOwnProperty(c)&&u[c]){y(t,parseInt(c),u[c],a,s)}}}function g(e){var t={};for(var i=0;i<e.length;i++){var a=o.getData(e[i]).trellisInfo;t[a]=t[a]||[];t[a].push(e[i])}return t}function m(e){var t=[];for(var i=0;i<e.length;i++){var a=o.getData(e[i]);t[a.seriesIndex]=t[a.seriesIndex]||[];t[a.seriesIndex].push(e[i])}return t}function y(e,t,i,a,r){var n;var l=e.getProperties().get("plotArea.line");if(r&&r.length>0){[].slice.apply(r).every(function(r){var s=o.getData(r);if(s.seriesIndex!==t){return true}if(a){if(i&&s.pointSum===i.length){n=e.getProperties().get("interaction.selected");if(d3.select(r).classed(d.DATAPOINTSELECTED)){return false}else{d3.select(r).classed(d.DATAPOINTSELECTED,true)}var u={fill:s.fill,visible:s.visibility==="visible"};_(e,r,n.area,u);if(l.visible===true){r.setAttribute("stroke-opacity",1)}else{r.setAttribute("stroke-opacity",0)}}else{if(l.visible!==true){r.setAttribute("stroke-opacity",0)}else{r.removeAttribute("stroke-opacity")}}}else{n=e.getProperties().get("interaction.deselected");if(d3.select(r).classed(d.DATAPOINTSELECTED)){d3.select(r).classed(d.DATAPOINTSELECTED,false)}else{return false}_(e,r,n.area)}return true})}}function _(e,t,a,r){var o=i.getColors(e,t,a.color);var n=r?r.visible:e.getProperties().get("plotArea.area.visible");var l=o.customizedColor||r&&r.fill||o.defaultColor;o=o.customizedColor||o.defaultColor;t.setAttribute("fill",l);t.setAttribute("stroke",o);if(n){if(a.opacity){t.setAttribute("fill-opacity",a.opacity)}}else{t.setAttribute("fill-opacity",0)}}function A(e,t,i){if(i){var a=e.getNodes(t,false);var r;a.forEach(function(e){if(e.contains&&e.contains(i)){r=e}else if(e.compareDocumentPosition&&!!(e.compareDocumentPosition(i)&16)){r=e}});return r}return null}var b=[{id:"selectDataPoint_radar",triggerEvent:{name:"selectDataPoint",supportedChartTypes:c},handler:function(e,r){var o=i.turnToArray(e.data.targets);r.fireEvent(e,true);var n=r.getProperties().get("interaction.selected");o.forEach(function(e){var o=d3.select(e);o.classed(d.DATAPOINTDEFAULT,false);o.classed(d.DATAPOINTSELECTED,true);a.highlight(e);i.drawStroke(r,e,"path",n.stroke,1);i.drawFill(r,e,"path",n,t.isExist(r.getProperties().get("plotArea.markerRenderer")),true)});v(o,r,false,true)}},{id:"deselectDataPoint_radar",triggerEvent:{name:"deselectDataPoint",supportedChartTypes:c},handler:function(e,a){if(!e.data.targets||e.data.targets.length<=0){return}a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o;if(e.data.isAnyOtherSelected){o=a.getProperties().get("interaction.deselected")}else{o=a.getProperties().get("plotArea.dataPoint");if(!a.getProperties().get("plotArea.marker.visible")){o.opacity=0}}r.forEach(function(e){var r=d3.select(e);if(!r){return}r.classed(d.DATAPOINTSELECTED,false);i.drawStroke(a,e,"path",o.stroke,1);i.drawFill(a,e,"path",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")),true)});if(e.data.isAnyOtherSelected){v(r,a,false,false)}}},{id:"hoverOnDataPoint_radar",triggerEvent:{name:"hoverOnDataPoint",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o=a.getProperties().get("interaction.hover");r.forEach(function(e){i.drawStroke(a,e,"path",o.stroke,2);i.drawFill(a,e,"path",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")),true)})}},{id:"unhoverOnDataPoint_radar",triggerEvent:{name:"unhoverOnDataPoint",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=i.turnToArray(e.data.targets);var o;r.forEach(function(e){if(d3.select(e).classed(d.DATAPOINTSELECTED)){o=a.getProperties().get("interaction.selected")}else{var r=a.getStatus("selectedDataPoints");if(r.length){o=a.getProperties().get("interaction.deselected")}else{o=a.getProperties().get("plotArea.dataPoint")}if(!a.getProperties().get("plotArea.marker.visible")){o.opacity=0}}i.drawStroke(a,e,"path",o.stroke,1);i.drawFill(a,e,"path",o,t.isExist(a.getProperties().get("plotArea.markerRenderer")),true)})}},{id:"clearPlot_radar",triggerEvent:{name:"clearPlot",supportedChartTypes:c},handler:function(e,a){a.fireEvent(e,true);var r=a.getNodes(a.NodeType.DATA_POINT,false);if(!r||!r.length){return}var n,l=e.data.isGray;if(l){n=a.getProperties().get("interaction.deselected")}else{n=a.getProperties().get("plotArea.dataPoint")}if(!a.getProperties().get("plotArea.marker.visible")){n.opacity=0}r.forEach(function(e){i.drawStroke(a,e,"path",n.stroke,1);i.drawFill(a,e,"path",n,t.isExist(a.getProperties().get("plotArea.markerRenderer")),true)});var s=a.getProperties().get("plotArea.area.visible");if(l){n=a.getProperties().get("interaction.deselected.area")}else{n=a.getProperties().get("plotArea.area")}var u=a.getNodes(a.NodeType.RADAR_NET,false);var c=a.getProperties().get("plotArea.line");u.forEach(function(e){if(d3.select(e).classed(d.DATAPOINTSELECTED)){d3.select(e).classed(d.DATAPOINTSELECTED,false)}var t=o.getData(e);var r;var u=s?n.opacity:0;if(t.visibility==="visible"){if(!l){u=t.opacity}else{u=n.opacity}r=t.fill}else if(t.visibility==="hidden"){u=0}var h=i.getColors(a,e,n.color);if(l&&h.customizedColor){e.setAttribute("fill",h.customizedColor);e.setAttribute("stroke",h.customizedColor)}else{e.setAttribute("fill",r||h.defaultColor);e.setAttribute("stroke",h.defaultColor)}if(c.visible!==true){e.setAttribute("stroke-opacity",0)}else{e.removeAttribute("stroke-opacity")}e.setAttribute("fill-opacity",u)})}},n.getDeselectEvent("click_on_non_selection_radar",c,i.getDeselAllExTargets())];l.registerAll(b);return b});define("sap/viz/chart/views/RadarChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/chart/components/plotareas/RadarPlotArea","sap/viz/chart/behavior/config/AxisBehaviorConfigForRadar","sap/viz/chart/behavior/config/DataPointBehaviorConfigForRadar"],function e(t,i,a){var r=function(e,t){r.superclass.constructor.apply(this,arguments);this._supportLazyRender=true};t.extend(r,i);r.prototype.setSize=function(){if(this._plotArea&&this._plotArea.setRoughSize){this._plotArea.setRoughSize.apply(this._plotArea,arguments)}r.superclass.setSize.apply(this,arguments)};r.prototype._getLegendInitOptions=function(){return[{noFillSupport:true}]};r.prototype._getDataItems=function(){return["valueAxis","categoryAxis","color","dataFrame","series","trellisRow","trellisColumn"]};r.prototype._createPlotContainer=function(e){this._plotArea=new a(this.runtime(),{renderType:this._renderType});this._plotArea.setRoughSize(this._size);this.setChild("main",this._plotArea,{priority:3})};return r});define("sap/viz/chart/metadata/properties/chartTypes",[],function(){return["DEFAULT","100_dual_stacked_bar","100_dual_stacked_column","mekko","100_mekko","horizontal_mekko","100_horizontal_mekko","100_stacked_bar","100_stacked_column","100_area","100_horizontal_area","bar","bullet","vertical_bullet","timeseries_bullet","column","combination","dual_bar","dual_column","dual_horizontal_line","dual_line","dual_stacked_bar","dual_stacked_column","horizontal_combination","horizontal_line","line","area","horizontal_area","timeseries_line","timeseries_column","timeseries_combination","dual_timeseries_combination","timeseries_stacked_combination","timeseries_stacked_column","timeseries_100_stacked_column","stacked_bar","stacked_column","pie","donut","scatter","bubble","time_bubble","timeseries_scatter","timeseries_bubble","treemap","heatmap","tagcloud","number","radar","trellis_100_dual_stacked_bar","trellis_100_dual_stacked_column","trellis_100_stacked_bar","trellis_100_stacked_column","trellis_100_area","trellis_100_horizontal_area","trellis_bar","trellis_column","trellis_combination","trellis_combinationEx","trellis_dual_bar","trellis_dual_column","trellis_dual_horizontal_line","trellis_dual_line","trellis_dual_stacked_bar","trellis_dual_stacked_column","trellis_horizontal_combination","trellis_horizontal_line","trellis_horizontal_area","trellis_line","trellis_area","trellis_stacked_bar","trellis_stacked_column","trellis_pie","trellis_scatter","trellis_bubble","trellis_donut","stacked_combination","horizontal_stacked_combination","dual_stacked_combination","dual_horizontal_stacked_combination","dual_combination","dual_horizontal_combination","waterfall","stacked_waterfall","timeseries_waterfall","horizontal_waterfall","horizontal_stacked_waterfall","trellis_radar","combinationEx"]});define("sap/viz/chart/metadata/properties/metadata",["sap/viz/chart/metadata/properties/chartTypes","sap/viz/chart/metadata/properties/PropertyLoader"],function(e,t){function i(e,i){var a;var n=t.getProperties(e);if(n){a={};for(var l in n){if(n.hasOwnProperty(l)){var s=n[l];if(!o(s)){s={defaultValue:s}}r(l,s,a)}}}return a}function a(e){return"info/"+e}function r(e,t,i){var a=e.split(".");var r=i;for(var o=0;o<a.length;++o){var n=a[o];if(o<a.length-1){r[n]=r[n]||{children:{}};r=r[n].children}else{r[n]=t}}}function o(e){return Object.prototype.toString.call(e)==="[object Object]"&&(e.hasOwnProperty("defaultValue")||e.hasOwnProperty("readonly")||e.hasOwnProperty("serializable"))}var n={};var l=e.map(function(e){return a(e)});return{get:function(e){if(arguments.length){var t=n[e];if(!t){t=i(e);if(l.indexOf(e)>-1){n[e]=t}}return t}else{for(var a=0;a<l.length;++a){var r=l[a];n[r]=n[r]||i(r)}return n}}}});define("scaleDefs",[],function e(){var t=["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E","#8FB2CF","#95D4AB","#EAE98F","#F9BE92","#EC9A99","#BC98BD","#1EB7B2","#73C03C","#F48323","#EB271B","#D9B5CA","#AED1DA","#DFECB2","#FCDAB0","#F5BCB4"];var i=[["#8FBADD","#B8D4E9","#7AAED6","#A3C7E3","#3D88C4","#66A1D0","#297CBE","#5295CA","#005BA3","#146FB7","#005395","#0063B1"],["#F6A09B","#F9C3C0","#F58E88","#F8B1AD","#F05B52","#F37D76","#EE4A40","#F16C64","#D92419","#ED382D","#C52117","#EB271B"]];var a=["#748CB2","#9CC677","#EACF5E","#F9AD79","#D16A7C","#8873A2","#3A95B3","#B6D949","#FDD36C","#F47958","#A65084","#0063B1","#0DA841","#FCB71D","#F05620","#B22D6E","#3C368E"];var r=["#A7BFE5","#CFF9AA","#FFFF91","#FFE0AC","#FF9DAF","#BBA6D5","#6DC8E6","#E9FF7C","#FFFF9F","#FFAC8B","#D983B7","#3396E4","#40DB74","#FFEA50","#FF8953","#E560A1","#6F69C1"];var o=["#D5DADC"];var n={palette:{defaultValue:t}};var l={palette:{defaultValue:i}};var s={palette:{defaultValue:[[t,i[0]],i[1]]}};var u={palette:{defaultValue:t}};var c={palette:{defaultValue:t}};var h={ActualColor:{defaultValue:a},AdditionalColor:{defaultValue:r},ForecastColor:{defaultValue:o}};var p={ActualColor:{defaultValue:a},AdditionalColor:{defaultValue:r}};var d={palette:{defaultValue:["circle","square","diamond","triangleUp","triangleDown","triangleLeft","triangleRight","cross","intersection"]}};var f={min:{defaultValue:"auto"},max:{defaultValue:"auto"},type:{defaultValue:"linear"}};var v={min:{defaultValue:"auto"},max:{defaultValue:"auto"},type:{defaultValue:"linear"}};var g={start:{defaultValue:"auto"},end:{defaultValue:"auto"}};var m={type:{defaultValue:"linear"},min:{defaultValue:"auto"},max:{defaultValue:"auto"}};var y={type:{defaultValue:"linear"},min:{defaultValue:"auto"},max:{defaultValue:"auto"}};var _={domain:{defaultValue:[]}};var A={palette:{defaultValue:[]},startColor:{defaultValue:"#C2E3A9"},endColor:{defaultValue:"#73C03C"},legendValues:{defaultValue:[]},numOfSegments:{defaultValue:5},maxNumOfSegments:{defaultValue:9,access:"internal"},nullColor:{defaultValue:"#E0E0E0"}};var b={};var x={feed:"color",properties:n};var S={feed:"valueAxis",properties:v};var D={feed:"dataFrame",properties:_};var w={feed:"valueAxis2",properties:f};var C={feed:"color",properties:l};var T={feed:"color",properties:s};var z={feed:"valueAxis",properties:m};var L={feed:"valueAxis2",properties:y};var P={feed:"shape",properties:d};var k={feed:"timeAxis",properties:g};var E={feed:"color",properties:A};var I=[{feed:"actualValues",properties:m},{feed:"color",properties:h}];var O=[k,{feed:"actualValues",properties:m},{feed:"color",properties:p}];var R=[S,x,D];var N=[S,x];var M=[x,D];var B=[S,w,C,D];var V=[S,w,T];var F=[z,L,x,P];var H=F.concat(D);var U=[{feed:"color",properties:c}];var W=U.concat(D);var G=[S,x];var Y=[S,w,C];var X=[C,D];var j=[z,x,k];var Z=j.concat(w);var q=[S,{feed:"waterfallType",properties:b}];var K=[S,x,k];var Q=q.concat(x);var $=[z,x,k,P];var J=[S,x,k];var ee=J.concat(w);var te={column:R,donut:W,pie:W,bar:R,line:R,area:R,stacked_column:R,stacked_bar:R,"100_stacked_bar":M,"100_stacked_column":M,"100_area":M,"100_horizontal_area":M,mekko:N,horizontal_mekko:N,"100_mekko":N,"100_horizontal_mekko":N,combination:R,stacked_combination:R,horizontal_stacked_combination:R,dual_bar:B,dual_column:B,dual_line:B,scatter:H,bubble:H,trellis_column:G,trellis_donut:U,trellis_pie:U,trellis_bar:G,trellis_line:G,trellis_area:G,trellis_100_area:[x],trellis_100_horizontal_area:[x],trellis_stacked_column:G,trellis_stacked_bar:G,trellis_100_stacked_bar:[x],trellis_100_stacked_column:[x],trellis_combination:G,trellis_dual_bar:Y,trellis_dual_column:Y,trellis_dual_line:Y,trellis_scatter:F,trellis_bubble:F,horizontal_line:R,horizontal_area:R,trellis_horizontal_line:G,trellis_horizontal_area:G,horizontal_combination:R,trellis_horizontal_combination:[S,{feed:"color",properties:u}],dual_horizontal_line:B,trellis_dual_horizontal_line:Y,"100_dual_stacked_column":X,trellis_100_dual_stacked_column:X,"100_dual_stacked_bar":X,trellis_100_dual_stacked_bar:[C],dual_stacked_column:B,trellis_dual_stacked_column:Y,dual_stacked_bar:B,trellis_dual_stacked_bar:Y,treemap:[E],heatmap:[E],number:[],tagcloud:[E,D],time_bubble:[z,L,x,P,D],bullet:I,vertical_bullet:I,timeseries_bullet:O,dual_combination:B,dual_stacked_combination:B,dual_horizontal_combination:B,dual_horizontal_stacked_combination:B,timeseries_line:j,timeseries_column:[z,x,k],timeseries_combination:J,timeseries_stacked_combination:J,dual_timeseries_combination:ee,timeseries_scatter:$,timeseries_bubble:$,waterfall:q,timeseries_waterfall:K,horizontal_waterfall:q,stacked_waterfall:Q,horizontal_stacked_waterfall:Q,radar:[S,x,D],trellis_radar:[S,x],combinationEx:V,trellis_combinationEx:V,timeseries_stacked_column:[z,x,k],timeseries_100_stacked_column:[x,k]};return te});define("sap/viz/chart/metadata/properties/ScaleLoader",["scaleDefs","sap/viz/framework/common/util/ObjectUtils"],function(e,t){var i=t.clone(e);var a=function(e){var t=[];var i=0;if(e){for(i=0;i<e.length;++i){var a=e[i];t[i]={};for(var r in a){if(a.hasOwnProperty(r)){t[i][r]=a[r]}}if(t[i].hasOwnProperty("properties")){delete t[i].properties;for(var o in a.properties){if(a.properties.hasOwnProperty(o)){t[i][o]=a.properties[o]}}}}}return t};return{addScales:function(e){i=t.extend(true,{},i,e)},getScale:function(e){return a(i[e])}}});define("sap/viz/chart/metadata/metadata",["sap/viz/chart/metadata/properties/metadata","sap/viz/framework/common/lang/LangManager","sap/viz/framework/core/ChartViewRegistry","sap/viz/framework/common/util/ObjectUtils","sap/viz/chart/metadata/properties/ScaleLoader"],function e(t,i,a,r,o){var n=function(e){if(e.search("info/")!=-1){var t=e.slice(5);return t}else{return e}};var l=function(e){if(!e){return}var t=r.clone(e);for(var i=0;i<t.length;i++){delete t[i].name}return t};var s=function(e){var a=n(e.type);if(e.isBuiltIn){e.bindings=l(e.bindings)}e.properties=t.get(e.type);e.scales=o.getScale(a);e.name=i.get(e.name)||e.name;return e};var u={get:function(e){var t=a.getMetadata(e);if(t){return s(t)}return t},getAll:function(){var e=a.getAllMetadata();for(var t in e){if(e.hasOwnProperty(t)){s(e[t])}}return e}};return u});define("sap/viz/api/metadata/Viz",["sap/viz/chart/metadata/metadata","exports"],function e(t,i){var a={get:function(e){if(arguments.length){var i=t.get(e);return i}else{var a=t.getAll();return a}}};return a});define("sap/viz/chart/components/legend/ExtensionColorLegend",["sap/viz/chart/components/legend/ColorLegend","sap/viz/framework/common/util/oo","sap/viz/chart/scales/ColorScale"],function(e,t,i){var a=function(){a.superclass.constructor.apply(this,arguments);var e=this;this._runtime.eventDispatcher().on("addEventListener.colorLegend",function(){e.addEventListener.apply(e,arguments[0])});this._runtime.eventDispatcher().on("removeEventListener.colorLegend",function(){e.removeEventListener.apply(e,arguments[0])});this._eventMap={};this.initEvent()};t.extend(a,e);var r=["selectionChanged"];a.prototype.initEvent=function(){var e={};for(var t in r){if(r.hasOwnProperty(t)){e[r[t]]={}}}this._eventMap=e};a.prototype.registerEvent=function(){var e=function(e){for(var t in this._eventMap["selectionChanged"]){if(this._eventMap["selectionChanged"].hasOwnProperty(t)){this._eventMap["selectionChanged"][t].call(this,e)}}}.bind(this);this._runtime.eventDispatcher().on("legendSelection",e)};a.prototype.render=function(){a.superclass.render.apply(this,arguments);this.registerEvent()};a.prototype._buildData=function(e){var t=e.color||this._properties.origin.get("plotArea.colorPalette");var a=e.data;var r=e.metadata;var o=[];var n=[];a.forEach(function(e){o.push([e]);var t=[e];t.mndIndex=-1;n.push(t)});var l=new i(o,t);return{color:{scale:l,metaData:r,rowArray:n}}};a.prototype.setData=function(e,t){if(t){var i=this._buildData(e);a.superclass.setData.call(this,i)}else{a.superclass.setData.call(this,e)}};a.prototype.addEventListener=function(e,t,i,a){var r=function(){t.apply(i,arguments)};if(this._eventMap[e]){this._eventMap[e][t]=r}};a.prototype.removeEventListener=function(e,t,i){if(!!this._eventMap[e][t]){delete this._eventMap[e][t]}};return a});define("sap/viz/chart/components/extension/componentWrapper/BaseWrapper",["sap/viz/framework/common/util/TypeUtils"],function(e){var t=function(e,t){this._evtDispatch=t;this._supportedEvent=[];this._properties=e._properties};t.prototype.properties=function(t){if(arguments.length===0||arguments.length===1&&e.isString(t)){return this._properties.get.apply(this._properties,arguments)}this._properties.set.apply(this._properties,arguments)};t.prototype.addEventListener=function(e,t,i,a){if(this._supportedEvent.indexOf(e)>-1){this._evtDispatch.addEventListener(e,t,i,a)}};t.prototype.removeEventListener=function(e,t,i){this._evtDispatch.removeEventListener(e,t,i)};t.prototype.supportedEvent=function(){return this._supportedEvent};return t});define("sap/viz/chart/components/extension/componentWrapper/TitleWrapper",["sap/viz/framework/common/util/oo","sap/viz/chart/components/extension/componentWrapper/BaseWrapper"],function(e,t){var i=function(){i.superclass.constructor.apply(this,arguments)};e.extend(i,t);return i});define("sap/viz/chart/components/extension/componentWrapper/LegendWrapper",["sap/viz/framework/common/util/oo","sap/viz/chart/components/extension/componentWrapper/BaseWrapper"],function(e,t){var i=function(e,t){i.superclass.constructor.apply(this,arguments);this._properties=e._properties.origin.proxy("legend");this._supportedEvent=["selectionChanged"]};e.extend(i,t);return i});define("sap/viz/chart/components/extension/BuiltInComponentWrapper",["sap/viz/chart/components/extension/componentWrapper/TitleWrapper","sap/viz/chart/components/extension/componentWrapper/LegendWrapper","sap/viz/framework/extension/Constants"],function(e,t,i){var a={title:e,legendGroup:t};var r=function(e,t){if(!a[e._name]){return null}var r=new a[e._name](e,t);r.name=i.ModuleName[e._name];return r};return{createWrapper:r}});define("sap/viz/chart/components/plots/ExtensionPlot",["sap/viz/chart/components/UIComponent","sap/viz/framework/common/util/oo","sap/viz/framework/extension/DataModelToCSVUtil","sap/viz/chart/components/extension/BuiltInComponentWrapper","sap/viz/framework/common/util/TypeUtils","sap/viz/framework/common/util/PropertyZoneUtil","sap/viz/framework/common/util/FeedingZoneUtil","sap/viz/framework/common/util/Constants","sap/viz/framework/common/util/ObjectUtils"],function(e,t,i,a,r,o,n,l,s){var u=function(e,t){if(!r.isFunction(this.getDefintion)){return}var i=this.getDefintion();u.superclass.constructor.apply(this,arguments);e.zoneManager().add(o.plot(this));e.zoneManager().add(n.plot(this));var a=this.runtime().semanticManager();a.bindDataPointProperty(this._name+".dataPointStyle");this._semanticMgr=a;this.Viz=new i;this._rawdata={};this._supportTooltip=true;this._originalSize={};var l=this;this._properties.origin.add(i.metadata.properties,true);if(i.metadata.events&&r.isArray(i.metadata.events)){i.metadata.events.forEach(function(e){l._exposeMoreEvents(e)})}this._exposeMoreEvents("initialized");this._exposeMoreEvents("renderComplete");this.Viz.dispatchEvent=function(e,t){c.call(l,e,t)};var s=this.Viz;window.setTimeout(function(){if(this._runtime){this._runtime.statusManager().add("interaction.selectedDataPoints",{serializable:false,set:function(e){e.success=s.setSelection(e.items)},get:function(){return s.getSelection()}})}}.bind(this),0);this._buildTooltip();v.call(this,this._properties.origin);this._changes={}};t.extend(u,e);u.prototype.renderTo=function(){return"DIV"};u.prototype._buildModuleWrapper=function(e){var t={};for(var i in e){if(e.hasOwnProperty(i)){var r=e[i].module;var o=a.createWrapper(r,this);if(o&&o.name){t[o.name]=o;(function(e){o.setData=function(t){e.setData(t,true)}})(r)}}}return t};u.prototype._buildTooltip=function(){var e=this.Viz;var t=this.getDefintion();var i=this;e.showTooltip=function(e){i._runtime.eventDispatcher().fire("showTooltip",e)};e.hideTooltip=function(e){i._runtime.eventDispatcher().fire("hideTooltip",e)}};u.prototype.addEventListener=function(){this._runtime.eventDispatcher().fire("addEventListener",arguments)};u.prototype.removeEventListener=function(){this._runtime.eventDispatcher().fire("removeEventListener",arguments)};u.prototype.setBuiltInComponent=function(e){this._builtInComponents=e;this._builtInComponents=this._buildModuleWrapper(e)};u.prototype.changes=function(e){if(arguments.length>0){this._changes=e}else{return this._changes}};u.prototype.updateBuiltInComponents=function(){if(this.Viz&&this.Viz.updateBuiltInComponents){this.Viz.updateBuiltInComponents(this._builtInComponents,this._changes)}};u.prototype.render=function(e){u.superclass.render.apply(this,arguments);this._selection=e;if(this.Viz){h.call(this,e);var t=this._properties.origin.get("plotArea.colorPalette")||l.COLOR.SAPColorSingleAxis;this.Viz.colorPalette=function(){return t};this._originalProperties=this._properties.origin.get();var i=this._size;this._originalSize=s.clone(i);this.Viz.size=function(){return i};if(this.Viz.init&&!this._initialized){this.Viz.init();this._initialized=true}if(this.Viz.render){this.Viz.render(this._builtInComponents,this._changes)}}};u.prototype.destroy=function(){u.superclass.destroy.apply(this,arguments);if(this.Viz.destroy){this.Viz.destroy()}this.Viz=undefined};u.prototype.setRawData=function(e){this._rawdata=e;d.call(this,e.bindings);f.call(this,e.scales);p.call(this,e.data)};var c=function(e,t){window.setTimeout(function(){if(this._eventDispatch&&this._eventDispatch[e]){this._eventDispatch[e](t)}}.bind(this),0)};u.prototype.propertyZone=function(){return this.Viz.propertyZone(this._properties._prefix)};u.prototype.feedingZone=function(){return this.Viz.feedingZone()};u.prototype.exportContent=function(e){return this.Viz.exportToSVGString&&this.Viz.exportToSVGString(e)};u.prototype.supportExportToContentType=function(){return!!this.Viz.exportToSVGString};var h=function(e){this.Viz.container=function(){return e}};var p=function(e){var t=e;if(this.getDefintion().metadata.dataType==="csv"){t=i(e,this._rawdata.bindings)}if(this.Viz.data){this.Viz.data(t)}else{this.Viz.data=function(){return t}}};var d=function(e){if(this.Viz.bindings){this.Viz.bindings(e)}else{this.Viz.bindings=function(){return e}}};var f=function(e){if(this.Viz.scales){this.Viz.scales(e)}else{this.Viz.scales=function(){return e}}var t=this._semanticMgr;this.Viz.getSemanticColor=function(e){return t.analyzeDataPoint("color",e)}};var v=function(e){this.Viz.properties=function(t){if(arguments.length===0||arguments.length===1&&r.isString(t)){return e.get.apply(e,arguments)}e.set.apply(e,arguments)}};return u});define("sap/viz/chart/behavior/ExtensionBehavior",["sap/viz/framework/common/util/oo","sap/viz/framework/common/util/Constants","sap/viz/chart/components/util/DataPointUtils","sap/viz/framework/interaction/BehaviorManager","sap/viz/chart/behavior/DefaultBehavior","sap/viz/chart/behavior/config/handler/RuntimeSelectionHelperHandler","sap/viz/chart/behavior/config/handler/LegendBehaviorHandler","sap/viz/chart/behavior/config/SelectionUtil"],function(e,t,i,a,r,o,n,l){var s=a.get("default").clone();var u=function(){};e.extend(u,o);var c=function(){};e.extend(c,n);c.prototype.click=function(e,t,a){if(!l.isLegendTriggerable(t,t.NodeType.LEGEND_ITEM)){return}var r=i.getContext(e.data.currentTarget).ctx;t.fireExternalEvent("legendSelection",r)};var h=s.getActionById("legendBehaviorDefinition");h.setHandler(c);a.register("ExtensionBehavior",s);a.addBehaviorType("ExtensionBehavior")});define("sap/viz/chart/views/ExtensionChartView",["sap/viz/framework/common/util/oo","sap/viz/chart/views/ChartView","sap/viz/framework/extension/Constants","sap/viz/chart/components/legend/ExtensionColorLegend","sap/viz/chart/behavior/config/tooltip/Tooltip","sap/viz/chart/components/plots/ExtensionPlot","sap/viz/chart/behavior/ExtensionBehavior","sap/viz/framework/common/util/ObjectUtils","require"],function(e,t,i,a,r,o,n,l,s){function u(e){switch(e.name){case i.ModuleName.title:return{id:"title",place:e.properties&&e.properties.position||"top",properties:e.properties||{}};case i.ModuleName.legend:return{id:"legend",place:e.properties&&e.properties.position||"right",properties:e.properties||{}}}}var c=function(){this._supportTooltip=true;this._needDispatchTooltipEvent=false;this._changes=false;this._dataItem=[];this.viz=this.getDefintion().metadata;this.plot=h(this.getDefintion());this.childrens=[];this.childrens.push(this.plot);if(this.viz.builtInComponents){for(var e in this.viz.builtInComponents){if(this.viz.builtInComponents.hasOwnProperty(e)){this.childrens.push(u(this.viz.builtInComponents[e]))}}}if(this.viz.bindingDefinition){this._dataItem=p(this.viz.bindingDefinition)}c.superclass.constructor.apply(this,arguments);this.id=this.viz.id};function h(t){var i=function(){i.superclass.constructor.apply(this,arguments)};e.extend(i,o);i.prototype.getDefintion=function(){return t};return i}e.extend(c,t);var p=function(e){return e.map(function(e){return e.id})};c.prototype.renderTo=function(){return"DIV"};c.prototype._dataChanged=function(){this._resetPlotContainer()};c.prototype._createChildren=function(){var e=this;var t=2;this.childrens.forEach(function(i){if(i.id==="title"){e._createTitle(i.place);e._properties.proxy("title").setDefault(i.properties)}else if(i.id==="legend"){e._createLegendGroup(i.place);e._properties.proxy("legend").setDefault(i.properties);if(i.properties.position){e._properties.add("legend.position",i.properties.position)}}else{var a=new i(e.runtime(),{name:"plotArea",supportTooltip:e._supportTooltip});e.setChild("plot",a,{priority:++t})}});this._createBackground();this._createTooltip();if(this.getChild("plot")){var i=this.getChild("plot").module;if(i.setBuiltInComponent){i.setBuiltInComponent(this._children)}}if(this.getChild(this._getLegendGroupModuleKey())){this._properties.origin.add({"interaction.selectability.plotLassoSelection":{defaultValue:false,serializable:false,readonly:true},"interaction.selectability.legendSelection":{defaultValue:true,serializable:false,readonly:true}})}else{this._needDispatchTooltipEvent=true;this._exposeMoreEvents("showTooltip");this._exposeMoreEvents("hideTooltip")}};c.prototype.render=function(){if(!this._size.width||!this._size.height){return}if(this.getChild("plot")&&this.getChild("plot").module&&this.getChild("plot").module.changes){var e=this.getChild("plot").module;e.changes(this._changes);if(e.updateBuiltInComponents){e.updateBuiltInComponents()}}if(this._properties.get("interaction.behaviorType")!=="DesignTimeBehavior"&&this.getChild(this._getLegendGroupModuleKey())){this._properties.origin.setDefault({"interaction.behaviorType":"ExtensionBehavior"})}var t=this._properties.get("legend.position");if(t){this.getChild("legendGroup").module.setDefaultPosition(t)}c.superclass.render.apply(this,arguments);if(this._selections&&this._selections.plot&&this._selections.plot.node){var i=this._selections.plot.node();i.parentNode.appendChild(i)}};c.prototype._getLegendDefinition=function(){return[a]};c.prototype._createTooltip=function(){if(!this._tooltipModule){this._tooltipModule=new r(this._properties.origin);this._runtime.eventDispatcher().on("showTooltip.extension",function(e){if(this._properties.get("interaction.behaviorType")!=="DesignTimeBehavior"){this._tooltipModule.showTooltip({container:e.container,mode:e.mode,position:e.position,data:l.extend(true,[],e.data)});if(this._needDispatchTooltipEvent){this._eventDispatch["showTooltip"](e)}}}.bind(this));this._runtime.eventDispatcher().on("hideTooltip.extension",function(e){if(this._properties.get("interaction.behaviorType")!=="DesignTimeBehavior"){this._tooltipModule.hideTooltip(e);if(this._needDispatchTooltipEvent){this._eventDispatch["hideTooltip"](e)}}}.bind(this))}};c.prototype.changes=function(e){if(arguments.length>0){this._changes=e}else{return this._changes}};c.prototype.setChild=function(e,t,i){t.alias=e;if(!this._children[e]){this._children[e]={}}this._children[e].module=t;this._children[e].option=i?i:{};return this};c.prototype.enableInteraction=function(){if(!this.getChild(this._getLegendGroupModuleKey())){return false}return true};c.prototype._updateData=function(){c.superclass._updateData.apply(this,arguments);if(this._data){for(var e in this._children){if(this._children.hasOwnProperty(e)){if(this.getChild(e).module.setRawData&&this._rawData.dataModel._rawData){this.getChild(e).module.setRawData({data:this._rawData.dataModel._rawData,bindings:this._rawData.bindings,scales:this._rawData.scales})}}}}};c.prototype.exportContent=function(e){return this._children["plot"].module.exportContent(e)};c.prototype.supportExportToContentType=function(){return this._children["plot"].module.supportExportToContentType()};c.prototype._getDataItems=function(){return this._dataItem};c.prototype._dispatchInitialized=function(){if(this._eventDispatch){this._eventDispatch.ready();var e=this.getChild("plot");if(e.module&&e.module._eventDispatch){var t=function(){if(!this._initialized){this._initialized=true;window.setTimeout(function(){if(window._sap_viz_notify_load_complete){window._sap_viz_notify_load_complete()}},0)}}.bind(this);e.module._eventDispatch.on("renderComplete.renderExtensionComplete",t);e.module._eventDispatch.on("initialized.renderExtensionComplete",t)}}};return c});(function(){var e=define&&define.__autoLoad;if(e&&e.length){define.__autoLoad=[];require(e)}})();(function(e){var t=sap.bi.framework.declareBundle({id:"sap.viz.chart",components:e});(t.components||[]).forEach(function(e){e.instance=e.instance||{};window._cvom_kernel.register(e)})})(function(){var e="sap.viz.impls";var t={resources:[{key:"sap.viz.api.env.Template.loadPaths",path:"./resources/chart/templates"},{key:"sap.viz.api.env.Language.loadPaths",path:"./resources/chart/langs"},{key:"sap.viz.api.env.Language.loadPaths",path:"./resources/framework/langs"}]};var i="sap/viz/chart/views/";var a="sap/viz/chart/metadata/bindings/";return[{id:"info/bar",provide:e,instance:{view:i+"XYChartView",renderType:"bar",plot:"sap/viz/chart/components/plots/ColumnPlot",family:"xy",name:"IDS_BARCHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/stacked_bar",provide:e,instance:{view:i+"XYChartView",renderType:"stacked_bar",plot:"sap/viz/chart/components/plots/StackedColumnPlot",family:"xy",name:"IDS_STACKEDBARCHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/100_stacked_bar",provide:e,instance:{view:i+"XYChartView",renderType:"100_stacked_bar",plot:"sap/viz/chart/components/plots/PercentagePlot",family:"xy",name:"IDS_PERCENTAGESTACKEDBARCHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/column",provide:e,instance:{view:i+"XYChartView",renderType:"column",family:"xy",name:"IDS_VERTICALBARCHART",plot:"sap/viz/chart/components/plots/ColumnPlot",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/stacked_column",provide:e,instance:{view:i+"XYChartView",renderType:"stacked_column",plot:"sap/viz/chart/components/plots/StackedColumnPlot",family:"xy",name:"IDS_STACKEDVERTICALBARCHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/100_stacked_column",provide:e,instance:{view:i+"XYChartView",renderType:"100_stacked_column",plot:"sap/viz/chart/components/plots/PercentagePlot",family:"xy",name:"IDS_PERCENTAGESTACKEDVERTICALBARCHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/line",provide:e,instance:{view:i+"XYChartView",renderType:"line",plot:"sap/viz/chart/components/plots/LinePlot",family:"xy",name:"IDS_LINECHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/area",provide:e,instance:{view:i+"XYChartView",plot:"sap/viz/chart/components/plots/AreaPlot",renderType:"area",family:"xy",name:"IDS_AREACHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/horizontal_area",provide:e,instance:{view:i+"XYChartView",renderType:"horizontal_area",plot:"sap/viz/chart/components/plots/AreaPlot",family:"xy",name:"IDS_HORIZONTALAREACHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/100_area",provide:e,instance:{view:i+"XYChartView",renderType:"100_area",family:"xy",name:"IDS_PERCENTAGEAREACHART",plot:"sap/viz/chart/components/plots/PercentageAreaPlot",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/100_horizontal_area",provide:e,instance:{view:i+"XYChartView",renderType:"100_horizontal_area",plot:"sap/viz/chart/components/plots/PercentageAreaPlot",family:"xy",name:"IDS_PERCENTAGEHORIZONTALAREACHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t},{id:"info/combination",provide:e,instance:{view:i+"XYChartView",renderType:"combination",family:"xy",name:"IDS_COMBINATIONCHART",plot:"sap/viz/chart/components/plots/CombinationPlot",vender:"sap.viz",bindings:a+"CombinationBindings"},customProperties:t},{id:"info/bubble",provide:e,instance:{view:i+"YYChartView",renderType:"bubble",family:"yy",name:"IDS_BUBBLECHART",vender:"sap.viz",bindings:a+"YYBindings"},customProperties:t},{id:"info/time_bubble",provide:e,instance:{view:i+"YYChartView",renderType:"time_bubble",family:"yy",name:"IDS_TIMEBUBBLECHART",vender:"sap.viz",bindings:a+"YYBindings"},customProperties:t},{id:"info/scatter",provide:e,instance:{view:i+"YYChartView",renderType:"scatter",family:"yy",name:"IDS_SCATTERCHART",vender:"sap.viz",bindings:a+"YYBindings"},customProperties:t},{id:"info/dual_column",provide:e,instance:{view:i+"XYYChartView",renderType:"column",plot:"sap/viz/chart/components/plots/ColumnPlot",family:"xyy",name:"IDS_DUALVERTICALBARCHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/dual_stacked_column",provide:e,instance:{view:i+"XYYChartView",renderType:"stacked_column",plot:"sap/viz/chart/components/plots/StackedColumnPlot",family:"xyy",name:"IDS_DUALSTACKEDVERTICALBARCHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/100_dual_stacked_column",provide:e,instance:{view:i+"XYYChartView",renderType:"100_stacked_column",plot:"sap/viz/chart/components/plots/PercentagePlot",family:"xyy",name:"IDS_DUALPERCENTAGESTACKEDVERTICALBARCHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/dual_bar",provide:e,instance:{view:i+"XYYChartView",renderType:"bar",plot:"sap/viz/chart/components/plots/ColumnPlot",family:"xyy",name:"IDS_DUALBARCHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/dual_stacked_bar",provide:e,instance:{view:i+"XYYChartView",renderType:"stacked_bar",plot:"sap/viz/chart/components/plots/StackedColumnPlot",family:"xyy",name:"IDS_DUALSTACKEDBARCHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/100_dual_stacked_bar",provide:e,instance:{view:i+"XYYChartView",renderType:"100_stacked_bar",plot:"sap/viz/chart/components/plots/PercentagePlot",family:"xyy",name:"IDS_DUALPERCENTAGESTACKEDBARCHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/dual_line",provide:e,instance:{view:i+"XYYChartView",renderType:"line",plot:"sap/viz/chart/components/plots/LinePlot",family:"xyy",name:"IDS_DUALLINECHART",vender:"sap.viz",bindings:a+"XYYBindings"},customProperties:t},{id:"info/bullet",provide:e,instance:{view:i+"BulletChartView",renderType:"bullet",family:"bullet",name:"IDS_BULLETCHART",vender:"sap.viz",bindings:a+"BulletBindings"},customProperties:t},{id:"info/vertical_bullet",provide:e,instance:{view:i+"BulletChartView",renderType:"vertical_bullet",family:"bullet",name:"IDS_VERTICALBULLETCHART",vender:"sap.viz",bindings:a+"BulletBindings"},customProperties:t},{id:"info/pie",provide:e,instance:{view:i+"PieChartView",renderType:"pie",family:"pie",name:"IDS_PIECHART",vender:"sap.viz",bindings:a+"PieBindings"},customProperties:t},{id:"info/donut",provide:e,instance:{view:i+"PieChartView",renderType:"donut",family:"pie",name:"IDS_DONUTCHART",vender:"sap.viz",bindings:a+"PieBindings"},customProperties:t},{id:"info/treemap",provide:e,instance:{view:i+"TreeChartView",renderType:"treemap",family:"treemap",name:"IDS_TREEMAPCHART",vender:"sap.viz",bindings:a+"TreeBindings"},customProperties:t},{id:"info/heatmap",provide:e,instance:{view:i+"XXChartView",renderType:"heatmap",family:"xx",name:"IDS_HEATMAPCHART",vender:"sap.viz",bindings:a+"XXBindings"},customProperties:t},{id:"info/stacked_combination",provide:e,instance:{view:i+"XYChartView",renderType:"stacked_combination",plot:"sap/viz/chart/components/plots/StackedCombinationPlot",family:"xy",name:"IDS_STACKEDCOMBINATIONCHART",vender:"sap.viz",bindings:a+"CombinationBindings"},customProperties:t},{id:"info/horizontal_stacked_combination",provide:e,instance:{view:i+"XYChartView",plot:"sap/viz/chart/components/plots/StackedCombinationPlot",renderType:"horizontal_stacked_combination",family:"xy",name:"IDS_HORIZONTALSTACKEDCOMBINATIONCHART",vender:"sap.viz",bindings:a+"CombinationBindings"},customProperties:t},{id:"info/dual_stacked_combination",provide:e,instance:{view:i+"XYYChartView",plot:"sap/viz/chart/components/plots/StackedCombinationPlot",renderType:"stacked_combination",family:"xyy",name:"IDS_DUALSTACKEDCOMBINATIONCHART",vender:"sap.viz",bindings:a+"XYYCombinationBindings"},customProperties:t},{id:"info/dual_horizontal_stacked_combination",provide:e,instance:{view:i+"XYYChartView",renderType:"horizontal_stacked_combination",plot:"sap/viz/chart/components/plots/StackedCombinationPlot",family:"xyy",name:"IDS_DUALHORIZONTALSTACKEDCOMBINATIONCHART",vender:"sap.viz",bindings:a+"XYYCombinationBindings"},customProperties:t},{id:"info/dual_combination",provide:e,instance:{view:i+"XYYChartView",renderType:"combination",plot:"sap/viz/chart/components/plots/CombinationPlot",family:"xyy",name:"IDS_DUALCOMBINATIONCHART",vender:"sap.viz",bindings:a+"XYYCombinationBindings"},customProperties:t},{id:"info/dual_horizontal_combination",provide:e,instance:{view:i+"XYYChartView",renderType:"horizontal_combination",plot:"sap/viz/chart/components/plots/CombinationPlot",family:"xyy",name:"IDS_DUALHORIZONTALCOMBINATIONCHART",vender:"sap.viz",bindings:a+"XYYCombinationBindings"},customProperties:t},{id:"info/timeseries_line",provide:e,instance:{view:i+"TimeYChartView",renderType:"timeseries_line",family:"ty",name:"IDS_TIMELINECHART",vender:"sap.viz",bindings:a+"TimeYBindings"},customProperties:t},{id:"info/timeseries_column",provide:e,instance:{view:i+"TimeYChartView",renderType:"timeseries_column",family:"ty",name:"IDS_TIMESERIESCOLUMNCHART",vender:"sap.viz",bindings:a+"TimeYBindings"},customProperties:t},{id:"info/timeseries_bullet",provide:e,instance:{view:i+"TimeBulletChartView",renderType:"timeseries_bullet",family:"tBullet",name:"IDS_TIMESERIESBULLETCHART",vender:"sap.viz",bindings:a+"TimeBulletBindings"},customProperties:t},{id:"info/timeseries_combination",provide:e,instance:{view:i+"TimeYChartView",renderType:"timeseries_combination",family:"ty",name:"IDS_TIMESERIESCOMBINATIONCHART",vender:"sap.viz",bindings:a+"TimeYCombinationBindings"},customProperties:t},{id:"info/dual_timeseries_combination",provide:e,instance:{view:i+"TimeYYChartView",renderType:"timeseries_combination",family:"tyy",name:"IDS_DUALTIMESERIESCOMBINATIONCHART",vender:"sap.viz",bindings:a+"TimeYYBindings"},customProperties:t},{id:"info/timeseries_stacked_combination",provide:e,instance:{view:i+"TimeYChartView",renderType:"timeseries_stacked_combination",plot:"sap/viz/chart/components/plots/TimeStackedCombinationPlot",family:"ty",name:"IDS_TIMESERIESSTACKEDCOMBINATIONCHART",vender:"sap.viz",bindings:a+"TimeYStackedCombinationBindings"},customProperties:t},{id:"info/timeseries_stacked_column",provide:e,instance:{view:i+"TimeYChartView",renderType:"timeseries_stacked_column",family:"ty",name:"IDS_TIMESERIESSTACKEDCOLUMNCHART",vender:"sap.viz",bindings:a+"TimeYBindings"},customProperties:t},{id:"info/timeseries_100_stacked_column",provide:e,instance:{view:i+"TimeYChartView",renderType:"timeseries_100_stacked_column",family:"ty",name:"IDS_TIMESERIESPERCENTSTACKEDCOLUMNCHART",vender:"sap.viz",bindings:a+"TimeYBindings"},customProperties:t},{id:"info/timeseries_scatter",provide:e,instance:{view:i+"YYChartView",renderType:"timeseries_scatter",family:"ty",name:"IDS_TIMESERIESSCATTERCHART",vender:"sap.viz",bindings:a+"YYTimeBindings"},customProperties:t},{id:"info/timeseries_bubble",provide:e,instance:{view:i+"YYChartView",renderType:"timeseries_bubble",family:"ty",name:"IDS_TIMESERIESBUBBLECHART",vender:"sap.viz",bindings:a+"YYTimeBindings"},customProperties:t},{id:"info/timeseries_waterfall",provide:e,instance:{view:i+"TimeWaterFallChartView",renderType:"timeseries_waterfall",family:"ty",name:"IDS_TIMESERIESWATERFALLCHART",vender:"sap.viz",bindings:a+"TimeYColumnBindings"},customProperties:t},{id:"info/waterfall",provide:e,instance:{view:i+"WaterFallChartView",renderType:"waterfall",family:"waterfall",name:"IDS_WATERFALLCHART",vender:"sap.viz",bindings:a+"WaterFallBindings"},customProperties:t},{id:"info/horizontal_waterfall",provide:e,instance:{view:i+"WaterFallChartView",renderType:"horizontal_waterfall",family:"waterfall",name:"IDS_HORIZONTALWATERFALLCHART",vender:"sap.viz",bindings:a+"WaterFallBindings"},customProperties:t},{id:"info/radar",provide:e,instance:{view:i+"RadarChartView",renderType:"radar",family:"radar",name:"IDS_RADARCHART",vender:"sap.viz",bindings:a+"XYBindings"},customProperties:t}]}());(function(){try{var e=require("sap/viz/framework/core/ChartViewRegistry");if(e&&e.registerAll){e.registerAll()}}catch(e){}})();(function(e){e.define=sap.viz.moduleloader.originalDefine;e.require=sap.viz.moduleloader.originalRequire;e.requirejs=sap.viz.moduleloader.originalRequirejs})(this);(function(e){var t=e.sap;var i=t&&t.viz;if(i){e.__sap_v3={};for(var a in i){if(a==="api"||a==="extapi"){if(jQuery&&jQuery.extend){e.__sap_v3[a]=jQuery.extend(true,{},i[a])}else{e.__sap_v3[a]=i[a]}}else{e.__sap_v3[a]=i[a]}}if(e.__sap_metadata){t.viz.api.metadata=e.__sap_metadata}}})(this);(function(e){var t=sap.viz;var i=e.__sap_v2;var a=e.__sap_v3;function r(e,t){var i;var a;var r=1;var o={v2:2,v3:3};return function(n,l){return function(){r*=o[n];a=l?arguments:a;i=l?i:arguments;if(r%(o.v2*o.v3)===0){var s=a&&t?t:e;if(s){s.apply(this,s===t?a:i)}r=1}}}}if(i&&a){t.api=jQuery.extend(true,{},i.api,a.api);t.extapi=jQuery.extend(true,{},i.extapi,a.extapi);t.v2=i;t.v3=a;t.extapi.Flow=a.extapi.Flow;t.api.data.CrosstableDataset=i.api.data.CrosstableDataset;t.api.data.FlatTableDataset=i.api.data.FlatTableDataset;if(i.extapi.env.Resource&&i.extapi.env.Resource.path){var o=i.extapi.env.Resource.path();for(var n in o){a.extapi.env.Resource.path(n,o[n])}}var l={};var s={};var u={};if(i.api.env.Format&&i.api.env.Format.numericFormatter){var c=i.api.env.Format.numericFormatter();a.api.env.Format.numericFormatter(c)}if(i.api.env.Format&&i.api.env.Format.useDefaultFormatter){var h=i.api.env.Format.useDefaultFormatter();a.api.env.Format.useDefaultFormatter(h)}t.api.core.createViz=function(e){var i=sap.viz.api.metadata.Viz.get(e.type)?"v3":"v2";return t[i].api.core.createViz(e)};t.api.core.loadViz=function(e,i){var a=JSON.parse(JSON.stringify(e));var r=sap.viz.api.metadata.Viz.get(param.type)?"v3":"v2";return t[r].api.core.loadViz(e,i)};t.api.env.Language.set=function(e,i,a){var o=r(i,a);t.v2.api.env.Language.set(e,o("v2"),o("v2",true));t.v3.api.env.Language.set(e,o("v3"),o("v3",true))};t.api.env.Locale.set=function(e,i,a){var o=r(i);t.v2.api.env.Locale.set(e,o("v2"));t.v3.api.env.Locale.set(e,o("v3"),a)};t.api.env.Format.numericFormatter=function(e){t.v2.api.env.Format.numericFormatter(e);t.v3.api.env.Format.numericFormatter(e)};t.api.env.Format.useDefaultFormatter=function(e){t.v2.api.env.Format.useDefaultFormatter(e);t.v3.api.env.Format.useDefaultFormatter(e)};t.api.env.Resource.path=function(e,i){t.v2.api.env.Resource.path.apply(t.v2.api.env.Resource,arguments);return t.v3.api.env.Resource.path.apply(t.v3.api.env.Resource,arguments)};t.api.env.Template.set=function(e,i,a){var o=r(i,a);t.v2.api.env.Template.set(e,o("v2"),o("v2",true));t.v3.api.env.Template.set(e,o("v3"),o("v3",true))};t.api.env.Template.load=function(e,i,a){var r=2;function o(){if(--r===0&&i){i.apply(this,arguments)}}t.v2.api.env.Template.load(e,o);t.v3.api.env.Template.load(e,o,a)};t.extapi.env.Template.isRegistered=function(e){return t.v3.extapi.env.Template.isRegistered(e)};t.extapi.env.Language.register=function(e){t.v2.extapi.env.Language.register(e);t.v3.extapi.env.Language.register(e)};t.extapi.env.Language.get=function(){t.v2.extapi.env.Language.get();return t.v3.extapi.env.Language.get()};t.extapi.env.Language.addListener=function(e){var i=r(e);var a=i("v2");var o=i("v3");u[e]={v2:a,v3:o};t.v2.extapi.env.Language.addListener(a);return t.v3.extapi.env.Language.addListener(o)};t.extapi.env.Language.removeListener=function(e){if(u[e]){t.v2.extapi.env.Language.removeListener(u[e].v2);return t.v3.extapi.env.Language.removeListener(u[e].v3)}};t.extapi.env.Language.getErrorMessage=function(e){t.v2.extapi.env.Language.getErrorMessage(e);return t.v3.extapi.env.Language.getErrorMessage(e)};t.extapi.env.Language.getResourceString=function(e){t.v2.extapi.env.Language.getResourceString(e);return t.v3.extapi.env.Language.getResourceString(e)};t.extapi.env.Locale.get=function(){t.v2.extapi.env.Locale.get();return t.v3.extapi.env.Locale.get()};t.extapi.env.Locale.addListener=function(e){var i=r(e);var a=i("v2");var o=i("v3");l[e]={v2:a,v3:o};t.v2.extapi.env.Locale.addListener(a);return t.v3.extapi.env.Locale.addListener(o)};t.extapi.env.Locale.removeListener=function(e){if(l[e]){t.v2.extapi.env.Locale.removeListener(l[e].v2);return t.v3.extapi.env.Locale.removeListener(l[e].v3)}};t.extapi.env.Template.get=function(){t.v2.extapi.env.Template.get();return t.v3.extapi.env.Template.get()};t.extapi.env.Template.current=function(){t.v2.extapi.env.Template.current();return t.v3.extapi.env.Template.current()};t.extapi.env.Template.getPackage=function(e){t.v2.extapi.env.Template.getPackage(e);return t.v3.extapi.env.Template.getPackage(e)};t.extapi.env.Template.addListener=function(e){var i=r(e);var a=i("v2");var o=i("v3");s[e]=s[e]||[];s[e].push({v2:a,v3:o,v:e});t.v2.extapi.env.Template.addListener(a);return t.v3.extapi.env.Template.addListener(o)};t.extapi.env.Template.register=function(e){t.v2.extapi.env.Template.register(e);t.v3.extapi.env.Template.register(e)};t.api.env.Template.addListener=function(e){var i=r(e);var a=i("v2");var o=i("v3");s[e]=s[e]||[];s[e].push({v2:a,v3:o,v:e});t.v2.api.env.Template.addListener(a);return t.v3.api.env.Template.addListener(o)};t.api.env.Template.removeListener=function(e){var i=s[e],a;if(i){for(var r=0;r<i.length;r++){if(i[r].v===e){t.v2.api.env.Template.removeListener(i[r].v2);a=t.v3.api.env.Template.removeListener(i[r].v3);i.splice(r,1);break}}}return a};t.extapi.env.Template.removeListener=function(e){var i=s[e],a;if(i){for(var r=0;r<i.length;r++){if(i[r].v===e){t.v2.extapi.env.Template.removeListener(i[r].v2);a=t.v3.extapi.env.Template.removeListener(i[r].v3);i.splice(r,1);break}}}return a};t.extapi.core.registerBundle=function(e){t.v2.extapi.core.registerBundle(e);return t.v3.extapi.core.registerBundle(e)}}if(sap&&sap.viz&&sap.viz.framework&&sap.viz.framework.core&&sap.viz.framework.core.ChartViewRegistry){delete sap.viz.framework.core.ChartViewRegistry;function p(e){for(var t in e){if(e.hasOwnProperty(t)){return false}}return true}if(p(sap.viz.framework.core)){delete sap.viz.framework.core}if(p(sap.viz.framework)){delete sap.viz.framework}}})(this);