/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/i18n/ResourceBundle","./MessageQueueUtil","sap/m/MessageBox","sap/ui/base/Object"],function(e,t,a,n,i){"use strict";var o=i.extend("sap.collaboration.components.utils.CommonUtil",{constructor:function(){this.MessageQueueUtil=new a},getLanguageBundle:function(){if(!this.oLangBundle){var e=sap.ui.getCore().getConfiguration().getLanguage();this.oLangBundle=t.create({url:sap.ui.require.toUrl("sap/collaboration/components/resources/i18n/messagebundle.properties"),locale:e})}return this.oLangBundle},displayError:function(e){var t=this;var a="";var i={icon:n.Icon.ERROR,title:t.getLanguageBundle().getText("SYSTEM_ERROR_MESSAGEBOX_TITLE")};if(!e||e===""){a=t.getLanguageBundle().getText("SYSTEM_ERROR_MESSAGEBOX_GENERAL_TEXT")}else{a=e}this.MessageQueueUtil.displayMessage(a,i,"MBox")},showMessage:function(e,t){this.MessageQueueUtil.displayMessage(e,t,"MToast")},isValidDate:function(t){if(Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime())){e.error("DateUtils invalid date="+t);return false}return true},isString:function(e){return Object.prototype.toString.call(e)==="[object String]"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"},isArrayOfStrings:function(e){var t;if(Array.isArray(e)){for(t in e){if(!this.isString(e[t])){return false}}return true}else{return false}},getIconFromMimeType:function(e){var t="";if(!e){return"sap-icon://document"}if(e.indexOf("image")===0){t="sap-icon://attachment-photo"}else if(e.indexOf("video")===0){t="sap-icon://attachment-video"}else if(e.indexOf("text")===0){t="sap-icon://attachment-text-file"}else if(e.indexOf("audio")===0){t="sap-icon://attachment-audio"}else if(e.indexOf("application")===0){switch(e){case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.template":t="sap-icon://ppt-attachment";break;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":t="sap-icon://doc-attachment";break;case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":t="sap-icon://excel-attachment";break;case"application/pdf":t="sap-icon://pdf-attachment";break;case"application/xhtml+xml":t="sap-icon://attachment-html";break;case"application/zip":case"application/gzip":t="sap-icon://attachment-zip-file";break;default:t="sap-icon://document"}}else{t="sap-icon://document"}return t},areArraysEqual:function(e,t){var a=function(e,t){var a=true;for(var n in e){if(e[n]!==t[n]){a=false;break}}return a};if(e.length!==t.length){return false}for(var n=0;n<e.length;n++){if(!a(e[n],t[n])){return false}}return true},b64toBlob:function(e,t,a){t=t||"";a=a||512;var n=window.atob(e);var i=[];for(var o=0;o<n.length;o+=a){var r=n.slice(o,o+a);var s=new Array(r.length);for(var c=0;c<r.length;c++){s[c]=r.charCodeAt(c)}var l=new window.Uint8Array(s);i.push(l)}var p=new window.Blob(i,{type:t});return p},getODataResult:function(e){return e.results?e.results:e}});return o});