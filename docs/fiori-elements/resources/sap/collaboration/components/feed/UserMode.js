/*
* ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
*/
sap.ui.define(["./Mode"],function(e){"use strict";var t=e.extend("sap.collaboration.components.feed.UserMode",{constructor:function(t){e.apply(this,[t]);this._oList.setModel(this._oJamModel)}});t.prototype.start=function(){this._oList.attachUpdateFinished(this.onGroupSelectorUpdateFinished,this);this._oList.attachUpdateFinished(this.onUpdateFinished,this);this._oList.bindItems({path:"/Groups",template:this._oListItemTemplate});this._oFeedController.enableGroupFeed()};t.prototype.stop=function(){this._oList.detachUpdateFinished(this.onUpdateFinished,this)};t.prototype._updateSelectedGroupInViewDataModel=function(e){this._oViewDataModel.setProperty("/groupSelected",{Id:e.Id,Name:e.Name,WebURL:e.WebURL});this._oViewDataModel.setProperty("/feedEndpoint","/Groups('"+e.Id+"')/FeedEntries")};t.prototype.getAddPostPath=function(){return"/Groups('"+this._oViewDataModel.getProperty("/groupSelected/Id")+"')/FeedEntries"};t.prototype.displayFeedSourceSelectorPopover=function(e){this._oList.setBusy(true);this._oJamModel.refresh(true);this._oGroupSelectPopover.openBy(e)};t.prototype.onGroupSelected=function(e){var t=e.getSource().getSelectedItem().getBindingContext().getObject();this._updateSelectedGroupInViewDataModel(t);this._oGroupSelectPopover.close()};t.prototype.onBatchCompleted=function(){};t.prototype.onGroupSelectorUpdateFinished=function(){var e=this._oList.getItems();var t;var o;if(e.length>0){t=e[0];this._oList.setSelectedItem(t);o=t.getBindingContext().getObject();this._updateSelectedGroupInViewDataModel(o)}this._oList.detachUpdateFinished(this.onGroupSelectorUpdateFinished,this)};t.prototype.onUpdateFinished=function(){this._oList.setBusy(false)};return t});