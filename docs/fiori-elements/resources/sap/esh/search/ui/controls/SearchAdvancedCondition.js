/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/ui/layout/HorizontalLayout","sap/m/Button","sap/m/library","sap/m/Input","sap/m/Select","sap/m/CheckBox","sap/m/DateRangeSelection","sap/ui/core/InvisibleText","sap/ui/core/Item","sap/m/Label","../SearchFacetDialogHelper"],function(e,t,a,n,r,o,l,i,s,c,d,u){function g(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function p(e,t){var a=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=h(e))||t&&e&&typeof e.length==="number"){if(a)e=a;var n=0;var r=function(){};return{s:r,n:function(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,l=false,i;return{s:function(){a=a.call(e)},n:function(){var e=a.next();o=e.done;return e},e:function(e){l=true;i=e},f:function(){try{if(!o&&a.return!=null)a.return()}finally{if(l)throw i}}}}function h(e,t){if(!e)return;if(typeof e==="string")return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor)a=e.constructor.name;if(a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}function f(e,t){if(t==null||t>e.length)t=e.length;for(var a=0,n=new Array(t);a<t;a++){n[a]=e[a]}return n}var C=g(e);var v=n["ButtonType"];var y=g(u);var S=t.extend("sap.esh.search.ui.controls.SearchAdvancedCondition",{renderer:{apiVersion:2},metadata:{properties:{type:{type:"string"}}},constructor:function e(a,n){t.prototype.constructor.call(this,a,n);this.setAllowWrapping(n===null||n===void 0?void 0:n.allowWrapping);this.addStyleClass("sapUshellSearchFacetDialogDetailPageCondition");if(n!==null&&n!==void 0&&n.type){var r=this.contentFactory(n);var o=p(r),l;try{for(o.s();!(l=o.n()).done;){var i=l.value;this.addContent(i)}}catch(e){o.e(e)}finally{o.f()}}},contentFactory:function e(n){var u=this;var g=new l("",{select:function e(t){y.updateCountInfo(u.getDetailPage(t.getSource()))}}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionCheckBox");var p=sap.ui.getCore().byId("advancedCheckBoxLabel");if(!p){p=new s("advancedCheckBoxLabel",{text:C.getText("checkBox")})}g.addAriaLabelledBy("advancedCheckBoxLabel");var h=sap.ui.getCore().byId("operatorLabel");if(!h){h=new s("operatorLabel",{text:C.getText("operator")})}var f,S,w,D;switch(n.type){case"timestamp":case"date":f=new i({width:"86%",change:function e(t){u.onDateRangeSelectionChange(t)}}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionInput");f.onAfterRendering=function(){var e=$(this.getDomRef());$("input",e).attr("readonly","readonly")};break;case"string":g.setVisible(false);w=new r({width:"56%",placeholder:C.getText("filterCondition"),liveChange:function e(t){u.onAdvancedInputChange(t)}}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionInput");D=new o({width:"40%",tooltip:C.getText("operator"),items:[new c({text:C.getText("equals"),key:"eq"}),new c({text:C.getText("beginsWith"),key:"bw"}),new c({text:C.getText("endsWith"),key:"ew"}),new c({text:C.getText("contains"),key:"co"})]}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionSelect");D.addAriaLabelledBy("operatorLabel");f=new t({allowWrapping:true,content:[D,w]});S=new a({icon:"sap-icon://sys-cancel",type:v.Transparent,tooltip:C.getText("removeButton"),press:function e(){u.onDeleteButtonPress()}});break;case"text":g.setVisible(false);w=new r({width:"56%",placeholder:C.getText("filterCondition"),liveChange:function e(t){u.onAdvancedInputChange(t)}}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionInput");D=new o({width:"40%",tooltip:C.getText("operator"),items:[new c({text:C.getText("containsWords"),key:"co"})]}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionSelect");D.addAriaLabelledBy("operatorLabel");f=new t({allowWrapping:true,content:[D,w]});S=new a({icon:"sap-icon://sys-cancel",type:v.Transparent,tooltip:C.getText("removeButton"),press:function e(){u.onDeleteButtonPress()}});break;case"integer":case"number":{var b=new r("",{width:"46.5%",placeholder:C.getText("fromPlaceholder"),liveChange:function e(t){u.onAdvancedNumberInputChange(t)}}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionInput");var P=new r("",{width:"46.5%",placeholder:C.getText("toPlaceholder"),liveChange:function e(t){u.onAdvancedNumberInputChange(t)}}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionInput");var x=new d("",{text:C.getText("threeDots")}).addStyleClass("sapUshellSearchFacetDialogDetailPageConditionLabel");f=new t("",{allowWrapping:true,content:[b,x,P]});f.addEventDelegate({onAfterRendering:function e(t){var a=t.srcControl.getParent().getParent().getContent().length;var n=t.srcControl.getParent().getParent().indexOfAggregation("content",t.srcControl.getParent());if(n===a-2){var r=t.srcControl.getContent()[2].getValue();t.srcControl.getContent()[2].setValue();t.srcControl.getContent()[2].setValue(r)}}});break}default:break}return[g,f,S]},getDetailPage:function e(t){if(t.hasStyleClass&&(t.hasStyleClass("sapUshellSearchFacetDialogDetailPageString")||t.hasStyleClass("sapUshellSearchFacetDialogDetailPage"))){return t}else{return this.getDetailPage(t.getParent())}},onDateRangeSelectionChange:function e(t){var a=t.getSource();var n=a.getParent();var r=n.getContent()[0];if(a.getDateValue()&&a.getSecondDateValue()){r.setSelected(true);y.insertNewAdvancedCondition(n,"date");y.updateCountInfo(n.getParent().getParent())}else{r.setSelected(false)}},onAdvancedInputChange:function e(t){var a=t.getSource();var n=a.getParent().getParent();var r=n.getContent()[0];if(a.getValue()){r.setSelected(true);y.updateCountInfo(this.getDetailPage(r))}else{r.setSelected(false)}},onDeleteButtonPress:function e(){y.deleteAdvancedCondition(this)},onAdvancedNumberInputChange:function e(t){var a=t.getSource();var n=a.getParent().getParent();var r=n.getContent()[0];var o=a.getParent();var l=o.getContent()[0];var i=o.getContent()[2];if(l.getValue()&&i.getValue()){r.setSelected(true);y.insertNewAdvancedCondition(n,"number");y.updateCountInfo(n.getParent().getParent())}else{r.setSelected(false)}}});S.injectSearchFacetDialogHelper=function e(t){S.searchFacetDialogHelper=t};return S})})();