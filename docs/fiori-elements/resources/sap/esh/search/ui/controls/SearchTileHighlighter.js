/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/esh/search/ui/SearchHelper","sap/base/security/encodeXML"],function(e,t){function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function r(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);Object.defineProperty(e,"prototype",{writable:false});return e}var h=e["Tester"];var o=e;var a=function(){function e(){i(this,e);this._softHyphenRegExp=new RegExp("[Â­]","g")}r(e,[{key:"setHighlightTerms",value:function e(t){this.tester=new h(t,"sapUshellSearchHighlight",true,"or")}},{key:"highlight",value:function e(t){var i=t.getDomRef();if(!i){return}var n=sap.ui.core.hyphenation.Hyphenation.getInstance();if(!n.isLanguageInitialized()){n.initialize().then(function(){this.doHighlight(i)}.bind(this),function(){this.doHighlight(i)}.bind(this))}else{this.doHighlight(i)}}},{key:"doHighlight",value:function e(t){if(t.nodeType===window.Node.TEXT_NODE){this.highlightTextNode(t);return}for(var i=0;i<t.childNodes.length;++i){var n=t.childNodes[i];this.doHighlight(n)}}},{key:"removeSoftHyphens",value:function e(t){return t.replace(this._softHyphenRegExp,"")}},{key:"highlightTextNode",value:function e(i){var n=this.tester.test(this.removeSoftHyphens(i.textContent));if(!n.bMatch){return}var r=document.createElement("span");r.innerHTML=t(n.sHighlightedText);o.boldTagUnescaper(r,"sapUshellSearchHighlight");i.parentNode.insertBefore(r,i);i.parentNode.removeChild(i)}}]);return e}();var s={__esModule:true};s.Highlighter=a;return s})})();