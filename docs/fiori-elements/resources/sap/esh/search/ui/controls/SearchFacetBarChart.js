/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/ComparisonMicroChartData","sap/ui/core/Control","sap/m/library"],function(e,t,r,a,o){function n(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function i(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var a=0;var o=function(){};return{s:o,n:function(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,i=false,l;return{s:function(){r=r.call(e)},n:function(){var e=r.next();n=e.done;return e},e:function(e){i=true;l=e},f:function(){try{if(!n&&r.return!=null)r.return()}finally{if(i)throw l}}}}function s(e,t){if(!e)return;if(typeof e==="string")return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}function l(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,a=new Array(t);r<t;r++){a[r]=e[r]}return a}var c=n(e);"sap/suite/ui/microchart/ComparisonMicroChart";var u=o["ValueColor"];var f=a.extend("sap.esh.search.ui.controls.SearchFacetBarChart",{renderer:{apiVersion:2,render:function e(r,a){var o;r.openStart("div",a);r.openEnd();var n=new t("",{width:"90%",colorPalette:[],tooltip:"",shrinkable:true});if((o=a.options)!==null&&o!==void 0&&o.oSearchFacetDialog){n.setWidth("95%");n.addStyleClass("sapUshellSearchFacetBarChartLarge")}else{n.addStyleClass("sapUshellSearchFacetBarChart")}n.addEventDelegate({onAfterRendering:function(){$("#"+this.getId()).has(".Good").addClass("sapUshellSearchFacetBarChartSelected")}.bind(a)});var s=a.getAggregation("items");var l=a.getProperty("aItems");if(s.length===0&&l){s=l}var c=0;var u=i(s),f;try{for(u.s();!(f=u.n()).done;){var h=f.value;if(!a.options.oSearchFacetDialog){if(h.getProperty("value")){n.addData(h)}else{c++}}else{n.addData(h)}}}catch(e){u.e(e)}finally{u.f()}a.iMissingCnt=c;r.renderControl(n);r.close("div")}},metadata:{properties:{aItems:{type:"object"},oSearchFacetDialog:{type:"sap.esh.search.ui.controls.SearchFacetDialog"}},aggregations:{items:{type:"sap.suite.ui.microchart.ComparisonMicroChartData",multiple:true}}},constructor:function e(t,o){var n=this;a.prototype.constructor.call(this,t,o);this.options=o||{};this.bindAggregation("items",{path:"items",factory:function e(){var t=new r({title:{path:"label"},value:{path:"value"},color:{path:"selected",formatter:function e(t){var r;if(t){r=u.Good}else{r=u.Neutral}return r}},tooltip:{parts:[{path:"label"},{path:"value"}],formatter:function e(t,r){return t+": "+r}},displayValue:{path:"valueLabel"},press:function e(t){var r=t.getSource().getBindingContext();var a=r.getModel();var o=r.getObject();var i=o.selected;var s=o.filterCondition;if(i){if(n.options.oSearchFacetDialog){n.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(t)}else{a.removeFilterCondition(s,true)}}else if(n.options.oSearchFacetDialog){n.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(t)}else{a.addFilterCondition(s,true)}}});return t}})},setEshRole:function e(t){},onAfterRendering:function e(){var t=$(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];var r=sap.ui.getCore().byId(t.id);if(this.iMissingCnt>0){r.setVisible(true);var a=c.getText("infoZeileNumberMoreSelected",[this.iMissingCnt]);r.setText(a);r.rerender()}else{r.setVisible(false)}}});return f})})();