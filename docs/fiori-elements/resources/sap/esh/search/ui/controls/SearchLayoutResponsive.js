/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/ui/layout/ResponsiveSplitter","sap/ui/layout/SplitterLayoutData","sap/m/ScrollContainer","sap/m/VBox","sap/m/BusyDialog","sap/ui/layout/SplitPane","sap/ui/layout/PaneContainer","sap/ui/core/library","sap/m/Text","../UIEvents","./SearchResultList","sap/ui/layout/VerticalLayout"],function(e,t,n,a,i,o,r,s,l,u,h,f){function p(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function d(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var a=0;var i=function(){};return{s:i,n:function(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,r=false,s;return{s:function(){n=n.call(e)},n:function(){var e=n.next();o=e.done;return e},e:function(e){r=true;s=e},f:function(){try{if(!o&&n.return!=null)n.return()}finally{if(r)throw s}}}}function c(e,t){if(!e)return;if(typeof e==="string")return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}function g(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,a=new Array(t);n<t;n++){a[n]=e[n]}return a}var C=s["Orientation"];var y=p(u);var _=p(h);var v=e.extend("sap.esh.search.ui.controls.SearchLayoutResponsive",{renderer:{apiVersion:2},metadata:{properties:{searchIsBusy:{type:"boolean"},busyDelay:{type:"int"},showFacets:{type:"boolean"},showFooter:{type:"boolean"},facetPanelResizable:{type:"boolean",defaultValue:false},facetPanelWidthInPercent:{type:"int",defaultValue:25},facetPanelMinWidth:{type:"int",defaultValue:288},animateFacetTransition:{type:"boolean",defaultValue:false},resultContainer:{type:"sap.ui.core.Control",multiple:false}},aggregations:{facetPanelContent:{type:"sap.ui.core.Control",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}}},constructor:function i(s,u){var h=this;e.prototype.constructor.call(this,s,u);var f=new a("",{items:[new l]});this._paneLeftContent=new o({requiredParentWidth:10,content:f});this._paneLeftContainer=new r({orientation:C.Vertical,panes:[this._paneLeftContent]});var p=new n("",{height:"100%",vertical:true});var d=new a("",{items:[p]});this._paneRightContent=new o({requiredParentWidth:10,content:d});var c=new a;c.addStyleClass("sapUiNoMarginBottom");this._paneRightHeader=new o({requiredParentWidth:10,content:c});this._paneRightContainer=new r({orientation:C.Vertical,panes:[this._paneRightHeader,this._paneRightContent]});this._paneLeftContainer.setLayoutData(new t({size:"0%",resizable:false}));this._paneRightHeader.setLayoutData(new t({size:"0%",resizable:false}));var g=new a("",{items:[]});this._paneMainContainer=new r({orientation:C.Horizontal,panes:[this._paneLeftContainer,this._paneRightContainer],resize:function e(){h.triggerUpdateLayout()}});this._paneMainFooter=new o({requiredParentWidth:10,content:g});this._paneMainContainer.setLayoutData(new t({size:"100%",resizable:false}));this._paneMainFooter.setLayoutData(new t({size:"0%",resizable:false}));var y=new r({orientation:C.Vertical,panes:[this._paneMainContainer,this._paneMainFooter]});this.setRootPaneContainer(y);this.setDefaultPane(this._paneRightContent)},getFacetPanelContent:function e(){var t=this._paneLeftContent;if(t!==null&&t!==void 0&&t.getContent()){return t.getContent()}return undefined},setFacetPanelContent:function e(t){this._facetPanelContent=t;var n=this._paneLeftContent;if(n){this._paneLeftContainer.removeAllPanes();n.setContent(t);this._paneLeftContainer.addPane(n)}},getFooter:function e(){var t=this._paneMainFooter;if(t!==null&&t!==void 0&&t.getContent()){return t.getContent()}return undefined},setFooter:function e(t){this._footer=t;var n=this._paneMainFooter;if(n){this.getRootPaneContainer().removeAllPanes();n.setContent(t);this.getRootPaneContainer().addPane(this._paneMainContainer);this.getRootPaneContainer().addPane(n)}},getResultContainer:function e(){var t=this._paneRightContent.getContent();if(t){return t}return undefined},setResultContainer:function e(t){this._resultContainer=t;if(this._paneRightContent){this._paneRightContainer.removeAllPanes();this._paneRightContent.setContent(t);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}},setSearchIsBusy:function e(t){var n=this;if(t){if(this._busyFlag){return}if(this._busyTimeout){return}this._busyTimeout=setTimeout(function(){n._busyTimeout=null;n._setIsBusy(t)},this.getProperty("busyDelay"))}else{if(this._busyFlag){this._setIsBusy(t);return}if(this._busyTimeout){clearTimeout(this._busyTimeout);this._busyTimeout=null;return}}},_setIsBusy:function e(t){var n=this.getModel();if(t){if(n.config.isUshell){if(!this._busyIndicatorModal){this._busyIndicatorModal=new i}this._busyIndicatorModal.open()}else{this.setBusyIndicatorDelay(0);this.setBusy(true)}this._busyFlag=true}else if(this._busyFlag){if(n.config.isUshell){if(this._busyIndicatorModal){this._busyIndicatorModal.close()}}else{this.setBusy(false)}this._busyFlag=false}this.setProperty("searchIsBusy",t,true)},setShowFacets:function e(t){var n;var i=this.getModel();if(!this._paneRightContainer){return}if(!this.getResultContainer()){return}var o=this._paneRightHeader.getContent();var r=this._resultContainer.getAggregation("contextBarContainer");if(r&&r instanceof f){r.addStyleClass("sapElisaSearchContainerCountBreadcrumbs");if(i.config.optimizeForValueHelp){r.addStyleClass("sapElisaSearchContainerCountBreadcrumbsValueHelp")}if(o instanceof a&&o.getItems().length===0||this._paneRightHeader.getContent()!==r){this._paneRightContainer.removeAllPanes();this._paneRightHeader.setContent(r);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}}var s=(n=this._footer)===null||n===void 0?void 0:n.getVisible();this.updateLayout(t,s);return this},setShowFooter:function e(t){if(!this._paneMainFooter){return}if(!this.getResultContainer()){return}var n=this===null||this===void 0?void 0:this._paneLeftContainer.getLayoutData();var a=n.getProperty("size").replace("%","");var i=parseInt(a);var o=i>0;this.updateLayout(o,t);return this},setFacetPanelWidthInPercent:function e(t){this.setProperty("facetPanelWidthInPercent",t,true);this._facetPanelWidthSizeIsOutdated=true;return this},triggerUpdateLayout:function e(){var t;var n=this===null||this===void 0?void 0:this._paneLeftContainer.getLayoutData();var a=n.getProperty("size").replace("%","");var i=parseInt(a);var o=i>0;var r=(t=this._footer)===null||t===void 0?void 0:t.getVisible();this.updateLayout(o,r)},updateLayout:function e(i,o){var r,s,u=this;var h=this._paneLeftContent;if((h===null||h===void 0?void 0:h.getContent())instanceof a){var f=h.getContent().getItems();if((f===null||f===void 0?void 0:f.length)>0&&f[0]instanceof l){this._paneLeftContainer.removeAllPanes();h.setContent(this._facetPanelContent);this._paneLeftContainer.addPane(h)}}if(((r=this._paneRightContent)===null||r===void 0?void 0:r.getContent())instanceof a){var p=this._paneRightContent.getContent().getItems();if((p===null||p===void 0?void 0:p.length)>0&&p[0]instanceof n){if(p[0].getContent().length===0){this._paneRightContainer.removeAllPanes();this._paneRightContent.setContent(this._resultContainer);this._paneRightContainer.addPane(this._paneRightHeader);this._paneRightContainer.addPane(this._paneRightContent)}}}if(this._facetPanelContent){if(this.getProperty("animateFacetTransition")){this._facetPanelContent.addStyleClass("sapUshellSearchFacetAnimation")}else{this._facetPanelContent.removeStyleClass("sapUshellSearchFacetAnimation")}}var c=this._paneRightHeader.getContent();var g=c.getContent();var C=0;var v=d(g),P;try{for(v.s();!(P=v.n()).done;){var m=P.value;if(m.getVisible()&&m.getDomRef()){C+=m.getDomRef().getBoundingClientRect().height}}}catch(e){v.e(e)}finally{v.f()}var R=this.convertPixelToRem(C);this._paneRightHeader.setLayoutData(new t({size:"".concat(R,"rem"),resizable:false}));if(this!==null&&this!==void 0&&(s=this._paneLeftContent)!==null&&s!==void 0&&s.getContent()){var b;var z=this===null||this===void 0?void 0:this._paneLeftContainer.getLayoutData();if(!i){this._paneLeftContainer.setLayoutData(new t({size:"0%",minSize:0,resizable:false}))}else{var L=this.getModel();var w=this.getProperty("facetPanelMinWidth");if(L.config.optimizeForValueHelp){b=.01;w=0}else if(this._facetPanelWidthSizeIsOutdated){b=this.getProperty("facetPanelWidthInPercent");this._facetPanelWidthSizeIsOutdated=false}else{b=parseInt(z.getProperty("size").replace("%",""));if(b<1){if(this._previousFacetPanelWidthSize){b=this._previousFacetPanelWidthSize}else{b=this.getProperty("facetPanelWidthInPercent")}}}this._paneLeftContainer.setLayoutData(new t({size:b+"%",minSize:w,resizable:this.getProperty("facetPanelResizable")}));this._previousFacetPanelWidthSize=b}}var F=this._paneMainFooter.getContent();if(typeof F["getItems"]==="function"&&F["getItems"]().length===0&&typeof this._footer!=="undefined"){this.getRootPaneContainer().removeAllPanes();this._paneMainFooter.setContent(this._footer);this.getRootPaneContainer().addPane(this._paneMainContainer);this.getRootPaneContainer().addPane(this._paneMainFooter)}if(o&&window.document.getElementById(this._paneMainContainer.getParent().getParent().getId())){var S=52;var I=window.document.getElementById(this._paneMainContainer.getParent().getParent().getId()).getBoundingClientRect().height;var M=I-S;this._paneMainContainer.setLayoutData(new t({size:"".concat(M,"px"),resizable:false}));this._paneMainFooter.setLayoutData(new t({size:"".concat(S,"px"),resizable:false}))}else{this._paneMainContainer.setLayoutData(new t({size:"100%",resizable:false}));this._paneMainFooter.setLayoutData(new t({size:"0%",resizable:false}))}var D=function e(){u.getModel().notifySubscribers(y.ESHSearchLayoutChanged)};var T=this._resultContainer.getAggregation("centerArea");var B=d(T),V;try{var A=function e(){var t=V.value;if(t instanceof _){if(u._postponedResultViewResizeTimer){clearTimeout(u._postponedResultViewResizeTimer)}u._postponedResultViewResizeTimer=setTimeout(function(){return t.resize()},10)}};for(B.s();!(V=B.n()).done;){A()}}catch(e){B.e(e)}finally{B.f()}var W=jQuery(".sapUiFixFlexFixed");W.one("transitionend",D)},convertRemToPixel:function e(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)},convertPixelToRem:function e(t){return t/parseFloat(getComputedStyle(document.documentElement).fontSize)}});return v})})();