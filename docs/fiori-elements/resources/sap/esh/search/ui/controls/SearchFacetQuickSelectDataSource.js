/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/m/List","sap/m/StandardListItem","sap/m/library","sap/ui/core/CustomData","sap/m/Tree","sap/m/CustomListItem","./SearchFacetHierarchyStaticTreeItem","sap/m/Label","sap/ui/core/Icon"],function(e,t,r,a,n,i,c,o,s){function u(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var d=r["ListSeparators"];var l=r["ListMode"];var h=r["ListType"];var p=u(c);var f=e.extend("sap.esh.search.ui.controls.SearchFacetQuickSelectDataSource",{renderer:{apiVersion:2},constructor:function t(r,a){var n=this;e.prototype.constructor.call(this,r,a);this.setShowSeparators(d.None);this.setMode(l.SingleSelectMaster);this.attachItemPress(function(e){var t=e.getParameter("srcControl");var r=t.getBindingContext().getObject();n.handleSelectDataSource(r.dataSource)});this.bindItems({path:"items",factory:function e(t,r){var a=r.getObject();if(a.type==="quickSelectDataSourceTreeNode"){return n.createTree()}else{return n.createListItem()}}});this.addStyleClass("sapUshellSearchFacet")},handleSelectDataSource:function e(t){var r=this.getModel();if(r.config.bResetSearchTermOnQuickSelectDataSourceItemPress){r.setSearchBoxTerm("",false)}if(typeof r.config.cleanUpSpaceFilters==="function"){r.config.cleanUpSpaceFilters(r)}r.setDataSource(t)},createTree:function e(){this.tree=new n({mode:l.None,includeItemInSelection:true,items:{path:"children",factory:this.createTreeItem.bind(this)},toggleOpenState:function e(t){t.getParameter("itemContext").getObject().toggleExpand()}});var t={onAfterRendering:function(){this.expandTreeNodes()}.bind(this)};this.addEventDelegate(t,this);return new i({content:this.tree})},expandTreeNodes:function e(){var t=this.getBindingContext().getObject();var r=t.items[0];this.expandTreeNodeRecursively(r,true)},expandTreeNodeRecursively:function e(t,r){if(t.expanded&&!r){this.doExpandTreeNode(t)}if(!t.children){return}for(var a=0;a<t.children.length;++a){var n=t.children[a];this.expandTreeNodeRecursively(n)}},doExpandTreeNode:function e(t){var r=this.tree.getItems();for(var a=0;a<r.length;++a){var n=r[a];var i=n.getBindingContext().getObject();if(i===t){this.tree.expand(a);return}}},createTreeItem:function e(t,r){var a=this;var n=[];var i=r.getObject().icon;if(i){var c=new s("",{src:"{icon}"});c.addStyleClass("sapUiTinyMarginEnd");n.push(c)}var u=new o({text:"{label}"});u.attachBrowserEvent("click",function(){a.handleSelectDataSource(r.getObject().getDataSource())});n.push(u);var d=new p("",{content:n,selectLine:{parts:["/queryFilter","dataSourceId"],formatter:function e(t,r){return t.dataSource.id===r}}});return d},createListItem:function e(){return new t("",{type:h.Active,title:"{dataSource/label}",tooltip:"{dataSource/label}",icon:"{dataSource/icon}",customData:[new a({key:"test-id-collection",value:"{dataSource/label}",writeToDom:true})],selected:{parts:[{path:"/queryFilter"},{path:"dataSource"}],formatter:function e(t,r){return t.dataSource===r}}})}});return f})})();