/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){function e(){}function t(t,r){if(!r){return t&&t.then?t.then(e):Promise.resolve()}}function r(t){var r=t();if(r&&r.then){return r.then(e)}}function n(e,t,r){if(r){return t?t(e):e}if(!e||!e.then){e=Promise.resolve(e)}return t?e.then(t):e}function o(e,t){if(e)throw t;return t}function i(e,t){try{var r=e()}catch(e){return t(true,e)}if(r&&r.then){return r.then(t.bind(null,false),t.bind(null,true))}return t(false,r)}function u(t){if(t&&t.then){return t.then(e)}}sap.ui.define(["../BusyIndicator"],function(e){function a(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var n=0;var o=function(){};return{s:o,n:function(){if(n>=e.length)return{done:true};return{done:false,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,u=false,a;return{s:function(){r=r.call(e)},n:function(){var e=r.next();i=e.done;return e},e:function(e){u=true;a=e},f:function(){try{if(!i&&r.return!=null)r.return()}finally{if(u)throw a}}}}function f(e,t){if(!e)return;if(typeof e==="string")return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}function c(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r){if(v()){s=Reflect.construct.bind()}else{s=function e(t,r,n){var o=[null];o.push.apply(o,r);var i=Function.bind.apply(t,o);var u=new i;if(n)d(u,n.prototype);return u}}return s.apply(null,arguments)}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return d(e,t)}function y(e){var t=v();return function r(){var n=b(e),o;if(t){var i=b(this).constructor;o=Reflect.construct(n,arguments,i)}else{o=n.apply(this,arguments)}return h(this,o)}}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return p(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function N(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function w(e,t,r){if(t)T(e.prototype,t);if(r)T(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var g=e["DummyBusyIndicator"];var P=w(function e(t,r){m(this,e);this.rootTreeNodePath=t;this.testMode=r});var O=function(e){l(c,e);var f=y(c);function c(e){var t;var r;m(this,c);r=f.call(this,e.rootTreeNodePath,e.testMode);N(p(r),"treeNodeMap",{});N(p(r),"treeViews",[]);r.rootTreeNodePath=e.rootTreeNodePath;r.model=e.model;r.treeNodeConstructor=e.treeNodeConstructor;r.busyIndicator=(t=e.busyIndicator)!==null&&t!==void 0?t:new g;return r}w(c,[{key:"createRootTreeNode",value:function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r[0].expandable=true;r[0].expanded=true;this.rootTreeNode=this.createTreeNode.apply(this,r);this.registerTreeNode(this.rootTreeNode);return this.rootTreeNode}},{key:"createTreeNode",value:function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var o=s(this.treeNodeConstructor,r);return o}},{key:"createTempTreeNode",value:function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var o=s(this.treeNodeConstructor,r);return o}},{key:"registerTreeNode",value:function e(t){if(this.treeNodeMap[t.id]){throw"duplicate tree id"+t.id}t.setTreeNodeFactory(this);this.treeNodeMap[t.id]=t}},{key:"deRegisterTreeNode",value:function e(t){t.setTreeNodeFactory(null);delete this.treeNodeMap[t.id]}},{key:"getTreeNode",value:function e(t){return this.treeNodeMap[t]}},{key:"setRootTreeNodePath",value:function e(t){this.rootTreeNodePath=t}},{key:"updateUI",value:function e(){this.model.setProperty(this.rootTreeNodePath,{childTreeNodes:[]});this.model.setProperty(this.rootTreeNodePath,this.rootTreeNode);var t=a(this.treeViews),r;try{for(t.s();!(r=t.n()).done;){var n=r.value;n.expandTreeNodes()}}catch(e){t.e(e)}finally{t.f()}}},{key:"setBusy",value:function e(t){this.busyIndicator.setBusy(t)}},{key:"registerTreeView",value:function e(t){this.treeViews.push(t)}},{key:"deRegisterTreeView",value:function e(t){var r=this.treeViews.indexOf(t);if(r>=0){this.treeViews.splice(r,1)}}},{key:"getRootTreeNode",value:function e(){return this.rootTreeNode}},{key:"updateRecursively",value:function e(a){try{const e=this;return n(u(i(function(){e.setBusy(true);return n(e.rootTreeNode.updateRecursively(),function(){return r(function(){if(a){return t(e.updateUI())}})})},function(t,r){e.setBusy(false);return o(t,r)})))}catch(e){return Promise.reject(e)}}},{key:"delete",value:function e(){this.getRootTreeNode()["delete"]()}}],[{key:"create",value:function e(t){var r=new c(t);return r}}]);return c}(P);O.BaseTreeNodeFactory=P;return O})})();