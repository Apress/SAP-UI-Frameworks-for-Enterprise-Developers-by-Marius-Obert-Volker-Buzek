/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./error/ErrorHandler","./i18n","sap/ui/model/resource/ResourceModel","sap/esh/search/ui/controls/SearchFieldGroup","sap/esh/search/ui/SearchModel","sap/esh/search/ui/controls/SearchLayoutResponsive","sap/esh/search/ui/controls/SearchResultContainer","sap/esh/search/ui/controls/SearchResultList","sap/esh/search/ui/controls/SearchResultTable","sap/esh/search/ui/controls/SearchResultGrid","sap/esh/search/ui/controls/SearchSpreadsheet","sap/esh/search/ui/controls/SearchText","sap/esh/search/ui/controls/SearchLink","sap/esh/search/ui/controls/SearchCountBreadcrumbs","sap/esh/search/ui/controls/SearchResultListItem","sap/esh/search/ui/controls/CustomSearchResultListItem","sap/esh/search/ui/controls/SearchTileHighlighter","sap/esh/search/ui/controls/SearchFilterBar","sap/esh/search/ui/controls/SearchFacetFilter","sap/esh/search/ui/SearchHelper","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/layout/VerticalLayout","sap/ui/model/BindingMode","sap/m/Button","sap/m/OverflowToolbarButton","sap/m/library","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/m/Bar","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/OverflowToolbarLayoutData","sap/m/OverflowToolbar","sap/m/ToolbarSeparator","sap/m/Label","sap/m/Text","sap/m/Column","sap/m/ColumnListItem","sap/m/CustomListItem","sap/m/ActionSheet","sap/m/FlexBox","sap/m/GenericTile","sap/m/TileContent","sap/m/ViewSettingsDialog","sap/m/ViewSettingsItem","sap/m/MessagePopover","sap/m/MessageItem","sap/m/HBox","sap/m/VBox","sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/GridContainerItemLayoutData","./error/errors","./sinaNexTS/providers/abap_odata/UserEventLogger","sap/base/Log","sap/m/IllustratedMessage","sap/m/IllustratedMessageType","sap/m/IllustratedMessageSize","sap/esh/search/ui/error/errors","sap/ui/core/ResizeHandler","./controls/OpenShowMoreDialog","sap/m/ToolbarSpacer","./UIEvents","./SearchResultTablePersonalizer"],function(e,t,r,s,a,i,o,n,l,u,h,c,p,d,g,f,v,S,y,m,b,C,D,R,w,T,I,B,M,L,F,V,P,E,A,H,x,U,G,O,_,N,j,z,k,W,K,q,Q,J,X,Y,Z,ee,te,re,se,ae,ie,oe,ne,le,ue,he,ce,pe,de,ge){function fe(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function ve(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Se(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var s=0;var a=function(){};return{s:a,n:function(){if(s>=e.length)return{done:true};return{done:false,value:e[s++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,o=false,n;return{s:function(){r=r.call(e)},n:function(){var e=r.next();i=e.done;return e},e:function(e){o=true;n=e},f:function(){try{if(!i&&r.return!=null)r.return()}finally{if(o)throw n}}}}function Se(e,t){if(!e)return;if(typeof e==="string")return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}function ye(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,s=new Array(t);r<t;r++){s[r]=e[r]}return s}var me=fe(e);var be=fe(t);var Ce=v["Highlighter"];var De=M["ButtonType"];var Re=M["ToolbarDesign"];var we=M["PlacementType"];var Te=M["OverflowToolbarPriority"];var Ie=M["ListMode"];var Be=M["ListType"];var Me=M["PopinDisplay"];var Le=M["FlexJustifyContent"];var Fe=M["PopinLayout"];var Ve=se["ProgramError"];var Pe=ae["UserEventType"];var Ee=ce["openShowMoreDialog"];var Ae=fe(de);var He=fe(ge);var xe=b.extend("sap.esh.search.ui.SearchCompositeControl",{renderer:{apiVersion:2,render:function e(t,r){t.openStart("div",r);t.style("width","100%");t.style("height","100%");t.openEnd();var s=r.getAggregation("content");if(s){for(var a=0;a<s.length;a++){t.renderControl(s[a])}}t.close("div")}},metadata:{library:"sap.esh.search.ui",dnd:{draggable:true,droppable:false},properties:{cssClass:{type:"string"},searchTerm:{type:"string",group:"Misc",defaultValue:""},searchOnStart:{type:"boolean",group:"Behavior",defaultValue:true},filterRootCondition:{type:"object",group:"Misc"},sinaConfiguration:{type:"object",group:"Misc"},dataSource:{type:"string",group:"Misc"},resultViewTypes:{type:"string[]",group:"Misc",defaultValue:["searchResultList","searchResultTable"]},resultViewType:{type:"string",group:"Misc",defaultValue:"searchResultList"},resultViewSettings:{settings:{resultViewTypes:"string[]",resultViewType:"string"},group:"Misc",defaultValue:{resultViewTypes:["searchResultList","searchResultTable"],resultViewType:"searchResultList"}},tabStripsFormatter:{type:"function",group:"Misc"},folderMode:{type:"boolean",group:"Misc",defaultValue:false},autoAdjustResultViewTypeInFolderMode:{type:"boolean",group:"Misc",defaultValue:false},enableQueryLanguage:{type:"boolean",group:"Misc",defaultValue:false},applicationComponent:{type:"string",group:"Misc",defaultValue:"HAN-AS-INA-UI"},facetPanelResizable:{type:"boolean",group:"Misc",defaultValue:false},facetPanelWidthInPercent:{type:"float",group:"Misc",defaultValue:25},getCustomNoResultScreen:{type:"function",group:"Misc"},overwriteBrowserTitle:{type:"boolean",group:"Misc"},defaultDataSource:{type:"string",group:"Misc"},optimizeForValueHelp:{type:"boolean",group:"Misc"},filterDataSources:{type:"function",group:"Misc"},facetVisibility:{type:"boolean",group:"Misc"},boSuggestions:{type:"boolean",group:"Misc",defaultValue:false},displayFacetPanelInCaseOfNoResults:{type:"boolean",group:"Misc",defaultValue:false},updateUrl:{type:"boolean",group:"Misc",defaultValue:true},renderSearchUrl:{type:"function",group:"Misc"},isSearchUrl:{type:"function",group:"Misc"},parseSearchUrlParameters:{type:"function",group:"Misc"},quickSelectDataSources:{type:"object",group:"Misc"},selectionChange:{type:"function",group:"Misc"},initAsync:{type:"function",group:"Misc"}},aggregations:{content:{singularName:"content",multiple:true}},events:{searchStarted:{},searchFinished:{}}},constructor:function e(t,s){var i=this;var o=new me({model:null});var n;var l=false;try{var u=xe.unifyInputParameters(t,s);t=u.sId;s=u.settings;n=s["model"]||s["searchModel"];if(!n){n=new a({configuration:s})}else{n.config.id=t}o.setSearchModel(n);var h=xe.getUI5ControlSettings(n.config);b.prototype.constructor.call(this,t,h);this.errorHandler=o;this._oLogger=ie.getLogger("sap.esh.search.ui.SearchCompositeControl");this.addStyleClass("sapUshellSearchInputHelpPage");if(n.config.optimizeForValueHelp){this.addStyleClass("sapUshellSearchInputHelpPageValueHelp")}this.setModel(n);this.setModel(new r({bundle:be}),"i18n");var c=this;this.oFocusHandler=new m.SearchFocusHandler(c);n.focusHandler=this.oFocusHandler;n.config.performanceLogger.enterMethod({name:"createContent"},{isSearch:true});l=true;this.createContent();n.config.performanceLogger.leaveMethod({name:"createContent"});l=false;he.register(this,function(){i._resizeHandler()});this.initSearch()}catch(e){o.onError(e);throw e}finally{if(l){n.config.performanceLogger.leaveMethod({name:"createContent"});l=false}}},initSearch:function e(){var t=this;var r=this.getModel();r.config.performanceLogger.enterMethod({name:"init search"},{isSearch:true});r.searchUrlParser.parse().then(function(){r.initAsync().then(function(){if(t.getProperty("searchOnStart")&&!r.config.isUshell){r._firePerspectiveQuery()}if(r){r.config.performanceLogger.leaveMethod({name:"init search"})}})})},exit:function e(){var t;if(this.oErrorPopover){}if(this.oFilterBar){this.oFilterBar.destroy()}if(this.noResultScreen){this.noResultScreen.destroy()}(t=this.tablePersonalizer)===null||t===void 0?void 0:t.destroyControllerAndDialog();if(this!==null&&this!==void 0&&this.oSearchPage["oFacetDialog"]){this.oSearchPage["oFacetDialog"].destroy()}var r=this.getModel();r.unsubscribe(Ae.ESHSearchStarted,this.onAllSearchStarted,this);r.unsubscribe(Ae.ESHSearchFinished,this.onAllSearchFinished,this)},createContent:function e(){var t=this;var r=this.getModel();if(!r.config.isUshell){this.oSearchFieldGroup=new s(this.getId()+"-searchInputHelpPageSearchFieldGroup");this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.addStyleClass("sapUshellSearchInputHelpPageSearchFieldGroup");this.oSearchFieldGroup.input.setShowValueHelp(false);r.setProperty("/inputHelp",this.oSearchFieldGroup.input);if(r.config.optimizeForValueHelp){this.oSearchFieldGroup.setActionsMenuButtonActive(true);this.oSearchFieldGroup.setSelectQsDsActive(true);this.oSearchFieldGroup.addStyleClass("sapUiTinyMarginBegin");this.oSearchFieldGroup.addStyleClass("sapUiTinyMarginEnd")}}if(r!==null&&r!==void 0&&r.subscribe){if(!this.subscribeDone_SearchStarted){r.subscribe(Ae.ESHSearchStarted,this.onAllSearchStarted,this);this.subscribeDone_SearchStarted=true}if(!this.subscribeDone_SearchFinished){r.subscribe(Ae.ESHSearchFinished,this.onAllSearchFinished,this);this.subscribeDone_SearchFinished=true}}if(this.oSearchFieldGroup){if(r){r.subscribe(Ae.ESHSearchFinished,function(){t.oSearchFieldGroup.input.setValue(r.getSearchBoxTerm())},this)}}this.oFilterButton=this.assembleFilterButton();this.oDataSourceTabBar=this.assembleDataSourceTabBar();var a=[this.oFilterButton,this.oDataSourceTabBar];var i=this.assembleGenericButtonsToolbar();this.oGenericItemsToolbar=i.toolbar;this.oSearchBar=new x(this.getId()+"-searchBar",{width:"100%",visible:{parts:[{path:"/count"}],formatter:function e(t){var s;return t!==0||(r===null||r===void 0?void 0:(s=r.config)===null||s===void 0?void 0:s.showSearchBarForNoResults)}},content:a.concat(this.oGenericItemsToolbar),design:Re.Transparent});this.oSearchBar.addStyleClass("sapUshellSearchBar");if(!i.hasCustomButtons){this.oDataSourceTabBar.addStyleClass("sapUshellSearchBarHasNoCustomButtons")}if(r.config.optimizeForValueHelp){this.oSearchBar.addStyleClass("sapUshellSearchBarValueHelp")}this.oFilterBar=new S(this.getId()+"-searchFilterBar");this.oSearchPage=this.createSearchPage(this.getId());if(this.oSearchFieldGroup){this["addContent"](this.oSearchFieldGroup)}var o=ve(this.oSearchPage),n;try{for(o.s();!(n=o.n()).done;){var l=n.value;this["addContent"](l)}}catch(e){o.e(e)}finally{o.f()}},onAfterRendering:function e(){var t=this===null||this===void 0?void 0:this.getModel();if(t!==null&&t!==void 0&&t.subscribe){if(!this.subscribeDone_SearchStarted){t.subscribe(Ae.ESHSearchStarted,this.onAllSearchStarted,this);this.subscribeDone_SearchStarted=true}if(!this.subscribeDone_SearchFinished){t.subscribe(Ae.ESHSearchFinished,this.onAllSearchFinished,this);this.subscribeDone_SearchFinished=true}}},assembleFilterButton:function e(){var t=this;var r=this.getModel();var s=new V(this.getId()+"-searchBarFilterButton",{icon:R.getIconURI("filter"),tooltip:{parts:[{path:"/facetVisibility"}],formatter:function e(t){return t?be.getText("hideFacetBtn_tooltip"):be.getText("showFacetBtn_tooltip")}},pressed:{path:"/facetVisibility"},press:function e(r){var s=t.getModel();t.searchContainer.setProperty("animateFacetTransition",true);s.setFacetVisibility(r.getParameter("pressed"));t.searchContainer.setProperty("animateFacetTransition",false);t.adjustSearchbarCustomGenericButtonWidth()},visible:{parts:[{path:"/businessObjSearchEnabled"},{path:"/count"}],formatter:function e(t,s){if(s===0){return false}return!sap.ui.Device.system.phone&&!r.config.optimizeForValueHelp&&t}}});s.addStyleClass("searchBarFilterButton");s.setLayoutData(new H({priority:Te.NeverOverflow}));return s},assembleCountBreadcrumbsHiddenElement:function e(){var t=new C("",{text:{parts:[{path:"/count"},{path:"/nlqSuccess"},{path:"/nlqDescription"}],formatter:function e(t,r,s){if(r){return s}if(typeof t!=="number"){return""}return be.getText("results_count_for_screenreaders",[t.toString()])}}});return t},assembleGenericButtonsToolbar:function e(){var t=this,r;var s=this.getModel();var a=new B((this.getId()?this.getId()+"-":"")+"dataExportButton",{icon:"sap-icon://download",text:"{i18n>exportData}",tooltip:"{i18n>exportData}",type:De.Transparent,visible:{parts:[{path:"/count"},{path:"/tableColumns"}],formatter:function e(r,s){var a=t.getModel();if(a&&a.isHomogenousResult()&&r>0&&s.length>0){return true}else{return false}}},press:function e(){if(t.searchSpreadsheet===undefined){t.searchSpreadsheet=new h("ushell-search-spreadsheet")}t.searchSpreadsheet.onExport()}}).addStyleClass("sapUshellSearchTableDataExportButton");a.setLayoutData(new H({priority:Te.High}));this.assembleResultViewSwitch();var i=new B((this.getId()?this.getId()+"-":"")+"tableSortButton",{icon:"sap-icon://sort",text:"{i18n>sortTable}",tooltip:"{i18n>sortTable}",type:De.Transparent,visible:{parts:[{path:"/count"},{path:"/sortableAttributes"}],formatter:function e(r,s){var a=t.getModel();if(a&&a.isHomogenousResult()&&r>0&&s.length>0){return true}else{return false}}},press:function e(){t.openSortDialog()}});i.addStyleClass("sapUshellSearchTableSortButton");i.setLayoutData(new H({priority:Te.High}));var o=new B((this.getId()?this.getId()+"-":"")+"tablePersonalizeButton",{icon:"sap-icon://action-settings",text:"{i18n>personalizeTable}",tooltip:"{i18n>personalizeTable}",type:De.Transparent,enabled:{parts:[{path:"/resultViewType"}],formatter:function e(t){return t==="searchResultTable"}},visible:{parts:[{path:"/count"},{path:"/tableColumns"}],formatter:function e(r,s){var a=t.getModel();if(a&&a.isHomogenousResult()&&r>0&&s.length>0){return true}else{return false}}},press:function e(){var r;(r=t.tablePersonalizer)===null||r===void 0?void 0:r.openDialog()}});o.addStyleClass("sapUshellSearchTablePersonalizeButton");o.setLayoutData(new H({priority:Te.High}));var n=[a,i,o];var l=s===null||s===void 0?void 0:(r=s.config)===null||r===void 0?void 0:r.isUshell;if(l){var u=this.assembleShareButton();u.setLayoutData(new H({priority:Te.High}));n.push(u)}n.push(this.resultViewSwitch);var c=false;try{var p;var d=[new pe];var g=s===null||s===void 0?void 0:(p=s.config)===null||p===void 0?void 0:p.getCustomToolbar();if((g===null||g===void 0?void 0:g.length)>0){c=true;g.push(new U("",{visible:{parts:[{path:"/resultViewSwitchVisibility"},{path:"/count"}],formatter:function e(t,r){return t&&r!==0}}}))}d=d.concat(g);n=d.concat(n)}catch(e){var f=new ue.ConfigurationExitError("getCustomToolbar",s.config.applicationComponent,e);this.errorHandler.onError(f)}var v=new x(this.getId()+"-searchBar--genericButtonsToolbar",{content:n});v.addStyleClass("sapElisaSearchGenericButtonsToolbar");return{toolbar:v,hasCustomButtons:c}},assembleShareButton:function e(){var t=this.getModel();var r=new sap.ushell.ui["footerbar"].AddBookmarkButton((this.getId()?this.getId()+"-":"")+"bookmarkButton",{width:"auto",beforePressHandler:function e(){var s={url:document.URL,title:t.getDocumentTitle(),icon:R.getIconURI("search")};r.setAppData(s)}});var s=new I((this.getId()?this.getId()+"-":"")+"emailButton",{icon:"sap-icon://email",text:be.getText("eMailFld"),width:"auto",press:function e(){sap.m.URLHelper.triggerEmail(null,t.getDocumentTitle(),document.URL)}});var a=new z((this.getId()?this.getId()+"-":"")+"shareActionSheet",{placement:we.Bottom,buttons:[r,s]});this.addDependent(a);var i=new B((this.getId()?this.getId()+"-":"")+"shareButton",{icon:"sap-icon://action",text:be.getText("shareBtn"),tooltip:be.getText("shareBtn"),type:De.Transparent,press:function e(){a.openBy(i)}});return i},assembleDataSourceTabBar:function e(){var t=this;var r=new E((this.getId()?this.getId()+"-":"")+"dataSourceTabBar",{expandable:false,stretchContentHeight:false,visible:{parts:[{path:"/facetVisibility"},{path:"/count"},{path:"/businessObjSearchEnabled"}],formatter:function e(t,r,s){return!t&&r>0&&s}},select:function e(s){var a=t.getModel();if(a.config.searchScopeWithoutAll){return}if(a.getDataSource()!==s.getParameter("item").getBindingContext().getObject()){a.setDataSource(s.getParameter("item").getBindingContext().getObject())}else{if(r["selectFired"]){r["selectFired"]=false}else{r["selectFired"]=true;r.fireSelect({item:s.getParameter("item")})}}}});r.data("sap-ui-fastnavgroup","false",true);r.addStyleClass("searchTabStripBar");r.addStyleClass("searchDataSourceTabStripBar");r.addStyleClass("sapUiSmallMarginBegin");r.setAriaTexts({headerLabel:be.getText("dataSources"),headerDescription:be.getText("dataSources")});r.bindAggregation("items",{path:"/tabStrips/strips",template:new A("",{key:"{id}",text:"{labelPlural}"})});r.addEventDelegate({onBeforeRendering:function e(){if(t.getModel().getProperty("/tabStrips")){if(r.getSelectedKey()!==t.getModel().getProperty("/tabStrips/selected").id){r.setSelectedKey(t.getModel().getProperty("/tabStrips/selected").id)}}}});return r},assembleResultViewSwitch:function e(){var t=this;if(this.resultViewSwitch!==undefined){return}this.resultViewSwitch=new L(this.getId()+"-ResultViewType",{selectedKey:"{/resultViewType}",visible:{parts:[{path:"/resultViewSwitchVisibility"},{path:"/count"}],formatter:function e(t,r){return t&&r!==0}},selectionChange:function e(r){var s=r.getParameter("item").getKey();t.setResultViewType(s);t.assignDragDropConfig()}});this.resultViewSwitch.bindAggregation("items",{path:"/resultViewTypes",factory:function e(t,r){var s=new F("",{visible:true});switch(r.getObject()){case"searchResultList":s.setIcon("sap-icon://list");s.setTooltip(be.getText("displayList"));s.setKey("searchResultList");break;case"searchResultTable":s.setIcon("sap-icon://table-view");s.setTooltip(be.getText("displayTable"));s.setKey("searchResultTable");break;case"searchResultGrid":s.setIcon("sap-icon://grid");s.setTooltip(be.getText("displayGrid"));s.setKey("searchResultGrid");break;default:s.setVisible(false)}return s}});this.resultViewSwitch.addStyleClass("sapUshellSearchResultViewSwitch");this.resultViewSwitch.setLayoutData(new H({priority:Te.High}))},isShowMoreFooterVisible:function e(){var t=this.getModel();return t.getProperty("/boCount")>t.getProperty("/boResults").length},assembleCenterArea:function e(t){var r=this;this.sortDialog=this.assembleSearchResultSortDialog();this.searchResultList=this.assembleSearchResultList(t);this.searchResultTable=this.assembleSearchResultTable(t);this.searchResultTable["addDelegate"]({onBeforeRendering:function e(){r.updateTableLayout()},onAfterRendering:function e(){var t=$(r.searchResultTable.getDomRef()).find("table > thead > tr:first");if(t){t.attr("aria-labelledby",r.countBreadcrumbsHiddenElement.getId())}}});this.searchResultGrid=this.assembleSearchResultGrid(t);this.appSearchResult=this.assembleAppSearch(t);this.showMoreFooter=this.assembleShowMoreFooter();var s=[this.sortDialog,this.searchResultList,this.searchResultTable,this.searchResultGrid,this.appSearchResult,this.showMoreFooter,this.countBreadcrumbsHiddenElement];return s},assembleSearchResultSortDialog:function e(){var t=this;var r=new q(this.getId()+"-sortDialog",{sortDescending:{parts:[{path:"/orderBy"}],formatter:function e(t){return Object.keys(t).length===0||t.sortOrder==="DESC"}},confirm:function e(s){var a=s.getParameter("sortItem");var i=s.getParameter("sortDescending");var o=t.getModel();if(typeof a==="undefined"||a.getBindingContext().getObject().attributeId==="DEFAULT_SORT_ATTRIBUTE"){r.setSortDescending(true);o.resetOrderBy(true)}else{o.setOrderBy({orderBy:a.getBindingContext().getObject().attributeId,sortOrder:i===true?"DESC":"ASC"},true)}},cancel:function e(){},resetFilters:function e(){setTimeout(function(){r.setSortDescending(true);r.setSelectedSortItem("searchSortAttributeKeyDefault")},500)}});return r},assembleSearchResultGrid:function e(t){var r=this.getModel();var s;if(typeof r.config.customGridView==="function"){try{s=r.config.customGridView()}catch(e){var a=new ue.ConfigurationExitError("customGridView",r.config.applicationComponent,e);throw a}}else{var i=new te("",{rowSize:"11rem",columnSize:"11rem",gap:"0.5rem"});s=new u(t+"-ushell-search-result-grid",{layout:i,snapToRow:true})}s.bUseExtendedChangeDetection=false;s.bindProperty("visible",{parts:["/resultViewType","/count"],formatter:function e(t,r){return t==="searchResultGrid"&&r!==0}});s.addStyleClass("sapUshellSearchGrid");return s},assembleSearchResultTable:function e(t){var r=this;var s=this;var a=new l(t+"-ushell-search-result-table",{mode:{parts:[{path:"/multiSelectionEnabled"}],formatter:function e(t){return t===true?Ie.MultiSelect:Ie.None}},noDataText:"{i18n>noCloumnsSelected}",visible:{parts:[{path:"/resultViewType"},{path:"/count"}],formatter:function e(t,r){return t==="searchResultTable"&&r!==0}},popinLayout:Fe.GridLarge,rememberSelections:false,selectionChange:function e(){var t=r.getModel();t.updateMultiSelectionSelected()}});a.bindAggregation("columns",{path:"/tableColumns",factory:function e(r,s){var a=s.getObject();var i=new _(t+"-"+a.persoColumnId,{header:new G("",{text:"{name}"}),visible:true,width:"{width}"});return i}});a.bindItems({path:"/tableRows",factory:function e(t,r){return s.assembleTableItems(r)}});a.addEventDelegate({onAfterRendering:function e(){var t=$(r.getDomRef());t.find("table tbody tr").each(function(){var e=$(this);var t=sap.ui.getCore().byId(e.attr("id"));if(t){var r=t.getAriaLabelledBy();if($.inArray(s.countBreadcrumbsHiddenElement.getId(),r)===-1){t.addAriaLabelledBy(s.countBreadcrumbsHiddenElement)}}return false});t.find(".sapMListTblCell").each(function(){var e=$(this)[0];m.attachEventHandlersForTooltip(e)});t.find(".sapMListTblSubCntVal").each(function(){var e=$(this)[0];m.attachEventHandlersForTooltip(e)})}});return a},assembleTableItems:function e(t){var r=t.getObject();if(r.type==="footer"){return new j("",{visible:false})}return this.assembleTableMainItems(r,t.getPath())},assembleTableMainItems:function e(t,r){var s=this;var a=r+"/cells";var i=new N("",{selected:{path:"selected"}}).addStyleClass("sapUshellSearchTable");i.bindAggregation("cells",{path:a,factory:function e(t,r){if(r.getObject().isTitle){var a="";var i;var o=false;var n=true;var l=r.getObject().titleNavigation;if(l){o=l.hasTargetFunction();a=l.getHref();i=l.getTarget()}if((typeof a!=="string"||a.length===0)&&o===false){n=false}var u=new p("",{text:{path:"value"},enabled:n,wrapping:true,press:function e(){var t=r.getObject().titleNavigation;if(t){t.performNavigation({trackingOnly:true})}}});u.setHref(a);var h=r.getObject().titleIconUrl;if(h){var d=new D("",{src:h});u.setAggregation("icon",d)}u.addStyleClass("sapUshellSearchResultListItem-MightOverflow");u.addStyleClass("sapUshellSearchTableTitleLink");if(i){u.setTarget(i)}var g=u;var f=r.getObject().titleInfoIconUrl;if(f){var v=new D("",{src:f,tooltip:be.getText("collectionShared")}).addStyleClass("sapUshellSearchTableTitleInfoIcon");if(!n){v.addStyleClass("sapUshellSearchTableTitleInfoIconDisabled")}g=new Y("",{items:[u,v]})}return g}if(r.getObject().isRelatedApps){var S=r.getObject().navigationObjects;var y=[];var m;var b=function e(t,r){r.performNavigation()};for(var C=0;C<S.length;C++){var R=S[C];m=new I("",{text:R.getText(),tooltip:R.getText()});m.attachPress(R,b);y.push(m)}var w=new I("",{icon:"sap-icon://action",press:function e(){var t=new z("",{buttons:y,placement:we.Auto});t.openBy(w)}});w.addStyleClass("sapElisaSearchTableRelatedAppsButton");return w}if(r.getObject().isExtendTableColumnCell){var T=s.getModel();return T.config.extendTableColumn.bindingFunction(r.getObject())}var B=new c("",{text:{path:"value"},isForwardEllipsis4Whyfound:true}).addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(r.getObject().icon){var M=new D("",{src:r.getObject().icon});B.setAggregation("icon",M)}return B}});return i},assembleShowMoreFooter:function e(){var t=this;var r=new I(this.getId()+"-resultview-moreFooter-button",{text:"{i18n>showMore}",type:De.Transparent,press:function e(){var r=t.getModel();r.setProperty("/focusIndex",r.getTop());var s=r.getTop()+r.pageSize;r.setTop(s);r.eventLogger.logEvent({type:Pe.SHOW_MORE})}});r.addStyleClass("sapUshellResultListMoreFooter");var s=new k(this.getId()+"-resultview-moreFooter",{visible:{parts:[{path:"/boCount"},{path:"/boResults"}],formatter:function e(t,r){return r.length<t}},justifyContent:Le.Center});s.addStyleClass("sapUshellResultListMoreFooterContainer");s.addItem(r);return s},assembleSearchResultList:function e(t){var r=this;var s=new n(t+"-ushell-search-result-list",{mode:Ie.None,width:"auto",showNoData:false,visible:{parts:[{path:"/resultViewType"},{path:"/count"}],formatter:function e(t,r){return t==="searchResultList"&&r!==0}}});s.bindItems({path:"/results",factory:function e(t,s){return r.assembleListItem(t,s)}});return s},assembleAppSearch:function e(t){var r=this;var s=new te("",{rowSize:"5.5rem",columnSize:"5.5rem",gap:"0.25rem"});var a=new ee(t+"-ushell-search-result-app",{layout:s,snapToRow:true,visible:{parts:[{path:"/count"}],formatter:function e(t){var s=r.getModel();return(s.isAppCategory()||s.isUserCategoryAppSearchOnlyWithoutBOs())&&t!==0}},items:{path:"/appResults",factory:function e(t,s){var a=r.getModel();if(a.isAppCategory()||a.isUserCategoryAppSearchOnlyWithoutBOs()){var i=s.getObject();var o=i.visualization;var n=a.uShellVisualizationInstantiationService;var l=n.instantiateVisualization(o);l.attachPress(function(){a.eventLogger.logEvent({type:Pe.TILE_NAVIGATE,tileTitle:o.title,targetUrl:o.targetURL})});l.addEventDelegate({onAfterRendering:r.highlightTile});l.setActive(false,true);l.setLayoutData(new re(l.getLayout()));return l}return new O("",{text:""})}}});a.addStyleClass("sapUshellSearchGridContainer");var i=new I({text:"{i18n>showMore}",type:De.Transparent,visible:{parts:[{path:"/appCount"},{path:"/appResults"}],formatter:function e(t,s){var a=r.getModel();return(a.isAppCategory()||a.isUserCategoryAppSearchOnlyWithoutBOs())&&s.length<t}},press:function e(){var t=r.getModel();var s=t.getTop()+t.pageSize;t.setProperty("/focusIndex",t.getTop());t.setTop(s);t.eventLogger.logEvent({type:Pe.SHOW_MORE})}});i.addStyleClass("sapUshellResultListMoreFooter");var o=new w("",{width:"100%",visible:{parts:[{path:"/count"}],formatter:function e(t){var s=r.getModel();return(s.isAppCategory()||s.isUserCategoryAppSearchOnlyWithoutBOs())&&t!==0}},content:[a,i]});o.addStyleClass("sapUshellResultApps");return o},highlightTile:function e(t){var r;var s=(r=t["srcControl"])===null||r===void 0?void 0:r.getAggregation("content");if(s){var a=s.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")});if(a.length===0&&s.getComponentInstance){a=s.getComponentInstance().findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")})}if(a.length>0){var i;var o=a[0];var n=new Ce;n.setHighlightTerms((i=t["srcControl"])===null||i===void 0?void 0:i.getModel().getProperty("/uiFilter/searchTerm"));n.highlight(o)}}},assembleAppContainerResultListItem:function e(t){var r=this;var s=new te("",{rowSize:"5.5rem",columnSize:"5.5rem",gap:"0.25rem"});var a="".concat(t,"-appItemContainer");var i=new ee(a,{layout:s,snapToRow:true,items:{path:"/appResults",factory:function e(t,s){var a=r.getModel();if(!a.isAppCategory()){var i=s.getObject();var o=i.visualization;var n=a.uShellVisualizationInstantiationService;var l=n.instantiateVisualization(o);l.attachPress(function(){var e=r.getModel();e.eventLogger.logEvent({type:Pe.TILE_NAVIGATE,tileTitle:o.title,targetUrl:o.targetURL})});l.addEventDelegate({onAfterRendering:r.highlightTile});l.setActive(false,true);l.setLayoutData(new re(l.getLayout()));return l}return new O(t,{text:""})}}});i.addStyleClass("sapUshellSearchGridContainer");i.addEventDelegate({onAfterRendering:function e(){var t=r.getModel();if(i.getDomRef().clientWidth===0){return}var s=i.getDomRef().clientWidth-176;var o=Math.floor(s/184);var n=i.getItems();var l=t.getProperty("/appCount");var u=t.getProperty("/boCount");if(n.length>o+1){var h=0,c=0;for(;c<n.length;c++){h=h+n[c].getDomRef().clientWidth+8;if(h>s){break}}var p=t.getProperty("/appResults");t.setProperty("/appResults",p.slice(0,c))}else{var d=n[n.length-1];if(l>o&&!d.hasStyleClass("sapUshellSearchResultListItemAppsShowMore")){var g="".concat(a,"--showMore");var f=new W(g,{tileContent:new K("".concat(g,"--content"),{content:new O("".concat(g,"--content--text"),{text:be.getText("showMoreApps")})}),press:function e(){var t=r.getModel();t.setDataSource(t.appDataSource)}});f.addStyleClass("sapUshellSearchResultListItemAppsShowMore");i.addItem(f);t.setProperty("/resultViewType","appSearchResult");t.setProperty("/resultViewType","searchResultList");t.setProperty("/boCount",0);t.setProperty("/boCount",u)}}}},i);var o=new j("".concat(this.getId(),"-appItem"),{content:i});o.addStyleClass("sapUshellSearchResultListItem");o.addStyleClass("sapUshellSearchResultListItemApps");o.addEventDelegate({onAfterRendering:function e(){var t=$(o.getDomRef());t.removeAttr("tabindex");t.removeAttr("role");t.attr("aria-hidden","true")}},o);return o},assembleResultListItem:function e(t,r){var s=this.getModel();var a=s.config.getDataSourceConfig(r.dataSource);var i={dataSource:r.dataSource,title:"{title}",titleDescription:"{titleDescription}",titleNavigation:"{titleNavigation}",type:"{dataSourceName}",imageUrl:"{imageUrl}",imageFormat:"{imageFormat}",imageNavigation:"{imageNavigation}",geoJson:"{geoJson}",attributes:{path:"itemattributes"},navigationObjects:{path:"navigationObjects"},selected:{path:"selected"},expanded:{path:"expanded"},positionInList:{path:"positionInList"},resultSetId:{path:"resultSetId"},layoutCache:{path:"layoutCache"},titleIconUrl:{path:"titleIconUrl"},titleInfoIconUrl:{path:"titleInfoIconUrl"}};var o;if(a.searchResultListItemControl){o=new a.searchResultListItemControl(i)}else if(a.searchResultListItemContentControl){i["content"]=new a.searchResultListItemContentControl;o=new f("".concat(t,"--customItemContent"),i)}else{o=new g("".concat(t,"--itemContent"),i)}if(o.setCountBreadcrumbsHiddenElement){o.setCountBreadcrumbsHiddenElement(this.countBreadcrumbsHiddenElement)}var n=new j("".concat(t,"--customListItem"),{content:o,type:Be.Inactive});n.addStyleClass("sapUshellSearchResultListItem");if(o.setParentListItem){o.setParentListItem(n)}return n},assembleListItem:function e(t,r){var s=r.getObject();if(s.type==="footer"){return new j("".concat(t,"-footerItem"))}else if(s.type==="appcontainer"){this.appResultListItem=this.assembleAppContainerResultListItem(t);return this.appResultListItem}return this.assembleResultListItem(t,s)},assignDragDropConfig:function e(){var t=this.getDragDropConfig();if(t.length===0){t=this._dragDropConfig||[]}if(t.length>0){var r;switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){r=this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){r=this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){r=this.searchResultGrid}break}if(r){var s=ve(t),a;try{for(s.s();!(a=s.n()).done;){var i=a.value;r.addDragDropConfig(i)}}catch(e){s.e(e)}finally{s.f()}}}},addDragDropConfig:function e(t){switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){this.searchResultList.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){this.searchResultTable.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){this.searchResultGrid.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultGrid}break;case"":this._dragDropConfig=[t]}return this},insertDragDropConfig:function e(t,r){var s=this;switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){this.searchResultList.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){this.searchResultTable.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){this.searchResultGrid.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultGrid}break;case"":setTimeout(function(){return s.insertDragDropConfig(t,r)},500)}return this},indexOfDragDropConfig:function e(t){var r,s,a,i,o,n;if((r=this.searchResultList)!==null&&r!==void 0&&r.getDragDropConfig()&&((s=this.searchResultList)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){return this.searchResultList.indexOfDragDropConfig(t)}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((i=this.searchResultTable)===null||i===void 0?void 0:i.getDragDropConfig().length)>0){return this.searchResultTable.indexOfDragDropConfig(t)}else if((o=this.searchResultGrid)!==null&&o!==void 0&&o.getDragDropConfig()&&((n=this.searchResultGrid)===null||n===void 0?void 0:n.getDragDropConfig().length)>0){return this.searchResultGrid.indexOfDragDropConfig(t)}else{return-1}},getDragDropConfig:function e(){var t,r,s,a,i,o;if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){return this.searchResultList.getDragDropConfig()}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((a=this.searchResultTable)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){return this.searchResultTable.getDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){return this.searchResultGrid.getDragDropConfig()}else{return[]}},removeDragDropConfig:function e(t){var r,s,a,i,o,n;var l=null;if((r=this.searchResultList)!==null&&r!==void 0&&r.getDragDropConfig()&&((s=this.searchResultList)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){l=this.searchResultList.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((i=this.searchResultTable)===null||i===void 0?void 0:i.getDragDropConfig().length)>0){l=this.searchResultTable.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else if((o=this.searchResultGrid)!==null&&o!==void 0&&o.getDragDropConfig()&&((n=this.searchResultGrid)===null||n===void 0?void 0:n.getDragDropConfig().length)>0){l=this.searchResultGrid.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else{}return l},removeAllDragDropConfig:function e(){var t,r,s,a,i,o;var n=[];if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){n=this.searchResultList.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((a=this.searchResultTable)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){n=this.searchResultTable.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){n=this.searchResultGrid.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else{}return n},destroyDragDropConfig:function e(){var t,r,s,a,i,o;var n=this;if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){n=this.searchResultList.destroyDragDropConfig()}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((a=this.searchResultTable)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){n=this.searchResultTable.destroyDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){n=this.searchResultGrid.destroyDragDropConfig()}else{}this._dragDropConfig=[];return n},onAllSearchStarted:function e(){this.fireEvent("searchStarted")},onAllSearchFinished:function e(){var t=this;var r=this.getModel();this.assignDragDropConfig();this.chooseNoResultScreen();this.oFocusHandler.setFocus();if(r.config.isUshell){var s=sap.ui.getCore().byId("viewPortContainer");if(s!==null&&s!==void 0&&s.switchState){s.switchState("Center")}}this.fireEvent("searchFinished");var a=this.getModel().getProperty("/uiFilter/rootCondition");var i=this.getModel().getProperty("/count");var o=this.getModel().getProperty("/facetVisibility");var n=false;if(!o&&a&&a.hasFilters()){n=true}if(a&&r.filterWithoutFilterByConditions()){n=false}if(a&&typeof r.config.hasSpaceFiltersOnly==="function"){if(r.config.hasSpaceFiltersOnly(a)===true){n=false}}var l=i!==0||r.config.showSearchBarForNoResults;setTimeout(function(){t.adjustSearchContainerHeightClasses(l,n);t.adjustSearchbarCustomGenericButtonWidth()},0);if(!this.tablePersonalizer){this.tablePersonalizer=new He(r)}this.tablePersonalizer.update(this.searchResultTable)},updateTableLayout:function e(){if(!this.getModel()||!this.getModel().getDataSource()){return}var t=this.searchResultTable.getColumns();var r=t.sort(this._orderColumns);var s=0;r.forEach(function(e){e.setDemandPopin(false);if(e.getVisible()){s++;e.setDemandPopin(true);e.setPopinDisplay(Me.Inline);e.setMinScreenWidth(12*s+"rem")}});if(s<=3){this.searchResultTable.setFixedLayout(false)}else{this.searchResultTable.setFixedLayout(true)}},_orderColumns:function e(t,r){if(t.getOrder()<r.getOrder()){return-1}if(t.getOrder()>r.getOrder()){return 1}return 0},createSearchPage:function e(t){var r=this;var s=this.getModel();this.oFilterBar.bindProperty("visible",{parts:[{path:"/count"},{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"}],formatter:function e(t,a,i){var o=false;if(!a&&i&&i.hasFilters()){o=true}if(i&&s.filterWithoutFilterByConditions()){o=false}if(i&&typeof s.config.hasSpaceFiltersOnly==="function"){if(s.config.hasSpaceFiltersOnly(i)===true){o=false}}var n=t!==0||s.config.showSearchBarForNoResults;r.adjustSearchContainerHeightClasses(n,o);return o}});this.oFooter=this.createFooter(this.getId());if(this.oFooter){this.oFooter.bindProperty("visible",{parts:[{path:"/errors/length"}],formatter:function e(t){var r=t>0?true:false;return r}})}this.searchContainer=this.createSearchContainer(t);var a=[this.oSearchBar,this.oFilterBar,this.searchContainer];return a},createNoResultScreen:function e(t){var r=[];var s=le.Auto;var a={parts:[{path:"/queryFilter/searchTerm"}],formatter:function e(t){return be.getText("no_results_info_1",[t])}};var i=be.getText("no_results_info_2");var o=ne.NoSearchResults;var n={title:a,description:i,illustrationSize:s,illustrationType:o,additionalContent:r};var l=new oe("".concat(t,"-searchContainerResultsView-noResultScreen-illustratedMessage"),n).addStyleClass("sapElisaNoResultScreen");l.addStyleClass("sapUiMediumMarginTop");this.noResultScreen=new Z("".concat(t,"-searchContainerResultsView-noResultScreen"),{items:l,width:"100%",justifyContent:Le.Center,visible:{parts:[{path:"/count"},{path:"/isBusy"},{path:"/firstSearchWasExecuted"}],formatter:function e(t,r,s){return t===0&&!r&&s}}});return this.noResultScreen},createSearchContainer:function e(t){var r=this.getModel();this.countBreadcrumbsHiddenElement=this.assembleCountBreadcrumbsHiddenElement();this.centerArea=this.assembleCenterArea(t);this.oSearchCountBreadcrumbs=new d(this.getId()+"-SearchCountBreadcrumbs").addStyleClass("sapElisaSearchContextBarContent");this.oContextBar=new P(this.getId()+"-searchContextBar",{contentLeft:this.oSearchCountBreadcrumbs}).addStyleClass("sapElisaSearchContextBar");this.oContextBarContainer=new w("",{content:[this.oContextBar]});this.oContextBarContainer.addStyleClass("sapElisaSearchContextBarContainer");this.oContextBarContainer.addStyleClass("sapUiNoMarginBegin");this.oContextBarContainer.addStyleClass("sapUiNoMarginEnd");this.oSearchResultContainer=new o("".concat(t,"-searchContainerResultsView"),{centerArea:this.centerArea,contextBarContainer:this.oContextBarContainer,noResultScreen:this.createNoResultScreen(t)});var s={resultContainer:this.oSearchResultContainer,searchIsBusy:{path:"/isBusy"},busyDelay:{path:"/busyDelay"},facetPanelResizable:r.config.facetPanelResizable,facetPanelWidthInPercent:r.config.facetPanelWidthInPercent,facetPanelContent:new y("".concat(this.getId(),"-SearchFacetFilter")),showFacets:{parts:[{path:"/count"},{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"},{path:"/isBusy"},{path:"/config"}],formatter:function e(t,r,s,a,i){var o=true;if(!r){o=false}var n=s&&s.conditions&&s.conditions.length>0;if(t===0&&!i.displayFacetPanelInCaseOfNoResults&&!n&&!a){o=false}return o}},footer:this.oFooter,showFooter:{parts:[{path:"/errors/length"}],formatter:function e(t){return t>0}}};var a=new i("".concat(this.getId(),"-searchLayout"),s).addStyleClass("sapUshellSearchLayout").addStyleClass("sapUshellSearchLayoutHeightDefault");return a},isSearchFieldGroupLocatedInsideSearchComposite:function e(t){if(typeof t==="undefined"||t===null){return false}else if(t.classList){if(t.classList.contains("sapUshellSearchInputHelpPage")){return true}else if(typeof t.parentNode!=="undefined"){return this.isSearchFieldGroupLocatedInsideSearchComposite(t.parentNode)}else{console.error("function: isSearchFieldGroupLocatedInsideSearchComposite: Element has no property 'parentNode' but has property 'classlist'");return false}}else if(t.nodeType===Node.DOCUMENT_NODE){return false}else{console.error("function: isSearchFieldGroupLocatedInsideSearchComposite: Element has no property 'classlist'");return false}},adjustSearchbarCustomGenericButtonWidth:function e(){if(this.oFilterButton.getVisible()&&this.oFilterButton.getDomRef()===null){return}var t=window.document.getElementById(this.getDomRef().id).getBoundingClientRect();var r=this.oFilterButton.getVisible()?window.document.getElementById(this.oFilterButton.getDomRef().id).getBoundingClientRect().width:0;var s=0;if(this.oDataSourceTabBar.getVisible()){var a=this.oDataSourceTabBar.getDomRef();if(a!==null&&a!==void 0&&a.id){s=window.document.getElementById(a.id).getBoundingClientRect().width}else{}}var i=t.width-r-s;var o=this.convertPixelToRem(i);this.oGenericItemsToolbar.setWidth("".concat(o-2.75,"rem"))},_resizeHandler:function e(){var t=this;setTimeout(function(){return t.adjustSearchbarCustomGenericButtonWidth()},0)},convertPixelToRem:function e(t){return t/parseFloat(getComputedStyle(document.documentElement).fontSize)},adjustSearchContainerHeightClasses:function e(t,r){var s=this.oSearchFieldGroup?this.isSearchFieldGroupLocatedInsideSearchComposite(this.oSearchFieldGroup.input.getDomRef()):false;this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefault");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBarHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBarHasSearchBar");if(r){if(s){if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBar")}}else{if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbar")}}}else{if(s){if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBar")}}else{if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefault")}}}},createFooter:function e(t){var r=this;var s=this.getModel();this.oErrorPopover=new J(t+"-"+Ue+++"-"+"-searchMessagePopover",{placement:we.Top});this.oErrorPopover.setModel(s);s.setProperty("/messagePopoverControlId",this.oErrorPopover.getId());this.oErrorPopover.bindAggregation("items",{path:"/errors",factory:function e(){var t=new X("",{title:"{title}",description:"{description}"});return t}});var a=new I(this.getId()+"-searchErrorButton",{icon:R.getIconURI("alert"),text:{parts:[{path:"/errors/length"}],formatter:function e(t){return t}},visible:{parts:[{path:"/errors/length"}],formatter:function e(t){return t>0},mode:T.OneWay},type:De.Emphasized,tooltip:be.getText("errorBtn"),press:function e(){if(r.oErrorPopover.isOpen()){r.oErrorPopover.close()}else{r.oErrorPopover.setVisible(true);r.oErrorPopover.openBy(a)}}});a.addStyleClass("sapUiSmallMarginBegin");a["addDelegate"]({onAfterRendering:function e(){var t=r.getModel();if(!t.getProperty("/isErrorPopovered")){a.firePress();t.setProperty("/isErrorPopovered",true)}}});a.setLayoutData(new H("",{priority:Te.NeverOverflow}));var i=new x(this.getId()+"-searchFooter",{content:[a]});i.addStyleClass("sapUiTinyMarginTop");return i},chooseNoResultScreen:function e(){var t;var r=this.getModel();var s;if(typeof(r===null||r===void 0?void 0:(t=r.config)===null||t===void 0?void 0:t.getCustomNoResultScreen)==="function"){try{s=r.config.getCustomNoResultScreen(r.getDataSource(),r)}catch(e){var a=new ue.ConfigurationExitError("chooseNoResultScreen",r.config.applicationComponent,e);this.errorHandler.onError(a);s=this.oSearchResultContainer.getAggregation("noResultScreen")}}if(!s){s=this.oSearchResultContainer.getAggregation("noResultScreen")}this.oSearchResultContainer.setNoResultScreen(s)},openSortDialog:function e(){this.sortDialog.unbindAggregation("sortItems",false);this.sortDialog.bindAggregation("sortItems",{path:"/sortableAttributes",factory:function e(){return new Q("",{key:{path:"key"},text:{path:"name"},selected:{path:"selected"}})}});this.sortDialog.open()},openShowMoreDialog:function e(t){Ee(this.getModel(),t)},getResultViewTypes:function e(){var t=this.getModel();return t===null||t===void 0?void 0:t.getResultViewTypes()},setResultViewTypes:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultViewTypes' is mandatory.\n"+'Valid example: setResultViewTypes(["searchResultList"])')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}this.setResultViewSettings({resultViewTypes:t,resultViewType:r.getResultViewType()});return this},getResultViewType:function e(){var t=this.getModel();return t===null||t===void 0?void 0:t.getResultViewType()},setResultViewType:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultlViewType' is mandatory.\n"+'Valid example: setResultViewType("searchResultList")')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}this.setResultViewSettings({resultViewTypes:r.getResultViewTypes(),resultViewType:t});return this},getResultViewSettings:function e(){var t=this.getModel();if(t){return{resultViewTypes:t.getResultViewTypes(),resultViewType:t.getResultViewType()}}},setResultViewSettings:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultlViewSettings' is mandatory.\n"+'Valid example: setResultViewSettings({resultViewTypes: ["searchResultList", "searchResultTable"], resultViewType: "searchResultList"})')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}if(typeof t.resultViewTypes==="undefined"||typeof t.resultViewType==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"One of properties of function parameter is undefined.\n"+'Valid example: setResultViewSettings({resultViewTypes: ["searchResultList", "searchResultTable"], resultViewType: "searchResultList"})')}r.calculateResultViewSwitchVisibility({resultViewTypes:t.resultViewTypes,resultViewType:t.resultViewType});this.showMoreFooter.setVisible(this.isShowMoreFooterVisible());r.enableOrDisableMultiSelection();r._firePerspectiveQuery();return this},getControllerName:function e(){return"sap.esh.search.ui.container.Search"},getCssClass:function e(){return this._cssClass},setCssClass:function e(t){if(t&&!this.hasStyleClass(t)){this._cssClass=t;this.addStyleClass(t)}return this},getDataSource:function e(){if(typeof this.getModel()!=="undefined"){var t=this.getModel();var r=t.getDataSource();return r.id}},setDataSource:function e(t,r,s){if(typeof this.getModel()!=="undefined"){var a=this.getModel();a.setDataSourceById(t,r,s)}return this},getSearchTerm:function e(){if(typeof this.getModel()!=="undefined"){var t=this.getModel();return t.getSearchBoxTerm()}return xe.getMetadata().getPropertyDefaults()["searchTerm"]},setSearchTerm:function e(t,r){if(typeof this.getModel()!=="undefined"){var s=this.getModel();s.setSearchBoxTerm(t,r)}return this},getFilterRootCondition:function e(){if(this.getModel()){var t=this.getModel();return t.getFilterRootCondition()}return xe.getMetadata().getPropertyDefaults()["filterRootCondition"]},setFilterRootCondition:function e(t,r){if(this.getModel()){var s=this.getModel();s.setFilterRootCondition(t,r)}return this},renderSearchUrlFromParameters:function e(t,r,s){var a=this.getModel();if(!a){throw new Ve(null,"cannot construct URL because model is undefined")}return a.searchUrlParser.renderFromParameters(t,r,s)}});xe.eshCompCounter=0;xe.getUI5ControlSettings=function e(t){var r={};var s=xe.getMetadata().getProperties();for(var a in s){if(typeof t[a]==="undefined"){continue}r[a]=t[a]}return r};xe.unifyInputParameters=function e(t,r){if(typeof t!=="string"&&t!==undefined&&r===undefined){r=t;t=r&&r.id}else if(typeof r==="undefined"){r={}}if(typeof t==="string"&&t.length>0){r.id=t}if(!t||t.length===0){t="eshComp"+"GenId_"+xe.eshCompCounter++;r.id=t}if(typeof t==="string"&&t.length>0&&typeof r.id!=="undefined"){if(t!==r.id){throw new Error("Constructor of component 'sap.esh.search.ui.SearchCompositeControl' has failed\n\n"+"sId and mSettings.id are not the same. It is sufficient to set either 'id' (sId) or 'settings.id' (mSettings.id).")}}return{sId:t,settings:r}};var Ue=1;return xe})})();