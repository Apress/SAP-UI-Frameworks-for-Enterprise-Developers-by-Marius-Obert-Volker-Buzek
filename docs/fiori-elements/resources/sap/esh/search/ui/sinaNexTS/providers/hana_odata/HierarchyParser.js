/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../../sina/HierarchyQuery"],function(r){function e(r,e){var t=typeof Symbol!=="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=n(r))||e&&r&&typeof r.length==="number"){if(t)r=t;var a=0;var i=function(){};return{s:i,n:function(){if(a>=r.length)return{done:true};return{done:false,value:r[a++]}},e:function(r){throw r},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,u=false,f;return{s:function(){t=t.call(r)},n:function(){var r=t.next();o=r.done;return r},e:function(r){u=true;f=r},f:function(){try{if(!o&&t.return!=null)t.return()}finally{if(u)throw f}}}}function n(r,e){if(!r)return;if(typeof r==="string")return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor)n=r.constructor.name;if(n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(r,e)}function t(r,e){if(e==null||e>r.length)e=r.length;for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function a(r,e){if(!(r instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(r,t.key,t)}}function o(r,e,n){if(e)i(r.prototype,e);if(n)i(r,n);Object.defineProperty(r,"prototype",{writable:false});return r}var u=r["HierarchyQuery"];var f=function(){function r(){a(this,r)}o(r,[{key:"parseHierarchyFacet",value:function r(n,t,a){var i=n instanceof u?n.nodeId:"$$ROOT$$";var o=n.sina.createHierarchyQuery({filter:n.filter.clone(),attributeId:t.id,nodeId:i});var f=n.sina._createHierarchyResultSet({query:o,node:null,items:[],title:a["@com.sap.vocabularies.Common.v1.Label"]||""});var c={};var l=[];var s=a.Items||[];var d=e(s),v;try{for(d.s();!(v=d.n()).done;){var y=v.value;var h=y[t.id];var b=c[h];if(!b){b=n.sina.createHierarchyNode({id:h,label:y[t.id+"@com.sap.vocabularies.Common.v1.Text"],count:y._Count,hasChildren:y._HasChildren});l.push(b);c[h]=b}else{b.label=y[t.id+"@com.sap.vocabularies.Common.v1.Text"];b.count=y._Count}var m=JSON.parse(y._Parent)[t.id];var p=c[m];if(!p){p=n.sina.createHierarchyNode({id:m});l.push(p);c[m]=p}p.addChildNode(b)}}catch(r){d.e(r)}finally{d.f()}var C=l.find(function(r){return r.id===i});f.node=C;return f}}]);return r}();var c={__esModule:true};c.HierarchyParser=f;return c})})();