/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../../sina/ComparisonOperator","./typeConverter","../../sina/ComplexCondition","../../sina/SimpleCondition","../../core/errors","./ComparisonOperator","../../sina/LogicalOperator"],function(e,r,t,i,n,a,o){function s(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}
/*!
   * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
   */var l=e["ComparisonOperator"];var p=t["ComplexCondition"];var d=i["SimpleCondition"];var v=n["InBetweenConditionInConsistent"];var f=n["UnknownComparisonOperatorError"];var C=a["ABAPODataComparisonOperator"];var y=o["LogicalOperator"];var O=function(){function e(r){s(this,e);this.dataSource=r}c(e,[{key:"convertSinaToOdataOperator",value:function e(r){switch(r){case l.Eq:return"EQ";case l.Lt:return"LT";case l.Gt:return"GT";case l.Le:return"LE";case l.Ge:return"GE";case l.Co:return"EQ";case l.Bw:return"EQ";case l.Ew:return"EQ";case y.And:return"AND";case y.Or:return"OR";default:throw new f("Unknown comparison operator "+r)}}},{key:"serializeComplexCondition",value:function e(r){var t={ActAsQueryPart:false,Id:1,OperatorType:this.convertSinaToOdataOperator(r.operator),SubFilters:[]};var i="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=SearchFilter]>Property[Name=ActAsQueryPart]";if(r.sina.provider.isQueryPropertySupported(i)){t.ActAsQueryPart=true}var n=r.conditions;for(var a=0;a<n.length;++a){var o=n[a];t.SubFilters.push(this.serialize(o))}return t}},{key:"serializeSimpleCondition",value:function e(t){var i=this.dataSource.getAttributeMetadata(t.attribute);var n=i.type;var a={ConditionAttribute:t.attribute,ConditionOperator:this.convertSinaToOdataOperator(t.operator),ConditionValue:t.isDynamicValue?t.value:r.sina2Odata(n,t.value,{operator:t.operator}),SubFilters:[]};return a}},{key:"serializeBetweenCondition",value:function e(t){var i;var n;var a=t.conditions[0];var o=t.conditions[1];if(a instanceof d&&o instanceof d){var s=this.dataSource.getAttributeMetadata(a.attribute);var u=s.type;if(a.operator===l.Ge){i=a.value;n=o.value}else{i=o.value;n=a.value}var c={ConditionAttribute:a.attribute,ConditionOperator:C.Bt,ConditionValue:r.sina2Odata(u,i),ConditionValueHigh:r.sina2Odata(u,n),SubFilters:[]};return c}throw new v}},{key:"serialize",value:function e(r){if(r instanceof p){if(r.operator===y.And&&r.conditions[0]&&(r.conditions[0].operator===l.Ge||r.conditions[0].operator===l.Gt||r.conditions[0].operator===l.Le||r.conditions[0].operator===l.Lt)){if(r.conditions.length===1){return this.serializeSimpleCondition(r.conditions[0])}return this.serializeBetweenCondition(r)}return this.serializeComplexCondition(r)}if(r instanceof d){return this.serializeSimpleCondition(r)}}}]);return e}();function h(e,r){var t=new O(e);return t.serialize(r)}var m={__esModule:true};m.serialize=h;return m})})();