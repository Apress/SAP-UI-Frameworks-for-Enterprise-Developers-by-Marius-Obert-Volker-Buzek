/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../../sina/HierarchyDisplayType"],function(e){function t(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function a(e,t,a){if(t)r(e.prototype,t);if(a)r(e,a);Object.defineProperty(e,"prototype",{writable:false});return e}var i=e["HierarchyDisplayType"];var n=function(){function e(r){t(this,e);this.jQuery=r}a(e,[{key:"parse",value:function e(t,r){var a=this;var i={};a.jQuery(r).find("Collection").each(function(){a.jQuery(this).find("Record").each(function(){var e=a.parseRecord(t,this);i[e.attributeName]=e})});return i}},{key:"parseRecord",value:function e(t,r){var a={name:"",attributeName:"",displayType:i.DynamicHierarchyFacet,isHierarchyDefinition:false,parentAttributeName:"",childAttributeName:""};var n=this;n.jQuery(r).find(">PropertyValue").each(function(){switch(n.jQuery(this).attr("Property")){case"Definition":a.name=n.jQuery(this).attr("String");if(a.name&&a.name.indexOf("com.sap.datahub.app.base.metadata.esh::Folder")>-1){a.name.replace(/[.:]/g,"")}break;case"Name":a.attributeName=n.jQuery(this).attr("String");break;case"displayType":switch(n.jQuery(this).attr("String")){case"TREE":a.displayType=i.StaticHierarchyFacet;break;case"FLAT":a.displayType=i.HierarchyResultView;break}break;case"Recurse":Object.assign(a,n.parseRecurse(this))}});a.isHierarchyDefinition=n.calculateIsHierarchyDefinition(t,a.name);return a}},{key:"calculateIsHierarchyDefinition",value:function e(t,r){if(t.endsWith("Type")){t=t.slice(0,-4)}r=r.replace(/[.:]/g,"");return t===r}},{key:"parseRecurse",value:function e(t){var r=this;var a={parentAttributeName:"",childAttributeName:""};r.jQuery(t).find(">PropertyValue").each(function(){switch(r.jQuery(this).attr("Property")){case"Parent":r.jQuery(this).find("Collection").each(function(){a.parentAttributeName=r.parseCollection(this)});break;case"Child":r.jQuery(this).find(">Collection").each(function(){a.childAttributeName=r.parseCollection(this)})}});return a}},{key:"parseCollection",value:function e(t){var r=this;var a;r.jQuery(t).find(">PropertyPath").each(function(){a=r.jQuery(this).text()});return a}}]);return e}();var c={__esModule:true};c.HierarchyMetadataParser=n;return c})})();