/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/helpers/SemanticDateOperators","sap/ui/core/routing/HashChanger"],function(t,e,n,o){"use strict";function r(t){var e;const n=(e=t._getTable)===null||e===void 0?void 0:e.call(t);if(!n){return""}const o=n.getRowBinding()||n.getBinding("items");const r=o&&o.getDownloadUrl()||"";const i=r.split("?");const s=`${i[0]}/$count?`;const a=[];if(i.length>1){const t=i[1];t.split("&").forEach(function(t){const e=t.split("=");switch(e[0]){case"$apply":case"$search":case"$filter":a.push(t)}})}return s+a.join("&")}function i(){const e=sap.ushell&&sap.ushell.Container;if(e){return e.getFLPUrlAsync(true).then(function(t){return t}).catch(function(e){t.error("Could not retrieve cFLP URL for the sharing dialog (dialog will not be opened)",e)})}else{return Promise.resolve(document.URL)}}function s(t){const e=t._getFilterBarControl();if(e){const o=e.getFilterConditions();const i=n.hasSemanticDateOperations(o);if(i){return r(t)}}return""}function a(){const e=o.getInstance().getHash();const n=o.getInstance().hrefForAppSpecificHash?o.getInstance().hrefForAppSpecificHash(""):"";const r=e?n+e:window.location.hash;if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.runningInIframe&&sap.ushell.Container.runningInIframe()){sap.ushell.Container.getFLPUrl(true).then(function(t){return t.substr(0,t.indexOf("#"))+r}).catch(function(e){t.error("Could not retrieve cFLP URL for the sharing dialog (dialog will not be opened)",e)})}else{return window.location.origin+window.location.pathname+r}}const c={adaptShareMetadata:function(n){Promise.resolve(a()).then(t=>{const o=e.getAppComponent(this.base.getView());const r=o.getMetadata();const i=r.getManifestEntry("sap.ui");const a=i&&i.icons&&i.icons.icon||"";const c=r.getManifestEntry("sap.app");const l=c&&c.title||"";n.tile={icon:a,title:l,queryUrl:s(this.base.getView().getController())};n.title=document.title;n.jam.url=t;const u=this.base.getView().getModel("collaborationInfo");u.setProperty("/url",n.url);u.setProperty("/appTitle",n.title)}).catch(function(e){t.error(e)});return Promise.resolve(i()).then(function(t){n.email.url=t;return n})}};return c},false);