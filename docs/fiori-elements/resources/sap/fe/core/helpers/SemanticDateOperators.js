/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ValidateException"],function(e,t,a,o,r){"use strict";const n=["DATE","FROM","TO","DATERANGE"];const s="DYNAMIC.DATE";const T="FIXED.DATE";const l="DYNAMIC.DATE.INT";const i="DYNAMIC.DATERANGE";const c="DYNAMIC.MONTH";const u="FIXED.WEEK";const E="FIXED.MONTH";const y="FIXED.QUARTER";const A="FIXED.YEAR";const p="DYNAMIC.WEEK.INT";const R="DYNAMIC.MONTH.INT";const O="DYNAMIC.QUARTER.INT";const f="DYNAMIC.YEAR.INT";const g="DYNAMIC.MINUTE.INT";const d="DYNAMIC.HOUR.INT";const D={EQ:{key:"EQ",category:s},BT:{key:"BT",category:i}};const S={DATE:{key:"DATE",category:s},FROM:{key:"FROM",category:s},TO:{key:"TO",category:s},DATERANGE:{key:"DATERANGE",category:i},SPECIFICMONTH:{key:"SPECIFICMONTH",category:c},TODAY:{key:"TODAY",category:T},TODAYFROMTO:{key:"TODAYFROMTO",category:l},YESTERDAY:{key:"YESTERDAY",category:T},TOMORROW:{key:"TOMORROW",category:T},LASTDAYS:{key:"LASTDAYS",category:l},NEXTDAYS:{key:"NEXTDAYS",category:l},THISWEEK:{key:"THISWEEK",category:u},LASTWEEK:{key:"LASTWEEK",category:u},LASTWEEKS:{key:"LASTWEEKS",category:p},NEXTWEEK:{key:"NEXTWEEK",category:u},NEXTWEEKS:{key:"NEXTWEEKS",category:p},THISMONTH:{key:"THISMONTH",category:E},LASTMONTH:{key:"LASTMONTH",category:E},LASTMONTHS:{key:"LASTMONTHS",category:R},NEXTMONTH:{key:"NEXTMONTH",category:E},NEXTMONTHS:{key:"NEXTMONTHS",category:R},THISQUARTER:{key:"THISQUARTER",category:y},LASTQUARTER:{key:"LASTQUARTER",category:y},LASTQUARTERS:{key:"LASTQUARTERS",category:O},NEXTQUARTER:{key:"NEXTQUARTER",category:y},NEXTQUARTERS:{key:"NEXTQUARTERS",category:O},QUARTER1:{key:"QUARTER1",category:y},QUARTER2:{key:"QUARTER2",category:y},QUARTER3:{key:"QUARTER3",category:y},QUARTER4:{key:"QUARTER4",category:y},THISYEAR:{key:"THISYEAR",category:A},LASTYEAR:{key:"LASTYEAR",category:A},LASTYEARS:{key:"LASTYEARS",category:f},NEXTYEAR:{key:"NEXTYEAR",category:A},NEXTYEARS:{key:"NEXTYEARS",category:f},LASTMINUTES:{key:"LASTMINUTES",category:g},NEXTMINUTES:{key:"NEXTMINUTES",category:g},LASTHOURS:{key:"LASTHOURS",category:d},NEXTHOURS:{key:"NEXTHOURS",category:d},YEARTODATE:{key:"YEARTODATE",category:A},DATETOYEAR:{key:"DATETOYEAR",category:A}};function M(){return new t({name:"DATERANGE",filterOperator:o.BT,alias:{Date:"DATERANGE",DateTime:"DATERANGE"},valueTypes:[{name:"sap.ui.model.odata.type.Date"},{name:"sap.ui.model.odata.type.Date"}],getModelFilter:function(e,t,a){return Y.getModelFilterForDateRange(e,t,a,this)},validate:function(e,a){if(e.length<2){throw new r("Date Range must have two values")}else{const t=new Date(e[0]);const a=new Date(e[1]);if(t.getTime()>a.getTime()){throw new r("From Date Should Be Less Than To Date")}}t.prototype.validate.apply(this,[e,a])}})}function N(){return new t({name:"DATE",alias:{Date:"DATE",DateTime:"DATE"},filterOperator:o.EQ,valueTypes:[{name:"sap.ui.model.odata.type.Date"}],getModelFilter:function(e,t,a){return Y.getModelFilterForDate(e,t,a,this)}})}function m(){return new t({name:"FROM",alias:{Date:"FROM",DateTime:"FROM"},filterOperator:o.GE,valueTypes:[{name:"sap.ui.model.odata.type.Date"}],getModelFilter:function(e,t,a){return Y.getModelFilterForFrom(e,t,a,this)}})}function F(){return new t({name:"TO",alias:{Date:"TO",DateTime:"TO"},filterOperator:o.LE,valueTypes:[{name:"sap.ui.model.odata.type.Date"}],getModelFilter:function(e,t,a){return Y.getModelFilterForTo(e,t,a,this)}})}function k(e,t){if(!t){return true}t=Array.isArray(t)?t:[t];let a;t.some(function(t){let o;if(!t.path){return false}const r=e[t.path];const n=t.exclude||false;let s;if(t.contains&&r){s=t.contains.split(",");a=n;for(o=0;o<s.length;o++){if(n&&r.indexOf(s[o])>-1){a=false;return true}else if(!n&&r.indexOf(s[o])>-1){a=true;return true}}}if(t.equals&&r){s=t.equals.split(",");a=n;for(o=0;o<s.length;o++){if(n&&r===s[o]){a=false;return true}else if(!n&&r===s[o]){a=true;return true}}}return false});return a}function I(e){return e==="Edm.DateTimeOffset"?Object.assign({},S,D):S}const Y={addSemanticDateOperators:function(){e.addOperator(M());e.addOperator(N());e.addOperator(m());e.addOperator(F())},getSupportedOperations:function(){return n},getSemanticDateOperations:function(e){const t=I(e);return Object.keys(t)},removeSemanticDateOperators:function(){},getFilterOperations:function(e,t){const a=[];const o=I(t);for(const t in o){const r=o[t];if(k(r,e)){a.push(r)}}return a.map(function(e){return e.key})},hasSemanticDateOperations:function(e){const t=this.getSemanticDateOperations();for(const a in e){const o=e[a];const r=o.find(function(e){return t.indexOf(e.operator)>-1});if(r){return false}}return true},getModelFilterForDate:function(e,t,r,n){if(r.isA("sap.ui.model.odata.type.DateTimeOffset")){const s=n._createLocalType(n.valueTypes[0]);let T=e.values[0];const l=s.getModelFormat();const i=l.parse(T,false);T=r.getModelValue(i);i.setHours(23);i.setMinutes(59);i.setSeconds(59);i.setMilliseconds(999);const c=r.getModelValue(i);return new a({path:t,operator:o.BT,value1:T,value2:c})}else{return new a({path:t,operator:n.filterOperator,value1:e.values[0]})}},getModelFilterForTo:function(e,t,r,n){if(r.isA("sap.ui.model.odata.type.DateTimeOffset")){const s=n._createLocalType(n.valueTypes[0]);const T=e.values[0];const l=s.getModelFormat();const i=l.parse(T,false);i.setHours(23);i.setMinutes(59);i.setSeconds(59);i.setMilliseconds(999);const c=r.getModelValue(i);return new a({path:t,operator:o.LE,value1:c})}else{return new a({path:t,operator:n.filterOperator,value1:e.values[0]})}},getModelFilterForFrom:function(e,t,r,n){if(r.isA("sap.ui.model.odata.type.DateTimeOffset")){const s=n._createLocalType(n.valueTypes[0]);const T=e.values[0];const l=s.getModelFormat();const i=l.parse(T,false);i.setHours(0);i.setMinutes(0);i.setSeconds(0);i.setMilliseconds(0);const c=r.getModelValue(i);return new a({path:t,operator:o.GE,value1:c})}else{return new a({path:t,operator:n.filterOperator,value1:e.values[0]})}},getModelFilterForDateRange:function(e,t,r,n){if(r.isA("sap.ui.model.odata.type.DateTimeOffset")){let s=n._createLocalType(n.valueTypes[0]);let T=e.values[0];let l=s.getModelFormat();let i=l.parse(T,false);T=r.getModelValue(i);s=n._createLocalType(n.valueTypes[1]);l=s.getModelFormat();let c=e.values[1];i=l.parse(c,false);i.setHours(23);i.setMinutes(59);i.setSeconds(59);i.setMilliseconds(999);c=r.getModelValue(i);return new a({path:t,operator:o.BT,value1:T,value2:c})}else{return new a({path:t,operator:n.filterOperator,value1:e.values[0],value2:e.values[1]})}}};return Y},false);