{"version":3,"file":"BuildingBlockTemplateProcessor.js","names":["sap","ui","define","Log","deepClone","uid","AttributeModel","ConfigurableObject","BindingToolkit","TypeGuards","BindingParser","XMLPreprocessor","JSONModel","TraceInfo","_exports","isFunctionArray","isContext","isBindingToolkitExpression","compileExpression","Placement","LOGGER_SCOPE","XMLTEMPLATING_NS","DOMParserInstance","DOMParser","validateMacroMetadataContext","sName","mContexts","oContextSettings","sKey","oContext","oContextObject","getObject","required","Error","hasOwnProperty","$kind","undefined","expectedTypes","indexOf","getPath","$Type","expectedAnnotationTypes","validateMacroSignature","oMetadata","oNode","aMetadataContextKeys","metadataContexts","Object","keys","aProperties","properties","oAttributeNames","attributeNames","getAttributeNames","attributeName","forEach","oPropertySettings","hasAttribute","startsWith","warning","SAP_UI_CORE_ELEMENT","SAP_UI_MODEL_CONTEXT","transformMetadata","buildingBlockMetadata","aggregations","dependents","type","slot","customData","layoutData","propertyName","propertyType","includes","_checkAbsoluteAndContextPaths","oSettings","sAttributeValue","sMetaPath","sContextPath","currentContextPath","endsWith","model","path","_createInitialMetadataContext","sAttributeName","returnContext","models","converterContext","getProperty","data","unstoreObjectValue","setProperty","bindingContexts","entitySet","_getMetadataContext","oVisitor","bDoNotResolve","isOpen","oMetadataContext","getAttribute","complexParser","getContext","e","async","processProperties","isPublic","oDefinitionProperties","aDefinitionPropertiesKeys","propertyValues","sKeyValue","defaultValue","error","visitAttribute","attributes","getNamedItem","value","Number","processContexts","contextPath","mMissingContext","oDefinitionContexts","aDefinitionContextsKeys","contextPathIndex","contextPathDefinition","splice","propertyValue","length","name","addSingleContext","parseAggregation","oAggregation","processAggregations","oOutObjects","children","childIdx","childDefinition","childKey","setAttribute","aggregationObject","key","position","placement","After","anchor","tagName","nodeName","processChildren","oAggregations","firstElementChild","oFirstElementChild","namespaceURI","oParent","parentNode","iChildIndex","Array","from","visitNode","nextElementSibling","sChildName","localName","sAggregationName","toUpperCase","defaultAggregation","aggregationDefinition","parsedAggregation","parsedAggregationKey","oNextChild","nextChild","hasVirtualNode","childWrapper","document","createElementNS","appendChild","removeAttribute","oNewChild","aggregationPropertyValues","childIndex","subChild","subObjectKey","subObject","subChildAttributeNames","subChildAttributeName","myChild","push","processSlots","oMetadataAggregations","processCustomData","arguments","oAggregationElement","oElementChild","sSlotName","oTargetElement","querySelector","prepareAggregationElement","replaceWith","replace","processBuildingBlock","BuildingBlockClass","metadata","sFragmentName","fragment","namespace","publicNamespace","xmlTag","getSettings","initialKeys","oControlConfig","viewData","processedPropertyValues","propName","_BuildingBlockClass$m","_oData","_oData$isA","oData","originalDefinition","validate","isA","call","getModel","oInstance","getProperties","sContextName","targetObject","attributeValue","storeObjectValue","newContext","createBindingContext","oAttributesModel","oPreviousMacroInfo","isTraceInfoActive","oTraceInfo","traceMacroCalls","macroInfo","oContextVisitor","with","oPromise","insertFragment","templateString","getTemplate","isRuntime","storeKey","temporaryObjectStore","hasError","hasParseError","parsedTemplate","parseXMLString","element","iter","createNodeIterator","NodeFilter","SHOW_TEXT","textnode","nextNode","textContent","trim","processXmlInTrace","_oInstance$getTemplat","initialTemplate","oErrorText","createErrorXML","map","template","outerHTML","join","visitedNodes","internalNode","Promise","all","remove","resolve","oMacroElement","oRemainingSlots","querySelectorAll","oSlotElement","traceDetails","initialProperties","resolvedProperties","missingContexts","oError","stack","oTemplate","oCtx","mSetting","ex","registerBuildingBlock","plugIn","unregisterBuildingBlock","errorMessages","xmlFragment","additionalData","errorLabels","errorMessage","xml","escapeXMLAttributeValue","errorStack","stackFormatted","btoa","additionalText","JSON","stringify","replaceAll","propertyUID","processNextXmlInTrace","method","returnValue","xmlString","_output2","_output3","addDefaultNamespaces","xmlDocument","parseFromString","output","_output","parentElement","renderInTraceMode","outStr","_xmlResult$","xmlResult","innerText","innerHTML","split","strings","i","_len","values","_key","isArray","flat","valuefn","compiledExpression","propertyUId"],"sources":["BuildingBlockTemplateProcessor-dbg.js"],"mappings":"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"}