/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/base/util/UriParameters","sap/fe/core/helpers/ClassSupport","sap/fe/placeholder/library","sap/ui/core/Core","sap/ui/core/mvc/ControllerExtension","sap/ui/core/Placeholder"],function(e,t,o,r,a,i,n){"use strict";var l,c,s,p,h,u,d,f,b,g;var P=o.publicExtension;var y=o.defineUI5Class;function m(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;O(e,t)}function O(e,t){O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,o){t.__proto__=o;return t};return O(e,t)}function C(e,t,o,r,a){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]});i.enumerable=!!i.enumerable;i.configurable=!!i.configurable;if("value"in i||i.initializer){i.writable=true}i=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},i);if(a&&i.initializer!==void 0){i.value=i.initializer?i.initializer.call(a):void 0;i.initializer=undefined}if(i.initializer===void 0){Object.defineProperty(e,t,i);i=null}return i}let D=(l=y("sap.fe.core.controllerextensions.Placeholder"),c=P(),s=P(),p=P(),h=P(),u=P(),d=P(),f=P(),l(b=(g=function(o){m(r,o);function r(){return o.apply(this,arguments)||this}var i=r.prototype;i.attachHideCallback=function e(){if(this.isPlaceholderEnabled()){const e=this.base.getView();const o=e.getParent()&&e.getParent().oContainer;const r=o&&o.getParent();if(!r){return}const a={onAfterShow:function(e){if(e.isBackToPage){r.hidePlaceholder()}else if(t.fromQuery(window.location.hash.replace(/#.*\?/,"")).get("restoreHistory")==="true"){r.hidePlaceholder()}}};o.addEventDelegate(a);const i=e.getController().pageReady;const n=["pageReady"];if(e.getControllerName()==="sap.fe.templates.ObjectPage.ObjectPageController"){n.push("heroesBatchReceived")}n.forEach(function(e){i.attachEvent(e,null,function(){r.hidePlaceholder()},null)})}};i.attachRouteMatchers=function e(){this._init()};i._init=function e(){this.oAppComponent=this.base.getAppComponent();this.oRootContainer=this.oAppComponent.getRootContainer();this.oPlaceholders={};if(this.isPlaceholderEnabled()){n.registerProvider(function(e){switch(e.name){case"sap.fe.templates.ListReport":return{html:"sap/fe/placeholder/view/PlaceholderLR.fragment.html",autoClose:false};case"sap.fe.templates.ObjectPage":return{html:"sap/fe/placeholder/view/PlaceholderOP.fragment.html",autoClose:false};default:}})}if(this.isPlaceholderDebugEnabled()){this.initPlaceholderDebug()}};i.initPlaceholderDebug=function e(){this.resetPlaceholderDebugStats();const t={apply:e=>{if(this.oRootContainer._placeholder&&this.oRootContainer._placeholder.placeholder){this.debugStats.iHidePlaceholderTimestamp=Date.now()}return e.bind(this.oRootContainer)()}};const o=new Proxy(this.oRootContainer.hidePlaceholder,t);this.oRootContainer.hidePlaceholder=o};i.isPlaceholderDebugEnabled=function e(){if(t.fromQuery(window.location.search).get("sap-ui-xx-placeholder-debug")==="true"){return true}return false};i.resetPlaceholderDebugStats=function e(){this.debugStats={iHidePlaceholderTimestamp:0,iPageReadyEventTimestamp:0,iHeroesBatchReceivedEventTimestamp:0}};i.getPlaceholderDebugStats=function e(){return this.debugStats};i.isPlaceholderEnabled=function t(){const o=e.get("sap-ushell-config.apps.placeholder.enabled");if(o===false){return false}return a.getConfiguration().getPlaceholder()};return r}(i),C(g.prototype,"attachHideCallback",[c],Object.getOwnPropertyDescriptor(g.prototype,"attachHideCallback"),g.prototype),C(g.prototype,"attachRouteMatchers",[s],Object.getOwnPropertyDescriptor(g.prototype,"attachRouteMatchers"),g.prototype),C(g.prototype,"initPlaceholderDebug",[p],Object.getOwnPropertyDescriptor(g.prototype,"initPlaceholderDebug"),g.prototype),C(g.prototype,"isPlaceholderDebugEnabled",[h],Object.getOwnPropertyDescriptor(g.prototype,"isPlaceholderDebugEnabled"),g.prototype),C(g.prototype,"resetPlaceholderDebugStats",[u],Object.getOwnPropertyDescriptor(g.prototype,"resetPlaceholderDebugStats"),g.prototype),C(g.prototype,"getPlaceholderDebugStats",[d],Object.getOwnPropertyDescriptor(g.prototype,"getPlaceholderDebugStats"),g.prototype),C(g.prototype,"isPlaceholderEnabled",[f],Object.getOwnPropertyDescriptor(g.prototype,"isPlaceholderEnabled"),g.prototype),g))||b);return D},false);