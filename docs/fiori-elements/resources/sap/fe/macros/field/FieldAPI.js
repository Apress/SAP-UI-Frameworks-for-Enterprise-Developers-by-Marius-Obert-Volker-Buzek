/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/ClassSupport","sap/ui/core/message/Message","../MacroAPI"],function(e,t,i){"use strict";var r,n,a,l,o,s,u,c,p,d,g,f,b,y,v,h,m,A,w,z,M,O,B,P,C,I;var E=e.xmlEventHandler;var j=e.property;var L=e.event;var F=e.defineUI5Class;var x=e.association;function S(e,t,i,r){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function D(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function R(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;V(e,t)}function V(e,t){V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return V(e,t)}function _(e,t,i,r,n){var a={};Object.keys(r).forEach(function(e){a[e]=r[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=i.slice().reverse().reduce(function(i,r){return r(e,t,i)||i},a);if(n&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(n):void 0;a.initializer=undefined}if(a.initializer===void 0){Object.defineProperty(e,t,a);a=null}return a}function k(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}function q(e){if(e.isA("sap.fe.macros.controls.FieldWrapper")){const t=e;const i=t.getEditMode()==="Display"?[t.getContentDisplay()]:t.getContentEdit();if(i.length>=1){return i.length?i[0]:undefined}}else{return e}return undefined}let H=(r=F("sap.fe.macros.field.FieldAPI"),n=j({type:"boolean"}),a=j({type:"boolean"}),l=j({type:"string"}),o=j({type:"string",expectedAnnotations:[],expectedTypes:["EntitySet","EntityType","Singleton","NavigationProperty","Property"]}),s=L(),u=x({type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}),c=j({type:"boolean"}),p=j({type:"sap.fe.macros.FieldFormatOptions"}),d=j({type:"string"}),g=j({type:"boolean"}),f=j({type:"boolean"}),b=E(),r(y=(v=function(e){R(i,e);function i(){var t;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}t=e.call(this,...r)||this;S(t,"editable",h,D(t));S(t,"readOnly",m,D(t));S(t,"id",A,D(t));S(t,"metaPath",w,D(t));S(t,"change",z,D(t));S(t,"ariaLabelledBy",M,D(t));S(t,"required",O,D(t));S(t,"formatOptions",B,D(t));S(t,"semanticObject",P,D(t));S(t,"collaborationEnabled",C,D(t));S(t,"visible",I,D(t));return t}var r=i.prototype;r.handleChange=function e(t){this.fireChange({value:this.getValue(),isValid:t.getParameter("valid")})};r.onBeforeRendering=function e(){const t=this.content;if(t&&t.isA(["sap.m.Button"])&&t.addAriaLabelledBy){const e=this.getAriaLabelledBy();for(let i=0;i<e.length;i++){const r=e[i];const n=t.getAriaLabelledBy()||[];if(n.indexOf(r)===-1){t.addAriaLabelledBy(r)}}}};r.enhanceAccessibilityState=function e(t,i){const r=this.getParent();if(r&&r.enhanceAccessibilityState){r.enhanceAccessibilityState(this,i)}return i};r.getAccessibilityInfo=function e(){const t=this.content;return t&&t.getAccessibilityInfo?t.getAccessibilityInfo():{}};r.getIdForLabel=function e(){const t=this.content;return t.getIdForLabel()};r.getValue=function e(){var t,i,r,n;let a=q(this.content);if(this.collaborationEnabled&&(t=a)!==null&&t!==void 0&&t.isA("sap.m.HBox")){a=a.getItems()[0]}if((i=a)!==null&&i!==void 0&&i.isA("sap.m.CheckBox")){return a.getSelected()}else if((r=a)!==null&&r!==void 0&&r.isA("sap.m.InputBase")){return a.getValue()}else if((n=a)!==null&&n!==void 0&&n.isA("sap.ui.mdc.Field")){return a.getValue()}else{throw"getting value not yet implemented for this field type"}};r.addMessage=function e(i){const r=this.getMessageManager();const n=q(this.content);let a;if(n!==null&&n!==void 0&&n.isA("sap.m.CheckBox")){var l;a=(l=n.getBinding("selected"))===null||l===void 0?void 0:l.getResolvedPath()}else if(n!==null&&n!==void 0&&n.isA("sap.m.InputBase")){var o;a=(o=n.getBinding("value"))===null||o===void 0?void 0:o.getResolvedPath()}else if(n!==null&&n!==void 0&&n.isA("sap.ui.mdc.Field")){a=n.getBinding("value").getResolvedPath()}const s=new t({target:a,type:i.type,message:i.message,processor:n===null||n===void 0?void 0:n.getModel(),description:i.description,persistent:i.persistent});r.addMessages(s);return s.getId()};r.removeMessage=function e(t){const i=this.getMessageManager();const r=i.getMessageModel().getData();const n=r.find(e=>e.id===t);if(n){i.removeMessages(n)}};r.getMessageManager=function e(){return sap.ui.getCore().getMessageManager()};return i}(i),h=_(v.prototype,"editable",[n],{configurable:true,enumerable:true,writable:true,initializer:null}),m=_(v.prototype,"readOnly",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),A=_(v.prototype,"id",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),w=_(v.prototype,"metaPath",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),z=_(v.prototype,"change",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),M=_(v.prototype,"ariaLabelledBy",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),O=_(v.prototype,"required",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),B=_(v.prototype,"formatOptions",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),P=_(v.prototype,"semanticObject",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),C=_(v.prototype,"collaborationEnabled",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),I=_(v.prototype,"visible",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),_(v.prototype,"handleChange",[b],Object.getOwnPropertyDescriptor(v.prototype,"handleChange"),v.prototype),v))||y);return H},false);