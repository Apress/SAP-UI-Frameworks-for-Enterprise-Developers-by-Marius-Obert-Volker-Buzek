// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){"use strict";var s={};var n=function(){};n.prototype.connect=function(s){return new Promise(function(n,t){e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:s,messageName:"connect"}).then(function(e){if(e.status==="accepted"){n(e.activeClients)}else{t()}})})};n.prototype.disconnect=function(n){delete s[n];e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:n,messageName:"disconnect"})};n.prototype.subscribe=function(n,t,c,i){return new Promise(function(a,r){s[n]={fnMessageCallback:c,fnClientConnectionCallback:i};e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:n,messageName:"subscribe",subscribedChannels:t}).then(function(e){if(e.status==="accepted"){a();if(e.activeClients){setTimeout(function(){e.activeClients.foreach(function(e){i("clientSubscribed",e.clientId,e.channels)})},1)}}else{r()}})})};n.prototype.unsubscribe=function(s,n){return new Promise(function(t,c){e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{channelId:"sap.ushell.MessageBroker",clientId:s,messageName:"unsubscribe",subscribedChannels:n}).then(function(e){if(e.status==="accepted"){t()}else{c()}})})};n.prototype.publish=function(s,n,t,c,i,a){e.sendMessageToOuterShell("sap.ushell.services.MessageBroker",{clientId:n,channelId:s,targetClientIds:i,messageName:c,data:a},t)};n.prototype.addAcceptedOrigin=function(e){};n.prototype.removeAcceptedOrigin=function(e){};n.prototype.getAcceptedOrigins=function(){};n.prototype.getAcceptedOrigins=function(){};n.prototype.handleMessage=function(e){return new Promise(function(n,t){if(e.channelId==="sap.ushell.MessageBroker"){if(e.messageName==="clientSubscribed"||e.messageName==="clientUnsubscribed"){Object.keys(s).forEach(function(n){s[n].fnClientConnectionCallback(e.messageName,e.clientId,e.channels)})}}n({_noresponse_:true});return})};n.hasNoAdapter=true;return n},false);