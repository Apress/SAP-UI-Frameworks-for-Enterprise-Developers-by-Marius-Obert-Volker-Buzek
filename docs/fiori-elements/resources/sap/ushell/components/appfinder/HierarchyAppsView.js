// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/library","sap/ui/core/mvc/View","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/MessagePage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Title","sap/m/Button","sap/ushell/components/appfinder/VisualizationOrganizerHelper"],function(e,t,s,a,i,o,r,n,l,p,u,c,h,m,d,g,y,f){"use strict";var b=n.ButtonType;var T=n.FlexWrap;var x=e.TitleLevel;var A=e.AccessibleLandmarkRole;return t.extend("sap.ushell.components.appfinder.HierarchyAppsView",{oVisualizationOrganizerHelper:f.getInstance(),createContent:function(e){this.oController=e;var t=new a({icon:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonIcon},type:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonType},selected:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonTooltip.bind(this)},press:e.showSaveAppPopover.bind(e)});t.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));t.addStyleClass("sapUshellPinButton");this.oItemTemplate=new s({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:t,press:[e.onAppBoxPressed,e]});this.oItemTemplate.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new r(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:T.Wrap});this.layout.addDelegate({onAfterRendering:function(){var e=this.getItems();var t=function(e){if(e.getKey()==="tabindex"){e.setValue("0")}};if(e.length){e[0].getCustomData().forEach(t);e[0].getPinButton().getCustomData().forEach(t)}}.bind(this.layout)});this.oMessagePage=new u({visible:false,showHeader:false,text:i.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var n=this.getViewData();var d=n.menuName==="USER_MENU"?"appFinderUserMenuTitle":"appFinderSapMenuTitle";var f=new l({showHeader:false,landmarkInfo:new p({contentLabel:i.i18n.getText(d),contentRole:A.Region})}).addStyleClass("sapUshellAppsView sapUiContentPadding");if(n&&n.navigateHierarchy){this.crumbsModel=new c({crumbs:[]});this.linkTemplate=new h({text:"{crumbs>text}",press:function(e){var t=e.oSource.getBinding("text").getContext().getObject();n.navigateHierarchy(t.path,false)}});this.breadcrumbs=new m({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");f.addContent(this.breadcrumbs)}else{this.resultText=new g({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:e.resultTextFormatter.bind(e)},level:x.H3}).addStyleClass("sapUiTinyMarginTop sapUiSmallMarginBottom sapUshellEasyAccessSearchResultText");f.addContent(this.resultText);this.showMoreResultsLink=new y({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsTextFormatter.bind(e)},press:n.getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsVisibilityFormatter.bind(e)},type:b.Transparent})}f.addContent(this.oMessagePage);f.addContent(this.layout);if(this.showMoreResultsLink){f.addContent(this.showMoreResultsLink)}return f},formatPinButtonTooltip:function(e,t,s,a,o){var r=i.i18n,n;if(s){var l=e?Array.prototype.indexOf.call(e,a):-1;var p=l!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";n=r.getText(p,o)}else{n=t?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip")}return n},updateResultSetMessage:function(e,t){var s;if(t){s="noFilteredItems"}else{s="EasyAccessMenu_NoAppsToDisplayMessagePage_Text"}if(e){if(t){this.resultText.updateProperty("text");this.resultText.setVisible(true)}this.layout.setVisible(true);this.oMessagePage.setVisible(false)}else{if(t){this.resultText.setVisible(false)}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var a=i.i18n.getText(s);this.oMessagePage.setText(a)}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e)}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps"}})},true);