// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/base/Log","sap/m/Title","sap/ushell/Config"],function(e,n,r,t){"use strict";return e.extend("sap.ushell.components.shell.Settings.userProfiling.UserProfiling",{onInit:function(){this._loadContent()},_loadContent:function(){var e=this.getView().byId("profilingContent"),o=t.last("/core/userPreferences/profiling");o.forEach(function(t){var o=t.contentFunc();o.then(function(n){var o=new r({text:t.title||""}).addStyleClass("sapUiSmallMarginTop");e.addItem(o);e.addItem(n)},function(e){n.warning("Failed to load "+t.title+" profiling",e,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling")})})},onCancel:function(){var e=t.last("/core/userPreferences/profiling");e.forEach(function(e){if(e.onCancel){e.onCancel()}})},onSave:function(){var e=t.last("/core/userPreferences/profiling")||[],n=e.map(this._saveProfileEntry);return Promise.all(n).then(function(e){var n=e.some(function(e){return e&&e.error});return n?Promise.reject("Can not save user profiling settings"):Promise.resolve()})},_saveProfileEntry:function(e){return new Promise(function(r){e.onSave().then(r,function(t){n.error("Failed to save "+e.title+" profiling",t,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling");r({error:true})})})}})});