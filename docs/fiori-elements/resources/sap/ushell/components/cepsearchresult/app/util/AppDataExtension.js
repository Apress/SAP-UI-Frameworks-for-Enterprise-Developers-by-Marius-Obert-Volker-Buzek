// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/integration/Extension","sap/ushell/components/cepsearchresult/app/util/jsSearch"],function(t,e){"use strict";var n=t.extend("sap.ushell.components.cepsearchresult.app.util.AppDataExtension");n.prototype.normalize=function(t){if(!Array.isArray(t)){t=[]}var e=[];t.forEach(function(t){t.visualizations.forEach(function(t){var n=t.title;if(t.subtitle){n=n+" - "+t.subtitle}e.push({title:t.title||"",subtitle:t.subtitle||"",keywords:t.keywords?t.keywords.join(" "):"",icon:t.icon||"",label:n,visualization:t,url:t.targetURL})})});return e};n.prototype.filter=function(t,n,i,r){this.searchEngine=new e({objects:t,fields:["title","subtitle","keywords"],shouldNormalize:!String.prototype.normalize,algorithm:{id:"contains-ranked",options:[50,49,40,39,5,4,51]}});if(n){return this.searchEngine.search({searchFor:n,top:r,skip:i})}var s={results:[],totalCount:t.length};t.sort(function(t,e){return t.title.localeCompare(e.title)}).splice(i,r).forEach(function(t){s.results.push({object:t})});return s};n.prototype.getData=function(t,e,n){var i={results:[],totalCount:0};if(sap.ushell.Container&&sap.ushell.Container.getServiceAsync){return sap.ushell.Container.getServiceAsync("SearchableContent").then(function(i){i._changeVizType=function(){};return i.getApps().then(function(i){i=this.normalize(i);return this.filter(i,t,e,n)}.bind(this))}.bind(this))}return Promise.resolve(i)};return n});