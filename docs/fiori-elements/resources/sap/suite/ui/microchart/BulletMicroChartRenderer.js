/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["./library","sap/m/library","sap/suite/ui/microchart/MicroChartRenderUtils"],function(e,a,t){"use strict";var l={apiVersion:2};l.render=function(t,l){if(!l._bThemeApplied){return}if(l._hasData()&&!isNaN(l.getAggregation("actual").getValue())){var s=l._calculateChartData();var i=+s.forecastValuePct;var r;if(l._isResponsive()){r="sapSuiteBMCResponsive"}else{r="sapSuiteBMCSize"+l.getSize()}var o=l.getScale();var c=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var u="sapSuiteBMCModeType"+l.getMode();var d=l.getMode()===e.BulletMicroChartModeType.Delta?l._calculateDeltaValue():0;var n=l.getActual()&&l.getActual()._isValueSet;var p=l.getShowActualValue()&&l.getSize()!==a.Size.XS&&l.getMode()===e.BulletMicroChartModeType.Actual;var g=l.getShowActualValueInDeltaMode()&&l.getSize()!==a.Size.XS&&l.getMode()===e.BulletMicroChartModeType.Delta;var S=l.getShowDeltaValue()&&l.getSize()!==a.Size.XS&&l.getMode()===e.BulletMicroChartModeType.Delta;var v=l.getShowTargetValue()&&l.getSize()!==a.Size.XS;var M=l.getShowThresholds();var h=l.getActualValueLabel();var C=l.getDeltaValueLabel();var B=l.getTargetValueLabel();var V=l.getThresholds();var f;if(n){f="sapSuiteBMCSemanticColor"+l.getActual().getColor()}t.openStart("div",l);this._writeMainProperties(t,l);t.openEnd();t.openStart("div");t.class("sapSuiteBMCVerticalAlignmentContainer");t.openEnd();t.openStart("div",l.getId()+"-bc-chart");t.class("sapSuiteBMCChart");t.class(r);t.openEnd();if(n&&(p||g)||n&&l._isTargetValueSet&&S){var T="";t.openStart("div");t.class("sapSuiteBMCTopLabel");t.openEnd();if(n&&(p||g)){var b=h?h:""+l.getActual().getValue();T=b+o;t.openStart("div",l.getId()+"-bc-item-value");t.class("sapSuiteBMCItemValue");t.class(f);t.class(r);t.openEnd();t.text(T);t.close("div")}else if(n&&l._isTargetValueSet&&S){var y=C?C:""+d;T=y+o;t.openStart("div",l.getId()+"-bc-item-value");t.class("sapSuiteBMCItemValue");t.class(f);t.class(r);t.openEnd();t.text("Î”");t.text(T);t.close("div")}t.close("div")}t.openStart("div");t.class("sapSuiteBMCChartCanvas");t.openEnd();if(M){for(var E=0;E<s.thresholdsPct.length;E++){if(V[E]._isValueSet){this.renderThreshold(t,l,s.thresholdsPct[E],r)}}}t.openStart("div",l.getId()+"-chart-bar");t.class("sapSuiteBMCBar");t.class(r);t.class("sapSuiteBMCScaleColor"+l.getScaleColor());t.openEnd();t.close("div");if(n){if(l._isForecastValueSet&&l.getMode()===e.BulletMicroChartModeType.Actual){t.openStart("div",l.getId()+"-forecast-bar-value");t.class("sapSuiteBMCForecastBarValue");t.class(f);t.class(r);t.style("width",i+"%");t.openEnd();t.close("div")}t.openStart("div",l.getId()+"-bc-bar-value-marker");t.class("sapSuiteBMCBarValueMarker");t.class(u);if(!l.getShowValueMarker()){t.class("sapSuiteBMCBarValueMarkerHidden")}t.class(f);t.class(r);t.style(c,parseFloat(s.actualValuePct+parseFloat(1)+"%"));if(l.getMode()===e.BulletMicroChartModeType.Delta&&s.actualValuePct<=s.targetValuePct){t.style("margin","0")}t.openEnd();t.close("div");if(l.getMode()===e.BulletMicroChartModeType.Actual&&s.actualValuePct!==0){t.openStart("div",l.getId()+"-bc-bar-value");t.class("sapSuiteBMCBarValue");t.class(f);t.class(r);if(l._isForecastValueSet){t.class("sapSuiteBMCForecast")}t.style("width",s.actualValuePct+"%");t.openEnd();t.close("div")}else if(l._isTargetValueSet&&l.getMode()===e.BulletMicroChartModeType.Delta){t.openStart("div",l.getId()+"-bc-bar-value");t.class("sapSuiteBMCBarValue");t.class(f);t.class(r);t.style("width",Math.abs(s.actualValuePct-s.targetValuePct)+"%");t.style(c,1+Math.min(s.actualValuePct,s.targetValuePct)+"%");t.openEnd();t.close("div")}}if(l._isTargetValueSet){t.openStart("div",l.getId()+"-bc-target-bar-value");t.class("sapSuiteBMCTargetBarValue");t.class(r);t.style(c,parseFloat(s.targetValuePct).toFixed(2)+"%");t.openEnd();t.close("div");t.close("div");if(v){t.openStart("div");t.class("sapSuiteBMCBottomLabel");t.openEnd();var _=B?B:""+l.getTargetValue();var P=_+o;t.openStart("div",l.getId()+"-bc-target-value");t.class("sapSuiteBMCTargetValue");t.class(r);t.openEnd();t.text(P);t.close("div");t.close("div")}}else{t.close("div")}t.close("div");t.openStart("div",l.getId()+"-info");t.attr("aria-hidden","true");t.style("display","none");t.openEnd();t.close("div");t.close("div");t.close("div")}else{this._renderNoData(t,l)}};l._writeMainProperties=function(e,a){var t=a.hasListeners("press");this._renderActiveProperties(e,a);var l=a.getTooltip_AsString(t);e.attr("role","figure");if(a.getAriaLabelledBy().length){e.accessibilityState(a)}else{e.attr("aria-label",l)}e.class("sapSuiteBMC");e.class("sapSuiteBMCContent");e.class(a._isResponsive()?"sapSuiteBMCResponsive":"sapSuiteBMCSize"+a.getSize());e.style("width",a.getWidth());e.style("height",a.getHeight())};l.renderThreshold=function(e,t,l,s){var i=sap.ui.getCore().getConfiguration().getRTL()?"right":"left",r=.98*l.valuePct+1,o="sapSuiteBMCSemanticColor"+l.color;if(o==="sapSuiteBMCSemanticColor"+a.ValueColor.Error){e.openStart("div");e.class("sapSuiteBMCDiamond");e.class(s);e.class(o);e.style(i,r+"%");e.openEnd();e.close("div")}e.openStart("div");e.class("sapSuiteBMCThreshold");e.class(s);e.class(o);e.style(i,r+"%");e.openEnd();e.close("div")};t.extendMicroChartRenderer(l);return l},true);