/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["./library","sap/ui/core/theming/Parameters","sap/suite/ui/microchart/MicroChartRenderUtils","sap/m/library"],function(e,t,i,s){"use strict";var o={apiVersion:2};var a=e.LineType;var l=s.ValueColor;o.QUALITATIVE_CLASS="sapUiChartPaletteQualitativeHue";o.QUALITATIVE_MAX=22;o.render=function(e,t){if(t._hasData()){e.openStart("div",t);this._writeMainProperties(e,t);if(t._bSemanticMode){e.class("sapSuiteLMCSemanticMode")}if(t._bFocusMode){e.class("sapSuiteLMCFocusMode")}if(t._bNoBottomLabels||!t.getShowBottomLabels()){e.class("sapSuiteLMCNoBottomLabels")}if(t._bNoTopLabels||!t.getShowTopLabels()){e.class("sapSuiteLMCNoTopLabels")}e.openEnd();e.openStart("div");e.class("sapSuiteLMCVerticalAlignmentContainer");e.openEnd();this._renderLabelsTop(e,t);e.openStart("div");e.class("sapSuiteLMCContentWrapper");e.openEnd();this._renderCanvas(e,t);this._renderThresholdLabel(e,t);e.close("div");this._renderLabelsBottom(e,t);e.close("div");e.close("div")}else{this._renderNoData(e,t)}};o._writeMainProperties=function(e,t){var i=t.hasListeners("press");this._renderActiveProperties(e,t);var s=t.getTooltip_AsString(i);e.attr("role","figure");if(t.getAriaLabelledBy().length){e.accessibilityState(t)}else{e.attr("aria-label",s)}e.class("sapSuiteLMC");e.class("sapSuiteLMCSize"+t.getSize());e.style("width",t.getWidth());e.style("height",t.getHeight())};o._renderCanvas=function(e,t){var i;var s;e.openStart("div");e.class("sapSuiteLMCSvgCanvas");e.openEnd();if(t._bScalingValid){e.openStart("svg",t.getId()+"-sapSuiteLMCSvgElement");e.attr("focusable","false");e.class("sapSuiteLMCSvgElement");e.openEnd();this._renderThresholdLine(e,t);t._getLines().forEach(function(i,o){e.openStart("g",i);e.openEnd();s=i._getPoints().length;for(var a=1;a<s;a++){this._renderLine(e,t,o,i._aNormalizedPoints[a-1].x,i._aNormalizedPoints[a-1].y,i._aNormalizedPoints[a].x,i._aNormalizedPoints[a].y)}e.close("g")},this);e.close("svg");e.openStart("div",t.getId()+"-sapSuiteLMCPointsContainer");e.class("sapSuiteLMCPointsContainer");e.openEnd();t._getLines().forEach(function(o,a){i=o._getPoints();s=i.length;var l=o.getShowPoints(),r,n;if(o._bFocusMode||l){for(var d=0;d<s;d++){r=i[d];n=this._isPointEmphasized(r);if(!o._bFocusMode&&l||o._bFocusMode&&n&&r.getShow()){this._renderPoint(e,t,a,r,d,n)}}}},this);e.close("div")}e.close("div")};o._renderThresholdLabel=function(e,t){var i=t.getThresholdDisplayValue();if(this._isThresholdValue(t)&&t.getShowThresholdLine()&&t.getShowThresholdValue()){e.openStart("div");e.class("sapSuiteLMCThresholdLabelWrapper");e.openEnd();e.openStart("div");e.class("sapSuiteLMCThresholdLabel");e.openEnd();i=i?i:t.getThreshold();e.text(i);e.close("div");e.close("div")}};o._renderPoint=function(e,t,i,s,o,r){var n=t._getLines()[i],d=n.getType(),h=n._aNormalizedPoints[o],L=n.getColor(),c,p;if(h.x<0||h.x>100||h.y<0||h.y>100){return}e.openStart("div");e.style("left",h.x+"%");e.style("top",100-h.y+"%");p=d===a.Dotted?"border-color":"background-color";e.class("sapSuiteLMCPoint"+d);if(n._bFocusMode&&n._bSemanticMode){c=s.getColor();if(l[c]){e.class("sapSuiteLMCPoint"+c)}else{e.style(p,this._getHexColor(c))}}else if(!n._bFocusMode&&n._bSemanticMode){if(s.getY()>=t.getThreshold()){if(l[L.above]){e.class("sapSuiteLMCPoint"+L.above)}else{e.style(p,this._getHexColor(L.above))}}else if(l[L.below]){e.class("sapSuiteLMCPoint"+L.below)}else{e.style(p,this._getHexColor(L.below))}}else if(!n._bSemanticMode&&typeof L==="string"){if(n.getColor()===l.Neutral){e.style(p,this._getQualitativeColor(i+1))}else if(l[L]){e.class("sapSuiteLMCPoint"+L)}else{e.style(p,this._getHexColor(L))}}else{e.style(p,this._getQualitativeColor(i+1))}e.class("sapSuiteLMCPoint");if(r&&s.getShow()){e.class("sapSuiteLMCPointEmphasized")}e.openEnd();e.close("div")};o._renderThresholdLine=function(e,t){if(this._isThresholdValue(t)&&t.getShowThresholdLine()){e.openStart("line");e.attr("x1","0%");e.attr("y1",100-t._fNormalizedThreshold+"%");e.attr("x2","100%");e.attr("y2",100-t._fNormalizedThreshold+"%");e.class("sapSuiteLMCLineThreshold");e.openEnd();e.close("line")}};o._isThresholdValue=function(e){return e._fNormalizedThreshold>=0&&e._fNormalizedThreshold<=100&&!e._bThresholdNull};o._renderLine=function(e,t,i,s,o,a,l){if(this._isDimensionLineOutsideCanvas(t,s,a,"X")||this._isDimensionLineOutsideCanvas(t,o,l,"Y")){return}var r,n,d=a-s,h=l-o;if((o-t._fNormalizedThreshold)*(l-t._fNormalizedThreshold)<0){r=s+(t._fNormalizedThreshold-o)*d/h;this._renderLine(e,t,i,s,o,r,t._fNormalizedThreshold);this._renderLine(e,t,i,r,t._fNormalizedThreshold,a,l)}else if(o*l<0){r=s-o*d/h;this._renderLine(e,t,i,s,o,r,0);this._renderLine(e,t,i,r,0,a,l)}else if((o-100)*(l-100)<0){r=s+(100-o)*d/h;this._renderLine(e,t,i,s,o,r,100);this._renderLine(e,t,i,r,100,a,l)}else if(s*a<0){n=o-s*h/d;this._renderLine(e,t,i,s,o,0,n);this._renderLine(e,t,i,0,n,a,l)}else if((s-100)*(a-100)<0){n=o+(100-s)*h/d;this._renderLine(e,t,i,s,o,100,n);this._renderLine(e,t,i,100,n,a,l)}else{this._displayLine(e,t,i,s,o,a,l)}};o._displayLine=function(e,t,i,s,o,a,r){var n=t._getLines()[i],d=n.getColor();e.openStart("line");e.attr("x1",s+"%");e.attr("y1",100-o+"%");e.attr("x2",a+"%");e.attr("y2",100-r+"%");e.class("sapSuiteLMCLine");e.class("sapSuiteLMCLine"+n.getType());if(n._bSemanticMode&&n._bFocusMode){e.class("sapSuiteLMCLineNeutral")}else if(n._bSemanticMode&&!n._bFocusMode){if(o>=t._fNormalizedThreshold&&r>=t._fNormalizedThreshold){if(l[d.above]){e.class("sapSuiteLMCLine"+d.above)}else{e.style("stroke",this._getHexColor(d.above))}}else if(l[d.below]){e.class("sapSuiteLMCLine"+d.below)}else{e.style("stroke",this._getHexColor(d.below))}}else if(!n._bSemanticMode&&typeof d==="string"){if(d===l.Neutral){e.style("stroke",this._getQualitativeColor(i+1))}else if(l[d]){e.class("sapSuiteLMCLine"+d)}else{e.style("stroke",this._getHexColor(d))}}else{e.style("stroke",this._getQualitativeColor(i+1))}e.openEnd();e.close("line")};o._getQualitativeColor=function(e){return this._getHexColor(this.QUALITATIVE_CLASS+e%this.QUALITATIVE_MAX)};o._renderLabelsBottom=function(e,t){var i=t.getLeftBottomLabel(),s=t.getRightBottomLabel();if(!t.getShowBottomLabels()||!i&&!s){return}e.openStart("div");e.class("sapSuiteLMCLabels");e.class("sapSuiteLMCLabelsBottom");e.openEnd();if(i&&i.length>0||s&&s.length>0){e.openStart("div");e.class("sapSuiteLMCLeftBottomLabel");e.class("sapSuiteLMCLabel");e.openEnd();e.text(i);e.close("div");e.openStart("div");e.class("sapSuiteLMCRightBottomLabel");e.class("sapSuiteLMCLabel");e.openEnd();e.text(s);e.close("div")}e.close("div")};o._renderLabelsTop=function(e,t){var i=t.getLeftTopLabel(),s=t.getRightTopLabel(),o=t._getLines()[0];if(!t.getShowTopLabels()||!i&&!s){return}var a="",r="",n="",d="",h,L,c,p,u;var _=function(t){e.style("color",t)};var S=function(e,t){var i="",s="";if(this._isPointEmphasized(e)&&e.getShow()){u=e.getColor();if(l[u]){i="sapSuiteLMCLabel"+u}else{s=this._getHexColor(u)}}else{i="sapSuiteLMCLabelNeutral"}if(t){d=s;r=i}else{n=s;a=i}}.bind(this);if(o&&o._getPoints().length>1){h=o._getPoints();L=h.length;c=h[0];p=h[L-1];var g=o.getColor();if(o._bFocusMode&&o._bSemanticMode&&t._bScalingValid){S(c,false);S(p,true)}else if(!o._bFocusMode&&o._bSemanticMode&&t._bScalingValid&&o.getShowPoints()&&l[g.above]&&l[g.below]){if(c.getY()>=t.getThreshold()){a="sapSuiteLMCLabel"+g.above}else{a="sapSuiteLMCLabel"+g.below}if(p.getY()>=t.getThreshold()){r="sapSuiteLMCLabel"+g.above}else{r="sapSuiteLMCLabel"+g.below}}else{a="sapSuiteLMCLabelNeutral";r="sapSuiteLMCLabelNeutral"}}e.openStart("div");e.class("sapSuiteLMCLabels");e.class("sapSuiteLMCLabelsTop");e.openEnd();if(i&&i.length>0||s&&s.length>0){e.openStart("div");e.class("sapSuiteLMCLeftTopLabel");e.class("sapSuiteLMCLabel");e.class(a);if(n){_(n)}e.openEnd();e.text(i);e.close("div");e.openStart("div");e.class("sapSuiteLMCRightTopLabel");e.class("sapSuiteLMCLabel");e.class(r);if(d){_(d)}e.openEnd();e.text(t.getRightTopLabel());e.close("div")}e.close("div")};o._isPointEmphasized=function(e){return e&&e.getMetadata().getName()==="sap.suite.ui.microchart.LineMicroChartEmphasizedPoint"};o._getHexColor=function(e){return t.get(e)||e};o._isDimensionLineOutsideCanvas=function(e,t,i,s){var o=100,a=0;if(s==="X"&&e._minXScale===e._maxXScale){o=50;a=50}else if(s==="Y"&&e._minYScale===e._maxYScale){o=50;a=50}return t>=o&&i>=o&&!(t===o&&i===o)||t<=a&&i<=a&&!(t===a&&i===a)};i.extendMicroChartRenderer(o);return o},true);