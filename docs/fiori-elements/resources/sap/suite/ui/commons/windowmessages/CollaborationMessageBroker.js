sap.ui.define(["sap/base/Log"],function(e){"use strict";var n;var o=e.getLogger("sap.suite.ui.commons.windowmessages.CollaborationMessageBroker");function s(e){o.info("CollaborationMessageBroker instance is created");var n="sap-suite-ui-commons-collaboration-message-broker";var s="collaboration-channel";var i="get-provider-config";var t=[{channelId:s,version:"1.0"}];var a=function(t,a,r){o.info("Message Received from CLIENT_ID: "+t+" on CHANNEL_ID: "+a);if(r===i){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(a){var r=JSON.stringify(e);a.publish(s,n,Date.now().toString(),i,[t],r).then(function(){o.info("Configuration published successfully to CLIENT_ID: "+t+" on CHANNEL_ID: "+s+" DATA: "+r)})})}else{o.info("Message: '"+r+"' is not supported")}};if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){e.connect(n).then(function(){o.info("Client ID: "+n+" is connected successfully");e.subscribe(n,t,a,Function.prototype)})})}}return{startInstance:function(e){o.info("CollaborationMessageBroker=>startInstance method is being called");if(!n){n=new s(e)}}}});