/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define([],function(){"use strict";var e={};var t=1e-10;e.getPointsDistance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};e.getLineEquation=function(e){var t=(e.p1.y-e.p2.y)/(e.p1.x-e.p2.x),n=e.p1.y-t*e.p1.x;return{slope:t,intercept:n,verticalX:e.p1.x}};e.isPointUnderLine=function(e,t){if(!isFinite(t.slope)){if(e.x===t.verticalX){return 0}else if(e.x>t.verticalX){return 1}else{return-1}}var n=e.y-t.slope*e.x;if(Math.abs(n-t.intercept)<Number.EPSILON*1e3){return 0}else if(n<t.intercept){return 1}else{return-1}};e.doLinesIntersect=function(t,n){var r=e.getLineEquation(t),i=e.getLineEquation(n);return e.isPointUnderLine(t.p1,i)!=e.isPointUnderLine(t.p2,i)&&e.isPointUnderLine(n.p1,r)!=e.isPointUnderLine(n.p2,r)};e.getLinesIntersection=function(t,n){var r=t.p1.x,i=t.p1.y,x=t.p2.x,p=t.p2.y,a=n.p1.x,o=n.p1.y,y=n.p2.x,u=n.p2.y,f=(r-x)*(o-u)-(i-p)*(a-y);if(f===0){var s=e.getLineEquation(t),c=e.getLineEquation(n);if(s.slope===c.slope&&s.intercept===c.intercept){return{x:Infinity,y:Infinity}}else{return undefined}}return{x:((r*p-i*x)*(a-y)-(r-x)*(a*u-o*y))/f,y:((r*p-i*x)*(o-u)-(i-p)*(a*u-o*y))/f}};e.doLineRectangleIntersect=function(t,n){return e.getLineRectangleIntersections(t,n).length>=2};e.getLineRectangleIntersections=function(n,r){var i=[];if(n.p1.x<r.p1.x&&n.p2.x<r.p1.x||n.p1.x>r.p2.x&&n.p2.x>r.p2.x||n.p1.y<r.p1.y&&n.p2.y<r.p1.y||n.p1.y>r.p2.y&&n.p2.y>r.p2.y){return i}var x,p=t;[{p1:r.p1,p2:{x:r.p1.x,y:r.p2.y}},{p1:{x:r.p1.x,y:r.p2.y},p2:r.p2},{p1:{x:r.p2.x,y:r.p1.y},p2:r.p2},{p1:r.p1,p2:{x:r.p2.x,y:r.p1.y}}].forEach(function(t){x=e.getLinesIntersection(n,t);if(x&&x.x>=t.p1.x-p&&x.x<=t.p2.x+p&&x.y>=t.p1.y-p&&x.y<=t.p2.y+p){i.push(x)}});return i};e.getPolygonCentroid=function(e){var t=0,n,r,i,x=0,p=0;if(e.points.length<3){throw new Error("Polygon must have three or more points.")}for(var a=0;a<e.points.length;a++){n=e.points[a];r=a<e.points.length-1?e.points[a+1]:e.points[0];t+=n.x*r.y-r.x*n.y}t=t/2;for(var o=0;o<e.points.length;o++){n=e.points[o];r=o<e.points.length-1?e.points[o+1]:e.points[0];i=n.x*r.y-r.x*n.y;x+=(n.x+r.x)*i;p+=(n.y+r.y)*i}x=x/(6*t);p=p/(6*t);return{x:x,y:p}};e.getAngleOfVector=function(e){var t=e.apex.x-e.center.x,n=e.apex.y-e.center.y,r=Math.atan(n/t);if(n>0){return t>=0?r:r+Math.PI}else{return t>=0?r+2*Math.PI:r+Math.PI}};e.getLengthOfVector=function(e){return Math.sqrt(Math.pow(e.apex.x-e.center.x,2)+Math.pow(e.apex.y-e.center.y,2))};e.getRotatedPoint=function(t,n){return e.getRotatedVector({center:{x:0,y:0},apex:t},n).apex};e.getPointSum=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};e.getPointDif=function(e,t){return{x:e.x-t.x,y:e.y-t.y}};e.getRotatedVector=function(t,n){var r=e.getAngleOfVector(t),i=e.getLengthOfVector(t);r+=n;var x={x:Math.cos(r)*i+t.center.x,y:Math.sin(r)*i+t.center.y};return{center:t.center,apex:x}};e.getBoundingBox=function(e){var t=Infinity,n=Infinity,r=-Infinity,i=-Infinity;e.forEach(function(e){if(e.x<t){t=e.x}if(e.x>r){r=e.x}if(e.y<n){n=e.y}if(e.y>i){i=e.y}});return{p1:{x:t,y:n},p2:{x:r,y:i}}};e.enlargeBox=function(e,t){e.p1.x=e.p1.x-t;e.p1.y=e.p1.y-t;e.p2.x+=t;e.p2.y+=t};e.getNormalizedVector=function(t,n){var r=n/e.getLengthOfVector(t),i=(t.apex.x-t.center.x)*r,x=(t.apex.y-t.center.y)*r;return{center:{x:0,y:0},apex:{x:i,y:x}}};e.hasRectangleRectangleIntersection=function(e,t){return!(t.p1.x>e.p2.x||t.p2.x<e.p1.x||t.p1.y>e.p2.y||t.p2.y<e.p1.y)};e.getSegmentsIntersection=function(e,t){var n=1e-7;var r=function(e,t,r){return e-n<=t&&t<=r+n};var i=e.p1.x,x=e.p1.y,p=e.p2.x,a=e.p2.y,o=t.p1.x,y=t.p1.y,u=t.p2.x,f=t.p2.y;var s=((i*a-x*p)*(o-u)-(i-p)*(o*f-y*u))/((i-p)*(y-f)-(x-a)*(o-u));var c=((i*a-x*p)*(y-f)-(x-a)*(o*f-y*u))/((i-p)*(y-f)-(x-a)*(o-u));if(isNaN(s)||isNaN(c)){return false}else{if(i>=p){if(!r(p,s,i)){return false}}else if(!r(i,s,p)){return false}if(x>=a){if(!r(a,c,x)){return false}}else if(!r(x,c,a)){return false}if(o>=u){if(!r(u,s,o)){return false}}else if(!r(o,s,u)){return false}if(y>=f){if(!r(f,c,y)){return false}}else if(!r(y,c,f)){return false}}return{x:s,y:c}};e.getBezierPathCorners=function(n,r,i){var x=[],p=[],a;var o=n.split(/[,\s]/).reduce(function(e,t){var n=t.match("([a-zA-Z])(.+)");if(n){e.push(n[1]);e.push(n[2])}else{e.push(t)}return e},[]);var y=o.reduce(function(e,t){if(parseFloat(t)==t&&e.length){e[e.length-1].push(t)}else{e.push([t])}return e},[]);function u(e,t,n){var r=t.x-e.x;var i=t.y-e.y;var x=Math.sqrt(r*r+i*i);return f(e,t,Math.min(1,n/x))}function f(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}}function s(e,t){if(e.length>2){e[e.length-2]=t.x;e[e.length-1]=t.y}}function c(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}function l(e){return{x:parseFloat(y[e][1]),y:parseFloat(y[e][2])}}function h(e,n){return Math.abs(e-n)<t}function g(e,n){return n-e>t}function v(e,n){return e-n>t}function d(t){var n,r,i,x,a=t>0?1:-1,o=[],u,f,s,c;if(t===0){return}t=Math.abs(t);r=l(0);i=l(1);x=e.getNormalizedVector({center:r,apex:i},t);x=e.getRotatedVector(x,-a*Math.PI/2).apex;r.x+=x.x;r.y+=x.y;o.push(r);for(u=1;u<y.length-1;u++){n=l(u-1);r=l(u);i=l(u+1);f=h(n.x,r.x)&&g(n.y,r.y)||h(r.x,i.x)&&g(r.y,i.y);s=h(n.y,r.y)&&v(n.x,r.x)||h(r.y,i.y)&&v(r.x,i.x);c=h(n.y,r.y)&&g(n.x,r.x)&&h(r.x,i.x)&&v(r.y,i.y)||h(n.y,r.y)&&v(n.x,r.x)&&h(r.x,i.x)&&g(r.y,i.y)||h(n.x,r.x)&&g(n.y,r.y)&&h(r.y,i.y)&&g(r.x,i.x)||h(n.x,r.x)&&v(n.y,r.y)&&h(r.y,i.y)&&v(r.x,i.x);if(a<0){c=!c}x.x=(f?t:-t)*a;x.y=(s?t:-t)*a;r.x+=x.x;r.y+=x.y;r.inner=c;o.push(r)}r=l(y.length-1);n=l(y.length-2);x=e.getNormalizedVector({center:r,apex:n},t);x=e.getRotatedVector(x,a*Math.PI/2).apex;r.x+=x.x;r.y+=x.y;o.push(r);for(u=0;u<y.length;u++){y[u][1]=o[u].x.toFixed(0).toString();y[u][2]=o[u].y.toFixed(0).toString();p[u]=o[u].inner}}if(i){d(i)}if(y.length>1){var M=c(y[0]),L=null;if(y[y.length-1][0]=="Z"&&y[0].length>2){L=["L",M.x,M.y];y[y.length-1]=L}x.push(y[0]);for(var I=1;I<y.length;I++){var P=x[x.length-1],m=y[I],V=m==L?y[1]:y[I+1],R;if(p[I]===true){R=r*.65}else if(p[I]===false){R=r*1.35}else{R=r}if(V&&P&&P.length>2&&m[0]=="L"&&V.length>2&&V[0]=="L"){var E=c(P),N=c(m),b=c(V),q,F,w=Math.abs(E.x-N.x)+Math.abs(E.y-N.y),O=Math.abs(b.x-N.x)+Math.abs(b.y-N.y),z=Math.max(Math.min(R,w,O/2),1);q=u(N,E,z);F=u(N,b,z);s(m,q);m.origPoint=N;x.push(m);var S=f(q,N,.5),U=f(N,F,.5),B=["C",S.x,S.y,U.x,U.y,F.x,F.y];B.origPoint=N;x.push(B)}else{x.push(m)}}if(L){var A=c(x[x.length-1]);x.push(["Z"]);s(x[0],A)}}else{x=y}a=x.reduce(function(e,t){return e+t.join(" ")+" "},"");return a};return e},true);