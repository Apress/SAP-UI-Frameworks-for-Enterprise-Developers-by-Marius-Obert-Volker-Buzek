/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../suggestions/SuggestionType","../SearchShellHelper","../SearchShellHelperHorizonTheme","../flp/FrontendSystem","../flp/BackendSystem"],function(e,t,a,r,o){function i(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function l(e,t,a){if(t)s(e.prototype,t);if(a)s(e,a);Object.defineProperty(e,"prototype",{writable:false});return e}var c=e["Type"];var d=i(t);var h=i(a);var u=i(r);var f=i(o);var p=function(){function e(t){n(this,e);this.searchModel=t;var a=f.getSystem(t);if(a&&!a.equals(u.getSystem())){this.tCodeStartUrl="#Shell-startGUI?sap-system=sid(".concat(a.id,")&sap-ui2-tcode=")}else{this.tCodeStartUrl="#Shell-startGUI?sap-ui2-tcode="}}l(e,[{key:"_addItemToRecentlyUsedStorage",value:function e(t,a){var r={label:t,url:this.tCodeStartUrl+a,icon:"sap-icon://generate-shortcut",uiSuggestionType:c.Transaction,searchTerm:t};if(this.searchModel.config.bRecentSearches&&this.searchModel.recentlyUsedStorage){this.searchModel.recentlyUsedStorage.addItem(r)}}},{key:"handleSearchTerm",value:function e(t,a){var r;var o={navigateToSearchApp:true};var i=this.searchModel.getDataSource();var n=this.searchModel.userCategoryManager;var s=(n===null||n===void 0?void 0:n.isFavActive())&&(n===null||n===void 0?void 0:(r=n.getCategory("MyFavorites"))===null||r===void 0?void 0:r.includeApps);if(i!==this.searchModel.allDataSource&&i!==this.searchModel.appDataSource&&!(i===this.searchModel.favDataSource&&s)){return o}if(window.sap.cf){return o}if(t.toLowerCase().indexOf("/n")===0){var l=t.slice(2);this._addItemToRecentlyUsedStorage(t,l);if(window.hasher){window.hasher.setHash(this.tCodeStartUrl+l)}else{window.location.href=this.tCodeStartUrl+l}o.navigateToSearchApp=false}if(t.toLowerCase().indexOf("/o")===0){var c=t.slice(2);this._addItemToRecentlyUsedStorage(t,c);window.open(this.tCodeStartUrl+c,"_blank","noopener,noreferrer");o.navigateToSearchApp=false}if(o.navigateToSearchApp===false){a.destroySuggestionRows();a.setValue("");if(!h.isSearchFieldExpandedByDefault()){d.collapseSearch()}}return o}}]);return e}();return p})})();