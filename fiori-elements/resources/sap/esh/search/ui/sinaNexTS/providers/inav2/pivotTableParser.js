/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../../core/core"],function(e){function r(e){return s(e)||n(e)||a(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,r){if(!e)return;if(typeof e==="string")return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor)t=e.constructor.name;if(t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}function n(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s(e){if(Array.isArray(e))return i(e)}function i(e,r){if(r==null||r>e.length)r=e.length;for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function u(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function l(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function o(e,r,t){if(r)l(e.prototype,r);if(t)l(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}var f=function(){function t(e){u(this,t);this.resultSet=e.resultSet}o(t,[{key:"parseNamedValue",value:function e(r){var t;var a;var n;for(var s in r){switch(s){case"Name":a=r[s];break;case"Value":t=r[s];break;default:if(!n){n={}}n[s]=r[s]}}if(n){n.Value=t;return{name:a,value:n}}return{name:a,value:t}}},{key:"formatItem",value:function e(r){var t;if(r.NamedValues){t=r.NamedValues}if(!t){return r}var a={};for(var n=0;n<t.length;++n){var s=t[n];var i=this.parseNamedValue(s);a[i.name]=this.formatItem(i.value)}return a}},{key:"formatItems",value:function r(t){var a={};for(var n=0;n<t.length;++n){var s=t[n];var i=this.formatItem(s);e.extend(a,i)}return a}},{key:"parse",value:function e(){if(!this.resultSet.Grids||!this.resultSet.Grids[0]||!this.resultSet.Grids[0].Axes){return{cells:[],axes:[]}}this.enhance(this.resultSet);var r=this.resultSet.Grids[0];if(r.Cells.length>0){return this.parseWithCells(r)}return this.parseWithoutCells(r)}},{key:"parseWithCells",value:function t(a){var n={axes:[],cells:[]};for(var s=0;s<a.Cells.length;s++){var i=a.Cells[s];var u=[];for(var l=0;l<i.Index.length;l++){var o=i.Index[l];var f=a.Axes[l];var v=this.resolve(f,o);u.push.apply(u,r(v))}var c=e.extend({},i);delete c.Index;u.push(c);n.cells.push(this.formatItems(u))}return n}},{key:"parseWithoutCells",value:function e(r){var t={axes:[],cells:[]};for(var a=0;a<r.Axes.length;++a){var n=r.Axes[a];var s=[];t.axes.push(s);for(var i=0;i<n.Tuples.length;++i){var u=this.resolve(n,i);s.push(this.formatItems(u))}}return t}},{key:"resolve",value:function e(r,t){var a=[];if(r.Tuples.length===0){return a}var n=r.Tuples[t];for(var s=0;s<n.length;++s){var i=n[s];var u=r.Dimensions[s].ItemList.Items[i];a.push(u)}return a}},{key:"enhance",value:function e(r){var t={};for(var a=0;a<r.ItemLists.length;++a){var n=r.ItemLists[a];t[n.Name]=n}for(var s=0;s<r.Grids.length;++s){var i=r.Grids[s];for(var u=0;u<i.Axes.length;++u){var l=i.Axes[u];for(var o=0;o<l.Dimensions.length;++o){var f=l.Dimensions[o];f.ItemList=t[f.ItemListName]}}}}}]);return t}();function v(e){var r=new f({resultSet:e});return r.parse()}var c={__esModule:true};c.ResultSetParser=f;c.parse=v;return c})})();