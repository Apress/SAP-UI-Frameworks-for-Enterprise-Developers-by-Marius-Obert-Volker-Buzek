/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/esh/search/ui/controls/SearchFacetItem","sap/m/List","sap/m/library","../sinaNexTS/providers/abap_odata/UserEventLogger"],function(e,t,i,a,r){function s(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var o=s(e);var n=a["ListMode"];var c=a["ListSeparators"];var l=r["UserEventType"];var d=i.extend("sap.esh.search.ui.controls.SearchFacet",{renderer:{apiVersion:2},metadata:{properties:{eshRole:{type:"string",defaultValue:"datasource"}}},init:function e(){this.data("sap-ui-fastnavgroup","false",true)},constructor:function e(t,a){var r=this;i.prototype.constructor.call(this,t,a);this.setMode(n.SingleSelectMaster);this.setShowSeparators(c.None);this.setIncludeItemInSelection(true);this.attachSelectionChange(function(e){if(r.getProperty("eshRole")==="attribute"){r.handleItemPress(e)}});this.attachItemPress(function(e){var t=r.getModel();if(t.config.searchScopeWithoutAll){return}if(r.getProperty("eshRole")==="datasource"){r.handleItemPress(e)}});this.addStyleClass("sapUshellSearchFacet")},handleItemPress:function e(t){var i=t.getParameter("listItem");var a=i.getBindingContext().getObject();var r=this.getModel();var s=a.filterCondition;if(i.getSelected()){if(typeof r.config.cleanUpSpaceFilters==="function"){r.config.cleanUpSpaceFilters(r,s)}r.addFilterCondition(s);r.eventLogger.logEvent({type:l.FACET_FILTER_ADD,referencedAttribute:a.facetAttribute,clickedValue:a.value,clickedPosition:i.getList().getItems().indexOf(i)})}else{r.removeFilterCondition(a.filterCondition);r.eventLogger.logEvent({type:l.FACET_FILTER_DEL,referencedAttribute:a.facetAttribute,clickedValue:a.value,clickedPosition:i.getList().getItems().indexOf(i)})}},onAfterRendering:function e(){var t=jQuery(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];if(t){var i=sap.ui.getCore().byId(t.id);i.setVisible(false)}var a=this.getModel();if(a.config.searchInAreaOverwriteMode&&typeof a.config.setQuickSelectDataSourceAllAppearsNotSelected==="function"){a.config.setQuickSelectDataSourceAllAppearsNotSelected(a,this)}},setEshRole:function e(i){var a={path:"items",template:new t("",{isDataSource:i.toLowerCase()==="datasource"})};switch(i.toLowerCase()){case"attribute":{var r=this.getModel();var s;if(r.config&&typeof r.config.getSearchInFacetListMode==="function"){var c=r.getProperty(this.getBindingContext().getPath());s=r.config.getSearchInFacetListMode(c)}this.setMode(s||n.MultiSelect);this.setHeaderText("");break}default:this.setMode(n.SingleSelectMaster);this.setHeaderText(o.getText("searchIn"));break}this.bindItems(a);this.setProperty("eshRole",i,true);return this}});return d})})();