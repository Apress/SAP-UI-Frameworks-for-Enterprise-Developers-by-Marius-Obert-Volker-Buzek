/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/esh/search/ui/controls/SearchResultListItem","sap/esh/search/ui/controls/SearchText"],function(e,t,i){function n(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var r=n(e);var s=t.extend("sap.esh.search.ui.controls.SearchResultListItemNote",{renderer:{apiVersion:2},_renderContentContainer:function e(t){var i=this.getModel();t.openStart("div",this.getId()+"-content");t["class"]("sapUshellSearchResultListItem-Content");if(!i.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-ContentValueHelp")}t.openEnd();this._renderTitleContainer(t);this._renderAttributesContainer(t);t.close("div")},_renderTitleContainer:function e(t){var i=this.getModel();if(!i.config.optimizeForValueHelp){t.openStart("div",this.getId()+"-title-and-image-container");t["class"]("sapUshellSearchResultListItem-TitleAndImageContainer");t.openEnd()}t.openStart("div",this.getId()+"-title-container");t["class"]("sapUshellSearchResultListItem-TitleContainer");if(i.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-TitleContainerValueHelp")}t.openEnd();this._renderCheckbox(t);var n=this.getProperty("titleUrl");var r=this.getAggregation("_titleLink");r.setHref(n);r.setText(this.getProperty("title"));if(n.length===0){r.setEnabled(false)}t.renderControl(r);var s=this.getAggregation("_typeText");s.setText(this.getProperty("Type"));t.renderControl(s);t.close("div");if(!i.config.optimizeForValueHelp){this._renderImageForPhone(t)}t.close("div")},_renderAttributesContainer:function e(t){t.openStart("div",this.getId()+"-attributes-expand-container");t["class"]("sapUshellSearchResultListItemDoc-AttributesExpandContainer");var i=this.getProperty("expanded");if(i){t["class"]("sapUshellSearchResultListItem-AttributesExpanded")}t.openEnd();t.openStart("div",this.getId()+"-attributes-and-actions");t["class"]("sapUshellSearchResultListItem-AttributesAndActions");t.openEnd();t.openStart("ul",this.getId()+"-attributes");t["class"]("sapUshellSearchResultListItem-Attributes");t.openEnd();this._renderThumbnailSnippetContainer(t);this._renderDocAttributesContainer(t);t.openStart("div",this.getId()+"-expand-spacer-attribute");t["class"]("sapUshellSearchResultListItem-ExpandSpacerAttribute");t.attr("aria-hidden","true");t.openEnd();t.close("div");t.close("ul");this._renderRelatedObjectsToolbar(t);t.close("div");t.close("div")},_renderImageForPhone:function e(t){if(this.getProperty("imageUrl")&&this.getProperty("containsThumbnail")===true){t.openStart("div",this.getId()+"-title-image");t["class"]("sapUshellSearchResultListItem-TitleImage");t.openEnd();t.openStart("div",this.getId()+"-image-container-alignment-helper");t["class"]("sapUshellSearchResultListItem-ImageContainerAlignmentHelper");t.openEnd();t.close("div");t.openStart("img",this.getId()+"-image");t["class"]("sapUshellSearchResultListItem-Image");t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("img");t.close("div")}},_renderDocAttributesContainer:function e(t){t.openStart("div",this.getId()+"-attributes-container");t["class"]("sapUshellSearchResultListItemNote-AttributesContainer");t.openEnd();var i=this.getProperty("attributes");this._renderAllAttributes(t,i);t.close("div")},_renderThumbnailSnippetContainer:function e(t){t.openStart("div",this.getId()+"-thumbnail-snippet-container");t["class"]("sapUshellSearchResultListItemNote-ThumbnailSnippetContainer");t.openEnd();this._renderSnippetContainer(t);t.close("div")},_renderSnippetContainer:function e(t){var n=this.getProperty("attributes");for(var r=0;r<n.length;r++){var s=n[r];if(s.longtext){var a=new i("".concat(this.getId(),"_snippet-").concat(r,"-longtext"));a.setText(s.value);a.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");t.renderControl(a)}}},_renderAllAttributes:function e(n,r){var s;var a;var o;var l;var d=4;if(this.getProperty("imageUrl")){d--}this.destroyAggregation("_attributeValues");for(var u=0,c=0;c<d&&u<r.length;u++){s=r[u];if(s.isTitle||s.longtext){continue}if(!s.value){continue}a=s.name;o=s.value;if(a===undefined||o===undefined){continue}if(!o||o===""){o=t.noValue}l=new i("".concat(this.getId(),"_").concat(u,"_").concat(c,"_noteText"),{text:o});l.addStyleClass("sapUshellSearchResultListItemNote-AttributeValue");l.addStyleClass("sapUshellSearchResultListItem-MightOverflow");n.renderControl(l);this.addAggregation("_attributeValues",l,true);c++}},_getExpandAreaObjectInfo:function e(){var t=$(this.getDomRef());var i=t.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var n=t.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var r=false;if(n.css("display")==="none"){n.css("display","block");r=true}var s=i.height();var a=t.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(r){n.css("display","")}var o=[];t.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var e=$(this);if(Number(e.css("order"))>2){o.push(this)}});var l=200;var d=l/10;var u={resultListItem:t,attributesExpandContainer:i,currentHeight:s,expandedHeight:a,elementsToFadeInOrOut:o,expandAnimationDuration:l,fadeInOrOutAnimationDuration:d,relatedObjectsToolbar:n};return u},hideDetails:function e(){var t=$(this.getDomRef());if(!this.isShowingDetails()){return}var i=this._getExpandAreaObjectInfo();var n=t.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var a=i.attributesExpandContainer.animate({height:n},{duration:i.expandAnimationDuration,progress:function e(t,n,o){if(!s&&o<=i.fadeInOrOutAnimationDuration){s=true;var l=$(i.elementsToFadeInOrOut).animate({opacity:0},i.fadeInOrOutAnimationDuration).promise();jQuery.when(a,l).done(function(){this.setProperty("expanded",false,true);i.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(i.elementsToFadeInOrOut).css("opacity","");var e=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var t=this.getAggregation("_expandButton");t.setTooltip(r.getText("showDetailBtn_tooltip"));t.setIcon(e);t.rerender()})}}}).promise()}});return s})})();