/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/esh/search/ui/SearchHelper","sap/m/List","sap/ui/core/ResizeHandler"],function(e,t,r){function i(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var i=0;var s=function(){};return{s:s,n:function(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,o;return{s:function(){r=r.call(e)},n:function(){var e=r.next();n=e.done;return e},e:function(e){l=true;o=e},f:function(){try{if(!n&&r.return!=null)r.return()}finally{if(l)throw o}}}}function a(e,t){if(!e)return;if(typeof e==="string")return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function s(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,i=new Array(t);r<t;r++){i[r]=e[r]}return i}var n=t.extend("sap.esh.search.ui.controls.SearchResultList",{renderer:{apiVersion:2},constructor:function e(r,i){t.prototype.constructor.call(this,r,i);this.addStyleClass("searchResultList")},onAfterRendering:function e(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++){i[a]=arguments[a]}t.prototype.onAfterRendering.apply(this,i);var s=this.getModel();var n=s.getProperty("/multiSelectionEnabled");if(n){this.enableSelectionMode(false)}this._prepareResizeHandler();this.collectListItemsForNavigation()},collectListItemsForNavigation:function e(){var t=this;var r=this.getItems();if(r.length===0){return}var i=function e(){t._doCollectListItemsForNavigation()};for(var a=0;a<r.length;a++){var s=r[a];if(s.hasStyleClass("sapUshellSearchResultListItemApps")){var n=s.getContent();if(n.length>0){n[0].addEventDelegate({onAfterRendering:i})}}}this._doCollectListItemsForNavigation()},_doCollectListItemsForNavigation:function t(){var r,i;var a=this.getDomRef();if(!a){return}var s=this.getItemNavigation();if(!s){this["_startItemNavigation"]();s=this.getItemNavigation()}if(!s){return}this["_bItemNavigationInvalidated"]=false;var n=a.getElementsByTagName("li");var l=[];var o=[];for(r=0;r<n.length;r++){var h=n[r];if(h.classList.contains("sapUshellSearchResultListItemApps")){var f=h.getElementsByClassName("sapUshellSearchTileWrapper");for(i=0;i<f.length;i++){var u=f[i];var c=e.getFocusableTileDomRef(u);if(!c||$(c).is(":hidden")){continue}l.push(c);o.push(c)}$(h).removeAttr("tabindex");$(h).removeAttr("role");$(h).attr("aria-hidden","true")}else if($(h).hasClass("sapUshellSearchResultListFooter")){var d=h.getElementsByClassName("sapUshellResultListMoreFooter");for(i=0;i<d.length;i++){l.push(d[i]);o.push(d[i])}}else if($(h).hasClass("sapUshellSearchResultListItem")){l.push(h);o.push(h)}}if(l.length>0){var v=$(l[0]).closest("ul");var p=v.length>0?v[0]:l[0].parentElement;s.setRootDomRef(p)}s.setItemDomRefs(l);s.setCycling(false);s.setPageSize(10);if(o.length>0){var g=$(o[0]).attr("id");for(r=1;r<o.length;r++){g+=" "+$(o[r]).attr("id")}$(this.getDomRef()).children("[role='listbox']").attr("aria-owns",g)}},_prepareResizeHandler:function e(){var t=this;var a=[768,1151];var s=function e(){var t=window.innerWidth;if(t<a[0]){return 0}for(var r=0;r<a.length-1;r++){if(t>=a[r]&&t<a[r+1]){return r+1}}return a.length};var n=s();this._resizeHandler=function(e){var r=s();if(r!=n||e){n=r;var a=t.getItems();var l=i(a),o;try{for(l.s();!(o=l.n()).done;){var h=o.value;var f=h.getContent();if((f===null||f===void 0?void 0:f.length)>0){var u;if(typeof((u=f[0])===null||u===void 0?void 0:u.resizeEventHappened)==="function"){var c;(c=f[0])===null||c===void 0?void 0:c.resizeEventHappened()}}}}catch(e){l.e(e)}finally{l.f()}}};r.register(this,function(){t._resizeHandler()})},resize:function e(){if(typeof this._resizeHandler!=="undefined"){this._resizeHandler(true)}},enableSelectionMode:function e(t){var r=this;var i=jQuery.Deferred();t=t===undefined?true:t;var a=$(this.getDomRef());if(!t){a.addClass("sapUshellSearchResultList-ShowMultiSelection");i.resolve();return i.promise()}var s=200;var n=a.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var l=a.find(".sapUshellSearchResultListItem-Attributes");var o=parseFloat(l.css("padding-left"));var h=n.find(".sapUshellSearchResultListItem-CheckboxContainer");var f=h.width();if(!a.hasClass("sapUshellSearchResultList-ShowMultiSelection")){n.css("width","0");n.css("opacity","0");l.css("padding-left",o);a.addClass("sapUshellSearchResultList-ShowMultiSelection");var u=o+f;n.animate({width:f,opacity:1},s,function(){$(r).css("width","");$(r).css("opacity","")});l.animate({"padding-left":u},s,function(){$(r).css("padding-left","")})}},disableSelectionMode:function e(t){var r=jQuery.Deferred();t=t===undefined?true:t;var i=$(this.getDomRef());if(!t){i.removeClass("sapUshellSearchResultList-ShowMultiSelection");r.resolve();return r.promise()}var a=200;var s=i.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var n=i.find(".sapUshellSearchResultListItem-Attributes");var l=parseFloat(n.css("padding-left"));var o=s.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=o.width();if(i.hasClass("sapUshellSearchResultList-ShowMultiSelection")){var f=l-h;var u=s.animate({width:0,opacity:0},a).promise();var c=n.animate({"padding-left":f},a).promise();jQuery.when(u,c).done(function(){i.removeClass("sapUshellSearchResultList-ShowMultiSelection");s.css("width","");s.css("opacity","");n.css("padding-left","")})}}});return n})})();