/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/base/Log","sap/m/MessageBox","sap/ui/core/library","../i18n"],function(e,r,t,o){function n(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function s(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function a(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}function i(e,r,t){if(r)a(e.prototype,r);if(t)a(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function u(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var l=t["MessageType"];var c=t["TextDirection"];var d=n(o);var f=function(){function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};s(this,t);u(this,"_oLogger",e.getLogger("sap.esh.search.ui.error.ErrorHandler"));this.searchModel=r.model;this.fnOnError=r.fnOnError||this.defaultErrorHandler}i(t,[{key:"_getLoggableError",value:function e(r){var t=r+"";if(typeof r.stack!=="undefined"){t=r.stack+"\n"}if(r.previous instanceof Error){t+="Previous error was: ".concat(this._getLoggableError(r.previous),"\n")}return t}},{key:"_addUI5LogMessage",value:function e(r,t){var o=this._getLoggableError(r)+"\n";if(this.searchModel&&this.searchModel.sinaNext){o+=this.searchModel.sinaNext.getDebugInfo()+"\n"}this._oLogger.error(t,o,"ErrorHandler")}},{key:"_openMessageBox",value:function e(t,o,n,s){r.error(o+"\n"+n+"\n"+s,{title:t,onClose:null,styleClass:"",initialFocus:null,textDirection:c.Inherit})}},{key:"setSearchModel",value:function e(r){this.searchModel=r}},{key:"onError",value:function e(r){return this.fnOnError(r)}},{key:"onErrorDeferred",value:function e(r){this.onError(r);return Promise.resolve(true)}},{key:"defaultErrorHandler",value:function e(r){var t=l.Error;var o=r.name||d.getText("searchError");var n=r.message||d.getText("error.message");var s=r.solution||d.getText("error.solution");var a=d.getText("error.details");switch(r.name){case"TypeError":{n=d.getText("error.TypeError.message");s=d.getText("error.TypeError.solution")}break;case"URIError":{s=d.getText("error.URIError.solution")}break;case"DataSourceAttributeMetadataNotFoundError":{n=d.getText("error.sina.DataSourceAttributeMetadataNotFoundError.message");s=d.getText("error.sina.DataSourceAttributeMetadataNotFoundError.solution")}break;case"NoValidEnterpriseSearchAPIConfigurationFoundError":{n=d.getText("error.sina.NoValidEnterpriseSearchAPIConfigurationFoundError.message")+"\n"+r.message;s=d.getText("error.sina.NoValidEnterpriseSearchAPIConfigurationFoundError.solution")}break;case"InBetweenConditionInConsistent":{n=d.getText("error.sina.InBetweenConditionInConsistent.description");s=d.getText("error.sina.InBetweenConditionInConsistent.solution")}}if(typeof this.searchModel==="undefined"||this.searchModel===null){this._addUI5LogMessage(r,o);this._openMessageBox(o,n,s,a);return}this.searchModel.setProperty("/boResults",[]);this.searchModel.setProperty("/origBoResults",[]);this.searchModel.setProperty("/boCount",0);this.searchModel.setProperty("/nlqSuccess",false);this.searchModel.setProperty("/nlqDescription","");this.searchModel.busyIndicator.setBusy(false);this._addUI5LogMessage(r,o);if(s){n=n+"\n\n"+s+"\n\n "+a}var i={type:t,title:o,description:n};this.searchModel.pushUIMessage(i)}}]);return t}();return f})})();