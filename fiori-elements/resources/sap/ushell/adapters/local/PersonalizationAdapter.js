// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils","sap/base/util/ObjectPath","sap/ui/util/Storage","sap/ushell/adapters/local/AdapterContainer"],function(t,e,o,r){"use strict";var n;var a=function(o,a,s){this._sStorageType=e.get("config.storageType",s)||r.prototype.constants.storage.LOCAL_STORAGE;switch(this._sStorageType){case r.prototype.constants.storage.LOCAL_STORAGE:break;case r.prototype.constants.storage.MEMORY:n=e.get("config.personalizationData",s)||{};break;default:throw new t.Error("Personalization Adapter Local Platform: unsupported storage type '"+this._sStorageType+"'")}};a.prototype.getAdapterContainer=function(t){return new r(t,this._sStorageType,n)};a.prototype.resetEntirePersonalization=function(){return new Promise(function(t,e){var o=this._getLocalStorage();setTimeout(function(){var r=o.removeAll();if(r){t()}else{e("could not delete personalization")}},0)}.bind(this))};a.prototype.isResetEntirePersonalizationSupported=function(){return new Promise(function(t,e){setTimeout(function(){t(true)},0)})};a.prototype.delAdapterContainer=function(t){return this.getAdapterContainer(t).del()};a.prototype._getLocalStorage=s;function s(){return new o(o.Type.local,"com.sap.ushell.adapters.sandbox.Personalization")}return a},false);