// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],function(e,t,a,i,n,r,s,l,o,u,p,c,g,d,_,f,b,y,I,v,m,V,w,h,S){"use strict";var x=s.MessageType;var T=s.ValueState;var P=s.mvc.ViewType;var D=l.ButtonType;var C={};C.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};C.getResourceBundleModel=function(){return t.i18nModel};C.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};C.getEmptyTileActionsRowObj=function(e){var t=C.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};C.getTileNavigationActionsRows=function(e,t){var a=[],i=[];i=this.getTileNavigationActions(e);if(i.length){for(var n=0;n<i.length;n++){a.push(R(i[n],t))}}else{a=[this.getEmptyTileActionsRowObj(t)]}return a};C.getTileNavigationActions=function(e){var t=[],a="";var i=e.bag.getBag("tileNavigationActions");if(i.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(i.getProperty("tile_navigation_actions"));for(var n=0;n<t.length;n++){if(t[n].text){if(i.getTextNames().indexOf("action_tile_"+(n+1))>=0){a=i.getText("action_tile_"+(n+1))}t[n].text=a}}}return t};var R=function(e,t){var a={},i=C.getResourceBundleModel().getResourceBundle();a.menu_title=e.text;a.icon=e.icon;if(e.targetURL.charAt(0)==="#"){a.target_type=i.getText("configuration.tile_actions.table.target_type.intent");var n=e.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true}else{a.target_type=i.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=e.targetURL;a.action="";a.isTargetTypeIntent=false}a.editable=t;return a};C.tileActionsRows2TileActionsArray=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].menu_title){t.push(A(e[a]))}}return t};var A=function(e){var t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL="#"+e.navigation_target+"-"+e.action}else{t.targetURL=e.navigation_target}return t};C.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(var a=0;a<t.length;a++){var i=t[a].text;e.setText("action_tile_"+(a+1),i)}};C.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};C.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};C.tableHasDuplicateParameterNames=function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a].name;if(i!==""){if(t[i]){return true}t[i]=true}}return false};C.tableHasInvalidSapPrelaunchOperationValue=function(t){for(var a=0;a<t.length;a++){if(t[a].name==="sap-prelaunch-operations"){if(e.parseAndValidateOperations(t[a].defaultValue)===null){return false}break}}return true};C.getMappingSignatureString=function(e,t){var a="";for(var i=0;i<e.length;i++){if(e[i].name){a+=E(e[i])+"&"}}return t?a+"*=*":a.substring(0,a.length-1)};var E=function(e){var t="";if(e.mandatory){if(e.isRegularExpression){t="{"+e.name+"="+encodeURIComponent(e.value)+"}"}else{t=e.name+"="+encodeURIComponent(e.value)}}else{t="["+e.name+"="+encodeURIComponent(e.defaultValue)+"]"}return t};C.getMappingSignatureTableData=function(e,t){var a=[];var i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n];if(r!=="*=*"){a.push(M(i[n],t))}}return a};var M=function(e,t){var a={};if(e.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";e=e.substring(1,e.length-1);a.name=e.substring(0,e.indexOf("="));a.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{a.mandatory=true;a.defaultValue="";if(e.charAt(0)==="{"){a.isRegularExpression=true;e=e.substring(1,e.length-1)}else{a.isRegularExpression=false}a.name=e.substring(0,e.indexOf("="));a.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}a.editable=t;if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}return a};C.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};C.getMappingSignature=function(e,t){var a=t?"allowed":"ignored";var i=new RegExp("%%UserDefault[.].+%%");var n=[];var r={parameters:{},additional_parameters:a};e.forEach(function(e){r.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=i.exec(e.defaultValue);if(n){e.defaultValue=n[0]}r.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=i.exec(e.value);if(n){e.value=n[0]}r.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){r.parameters[e.name].filter.format="regexp"}}});return r};C.getSignatureTableData=function(e,t){var a=[];var i={};var n={};var r=e.parameters;for(var s in r){n=r[s];i={};i.editable=t;i.name=s;i.mandatory=n.required;if(n.rename_to){i.rename_to=n.rename_to}else{i.rename_to=n.renameTo}if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}if(n.filter){i.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){i.isRegularExpression=true}}if(n.defaultValue){i.defaultValue=n.defaultValue.value}a.push(i)}return a};C.getTranslatedTitle=function(e){if(e.bag){var t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};C.getTranslatedSubtitle=function(e,t){if(e.bag){var a=e.bag.getBag("tileProperties");if(a.getTextNames().indexOf("display_subtitle_text")>=0){return a.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};C.getTranslatedProperty=function(e,t,a){if(e.bag){var i=e.bag.getBag("tileProperties");if(i.getTextNames().indexOf(a)>=0){return i.getText(a)}}return t[a]};C.getActionConfiguration=function(e,t){var a=e.configuration.getParameterValueAsString("tileConfiguration");var i=JSON.parse(a||"{}"),n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=C.getResourceBundleModel().getResourceBundle()}i.semantic_object=i.semantic_object||(t?"["+n.getText("configuration.semantic_object")+"]":"");i.semantic_action=i.semantic_action||(t?"["+n.getText("configuration.semantic_action")+"]":"");i.navigation_provider=i.navigation_provider||"";i.navigation_provider_role=i.navigation_provider_role||"";i.navigation_provider_instance=i.navigation_provider_instance||"";i.target_application_id=i.target_application_id||"";i.target_application_alias=i.target_application_alias||"";i.display_info_text=i.display_info_text||"";i.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){i.editable=false}}return i};C.getViewConfiguration=function(e){var t=e.getViewData();var a=t.chip;var i=C.getAppLauncherConfig(a,true,true);return i};C.getConfigurationUi=function(e,t){var a,i,s,l,o;var u=e.getViewData();var p=C.getViewConfiguration(e);var c=new r({config:p,tileModel:e.getModel()});return n.create({type:P.XML,viewData:u,viewName:t}).then(function(t){t.setModel(c);a=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(a){a.getModel().setProperty("/enabled",p.navigation_use_semantic_object);a.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}i=t.byId("navigation_provider_roleInput");if(i){i.getModel().setProperty("/value",p.navigation_provider_role)}s=t.byId("navigation_provider_instanceInput");if(s){s.getModel().setProperty("/value",p.navigation_provider_instance)}l=t.byId("target_application_aliasInput");if(l){l.getModel().setProperty("/value",p.target_application_alias)}o=t.byId("targetTypeInput");if(o){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){C.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){o.setSelectedKey("WCF");C.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){o.setSelectedKey("SAPUI5");C.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){C.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){C.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){C.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){C.displayURLTApplicationTypeFields(t);c.setProperty("/config/editable",false);c.setProperty("/config/manualFormFactor",false)}}return t})};C._updateTilePropertiesTexts=function(e,t){var a=t.getTextNames(),i=e.getModel();a.forEach(function(e){i.setProperty("/data/"+e,t.getText(e));i.setProperty("/config/"+e,t.getText(e))})};C._updateTileConfiguration=function(e,t){var a=e.getModel(),i=JSON.parse(t),n;Object.keys(i).forEach(function(e){n=i[e];a.setProperty("/data/"+e,n);a.setProperty("/config/"+e,n);if(e==="navigation_target_url"){a.setProperty("/nav/"+e,n)}})};C.aData=[];C.aActionData=[];C.aRoleData=[];C.aAliasData=[];C.objectSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("name",u.Contains,a);r=new o("obj",u.Contains,a);t.push(r);t.push(n);i.filter(new o(t,false))}};C.actionSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("text",u.Contains,a);t.push(n);i.filter(new o(t,false))}};C.roleSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("role",u.Contains,a);r=new o("instance",u.Contains,a);t.push(n);t.push(r);i.filter(new o(t,false))}};C.instanceSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");if(a!==""){l=new o("instance",u.Contains,a);t.push(l)}if(n!==""){s=new o("role",u.EQ,n);t.push(s)}if(t.length>0){r.filter(new o(t,true))}}};C.instanceSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,p,c;r=a.byId("navigation_provider_roleInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){c=new o("instance",u.Contains,n);i.push(c)}if(s!==""){p=new o("role",u.EQ,s);i.push(p)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new o(i,true))}};C.aliasSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,p,c;r=a.byId("navigation_provider_instanceInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){c=new o("alias",u.Contains,n);i.push(c)}if(s!==""){p=new o("instance",u.EQ,s);i.push(p)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new o(i,true))}};C.aliasSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");s=new o("instance",u.EQ,n);if(a!==""){l=new o("alias",u.Contains,a);t.push(l)}t.push(s);r.filter(new o(t,true))}};C.objectSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("name",u.Contains,t);a.push(n);i.filter(a)}};C.actionSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("text",u.Contains,t);a.push(n);i.filter(a)}};C.roleSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("role",u.Contains,t);a.push(n);i.filter(a)}};C.instanceSelectUpdateDialog=function(e,t){var a=[],i,n=e.getBinding("items"),r,s,l;i=e.getCustomData();s=i[0].getValue();if(t!==undefined){r=new o("instance",u.Contains,t);a.push(r)}if(s!==""){l=new o("role",u.EQ,s);a.push(l)}if(a.length>0){n.filter(a,true)}};C.aliasSelectUpdateDialog=function(e,t){var a=[],i,n,r=e.getBinding("items"),s,l;i=e.getCustomData();n=i[0].getValue();if(t!==undefined){l=new o("alias",u.Contains,t);a.push(l)}if(n!==""){s=new o("instance",u.EQ,n);a.push(s)}if(a.length>0){r.filter(a,true)}};C.sSelectedColor=(w(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");C.sDeselectedColor=(w(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");C.iconSelect=function(e,t){e.setColor(t?C.sSelectedColor:C.sDeselectedColor);e.setActiveColor(t?C.sDeselectedColor:C.sSelectedColor)};C.onSelectIcon=function(e,t,a,i){var n=e.getView().getModel(),r;if(t){r=n.getProperty("/config/tile_actions_selected_icon")}else{r=n.getProperty("/config/selected_icon")}if(r){C.iconSelect(r,false)}r=i.getSource();C.iconSelect(r,true);n.setProperty("/config/ok.enabled",true);if(t){n.setProperty("/config/tile_actions_selected_icon",r)}else{n.setProperty("/config/selected_icon",r)}e.byId("selectIconDialog").setTitle(r.getSrc())};C.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};C.onSelectIconOk=function(e,t){var a=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",a.getSrc());e.byId("iconInput").setValueState(T.None)}else{a=e.getModel().getProperty("/config/tile_actions_selected_icon");if(a){t.setValue(a.getSrc());t.setValueState(T.None)}}C.onSelectIconClose(e)};C.iconSelectOnValueHelpRequest=function(e,t,a){var n=e.getView().getModel();var r=e.getView().byId("icons");var s=p.getIconCollectionNames();var l=e.getView().byId("selectIconDialog");var o=e.getView().byId("ok");var u,g,d,_,f,b,y,I=false;r.destroyContent();if(a){d=i.byId(t.getParameter("id"));g=d.getValue()}else{g=n.getProperty("/config/display_icon_url")}o.attachEventOnce("press",function(){C.onSelectIconOk(e.getView(),d)});s.sort();s=s.filter(function(e){if(e==="BusinessSuiteInAppSymbols"){I=true;return false}return true});if(I){s.push("BusinessSuiteInAppSymbols")}for(f=0;f<s.length;f+=1){_=p.getIconNames(s[f]);_.sort();for(b=0;b<_.length;b+=1){y=p.getIconURI(_[b],s[f]);r.addContent(new c({height:"38px",press:C.onSelectIcon.bind(null,e,a,d),size:"2rem",src:y,tooltip:y,width:"38px"}))}}u=r.getContent();n.setProperty("/config/ok.enabled",false);l.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(f=0;f<u.length;f+=1){if(u[f].getSrc()===g){if(a){n.setProperty("/config/tile_actions_selected_icon",u[f])}else{n.setProperty("/config/selected_icon",u[f])}C.iconSelect(u[f],true);n.setProperty("/config/ok.enabled",true);l.setTitle(g)}else{C.iconSelect(u[f],false)}}l.open()};C.objectSelectOnValueHelpRequest=function(e,t,a){var n=e.getView();var s=C.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object");var l;var o;var u=new r;var p=new g("semantic_object_select_dialog",{title:s,search:C.objectSelectDoSearch,liveChange:C.objectSelectDoSearch}),c=new d({title:"{obj}"});if(a){l=i.byId(t.getParameter("id"))}else{l=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}o=l.getValue();p.open(o);u.setData(e.aDefaultObjects.concat(C.aData));p.bindAggregation("items","/",c);p.setModel(u);C.objectSelectUpdateDialog(p,o);p.attachCancel(function(e){l.setValue(o);if(!a){l.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){l.setValue(t.getTitle());if(!a){l.fireChange()}}p.destroy();p=null})};C.actionSelectOnValueHelpRequest=function(e,t,a){var n=e.getView();var s=C.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action");var l;var o;var u=new r;var p=new g("semantic_action_select_dialog",{title:s,search:C.actionSelectDoSearch,liveChange:C.actionSelectDoSearch}),c=new d({title:"{text}"});if(a){l=i.byId(t.getParameter("id"))}else{l=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}o=l.getValue();p.open(o);u.setData(C.aActionData);p.bindAggregation("items","/items",c);p.setModel(u);C.actionSelectUpdateDialog(p,o);p.attachCancel(function(e){l.setValue(o);if(!a){l.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){l.setValue(t.getTitle());if(!a){l.fireChange();l.fireLiveChange({newValue:t.getTitle()})}}p.destroy();p=null})};C.roleSelectOnValueHelpRequest=function(e){var t=e.getView(),a=C.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),i,n,s,l=new r,o=new f("role_select_dialog",{title:a,search:C.roleSelectDoSearch,liveChange:C.roleSelectDoSearch,columns:[new b({header:[new _({text:C.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new b({header:[new _({text:C.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),u=new y({cells:[new _({text:"{role}"}),new _({text:"{instance}"})]});i=t.byId("navigation_provider_roleInput");n=t.byId("navigation_provider_instanceInput");s=i.getValue();o.open(s);l.setData(e.aDefaultObjects.concat(C.aRoleData));o.bindAggregation("items","/",u);o.setModel(l);C.roleSelectUpdateDialog(o,s);o.attachCancel(function(e){i.setValue(s);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getCells()[0].getText());n.setValue(t.getCells()[1].getText());i.fireChange();n.fireChange()}o.destroy();o=null})};C.instanceSelectOnValueHelpRequest=function(e){var t=e.getView();var a;var i=C.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance");var n;var s;var l=new r;var o=new g("instance_select_dialog",{title:i,search:C.instanceSelectDoSearch,liveChange:C.instanceSelectDoSearch}),u=new d({title:"{instance}"});n=t.byId("navigation_provider_instanceInput");s=n.getValue();a=t.byId("navigation_provider_roleInput").getValue();o.addCustomData(new I({key:"role",value:a}));o.open(s);l.setData(e.aDefaultObjects.concat(C.aRoleData));o.bindAggregation("items","/",u);o.setModel(l);C.instanceSelectUpdateDialog(o,s);o.attachCancel(function(e){n.setValue(s);n.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){n.setValue(t.getTitle());n.fireChange()}o.destroy();o=null})};C.applicationAliasSelectOnValueHelpRequest=function(e){var t=e.getView();var a=C.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias");var i;var n;var s;var l=new r;var o=new g("alias_select_dialog",{title:a,search:C.aliasSelectDoSearch,liveChange:C.aliasSelectDoSearch}),u=new d({title:"{alias}"});i=t.byId("target_application_aliasInput");n=i.getValue();s=t.byId("navigation_provider_instanceInput").getValue();o.addCustomData(new I({key:"instance",value:s}));o.open(n);l.setData(e.aDefaultObjects.concat(C.aAliasData));o.bindAggregation("items","/",u);o.setModel(l);C.aliasSelectUpdateDialog(o,n);o.attachCancel(function(e){i.setValue(n);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getTitle());i.fireChange()}o.destroy();o=null})};C.onTargetTypeChange=function(e){var t=e.getParameter("id");var a=i.byId(t).getParent().getCells();var n=e.getSource().getSelectedKey();if(n==="INT"){a[3].setEnabled(true);a[2].setShowValueHelp(true);a[2].setValue("")}else{a[2].setShowValueHelp(false);a[2].setValue("");a[3].setEnabled(false);a[3].setValue("")}};C.addTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=this.getEmptyTileActionsRowObj();a.push(i);t.setProperty("/config/tile_actions_rows",a)};C.deleteTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=e.byId("tileActions");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/tile_actions_rows",a)};C.checkInput=function(e,t){var a=C.getResourceBundleModel().getResourceBundle(),i=e.byId("iconInput"),n=e.byId("useLpdCheckbox"),r=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput"),s=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput"),l=T.None,o=null,u=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case i:if(u!==""&&u.substring(0,11)!=="sap-icon://"){l=T.Error;o=a.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){s.setValueState(T.None);r.setValueState(T.None)}break;case r:if(/[-#&? ]/.test(u)){l=T.Error;o=a.getText("configuration.semantic_object.error_invalid_chars")}else if(u===""){l=T.Error}break;case s:if(/[-#&? ]/.test(u)){l=T.Error;o=a.getText("configuration.semantic_action.error_invalid_chars")}else if(u===""){l=T.Error}break;default:break}if(l){t.getSource().setValueState(l);if(o!==null){t.getSource().setValueStateText(o||"")}}};C.checkInputOnSaveConfig=function(e){var t=e.byId("iconInput");var a=e.byId("navigation_semantic_objectInput");var i=e.byId("navigation_semantic_actionInput");var n=e.byId("useLpdCheckbox");var r=C.getResourceBundleModel().getResourceBundle();var s=false;if(t.getValue()!==""&&!C.isIconURIValid(t.getValue())){t.setValueState(T.Error);t.setValueStateText(r.getText("configuration.display_icon_url.warning"));s=true}if(n.getSelected()&&/[-#&? ]/.test(a.getValue())){a.setValueState(T.Error);a.setValueStateText(r.getText("configuration.semantic_object.error_invalid_chars"));s=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(T.Error);s=true}if(/[-#&? ]/.test(i.getValue())){i.setValueState(T.Error);i.setValueStateText(r.getText("configuration.semantic_action.error_invalid_chars"));s=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(T.Error);s=true}return s};C.checkTileActions=function(e){var t=e.getModel().getProperty("/config/tile_actions_rows");var a=C.getResourceBundleModel().getResourceBundle();var i=false;for(var n=0;n<t.length;n++){if(!t[n].menu_title&&(t[n].navigation_target||t.length>1)){t[n].valueState=T.Error;i=true}else{t[n].valueState=T.None}if(t[n].icon){if(!C.isIconURIValid(t[n].icon)){t[n].iconValueState=T.Error;t[n].iconValueStateText=a.getText("configuration.display_icon_url.warning");i=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return i};C.isIconURIValid=function(e){var t=[];var a="";var i="";var n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){a=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){i=t[1]}else{i=""}n=p.getIconURI(i,a);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){i=t[1];if(!p.getIconInfo(i)){return false}}else{return false}}return true};C.checkTMInput=function(e,t){var a=C.getResourceBundleModel().getResourceBundle(),i=e.byId("semantic_objectInput"),n=e.byId("semantic_actionInput"),r=e.byId("target_application_descriptionInput"),s=e.byId("target_application_urlInput"),l=e.byId("target_application_componentInput"),o=e.byId("navigation_provider_roleInput"),u=e.byId("navigation_provider_instanceInput"),p=e.byId("target_application_aliasInput"),c=e.byId("target_application_idInput"),g=String(t.getParameter("newValue")||"").trim(),d=T.None,_=null;switch(t.getSource()){case i:if(/[-#&? ]/.test(g)){d=T.Error;_=a.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(T.Error)}break;case n:if(/[-#&? ]/.test(g)){d=T.Error;_=a.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=T.Error}break;case r:if(g===""){d=T.Error}break;case s:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=T.Error;_=a.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=T.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=T.Error;_=a.getText("configuration.target_application.component.error_invalid_input")}break;case o:if(g===""){d=T.Error}else if(!/^[\w/]+$/.test(g)){d=T.Error;_=a.getText("configuration.target_application.role.error_invalid_chars")}break;case u:if(g===""){d=T.Error}else if(!/^[\w/]+$/.test(g)){d=T.Error;_=a.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&c.getValue()===""){d=T.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&c.getValue()!==""){d=T.Error;_=a.getText("configuration.target_application.alias_id.warning");c.setValueState(d);c.setValueStateText(_)}else{c.setValueState(T.None)}break;case c:if(g===""&&p.getValue()===""){d=T.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=T.Error;_=a.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=T.Error;_=a.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(T.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};C.checkTMInputOnSaveConfig=function(e){var t=C.getResourceBundleModel().getResourceBundle();var a=e.byId("semantic_objectInput");var i=e.byId("semantic_actionInput");var n=e.byId("target_application_descriptionInput");var r=e.byId("target_application_urlInput");var s=e.byId("target_application_componentInput");var l=e.byId("navigation_provider_roleInput");var o=e.byId("navigation_provider_instanceInput");var u=e.byId("target_application_aliasInput");var p=e.byId("target_application_idInput");var c=e.byId("targetTypeInput");var g=e.byId("target_transactionInput");var d=e.byId("target_web_dynpro_applicationInput");var _=e.byId("target_wcf_application_idInput");var f=e.byId("desktopCB");var b=e.byId("tabletCB");var y=e.byId("phoneCB");var I=false;a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(T.Error);a.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(T.Error);i.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(i.getValue()===""){i.setValueState(T.Error);I=true}var v=e.getModel().getProperty("/config/navigation_provider"),m;if(v==="SAPUI5"){if(n.getValue()===""){n.setValueState(T.Error);I=true}if(r.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(T.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(s.getValue()===""){s.setValueState(T.Error);I=true}else if(s.getValue().substring(0,17)==="SAPUI5.Component="){s.setValueState(T.Error);s.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(v==="LPD"){if(l.getValue()===""){l.setValueState(T.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(T.Error);m=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(m);I=true}if(o.getValue()===""){o.setValueState(T.Error);I=true}if(!/^[\w]+$/.test(o.getValue())){o.setValueState(T.Error);m=t.getText("configuration.target_application.instance.error_invalid_chars");o.setValueStateText(m);I=true}if(u.getValue()===""&&p.getValue()===""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(T.Error);u.setValueStateText(m);p.setValueState(T.Error);p.setValueStateText(m);I=true}if(u.getValue()!==""&&p.getValue()!==""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(T.Error);u.setValueStateText(m);p.setValueState(T.Error);p.setValueStateText(m);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(T.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(v==="TR"){if(g.getValue()===""){g.setValueState(T.Error);I=true}}else if(v==="WDA"){if(d.getValue()===""){d.setValueState(T.Error);I=true}}else if(v==="WCF"){if(_.getValue()===""){_.setValueState(T.Error);I=true}}else if(v==="URL"){if(r.getValue()===""){r.setValueState(T.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(T.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{c.setValueState(T.Error);c.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){m=t.getText("configuration.form_factor.warning");f.setValueState(T.Error);f.setValueStateText(m);b.setValueState(T.Error);b.setValueStateText(m);y.setValueState(T.Error);y.setValueStateText(m);I=true}return I};C.updateTooltipForDisabledProperties=function(e){var t=e.getModel();var a=t.getProperty("/config/isLocaleSuitable");if(!a){var i=C.getResourceBundleModel().getResourceBundle();var n=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(n);e.byId("subtitleInput").setTooltip(n);e.byId("keywordsInput").setTooltip(n);e.byId("infoInput").setTooltip(n)}};C.updateMessageStripForOriginalLanguage=function(e){var t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){var a=C.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);var i=e.byId("messageStrip");i.setVisible(true);i.setText(a);i.setType(x.Warning)}};C.createSemanticObjectModel=function(e,t,i){var n=e.getView(),s="/sap/opu/odata/UI2/INTEROP/SemanticObjects",l=[{obj:"",name:""},{obj:"*",name:"*"}],o=(i||l).slice(0),u=new r;u.setSizeLimit(999999);u.setProperty("/value","");u.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new v({text:"{suggest>obj}"}));t.setModel(u,"suggest");if(C.aData.length>0){setTimeout(function(){u.setData({items:o.concat(C.aData)},true)},0);return}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].id;a=e.results[i].text;C.aData.push({obj:t,name:a||t})}u.setData({items:o.concat(C.aData)},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,n.getViewName()||"sap.ushell.components.tiles.utils")})};C.createRoleModel=function(e,t,i){var n=e.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",l=new r,o=new r;l.setSizeLimit(999999);o.setSizeLimit(999999);l.setProperty("/value","");l.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var u=new y({cells:[new m({text:"{role}"}),new m({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",u);i.bindAggregation("suggestionItems","/items",new v({text:"{instance}"}));i.setModel(o);t.setModel(l);t.attachSuggestionItemSelected(function(e){i.setValue(e.getParameter("selectedRow").getCells()[1].getText());i.fireChange()});if(C.aRoleData.length>0){l.setData({items:C.aRoleData},false);o.setData({items:C.aRoleData},false);return}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].lpdRole;a=e.results[i].instance;C.aRoleData.push({role:t,instance:a})}l.setData({items:C.aRoleData},true);o.setData({items:C.aRoleData},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,n.getViewName()||"sap.ushell.components.tiles.utils")})};C.createAliasModel=function(e,t){var i=e.getView(),n,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",l=new r;l.setSizeLimit(999999);l.setProperty("/value","");l.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new v({text:"{alias}"}));t.setModel(l);n=C.getAppLauncherConfig(i.oViewData.chip,true,true);if(n&&n.navigation_provider_role&&n.navigation_provider_instance){if(n.navigation_provider_role!==""&&n.navigation_provider_instance!==""){s=s+"?role='"+n.navigation_provider_role+"'&instance='"+n.navigation_provider_instance+"'"}}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;C.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;C.aAliasData.push({role:a,instance:i,alias:t})}r=l.getData();if(r){r.items=C.aAliasData}else{r={items:C.aAliasData}}l.setData(r,false)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};C.updateAliasModel=function(e,t){var i,n,r,s=t.getModel();n=e.byId("navigation_provider_instanceInput").getValue();r=e.byId("navigation_provider_roleInput").getValue();i="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+r+"'&instance='"+n+"'";a.read({requestUri:i,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;C.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;C.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=C.aAliasData}else{r={items:C.aAliasData}}s.setData(r,false)},function(t){var a=t&&t.message?t.message:t;if(t.response){a+=" - "+t.response.statusCode+" "+t.response.statusText}h.error("Could not fetch data: "+i+": "+a,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};C.createActionModel=function(e,t){var a=new r;var i=e.getView(),n,s;a.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});C.aActionData=a.getData();n=C.getAppLauncherConfig(i.oViewData.chip,true,true);s=n.navigation_semantic_action||n.semantic_action;if(s){if(!a.getData().items.some(function(e){return e.text===s})){a.getData().items.push({text:s})}}t.bindAggregation("suggestionItems","items>/items",new v({text:"{items>text}"}));t.setModel(a,"items");t.getBinding("suggestionItems").sort(new V("text",false))};C.createNavigationProviderModel=function(e,t){var a=new r;var i=C.getResourceBundleModel().getResourceBundle();var n=[{key:"SAPUI5",text:i.getText("configuration.target_application.sapui5")},{key:"LPD",text:i.getText("configuration.target_application.lpd_cust")},{key:"TR",text:i.getText("configuration.target_application.transaction")},{key:"WDA",text:i.getText("configuration.target_application.web_dynpro")},{key:"URL",text:i.getText("configuration.target_application.url")}];var s=C.getViewConfiguration(e.getView()).navigation_provider;if(s==="WCF"){n.push({key:"WCF",text:i.getText("configuration.target_application.wcf")})}else if(s==="URLT"){n.push({key:"URLT",text:i.getText("configuration.target_application.urlt")})}a.setData({items:n});t.bindItems("items>/items",new v({key:"{items>key}",text:"{items>text}"}));t.setModel(a,"items");t.getBinding("items").sort(new V("text",false))};C.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":C.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":C.displaySapui5ApplicationTypeFields(t);break;case"TR":C.displayTransactionApplicationTypeFields(t);break;case"WDA":C.displayWebDynproApplicationTypeFields(t);break;case"URL":C.displayURLApplicationTypeFields(t);break;case"WCF":C.displayWCFApplicationTypeFields(t);break;case"URLT":C.displayURLTApplicationTypeFields(t);break}};C.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};C.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};C.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};C.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};C.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};C.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};C.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};C.getAppLauncherConfig=function(e,t,a){var n;var r=e.configuration.getParameterValueAsString("tileConfiguration");var s;try{s=JSON.parse(r||"{}")}catch(e){h.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}s.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){s.editable=false}}var l=C.getTranslatedTitle(e);var o=C.getTranslatedSubtitle(e,s);var u=C.getTranslatedProperty(e,s,"display_info_text");var p=C.getTranslatedProperty(e,s,"display_search_keywords");if(t){n=C.getResourceBundleModel().getResourceBundle();if(a&&e.bag){var c=e.bag.getOriginalLanguage();var g=i.getConfiguration().getLocale().getSAPLogonLanguage();var d=i.getConfiguration().getLanguage();s.isLocaleSuitable=c===""||c.toLowerCase()===g.toLowerCase()||c.toLowerCase()===d.toLowerCase();s.orgLocale=c;s.userLocale=g}}s.display_icon_url=s.display_icon_url||"";if(u!==undefined){s.display_info_text=u}else if(s.display_info_text===undefined){if(t&&!a){s.display_info_text="["+n.getText("configuration.display_info_text")+"]"}else{s.display_info_text=""}}s.navigation_semantic_object=s.navigation_semantic_object||"";s.navigation_semantic_action=s.navigation_semantic_action||"";s.navigation_semantic_parameters=s.navigation_semantic_parameters||"";s.display_number_unit=s.display_number_unit||"";s.display_number_factor=s.display_number_factor||"";s.service_refresh_interval=s.service_refresh_interval?parseInt(s.service_refresh_interval,10):0;s.service_url=s.service_url||"";s.navigation_target_url=s.navigation_target_url||"";if(t&&C.isInitial(l)){s.display_title_text=a?"":"["+n.getText("configuration.display_title_text")+"]";s.display_subtitle_text=a?"":"["+n.getText("configuration.display_subtitle_text")+"]"}else{s.display_title_text=l||s.display_title_text||"";if(o!==undefined){s.display_subtitle_text=o}else if(s.display_subtitle_text===undefined){s.display_subtitle_text=""}}s.navigation_use_semantic_object=s.navigation_use_semantic_object!==false;s.display_search_keywords=p||s.display_search_keywords||"";if(t){s.display_number_value=s.display_number_value||1234}s.form_factors=s.form_factors?s.form_factors:C.getDefaultFormFactors();s.desktopChecked=s.form_factors.manual.desktop;s.tabletChecked=s.form_factors.manual.tablet;s.phoneChecked=s.form_factors.manual.phone;s.manualFormFactor=!s.form_factors.appDefault&&s.editable;s.appFormFactor=s.form_factors.appDefault;s.formFactorConfigDefault=!!s.form_factors.defaultParam;if(s.signature){s.rows=C.getSignatureTableData(s.signature,a&&s.editable)}else{s.rows=s.mapping_signature&&s.mapping_signature!=="*=*"?C.getMappingSignatureTableData(s.mapping_signature,a&&s.editable):[C.getEmptyRowObj(s.editable)]}if(s.signature){s.isUnknownAllowed=s.signature.additional_parameters==="allowed"||s.signature.additionalParameters==="allowed"}else{s.isUnknownAllowed=s.mapping_signature!==undefined?C.getAllowUnknownParametersValue(s.mapping_signature):true}if(t){s.tile_actions_rows=C.getTileNavigationActionsRows(e,s.editable)}else if(!s.actions){s.actions=C.getTileNavigationActions(e)}if(t){var _=e.bag.getBag("deprecationProperties"),f=_.getProperty("deprecation"),b=null;if(f){b=n.getText(f==="D"?"configuration.app_deprecated":"configuration.app_archived",[_.getProperty("successor")])}s.deprecation_text=b}return s};C.getDataToDisplay=function(e,t){var a=0,i,n,r,s,l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(i=0,n=t.results.length;i<n;i=i+1){r=t.results[i].number||0;if(typeof r==="string"){r=parseFloat(r)}a=a+r;s=t.results[i].targetParams;if(s){l.targetParams.push(s)}}l.display_number_value=a}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{var o=this._shouldProcessDigits(t.number,t.numberDigits),u=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=u||o){var p=this._normalizeNumber(t.number,u,t.numberFactor,t.numberDigits);l.display_number_factor=p.numberFactor;l.display_number_value=p.displayNumber}else{var c=S.getFloatInstance({maxFractionDigits:u});l.display_number_value=c.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};C._normalizeNumber=function(e,t,a,i){var n;if(isNaN(e)){n=e}else{var r=S.getFloatInstance({maxFractionDigits:i});if(!a){var s=Math.abs(e);if(s>=1e9){a="B";e/=1e9}else if(s>=1e6){a="M";e/=1e6}else if(s>=1e3){a="K";e/=1e3}}n=r.format(e)}var l=n;var o=l[t-1];t-=o==="."||o===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:a}};C._shouldProcessDigits=function(e,t){var a;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){a=e.split(".")[1].length;if(a>t){return true}}return false};C.getTileSettingsAction=function(e,t,a){var i=C.getResourceBundleModel().getResourceBundle();var n=!a||a==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:i.getText(n),press:function(){return new Promise(function(n){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout"],function(s,l,o,u,p){var c={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!a||a==="tile"){c.info=e.getProperty("/config/display_info_text");c.icon=e.getProperty("/config/display_icon_url");c.keywords=e.getProperty("/config/display_search_keywords")}else if(a==="link"){c.showInfo=false;c.showIcon=false;c.showPreview=false}o.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(e){var o=new r(c);e.setModel(o);var g=new u({id:"tileSettings",layout:p.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");var d=new s("bookmarkOkBtn",{text:i.getText("okBtn"),type:D.Emphasized,press:function(){t(e);b.close()},enabled:true});var _=new s("bookmarkCancelBtn",{text:i.getText("cancelBtn"),press:function(){b.close()}});var f=function(e){d.setEnabled(!!e.trim())};e.getTitleInput().attachLiveChange(function(){f(this.getValue())});var b=new l({id:"settingsDialog",title:!a||a==="tile"?i.getText("tileSettingsDialogTitle"):i.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:g,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){b.destroy()}}).addStyleClass("sapContrastPlus");b.open();n(b)})})})}}};C.getSemanticNavigationUrl=function(e){var t="#"+String(e.navigation_semantic_object||"").trim();t+="-"+String(e.navigation_semantic_action||"").trim();if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim()>0){t+="?"+String(e.navigation_semantic_parameters||"").trim()}return t};C.addParamsToUrl=function(e,t){var a="",i=e.indexOf("?")!==-1,n=t.targetParams,r;if(n&&n.length>0){for(r=0;r<n.length;r=r+1){a+=n[r];if(r<n.length-1){a+="&"}}}if(a.length>0){if(!i){e+="?"}else{e+="&"}e+=a}return e};return C},true);