// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(e,t,n,o,a,i){"use strict";var r={scroll:0,tabs:1,getName:function(e){return Object.keys(this)[e]}};return{getEntry:function(){var s;return{id:"homepageEntry",entryHelpID:"homepageEntry",title:i.i18n.getText("FlpSettings_entry_title"),valueResult:null,contentResult:null,icon:"sap-icon://home",valueArgument:null,contentFunc:function(){var l;return o.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").then(function(e){l=e;return t.create({id:"UserSettingsHomepageSettingsView",viewName:"sap.ushell.components.shell.Settings.homepage.HomepageSetting"})}).then(function(e){s=e;s.setModel(new n({displayMode:r[l]||r.scroll,personalisationEnabled:a.last("/core/shell/enablePersonalization")}));s.setModel(i.getTranslationModel(),"i18n");return s}).catch(function(t){e.error("Failed to get effective hompage setting.",t,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");return Promise.reject()})},onSave:function(){if(s){var t=s.getModel().getProperty("/displayMode"),n=r.getName(t),i=sap.ushell.Container.getRenderer("fiori2");return o.getPersonalizer("homePageGroupDisplay",i).then(function(t){return new Promise(function(o,i){t.setPersData(n).done(function(){a.emit("/core/home/homePageGroupDisplay",n);o()}).fail(function(t){e.error("Failed to save the anchor bar mode in personalization",t,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");i()})})})}e.warning("Save operation for user account settings was not executed, because the homepage view was not initialized");return Promise.resolve()},onCancel:function(){if(s){return}e.warning("Cancel operation for user account settings was not executed, because the homepage view was not initialized")},provideEmptyWrapper:false}}}});