// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/thirdparty/hasher","sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters"],function(e,t,a,o,s,n,i,r){"use strict";return e.extend("sap.ushell.components.appfinder.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"],manifest:"json",library:"sap.ushell"},init:function(){e.prototype.init.apply(this,arguments);this.oModel=n.getModel();this.setModel(this.oModel);var r,l,p;var h=s.last("/core/shell/enablePersonalization");if(h){i.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings")}this.oCatalogsManager=new a("dashboardMgr",{model:this.oModel});this.setModel(o.i18nModel,"i18n");i.toggleUserActivityLog();r=t.getHash();Promise.all([sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(e){var t=e[0];var a=e[1];var o=a.parseShellHash(r);if(o&&o.semanticObject==="shell"&&o.action==="catalog"){l=this.parseOldCatalogParams(r);p=this.getMetadata().getConfig();t.toExternal({target:{semanticObject:p.semanticObject,action:p.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(l)})}}.bind(this))},parseOldCatalogParams:function(e){var t=r.fromURL(e).mParams;var a,o;for(o in t){if(t.hasOwnProperty(o)){a=t[o][0];t[o]=a.indexOf("/")!==-1?encodeURIComponent(a):a}}return t},destroy:function(){e.prototype.destroy.apply(this);this.oCatalogsManager.destroy()}})});