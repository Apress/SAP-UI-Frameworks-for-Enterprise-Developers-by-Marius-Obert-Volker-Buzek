// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/tiles/utils","sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(e,t,i,n,o,a){"use strict";return n.extend("sap.ushell.components.cards.Card",{onInit:function(){var e=this.getView(),n=this.getView().getViewData().chip,a=n.bag.getBag("tileProperties"),r,s;s=t.getTranslatablePropertiesFromBag(a);r=new o({data:s});e.setModel(r);e.setModel(i.i18nModel,"i18n");this._implementConfigurationUiContract(n,e);this._implementPreviewContract(n,s)},onPress:function(){var e=this.getView(),t=e.getViewData().chip,i=t.configuration.getParameterValueAsString("tileConfiguration"),n;if(t.configurationUi.isEnabled()){t.configurationUi.display()}else if(i){n=JSON.parse(i);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{semanticObject:n.navigation_semantic_object,action:n.navigation_semantic_action},params:n.navigation_semantic_parameters_as_object})})}},_implementPreviewContract:function(e,t){if(e.preview){e.preview.setPreviewTitle(t.display_title_text);if(e.preview.setPreviewSubtitle&&typeof e.preview.setPreviewSubtitle==="function"){e.preview.setPreviewSubtitle(t.display_subtitle_text)}}},_implementConfigurationUiContract:function(t,i){if(t.configurationUi&&t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var e=this._getConfigurationUi(t);e.setModel(i.getModel(),"tileModel");return e}.bind(this));i.getContent()[0].setTooltip(e.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}},_getConfigurationUi:function(e){var t=new a({viewName:"sap.ushell.components.cards.Configuration",viewData:{chipInstance:e}});return t}})});