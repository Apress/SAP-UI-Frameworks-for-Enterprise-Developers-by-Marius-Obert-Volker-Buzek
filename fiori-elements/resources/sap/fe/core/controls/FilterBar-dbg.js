/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/controls/filterbar/FilterContainer","sap/fe/core/controls/filterbar/VisualFilterContainer","sap/fe/core/helpers/ClassSupport","sap/ui/core/Core","sap/ui/mdc/FilterBar","sap/ui/mdc/filterbar/aligned/FilterItemLayout"],function(t,e,i,r,o,n){"use strict";var a,l,s,u,c,d,f;var h=i.property;var g=i.defineUI5Class;var y=i.association;function p(t,e,i,r){if(!i)return;Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function F(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function B(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;_(t,e)}function _(t,e){_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){e.__proto__=i;return e};return _(t,e)}function b(t,e,i,r,o){var n={};Object.keys(r).forEach(function(t){n[t]=r[t]});n.enumerable=!!n.enumerable;n.configurable=!!n.configurable;if("value"in n||n.initializer){n.writable=true}n=i.slice().reverse().reduce(function(i,r){return r(t,e,i)||i},n);if(o&&n.initializer!==void 0){n.value=n.initializer?n.initializer.call(o):void 0;n.initializer=undefined}if(n.initializer===void 0){Object.defineProperty(t,e,n);n=null}return n}function m(t,e){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let L=(a=g("sap.fe.core.controls.FilterBar"),l=h({type:"string",defaultValue:"compact"}),s=y({type:"sap.m.SegmentedButton",multiple:false}),a(u=(c=function(i){B(o,i);function o(){var t;for(var e=arguments.length,r=new Array(e),o=0;o<e;o++){r[o]=arguments[o]}t=i.call(this,...r)||this;p(t,"initialLayout",d,F(t));p(t,"toggleControl",f,F(t));return t}var a=o.prototype;a.setToggleControl=function t(e){if(typeof e==="string"){this._oSegmentedButton=r.byId(e)}else{this._oSegmentedButton=e}if(this.toggleControl&&this._oSegmentedButton){this._oSegmentedButton.detachEvent("select",this._toggleLayout.bind(this))}if(this._oSegmentedButton){this._oSegmentedButton.attachEvent("select",this._toggleLayout.bind(this))}this.setAssociation("toggleControl",e,true)};a._toggleLayout=function t(){if(!this._oSecondaryFilterBarLayout){this._oSecondaryFilterBarLayout=new e}if(this._oSecondaryFilterBarLayout.isA("sap.fe.core.controls.filterbar.VisualFilterContainer")){this.setShowAdaptFiltersButton(false)}else{this.setShowAdaptFiltersButton(true)}const i=this._oFilterBarLayout;const r=this.getFilterItems();const o=i.getAllFilterFields();const n=this.getSortedFilterFields(r,o);const a=i.getAllButtons();const l=i.getAllVisualFilterFields&&i.getAllVisualFilterFields();if(this._oSecondaryFilterBarLayout.isA("sap.fe.core.controls.filterbar.VisualFilterContainer")){this._oSecondaryFilterBarLayout.setAllFilterFields(n,l)}this._oFilterBarLayout=this._oSecondaryFilterBarLayout;o.forEach((t,e)=>{i.removeFilterField(t);this._oFilterBarLayout.insertFilterField(t,e)});a.forEach(t=>{i.removeButton(t);this._oFilterBarLayout.addButton(t)});this._oSecondaryFilterBarLayout=i;this.setAggregation("layout",this._oFilterBarLayout,true);this._oFilterBarLayout.rerender()};a.getSortedFilterFields=function t(e,i){const r=[];e.forEach(function(t){r.push(t.getId())});i.sort(function(t,e){let i,o;t.getContent().forEach(function(t){if(t.isA("sap.ui.mdc.FilterField")){i=t.getId()}});e.getContent().forEach(function(t){if(t.isA("sap.ui.mdc.FilterField")){o=t.getId()}});return r.indexOf(i)-r.indexOf(o)});return i};a._createInnerLayout=function e(){this._oFilterBarLayout=new t;this._cLayoutItem=n;this._oFilterBarLayout.getInner().addStyleClass("sapUiMdcFilterBarBaseAFLayout");this._addButtons();const i=this._oFilterBarLayout.getInner();const r={onBeforeRendering:()=>{if(this.initialLayout==="visual"){this._toggleLayout()}i.removeEventDelegate(r)}};i.addEventDelegate(r);this.setAggregation("layout",this._oFilterBarLayout,true)};a.exit=function t(){i.prototype.exit.call(this);if(this._oSegmentedButton){this._oSegmentedButton.detachEvent("select",this._toggleLayout);delete this._oSegmentedButton}};a.getSegmentedButton=function t(){return this._oSegmentedButton};return o}(o),d=b(c.prototype,"initialLayout",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),f=b(c.prototype,"toggleControl",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),c))||u);return L},false);