/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/formatters/FiscalFormat","sap/fe/core/helpers/ClassSupport","sap/ui/core/CalendarType","sap/ui/core/Core","sap/ui/model/odata/type/String","sap/ui/model/ValidateException"],function(a,e,r,t,o,s){"use strict";var i,c,l;var n=e.defineUI5Class;function m(a,e){a.prototype=Object.create(e.prototype);a.prototype.constructor=a;u(a,e)}function u(a,e){u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function a(e,r){e.__proto__=r;return e};return u(a,e)}let p=(i=n("sap.fe.core.type.FiscalDate"),i(c=(l=function(e){m(o,e);function o(t,s){var i;if((t.fiscalType==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"||t.fiscalType==="com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"||t.fiscalType==="com.sap.vocabularies.Common.v1.IsFiscalYearWeek")&&s!==null&&s!==void 0&&s.maxLength){s.maxLength=s.maxLength+1}i=e.call(this,t,s)||this;i.annotationType=t.fiscalType;const c=o.dateFormats[i.annotationType];if(c){i.formatter=a.getDateInstance({format:c,calendarType:r.Gregorian})}return i}var i=o.prototype;i.getPattern=function a(){var e;return(e=this.formatter)===null||e===void 0?void 0:e.getPattern()};i.formatValue=function a(r,t){return this.formatter?this.formatter.format(e.prototype.formatValue.call(this,r,t)):e.prototype.formatValue.call(this,r,t)};i.parseValue=function a(r,t){return this.formatter?this.formatter.parse(e.prototype.parseValue.call(this,r,t)):e.prototype.parseValue.call(this,r,t)};i.validateValue=function a(r){try{e.prototype.validateValue.call(this,r)}catch(a){if(!this.formatter){throw a}if(!this.formatter.validate(r)){throw new s(this.getErrorMessage(this.annotationType))}}if(!this.formatter||r===""||r===null){return}if(!this.formatter.validate(r)){throw new s(this.getErrorMessage(this.annotationType))}};i.getErrorMessage=function a(e){let r="";this.fullYear=this.fullYear||(new Date).getFullYear().toString();switch(e){case"com.sap.vocabularies.Common.v1.IsFiscalYear":r=this.fullYear;break;case"com.sap.vocabularies.Common.v1.IsFiscalPeriod":r="001";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod":r=this.fullYear+"001";break;case"com.sap.vocabularies.Common.v1.IsFiscalQuarter":r="1";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter":r=this.fullYear+"1";break;case"com.sap.vocabularies.Common.v1.IsFiscalWeek":r="01";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearWeek":r=this.fullYear+"01";break;case"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear":r="1";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearVariant":break;default:r=this.fullYear}return t.getLibraryResourceBundle("sap.fe.core").getText("FISCAL_VALIDATION_FAILS",[this.formatValue(r,"string")])};i.getName=function a(){return"sap.fe.core.type.FiscalDate"};i.getFormatter=function a(){return this.formatter};return o}(o),l.dateFormats={["com.sap.vocabularies.Common.v1.IsFiscalYear"]:"YYYY",["com.sap.vocabularies.Common.v1.IsFiscalPeriod"]:"PPP",["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]:"YYYYPPP",["com.sap.vocabularies.Common.v1.IsFiscalQuarter"]:"Q",["com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"]:"YYYYQ",["com.sap.vocabularies.Common.v1.IsFiscalWeek"]:"WW",["com.sap.vocabularies.Common.v1.IsFiscalYearWeek"]:"YYYYWW",["com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"]:"d",["com.sap.vocabularies.Common.v1.IsFiscalYearVariant"]:""},l))||c);return p},false);