/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/m/MessageBox","sap/ui/core/message/Message","sap/ui/model/json/JSONModel","./controllerextensions/dialog/OperationsDialog.block","./controllerextensions/messageHandler/messageHandling","./formatters/TableFormatterTypes"],function(e,t,n,s,i,o){"use strict";var r=o.MessageType;function l(o,l,a,c,d,g,f,u,_){const E=o.label;const M=o.model;const S=d===null||d===void 0?void 0:d.strictHandlingPromises;let C;let O=l.getText("C_COMMON_DIALOG_CANCEL");let T="";let G="";T=o.bGrouped?l.getText("C_COMMON_DIALOG_CANCEL_MESSAGE_TEXT",[E]):l.getText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT");if(c.length===1){const t=c[0].getMessage();const n=c[0].getAdditionalText();G=l.getText("C_COMMON_DIALOG_CANCEL_SINGLE_MESSAGE_TEXT");if(!g){C=`${t}\n${l.getText("PROCEED")}`}else if(n!==undefined&&n!==""){O=o.bGrouped?O:l.getText("C_COMMON_DIALOG_SKIP");const e=o.control.getParent().getTableDefinition().headerInfoTypeName;if(e){C=`${e.toString()} ${n}: ${t}\n\n${T}`}else{C=`${n}: ${t}\n\n${T}`}}else{O=o.bGrouped?O:l.getText("C_COMMON_DIALOG_SKIP");C=`${t}\n\n${T}`}if(g){C=`${G}\n\n${C}`}e.warning(C,{title:l.getText("WARNING"),actions:[E,O],emphasizedAction:E,onClose:function(t){if(t===E){if(_){f(true);M.submitBatch(u);if(o.requestSideEffects){o.requestSideEffects()}}else if(!g){S[0].resolve(true);M.submitBatch(S[0].groupId);if(S[0].requestSideEffects){S[0].requestSideEffects()}}else{S.forEach(function(e){e.resolve(true);M.submitBatch(e.groupId);if(e.requestSideEffects){e.requestSideEffects()}});const e=d===null||d===void 0?void 0:d.strictHandlingTransitionFails;if(e.length>0){a===null||a===void 0?void 0:a.removeTransitionMessages()}}if(d){d.is412Executed=true}}else{if(d){d.is412Executed=false}if(_){f(false)}else if(!g){S[0].resolve(false)}else{S.forEach(function(e){e.resolve(false)})}if(o.bGrouped){e.information(l.getText("M_CHANGESET_CANCEL_MESSAGES"),{contentWidth:"150px"})}}if(d){d.strictHandlingWarningMessages=[]}}})}else if(c.length>1){if(g){O=o.bGrouped?O:l.getText("C_COMMON_DIALOG_SKIP");const e=o.bGrouped?l.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_WARNING"):l.getText("C_COMMON_DIALOG_SKIP_MESSAGES_WARNING");const n=o.bGrouped?l.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_TEXT",[E]):l.getText("C_COMMON_DIALOG_SKIP_MESSAGES_TEXT",[E]);const s=new t({message:e,type:r.Warning,target:undefined,persistent:true,description:n});c=[s].concat(c)}const _=new n;_.setData(c);const C=true;const T=i.prepareMessageViewForDialog(_,C,g);const G=new s({messageObject:T,isMultiContext412:g,isGrouped:o===null||o===void 0?void 0:o.bGrouped,resolve:f,model:M,groupId:u,actionName:E,strictHandlingUtilities:d,strictHandlingPromises:S,messageHandler:a,messageDialogModel:_,cancelButtonTxt:O,showMessageInfo:function t(){e.information(l.getText("M_CHANGESET_CANCEL_MESSAGES"),{contentWidth:"150px"})}});G.open()}}async function a(e,t,n,s,i,o,r,l,a){let d;if(s===null&&o===null||s===1&&o===1){return new Promise(function(s){c.renderMessageView(t,n,r,a,l,false,s,e,true)})}if(a.length){var g,f;const n=new Promise(function(n){d={requestSideEffects:t.requestSideEffects,resolve:n,groupId:e}});l.strictHandlingPromises.push(d);const s=l.strictHandlingWarningMessages;const r=(g=t.control)===null||g===void 0?void 0:(f=g.getParent())===null||f===void 0?void 0:f.getIdentifierColumn();let c="";if(r&&o&&o>1){c=i&&i.getObject(r)}a.forEach(function(e){e.setType("Warning");e.setAdditionalText(c);s.push(e)});l.strictHandlingWarningMessages=s;t.internalOperationsPromiseResolve();return n}}const c={renderMessageView:l,fnOnStrictHandlingFailed:a};return c},false);