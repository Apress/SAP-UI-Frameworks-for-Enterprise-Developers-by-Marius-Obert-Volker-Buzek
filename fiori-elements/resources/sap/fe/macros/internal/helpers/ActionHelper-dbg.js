/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/TypeGuards","sap/fe/macros/CommonHelper"],function(e,o,i,n){"use strict";var t=i.isPathAnnotationExpression;var a=o.isPathInModelExpression;var l=o.getExpressionFromAnnotation;var r=e.bindingContextPathVisitor;const s={getMultiSelectDisabledActions(e){const o=[];const i=(e===null||e===void 0?void 0:e.filter(e=>e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"))??[];for(const e of i){const i=e===null||e===void 0?void 0:e.ActionTarget;if((i===null||i===void 0?void 0:i.isBound)===true){for(const e of i.parameters){var n,a;if(t((n=e.annotations.UI)===null||n===void 0?void 0:n.Hidden)||t((a=e.annotations.Common)===null||a===void 0?void 0:a.FieldControl)){o.push(i.name)}}}}return o},getPressEventDataFieldForActionButton(e,o,i,t){const a=o.InvocationGrouping&&o.InvocationGrouping.$EnumMember==="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet"?"ChangeSet":"Isolated";i=i||{};i["invocationGrouping"]=n.addSingleQuotes(a);i["controlId"]=n.addSingleQuotes(e);i["operationAvailableMap"]=n.addSingleQuotes(t);i["model"]="${$source>/}.getModel()";i["label"]=o.Label&&n.addSingleQuotes(o.Label,true);return n.generateFunction(".editFlow.invokeAction",n.addSingleQuotes(o.Action),n.objectToString(i))},getNumberOfContextsExpression(e){let o;if(e==="single"){o="${internal>numberOfSelectedContexts} === 1"}else{o="${internal>numberOfSelectedContexts} > 0"}return o},getOperationAvailableMap(e,o,i){let n={};if(e){e.forEach(e=>{if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){const t=e.Action;if((t===null||t===void 0?void 0:t.indexOf("/"))<0&&!e.Determining){if(o==="table"){n=this._getOperationAvailableMapOfTable(e,t,n,i)}else if(o==="chart"){n=this._getOperationAvailableMapOfChart(t,n,i)}}}}})}return n},_getOperationAvailableMapOfTable(e,o,i,n){var t,s,d;const u=e.ActionTarget;if((u===null||u===void 0?void 0:(t=u.annotations)===null||t===void 0?void 0:(s=t.Core)===null||s===void 0?void 0:s.OperationAvailable)===null){}else if(u!==null&&u!==void 0&&(d=u.parameters)!==null&&d!==void 0&&d.length){var v,p,c,f;const e=u.parameters[0].fullyQualifiedName,t=l(u===null||u===void 0?void 0:(v=u.annotations)===null||v===void 0?void 0:(p=v.Core)===null||p===void 0?void 0:p.OperationAvailable,[],undefined,o=>r(o,n,e));if(a(t)){i=this._addToMap(o,t.path,i)}else if((u===null||u===void 0?void 0:(c=u.annotations)===null||c===void 0?void 0:(f=c.Core)===null||f===void 0?void 0:f.OperationAvailable)!==undefined){i=this._addToMap(o,t,i)}}return i},_getOperationAvailableMapOfChart(e,o,i){let t=n.getActionPath(i.context,false,e,true);if(t===null){o=this._addToMap(e,null,o)}else{t=n.getActionPath(i.context,false,e);if(t.sProperty){o=this._addToMap(e,t.sProperty.substr(t.sBindingParameter.length+1),o)}}return o},_addToMap(e,o,i){if(e&&i){i[e]=o}return i}};return s},false);