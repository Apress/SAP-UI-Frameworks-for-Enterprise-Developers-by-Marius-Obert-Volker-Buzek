/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/RuntimeBuildingBlock","sap/fe/core/helpers/ClassSupport","sap/m/Button","sap/m/Dialog","sap/m/library","sap/m/Page","sap/m/Panel","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/util/reflection/JsControlTreeModifier","sap/fe/core/jsx-runtime/jsx"],function(e,t,n,r,l,i,o,a,s,u,c,f){"use strict";var g,d,p,h,b,P,S;var v={};var B=n.defineReference;var m=e.defineBuildingBlock;var T=e.blockAttribute;function C(e,t,n,r){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function A(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function _(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;I(e,t)}function I(e,t){I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,n){t.__proto__=n;return t};return I(e,t)}function O(e,t,n,r,l){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]});i.enumerable=!!i.enumerable;i.configurable=!!i.configurable;if("value"in i||i.initializer){i.writable=true}i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i);if(l&&i.initializer!==void 0){i.value=i.initializer?i.initializer.call(l):void 0;i.initializer=undefined}if(i.initializer===void 0){Object.defineProperty(e,t,i);i=null}return i}function D(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}const E=i.ButtonType;let w=(g=m({name:"TableFullScreenDialog",namespace:"sap.fe.macros.table"}),d=T({type:"string",isPublic:true,required:true}),p=B(),g(h=(b=function(e){_(t,e);function t(t){var n;n=e.call(this,t)||this;C(n,"id",P,A(n));C(n,"fullScreenButton",S,A(n));n.fullScreenDialogContentPage=new o;n.enteringFullScreen=false;n.messageBundle=u.getLibraryResourceBundle("sap.fe.macros");return n}v=t;var n=t.prototype;n.onFullScreenToggle=async function e(){this.enteringFullScreen=!this.enteringFullScreen;this.tableAPI=this.getTableAPI();if(!this.tablePlaceHolderPanel){this.tablePlaceHolderPanel=this.createTablePlaceHolderPanel()}if(this.enteringFullScreen){var t,n;(t=this.fullScreenButton.current)===null||t===void 0?void 0:t.setIcon("sap-icon://exit-full-screen");(n=this.fullScreenButton.current)===null||n===void 0?void 0:n.setTooltip(this.messageBundle.getText("M_COMMON_TABLE_FULLSCREEN_MINIMIZE"));this.nonFullScreenTableParent=this.tableAPI.getParent();this._originalAggregationName=await c.getParentAggregationName(this.tableAPI);this.nonFullScreenTableParent.setAggregation(this._originalAggregationName,this.tablePlaceHolderPanel);this.createDialog();this.fullScreenDialogContentPage.addContent(this.tableAPI);this.fullScreenDialog.open()}else{var r,l;(r=this.fullScreenButton.current)===null||r===void 0?void 0:r.setIcon("sap-icon://full-screen");(l=this.fullScreenButton.current)===null||l===void 0?void 0:l.setTooltip(this.messageBundle.getText("M_COMMON_TABLE_FULLSCREEN_MAXIMIZE"));this.nonFullScreenTableParent.setAggregation(this._originalAggregationName,this.tableAPI);this.fullScreenDialog.close()}};n.getTableAPI=function e(){let t=this.fullScreenButton.current;do{t=t.getParent()}while(!t.isA("sap.fe.macros.table.TableAPI"));return t};n.createTablePlaceHolderPanel=function e(){const t=new a({});t.data("tableAPIreference",this.tableAPI);t.data("FullScreenTablePlaceHolder",true);return t};n.createDialog=function e(){if(!this.fullScreenDialog){this.fullScreenDialog=new l({showHeader:false,stretch:true,afterOpen:()=>{this.afterDialogOpen()},beforeClose:()=>{this.beforeDialogClose()},afterClose:()=>{this.afterDialogClose()},endButton:this.getEndButton(),content:this.fullScreenDialogContentPage});this.fullScreenDialog.data("FullScreenDialog",true)}};n.getEndButton=function e(){return new r({text:this.messageBundle.getText("M_COMMON_TABLE_FULLSCREEN_CLOSE"),type:E.Transparent,press:()=>{this.fullScreenDialog.close()}})};n.afterDialogOpen=function e(){var t;(t=this.fullScreenButton.current)===null||t===void 0?void 0:t.focus()};n.beforeDialogClose=function e(){if(this.tableAPI&&this.enteringFullScreen){this.onFullScreenToggle()}};n.afterDialogClose=function e(){var t;const n=s.getOwnerComponentFor(this.tableAPI);const r=s.getOwnerComponentFor(n);(t=this.fullScreenButton.current)===null||t===void 0?void 0:t.focus();r.getRootViewController().getView().getController()._scrollTablesToLastNavigatedItems()};n.getContent=function e(){return f(r,{ref:this.fullScreenButton,id:this.id,tooltip:this.messageBundle.getText("M_COMMON_TABLE_FULLSCREEN_MAXIMIZE"),icon:"sap-icon://full-screen",press:()=>this.onFullScreenToggle(),type:"Transparent",visible:true,enabled:true})};return t}(t),P=O(b.prototype,"id",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),S=O(b.prototype,"fullScreenButton",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),b))||h);v=w;return v},false);