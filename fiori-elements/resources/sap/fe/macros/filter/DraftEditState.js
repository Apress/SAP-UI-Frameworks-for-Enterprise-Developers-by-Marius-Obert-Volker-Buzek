/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/mdc/enum/ConditionValidated","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel"],function(e,t,a,r,i,n,s){"use strict";const o=e.getLibraryResourceBundle("sap.fe.macros");const A={ALL:{id:"ALL",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_ALL_FILTER")},UNCHANGED:{id:"UNCHANGED",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_UNCHANGED_FILTER")},OWN_DRAFT:{id:"OWN_DRAFT",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_OWN_DRAFT_FILTER")},LOCKED:{id:"LOCKED",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_LOCKED_FILTER")},UNSAVED_CHANGES:{id:"UNSAVED_CHANGES",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_UNSAVED_CHANGES_FILTER")},ALL_HIDING_DRAFTS:{id:"ALL_HIDING_DRAFTS",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_ALL_HIDING_DRAFTS_FILTER")},SAVED_ONLY:{id:"SAVED_ONLY",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_SAVED_ONLY_FILTER")},MY_DRAFTS:{id:"MY_DRAFTS",display:o.getText("C_DRAFT_EDIT_STATE_DRAFT_MY_DRAFTS_FILTER")},getEditStatesContext:function(e){let t;if(e.getProperty("isDraftCollaborative")){t=[A.ALL,A.MY_DRAFTS,A.SAVED_ONLY]}else{t=[A.ALL,A.ALL_HIDING_DRAFTS,A.UNCHANGED,A.OWN_DRAFT,A.LOCKED,A.UNSAVED_CHANGES]}return new s(t).bindContext("/").getBoundContext()},getCurrentUserID:function(){var e,t,a;return(e=sap.ushell)===null||e===void 0?void 0:(t=e.Container)===null||t===void 0?void 0:(a=t.getUser())===null||a===void 0?void 0:a.getId()},getFilterForEditState:function(e){switch(e){case A.UNCHANGED.id:return new i({filters:[new i({path:"IsActiveEntity",operator:n.EQ,value1:true}),new i({path:"HasDraftEntity",operator:n.EQ,value1:false})],and:true});case A.OWN_DRAFT.id:return new i({path:"IsActiveEntity",operator:n.EQ,value1:false});case A.LOCKED.id:return new i({filters:[new i({path:"IsActiveEntity",operator:n.EQ,value1:true}),new i({path:"SiblingEntity/IsActiveEntity",operator:n.EQ,value1:null}),new i({path:"DraftAdministrativeData/InProcessByUser",operator:n.NE,value1:""}),new i({path:"DraftAdministrativeData/InProcessByUser",operator:n.NE,value1:null})],and:true});case A.UNSAVED_CHANGES.id:return new i({filters:[new i({path:"IsActiveEntity",operator:n.EQ,value1:true}),new i({path:"SiblingEntity/IsActiveEntity",operator:n.EQ,value1:null}),new i({path:"DraftAdministrativeData/InProcessByUser",operator:n.EQ,value1:""})],and:true});case A.ALL_HIDING_DRAFTS.id:case A.SAVED_ONLY.id:return new i({path:"IsActiveEntity",operator:n.EQ,value1:true});case A.MY_DRAFTS.id:const e=this.getCurrentUserID();return e?new i({filters:[new i({path:"IsActiveEntity",operator:n.EQ,value1:false}),new i({path:"DraftAdministrativeData/DraftAdministrativeUser",operator:n.Any,variable:"user",condition:new i({path:"user/UserID",operator:n.EQ,value1:this.getCurrentUserID()})})],and:true}):new i({path:"IsActiveEntity",operator:n.EQ,value1:false});default:return new i({filters:[new i({path:"IsActiveEntity",operator:n.EQ,value1:false}),new i({path:"SiblingEntity/IsActiveEntity",operator:n.EQ,value1:null})],and:false})}}};t.addOperator(new a({name:"DRAFT_EDIT_STATE",valueTypes:[a.ValueType.Self,a.ValueType.Self],tokenParse:"^(.*)$",format:function(e){return e&&e.values[1]},getModelFilter:function(e){return A.getFilterForEditState(e.values[0])},parse:function(e){return e},validateInput:true,checkValidated:function(e){e.validated=r.Validated}}));return A},false);