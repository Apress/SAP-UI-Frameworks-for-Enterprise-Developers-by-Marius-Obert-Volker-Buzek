/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/each","sap/ui/base/Object","./NavError"],function(t,e,i,n){"use strict";var r={};function o(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;s(t,e)}function s(t,e){s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){e.__proto__=i;return e};return s(t,e)}const a=new RegExp("[E|I]");const c=new RegExp("EQ|NE|LE|GE|LT|GT|BT|CP");let f=function(i){o(s,i);function s(t){var e;e=i.call(this)||this;e.id="";e.parameters={};e.selectOptions={};if(t!==undefined){if(typeof t==="string"){e.parseFromString(t)}else if(typeof t==="object"){e.parseFromObject(t)}else{throw new n("SelectionVariant.INVALID_INPUT_TYPE")}}return e}r.SelectionVariant=s;var f=s.prototype;f.getID=function t(){return this.id};f.setID=function t(e){this.id=e};f.setText=function t(e){if(typeof e!=="string"){throw new n("PresentationVariant.INVALID_INPUT_TYPE")}this.text=e};f.getText=function t(){return this.text};f.setParameterContextUrl=function t(e){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}this.parameterCtxUrl=e};f.getParameterContextUrl=function t(){return this.parameterCtxUrl};f.getFilterContextUrl=function t(){return this.filterCtxUrl};f.setFilterContextUrl=function t(e){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}this.filterCtxUrl=e};f.addParameter=function t(e,i){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(typeof i!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(e===""){throw new n("SelectionVariant.PARAMETER_WITHOUT_NAME")}if(this.selectOptions[e]){throw new n("SelectionVariant.PARAMETER_SELOPT_COLLISION")}this.parameters[e]=i;return this};f.removeParameter=function t(e){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(e===""){throw new n("SelectionVariant.PARAMETER_WITHOUT_NAME")}delete this.parameters[e];return this};f.renameParameter=function t(e,i){if(typeof e!=="string"||typeof i!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(e===""||i===""){throw new n("SelectionVariant.PARAMETER_WITHOUT_NAME")}if(this.parameters[e]!==undefined){if(this.selectOptions[i]){throw new n("SelectionVariant.PARAMETER_SELOPT_COLLISION")}if(this.parameters[i]){throw new n("SelectionVariant.PARAMETER_COLLISION")}this.parameters[i]=this.parameters[e];delete this.parameters[e]}return this};f.getParameter=function t(e){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}return this.parameters[e]};f.getParameterNames=function t(){return Object.keys(this.parameters)};f.addSelectOption=function t(e,i,r,o,s,f,l){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(e===""){throw new n("SelectionVariant.INVALID_PROPERTY_NAME")}if(typeof i!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(typeof r!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(typeof o!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(r==="BT"&&typeof s!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(!a.test(i.toUpperCase())){throw new n("SelectionVariant.INVALID_SIGN")}if(!c.test(r.toUpperCase())){throw new n("SelectionVariant.INVALID_OPTION")}if(this.parameters[e]){throw new n("SelectionVariant.PARAMETER_SELOPT_COLLISION")}if(r!=="BT"){if(s!==undefined&&s!==""&&s!==null){throw new n("SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED")}}if(this.selectOptions[e]===undefined){this.selectOptions[e]=[]}const p={Sign:i.toUpperCase(),Option:r.toUpperCase(),Low:o};if(f){p.Text=f}if(r==="BT"){p.High=s}else{p.High=null}if(l){p.SemanticDates=l}for(let t=0;t<this.selectOptions[e].length;t++){const i=this.selectOptions[e][t];if(i.Sign===p.Sign&&i.Option===p.Option&&i.Low===p.Low&&i.High===p.High){return this}}this.selectOptions[e].push(p);return this};f.removeSelectOption=function t(e){if(typeof e!=="string"){throw new n("SelectionVariant.SELOPT_WRONG_TYPE")}if(e===""){throw new n("SelectionVariant.SELOPT_WITHOUT_NAME")}delete this.selectOptions[e];return this};f.renameSelectOption=function t(e,i){if(typeof e!=="string"||typeof i!=="string"){throw new n("SelectionVariant.SELOPT_WRONG_TYPE")}if(e===""||i===""){throw new n("SelectionVariant.SELOPT_WITHOUT_NAME")}if(this.selectOptions[e]!==undefined){if(this.selectOptions[i]){throw new n("SelectionVariant.SELOPT_COLLISION")}if(this.parameters[i]){throw new n("SelectionVariant.PARAMETER_SELOPT_COLLISION")}this.selectOptions[i]=this.selectOptions[e];delete this.selectOptions[e]}return this};f.getSelectOption=function t(e){if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}if(e===""){throw new n("SelectionVariant.INVALID_PROPERTY_NAME")}const i=this.selectOptions[e];if(!i){return undefined}return JSON.parse(JSON.stringify(i))};f.getSelectOptionsPropertyNames=function t(){return Object.keys(this.selectOptions)};f.getPropertyNames=function t(){return this.getParameterNames().concat(this.getSelectOptionsPropertyNames())};f.massAddSelectOption=function t(e,i){if(!Array.isArray(i)){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}for(let t=0;t<i.length;t++){const n=i[t];this.addSelectOption(e,n.Sign,n.Option,n.Low,n.High,n.Text,n.SemanticDates)}return this};f.getValue=function t(e){let i=this.getSelectOption(e);if(i!==undefined){return i}const n=this.getParameter(e);if(n!==undefined){i=[{Sign:"I",Option:"EQ",Low:n,High:null}];return i}return undefined};f.isEmpty=function t(){return this.getParameterNames().length===0&&this.getSelectOptionsPropertyNames().length===0};f.toJSONObject=function t(){const e={Version:{Major:"1",Minor:"0",Patch:"0"},SelectionVariantID:this.id};if(this.parameterCtxUrl){e.ParameterContextUrl=this.parameterCtxUrl}if(this.filterCtxUrl){e.FilterContextUrl=this.filterCtxUrl}if(this.text){e.Text=this.text}else{e.Text="Selection Variant with ID "+this.id}this.determineODataFilterExpression(e);this.serializeParameters(e);this.serializeSelectOptions(e);return e};f.toJSONString=function t(){return JSON.stringify(this.toJSONObject())};f.determineODataFilterExpression=function t(e){e.ODataFilterExpression=""};f.serializeParameters=function t(e){e.Parameters=[];for(const t in this.parameters){e.Parameters.push({PropertyName:t,PropertyValue:this.parameters[t]})}};f.serializeSelectOptions=function t(i){if(this.selectOptions.length===0){return}i.SelectOptions=[];e(this.selectOptions,function(t,e){const n={PropertyName:t,Ranges:e};i.SelectOptions.push(n)})};f.parseFromString=function t(e){if(e===undefined){throw new n("SelectionVariant.UNABLE_TO_PARSE_INPUT")}if(typeof e!=="string"){throw new n("SelectionVariant.INVALID_INPUT_TYPE")}const i=JSON.parse(e);this.parseFromObject(i)};f.parseFromObject=function e(i){if(!i){i={}}if(i.SelectionVariantID===undefined){t.warning("SelectionVariantID is not defined");i.SelectionVariantID=""}this.setID(i.SelectionVariantID);if(i.ParameterContextUrl!==undefined&&i.ParameterContextUrl!==""){this.setParameterContextUrl(i.ParameterContextUrl)}if(i.FilterContextUrl!==undefined&&i.FilterContextUrl!==""){this.setFilterContextUrl(i.FilterContextUrl)}if(i.Text!==undefined){this.setText(i.Text)}if(i.Parameters){this.parseFromStringParameters(i.Parameters)}if(i.SelectOptions){this.parseFromStringSelectOptions(i.SelectOptions)}};f.parseFromStringParameters=function t(e){for(const t of e){this.addParameter(t.PropertyName,t.PropertyValue)}};f.parseFromStringSelectOptions=function e(i){for(const e of i){if(e.Ranges){if(!Array.isArray(e.Ranges)){throw new n("SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY")}for(const t of e.Ranges){this.addSelectOption(e.PropertyName,t.Sign,t.Option,t.Low,t.High,t.Text,t.SemanticDates)}}else{t.warning("Select Option object does not contain a Ranges entry; ignoring entry")}}};return s}(i);r.SelectionVariant=f;const l=i.extend("sap.fe.navigation.SelectionVariant",f.prototype);return l},false);