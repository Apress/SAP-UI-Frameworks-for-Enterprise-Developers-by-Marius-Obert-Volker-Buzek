/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/base/util/extend","sap/ui/core/date/UI5Date","sap/ui/core/format/DateFormat","sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/odata/type/ODataType"],function(e,t,n,o,r,i,a,s){"use strict";var u={__edmType:"Edm.Time",ms:86398e3},l={format:g,parse:d};function p(e){return sap.ui.getCore().getLibraryResourceBundle().getText("EnterTime",[e.formatValue(u,"string")])}function f(e){var n;if(!e.oFormat){n=t({strictParsing:true},e.oFormatOptions);n.UTC=true;e.oFormat=o.getTimeInstance(n)}return e.oFormat}function m(e){return typeof e==="object"&&e.__edmType==="Edm.Time"&&typeof e.ms==="number"}function c(t,n){var o;t.oConstraints=undefined;if(n){o=n.nullable;if(o===false||o==="false"){t.oConstraints={nullable:false}}else if(o!==undefined&&o!==true&&o!=="true"){e.warning("Illegal nullable: "+o,null,t.getName())}}}function d(e){if(!m(e)){throw new r("Illegal sap.ui.model.odata.type.Time value: "+h(e))}return new Date(e.ms)}function g(e){return{__edmType:"Edm.Time",ms:((e.getUTCHours()*60+e.getUTCMinutes())*60+e.getUTCSeconds())*1e3+e.getUTCMilliseconds()}}function h(e){try{return JSON.stringify(e)}catch(t){return String(e)}}var y=s.extend("sap.ui.model.odata.type.Time",{constructor:function(e,t){s.apply(this,arguments);c(this,t);this.oFormatOptions=e}});y.prototype.formatValue=function(e,t){if(e===undefined||e===null){return null}switch(this.getPrimitiveType(t)){case"any":return e;case"string":return f(this).format(d(e));default:throw new r("Don't know how to format "+this.getName()+" to "+t)}};y.prototype.getDateValue=function(e){var t;if(!e){return null}t=n.getInstance(e.ms);t.setFullYear(1970,0,1);t.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return t};y.prototype.getModelFormat=function(){return l};y.prototype.getModelValue=function(e){var t;if(e===null){t=null}else{n.checkDate(e);t=n.getInstance(0);t.setUTCHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());t=g(t)}this.validateValue(t);return t};y.prototype.getName=function(){return"sap.ui.model.odata.type.Time"};y.prototype.parseValue=function(e,t){var n;if(e===""||e===null){return null}if(this.getPrimitiveType(t)!=="string"){throw new i("Don't know how to parse "+this.getName()+" from "+t)}n=f(this).parse(e);if(!n){throw new i(p(this))}return g(n)};y.prototype.validateValue=function(e){if(e===null){if(this.oConstraints&&this.oConstraints.nullable===false){throw new a(p(this))}return}if(!m(e)){throw new a("Illegal "+this.getName()+" value: "+h(e))}};y.prototype._handleLocalizationChange=function(){this.oFormat=null};return y});