/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/commons/library","sap/ui/core/Element","sap/ui/core/ResizeHandler"],function(t,e,i,r){"use strict";var n=i.extend("sap.ui.commons.layout.PositionContainer",{metadata:{deprecated:true,library:"sap.ui.commons",properties:{top:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},bottom:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},left:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},right:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},centerHorizontally:{type:"boolean",group:"Dimension",defaultValue:false},centerVertically:{type:"boolean",group:"Dimension",defaultValue:false}},defaultAggregation:"control",aggregations:{control:{type:"sap.ui.core.Control",multiple:false}}}});n.prototype.setControl=function(t){s(this);if(this.getDomRef()){this.setAggregation("control",t,true);l(this,t?"CTRL_CHANGE":"CTRL_REMOVE")}else{if(this.getParent()&&this.getParent().getDomRef()){this.setAggregation("control",t,true);if(t){l(this,"CTRL_ADD")}}else{this.setAggregation("control",t)}}if(t){t.attachEvent("_change",f,this)}return this};n.prototype.destroyControl=function(){s(this);var t=!!this.getDomRef();this.destroyAggregation("control",t);if(t){l(this,"CTRL_REMOVE")}return this};n.prototype.setTop=function(t){o(this,"top",t,true);return this};n.prototype.setBottom=function(t){o(this,"bottom",t,true);return this};n.prototype.setLeft=function(t){o(this,"left",t,true);return this};n.prototype.setRight=function(t){o(this,"right",t,true);return this};n.prototype.setCenterHorizontally=function(t){o(this,"centerHorizontally",t,true);return this};n.prototype.setCenterVertically=function(t){o(this,"centerVertically",t,true);return this};n.prototype.updatePosition=function(t){if(!t){t={}}o(this,"centerHorizontally",t.centerHorizontally?t.centerHorizontally:null);o(this,"centerVertically",t.centerVertically?t.centerVertically:null);o(this,"left",t.left?t.left:null);o(this,"right",t.right?t.right:null);o(this,"top",t.top?t.top:null);var e=o(this,"bottom",t.bottom?t.bottom:null);if(e){l(this,"CTRL_POS")}};n.prototype.getComputedPosition=function(){var t=this.getTop();var e=this.getBottom();var i=this.getLeft();var r=this.getRight();var n=null;var o=null;var l=this.getControl();if(l){if(this.getCenterHorizontally()){i="50%";r=null}else{if(!a(this,l,"width","left",i,"right",r)){r=undefined}if(!i&&!r){i="0px"}}if(this.getCenterVertically()){t="50%";e=null}else{if(!a(this,l,"height","top",t,"bottom",e)){e=undefined}if(!t&&!e){t="0px"}}n=h(l,"width");o=h(l,"height")}return{top:t,bottom:e,left:i,right:r,width:n,height:o}};n.createPosition=function(t,e){var i=new n;i.setControl(t);if(e){if(e.left){i.setLeft(e.left)}if(e.right){i.setRight(e.right)}if(e.top){i.setTop(e.top)}if(e.bottom){i.setBottom(e.bottom)}if(e.centerHorizontally){i.setCenterHorizontally(e.centerHorizontally)}if(e.centerVertically){i.setCenterVertically(e.centerVertically)}}return i};n.cleanUpControl=function(t){};n.prototype.reinitializeEventHandlers=function(t){if(this._sResizeListenerId){r.deregister(this._sResizeListenerId);this._sResizeListenerId=null}if(!t&&this.getDomRef()&&(this.getCenterHorizontally()||this.getCenterVertically())){var e=this;var i=function(){var t=e.$();if(e.getCenterHorizontally()){t.css("margin-left","-"+t.children().outerWidth()/2+"px")}if(e.getCenterVertically()){t.css("margin-top","-"+t.children().outerHeight()/2+"px")}};this._sResizeListenerId=r.register(this.getDomRef(),i);i()}};n.prototype.exit=function(t){this.reinitializeEventHandlers(true)};n.prototype.init=function(){this._disableWidthCheck=true;this._disableHeightCheck=false};var o=function(t,e,i,r){var n=!!t.getDomRef();t.setProperty(e,i,n);if(n&&r){l(t,"CTRL_POS")}return n};var l=function(t,e){var i=t.getParent();if(i){i.contentChanged(t,e)}};var s=function(t){var e=t.getControl();if(e){n.cleanUpControl(e);e.detachEvent("_change",f,t)}};var a=function(e,i,r,n,o,l,s){if(o&&s){var a=e.getParent();var h=u(i,r);if(h){var f=i[h._sGetter]();if(!(!f||f==""||f=="auto"||f=="inherit")){t.warning("Position "+l+"="+s+" ignored, because child control "+i.getId()+" has fixed "+r+" ("+f+").","","AbsoluteLayout '"+(a?a.getId():"_undefined")+"'");return false}}else{if(r==="width"&&!e._disableWidthCheck||r==="height"&&!e._disableHeightCheck){t.warning("Position "+l+"="+s+" ignored, because child control "+i.getId()+" not resizable.","","AbsoluteLayout '"+(a?a.getId():"_undefined")+"'");return false}}}return true};var u=function(t,e){var i=t.getMetadata().getProperty(e);if(i&&i.type==="sap.ui.core.CSSSize"){return i}return null};var h=function(t,e){var i=u(t,e);if(i){var r=t[i._sGetter]();if(r&&r.endsWith("%")){return r}}return null};var f=function(t){var e=t.getParameter("name");var i=this.getParent();if((e==="width"||e==="height")&&i&&i.getDomRef()){l(this,"CTRL_POS")}};return n});