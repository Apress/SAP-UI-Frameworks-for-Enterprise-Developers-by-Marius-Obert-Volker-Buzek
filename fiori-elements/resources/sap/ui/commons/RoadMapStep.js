/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/dom/containsOrEquals","./library","sap/ui/core/Element","./RoadMapRenderer"],function(e,t,r,s){"use strict";var i=r.extend("sap.ui.commons.RoadMapStep",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{label:{type:"string",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},expanded:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},visible:{type:"boolean",group:"Misc",defaultValue:true}},defaultAggregation:"subSteps",aggregations:{subSteps:{type:"sap.ui.commons.RoadMapStep",multiple:true,singularName:"subStep",deprecated:true}}}});i.prototype.setLabel=function(e){u(this,"label",e,function(){s.setStepLabel(this,e);this.setProperty("label",e,true);s.addEllipses(this);return true});return this};i.prototype.setEnabled=function(e){var t=this.getEnabled();if(e&&t||!e&&!t){return this}u(this,"enabled",e,function(){var t=n(this);var r=s.setStepEnabled(t,this,e);if(r){t.setProperty("selectedStep","",true)}if(!e){this.setExpanded(false)}return false});return this};i.prototype.setExpanded=function(e){var t=this.getExpanded();if(e&&t||!e&&!t){return this}u(this,"expanded",e,function(){if(a(this)||this.getSubSteps().length==0||!this.getEnabled()||!e){this.setProperty("expanded",false,true);if(!a(this)&&this.getSubSteps().length>0&&this.getEnabled()){s.selectStep(n(this),this,false,true,null,true)}}else{this.setProperty("expanded",true,true);s.selectStep(n(this),this,false,true,null,true)}return true});return this};i.prototype.setVisible=function(e){var t=this.getVisible();if(e&&t||!e&&!t){return this}u(this,"visible",e,function(){var t=n(this);var r=s.setStepVisible(t,this,a(this),e);if(r){t.setProperty("selectedStep","",true)}this.setProperty("visible",e,true);s.updateStepArea(t);s.updateStepAria(this);return true});return this};i.prototype.getFocusDomRef=function(){return this.getFocusInfo().id?document.getElementById(this.getFocusInfo().id):null};i.prototype.getFocusInfo=function(){return{id:this.getId()+"-box"}};i.prototype.onclick=function(e){this.handleSelect(e)};i.prototype.onsapselect=function(e){this.handleSelect(e)};i.prototype.handleSelect=function(t,r){t.stopPropagation();t.preventDefault();if(!r&&!e(this.getDomRef(),t.target)){return}if(this.getEnabled()){var i=n(this);var u=this;s.selectStep(i,this,a(this),false,function(e){var t=i.getSelectedStep()==u.getId();i.setProperty("selectedStep",u.getId(),true);u.focus();if(e!="selected"){u.setProperty("expanded",e=="expanded",true);i.fireStepExpanded({stepId:u.getId()})}if(!t){i.fireStepSelected({stepId:u.getId()})}})}else{this.focus()}};var n=function(e){var t=e.getParent();if(a(e)){t=t.getParent()}return t};var a=function(e){return!(e.getParent()instanceof sap.ui.commons.RoadMap)};var u=function(e,t,r,s){if(!e.getDomRef()){e.setProperty(t,r);return}var i=s.apply(e,[]);if(!i){e.setProperty(t,r,true)}};return i});