/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/delegate/ItemNavigation","./library","./ActionBarRenderer","sap/ui/core/ResizeHandler","sap/ui/ux3/ThingAction","sap/ui/ux3/ToolPopup","sap/ui/ux3/Feeder","sap/ui/core/Popup","sap/ui/commons/MenuItem","sap/ui/commons/Menu","sap/ui/commons/MenuButton","sap/ui/commons/Button","sap/ui/Device","sap/base/Log","sap/ui/core/Configuration"],function(t,e,o,i,n,s,r,a,u,l,c,h,p,d,_,g,f){"use strict";var A=l.Dock;var m=i.FeederType;var M=i.ActionBarSocialActions;var y=i.FollowActionState;var S=e.extend("sap.ui.ux3.ActionBar",{metadata:{deprecated:true,library:"sap.ui.ux3",properties:{followState:{type:"sap.ui.ux3.FollowActionState",group:"Misc",defaultValue:y.Default},flagState:{type:"boolean",group:"Misc",defaultValue:null},favoriteState:{type:"boolean",group:"Misc",defaultValue:null},updateState:{type:"boolean",group:"Misc",defaultValue:null},thingIconURI:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},alwaysShowMoreMenu:{type:"boolean",group:"Misc",defaultValue:true},showUpdate:{type:"boolean",group:"Misc",defaultValue:true},showFollow:{type:"boolean",group:"Misc",defaultValue:true},showFlag:{type:"boolean",group:"Misc",defaultValue:true},showFavorite:{type:"boolean",group:"Misc",defaultValue:true},showOpen:{type:"boolean",group:"Misc",defaultValue:true},dividerWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}},aggregations:{businessActions:{type:"sap.ui.ux3.ThingAction",multiple:true,singularName:"businessAction"},_businessActionButtons:{type:"sap.ui.commons.Button",multiple:true,singularName:"_businessActionButton",visibility:"hidden"},_socialActions:{type:"sap.ui.ux3.ThingAction",multiple:true,singularName:"_socialAction",visibility:"hidden"}},events:{actionSelected:{parameters:{id:{type:"string"},action:{type:"sap.ui.ux3.ThingAction"},newState:{type:"string"}}},feedSubmit:{parameters:{text:{type:"string"}}}}},renderer:n});S.prototype.init=function(){this.mActionMap={};this.mActionKeys=M;this.oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.ux3");this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Update),true);this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Follow),true);this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Flag),true);this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Favorite),true);this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Open),true);if(!this._oItemNavigation){this._oItemNavigation=new o;this.addDelegate(this._oItemNavigation)}};S.prototype.exit=function(){this.closePopups();if(this._oUpdatePopup){this._oUpdatePopup.destroy();this._oUpdatePopup=null}if(this._oMoreMenuButton){this._oMoreMenuButton.destroy();this._oMoreMenuButton=null}if(this._oMoreMenu){this._oMoreMenu.destroy();this._oMoreMenu=null}if(this._oMenu){this._oMenu.destroy();this._oMenu=null}if(this._oHoldItem){this._oHoldItem.destroy()}if(this._oUnFollowItem){this._oUnFollowItem.destroy()}if(this._oUnHoldItem){this._oUnHoldItem.destroy()}if(this._sResizeListenerId){s.deregister(this._sResizeListenerId);this._sResizeListenerId=null}this.mActionKeys=null;this.oRb=null;this.destroyAggregation("_socialActions");this.destroyAggregation("_businessActionButtons");if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();delete this._oItemNavigation}};S.prototype.isActive=function(){var t=this.getDomRef()!=null;return t};S.prototype._getLocalizedText=function(t,e){var o;if(this.oRb){o=this.oRb.getText(t)}if(o&&e){for(var i=0;i<e.length;i++){o=o.replace("{"+i+"}",e[i])}}return o?o:t};S.prototype._getSocialAction=function(e){var o=this.mActionMap[e];if(!o){o=new r({id:this.getId()+"-"+e});switch(e){case this.mActionKeys.Update:o.name=this.mActionKeys.Update;o.tooltipKey="ACTIONBAR_UPDATE_ACTION_TOOLTIP";o.cssClass="sapUiUx3ActionBarUpdateAction";o.fnInit=function(e){e._oUpdatePopup=new a({id:e.getId()+"-UpdateActionPopup"}).addStyleClass("sapUiUx3ActionBarUpdatePopup");e._oUpdatePopup._ensurePopup().setAutoClose(true);e._feeder=new u({id:e.getId()+"-Feeder",type:m.Comment,thumbnailSrc:e.getThingIconURI(),text:"",submit:t.proxy(function(t){var e=t.getParameter("text");this.fireFeedSubmit({text:e});this._oUpdatePopup.close()},e)});e._feeder.addStyleClass("sapUiUx3ActionBarFeeder");e._oUpdatePopup.addContent(e._feeder)};o.fnActionSelected=function(e,i){i._setUpdateState(!i.getUpdateState());if(i._oUpdatePopup.isOpen()){i._oUpdatePopup.close()}else{var n,s,r;i._oUpdatePopup.setPosition(A.BeginBottom,A.BeginTop,e.getSource().getDomRef(),"-8 -13","none");i._oUpdatePopup.open();n=t(i._oUpdatePopup.getDomRef());s=t(window).height();r=t(i.getDomRef()).offset().top;n.css("top","auto").css("bottom",s-r+7+"px");setTimeout(function(){if(i._feeder.getFocusDomRef()){i._feeder.getFocusDomRef().focus()}},1e3)}i._updateSocialActionDomRef(o)};o.fnExit=function(t){if(t._oUpdatePopup){t._oUpdatePopup.destroy();t._oUpdatePopup=null}};o.fnCalculateState=function(t){var e=null;if(t.getUpdateState()){e="Selected"}return e};break;case this.mActionKeys.Follow:var i=o;o.name=this.mActionKeys.Follow;o.tooltipKey="ACTIONBAR_FOLLOW_ACTION_TOOLTIP_FOLLOW";o.cssClass="sapUiUx3ActionBarFollowAction";o.isMenu=function(t){return t.getFollowState()!=y.Default};o.fnActionSelected=function(t,e){if(e.getFollowState()==y.Default){e._setFollowState(y.Follow);e.fireActionSelected({id:i.name,state:"followState",action:i});this._fnPrepareFollowMenu(t,e)}else{e._oMenu.open(false,i.getFocusDomRef(),A.BeginBottom,A.BeginTop,i.getDomRef())}};o.fnCalculateState=function(t){return t.getFollowState()};o._fnPrepareFollowMenu=function(e,i){var n=sap.ui.resource("sap.ui.ux3","themes/"+f.getTheme());if(i.mActionMap[i.mActionKeys.Follow]){if(!i._oUnFollowItem){i._oUnFollowItem=new c({id:i.getId()+"-unfollowState",text:i._getLocalizedText("TI_FOLLOW_ACTION_MENU_TXT_UNFOLLOW"),icon:n+"/img/menu_unlisten.png"})}if(!i._oHoldItem){i._oHoldItem=new c({id:i.getId()+"-holdState",text:i._getLocalizedText("TI_FOLLOW_ACTION_MENU_TXT_HOLD"),icon:n+"/img/menu_hold.png"})}if(!i._oUnHoldItem){i._oUnHoldItem=new c({id:i.getId()+"-unholdState",text:i._getLocalizedText("TI_FOLLOW_ACTION_MENU_TXT_UNHOLD"),icon:n+"/img/menu_follow.png"})}if(!i._oMenu){i._oMenu=new h({id:i.getId()+"-followActionMenu"});i._oMenu.attachItemSelect(t.proxy(function(t){this._fnFollowMenuSelected(t,i)},this));i._oMenu.addItem(i._oHoldItem);i._oMenu.addItem(i._oUnHoldItem);i._oMenu.addItem(i._oUnFollowItem)}if(i.getFollowState()==y.Default){i.mActionMap[i.mActionKeys.Follow].setTooltip(i._getLocalizedText("TI_FOLLOW_ACTION_TOOLTIP_FOLLOW"));i._oHoldItem.setVisible(false);i._oUnFollowItem.setVisible(false);i._oUnHoldItem.setVisible(false)}else if(i.getFollowState()==y.Follow){i.mActionMap[i.mActionKeys.Follow].setTooltip(i._getLocalizedText("TI_FOLLOW_ACTION_TOOLTIP_STOPPAUSE_FOLLOW"));i._oHoldItem.setVisible(true);i._oUnFollowItem.setVisible(true);i._oUnHoldItem.setVisible(false)}else if(i.getFollowState()==y.Hold){i.mActionMap[i.mActionKeys.Follow].setTooltip(i._getLocalizedText("TI_FOLLOW_ACTION_TOOLTIP_STOPCONTINUE_FOLLOW"));i._oHoldItem.setVisible(false);i._oUnFollowItem.setVisible(true);i._oUnHoldItem.setVisible(true)}i._updateSocialActionDomRef(o)}};o._fnFollowMenuSelected=function(t,e){if(e.mActionMap[e.mActionKeys.Follow]){var o=t.getParameters().item.getId();if(o==e.getId()+"-followState"){e._setFollowState(y.Follow)}else if(o==e.getId()+"-unfollowState"){e._setFollowState(y.Default)}else if(o==e.getId()+"-holdState"){e._setFollowState(y.Hold)}else if(o+"-unholdState"){e._setFollowState(y.Follow)}e.fireActionSelected({id:i.name,state:o,action:i});this._fnPrepareFollowMenu(t,e)}};break;case this.mActionKeys.Favorite:var n=o;o.name=this.mActionKeys.Favorite;o.tooltipKey="ACTIONBAR_FAVORITE_ACTION_TOOLTIP";o.cssClass="sapUiUx3ActionBarFavoriteAction";o.fnActionSelected=function(t,e){if(e.getFavoriteState()==true){e._setFavoriteState(false)}else{e._setFavoriteState(true)}e.fireActionSelected({id:n.name,state:e.getFavoriteState(),action:n});e._updateSocialActionDomRef(o)};o.fnCalculateState=function(t){var e=null;if(t.getFavoriteState()){e="Selected"}return e};break;case this.mActionKeys.Flag:var s=o;o.name=this.mActionKeys.Flag;o.tooltipKey="ACTIONBAR_FLAG_ACTION_TOOLTIP";o.cssClass="sapUiUx3ActionBarFlagAction";o.fnActionSelected=function(t,e){e._setFlagState(!e.getFlagState());e.fireActionSelected({id:s.name,state:e.getFlagState(),action:s});e._updateSocialActionDomRef(o)};o.fnCalculateState=function(t){var e=null;if(t.getFlagState()){e="Selected"}return e};break;case this.mActionKeys.Open:o.name=this.mActionKeys.Open;o.tooltipKey="ACTIONBAR_OPEN_THING_ACTION_TOOLTIP";o.cssClass="sapUiUx3ActionBarOpenThingAction";break;default:g.warning('Function "sap.ui.ux3.ActionBar.prototype._getSocialAction" was called with unknown action key "'+e+'".\n\tNo action will not be rendered.');return undefined}}return o};S.prototype._updateSocialActionDomRef=function(t){var e=t.$();if(e){e.attr("class",t.cssClass);if(t.fnCalculateState){e.addClass("sapUiUx3ActionBarAction");e.addClass(t.fnCalculateState(this))}if(t.name==this.mActionKeys.Update||t.name==this.mActionKeys.Flag||t.name==this.mActionKeys.Favorite){e.attr("aria-pressed",t.fnCalculateState(this)=="Selected"?"true":"false")}if(t.isMenu){e.attr("aria-haspopup",t.isMenu(this)?"true":"false")}}};S.prototype._rerenderSocialActions=function(){var t=this.$("socialActions");if(t.length>0){var e=sap.ui.getCore().createRenderManager();n.renderSocialActions(e,this);e.flush(t[0]);e.destroy()}};S.prototype._rerenderBusinessAction=function(t){var e=t.$();if(e.length>0){var o=sap.ui.getCore().createRenderManager();o.renderControl(t);o.flush(e[0].parentNode);o.destroy()}};S.prototype._rerenderBusinessActions=function(){if(!this.getAlwaysShowMoreMenu()){var t=this.$("businessActions");if(t&&t.length>0){var e=sap.ui.getCore().createRenderManager();n.renderBusinessActionButtons(e,this);e.flush(t[0]);e.destroy()}}this._onresize()};S.prototype.setFollowState=function(t){this.setProperty("followState",t);if(!this._oMenu){var e=this._getSocialAction(this.mActionKeys.Follow);e._fnPrepareFollowMenu(null,this)}return this};S.prototype.setShowUpdate=function(t){this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Update),t);this.setProperty("showUpdate",t,true);return this};S.prototype.setShowFollow=function(t){this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Follow),t);this.setProperty("showFollow",t,true);return this};S.prototype.setShowFlag=function(t){this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Flag),t);this.setProperty("showFlag",t,true);return this};S.prototype.setShowFavorite=function(t){this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Favorite),t);this.setProperty("showFavorite",t,true);return this};S.prototype.setShowOpen=function(t){this._setShowSocialAction(this._getSocialAction(this.mActionKeys.Open),t);this.setProperty("showOpen",t,true);return this};S.prototype._setFollowState=function(t){this.setProperty("followState",t,true);return this};S.prototype._setFlagState=function(t){this.setProperty("flagState",t,true);return this};S.prototype._setUpdateState=function(t){this.setProperty("updateState",t,true);return this};S.prototype._setFavoriteState=function(t){this.setProperty("favoriteState",t,true);return this};S.prototype.setThingIconURI=function(t){this.setProperty("thingIconURI",t,true);var e=this.mActionMap[this.mActionKeys.Update];if(e&&this._feeder){this._feeder.setThumbnailSrc(t)}else{g.warning('Function "sap.ui.ux3.ActionBar.setThingIconURI": failed to set new icon "'+t+'".\n\tReason: either updateAction '+e+" or feeder "+this._feeder+" is not defined.")}return this};S.prototype.setDividerWidth=function(t){this._iSocActListWidth=null;this.setProperty("dividerWidth",t);return this};S.prototype.setAlwaysShowMoreMenu=function(t){var e=this.getProperty("alwaysShowMoreMenu");var o=this.getAggregation("businessActions",[]);this.setProperty("alwaysShowMoreMenu",t,true);if(e!=t&&o){if(!t){for(var i=0;i<o.length;i++){var n=o[i];this._createButtonForAction(n,this._oMoreMenu._getMenuItemForAction(n))}}else{var s=this._getBusinessActionButtons();for(var r=0;r<s.length;r++){if(s[r].oMenuItem){s[r].oMenuItem.setVisible(true);s[r].oMenuItem=null}}this.destroyAggregation("_businessActionButtons")}this._styleMoreMenuButton()}this._bCallOnresize=true;this._rerenderBusinessActions();return this};S.prototype.closePopups=function(){if(this._oUpdatePopup){this._oUpdatePopup.close()}if(this._oMoreMenu){this._oMoreMenu.close()}if(this._oMenu){this._oMenu.close()}};S.prototype._removeSocialAction=function(t){var e=null;if(t.name&&this.mActionMap[t.name]){if(this.mActionMap[t.name].fnExit){this.mActionMap[t.name].fnExit(this)}e=this.removeAggregation("_socialActions",this.mActionMap[t.name],true);this.mActionMap[t.name].destroy();delete this.mActionMap[t.name];this._rerenderSocialActions();this._iSocActListWidth=null}return e};S.prototype._removeAllSocialActions=function(){for(var t in this.mActionMap){if(this.mActionMap[t]&&this.mActionMap[t].fnExit){this.mActionMap[t].fnExit(this)}}this.mActionMap={};var e=this.removeAllAggregation("_socialActions",true);this._iSocActListWidth=null;this._rerenderSocialActions();return e};S.prototype._addSocialAction=function(t,e){var o=null;if(!this.mActionMap[t.name]){o=this._prepareSocialAction(t,e);if(t.fnInit){t.fnInit(this)}this._iSocActListWidth=null}if(o){this._rerenderSocialActions()}return o};S.prototype._prepareSocialAction=function(e,o){e.attachSelect(t.proxy(function(t){if(e.fnActionSelected){e.fnActionSelected(t,this)}else{this.fireActionSelected({id:e.name,action:e})}},this));e.setTooltip(this._getLocalizedText(e.tooltipKey));this.mActionMap[e.name]=e;if(o){this.insertAggregation("_socialActions",e,o,true)}else{this.addAggregation("_socialActions",e,true)}return e};S.prototype._setShowSocialAction=function(t,e){return e?this._addSocialAction(t):this._removeSocialAction(t)};S.prototype.addBusinessAction=function(t){return this._addBusinessAction(t)};S.prototype.insertBusinessAction=function(t,e){return this._addBusinessAction(t,e)};S.prototype.removeBusinessAction=function(t){return this._removeBusinessAction(t,true)};S.prototype._removeBusinessAction=function(t,e){if(typeof t==="string"){var o;var i=t;for(var n=0;n<this.getBusinessActions().length;n++){var s=this.getBusinessActions()[n];if(s.getId()===i){o=s;break}}t=o}if(this._oMoreMenu){var r=this._oMoreMenu._getMenuItemForAction(t);if(r){this._oMoreMenu.removeItem(r);r.destroy()}if(this._oMoreMenu.getItems().length==0){this._oMoreMenuButton.destroy();this._oMoreMenuButton=null;this._oMoreMenu.destroy();this._oMoreMenu=null}}if(!this.getAlwaysShowMoreMenu()){var a=this._getButtonForAction(t);if(a){this.removeAggregation("_businessActionButtons",a,true);a.destroy()}}var u=this.removeAggregation("businessActions",t,true);if(e){this._rerenderBusinessActions()}return u};S.prototype.removeAllBusinessActions=function(){var t=this.getAggregation("businessActions",[]);if(t){for(var e=0;e<t.length;e++){this._removeBusinessAction(t[e],false)}}this._rerenderBusinessActions();var o=this.removeAllAggregation("businessActions",true);return o};S.prototype.destroyBusinessActions=function(){var t=this.getAggregation("businessActions",[]);if(t){for(var e=0;e<t.length;e++){var o=this._removeBusinessAction(t[e],false);if(o instanceof sap.ui.core.Element){o.destroy(true)}}}this._rerenderBusinessActions();var i=this.destroyAggregation("businessActions",true);return i};S.prototype._getBusinessActionButtons=function(){return this.getAggregation("_businessActionButtons",[])};S.prototype._addBusinessAction=function(e,o){var i;if(!o&&o!=0){i=this.addAggregation("businessActions",e,true)}else{i=this.insertAggregation("businessActions",e,o,true)}if(!this._oMoreMenuButton){this._oMoreMenuButton=new p(this.getId()+"-MoreMenuButton");this._oMoreMenuButton.setText(this._getLocalizedText("ACTIONBAR_BUTTON_MORE_TEXT"));this._oMoreMenuButton.setTooltip(this._getLocalizedText("ACTIONBAR_BUTTON_MORE_TOOLTIP"));this._oMoreMenuButton.setDockButton(A.EndTop);this._oMoreMenuButton.setDockMenu(A.EndBottom);this._styleMoreMenuButton();this._oMoreMenu=new h(this.getId()+"-MoreMenu",{ariaDescription:this._getLocalizedText("ACTIONBAR_BUTTON_MORE_TOOLTIP")});this._oMoreMenu._getMenuItemForAction=function(t){for(var e=0;e<this.getItems().length;e++){var o=this.getItems()[e];if(o.action==t){return o}}return null};this._oMoreMenuButton.setMenu(this._oMoreMenu)}var n=this._oMoreMenu.getId()+"-MenuItem-"+e.getId();var s=new c(n,{text:e.getText(),enabled:e.getEnabled()});s.action=e;s.attachSelect(t.proxy(function(t){this.fireActionSelected({id:e.getId(),action:e})},this));if(o){this._oMoreMenu.insertItem(s,o)}else{this._oMoreMenu.addItem(s)}this._createButtonForAction(e,s,o);this._rerenderBusinessActions();return i};S.prototype._getMoreMenuButton=function(){return this._oMoreMenuButton};S.prototype._onresize=function(t){var e=this.$();if(e){var o=this.getActionBarMinWidth()+"px";if(e.css("minWidth")!=o){e.css("minWidth",o)}}if(!this.getAlwaysShowMoreMenu()&&this._oMoreMenuButton){var i=false;if(this._getBusinessActionButtons().length>1){var n=this._oMoreMenuButton.$().outerWidth();var s=e.outerWidth()-this._getSocialActionListMinWidth()-n;var r=this._getBusinessActionButtons();var a=0;for(var u=0;u<r.length;u++){var l=r[u].$().parent();a+=l.outerWidth();if(u==r.length-1){a-=n}if(a>=s){if(l.length>0){l.css("display","none");if(r[u].oMenuItem){r[u].oMenuItem.setVisible(true)}i=true}}else{if(l.length>0){l.css("display","");if(_.browser.msie){this._rerenderBusinessAction(r[u])}if(r[u].oMenuItem){r[u].oMenuItem.setVisible(false)}}}}i|=this.getAggregation("businessActions").length>r.length}var c=this._oMoreMenuButton.$().parent();if(c.length>0){i?c.css("display",""):c.css("display","none")}if(!i&&this._oMoreMenu){this._oMoreMenu.close()}}this._setItemNavigation()};S.prototype.onBeforeRendering=function(){s.deregister(this._sResizeListenerId);this._sResizeListenerId=null};S.prototype.onAfterRendering=function(){this._sResizeListenerId=s.register(this.getDomRef(),t.proxy(this._onresize,this));if(this._bCallOnresize){this._onresize()}this._setItemNavigation()};S.prototype._getSocialActionListMinWidth=function(){if(!this._iSocActListWidth){if(this.getDividerWidth()){this._iSocActListWidth=parseInt(this.getDividerWidth())}else{var t=this.getAggregation("_socialActions",[]);var e=t.length;this._iSocActListWidth=24*e+12}}return this._iSocActListWidth};S.prototype.getActionBarMinWidth=function(){var t=this._getSocialActionListMinWidth();var e=this._oMoreMenuButton;if(!this.getAlwaysShowMoreMenu()&&this._getBusinessActionButtons().length==1){e=this._getBusinessActionButtons()[0]}if(e){var o=e.$().parent();if(o){t+=o.outerWidth()-3}}return t};S.prototype._getButtonForAction=function(t){for(var e=0;e<this._getBusinessActionButtons().length;e++){var o=this._getBusinessActionButtons()[e];if(o.action==t){return o}}return null};S.prototype._createButtonForAction=function(e,o,i){if(!this.getAlwaysShowMoreMenu()&&!e.showInMoreMenu){var n=new d({id:this.getId()+"-"+e.getId()+"Button",text:e.getText(),tooltip:e.getTooltip(),enabled:e.getEnabled()});n.attachPress(t.proxy(function(t){this.fireActionSelected({id:e.getId(),action:e})},this));n.oMenuItem=o;n.action=e;if(i){this.insertAggregation("_businessActionButtons",n,i,true)}else{this.addAggregation("_businessActionButtons",n,true)}return n}return null};S.prototype._styleMoreMenuButton=function(){if(this._oMoreMenuButton){if(this.getAlwaysShowMoreMenu()){this._oMoreMenuButton.setLite(true);this._oMoreMenuButton.addStyleClass("sapUiUx3ActionBarLiteMoreButton")}else{this._oMoreMenuButton.setLite(false);this._oMoreMenuButton.removeStyleClass("sapUiUx3ActionBarLiteMoreButton")}}};S.prototype._setItemNavigation=function(){if(this.getDomRef()){this._oItemNavigation.setRootDomRef(t(this.getDomRef()).get(0));var e=[];var o=this.getAggregation("_socialActions",[]);for(var i=0;i<o.length;i++){e.push(o[i].getDomRef())}o=this.getAggregation("_businessActionButtons",[]);for(var i=0;i<o.length;i++){e.push(o[i].getDomRef())}if(this._oMoreMenuButton&&this._oMoreMenuButton.getDomRef()){e.push(this._oMoreMenuButton.getDomRef())}this._oItemNavigation.setItemDomRefs(e)}};S.prototype.invalidate=function(t){if(t instanceof r){var o=sap.ui.getCore().byId(this.getId()+"-"+t.getId()+"Button");var i=this._oMoreMenu&&this._oMoreMenu._getMenuItemForAction(t);if(o){o.setTooltip(t.getTooltip());o.setText(t.getText());o.setEnabled(t.getEnabled())}if(i){i.setTooltip(t.getTooltip());i.setText(t.getText());i.setEnabled(t.getEnabled())}if(!o&&!i){e.prototype.invalidate.apply(this,arguments)}}e.prototype.invalidate.apply(this,arguments)};return S});