/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/library","sap/ui/core/date/UI5Date","sap/ui/mdc/enum/BaseType","sap/base/util/merge"],function(e,t,a,r){"use strict";var n=e.CalendarType;var o={createInternalType:function(e,t){var a=sap.ui.require(e.getMetadata().getName().replace(/\./g,"/"));var o=r({},e.getConstraints());var i=r({},e.getFormatOptions());if(i.style){delete i.style}i.pattern=t;i.calendarType=n.Gregorian;if(this.showTimezone(e)){i.showTimezone=false}return new a(i,o)},showTimezone:function(e){var t=e.getFormatOptions();var a=function(e,t){return!e.hasOwnProperty(t)||e[t]};return e.isA("sap.ui.model.odata.type.DateTimeWithTimezone")&&a(t,"showTimezone")&&(a(t,"showDate")||a(t,"showTime"))},typeToString:function(e,t,a){var r=this.createInternalType(t,a);var n=r.formatValue(e,"string");return n},stringToType:function(e,t,a){var r=this.createInternalType(t,a);var n=r.parseValue(e,"string");return n},typeToISO:function(e,t,a){var r=this.typeToDate(e,t,a);return r.toISOString()},ISOToType:function(e,a,r){var n=t.getInstance(e);if(a.getFormatOptions().UTC){n=t.getInstance(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())}return this.dateToType(n,a,r)},dateToType:function(e,t,r){var n;if(t.getModelValue){n=t.getModelValue(e)}else{var o=t.getModelFormat();var i=t.getFormatOptions();var s=r===a.DateTime?!!i.UTC:false;n=o.format(e,s)}return n},typeToDate:function(e,r,n){var o;if(r.isA("sap.ui.model.odata.type.DateTime")&&r.getConstraints().displayFormat==="Date"){o=t.getInstance(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}else{var i=r.getModelFormat();var s=r.getFormatOptions();var T=n===a.DateTime?!!s.UTC:false;o=i.parse(e,T)}return o}};return o});