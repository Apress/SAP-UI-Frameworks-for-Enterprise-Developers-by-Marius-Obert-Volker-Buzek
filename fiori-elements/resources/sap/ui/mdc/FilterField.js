/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/field/FieldBase","sap/ui/mdc/field/FieldBaseRenderer","sap/ui/mdc/enum/FieldDisplay","sap/base/util/merge","sap/base/util/deepEqual"],function(t,e,r,i,o){"use strict";var a=t.extend("sap.ui.mdc.FilterField",{metadata:{library:"sap.ui.mdc",designtime:"sap/ui/mdc/designtime/field/FilterField.designtime",properties:{operators:{type:"string[]",group:"Data",defaultValue:[]},defaultOperator:{type:"string",group:"Data",defaultValue:null}},events:{change:{parameters:{value:{type:"string"},valid:{type:"boolean"},conditions:{type:"object[]"},promise:{type:"boolean"}}}}},renderer:e});a.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["value","operators"]})};a.prototype.exit=function(){t.prototype.exit.apply(this,arguments)};a.prototype.setProperty=function(e,r,i){if(e==="conditions"&&this._isInvalidInput()&&o(this.getConditions(),this.validateProperty(e,r))){if(this._oManagedObjectModel){this._oManagedObjectModel.checkUpdate(true,true)}this._resetInvalidInput()}return t.prototype.setProperty.apply(this,arguments)};a.prototype._observeChanges=function(e){t.prototype._observeChanges.apply(this,arguments);if(e.name==="operators"){this._updateInternalContent()}};a.prototype._fireChange=function(t,e,r,o){var a;if(t){if(e){if(t.length==1){a=t[0].values[0]}}else{a=r}}this.fireChange({value:a,valid:e,conditions:i([],t),promise:o})};a.prototype._getOperators=function(){var e=this.getOperators();if(e.length===0){e=t.prototype._getOperators.apply(this,arguments)}return e};a.prototype.setOperators=function(t){var e=[];if(!Array.isArray(t)){t=t.split(",")}t.forEach(function(t){if(typeof t==="string"){e.push(t)}else{e.push(t.name)}});this.setProperty("operators",e);return this};a.prototype.addOperator=function(t){var e=this._getOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)<0){e.push(r);this.setOperators(e)}return this};a.prototype.addOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.addOperator(t)}.bind(this));return this};a.prototype.removeOperator=function(t){var e=this._getOperators();var r=t;if(typeof t!=="string"){r=t.name}if(e.indexOf(r)>-1){e.splice(e.indexOf(r),1);this.setOperators(e)}};a.prototype.removeOperators=function(t){if(!Array.isArray(t)){t=[t]}t.forEach(function(t){this.removeOperator(t)}.bind(this))};a.prototype.removeAllOperators=function(){this.setOperators([])};a.prototype.setDefaultOperator=function(t){var e=t;if(t&&typeof t!=="string"){e=t.name}this.setProperty("defaultOperator",e);return this};a.prototype._checkCreateInternalContent=function(){if(!this.bIsDestroyed&&!this.isPropertyInitial("dataType")){var e=this.getFieldHelp();var i=sap.ui.getCore().byId(e);var o=this.getBindingInfo("conditions");var a=this.getBinding("conditions");if(this.getDisplay()!==r.Value&&e&&(!i||o&&!a)){return}this._getContentFactory().retrieveDataType();t.prototype._checkCreateInternalContent.apply(this,arguments)}};a.prototype._handleModelContextChange=function(e){t.prototype._handleModelContextChange.apply(this,arguments);if(this._getContent().length===0){this._triggerCheckCreateInternalContent()}};return a});