/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./AggregationBaseDelegate","./library","sap/ui/model/Sorter","sap/ui/core/library","sap/ui/core/Core"],function(e,r,t,o,a){"use strict";var n=r.TableP13nMode;var i=r.TableType;var s=Object.assign({},e);s.updateBindingInfo=function(e,r){r.parameters={};r.filters=[];r.sorter=[];if(e._oMessageFilter){r.filters=[e._oMessageFilter]}if(e._isOfType(i.ResponsiveTable)){var t=e._getGroupedProperties()[0];if(t){var o=this.getGroupSorter(e,t.name);if(o){r.sorter.push(o)}}}r.sorter=r.sorter.concat(r.sorter.length===1?e._getSorters().filter(function(e){return e.sPath!==r.sorter[0].sPath}):e._getSorters())};s.getGroupSorter=function(e,r){var o=e._getSortedProperties().find(function(e){return e.name===r});var a=e.getPropertyHelper().getProperty(r).path;var n=o?o.descending:false;if(!e._mFormatGroupHeaderInfo||e._mFormatGroupHeaderInfo.propertyName!==r){e._mFormatGroupHeaderInfo={propertyName:r,formatter:function(t){return this.formatGroupHeader(e,t,r)}.bind(this)}}return new t(a,n,e._mFormatGroupHeaderInfo.formatter)};s.updateBinding=function(e,r,t){this.rebind(e,r)};s.formatGroupHeader=function(e,r,t){var o=e.getPropertyHelper().getProperty(t);var n=o.textProperty;var i=a.getLibraryResourceBundle("sap.ui.mdc");var s="table.ROW_GROUP_TITLE";var p=[o.label,r.getProperty(o.path,true)];if(n){s="table.ROW_GROUP_TITLE_FULL";p.push(r.getProperty(n.path,true))}return i.getText(s,p)};s.validateState=function(r,t,n){if(n=="Filter"&&r._oMessageFilter){var i=a.getLibraryResourceBundle("sap.ui.mdc");return{validation:o.MessageType.Information,message:i.getText("table.PERSONALIZATION_DIALOG_FILTER_MESSAGESTRIP")}}return e.validateState.apply(this,arguments)};s.rebind=function(e,r){e._getType().bindRows(r)};s.getFilterDelegate=function(){return{addItem:function(e,r){return Promise.resolve(null)},addCondition:function(e,r,t){return Promise.resolve()},removeCondition:function(e,r,t){return Promise.resolve()}}};s.fetchExportCapabilities=function(e){return Promise.resolve({XLSX:{}})};s.expandAll=function(e){throw Error("Unsupported operation: TableDelegate does not support #expandAll")};s.collapseAll=function(e){throw Error("Unsupported operation: TableDelegate does not support #collapseAll")};s.getSupportedFeatures=function(e){return{export:true,selection:!e._isOfType(i.TreeTable),expandAll:false,collapseAll:false}};s.getSupportedP13nModes=function(e){var r=[n.Column,n.Sort,n.Filter];if(e._isOfType(i.ResponsiveTable)){r.push(n.Group)}return r};return s});