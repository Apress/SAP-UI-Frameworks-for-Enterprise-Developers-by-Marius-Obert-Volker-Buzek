/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(["./VoAggregation","sap/ui/unified/Menu","./library"],function(e,t,n){"use strict";var i=e.extend("sap.ui.vbm.Containers",{metadata:{library:"sap.ui.vbm",defaultAggregation:"items",aggregations:{items:{type:"sap.ui.vbm.Container",multiple:true,singularName:"item"}},events:{}}});i.prototype.getBindInfo=function(){var t=e.prototype.getBindInfo.apply(this,arguments);var n=this.getTemplateBindingInfo();t.P=n?n.hasOwnProperty("position"):true;t.AL=n?n.hasOwnProperty("alignment"):true;return t};i.prototype.getTemplateObject=function(){var t=e.prototype.getTemplateObject.apply(this,arguments);var n=this.mBindInfo=this.getBindInfo();var i=n.hasTemplate?this.getBindingInfo("items").template:null;t["type"]="{00100000-2012-0004-B001-2297943F0CE6}";t["key.bind"]=t.id+".IK";if(n.P){t["pos.bind"]=t.id+".P"}else{t.pos=i.getPosition()}if(n.AL){t["alignment.bind"]=t.id+".AL"}else{t.alignment=i.getAlignment()}return t};i.prototype.getTypeObject=function(){var t=e.prototype.getTypeObject.apply(this,arguments);var n=this.mBindInfo;t.A.push({name:"IK",alias:"IK",type:"key"});if(n.P){t.A.push({changeable:"true",name:"P",alias:"P",type:"vector"})}if(n.AL){t.A.push({name:"AL",alias:"AL",type:"string"})}return t};i.prototype.getActionArray=function(){var t=e.prototype.getActionArray.apply(this,arguments);var n=this.getId();if(this.mEventRegistry["click"]||this.isEventRegistered("click")){t.push({id:n+"1",name:"click",refScene:"MainScene",refVO:n,refEvent:"Click",AddActionProperty:[{name:"pos"}]})}if(this.mEventRegistry["contextMenu"]||this.isEventRegistered("contextMenu")){t.push({id:n+"2",name:"contextMenu",refScene:"MainScene",refVO:n,refEvent:"ContextMenu"})}return t};i.prototype.handleContainerCreated=function(e){var t=this.findInstance(e.mParameters.id);var n=t.getItem();if(n){var i=e.getParameter("contentarea");i.addEventListener("click",this,false);i.addEventListener("contextmenu",this,false);var a;if(a=this.getParent()){var r=i.id;a.addRenderItem(n,r)}}};i.prototype.handleContainerDestroyed=function(e){var t=e.getParameter("contentarea");t.removeEventListener("click",this,false);t.removeEventListener("contextmenu",this,false)};i.prototype.findInstance=function(e){var t=this.getItems();if(!t){return false}for(var n=0,i=this.aUniqueIdx.length;n<i;++n){if(this.aUniqueIdx[n]===e){return t[n]}}return null};i.prototype.handleEvent=function(e){var n=e.currentTarget.m_Key;var i=this.findInstance(n);switch(e.type){case"click":i.fireClick();this.fireClick({instance:i});break;case"contextmenu":var a={};var r=this.oParent.getDomRef().getBoundingClientRect();i.mClickPos=[e.clientX-r.left,e.clientY-r.top];try{if(this.oParent.mVBIContext.m_Menus){this.oParent.mVBIContext.m_Menus.deleteMenu("DynContextMenu")}var s=new t;s.vbi_data={};s.vbi_data.menuRef="CTM";s.vbi_data.VBIName="DynContextMenu";a.menu=s;e.preventDefault();i.fireContextMenu(a);a.instance=i;this.fireContextMenu(a)}catch(e){}break}};return i});