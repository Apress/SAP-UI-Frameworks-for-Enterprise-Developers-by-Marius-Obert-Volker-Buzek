/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(["./sapvbi"],function(){"use strict";VBI.MathLib=function(){var a={};a.min_longitude=-Math.PI;a.max_longitude=Math.PI;a.min_latitude=-85.05112878*2*Math.PI/360;a.max_latitude=85.05112878*2*Math.PI/360;a.mercator_for_max_latitude=3.1415942;a.div_mercator_for_max_latitude=.5/a.mercator_for_max_latitude;a.div_max_longitude=1/a.max_longitude;a.earthradius=6378137;a.piDiv180=Math.PI/180;a.One180DivPi=1/a.piDiv180;a.stdWorldBorder=-180;a.CreateGUID=function(){var a=[];for(var t=0;t<8;++t){a[t]=((Math.random()+1)*65536|0).toString(16).substring(1)}return a[0]+a[1]+"-"+a[2]+"-"+a[3]+"-"+a[4]+"-"+a[5]+a[6]+a[7]};a.DegToRad=function(t){return[t[0]*a.piDiv180,t[1]*a.piDiv180]};a.RadToDeg=function(t){return[t[0]*a.One180DivPi,t[1]*a.One180DivPi]};a.LonLatToUCS=function(t,r){var i=r[0];var n=r[1];var e=t[0];var o=t[1];if(o<a.min_latitude){o=a.min_latitude}else if(o>a.max_latitude){o=a.max_latitude}r[0]=e*a.div_max_longitude;r[0]=(r[0]+1)*i*.5;var v=Math.sin(o);r[1]=Math.log((1+v)/(1-v))*a.div_mercator_for_max_latitude;r[1]=.5*n*(1-r[1]);return r};a.UCSToLonLat=function(t,r){r[0]=t[0]*Math.PI;r[1]=Math.atan(a.sinh(-t[1]*a.mercator_for_max_latitude));return r};a.sinh=function(a){var t=Math.pow(Math.E,a);var r=Math.pow(Math.E,-a);return(t-r)/2};a.Distance=function(t,r){var i=a.earthradius;var n=t[1];var e=t[0];var o=r[1];var v=r[0];var f=o-n;var h=v-e;var M=Math.sin(f/2)*Math.sin(f/2)+Math.cos(n)*Math.cos(o)*Math.sin(h/2)*Math.sin(h/2);var u=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));var s=i*u;return s};a.EquidistantLonLat=function(t,r,i){var n=[];i=i||64;var e,o,v;var f=r/a.earthradius;var h=t[0];var M=t[1];var u=Math.sin(f);var s=Math.cos(f);var d=Math.sin(M);var l=Math.cos(M);var _=h,m=h;var c=M,g=M;for(var x=0;x<i;++x){e=x*2*Math.PI/i;o=Math.asin(d*s+l*u*Math.cos(e));v=h+Math.atan2(Math.sin(e)*u*l,s-d*Math.sin(o));if(_>v){_=v}if(m<v){m=v}if(c>o){c=o}if(g<o){g=o}n.push([v,o])}n.m_MinX=_;n.m_MaxX=m;n.m_MinY=c;n.m_MaxY=g;return n};a.GetSurroundingBox=function(t,r,i,n,e){var o=100;var v=a.stdWorldBorder;if(r==undefined){r=360}var f=t[0].length==2;var h=0,M=1,u=2,s=3;if(f){M=0;u=s=1}var d=Number.MAX_VALUE,l=-Number.MAX_VALUE;var _,m,c,g,x;for(x=0;x<t.length;++x){c=t[x];if((_=c[h])<-180||_>180){g=Math.floor((_+180)/360);_=c[h]-=360*g;c[M]-=360*g}if((m=c[M])<_){g=Math.ceil((_-m)/360);m=c[M]+=360*g}if(c[u]<d){d=c[u]}if(c[s]>l){l=c[s]}}t.sort(function(a,t){return a[0]-t[0]});var D=-1,L=-1;var p=-1,P=-1;var b,I;var E=t[0];var U,A=E[M],B=E[h];var N,S;for(x=1;x<t.length;++x){E=t[x];B=E[h];U=E[M];if(B<A){if(U>A){A=U}}else{if(B-A>D){b=A;D=B-A;p=x}if(B-A>L){N=Math.abs((B-v+540)%360-180);S=Math.abs((A-v+540)%360-180);if(N<o||S<o){I=A;L=B-A;P=x}}A=U}}E=t[0];B=E[h];var T=B-A+360;if(T>L){N=Math.abs((B-v+540)%360-180);S=Math.abs((A-v+540)%360-180);if(N<o||S<o){I=A;L=T;P=0}}if(T>D){D=T;b=A}else{if(p<0){return[v,v+360,d,l,false]}E=t[p]}b-=360*Math.floor((b+180)/360);var X=Math.floor(i)+1;var q=i==undefined?0:360/Math.pow(2,X-i);var w=1e3;if(r==0){r=q;if(n!=undefined){w=Math.floor(n(d,l))}}var C=b-E[h]+360*(b<E[h]);var O=false;if(i!=undefined){var V=Math.floor(X+Math.log(q/(360-D))/Math.LN2);if(C>r||Math.min(V,w)<=i+e){return[v,v+360,d,l,false]}if(q&&L>=0){var G=Math.floor(X+Math.log(q/(360-L))/Math.LN2);O=V==G||V<=G}if(O){E=t[P];b=I-360*Math.floor((I+180)/360)}}return[E[h],b,d,l]};return a}()});