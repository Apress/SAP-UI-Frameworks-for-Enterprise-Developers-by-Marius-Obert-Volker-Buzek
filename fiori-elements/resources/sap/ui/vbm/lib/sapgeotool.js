/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(["./sapvbi"],function(){"use strict";VBI.QuadTree=function(n,t,r){var i=0,e=1,u=2,c=3,f=4;var a=function(n,t,r,o){var s=[];var h=[];return{quc:function(n,t){var r;for(var i=0,e=h.length;i<e;++i){r=h[i];if(r[0]>n[2]||r[2]<n[0]||r[1]>n[3]||r[3]<n[1]){continue}t(r)}if(s.length){this.calcIntersectingNodes(n,t)}},qua:function(n,t){this.quc(n,function(n){t.push(n)})},calcIntersectingNodes:function(t,r){var f=n[0],a=n[1],o=(n[2]-f)/2,h=(n[3]-a)/2;if(t[0]<f+o){if(t[1]<a+h){s[i].quc(t,r)}if(t[3]>=a+h){s[u].quc(t,r)}}if(t[2]>=f+o){if(t[1]<a+h){s[e].quc(t,r)}if(t[3]>=a+h){s[c].quc(t,r)}}},calcQuadrant:function(t){var r,a,o=(n[2]-(r=n[0]))/2,s=(n[3]-(a=n[1]))/2;if(t[2]<r+o){if(t[3]<a+s){return i}if(t[1]>=a+s){return u}return f}if(t[0]>=r+o){if(t[3]<a+s){return e}if(t[1]>=a+s){return c}return f}return f},subdivide:function(){var t=n[0];var f=n[1];var l=(n[2]-t)/2,v=(n[3]-f)/2;var g=++this.m_D;var d,q;s[i]=a([d=t,q=f,d+l,q+v],g,r,o);s[e]=a([d=t+l,q=f,d+l,q+v],g,r,o);s[u]=a([d=t,q=f+v,d+l,q+v],g,r,o);s[c]=a([d=t+l,q=f+v,d+l,q+v],g,r,o);var m=h;h=[];for(var _=0,R=m.length;_<R;++_){this.insert(m[_])}},insert:function(n){var t;if(s.length){if((t=this.calcQuadrant(n))==f){h.push(n)}else{s[t].insert(n)}}else{h.push(n);if(h.length>r&&this.m_D<o){this.subdivide()}}},clear:function(){for(var n=0,t=s.length;n<t;++n){s[n].clear()}h.length=0;s.length=0},getNodes:function(){return s.length?s:null},m_R:n,m_D:t}};return{insertArray:function(n){for(var t=0,r=n.length;t<r;++t){this.m_Root.insert(n[t])}},insert:function(n){this.m_Root.insert(n)},queryArray:function(n,t){return this.m_Root.qua(n,t)},queryCallback:function(n,t){return this.m_Root.quc(n,t)},clear:function(){this.m_Root.clear()},m_Root:function(){return a(r,0,n,t)}()}}});