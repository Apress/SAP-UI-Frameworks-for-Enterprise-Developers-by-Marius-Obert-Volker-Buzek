/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(["sap/ui/core/Element","./library"],function(e,t){"use strict";var a=e.extend("sap.ui.vbm.Legend",{metadata:{library:"sap.ui.vbm",properties:{caption:{type:"string",group:"Misc",defaultValue:sap.ui.getCore().getLibraryResourceBundle("sap.ui.vbm.i18n").getText("CAPTION_LEGEND")}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.vbm.LegendItem",multiple:true,singularName:"item"}},events:{click:{parameters:{data:{type:"object"},row:{type:"int"},ctrlKey:{type:"boolean"},shiftKey:{type:"boolean"},metaKey:{type:"boolean"},altKey:{type:"boolean"}}}}}});a.prototype.init=function(){};a.prototype.getTemplateObject=function(){var e=this.getId();var t={};if(this.getParent().getLegendVisible()){t={Set:[{name:e,Window:{id:e,type:"legend",caption:this.getCaption(),refParent:"Main",refScene:"",modal:"true",datasource:e,"colors.bind":e+".C","images.bind":e+".I","texts.bind":e+".T","tooltips.bind":e+".TT"}}]};if(this.getParent().m_curLegendPos){t.Set[0].Window.right=this.getParent().m_curLegendPos.right.toString();t.Set[0].Window.top=this.getParent().m_curLegendPos.top.toString()}}else{t={Remove:[{name:e}]}}return t};a.prototype.getTypeObject=function(){return{name:this.getId(),A:[{name:"C",alias:"C",type:"color"},{name:"I",alias:"I",type:"string"},{name:"T",alias:"T",type:"string"},{name:"TT",alias:"TT",type:"string"}]}};a.prototype.getDataObject=function(){var e={};e["name"]=this.getId();e.E=[];var t=this.getItems();for(var a=0,r=t.length;a<r;++a){e.E.push(t[a].getDataElement())}return e};a.prototype.handleEvent=function(e){var t=e.Action.name;var a="fire"+t[0].toUpperCase()+t.slice(1);var r={data:e,ctrlKey:e.Action.Params.Param[1]["#"],shiftKey:e.Action.Params.Param[2]["#"],metaKey:e.Action.Params.Param[3]["#"],altKey:e.Action.Params.Param[4]["#"]};var i;if(i=this.findInstance(e.Action.Params.Param[0]["#"])){if(i.mEventRegistry[t]){if(t=="click"){i[a](r)}}}r.row=parseInt(e.Action.Params.Param[0]["#"],10);this[a](r)};a.prototype.getActionArray=function(){var e=this.getId();var t=[];if(this.mEventRegistry["click"]||this.isEventRegistered("click")){t.push({id:e+"1",name:"click",refScene:"MainScene",refVO:e,refEvent:"Click"})}return t};a.prototype.isEventRegistered=function(e){var t=this.getItems();if(!t){return false}for(var a=0,r=t.length;a<r;++a){var i=t[a];if(i.mEventRegistry[e]){return true}}return false};a.prototype.findInstance=function(e){var t=this.getItems();t[0].sId.lastIndexOf("-");t=this.getItems();if(!t){return false}for(var a=0,r=t.length;a<r;++a){var i=t[a].sId;var n=i.lastIndexOf("-");var s=i.substring(n+1);if(s===e){return t[a]}}return null};return a});