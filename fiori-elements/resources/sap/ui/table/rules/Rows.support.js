/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./TableHelper.support","sap/ui/support/library","sap/ui/Device","sap/ui/thirdparty/jquery"],function(e,t,i,a){"use strict";var n=t.Categories;var o=t.Severity;function s(t,i,n,s){var r=false;t.each(function(){if(a(this).closest(i).length){r=true}});if(r&&n){e.reportIssue(s,n,o.High)}return r}var r=e.normalizeRule({id:"ContentDensity",minversion:"1.38",categories:[n.Usage],title:"Content Density Usage",description:"Checks whether the content densities 'Cozy', 'Compact' and 'Condensed' are used correctly.",resolution:"Ensure that either only the 'Cozy' or 'Compact' content density is used, or the 'Condensed' and 'Compact' content densities"+" are used in combination.",resolutionurls:[e.createDocuRef("Documentation: Content Densities","topic/e54f729da8e3405fae5e4fe8ae7784c1")],check:function(t,i,n){var r=a("html");var c=r.find(".sapUiSizeCozy");var u=r.find(".sapUiSizeCompact");var d=r.find(".sapUiSizeCondensed");s(u,".sapUiSizeCozy","'Compact' content density is used within 'Cozy' area.",t);s(c,".sapUiSizeCompact","'Cozy' content density is used within 'Compact' area.",t);s(d,".sapUiSizeCozy","'Condensed' content density is used within 'Cozy' area.",t);s(c,".sapUiSizeCondensed","'Cozy' content density is used within 'Condensed' area.",t);if(d.length>0){var l=s(d,".sapUiSizeCompact",t);if(!l){e.reportIssue(t,"'Condensed' content density must be used in combination with 'Compact'.",o.High)}}if(sap.ui.getCore().getLoadedLibraries()["sap.m"]&&c.length===0&&u.length===0&&d.length===0){e.reportIssue(t,"If the sap.ui.table and the sap.m libraries are used together, a content density must be specified.",o.High)}}});var c=e.normalizeRule({id:"RowHeights",minversion:"1.38",categories:[n.Usage],title:"Row heights",description:"Checks whether the currently rendered rows have the expected height.",resolution:"Check whether content densities are correctly used, and only the supported controls are used as column templates, with their"+' wrapping property set to "false"',resolutionurls:[e.createDocuRef("Documentation: Content Densities","#/topic/e54f729da8e3405fae5e4fe8ae7784c1"),e.createDocuRef("Documentation: Supported controls","#/topic/148892ff9aea4a18b912829791e38f3e"),e.createDocuRef("API Reference: sap.ui.table.Column#getTemplate","#/api/sap.ui.table.Column/methods/getTemplate"),e.createFioriGuidelineResolutionEntry()],check:function(t,a,n){var s=e.find(n,true,"sap.ui.table.Table");var r=i.browser.chrome&&window.devicePixelRatio!=1;for(var c=0;c<s.length;c++){var u=s[c].getRows();var d=s[c]._getBaseRowHeight();var l=false;for(var p=0;p<u.length;p++){var h=u[p].getDomRef();var f=u[p].getDomRef("fixed");if(h){var g=h.getBoundingClientRect().height;var m=f?f.getBoundingClientRect().height:null;var C=g;if(r){var v=Math.abs(d-g);var w=Math.abs(m-g);if(v>1){l=true}else if(m!=null&&w>1){l=true;C=m}}else if(g!==d){l=true}else if(m!=null&&m!==d){l=true;C=m}if(l){e.reportIssue(t,"The row height was expected to be "+d+"px, but was "+C+"px instead."+" This causes issues with vertical scrolling.",o.High,u[p].getId());break}}}}}});var u=e.normalizeRule({id:"DynamicPageConfiguration",minversion:"1.38",categories:[n.Usage],title:"Table environment validation - 'sap.f.DynamicPage'",description:"Verifies that the DynamicPage is configured correctly from the table's perspective.",resolution:"If a table with visibleRowCountMode=Auto is placed inside a sap.f.DynamicPage, the fitContent property of the DynamicPage"+" should be set to true, otherwise false.",resolutionurls:[e.createDocuRef("API Reference: sap.f.DynamicPage#getFitContent","#/api/sap.f.DynamicPage/methods/getFitContent")],check:function(t,i,a){var n=e.find(a,true,"sap.ui.table.Table");function s(e,t){if(e){if(e.isA("sap.f.DynamicPage")){t(e)}s(e.getParent(),t)}}function r(i,a){if(i._getRowMode().isA("sap.ui.table.rowmodes.AutoRowMode")&&!a.getFitContent()){e.reportIssue(t,'A table with an auto row mode is placed inside a sap.f.DynamicPage with fitContent="false"',o.High,i.getId())}else if((i._getRowMode().isA("sap.ui.table.rowmodes.FixedRowMode")||i._getRowMode().isA("sap.ui.table.rowmodes.InteractiveRowMode"))&&a.getFitContent()){e.reportIssue(t,'A table with a fixed or interactive row mode is placed inside a sap.f.DynamicPage with fitContent="true"',o.Low,i.getId())}}for(var c=0;c<n.length;c++){s(n[c],r.bind(null,n[c]))}}});return[r,c,u]},true);