/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/thirdparty/jquery"],function(e){"use strict";var t=function(e){this._iMaxLength=e;this._aQueue=[];this._aEventHandlerRegistry=[]};t.prototype._attachEvent=function(e,t){if(typeof t!=="function"){throw new Error("Event handler must be a function")}this._aEventHandlerRegistry.push({event:e,handler:t})};t.prototype._detachEvent=function(e,t){for(var n=this._aEventHandlerRegistry.length;n--;){if(this._aEventHandlerRegistry[n].handler===t&&this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry.splice(n,1)}}};t.prototype._fireEvent=function(e,t){for(var n=0;n<this._aEventHandlerRegistry.length;n++){if(this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry[n].handler(t)}}};t.prototype._execNext=function(){var e,t=this;setTimeout(function(){t._aQueue.shift();e=t._aQueue[0];if(e){t._exec(e)}else{t._fireEvent("onQueueCompleted")}})};t.prototype._exec=function(t){var n=this,r=function(){n._execNext()};this._fireEvent("beforeQueueItemProcess",t.eventParameters);t.jqdeferred.resolve();t.wait.then(function(){t.wait.then(r)},e.proxy(n._cancel,n))};t.prototype.enqueue=function(t,n){var r={fn:t,eventParameters:n};r.jqdeferred=e.Deferred();r.defer=new Promise(function(e,t){r.jqdeferred.then(e,t)});r.wait=r.defer.then(t);if(!(this._iMaxLength===undefined)&&this._aQueue.length>=this._iMaxLength){r.jqdeferred.reject(new Error("Queue overflow: "+this._aQueue.length))}else{this._aQueue.push(r);if(this._aQueue.length===1){this._exec(r)}}return r.wait.then()};t.prototype._cancel=function(e){var t,n,r=this._aQueue.length;for(n=0;n<r;n++){t=this._aQueue[n];t.jqdeferred.reject(e||new Error("Queue cancellation"))}this._fireEvent("onQueueFailed");this._aQueue=[]};t.prototype.destroy=function(){this._aQueue=[]};return t},true);