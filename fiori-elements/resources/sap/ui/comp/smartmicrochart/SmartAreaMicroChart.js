/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/library","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartLabel","sap/ui/core/Control","sap/m/library","sap/ui/model/odata/CountMode","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(t,e,a,r,i,o,n,h,s,c){"use strict";var g=n.ValueColor;var l=s.extend("sap.ui.comp.smartmicrochart.SmartAreaMicroChart",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartAreaMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:true}}},renderer:c});l.prototype._CHART_TYPE=["Area","Line"];l.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Area",true);this.setAggregation("_chart",new e,true)};l.prototype.onBeforeRendering=function(){var t=this.getAggregation("_chart");t.setWidth(this.getWidth(),true);t.setHeight(this.getHeight(),true);t.setSize(this.getSize(),true)};l.prototype.setShowLabel=function(t){if(this.getShowLabel()!==t){this.setProperty("showLabel",t,true);this.getAggregation("_chart").setProperty("showLabel",t,true);this.invalidate()}return this};l.prototype.setEnableAutoBinding=function(){return this.setProperty("enableAutoBinding",true,true)};l.prototype.bindElement=function(){return this};l.prototype._createAndBindInnerChart=function(){this._createChartLabels();this._createChartItem("chart",this._oDataPointAnnotations.Value.Path);this._createChartItem("target",this._oDataPointAnnotations.TargetValue.Path);this._buildThreshold()};l.prototype._buildThreshold=function(){var t=this._oDataPointAnnotations.CriticalityCalculation;if(this._hasMember(t,"ImprovementDirection.EnumMember")){switch(t.ImprovementDirection.EnumMember){case s._MINIMIZE:this._createChartItem("minThreshold",t.ToleranceRangeHighValue.Path,g.Good);this._createChartItem("maxThreshold",t.DeviationRangeHighValue.Path,g.Error);break;case s._MAXIMIZE:this._createChartItem("minThreshold",t.DeviationRangeLowValue.Path,g.Error);this._createChartItem("maxThreshold",t.ToleranceRangeLowValue.Path,g.Good);break;case s._TARGET:this._createChartItem("minThreshold",t.DeviationRangeLowValue.Path,g.Error);this._createChartItem("maxThreshold",t.DeviationRangeHighValue.Path,g.Error);this._createChartItem("innerMinThreshold",t.ToleranceRangeLowValue.Path,g.Good);this._createChartItem("innerMaxThreshold",t.ToleranceRangeHighValue.Path,g.Good);break;default:break}}};l.prototype._createChartLabels=function(){var t,e=this._getLabelsMap();for(var a in e){t=new i;this.getAggregation("_chart").setAggregation(e[a],t,true)}};l.prototype._createChartItem=function(t,e,i){var o,n;o=new a({x:{path:this._oChartViewMetadata.dimensionFields[0],formatter:this._formatDimension.bind(this)},y:{path:e,type:"sap.ui.model.odata.type.Decimal"}});n=new r({points:{path:this._getBindingPath(),template:o,parameters:{countMode:h.None},events:{change:this._onBindingDataChange.bind(this)}},color:i});this.getAggregation("_chart").setAggregation(t,n,true)};l.prototype._onBindingDataChange=function(){var t=this.getAggregation("_chart").getAggregation("chart").getBinding("points");this._updateAssociations(t);this.updateChartLabels.call(this,t)};l.prototype._updateLabel=function(t,e){var a=this.getAggregation("_chart").getAggregation(t);a.setProperty("label",e.text,true);if(e.color){a.setProperty("color",e.color,true)}};l.prototype._getLabelsMap=function(){return{leftTop:"firstYLabel",rightTop:"lastYLabel",leftBottom:"firstXLabel",rightBottom:"lastXLabel"}};return l});