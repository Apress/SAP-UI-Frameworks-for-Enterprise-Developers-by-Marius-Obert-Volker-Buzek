/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/model/ListBinding"],function(e){"use strict";var t=true;function n(e){if(e&&e.type){if(e.type.toLowerCase().indexOf("edm")!==0){return true}}return false}function r(e,t){if(!e){return false}var n=e.getBindingInfo(t);var r=n&&n.path;if(!r){return false}return r.indexOf("/")===0}function a(e,t,n){var r;if(t){r=e.getBindingInfo(n);if(typeof r.model==="string"&&r.model!==""){r=undefined}}else{r=e.getBindingContext()}return r}function i(t,n,r,a){var i={name:t.name,bindingPath:t.name,entityType:n.name};var o=t["com.sap.vocabularies.Common.v1.Label"];i.label=o&&o.String;var u=t["com.sap.vocabularies.Common.v1.QuickInfo"];i.tooltip=u&&u.String;var f=t["com.sap.vocabularies.UI.v1.Hidden"];i.hideFromReveal=!!f&&f.Bool==="true";var l;if(!i.hideFromReveal){l=t["com.sap.vocabularies.Common.v1.FieldControl"];if(l&&l.EnumMember){i.hideFromReveal=l.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"}else{var m=l&&l.Path;if(m){var p=r.getBinding(a)instanceof e;if(!p){var d=r.getBindingContext().getProperty(m);i.hideFromReveal=d===0}}}}return i}function o(e,t,r,a){var o=e.property.map(function(e){return e["sap:field-control"]}).filter(Boolean);var u=function(e){return!o.includes(e.name)};var f=e.property.map(function(o){var f=i(o,e,r,a);if(n(o)){var l=t.getODataComplexType(o.type);if(l){f.properties=l.property.map(function(t){var n=i(t,e,r,a);n.bindingPath=o.name+"/"+t.name;n.referencedComplexPropertyName=f.label||f.name;return n}).filter(u)}}return f});if(e.navigationProperty){var l=e.navigationProperty.map(function(n){var r=t.getODataAssociationEnd(e,n.name)&&t.getODataAssociationEnd(e,n.name).type;return{name:n.name,entityType:r,bindingPath:n.name,unsupported:true}});f=f.concat(l)}return f.filter(u)}function u(e,t,n){if(n.path){return n.path}var i=r(e,t);var o=a(e,i,t);if(o){return i?o.path:o.getPath()}}function f(e,t){return Promise.resolve().then(function(){var n=e.getModel(t.modelName);if(n){var r=n.getMetadata().getName();if(r==="sap.ui.model.odata.ODataModel"||r==="sap.ui.model.odata.v2.ODataModel"){var a=n.getMetaModel();return a.loaded().then(function(){return a})}}})}function l(e,t){var n=e.getMetaContext(t);return n.getObject()}function m(e,t,n){var r=e.getMetadata().getAggregation();if(r){var a=e.getBindingInfo(r.name);var i=a&&a.template;if(i){var o=e.getBindingPath(r.name);var u=t.getODataAssociationEnd(n,o);var f=u&&u.type;if(f){var l=t.getODataEntityType(f);n=l}}}return n}function p(e,t,n){return f(e,n).then(function(r){var a=[];if(r){var i=u(e,t,n);if(i){var f=l(r,i);f=m(e,r,f);a=o(f,r,e,t)}}return a})}function d(e){return e.modifier.createControl("sap.ui.comp.smartfield.SmartLabel",e.appComponent,e.view,e.labelFor+"-label",{labelFor:e.labelFor},t)}function v(e){return e.modifier.createControl("sap.ui.comp.smartfield.SmartField",e.appComponent,e.view,e.fieldSelector,{value:"{"+e.bindingPath+"}"},t)}var c={};c.getPropertyInfo=function(e){return p(e.element,e.aggregationName,e.payload)};c.createLabel=function(e){return d(e)};c.createControlForProperty=function(e){return v(e).then(function(e){return{control:e,valueHelp:undefined}})};return c});