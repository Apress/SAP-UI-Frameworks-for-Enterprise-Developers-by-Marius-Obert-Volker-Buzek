/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseRename","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t,r){"use strict";var n="label";var a="fieldLabel";var i="XFLD";var o=e.createRenameChangeHandler({changePropertyName:a,translationTextType:i});o.applyChange=function(e,t,r){var i=e.getText(a);if(typeof i==="string"){return this.setLabelPropertyOnControl(t,i,r.modifier,n).then(function(t){e.setRevertData(t)})}return Promise.resolve()};o.revertChange=function(e,r,a){var i=e.getRevertData();if(i||i===""){if(i==="$$Handled_Internally$$"){i=undefined}return this.setLabelPropertyOnControl(r,i,a.modifier,n).then(function(){e.resetRevertData()})}t.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");return Promise.resolve()};o.setLabelPropertyOnControl=function(e,t,r,n){return Promise.resolve().then(r.getProperty.bind(r,e,n)).then(function(t){if(t&&typeof t!=="string"){n="text";e=t}}).then(r.getPropertyBindingOrProperty.bind(r,e,n)).then(function(a){r.setPropertyBindingOrProperty(e,n,t);return a||"$$Handled_Internally$$"})};o.getChangeVisualizationInfo=function(e,t){var n=e.getText(a),i=e.getRevertData(),o,l,s;if(i==="$$Handled_Internally$$"){i=undefined;o=e.getSelector();l=r.bySelector(o,t);if(l.isA("sap.ui.comp.smartform.GroupElement")){s=l.getDataSourceLabel();if(s){i=s}}}return{descriptionPayload:{originalLabel:i,newLabel:n}}};return o},true);