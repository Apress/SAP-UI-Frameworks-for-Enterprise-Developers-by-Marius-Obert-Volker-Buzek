/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/comp/library","./ColumnWrapper","sap/ui/core/CustomData"],function(e,t,a,r){"use strict";var o=t.personalization.AggregationRole;var n=e.extend("sap.ui.comp.personalization.ChartWrapper",{constructor:function(t,a){e.apply(this,arguments)},metadata:{library:"sap.ui.comp",properties:{externalFilters:{type:"sap.m.P13nFilterItem[]",defaultValue:[]}},aggregations:{columns:{type:"sap.ui.comp.personalization.ColumnWrapper",multiple:true,singularName:"column"}},associations:{chart:{type:"sap.chart.Chart",multiple:false}},events:{externalFiltersSet:{parameters:{filters:{type:"sap.m.P13nFilterItem[]"}}}}}});n.prototype.getChartObject=function(){var e=this.getAssociation("chart");if(typeof e==="string"){e=sap.ui.getCore().byId(e)}return e};n.prototype.getModel=function(){return this.getChartObject().getModel()};n.prototype.getDomRef=function(){var e=this.getChartObject();return e&&e.getDomRef()};n.createChartWrapper=function(e,t,l){var i;var s={};e.getDimensions().forEach(function(t){i=t.data("p13nData");s[i.columnKey]=new a({label:t.getLabel(),tooltip:t.getTooltip(),selected:e.getVisibleDimensions().indexOf(t.getName())>-1,aggregationRole:o.Dimension,role:t.getRole()?t.getRole():t.getMetadata().getProperty("role").getDefaultValue(),sorted:i.sorted,sortOrder:i.sortOrder,customData:new r({key:"p13nData",value:i}),hierarchyLevel:i.hierarchyLevel,chart:e})});e.getMeasures().forEach(function(t){i=t.data("p13nData");s[i.columnKey]=new a({label:t.getLabel(),tooltip:t.getTooltip(),selected:e.getVisibleMeasures().indexOf(t.getName())>-1,aggregationRole:o.Measure,role:t.getRole()?t.getRole():t.getMetadata().getProperty("role").getDefaultValue(),sorted:i.sorted,sortOrder:i.sortOrder,customData:new r({key:"p13nData",value:i}),chart:e})});if(t){t.forEach(function(t){s[t.columnKey]=new a({label:t.label,tooltip:t.tooltip,selected:false,aggregationRole:o.NotDimeasure,sorted:t.sorted,sortOrder:t.sortOrder,customData:new r({key:"p13nData",value:t}),chart:e});if(!s[t.columnKey].getParent()){e.addDependent(s[t.columnKey])}})}return new n({chart:e,columns:l.map(function(e){return s[e]})})};return n});