/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/layout/library","./ListPanelStackRenderer"],function(t,e,o,n){"use strict";var a=e.extend("sap.ui.vk.ListPanelStack",{metadata:{library:"sap.ui.vk",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},expanded:{type:"boolean",group:"Misc",defaultValue:true},expandAnimation:{type:"boolean",group:"Misc",defaultValue:true},collapsible:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{content:{type:"sap.ui.vk.ListPanel",multiple:true,singularName:"content"},layout:{type:"sap.ui.layout.VerticalLayout",multiple:false,visibility:"hidden"}}}});a.prototype.init=function(){this._oLayout=new sap.ui.layout.VerticalLayout;this._oLayout.addStyleClass("sapUiVkLPSTrans");this.setAggregation("layout",this._oLayout,true);this._bFirstTime=true};a.prototype.exit=function(){if(this._oLayout){this._oLayout.destroy();this._oLayout=undefined}};a.prototype.getContent=function(){return this._oLayout.getContent()};a.prototype.addContent=function(t){t.attachExpand(this._onContentExpand.bind(this));t.attachHeaderIconPress(this._onContentHeaderIconPress.bind(this));return this._oLayout.addContent(t)};a.prototype.removeContent=function(t){return this._oLayout.removeContent(t)};a.prototype.insertContent=function(t,e){return this._oLayout.insertContent(t,e)};a.prototype.removeAllContent=function(){return this._oLayout.removeAllContent()};a.prototype.getWidth=function(){return this._oLayout.getWidth()};a.prototype.setWidth=function(t){this.setProperty("width",t,true);return this._oLayout.setWidth(t)};a.prototype.setExpanded=function(t){if(t!=this.getExpanded()){if(t){this._expand()}else{this._collapse()}}return this};a.prototype.setExpandAnimation=function(t){this._oLayout.removeStyleClass("sapUiVkLPSTrans");if(t){this._oLayout.addStyleClass("sapUiVkLPSTrans")}return this.setProperty("expandAnimation",t,true)};a.prototype.onBeforeRendering=function(){if(this._bFirstTime){var t=false;var e=this.getContent();for(var o=0;o<e.length;++o){if(e[o].getExpanded()){t=true}}this.setExpanded(t);this._bFirstTime=false}};a.prototype.onAfterRendering=function(){if(!this.getExpanded()){this._updateCollapsedLayoutWidth()}};a.prototype._onContentExpand=function(t){var e=false;var o=this._oLayout.getContent();for(var n=0;n<o.length;++n){if(o[n].getExpanded()){e=true}}this.setExpanded(e)};a.prototype._onContentHeaderIconPress=function(t){var e=t.oSource.getExpanded()?false:true;t.oSource.setExpanded(e);var o=false;var n=this._oLayout.getContent();for(var a=0;a<n.length;++a){if(n[a].getExpanded()){o=true;break}}this.setExpanded(o)};a.prototype._expand=function(){this._oLayout.removeStyleClass("sapUiVkLPSCollapse");this._oLayout.setWidth(this.getProperty("width"));this.setProperty("expanded",true,true)};a.prototype._collapse=function(){if(!this.getCollapsible()){return}var t=this.getContent();for(var e=0;e<t.length;++e){t[e].setExpanded(false)}this._oLayout.addStyleClass("sapUiVkLPSCollapse");this._updateCollapsedLayoutWidth();this.setProperty("expanded",false,true)};a.prototype._updateCollapsedLayoutWidth=function(){if(this._oLayout.$().closest(".sapUiSizeCompact").length===0){this._oLayout.setWidth("3rem")}else{this._oLayout.setWidth("2.5rem")}};return a});