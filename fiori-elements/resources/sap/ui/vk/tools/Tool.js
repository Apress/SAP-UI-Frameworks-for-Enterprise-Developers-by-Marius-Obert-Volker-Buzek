/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/Element","sap/base/Log"],function(t,e){"use strict";var i=t.extend("sap.ui.vk.tools.Tool",{metadata:{library:"sap.ui.vk",properties:{targetViewportType:"any",toolid:"string",active:{type:"boolean",defaultValue:false},footprint:{type:"string[]"}},associations:{gizmoContainer:{type:"sap.ui.core.Control",multiple:false}},aggregations:{gizmo:{type:"sap.ui.vk.tools.Gizmo",multiple:false}},events:{enabled:{parameters:{enabled:"boolean",reason:"string"}}}},constructor:function(e,i){this._viewport=null;this._handler=null;t.apply(this,arguments)}});i.prototype.init=function(){if(t.prototype.init){t.prototype.init.call(this)}};i.prototype.getViewport=function(){return this._viewport};i.prototype.setViewport=function(t){var e=t&&t.getMetadata().getName();this._viewport=e!=null&&this.getFootprint().indexOf(e)>=0?t:null};i.prototype.isViewportType=function(t){if(this._viewport&&this._viewport.getMetadata().getName()===t){return true}return false};i.prototype.getViewportImplementation=function(t){var e=t;if(t&&typeof t.getImplementation==="function"){e=t.getImplementation()||t}return e};i.prototype.setActive=function(t,i,o){if(t===this.getProperty("active")){return}var r=this.getViewportImplementation(i)||this._viewport;var n=r&&r.getMetadata().getName();var a;if(this.getFootprint().indexOf(n)>=0){this._viewport=r;this.setProperty("active",t,true);if(this.getGizmo()){o=o||r;this.setAssociation("gizmoContainer",o);if(o.getDomRef()){o.invalidate()}}this._viewport.setShouldRenderFrame();a=t?"":"Disabled by application logic"}else{this._viewport=null;this.setProperty("active",false,true);a="Tool does not support Viewport type: "+n;e.warning(a)}this.fireEnabled({enabled:this.getActive(),reason:a})};i.prototype.getGizmoForContainer=function(t){var e=this.getGizmo();if(t.getId()===this.getGizmoContainer()&&e&&this.getActive()){return e}};i.prototype.destroy=function(){t.prototype.destroy.call(this);this._viewport=null;this._handler=null};i.prototype._addLocoHandler=function(){if(!this._viewport||!this._viewport._loco){return false}this._viewport._loco.addHandler(this._handler,this._handler._priority);return true};i.prototype._removeLocoHandler=function(t){if(this._viewport&&this._viewport._loco){this._viewport._loco.removeHandler(this._handler)}};return i});