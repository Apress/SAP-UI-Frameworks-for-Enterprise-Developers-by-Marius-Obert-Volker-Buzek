/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./HighlightMeasurementToolHandler","./Tool"],function(e,t){"use strict";var i=t.extend("sap.ui.vk.tools.HighlightMeasurementTool",{metadata:{library:"sap.ui.vk"}});var s=i.getMetadata().getParent().getClass().prototype;i.prototype.init=function(){if(s.init){s.init.call(this)}this._viewport=null;this._handler=new e(this);this._highlightedMeasurementDomRef=null;this.setFootprint(["sap.ui.vk.threejs.Viewport","sap.ui.vk.svg.Viewport"])};i.prototype.setActive=function(e,t,i){s.setActive.call(this,e,t,i);if(this._viewport){if(e){this._selection=[];this._addLocoHandler();this._viewport.addStyleClass("sapUiVizKitHighlightDistanceCursor")}else{this._viewport.removeStyleClass("sapUiVizKitHighlightDistanceCursor");this.clearSelection();this.highlightMeasurement(null,this._viewport.getMeasurementSurface());this._removeLocoHandler()}}return this};i.prototype.highlightMeasurement=function(e){var t=this._highlightedMeasurementDomRef;if(e===t){return null}if(t!=null&&this._selection.indexOf(t)<0){this._viewport.getMeasurementSurface().highlightMeasurement(t._measurement,false)}if(e!=null&&this._selection.indexOf(e)<0){this._viewport.getMeasurementSurface().highlightMeasurement(e._measurement,true,this._viewport,this._viewport.getCamera())}this._highlightedMeasurementDomRef=e;return this};i.prototype.selectMeasurement=function(e){var t=this._selection.indexOf(e);if(t<0){this._selection.push(e);if(e!==this._highlightedMeasurementDomRef){this._viewport.getMeasurementSurface().highlightMeasurement(e._measurement,true,this._viewport,this._viewport.getCamera())}}else{this._selection.splice(t,1);if(e!==this._highlightedMeasurementDomRef){this._viewport.getMeasurementSurface().highlightMeasurement(e._measurement,false)}}return this};i.prototype.clearSelection=function(){this._selection.forEach(function(e){if(e!==this._highlightedMeasurementDomRef){this._viewport.getMeasurementSurface().highlightMeasurement(e._measurement,false)}},this);this._selection.length=0};return i});